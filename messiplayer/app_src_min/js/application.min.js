!function(){function t(e){this.mode=a.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=[],i=0,s=this.data.length;i<s;i++){var o=this.data.charCodeAt(i);65536<o?(t[0]=240|(1835008&o)>>>18,t[1]=128|(258048&o)>>>12,t[2]=128|(4032&o)>>>6,t[3]=128|63&o):2048<o?(t[0]=224|(61440&o)>>>12,t[1]=128|(4032&o)>>>6,t[2]=128|63&o):128<o?(t[0]=192|(1984&o)>>>6,t[1]=128|63&o):t[0]=o,this.parsedData=this.parsedData.concat(t)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function l(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function g(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var i=0;i<e.length&&0==e[i];)i++;this.num=new Array(e.length-i+t);for(var s=0;s<e.length-i;s++)this.num[s]=e[s+i]}function d(e,t){this.totalCount=e,this.dataCount=t}function c(){this.buffer=[],this.length=0}function s(){var e=!1,t=navigator.userAgent;return e=/android/i.test(t)&&(e=!0,aMat=t.toString().match(/android ([0-9]\.[0-9])/i))&&aMat[1]?parseFloat(aMat[1]):e}function i(e,t){for(var i,s=1,o=(e=e,(i=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a")).length+(i.length!=e?3:0)),a=0,n=b.length;a<=n;a++){var r=0;switch(t){case h.L:r=b[a][0];break;case h.M:r=b[a][1];break;case h.Q:r=b[a][2];break;case h.H:r=b[a][3]}if(o<=r)break;s++}if(b.length<s)throw new Error("Too long data");return s}t.prototype={getLength:function(){return this.parsedData.length},write:function(e){for(var t=0,i=this.parsedData.length;t<i;t++)e.put(this.parsedData[t],8)}},l.prototype={addData:function(e){e=new t(e);this.dataList.push(e),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[i][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),7<=this.typeNumber&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var i=-1;i<=7;i++)if(!(e+i<=-1||this.moduleCount<=e+i))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(this.modules[e+i][t+s]=0<=i&&i<=6&&(0==s||6==s)||0<=s&&s<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=s&&s<=4)},getBestMaskPattern:function(){for(var e=0,t=0,i=0;i<8;i++){this.makeImpl(!0,i);var s=v.getLostPoint(this);(0==i||s<e)&&(e=s,t=i)}return t},createMovieClip:function(e,t,i){var s=e.createEmptyMovieClip(t,i);this.make();for(var o=0;o<this.modules.length;o++)for(var a=+o,n=0;n<this.modules[o].length;n++){var r=+n;this.modules[o][n]&&(s.beginFill(0,100),s.moveTo(r,a),s.lineTo(1+r,a),s.lineTo(1+r,1+a),s.lineTo(r,1+a),s.endFill())}return s},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var e=v.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var i=0;i<e.length;i++){var s=e[t],o=e[i];if(null==this.modules[s][o])for(var a=-2;a<=2;a++)for(var n=-2;n<=2;n++)this.modules[s+a][o+n]=-2==a||2==a||-2==n||2==n||0==a&&0==n}},setupTypeNumber:function(e){for(var t=v.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var s=!e&&1==(1&t>>i);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=s}for(i=0;i<18;i++){s=!e&&1==(1&t>>i);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=s}},setupTypeInfo:function(e,t){for(var t=this.errorCorrectLevel<<3|t,i=v.getBCHTypeInfo(t),s=0;s<15;s++){var o=!e&&1==(1&i>>s);s<6?this.modules[s][8]=o:s<8?this.modules[s+1][8]=o:this.modules[this.moduleCount-15+s][8]=o}for(s=0;s<15;s++){o=!e&&1==(1&i>>s);s<8?this.modules[8][this.moduleCount-s-1]=o:s<9?this.modules[8][15-s-1+1]=o:this.modules[8][15-s-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var i=-1,s=this.moduleCount-1,o=7,a=0,n=this.moduleCount-1;0<n;n-=2)for(6==n&&n--;;){for(var r,l,c=0;c<2;c++)null==this.modules[s][n-c]&&(r=!1,a<e.length&&(r=1==(1&e[a]>>>o)),l=v.getMask(t,s,n-c),this.modules[s][n-c]=r=l?!r:r,-1==--o)&&(a++,o=7);if((s+=i)<0||this.moduleCount<=s){s-=i,i=-i;break}}}},l.PAD0=236,l.PAD1=17,l.createData=function(e,t,i){for(var s=d.getRSBlocks(e,t),o=new c,a=0;a<i.length;a++){var n=i[a];o.put(n.mode,4),o.put(n.getLength(),v.getLengthInBits(n.mode,e)),n.write(o)}for(var r=0,a=0;a<s.length;a++)r+=s[a].dataCount;if(o.getLengthInBits()>8*r)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*r+")");for(o.getLengthInBits()+4<=8*r&&o.put(0,4);0!=o.getLengthInBits()%8;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*r)&&(o.put(l.PAD0,8),!(o.getLengthInBits()>=8*r));)o.put(l.PAD1,8);return l.createBytes(o,s)},l.createBytes=function(e,t){for(var i=0,s=0,o=0,a=new Array(t.length),n=new Array(t.length),r=0;r<t.length;r++){var l=t[r].dataCount,c=t[r].totalCount-l,s=Math.max(s,l),o=Math.max(o,c);a[r]=new Array(l);for(var d=0;d<a[r].length;d++)a[r][d]=255&e.buffer[d+i];i+=l;var l=v.getErrorCorrectPolynomial(c),h=new g(a[r],l.getLength()-1).mod(l);n[r]=new Array(l.getLength()-1);for(d=0;d<n[r].length;d++){var u=d+h.getLength()-n[r].length;n[r][d]=0<=u?h.get(u):0}}for(var _=0,d=0;d<t.length;d++)_+=t[d].totalCount;for(var m=new Array(_),p=0,d=0;d<s;d++)for(r=0;r<t.length;r++)d<a[r].length&&(m[p++]=a[r][d]);for(d=0;d<o;d++)for(r=0;r<t.length;r++)d<n[r].length&&(m[p++]=n[r][d]);return m};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h={L:1,M:0,Q:3,H:2},o=0,n=1,r=2,u=3,_=4,m=5,p=6,f=7,v={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;0<=v.getBCHDigit(t)-v.getBCHDigit(v.G15);)t^=v.G15<<v.getBCHDigit(t)-v.getBCHDigit(v.G15);return(e<<10|t)^v.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;0<=v.getBCHDigit(t)-v.getBCHDigit(v.G18);)t^=v.G18<<v.getBCHDigit(t)-v.getBCHDigit(v.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return v.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,i){switch(e){case o:return 0==(t+i)%2;case n:return 0==t%2;case r:return 0==i%3;case u:return 0==(t+i)%3;case _:return 0==(Math.floor(t/2)+Math.floor(i/3))%2;case m:return 0==t*i%2+t*i%3;case p:return 0==(t*i%2+t*i%3)%2;case f:return 0==(t*i%3+(t+i)%2)%2;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new g([1],0),i=0;i<e;i++)t=t.multiply(new g([1,y.gexp(i)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),i=0,s=0;s<t;s++)for(var o=0;o<t;o++){for(var a=0,n=e.isDark(s,o),r=-1;r<=1;r++)if(!(s+r<0||t<=s+r))for(var l=-1;l<=1;l++)o+l<0||t<=o+l||0==r&&0==l||n!=e.isDark(s+r,o+l)||a++;5<a&&(i+=3+a-5)}for(s=0;s<t-1;s++)for(o=0;o<t-1;o++){var c=0;e.isDark(s,o)&&c++,e.isDark(s+1,o)&&c++,e.isDark(s,o+1)&&c++,e.isDark(s+1,o+1)&&c++,0!=c&&4!=c||(i+=3)}for(s=0;s<t;s++)for(o=0;o<t-6;o++)e.isDark(s,o)&&!e.isDark(s,o+1)&&e.isDark(s,o+2)&&e.isDark(s,o+3)&&e.isDark(s,o+4)&&!e.isDark(s,o+5)&&e.isDark(s,o+6)&&(i+=40);for(o=0;o<t;o++)for(s=0;s<t-6;s++)e.isDark(s,o)&&!e.isDark(s+1,o)&&e.isDark(s+2,o)&&e.isDark(s+3,o)&&e.isDark(s+4,o)&&!e.isDark(s+5,o)&&e.isDark(s+6,o)&&(i+=40);for(var d=0,o=0;o<t;o++)for(s=0;s<t;s++)e.isDark(s,o)&&d++;return i+10*(Math.abs(100*d/t/t-50)/5)}},y={glog:function(e){if(e<1)throw new Error("glog("+e+")");return y.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;256<=e;)e-=255;return y.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)y.EXP_TABLE[e]=1<<e;for(e=8;e<256;e++)y.EXP_TABLE[e]=y.EXP_TABLE[e-4]^y.EXP_TABLE[e-5]^y.EXP_TABLE[e-6]^y.EXP_TABLE[e-8];for(e=0;e<255;e++)y.LOG_TABLE[y.EXP_TABLE[e]]=e;g.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var s=0;s<e.getLength();s++)t[i+s]^=y.gexp(y.glog(this.get(i))+y.glog(e.get(s)));return new g(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=y.glog(this.get(0))-y.glog(e.get(0)),i=new Array(this.getLength()),s=0;s<this.getLength();s++)i[s]=this.get(s);for(s=0;s<e.getLength();s++)i[s]^=y.gexp(y.glog(e.get(s))+t);return new g(i,0).mod(e)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(e,t){var i=d.getRsBlockTable(e,t);if(null==i)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=i.length/3,o=[],a=0;a<s;a++)for(var n=i[3*a+0],r=i[3*a+1],l=i[3*a+2],c=0;c<n;c++)o.push(new d(r,l));return o},d.getRsBlockTable=function(e,t){switch(t){case h.L:return d.RS_BLOCK_TABLE[4*(e-1)+0];case h.M:return d.RS_BLOCK_TABLE[4*(e-1)+1];case h.Q:return d.RS_BLOCK_TABLE[4*(e-1)+2];case h.H:return d.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},c.prototype={get:function(e){var t=Math.floor(e/8);return 1==(1&this.buffer[t]>>>7-e%8)},put:function(e,t){for(var i=0;i<t;i++)this.putBit(1==(1&e>>>t-i-1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],k=(S.prototype.draw=function(e){function t(e,t){var i,s=document.createElementNS("http://www.w3.org/2000/svg",e);for(i in t)t.hasOwnProperty(i)&&s.setAttribute(i,t[i]);return s}var i=this._htOption,s=this._el,o=e.getModuleCount(),a=(Math.floor(i.width/o),Math.floor(i.height/o),this.clear(),t("svg",{viewBox:"0 0 "+String(o)+" "+String(o),width:"100%",height:"100%",fill:i.colorLight}));a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),s.appendChild(a),a.appendChild(t("rect",{fill:i.colorDark,width:"1",height:"1",id:"template"}));for(var n,r=0;r<o;r++)for(var l=0;l<o;l++)e.isDark(r,l)&&((n=t("use",{x:String(r),y:String(l)})).setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),a.appendChild(n))},S.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},S),w="svg"===document.documentElement.tagName.toLowerCase()?k:"undefined"!=typeof CanvasRenderingContext2D?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function t(e,t){this._bIsPainted=!1,this._android=s(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null}var c,d;this._android&&this._android<=2.1&&(c=1/window.devicePixelRatio,d=CanvasRenderingContext2D.prototype.drawImage,CanvasRenderingContext2D.prototype.drawImage=function(e,t,i,s,o,a,n,r){if("nodeName"in e&&/img/i.test(e.nodeName))for(var l=arguments.length-1;1<=l;l--)arguments[l]=arguments[l]*c;else void 0===r&&(arguments[1]*=c,arguments[2]*=c,arguments[3]*=c,arguments[4]*=c);d.apply(this,arguments)});return t.prototype.draw=function(e){var t=this._elImage,i=this._oContext,s=this._htOption,o=e.getModuleCount(),a=s.width/o,n=s.height/o,r=Math.round(a),l=Math.round(n);t.style.display="none",this.clear();for(var c=0;c<o;c++)for(var d=0;d<o;d++){var h=e.isDark(c,d),u=d*a,_=c*n;i.strokeStyle=h?s.colorDark:s.colorLight,i.lineWidth=1,i.fillStyle=h?s.colorDark:s.colorLight,i.fillRect(u,_,a,n),i.strokeRect(Math.floor(u)+.5,Math.floor(_)+.5,r,l),i.strokeRect(Math.ceil(u)-.5,Math.ceil(_)-.5,r,l)}this._bIsPainted=!0},t.prototype.makeImage=function(){this._bIsPainted&&function(e,t){var i=this;i._fFail=t,i._fSuccess=e,null===i._bSupportDataURI?((t=document.createElement("img")).onabort=e=function(){i._bSupportDataURI=!1,i._fFail&&_fFail.call(i)},t.onerror=e,t.onload=function(){i._bSupportDataURI=!0,i._fSuccess&&i._fSuccess.call(i)},t.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="):!0===i._bSupportDataURI&&i._fSuccess?i._fSuccess.call(i):!1===i._bSupportDataURI&&i._fFail&&i._fFail.call(i)}.call(this,e)},t.prototype.isPainted=function(){return this._bIsPainted},t.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},t.prototype.round=function(e){return e&&Math.floor(1e3*e)/1e3},t}():(C.prototype.draw=function(e){for(var t=this._htOption,i=this._el,s=e.getModuleCount(),o=Math.floor(t.width/s),a=Math.floor(t.height/s),n=['<table style="border:0;border-collapse:collapse;">'],r=0;r<s;r++){n.push("<tr>");for(var l=0;l<s;l++)n.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+o+"px;height:"+a+"px;background-color:"+(e.isDark(r,l)?t.colorDark:t.colorLight)+';"></td>');n.push("</tr>")}n.push("</table>"),i.innerHTML=n.join("");var i=i.childNodes[0],c=(t.width-i.offsetWidth)/2,d=(t.height-i.offsetHeight)/2;0<c&&0<d&&(i.style.margin=d+"px "+c+"px")},C.prototype.clear=function(){this._el.innerHTML=""},C);function C(e,t){this._el=e,this._htOption=t}function S(e,t){this._el=e,this._htOption=t}(QRCode=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:h.H},t="string"==typeof t?{text:t}:t)for(var i in t)this._htOption[i]=t[i];"string"==typeof e&&(e=document.getElementById(e)),this._android=s(),this._el=e,this._oQRCode=null,this._oDrawing=new w(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(e){this._oQRCode=new l(i(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||3<=this._android)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=h}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Popper=t()}(this,function(){function a(e){return e&&"[object Function]"==={}.toString.call(e)}function h(e,t){return 1!==e.nodeType?[]:(e=e.ownerDocument.defaultView.getComputedStyle(e,null),t?e[t]:e)}function l(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function d(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=h(e),i=t.overflow;return/(auto|scroll|overlay)/.test(i+t.overflowY+t.overflowX)?e:d(l(e))}function c(e){return e&&e.referenceNode?e.referenceNode:e}function u(e){return 11===e?G:10!==e&&G||q}function _(e){if(!e)return document.documentElement;for(var t=u(10)?document.body:null,i=e.offsetParent||null;i===t&&e.nextElementSibling;)i=(e=e.nextElementSibling).offsetParent;var s=i&&i.nodeName;return s&&"BODY"!==s&&"HTML"!==s?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===h(i,"position")?_(i):i:(e?e.ownerDocument:document).documentElement}function n(e){return null===e.parentNode?e:n(e.parentNode)}function m(e,t){var i,s,o;return e&&e.nodeType&&t&&t.nodeType?(s=(o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING)?e:t,o=o?t:e,(i=document.createRange()).setStart(s,0),i.setEnd(o,0),e!==(i=i.commonAncestorContainer)&&t!==i||s.contains(o)?"BODY"===(o=(s=i).nodeName)||"HTML"!==o&&_(s.firstElementChild)!==s?_(i):i:(o=n(e)).host?m(o.host,t):m(e,n(t).host)):document.documentElement}function p(e,t){var t="top"===(1<arguments.length&&void 0!==t?t:"top")?"scrollTop":"scrollLeft",i=e.nodeName;return("BODY"===i||"HTML"===i?(i=e.ownerDocument.documentElement,e.ownerDocument.scrollingElement||i):e)[t]}function o(e,t){var t="x"===t?"Left":"Top",i="Left"==t?"Right":"Bottom";return parseFloat(e["border"+t+"Width"],10)+parseFloat(e["border"+i+"Width"],10)}function s(e,t,i,s){return P(t["offset"+e],t["scroll"+e],i["client"+e],i["offset"+e],i["scroll"+e],u(10)?parseInt(i["offset"+e])+parseInt(s["margin"+("Height"===e?"Top":"Left")])+parseInt(s["margin"+("Height"===e?"Bottom":"Right")]):0)}function g(e){var t=e.body,e=e.documentElement,i=u(10)&&getComputedStyle(e);return{height:s("Height",t,e,i),width:s("Width",t,e,i)}}function f(e){return B({},e,{right:e.left+e.width,bottom:e.top+e.height})}function v(e){var t={};try{u(10)?(t=e.getBoundingClientRect(),i=p(e,"top"),s=p(e,"left"),t.top+=i,t.left+=s,t.bottom+=i,t.right+=s):t=e.getBoundingClientRect()}catch(e){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},s="HTML"===e.nodeName?g(e.ownerDocument):{},t=s.width||e.clientWidth||i.width,s=s.height||e.clientHeight||i.height,t=e.offsetWidth-t,s=e.offsetHeight-s;return(t||s)&&(t-=o(e=h(e),"x"),s-=o(e,"y"),i.width-=t,i.height-=s),f(i)}function y(e,t,i){var i=2<arguments.length&&void 0!==i&&i,s=u(10),o="HTML"===t.nodeName,a=v(e),n=v(t),e=d(e),r=h(t),l=parseFloat(r.borderTopWidth,10),c=parseFloat(r.borderLeftWidth,10),n=(i&&o&&(n.top=P(n.top,0),n.left=P(n.left,0)),f({top:a.top-n.top-l,left:a.left-n.left-c,width:a.width,height:a.height}));return n.marginTop=0,n.marginLeft=0,!s&&o&&(a=parseFloat(r.marginTop,10),o=parseFloat(r.marginLeft,10),n.top-=l-a,n.bottom-=l-a,n.left-=c-o,n.right-=c-o,n.marginTop=a,n.marginLeft=o),n=(s&&!i?t.contains(e):t===e&&"BODY"!==e.nodeName)?function(e,t,i){var i=2<arguments.length&&void 0!==i&&i,s=p(t,"top"),t=p(t,"left"),i=i?-1:1;return e.top+=s*i,e.bottom+=s*i,e.left+=t*i,e.right+=t*i,e}(n,t):n}function b(e){if(!e||!e.parentElement||u())return document.documentElement;for(var t=e.parentElement;t&&"none"===h(t,"transform");)t=t.parentElement;return t||document.documentElement}function k(e,t,i,s,o){var a,o=4<arguments.length&&void 0!==o&&o,n={top:0,left:0},r=o?b(e):m(e,c(t)),r=("viewport"===s?n=function(e,t){var t=1<arguments.length&&void 0!==t&&t,i=e.ownerDocument.documentElement,e=y(e,i),s=P(i.clientWidth,window.innerWidth||0),o=P(i.clientHeight,window.innerHeight||0),a=t?0:p(i),t=t?0:p(i,"left");return f({top:a-e.top+e.marginTop,left:t-e.left+e.marginLeft,width:s,height:o})}(r,o):("scrollParent"===s?"BODY"===(a=d(l(t))).nodeName&&(a=e.ownerDocument.documentElement):a="window"===s?e.ownerDocument.documentElement:s,t=y(a,r,o),"HTML"!==a.nodeName||function e(t){var i=t.nodeName;return"BODY"!==i&&"HTML"!==i&&("fixed"===h(t,"position")||!!(i=l(t))&&e(i))}(r)?n=t:(o=(s=g(e.ownerDocument)).height,a=s.width,n.top+=t.top-t.marginTop,n.bottom=o+t.top,n.left+=t.left-t.marginLeft,n.right=a+t.left)),"number"==typeof(i=i||0));return n.left+=r?i:i.left||0,n.top+=r?i:i.top||0,n.right-=r?i:i.right||0,n.bottom-=r?i:i.bottom||0,n}function r(e,t,i,s,o,a){var n,a=5<arguments.length&&void 0!==a?a:0;return-1===e.indexOf("auto")?e:(s=k(i,s,a,o),n={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}},(0<(o=(a=Object.keys(n).map(function(e){return B({key:e},n[e],{area:(e=n[e]).width*e.height})}).sort(function(e,t){return t.area-e.area})).filter(function(e){return e.width>=i.clientWidth&&e.height>=i.clientHeight})).length?o:a)[0].key+((t=e.split("-")[1])?"-"+t:""))}function w(e,t,i,s){s=3<arguments.length&&void 0!==s?s:null;return y(i,s?b(t):m(t,c(i)),s)}function C(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),i=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),t=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+t,height:e.offsetHeight+i}}function S(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function T(e,t,i){i=i.split("-")[0];var e=C(e),s={width:e.width,height:e.height},o=-1!==["right","left"].indexOf(i),a=o?"top":"left",n=o?"left":"top",r=o?"height":"width",o=o?"width":"height";return s[a]=t[a]+t[r]/2-e[r]/2,s[n]=i===n?t[n]-e[o]:t[S(n)],s}function $(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function M(e,i,t){var s,o;return(void 0===t?e:e.slice(0,(e=e,s="name",o=t,Array.prototype.findIndex?e.findIndex(function(e){return e[s]===o}):(t=$(e,function(e){return e[s]===o}),e.indexOf(t))))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var t=e.function||e.fn;e.enabled&&a(t)&&(i.offsets.popper=f(i.offsets.popper),i.offsets.reference=f(i.offsets.reference),i=t(i,e))}),i}function t(e,i){return e.some(function(e){var t=e.name;return e.enabled&&t===i})}function E(e){for(var t=[!1,"ms","Webkit","Moz","O"],i=e.charAt(0).toUpperCase()+e.slice(1),s=0;s<t.length;s++){var o=t[s],o=o?""+o+i:e;if(void 0!==document.body.style[o])return o}return null}function N(e){e=e.ownerDocument;return e?e.defaultView:window}function R(e,t,i,s){i.updateBound=s,N(e).addEventListener("resize",i.updateBound,{passive:!0});s=d(e);return function e(t,i,s,o){var a="BODY"===t.nodeName,t=a?t.ownerDocument.defaultView:t;t.addEventListener(i,s,{passive:!0}),a||e(d(t.parentNode),i,s,o),o.push(t)}(s,"scroll",i.updateBound,i.scrollParents),i.scrollElement=s,i.eventsEnabled=!0,i}function F(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,N(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function x(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function D(i,s){Object.keys(s).forEach(function(e){var t="";-1!==["width","height","top","right","bottom","left"].indexOf(e)&&x(s[e])&&(t="px"),i.style[e]=s[e]+t})}function U(e,t){function i(e){return e}var s=e.offsets,o=s.popper,a=W,s=a(s.reference.width),n=a(o.width),r=-1!==["left","right"].indexOf(e.placement),e=-1!==e.placement.indexOf("-"),r=t?r||e||s%2==n%2?a:I:i,a=t?a:i;return{left:r(1==s%2&&1==n%2&&!e&&t?o.left-1:o.left),top:a(o.top),bottom:a(o.bottom),right:r(o.right)}}function H(e,t,i){var s,o=$(e,function(e){return e.name===t}),e=!!o&&e.some(function(e){return e.name===i&&e.enabled&&e.order<o.order});return e||(s="`"+t+"`",console.warn("`"+i+"` modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")),e}function K(e,t){t=1<arguments.length&&void 0!==t&&t,e=L.indexOf(e),e=L.slice(e+1).concat(L.slice(0,e));return t?e.reverse():e}function Y(e,r,l,t){var o=[0,0],s=-1!==["right","left"].indexOf(t),t=e.split(/(\+|\-)/).map(function(e){return e.trim()}),e=t.indexOf($(t,function(e){return-1!==e.search(/,|\s/)})),i=(t[e]&&-1===t[e].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead."),/\s*,\s*|\s+/);return(-1===e?[t]:[t.slice(0,e).concat([t[e].split(i)[0]]),[t[e].split(i)[1]].concat(t.slice(e+1))]).map(function(e,t){var n=(1===t?!s:s)?"height":"width",i=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,i=!0,e):i?(e[e.length-1]+=t,i=!1,e):e.concat(t)},[]).map(function(e){return t=n,i=r,s=l,o=+(a=(e=e).match(/((?:\-|\+)?\d*\.?\d*)(.*)/))[1],a=a[2],o?0===a.indexOf("%")?f("%p"===a?i:s)[t]/100*o:"vh"===a||"vw"===a?("vh"===a?P(document.documentElement.clientHeight,window.innerHeight||0):P(document.documentElement.clientWidth,window.innerWidth||0))/100*o:o:e;var t,i,s,o,a})}).forEach(function(i,s){i.forEach(function(e,t){x(e)&&(o[s]+=e*("-"===i[t-1]?-1:1))})}),o}function O(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var j=Math.min,I=Math.floor,W=Math.round,P=Math.max,i="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,V=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(i&&0<=navigator.userAgent.indexOf(e[t]))return 1;return 0}(),z=i&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},V))}},G=i&&!(!window.MSInputMethodContext||!document.documentMode),q=i&&/MSIE 10/.test(navigator.userAgent),e=function(e,t,i){return t&&te(e.prototype,t),i&&te(e,i),e},B=Object.assign||function(e){for(var t,i=1;i<arguments.length;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Q=i&&/Firefox/i.test(navigator.userAgent),J=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],L=J.slice(3),X="flip",Z="clockwise",ee="counterclockwise",e=(e(A,[{key:"update",value:function(){return function(){var e;this.state.isDestroyed||((e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}}).offsets.reference=w(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=r(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=T(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=M(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e)))}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,t(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[E("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=R(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return F.call(this)}}]),A);function A(e,t){var i=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=z(this.update.bind(this)),this.options=B({},A.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(B({},A.Defaults.modifiers,s.modifiers)).forEach(function(e){i.options.modifiers[e]=B({},A.Defaults.modifiers[e]||{},s.modifiers?s.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return B({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&a(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)}),this.update(),this.options.eventsEnabled);e&&this.enableEventListeners(),this.state.eventsEnabled=e}function te(e,t){for(var i,s=0;s<t.length;s++)(i=t[s]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return e.Utils=("undefined"==typeof window?global:window).PopperUtils,e.placements=J,e.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t,i,s,o=e.placement,a=o.split("-")[0],o=o.split("-")[1];return o&&(t=(i=e.offsets).reference,i=i.popper,s=(a=-1!==["bottom","top"].indexOf(a))?"width":"height",a={start:O({},a=a?"left":"top",t[a]),end:O({},a,t[a]+t[s]-i[s])},e.offsets.popper=B({},i,a[o])),e}},offset:{order:200,enabled:!0,fn:function(e,t){var t=t.offset,i=e.placement,s=(o=e.offsets).popper,o=o.reference,i=i.split("-")[0],t=x(+t)?[+t,0]:Y(t,s,o,i);return"left"===i?(s.top+=t[0],s.left-=t[1]):"right"===i?(s.top+=t[0],s.left+=t[1]):"top"===i?(s.left+=t[0],s.top-=t[1]):"bottom"===i&&(s.left+=t[0],s.top+=t[1]),e.popper=s,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,s){var t=s.boundariesElement||_(e.instance.popper),i=(e.instance.reference===t&&(t=_(t)),E("transform")),o=e.instance.popper.style,a=o.top,n=o.left,r=o[i],l=(o.top="",o.left="",o[i]="",k(e.instance.popper,e.instance.reference,s.padding,t,e.positionFixed)),t=(o.top=a,o.left=n,o[i]=r,s.boundaries=l,s.priority),c=e.offsets.popper,d={primary:function(e){var t=c[e];return c[e]<l[e]&&!s.escapeWithReference&&(t=P(c[e],l[e])),O({},e,t)},secondary:function(e){var t="right"===e?"left":"top",i=c[t];return c[e]>l[e]&&!s.escapeWithReference&&(i=j(c[t],l[e]-("right"===e?c.width:c.height))),O({},t,i)}};return t.forEach(function(e){var t=-1===["left","top"].indexOf(e)?"secondary":"primary";c=B({},c,d[t](e))}),e.offsets.popper=c,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,i=t.popper,t=t.reference,s=e.placement.split("-")[0],o=I,s=-1!==["top","bottom"].indexOf(s),a=s?"right":"bottom",n=s?"left":"top",s=s?"width":"height";return i[a]<o(t[n])&&(e.offsets.popper[n]=o(t[n])-i[s]),i[n]>o(t[a])&&(e.offsets.popper[n]=o(t[a])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){if(H(e.instance.modifiers,"arrow","keepTogether")){t=t.element;if("string"==typeof t){if(!(t=e.instance.popper.querySelector(t)))return e}else if(!e.instance.popper.contains(t))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],s=e.offsets,o=s.popper,s=s.reference,i=-1!==["left","right"].indexOf(i),a=i?"height":"width",n=i?"Top":"Left",r=n.toLowerCase(),l=i?"left":"top",i=i?"bottom":"right",c=C(t)[a],i=(s[i]-c<o[r]&&(e.offsets.popper[r]-=o[r]-(s[i]-c)),s[r]+c>o[i]&&(e.offsets.popper[r]+=s[r]+c-o[i]),e.offsets.popper=f(e.offsets.popper),s[r]+s[a]/2-c/2),s=h(e.instance.popper),d=parseFloat(s["margin"+n],10),s=parseFloat(s["border"+n+"Width"],10),n=i-e.offsets.popper[r]-d-s,n=P(j(o[a]-c,n),0);e.arrowElement=t,e.offsets.arrow=(O(i={},r,W(n)),O(i,l,""),i)}return e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(l,c){if(!(t(l.instance.modifiers,"inner")||l.flipped&&l.placement===l.originalPlacement)){var d=k(l.instance.popper,l.instance.reference,c.padding,c.boundariesElement,l.positionFixed),h=l.placement.split("-")[0],u=S(h),_=l.placement.split("-")[1]||"",m=[];switch(c.behavior){case X:m=[h,u];break;case Z:m=K(h);break;case ee:m=K(h,!0);break;default:m=c.behavior}m.forEach(function(e,t){if(h!==e||m.length===t+1)return l;h=l.placement.split("-")[0],u=S(h);var e=l.offsets.popper,i=l.offsets.reference,s=I,i="left"===h&&s(e.right)>s(i.left)||"right"===h&&s(e.left)<s(i.right)||"top"===h&&s(e.bottom)>s(i.top)||"bottom"===h&&s(e.top)<s(i.bottom),o=s(e.left)<s(d.left),a=s(e.right)>s(d.right),n=s(e.top)<s(d.top),e=s(e.bottom)>s(d.bottom),s="left"===h&&o||"right"===h&&a||"top"===h&&n||"bottom"===h&&e,r=-1!==["top","bottom"].indexOf(h),a=!!c.flipVariations&&(r&&"start"===_&&o||r&&"end"===_&&a||!r&&"start"===_&&n||!r&&"end"===_&&e)||!!c.flipVariationsByContent&&(r&&"start"===_&&a||r&&"end"===_&&o||!r&&"start"===_&&e||!r&&"end"===_&&n);(i||s||a)&&(l.flipped=!0,(i||s)&&(h=m[t+1]),a&&(_="end"===(o=_)?"start":"start"===o?"end":o),l.placement=h+(_?"-"+_:""),l.offsets.popper=B({},l.offsets.popper,T(l.instance.popper,l.offsets.reference,l.placement)),l=M(l.instance.modifiers,l,"flip"))})}return l},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,i=t.split("-")[0],s=e.offsets,o=s.popper,s=s.reference,a=-1!==["left","right"].indexOf(i),n=-1===["top","left"].indexOf(i);return o[a?"left":"top"]=s[i]-(n?o[a?"width":"height"]:0),e.placement=S(t),e.offsets.popper=f(o),e}},hide:{order:800,enabled:!0,fn:function(e){if(H(e.instance.modifiers,"hide","preventOverflow")){var t=e.offsets.reference,i=$(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<i.top||t.left>i.right||t.top>i.bottom||t.right<i.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var i=t.x,s=t.y,o=e.offsets.popper,a=$(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var t=void 0===a?t.gpuAcceleration:a,a=_(e.instance.popper),n=v(a),o={position:o.position},r=U(e,window.devicePixelRatio<2||!Q),i="bottom"===i?"top":"bottom",s="right"===s?"left":"right",l=E("transform"),c="bottom"==i?"HTML"===a.nodeName?-a.clientHeight+r.bottom:-n.height+r.bottom:r.top,a="right"==s?"HTML"===a.nodeName?-a.clientWidth+r.right:-n.width+r.right:r.left;return t&&l?(o[l]="translate3d("+a+"px, "+c+"px, 0)",o[i]=0,o[s]=0,o.willChange="transform"):(n="right"==s?-1:1,o[i]=c*("bottom"==i?-1:1),o[s]=a*n,o.willChange=i+", "+s),e.attributes=B({},{"x-placement":e.placement},e.attributes),e.styles=B({},o,e.styles),e.arrowStyles=B({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return D(e.instance.popper,e.styles),t=e.instance.popper,i=e.attributes,Object.keys(i).forEach(function(e){!1===i[e]?t.removeAttribute(e):t.setAttribute(e,i[e])}),e.arrowElement&&Object.keys(e.arrowStyles).length&&D(e.arrowElement,e.arrowStyles),e;var t,i},onLoad:function(e,t,i,s,o){o=w(o,t,e,i.positionFixed),o=r(i.placement,o,t,e,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return t.setAttribute("x-placement",o),D(t,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}}},e}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],t):t((e=e||self).bootstrap={},e.jQuery,e.Popper)}(this,function(e,d,o){function A(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function t(e,t,i){t&&A(e.prototype,t),i&&A(e,i)}function N(t,e){var i,s=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)),s}function a(s){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?N(Object(o),!0).forEach(function(e){var t=s,i=o[e=e];e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(o,e))})}return s}d=d&&d.hasOwnProperty("default")?d.default:d,o=o&&o.hasOwnProperty("default")?o.default:o;var R="transitionend";var h={TRANSITION_END:"bsTransitionEnd",getUID:function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},getSelectorFromElement:function(e){var t,i=e.getAttribute("data-target");i&&"#"!==i||(i=(t=e.getAttribute("href"))&&"#"!==t?t.trim():"");try{return document.querySelector(i)?i:null}catch(e){return null}},getTransitionDurationFromElement:function(e){var t,i,s;return e&&(t=d(e).css("transition-duration"),e=d(e).css("transition-delay"),i=parseFloat(t),s=parseFloat(e),i||s)?(t=t.split(",")[0],e=e.split(",")[0],1e3*(parseFloat(t)+parseFloat(e))):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){d(e).trigger(R)},supportsTransitionEnd:function(){return Boolean(R)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,i){for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){var o=i[s],a=t[s],a=a&&h.isElement(a)?"element":{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(a))throw new Error(e.toUpperCase()+': Option "'+s+'" provided type "'+a+'" but expected type "'+o+'".')}},findShadowRoot:function(e){return document.documentElement.attachShadow?"function"!=typeof e.getRootNode?e instanceof ShadowRoot?e:e.parentNode?h.findShadowRoot(e.parentNode):null:(e=e.getRootNode())instanceof ShadowRoot?e:null:null},jQueryDetection:function(){if(void 0===d)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=d.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1===e[0]&&9===e[1]&&e[2]<1||4<=e[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}},F=(h.jQueryDetection(),d.fn.emulateTransitionEnd=function(e){var t=this,i=!1;return d(this).one(h.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||h.triggerTransitionEnd(t)},e),this},d.event.special[h.TRANSITION_END]={bindType:R,delegateType:R,handle:function(e){if(d(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}},"alert"),U="bs.alert",i="."+U,H=d.fn[F],K={CLOSE:"close"+i,CLOSED:"closed"+i,CLICK_DATA_API:"click"+i+".data-api"},s=((i=n.prototype).close=function(e){var t=this._element;e&&(t=this._getRootElement(e)),this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},i.dispose=function(){d.removeData(this._element,U),this._element=null},i._getRootElement=function(e){var t=h.getSelectorFromElement(e),i=!1;return(i=t?document.querySelector(t):i)||d(e).closest(".alert")[0]},i._triggerCloseEvent=function(e){var t=d.Event(K.CLOSE);return d(e).trigger(t),t},i._removeElement=function(t){var e,i=this;d(t).removeClass("show"),d(t).hasClass("fade")?(e=h.getTransitionDurationFromElement(t),d(t).one(h.TRANSITION_END,function(e){return i._destroyElement(t,e)}).emulateTransitionEnd(e)):this._destroyElement(t)},i._destroyElement=function(e){d(e).detach().trigger(K.CLOSED).remove()},n._jQueryInterface=function(i){return this.each(function(){var e=d(this),t=e.data(U);t||(t=new n(this),e.data(U,t)),"close"===i&&t[i](this)})},n._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},t(n,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),n);function n(e){this._element=e}d(document).on(K.CLICK_DATA_API,'[data-dismiss="alert"]',s._handleDismiss(new s)),d.fn[F]=s._jQueryInterface,d.fn[F].Constructor=s,d.fn[F].noConflict=function(){return d.fn[F]=H,s._jQueryInterface};var Y="button",j="bs.button",i="."+j,r=".data-api",W=d.fn[Y],l="active",c='[data-toggle^="button"]',V='input:not([type="hidden"])',i={CLICK_DATA_API:"click"+i+r,FOCUS_BLUR_DATA_API:"focus"+i+r+" blur"+i+r,LOAD_DATA_API:"load"+i+r},z=((r=G.prototype).toggle=function(){var e,t=!0,i=!0,s=d(this._element).closest('[data-toggle="buttons"]')[0];s&&(e=this._element.querySelector(V))&&("radio"===e.type?e.checked&&this._element.classList.contains(l)?t=!1:(s=s.querySelector(".active"))&&d(s).removeClass(l):("checkbox"!==e.type||"LABEL"===this._element.tagName&&e.checked===this._element.classList.contains(l))&&(t=!1),t&&(e.checked=!this._element.classList.contains(l),d(e).trigger("change")),e.focus(),i=!1),this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(i&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(l)),t&&d(this._element).toggleClass(l))},r.dispose=function(){d.removeData(this._element,j),this._element=null},G._jQueryInterface=function(t){return this.each(function(){var e=d(this).data(j);e||(e=new G(this),d(this).data(j,e)),"toggle"===t&&e[t]()})},t(G,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),G);function G(e){this._element=e}d(document).on(i.CLICK_DATA_API,c,function(e){var t,i=e.target;!(i=d(i).hasClass("btn")?i:d(i).closest(".btn")[0])||i.hasAttribute("disabled")||i.classList.contains("disabled")||(t=i.querySelector(V))&&(t.hasAttribute("disabled")||t.classList.contains("disabled"))?e.preventDefault():z._jQueryInterface.call(d(i),"toggle")}).on(i.FOCUS_BLUR_DATA_API,c,function(e){var t=d(e.target).closest(".btn")[0];d(t).toggleClass("focus",/^focus(in)?$/.test(e.type))}),d(window).on(i.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),t=0,i=e.length;t<i;t++){var s=e[t],o=s.querySelector(V);o.checked||o.hasAttribute("checked")?s.classList.add(l):s.classList.remove(l)}for(var a=0,n=(e=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;a<n;a++){var r=e[a];"true"===r.getAttribute("aria-pressed")?r.classList.add(l):r.classList.remove(l)}}),d.fn[Y]=z._jQueryInterface,d.fn[Y].Constructor=z,d.fn[Y].noConflict=function(){return d.fn[Y]=W,z._jQueryInterface};var u="carousel",q="bs.carousel",_="."+q,r=".data-api",Q=d.fn[u],J={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},X={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Z="next",ee="prev",m={SLIDE:"slide"+_,SLID:"slid"+_,KEYDOWN:"keydown"+_,MOUSEENTER:"mouseenter"+_,MOUSELEAVE:"mouseleave"+_,TOUCHSTART:"touchstart"+_,TOUCHMOVE:"touchmove"+_,TOUCHEND:"touchend"+_,POINTERDOWN:"pointerdown"+_,POINTERUP:"pointerup"+_,DRAG_START:"dragstart"+_,LOAD_DATA_API:"load"+_+r,CLICK_DATA_API:"click"+_+r},p="active",te=".active.carousel-item",ie={TOUCH:"touch",PEN:"pen"},g=((c=f.prototype).next=function(){this._isSliding||this._slide(Z)},c.nextWhenVisible=function(){!document.hidden&&d(this._element).is(":visible")&&"hidden"!==d(this._element).css("visibility")&&this.next()},c.prev=function(){this._isSliding||this._slide(ee)},c.pause=function(e){e||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(h.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},c.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},c.to=function(e){var t=this,i=(this._activeElement=this._element.querySelector(te),this._getItemIndex(this._activeElement));e>this._items.length-1||e<0||(this._isSliding?d(this._element).one(m.SLID,function(){return t.to(e)}):i===e?(this.pause(),this.cycle()):this._slide(i<e?Z:ee,this._items[e]))},c.dispose=function(){d(this._element).off(_),d.removeData(this._element,q),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},c._getConfig=function(e){return e=a({},J,{},e),h.typeCheckConfig(u,e,X),e},c._handleSwipe=function(){var e=Math.abs(this.touchDeltaX);e<=40||(e=e/this.touchDeltaX,(this.touchDeltaX=0)<e&&this.prev(),e<0&&this.next())},c._addEventListeners=function(){var t=this;this._config.keyboard&&d(this._element).on(m.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&d(this._element).on(m.MOUSEENTER,function(e){return t.pause(e)}).on(m.MOUSELEAVE,function(e){return t.cycle(e)}),this._config.touch&&this._addTouchEventListeners()},c._addTouchEventListeners=function(){var e,t,i=this;this._touchSupported&&(e=function(e){i._pointerEvent&&ie[e.originalEvent.pointerType.toUpperCase()]?i.touchStartX=e.originalEvent.clientX:i._pointerEvent||(i.touchStartX=e.originalEvent.touches[0].clientX)},t=function(e){i._pointerEvent&&ie[e.originalEvent.pointerType.toUpperCase()]&&(i.touchDeltaX=e.originalEvent.clientX-i.touchStartX),i._handleSwipe(),"hover"===i._config.pause&&(i.pause(),i.touchTimeout&&clearTimeout(i.touchTimeout),i.touchTimeout=setTimeout(function(e){return i.cycle(e)},500+i._config.interval))},d(this._element.querySelectorAll(".carousel-item img")).on(m.DRAG_START,function(e){return e.preventDefault()}),this._pointerEvent?(d(this._element).on(m.POINTERDOWN,e),d(this._element).on(m.POINTERUP,t),this._element.classList.add("pointer-event")):(d(this._element).on(m.TOUCHSTART,e),d(this._element).on(m.TOUCHMOVE,function(e){(e=e).originalEvent.touches&&1<e.originalEvent.touches.length?i.touchDeltaX=0:i.touchDeltaX=e.originalEvent.touches[0].clientX-i.touchStartX}),d(this._element).on(m.TOUCHEND,t)))},c._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next()}},c._getItemIndex=function(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(e)},c._getItemByDirection=function(e,t){var i=e===Z,s=e===ee,o=this._getItemIndex(t),a=this._items.length-1;return(s&&0===o||i&&o===a)&&!this._config.wrap?t:-1==(s=(o+(e===ee?-1:1))%this._items.length)?this._items[this._items.length-1]:this._items[s]},c._triggerSlideEvent=function(e,t){var i=this._getItemIndex(e),s=this._getItemIndex(this._element.querySelector(te)),e=d.Event(m.SLIDE,{relatedTarget:e,direction:t,from:s,to:i});return d(this._element).trigger(e),e},c._setActiveIndicatorElement=function(e){var t;this._indicatorsElement&&(t=[].slice.call(this._indicatorsElement.querySelectorAll(".active")),d(t).removeClass(p),t=this._indicatorsElement.children[this._getItemIndex(e)])&&d(t).addClass(p)},c._slide=function(e,t){var i,s,o,a=this,n=this._element.querySelector(te),r=this._getItemIndex(n),l=t||n&&this._getItemByDirection(e,n),t=this._getItemIndex(l),c=Boolean(this._interval),e=e===Z?(i="carousel-item-left",s="carousel-item-next","left"):(i="carousel-item-right",s="carousel-item-prev","right");l&&d(l).hasClass(p)?this._isSliding=!1:!this._triggerSlideEvent(l,e).isDefaultPrevented()&&n&&l&&(this._isSliding=!0,c&&this.pause(),this._setActiveIndicatorElement(l),o=d.Event(m.SLID,{relatedTarget:l,direction:e,from:r,to:t}),d(this._element).hasClass("slide")?(d(l).addClass(s),h.reflow(l),d(n).addClass(i),d(l).addClass(i),(e=parseInt(l.getAttribute("data-interval"),10))?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval,r=h.getTransitionDurationFromElement(n),d(n).one(h.TRANSITION_END,function(){d(l).removeClass(i+" "+s).addClass(p),d(n).removeClass(p+" "+s+" "+i),a._isSliding=!1,setTimeout(function(){return d(a._element).trigger(o)},0)}).emulateTransitionEnd(r)):(d(n).removeClass(p),d(l).addClass(p),this._isSliding=!1,d(this._element).trigger(o)),c)&&this.cycle()},f._jQueryInterface=function(s){return this.each(function(){var e=d(this).data(q),t=a({},J,{},d(this).data()),i=("object"==typeof s&&(t=a({},t,{},s)),"string"==typeof s?s:t.slide);if(e||(e=new f(this,t),d(this).data(q,e)),"number"==typeof s)e.to(s);else if("string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}else t.interval&&t.ride&&(e.pause(),e.cycle())})},f._dataApiClickHandler=function(e){var t,i,s=h.getSelectorFromElement(this);s&&(s=d(s)[0])&&d(s).hasClass("carousel")&&(t=a({},d(s).data(),{},d(this).data()),(i=this.getAttribute("data-slide-to"))&&(t.interval=!1),f._jQueryInterface.call(d(s),t),i&&d(s).data(q).to(i),e.preventDefault())},t(f,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return J}}]),f);function f(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._element=e,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}d(document).on(m.CLICK_DATA_API,"[data-slide], [data-slide-to]",g._dataApiClickHandler),d(window).on(m.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),t=0,i=e.length;t<i;t++){var s=d(e[t]);g._jQueryInterface.call(s,s.data())}}),d.fn[u]=g._jQueryInterface,d.fn[u].Constructor=g,d.fn[u].noConflict=function(){return d.fn[u]=Q,g._jQueryInterface};var v="collapse",y="bs.collapse",i="."+y,se=d.fn[v],oe={toggle:!0,parent:""},ae={toggle:"boolean",parent:"(string|element)"},ne={SHOW:"show"+i,SHOWN:"shown"+i,HIDE:"hide"+i,HIDDEN:"hidden"+i,CLICK_DATA_API:"click"+i+".data-api"},b="show",re="collapse",le="collapsing",ce="collapsed",de='[data-toggle="collapse"]',he=((r=k.prototype).toggle=function(){d(this._element).hasClass(b)?this.hide():this.show()},r.show=function(){var e,t,i,s,o=this;this._isTransitioning||d(this._element).hasClass(b)||(e=this._parent&&0===(e=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(e){return"string"==typeof o._config.parent?e.getAttribute("data-parent")===o._config.parent:e.classList.contains(re)})).length?null:e)&&(s=d(e).not(this._selector).data(y))&&s._isTransitioning||(i=d.Event(ne.SHOW),d(this._element).trigger(i),i.isDefaultPrevented()||(e&&(k._jQueryInterface.call(d(e).not(this._selector),"hide"),s||d(e).data(y,null)),t=this._getDimension(),d(this._element).removeClass(re).addClass(le),this._element.style[t]=0,this._triggerArray.length&&d(this._triggerArray).removeClass(ce).attr("aria-expanded",!0),this.setTransitioning(!0),i="scroll"+(t[0].toUpperCase()+t.slice(1)),s=h.getTransitionDurationFromElement(this._element),d(this._element).one(h.TRANSITION_END,function(){d(o._element).removeClass(le).addClass(re).addClass(b),o._element.style[t]="",o.setTransitioning(!1),d(o._element).trigger(ne.SHOWN)}).emulateTransitionEnd(s),this._element.style[t]=this._element[i]+"px"))},r.hide=function(){var e=this;if(!this._isTransitioning&&d(this._element).hasClass(b)){var t=d.Event(ne.HIDE);if(d(this._element).trigger(t),!t.isDefaultPrevented()){var t=this._getDimension(),i=(this._element.style[t]=this._element.getBoundingClientRect()[t]+"px",h.reflow(this._element),d(this._element).addClass(le).removeClass(re).removeClass(b),this._triggerArray.length);if(0<i)for(var s=0;s<i;s++){var o=this._triggerArray[s],a=h.getSelectorFromElement(o);null===a||d([].slice.call(document.querySelectorAll(a))).hasClass(b)||d(o).addClass(ce).attr("aria-expanded",!1)}this.setTransitioning(!0),this._element.style[t]="";t=h.getTransitionDurationFromElement(this._element);d(this._element).one(h.TRANSITION_END,function(){e.setTransitioning(!1),d(e._element).removeClass(le).addClass(re).trigger(ne.HIDDEN)}).emulateTransitionEnd(t)}}},r.setTransitioning=function(e){this._isTransitioning=e},r.dispose=function(){d.removeData(this._element,y),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},r._getConfig=function(e){return(e=a({},oe,{},e)).toggle=Boolean(e.toggle),h.typeCheckConfig(v,e,ae),e},r._getDimension=function(){return d(this._element).hasClass("width")?"width":"height"},r._getParent=function(){var e,i=this,t=(h.isElement(this._config.parent)?(e=this._config.parent,void 0!==this._config.parent.jquery&&(e=this._config.parent[0])):e=document.querySelector(this._config.parent),'[data-toggle="collapse"][data-parent="'+this._config.parent+'"]'),t=[].slice.call(e.querySelectorAll(t));return d(t).each(function(e,t){i._addAriaAndCollapsedClass(k._getTargetFromElement(t),[t])}),e},r._addAriaAndCollapsedClass=function(e,t){e=d(e).hasClass(b);t.length&&d(t).toggleClass(ce,!e).attr("aria-expanded",e)},k._getTargetFromElement=function(e){e=h.getSelectorFromElement(e);return e?document.querySelector(e):null},k._jQueryInterface=function(s){return this.each(function(){var e=d(this),t=e.data(y),i=a({},oe,{},e.data(),{},"object"==typeof s&&s?s:{});if(!t&&i.toggle&&/show|hide/.test(s)&&(i.toggle=!1),t||(t=new k(this,i),e.data(y,t)),"string"==typeof s){if(void 0===t[s])throw new TypeError('No method named "'+s+'"');t[s]()}})},t(k,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return oe}}]),k);function k(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var i=[].slice.call(document.querySelectorAll(de)),s=0,o=i.length;s<o;s++){var a=i[s],n=h.getSelectorFromElement(a),r=[].slice.call(document.querySelectorAll(n)).filter(function(e){return e===t});null!==n&&0<r.length&&(this._selector=n,this._triggerArray.push(a))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}d(document).on(ne.CLICK_DATA_API,de,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var i=d(this),e=h.getSelectorFromElement(this),e=[].slice.call(document.querySelectorAll(e));d(e).each(function(){var e=d(this),t=e.data(y)?"toggle":i.data();he._jQueryInterface.call(e,t)})}),d.fn[v]=he._jQueryInterface,d.fn[v].Constructor=he,d.fn[v].noConflict=function(){return d.fn[v]=se,he._jQueryInterface};var w="dropdown",ue="bs.dropdown",C="."+ue,c=".data-api",_e=d.fn[w],me=new RegExp("38|40|27"),S={HIDE:"hide"+C,HIDDEN:"hidden"+C,SHOW:"show"+C,SHOWN:"shown"+C,CLICK:"click"+C,CLICK_DATA_API:"click"+C+c,KEYDOWN_DATA_API:"keydown"+C+c,KEYUP_DATA_API:"keyup"+C+c},pe="disabled",T="show",ge="dropdown-menu-right",fe='[data-toggle="dropdown"]',ve=".dropdown-menu",ye={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},be={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},$=((i=M.prototype).toggle=function(){var e;this._element.disabled||d(this._element).hasClass(pe)||(e=d(this._menu).hasClass(T),M._clearMenus(),e)||this.show(!0)},i.show=function(e){if(void 0===e&&(e=!1),!(this._element.disabled||d(this._element).hasClass(pe)||d(this._menu).hasClass(T))){var t={relatedTarget:this._element},i=d.Event(S.SHOW,t),s=M._getParentFromElement(this._element);if(d(s).trigger(i),!i.isDefaultPrevented()){if(!this._inNavbar&&e){if(void 0===o)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");i=this._element;"parent"===this._config.reference?i=s:h.isElement(this._config.reference)&&(i=this._config.reference,void 0!==this._config.reference.jquery)&&(i=this._config.reference[0]),"scrollParent"!==this._config.boundary&&d(s).addClass("position-static"),this._popper=new o(i,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===d(s).closest(".navbar-nav").length&&d(document.body).children().on("mouseover",null,d.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),d(this._menu).toggleClass(T),d(s).toggleClass(T).trigger(d.Event(S.SHOWN,t))}}},i.hide=function(){var e,t,i;this._element.disabled||d(this._element).hasClass(pe)||!d(this._menu).hasClass(T)||(e={relatedTarget:this._element},t=d.Event(S.HIDE,e),i=M._getParentFromElement(this._element),d(i).trigger(t),t.isDefaultPrevented())||(this._popper&&this._popper.destroy(),d(this._menu).toggleClass(T),d(i).toggleClass(T).trigger(d.Event(S.HIDDEN,e)))},i.dispose=function(){d.removeData(this._element,ue),d(this._element).off(C),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},i.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},i._addEventListeners=function(){var t=this;d(this._element).on(S.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},i._getConfig=function(e){return e=a({},this.constructor.Default,{},d(this._element).data(),{},e),h.typeCheckConfig(w,e,this.constructor.DefaultType),e},i._getMenuElement=function(){var e;return this._menu||(e=M._getParentFromElement(this._element))&&(this._menu=e.querySelector(ve)),this._menu},i._getPlacement=function(){var e=d(this._element.parentNode),t="bottom-start";return e.hasClass("dropup")?(t="top-start",d(this._menu).hasClass(ge)&&(t="top-end")):e.hasClass("dropright")?t="right-start":e.hasClass("dropleft")?t="left-start":d(this._menu).hasClass(ge)&&(t="bottom-end"),t},i._detectNavbar=function(){return 0<d(this._element).closest(".navbar").length},i._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=a({},e.offsets,{},t._config.offset(e.offsets,t._element)||{}),e}:e.offset=this._config.offset,e},i._getPopperConfig=function(){var e={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(e.modifiers.applyStyle={enabled:!1}),a({},e,{},this._config.popperConfig)},M._jQueryInterface=function(t){return this.each(function(){var e=d(this).data(ue);if(e||(e=new M(this,"object"==typeof t?t:null),d(this).data(ue,e)),"string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},M._clearMenus=function(e){if(!e||3!==e.which&&("keyup"!==e.type||9===e.which))for(var t=[].slice.call(document.querySelectorAll(fe)),i=0,s=t.length;i<s;i++){var o,a,n=M._getParentFromElement(t[i]),r=d(t[i]).data(ue),l={relatedTarget:t[i]};e&&"click"===e.type&&(l.clickEvent=e),r&&(o=r._menu,!d(n).hasClass(T)||e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&9===e.which)&&d.contains(n,e.target)||(a=d.Event(S.HIDE,l),d(n).trigger(a),a.isDefaultPrevented())||("ontouchstart"in document.documentElement&&d(document.body).children().off("mouseover",null,d.noop),t[i].setAttribute("aria-expanded","false"),r._popper&&r._popper.destroy(),d(o).removeClass(T),d(n).removeClass(T).trigger(d.Event(S.HIDDEN,l))))}},M._getParentFromElement=function(e){var t,i=h.getSelectorFromElement(e);return(t=i?document.querySelector(i):t)||e.parentNode},M._dataApiKeydownHandler=function(e){var t,i,s;(/input|textarea/i.test(e.target.tagName)?32===e.which||27!==e.which&&(40!==e.which&&38!==e.which||d(e.target).closest(ve).length):!me.test(e.which))||(e.preventDefault(),e.stopPropagation(),this.disabled)||d(this).hasClass(pe)||(t=M._getParentFromElement(this),!(s=d(t).hasClass(T))&&27===e.which)||(s&&(!s||27!==e.which&&32!==e.which)?0!==(s=[].slice.call(t.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter(function(e){return d(e).is(":visible")})).length&&(i=s.indexOf(e.target),38===e.which&&0<i&&i--,40===e.which&&i<s.length-1&&i++,s[i=i<0?0:i].focus()):(27===e.which&&(s=t.querySelector(fe),d(s).trigger("focus")),d(this).trigger("click")))},t(M,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return ye}},{key:"DefaultType",get:function(){return be}}]),M);function M(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}d(document).on(S.KEYDOWN_DATA_API,fe,$._dataApiKeydownHandler).on(S.KEYDOWN_DATA_API,ve,$._dataApiKeydownHandler).on(S.CLICK_DATA_API+" "+S.KEYUP_DATA_API,$._clearMenus).on(S.CLICK_DATA_API,fe,function(e){e.preventDefault(),e.stopPropagation(),$._jQueryInterface.call(d(this),"toggle")}).on(S.CLICK_DATA_API,".dropdown form",function(e){e.stopPropagation()}),d.fn[w]=$._jQueryInterface,d.fn[w].Constructor=$,d.fn[w].noConflict=function(){return d.fn[w]=_e,$._jQueryInterface};var E="modal",ke="bs.modal",x="."+ke,we=d.fn[E],Ce={backdrop:!0,keyboard:!0,focus:!0,show:!0},Se={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},D={HIDE:"hide"+x,HIDE_PREVENTED:"hidePrevented"+x,HIDDEN:"hidden"+x,SHOW:"show"+x,SHOWN:"shown"+x,FOCUSIN:"focusin"+x,RESIZE:"resize"+x,CLICK_DISMISS:"click.dismiss"+x,KEYDOWN_DISMISS:"keydown.dismiss"+x,MOUSEUP_DISMISS:"mouseup.dismiss"+x,MOUSEDOWN_DISMISS:"mousedown.dismiss"+x,CLICK_DATA_API:"click"+x+".data-api"},Te="modal-open",$e="fade",Me="show",Ee="modal-static",xe=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",De=".sticky-top",Oe=((r=Ie.prototype).toggle=function(e){return this._isShown?this.hide():this.show(e)},r.show=function(e){var t,i=this;this._isShown||this._isTransitioning||(d(this._element).hasClass($e)&&(this._isTransitioning=!0),t=d.Event(D.SHOW,{relatedTarget:e}),d(this._element).trigger(t),this._isShown)||t.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),d(this._element).on(D.CLICK_DISMISS,'[data-dismiss="modal"]',function(e){return i.hide(e)}),d(this._dialog).on(D.MOUSEDOWN_DISMISS,function(){d(i._element).one(D.MOUSEUP_DISMISS,function(e){d(e.target).is(i._element)&&(i._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return i._showElement(e)}))},r.hide=function(e){var t=this;e&&e.preventDefault(),this._isShown&&!this._isTransitioning&&(e=d.Event(D.HIDE),d(this._element).trigger(e),this._isShown)&&!e.isDefaultPrevented()&&(this._isShown=!1,(e=d(this._element).hasClass($e))&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),d(document).off(D.FOCUSIN),d(this._element).removeClass(Me),d(this._element).off(D.CLICK_DISMISS),d(this._dialog).off(D.MOUSEDOWN_DISMISS),e?(e=h.getTransitionDurationFromElement(this._element),d(this._element).one(h.TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(e)):this._hideModal())},r.dispose=function(){[window,this._element,this._dialog].forEach(function(e){return d(e).off(x)}),d(document).off(D.FOCUSIN),d.removeData(this._element,ke),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},r.handleUpdate=function(){this._adjustDialog()},r._getConfig=function(e){return e=a({},Ce,{},e),h.typeCheckConfig(E,e,Se),e},r._triggerBackdropTransition=function(){var e,t=this;"static"===this._config.backdrop?(e=d.Event(D.HIDE_PREVENTED),d(this._element).trigger(e),e.defaultPrevented||(this._element.classList.add(Ee),e=h.getTransitionDurationFromElement(this._element),d(this._element).one(h.TRANSITION_END,function(){t._element.classList.remove(Ee)}).emulateTransitionEnd(e),this._element.focus())):this.hide()},r._showElement=function(e){var t=this,i=d(this._element).hasClass($e),s=this._dialog?this._dialog.querySelector(".modal-body"):null;function o(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,d(t._element).trigger(a)}this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),d(this._dialog).hasClass("modal-dialog-scrollable")&&s?s.scrollTop=0:this._element.scrollTop=0,i&&h.reflow(this._element),d(this._element).addClass(Me),this._config.focus&&this._enforceFocus();var a=d.Event(D.SHOWN,{relatedTarget:e});i?(s=h.getTransitionDurationFromElement(this._dialog),d(this._dialog).one(h.TRANSITION_END,o).emulateTransitionEnd(s)):o()},r._enforceFocus=function(){var t=this;d(document).off(D.FOCUSIN).on(D.FOCUSIN,function(e){document!==e.target&&t._element!==e.target&&0===d(t._element).has(e.target).length&&t._element.focus()})},r._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?d(this._element).on(D.KEYDOWN_DISMISS,function(e){27===e.which&&t._triggerBackdropTransition()}):this._isShown||d(this._element).off(D.KEYDOWN_DISMISS)},r._setResizeEvent=function(){var t=this;this._isShown?d(window).on(D.RESIZE,function(e){return t.handleUpdate(e)}):d(window).off(D.RESIZE)},r._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){d(document.body).removeClass(Te),e._resetAdjustments(),e._resetScrollbar(),d(e._element).trigger(D.HIDDEN)})},r._removeBackdrop=function(){this._backdrop&&(d(this._backdrop).remove(),this._backdrop=null)},r._showBackdrop=function(e){var t,i=this,s=d(this._element).hasClass($e)?$e:"";this._isShown&&this._config.backdrop?(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",s&&this._backdrop.classList.add(s),d(this._backdrop).appendTo(document.body),d(this._element).on(D.CLICK_DISMISS,function(e){i._ignoreBackdropClick?i._ignoreBackdropClick=!1:e.target===e.currentTarget&&i._triggerBackdropTransition()}),s&&h.reflow(this._backdrop),d(this._backdrop).addClass(Me),e&&(s?(s=h.getTransitionDurationFromElement(this._backdrop),d(this._backdrop).one(h.TRANSITION_END,e).emulateTransitionEnd(s)):e())):!this._isShown&&this._backdrop?(d(this._backdrop).removeClass(Me),s=function(){i._removeBackdrop(),e&&e()},d(this._element).hasClass($e)?(t=h.getTransitionDurationFromElement(this._backdrop),d(this._backdrop).one(h.TRANSITION_END,s).emulateTransitionEnd(t)):s()):e&&e()},r._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},r._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},r._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},r._setScrollbar=function(){var e,t,o=this;this._isBodyOverflowing&&(e=[].slice.call(document.querySelectorAll(xe)),t=[].slice.call(document.querySelectorAll(De)),d(e).each(function(e,t){var i=t.style.paddingRight,s=d(t).css("padding-right");d(t).data("padding-right",i).css("padding-right",parseFloat(s)+o._scrollbarWidth+"px")}),d(t).each(function(e,t){var i=t.style.marginRight,s=d(t).css("margin-right");d(t).data("margin-right",i).css("margin-right",parseFloat(s)-o._scrollbarWidth+"px")}),e=document.body.style.paddingRight,t=d(document.body).css("padding-right"),d(document.body).data("padding-right",e).css("padding-right",parseFloat(t)+this._scrollbarWidth+"px")),d(document.body).addClass(Te)},r._resetScrollbar=function(){var e=[].slice.call(document.querySelectorAll(xe)),e=(d(e).each(function(e,t){var i=d(t).data("padding-right");d(t).removeData("padding-right"),t.style.paddingRight=i||""}),[].slice.call(document.querySelectorAll(De))),e=(d(e).each(function(e,t){var i=d(t).data("margin-right");void 0!==i&&d(t).css("margin-right",i).removeData("margin-right")}),d(document.body).data("padding-right"));d(document.body).removeData("padding-right"),document.body.style.paddingRight=e||""},r._getScrollbarWidth=function(){var e=document.createElement("div"),t=(e.className="modal-scrollbar-measure",document.body.appendChild(e),e.getBoundingClientRect().width-e.clientWidth);return document.body.removeChild(e),t},Ie._jQueryInterface=function(i,s){return this.each(function(){var e=d(this).data(ke),t=a({},Ce,{},d(this).data(),{},"object"==typeof i&&i?i:{});if(e||(e=new Ie(this,t),d(this).data(ke,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i](s)}else t.show&&e.show(s)})},t(Ie,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return Ce}}]),Ie);function Ie(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}d(document).on(D.CLICK_DATA_API,'[data-toggle="modal"]',function(e){var t,i=this,s=h.getSelectorFromElement(this),s=(s&&(t=document.querySelector(s)),d(t).data(ke)?"toggle":a({},d(t).data(),{},d(this).data())),o=("A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault(),d(t).one(D.SHOW,function(e){e.isDefaultPrevented()||o.one(D.HIDDEN,function(){d(i).is(":visible")&&i.focus()})}));Oe._jQueryInterface.call(d(t),s,this)}),d.fn[E]=Oe._jQueryInterface,d.fn[E].Constructor=Oe,d.fn[E].noConflict=function(){return d.fn[E]=we,Oe._jQueryInterface};var Pe=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Be=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Le=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function Ae(e,o,t){if(0===e.length)return e;if(t&&"function"==typeof t)return t(e);for(var t=(new window.DOMParser).parseFromString(e,"text/html"),a=Object.keys(o),n=[].slice.call(t.body.querySelectorAll("*")),i=0,s=n.length;i<s;i++)!function(e){var t=n[e],e=t.nodeName.toLowerCase();if(-1===a.indexOf(t.nodeName.toLowerCase()))return t.parentNode.removeChild(t);var i=[].slice.call(t.attributes),s=[].concat(o["*"]||[],o[e]||[]);i.forEach(function(e){!function(e,t){var i=e.nodeName.toLowerCase();if(-1!==t.indexOf(i))return-1===Pe.indexOf(i)||Boolean(e.nodeValue.match(Be)||e.nodeValue.match(Le));for(var s=t.filter(function(e){return e instanceof RegExp}),o=0,a=s.length;o<a;o++)if(i.match(s[o]))return 1}(e,s)&&t.removeAttribute(e.nodeName)})}(i);return t.body.innerHTML}var O="tooltip",Ne="bs.tooltip",I="."+Ne,Re=d.fn[O],Fe="bs-tooltip",Ue=new RegExp("(^|\\s)"+Fe+"\\S+","g"),He=["sanitize","whiteList","sanitizeFn"],Ke={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Ye={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},je={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},We="show",Ve={HIDE:"hide"+I,HIDDEN:"hidden"+I,SHOW:"show"+I,SHOWN:"shown"+I,INSERTED:"inserted"+I,CLICK:"click"+I,FOCUSIN:"focusin"+I,FOCUSOUT:"focusout"+I,MOUSEENTER:"mouseenter"+I,MOUSELEAVE:"mouseleave"+I},ze="fade",Ge="show",qe="hover",Qe="focus",P=((c=Je.prototype).enable=function(){this._isEnabled=!0},c.disable=function(){this._isEnabled=!1},c.toggleEnabled=function(){this._isEnabled=!this._isEnabled},c.toggle=function(e){var t,i;this._isEnabled&&(e?(t=this.constructor.DATA_KEY,(i=d(e.currentTarget).data(t))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),d(e.currentTarget).data(t,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)):d(this.getTipElement()).hasClass(Ge)?this._leave(null,this):this._enter(null,this))},c.dispose=function(){clearTimeout(this._timeout),d.removeData(this.element,this.constructor.DATA_KEY),d(this.element).off(this.constructor.EVENT_KEY),d(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&d(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},c.show=function(){var t=this;if("none"===d(this.element).css("display"))throw new Error("Please use show on visible elements");var e,i,s=d.Event(this.constructor.Event.SHOW);this.isWithContent()&&this._isEnabled&&(d(this.element).trigger(s),i=h.findShadowRoot(this.element),i=d.contains(null!==i?i:this.element.ownerDocument.documentElement,this.element),!s.isDefaultPrevented())&&i&&(s=this.getTipElement(),i=h.getUID(this.constructor.NAME),s.setAttribute("id",i),this.element.setAttribute("aria-describedby",i),this.setContent(),this.config.animation&&d(s).addClass(ze),i="function"==typeof this.config.placement?this.config.placement.call(this,s,this.element):this.config.placement,i=this._getAttachment(i),this.addAttachmentClass(i),e=this._getContainer(),d(s).data(this.constructor.DATA_KEY,this),d.contains(this.element.ownerDocument.documentElement,this.tip)||d(s).appendTo(e),d(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new o(this.element,s,this._getPopperConfig(i)),d(s).addClass(Ge),"ontouchstart"in document.documentElement&&d(document.body).children().on("mouseover",null,d.noop),e=function(){t.config.animation&&t._fixTransition();var e=t._hoverState;t._hoverState=null,d(t.element).trigger(t.constructor.Event.SHOWN),"out"===e&&t._leave(null,t)},d(this.tip).hasClass(ze)?(i=h.getTransitionDurationFromElement(this.tip),d(this.tip).one(h.TRANSITION_END,e).emulateTransitionEnd(i)):e())},c.hide=function(e){function t(){i._hoverState!==We&&s.parentNode&&s.parentNode.removeChild(s),i._cleanTipClass(),i.element.removeAttribute("aria-describedby"),d(i.element).trigger(i.constructor.Event.HIDDEN),null!==i._popper&&i._popper.destroy(),e&&e()}var i=this,s=this.getTipElement(),o=d.Event(this.constructor.Event.HIDE);d(this.element).trigger(o),o.isDefaultPrevented()||(d(s).removeClass(Ge),"ontouchstart"in document.documentElement&&d(document.body).children().off("mouseover",null,d.noop),this._activeTrigger.click=!1,this._activeTrigger[Qe]=!1,this._activeTrigger[qe]=!1,d(this.tip).hasClass(ze)?(o=h.getTransitionDurationFromElement(s),d(s).one(h.TRANSITION_END,t).emulateTransitionEnd(o)):t(),this._hoverState="")},c.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},c.isWithContent=function(){return Boolean(this.getTitle())},c.addAttachmentClass=function(e){d(this.getTipElement()).addClass(Fe+"-"+e)},c.getTipElement=function(){return this.tip=this.tip||d(this.config.template)[0],this.tip},c.setContent=function(){var e=this.getTipElement();this.setElementContent(d(e.querySelectorAll(".tooltip-inner")),this.getTitle()),d(e).removeClass(ze+" "+Ge)},c.setElementContent=function(e,t){"object"!=typeof t||!t.nodeType&&!t.jquery?this.config.html?(this.config.sanitize&&(t=Ae(t,this.config.whiteList,this.config.sanitizeFn)),e.html(t)):e.text(t):this.config.html?d(t).parent().is(e)||e.empty().append(t):e.text(d(t).text())},c.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||("function"==typeof this.config.title?this.config.title.call(this.element):this.config.title)},c._getPopperConfig=function(e){var t=this;return a({},{placement:e,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){return t._handlePopperPlacementChange(e)}},{},this.config.popperConfig)},c._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=a({},e.offsets,{},t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},c._getContainer=function(){return!1===this.config.container?document.body:h.isElement(this.config.container)?d(this.config.container):d(document).find(this.config.container)},c._getAttachment=function(e){return Ye[e.toUpperCase()]},c._setListeners=function(){var i=this;this.config.trigger.split(" ").forEach(function(e){var t;"click"===e?d(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(e){return i.toggle(e)}):"manual"!==e&&(t=e===qe?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,e=e===qe?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT,d(i.element).on(t,i.config.selector,function(e){return i._enter(e)}).on(e,i.config.selector,function(e){return i._leave(e)}))}),this._hideModalHandler=function(){i.element&&i.hide()},d(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=a({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},c._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");!this.element.getAttribute("title")&&"string"==e||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},c._enter=function(e,t){var i=this.constructor.DATA_KEY;(t=t||d(e.currentTarget).data(i))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),d(e.currentTarget).data(i,t)),e&&(t._activeTrigger["focusin"===e.type?Qe:qe]=!0),d(t.getTipElement()).hasClass(Ge)||t._hoverState===We?t._hoverState=We:(clearTimeout(t._timeout),t._hoverState=We,t.config.delay&&t.config.delay.show?t._timeout=setTimeout(function(){t._hoverState===We&&t.show()},t.config.delay.show):t.show())},c._leave=function(e,t){var i=this.constructor.DATA_KEY;(t=t||d(e.currentTarget).data(i))||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),d(e.currentTarget).data(i,t)),e&&(t._activeTrigger["focusout"===e.type?Qe:qe]=!1),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState="out",t.config.delay&&t.config.delay.hide?t._timeout=setTimeout(function(){"out"===t._hoverState&&t.hide()},t.config.delay.hide):t.hide())},c._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},c._getConfig=function(e){var t=d(this.element).data();return Object.keys(t).forEach(function(e){-1!==He.indexOf(e)&&delete t[e]}),"number"==typeof(e=a({},this.constructor.Default,{},t,{},"object"==typeof e&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),h.typeCheckConfig(O,e,this.constructor.DefaultType),e.sanitize&&(e.template=Ae(e.template,e.whiteList,e.sanitizeFn)),e},c._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},c._cleanTipClass=function(){var e=d(this.getTipElement()),t=e.attr("class").match(Ue);null!==t&&t.length&&e.removeClass(t.join(""))},c._handlePopperPlacementChange=function(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},c._fixTransition=function(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&(d(e).removeClass(ze),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)},Je._jQueryInterface=function(i){return this.each(function(){var e=d(this).data(Ne),t="object"==typeof i&&i;if((e||!/dispose|hide/.test(i))&&(e||(e=new Je(this,t),d(this).data(Ne,e)),"string"==typeof i)){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},t(Je,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return je}},{key:"NAME",get:function(){return O}},{key:"DATA_KEY",get:function(){return Ne}},{key:"Event",get:function(){return Ve}},{key:"EVENT_KEY",get:function(){return I}},{key:"DefaultType",get:function(){return Ke}}]),Je);function Je(e,t){if(void 0===o)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}d.fn[O]=P._jQueryInterface,d.fn[O].Constructor=P,d.fn[O].noConflict=function(){return d.fn[O]=Re,P._jQueryInterface};var Xe,Ze="popover",et="bs.popover",B="."+et,tt=d.fn[Ze],it="bs-popover",st=new RegExp("(^|\\s)"+it+"\\S+","g"),ot=a({},P.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),at=a({},P.DefaultType,{content:"(string|element|function)"}),nt={HIDE:"hide"+B,HIDDEN:"hidden"+B,SHOW:"show"+B,SHOWN:"shown"+B,INSERTED:"inserted"+B,CLICK:"click"+B,FOCUSIN:"focusin"+B,FOCUSOUT:"focusout"+B,MOUSEENTER:"mouseenter"+B,MOUSELEAVE:"mouseleave"+B},rt=(i=Xe=P,(r=lt).prototype=Object.create(i.prototype),(r.prototype.constructor=r).__proto__=i,(r=lt.prototype).isWithContent=function(){return this.getTitle()||this._getContent()},r.addAttachmentClass=function(e){d(this.getTipElement()).addClass(it+"-"+e)},r.getTipElement=function(){return this.tip=this.tip||d(this.config.template)[0],this.tip},r.setContent=function(){var e=d(this.getTipElement()),t=(this.setElementContent(e.find(".popover-header"),this.getTitle()),this._getContent());"function"==typeof t&&(t=t.call(this.element)),this.setElementContent(e.find(".popover-body"),t),e.removeClass("fade show")},r._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},r._cleanTipClass=function(){var e=d(this.getTipElement()),t=e.attr("class").match(st);null!==t&&0<t.length&&e.removeClass(t.join(""))},lt._jQueryInterface=function(i){return this.each(function(){var e=d(this).data(et),t="object"==typeof i?i:null;if((e||!/dispose|hide/.test(i))&&(e||(e=new lt(this,t),d(this).data(et,e)),"string"==typeof i)){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},t(lt,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return ot}},{key:"NAME",get:function(){return Ze}},{key:"DATA_KEY",get:function(){return et}},{key:"Event",get:function(){return nt}},{key:"EVENT_KEY",get:function(){return B}},{key:"DefaultType",get:function(){return at}}]),lt);function lt(){return Xe.apply(this,arguments)||this}d.fn[Ze]=rt._jQueryInterface,d.fn[Ze].Constructor=rt,d.fn[Ze].noConflict=function(){return d.fn[Ze]=tt,rt._jQueryInterface};var L="scrollspy",ct="bs.scrollspy",dt="."+ct,ht=d.fn[L],ut={offset:10,method:"auto",target:""},_t={offset:"number",method:"string",target:"(string|element)"},mt={ACTIVATE:"activate"+dt,SCROLL:"scroll"+dt,LOAD_DATA_API:"load"+dt+".data-api"},pt="active",gt=".nav, .list-group",ft=".nav-link",vt=".list-group-item",yt="position",bt=((c=kt.prototype).refresh=function(){var t=this,e=this._scrollElement===this._scrollElement.window?"offset":yt,s="auto"===this._config.method?e:this._config.method,o=s===yt?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(e){var t,e=h.getSelectorFromElement(e);if(t=e?document.querySelector(e):t){var i=t.getBoundingClientRect();if(i.width||i.height)return[d(t)[s]().top+o,e]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},c.dispose=function(){d.removeData(this._element,ct),d(this._scrollElement).off(dt),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},c._getConfig=function(e){var t;return"string"!=typeof(e=a({},ut,{},"object"==typeof e&&e?e:{})).target&&((t=d(e.target).attr("id"))||(t=h.getUID(L),d(e.target).attr("id",t)),e.target="#"+t),h.typeCheckConfig(L,e,_t),e},c._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},c._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},c._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},c._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),i=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),i<=e){t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])this._activeTarget=null,this._clear();else for(var s=this._offsets.length;s--;)this._activeTarget!==this._targets[s]&&e>=this._offsets[s]&&(void 0===this._offsets[s+1]||e<this._offsets[s+1])&&this._activate(this._targets[s])},c._activate=function(t){this._activeTarget=t,this._clear();var e=this._selector.split(",").map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'}),e=d([].slice.call(document.querySelectorAll(e.join(","))));(e.hasClass("dropdown-item")?(e.closest(".dropdown").find(".dropdown-toggle").addClass(pt),e):(e.addClass(pt),e.parents(gt).prev(ft+", "+vt).addClass(pt),e.parents(gt).prev(".nav-item").children(ft))).addClass(pt),d(this._scrollElement).trigger(mt.ACTIVATE,{relatedTarget:t})},c._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(e){return e.classList.contains(pt)}).forEach(function(e){return e.classList.remove(pt)})},kt._jQueryInterface=function(t){return this.each(function(){var e=d(this).data(ct);if(e||(e=new kt(this,"object"==typeof t&&t),d(this).data(ct,e)),"string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}})},t(kt,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return ut}}]),kt);function kt(e,t){var i=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(t),this._selector=this._config.target+" "+ft+","+this._config.target+" "+vt+","+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,d(this._scrollElement).on(mt.SCROLL,function(e){return i._process(e)}),this.refresh(),this._process()}d(window).on(mt.LOAD_DATA_API,function(){for(var e=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),t=e.length;t--;){var i=d(e[t]);bt._jQueryInterface.call(i,i.data())}}),d.fn[L]=bt._jQueryInterface,d.fn[L].Constructor=bt,d.fn[L].noConflict=function(){return d.fn[L]=ht,bt._jQueryInterface};var wt="bs.tab",i="."+wt,Ct=d.fn.tab,St={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,CLICK_DATA_API:"click"+i+".data-api"},Tt="active",$t=".active",Mt="> li > .active",Et=((r=xt.prototype).show=function(){var e,t,i,s,o,a,n=this;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&d(this._element).hasClass(Tt)||d(this._element).hasClass("disabled")||(t=d(this._element).closest(".nav, .list-group")[0],i=h.getSelectorFromElement(this._element),t&&(o="UL"===t.nodeName||"OL"===t.nodeName?Mt:$t,s=(s=d.makeArray(d(t).find(o)))[s.length-1]),o=d.Event(St.HIDE,{relatedTarget:this._element}),a=d.Event(St.SHOW,{relatedTarget:s}),s&&d(s).trigger(o),d(this._element).trigger(a),a.isDefaultPrevented())||o.isDefaultPrevented()||(i&&(e=document.querySelector(i)),this._activate(this._element,t),a=function(){var e=d.Event(St.HIDDEN,{relatedTarget:n._element}),t=d.Event(St.SHOWN,{relatedTarget:s});d(s).trigger(e),d(n._element).trigger(t)},e?this._activate(e,e.parentNode,a):a())},r.dispose=function(){d.removeData(this._element,wt),this._element=null},r._activate=function(e,t,i){function s(){return o._transitionComplete(e,a,i)}var o=this,a=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?d(t).children($t):d(t).find(Mt))[0],t=i&&a&&d(a).hasClass("fade");a&&t?(t=h.getTransitionDurationFromElement(a),d(a).removeClass("show").one(h.TRANSITION_END,s).emulateTransitionEnd(t)):s()},r._transitionComplete=function(e,t,i){var s;t&&(d(t).removeClass(Tt),(s=d(t.parentNode).find("> .dropdown-menu .active")[0])&&d(s).removeClass(Tt),"tab"===t.getAttribute("role"))&&t.setAttribute("aria-selected",!1),d(e).addClass(Tt),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),h.reflow(e),e.classList.contains("fade")&&e.classList.add("show"),e.parentNode&&d(e.parentNode).hasClass("dropdown-menu")&&((s=d(e).closest(".dropdown")[0])&&(t=[].slice.call(s.querySelectorAll(".dropdown-toggle")),d(t).addClass(Tt)),e.setAttribute("aria-expanded",!0)),i&&i()},xt._jQueryInterface=function(i){return this.each(function(){var e=d(this),t=e.data(wt);if(t||(t=new xt(this),e.data(wt,t)),"string"==typeof i){if(void 0===t[i])throw new TypeError('No method named "'+i+'"');t[i]()}})},t(xt,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),xt);function xt(e){this._element=e}d(document).on(St.CLICK_DATA_API,'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(e){e.preventDefault(),Et._jQueryInterface.call(d(this),"show")}),d.fn.tab=Et._jQueryInterface,d.fn.tab.Constructor=Et,d.fn.tab.noConflict=function(){return d.fn.tab=Ct,Et._jQueryInterface};var Dt="toast",Ot="bs.toast",c="."+Ot,It=d.fn[Dt],Pt={CLICK_DISMISS:"click.dismiss"+c,HIDE:"hide"+c,HIDDEN:"hidden"+c,SHOW:"show"+c,SHOWN:"shown"+c},Bt="show",Lt="showing",At={animation:"boolean",autohide:"boolean",delay:"number"},Nt={animation:!0,autohide:!0,delay:500},Rt=((i=Ft.prototype).show=function(){var e,t=this,i=d.Event(Pt.SHOW);d(this._element).trigger(i),i.isDefaultPrevented()||(this._config.animation&&this._element.classList.add("fade"),i=function(){t._element.classList.remove(Lt),t._element.classList.add(Bt),d(t._element).trigger(Pt.SHOWN),t._config.autohide&&(t._timeout=setTimeout(function(){t.hide()},t._config.delay))},this._element.classList.remove("hide"),h.reflow(this._element),this._element.classList.add(Lt),this._config.animation?(e=h.getTransitionDurationFromElement(this._element),d(this._element).one(h.TRANSITION_END,i).emulateTransitionEnd(e)):i())},i.hide=function(){var e;this._element.classList.contains(Bt)&&(e=d.Event(Pt.HIDE),d(this._element).trigger(e),e.isDefaultPrevented()||this._close())},i.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(Bt)&&this._element.classList.remove(Bt),d(this._element).off(Pt.CLICK_DISMISS),d.removeData(this._element,Ot),this._element=null,this._config=null},i._getConfig=function(e){return e=a({},Nt,{},d(this._element).data(),{},"object"==typeof e&&e?e:{}),h.typeCheckConfig(Dt,e,this.constructor.DefaultType),e},i._setListeners=function(){var e=this;d(this._element).on(Pt.CLICK_DISMISS,'[data-dismiss="toast"]',function(){return e.hide()})},i._close=function(){function e(){i._element.classList.add("hide"),d(i._element).trigger(Pt.HIDDEN)}var t,i=this;this._element.classList.remove(Bt),this._config.animation?(t=h.getTransitionDurationFromElement(this._element),d(this._element).one(h.TRANSITION_END,e).emulateTransitionEnd(t)):e()},Ft._jQueryInterface=function(i){return this.each(function(){var e=d(this),t=e.data(Ot);if(t||(t=new Ft(this,"object"==typeof i&&i),e.data(Ot,t)),"string"==typeof i){if(void 0===t[i])throw new TypeError('No method named "'+i+'"');t[i](this)}})},t(Ft,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"DefaultType",get:function(){return At}},{key:"Default",get:function(){return Nt}}]),Ft);function Ft(e,t){this._element=e,this._config=this._getConfig(t),this._timeout=null,this._setListeners()}d.fn[Dt]=Rt._jQueryInterface,d.fn[Dt].Constructor=Rt,d.fn[Dt].noConflict=function(){return d.fn[Dt]=It,Rt._jQueryInterface},e.Alert=s,e.Button=z,e.Carousel=g,e.Collapse=he,e.Dropdown=$,e.Modal=Oe,e.Popover=rt,e.Scrollspy=bt,e.Tab=Et,e.Toast=Rt,e.Tooltip=P,e.Util=h,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){var A;function _(){return A.apply(null,arguments)}function l(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function N(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){return void 0===e}function R(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function F(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function U(e,t){for(var i=[],s=0;s<e.length;++s)i.push(t(e[s],s));return i}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){for(var i in t)m(t,i)&&(e[i]=t[i]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,i,s){return Dt(e,t,i,s,!0).utc()}function p(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function H(e){if(null==e._isValid){var t=p(e),i=Y.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||(t.meridiem,i));if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function K(e){var t=c(NaN);return null!=e?r(p(t),e):p(t).userInvalidated=!0,t}var Y=Array.prototype.some||function(e){for(var t=Object(this),i=t.length>>>0,s=0;s<i;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1},j=_.momentProperties=[];function W(e,t){var i,s,o;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=p(t)),a(t._locale)||(e._locale=t._locale),0<j.length)for(i=0;i<j.length;i++)a(o=t[s=j[i]])||(e[s]=o);return e}var V=!1;function z(e){W(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===V&&(V=!0,_.updateOffset(this),V=!1)}function n(e){return e instanceof z||null!=e&&null!=e._isAMomentObject}function d(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function h(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?d(e):t}function G(e,t,i){for(var s=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0,n=0;n<s;n++)(i&&e[n]!==t[n]||!i&&h(e[n])!==h(t[n]))&&a++;return a+o}function q(e){!1===_.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function e(o,a){var n=!0;return r(function(){if(null!=_.deprecationHandler&&_.deprecationHandler(null,o),n){for(var e,t=[],i=0;i<arguments.length;i++){if(e="","object"==typeof arguments[i]){for(var s in e+="\n["+i+"] ",arguments[0])e+=s+": "+arguments[0][s]+", ";e=e.slice(0,-2)}else e=arguments[i];t.push(e)}q(o+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),n=!1}return a.apply(this,arguments)},a)}var Q={};function J(e,t){null!=_.deprecationHandler&&_.deprecationHandler(e,t),Q[e]||(q(t),Q[e]=!0)}function u(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function X(e,t){var i,s=r({},e);for(i in t)m(t,i)&&(N(e[i])&&N(t[i])?(s[i]={},r(s[i],e[i]),r(s[i],t[i])):null!=t[i]?s[i]=t[i]:delete s[i]);for(i in e)m(e,i)&&!m(t,i)&&N(e[i])&&(s[i]=r({},s[i]));return s}function Z(e){null!=e&&this.set(e)}_.suppressDeprecationWarnings=!1,_.deprecationHandler=null;var ee=Object.keys||function(e){var t,i=[];for(t in e)m(e,t)&&i.push(t);return i},te={};function t(e,t){var i=e.toLowerCase();te[i]=te[i+"s"]=te[t]=e}function g(e){return"string"==typeof e?te[e]||te[e.toLowerCase()]:void 0}function ie(e){var t,i,s={};for(i in e)m(e,i)&&(t=g(i))&&(s[t]=e[i]);return s}var se={};function i(e,t){se[e]=t}function f(e,t,i){var s=""+Math.abs(e);return(0<=e?i?"+":"":"-")+Math.pow(10,Math.max(0,t-s.length)).toString().substr(1)+s}var oe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ae=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ne={},re={};function s(e,t,i,s){var o="string"==typeof s?function(){return this[s]()}:s;e&&(re[e]=o),t&&(re[t[0]]=function(){return f(o.apply(this,arguments),t[1],t[2])}),i&&(re[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function le(e,t){return e.isValid()?(t=ce(t,e.localeData()),ne[t]=ne[t]||function(s){for(var e,o=s.match(oe),t=0,a=o.length;t<a;t++)re[o[t]]?o[t]=re[o[t]]:o[t]=(e=o[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var t="",i=0;i<a;i++)t+=u(o[i])?o[i].call(e,s):o[i];return t}}(t),ne[t](e)):e.localeData().invalidDate()}function ce(e,t){var i=5;function s(e){return t.longDateFormat(e)||e}for(ae.lastIndex=0;0<=i&&ae.test(e);)e=e.replace(ae,s),ae.lastIndex=0,--i;return e}var o=/\d/,v=/\d\d/,de=/\d{3}/,he=/\d{4}/,ue=/[+-]?\d{6}/,y=/\d\d?/,_e=/\d\d\d\d?/,me=/\d\d\d\d\d\d?/,pe=/\d{1,3}/,ge=/\d{1,4}/,fe=/[+-]?\d{1,6}/,ve=/\d+/,ye=/[+-]?\d+/,be=/Z|[+-]\d\d:?\d\d/gi,ke=/Z|[+-]\d\d(?::?\d\d)?/gi,we=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ce={};function b(e,i,s){Ce[e]=u(i)?i:function(e,t){return e&&s?s:i}}function Se(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Te={};function k(e,i){var t,s=i;for("string"==typeof e&&(e=[e]),R(i)&&(s=function(e,t){t[i]=h(e)}),t=0;t<e.length;t++)Te[e[t]]=s}function $e(e,o){k(e,function(e,t,i,s){i._w=i._w||{},o(e,i._w,i,s)})}var w=0,C=1,S=2,T=3,$=4,M=5,Me=6,Ee=7,xe=8;function De(e){return Oe(e)?366:365}function Oe(e){return e%4==0&&e%100!=0||e%400==0}s("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),s(0,["YY",2],0,function(){return this.year()%100}),s(0,["YYYY",4],0,"year"),s(0,["YYYYY",5],0,"year"),s(0,["YYYYYY",6,!0],0,"year"),t("year","y"),i("year",1),b("Y",ye),b("YY",y,v),b("YYYY",ge,he),b("YYYYY",fe,ue),b("YYYYYY",fe,ue),k(["YYYYY","YYYYYY"],w),k("YYYY",function(e,t){t[w]=2===e.length?_.parseTwoDigitYear(e):h(e)}),k("YY",function(e,t){t[w]=_.parseTwoDigitYear(e)}),k("Y",function(e,t){t[w]=parseInt(e,10)}),_.parseTwoDigitYear=function(e){return h(e)+(68<h(e)?1900:2e3)};var E,Ie=Pe("FullYear",!0);function Pe(t,i){return function(e){return null!=e?(Le(this,t,e),_.updateOffset(this,i),this):Be(this,t)}}function Be(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Le(e,t,i){e.isValid()&&!isNaN(i)&&("FullYear"===t&&Oe(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),Ae(i,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function Ae(e,t){return isNaN(e)||isNaN(t)?NaN:(e+=(t-(t=(t%12+12)%12))/12,1==t?Oe(e)?29:28:31-t%7%2)}E=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},s("M",["MM",2],"Mo",function(){return this.month()+1}),s("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),s("MMMM",0,0,function(e){return this.localeData().months(this,e)}),t("month","M"),i("month",8),b("M",y),b("MM",y,v),b("MMM",function(e,t){return t.monthsShortRegex(e)}),b("MMMM",function(e,t){return t.monthsRegex(e)}),k(["M","MM"],function(e,t){t[C]=h(e)-1}),k(["MMM","MMMM"],function(e,t,i,s){s=i._locale.monthsParse(e,s,i._strict);null!=s?t[C]=s:p(i).invalidMonth=e});var Ne=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Re="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Fe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ue(e,t){var i;if(e.isValid()){if("string"==typeof t)if(/^\d+$/.test(t))t=h(t);else if(!R(t=e.localeData().monthsParse(t)))return;i=Math.min(e.date(),Ae(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i)}}function He(e){return null!=e?(Ue(this,e),_.updateOffset(this,!0),this):Be(this,"Month")}var Ke=we,Ye=we;function je(){function e(e,t){return t.length-e.length}for(var t,i=[],s=[],o=[],a=0;a<12;a++)t=c([2e3,a]),i.push(this.monthsShort(t,"")),s.push(this.months(t,"")),o.push(this.months(t,"")),o.push(this.monthsShort(t,""));for(i.sort(e),s.sort(e),o.sort(e),a=0;a<12;a++)i[a]=Se(i[a]),s[a]=Se(s[a]);for(a=0;a<24;a++)o[a]=Se(o[a]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function We(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ve(e,t,i){i=7+t-i;return-(7+We(e,0,i).getUTCDay()-t)%7+i-1}function ze(e,t,i,s,o){var a,t=1+7*(t-1)+(7+i-s)%7+Ve(e,s,o),i=t<=0?De(a=e-1)+t:t>De(e)?(a=e+1,t-De(e)):(a=e,t);return{year:a,dayOfYear:i}}function Ge(e,t,i){var s,o,a=Ve(e.year(),t,i),a=Math.floor((e.dayOfYear()-a-1)/7)+1;return a<1?s=a+qe(o=e.year()-1,t,i):a>qe(e.year(),t,i)?(s=a-qe(e.year(),t,i),o=e.year()+1):(o=e.year(),s=a),{week:s,year:o}}function qe(e,t,i){var s=Ve(e,t,i),t=Ve(e+1,t,i);return(De(e)-s+t)/7}function Qe(e,t){return e.slice(t,7).concat(e.slice(0,t))}s("w",["ww",2],"wo","week"),s("W",["WW",2],"Wo","isoWeek"),t("week","w"),t("isoWeek","W"),i("week",5),i("isoWeek",5),b("w",y),b("ww",y,v),b("W",y),b("WW",y,v),$e(["w","ww","W","WW"],function(e,t,i,s){t[s.substr(0,1)]=h(e)}),s("d",0,"do","day"),s("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),s("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),s("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),s("e",0,0,"weekday"),s("E",0,0,"isoWeekday"),t("day","d"),t("weekday","e"),t("isoWeekday","E"),i("day",11),i("weekday",11),i("isoWeekday",11),b("d",y),b("e",y),b("E",y),b("dd",function(e,t){return t.weekdaysMinRegex(e)}),b("ddd",function(e,t){return t.weekdaysShortRegex(e)}),b("dddd",function(e,t){return t.weekdaysRegex(e)}),$e(["dd","ddd","dddd"],function(e,t,i,s){s=i._locale.weekdaysParse(e,s,i._strict);null!=s?t.d=s:p(i).invalidWeekday=e}),$e(["d","e","E"],function(e,t,i,s){t[s]=h(e)});var Je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Xe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),et=we,tt=we,it=we;function st(){function e(e,t){return t.length-e.length}for(var t,i,s,o=[],a=[],n=[],r=[],l=0;l<7;l++)s=c([2e3,1]).day(l),t=this.weekdaysMin(s,""),i=this.weekdaysShort(s,""),s=this.weekdays(s,""),o.push(t),a.push(i),n.push(s),r.push(t),r.push(i),r.push(s);for(o.sort(e),a.sort(e),n.sort(e),r.sort(e),l=0;l<7;l++)a[l]=Se(a[l]),n[l]=Se(n[l]),r[l]=Se(r[l]);this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function ot(){return this.hours()%12||12}function at(e,t){s(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function nt(e,t){return t._meridiemParse}s("H",["HH",2],0,"hour"),s("h",["hh",2],0,ot),s("k",["kk",2],0,function(){return this.hours()||24}),s("hmm",0,0,function(){return""+ot.apply(this)+f(this.minutes(),2)}),s("hmmss",0,0,function(){return""+ot.apply(this)+f(this.minutes(),2)+f(this.seconds(),2)}),s("Hmm",0,0,function(){return""+this.hours()+f(this.minutes(),2)}),s("Hmmss",0,0,function(){return""+this.hours()+f(this.minutes(),2)+f(this.seconds(),2)}),at("a",!0),at("A",!1),t("hour","h"),i("hour",13),b("a",nt),b("A",nt),b("H",y),b("h",y),b("k",y),b("HH",y,v),b("hh",y,v),b("kk",y,v),b("hmm",_e),b("hmmss",me),b("Hmm",_e),b("Hmmss",me),k(["H","HH"],T),k(["k","kk"],function(e,t,i){e=h(e);t[T]=24===e?0:e}),k(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),k(["h","hh"],function(e,t,i){t[T]=h(e),p(i).bigHour=!0}),k("hmm",function(e,t,i){var s=e.length-2;t[T]=h(e.substr(0,s)),t[$]=h(e.substr(s)),p(i).bigHour=!0}),k("hmmss",function(e,t,i){var s=e.length-4,o=e.length-2;t[T]=h(e.substr(0,s)),t[$]=h(e.substr(s,2)),t[M]=h(e.substr(o)),p(i).bigHour=!0}),k("Hmm",function(e,t,i){var s=e.length-2;t[T]=h(e.substr(0,s)),t[$]=h(e.substr(s))}),k("Hmmss",function(e,t,i){var s=e.length-4,o=e.length-2;t[T]=h(e.substr(0,s)),t[$]=h(e.substr(s,2)),t[M]=h(e.substr(o))});var rt,we=Pe("Hours",!0),lt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Re,monthsShort:Fe,week:{dow:0,doy:6},weekdays:Je,weekdaysMin:Ze,weekdaysShort:Xe,meridiemParse:/[ap]\.?m?\.?/i},x={},ct={};function dt(e){return e&&e.toLowerCase().replace("_","-")}function ht(e){var t;if(!x[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=rt._abbr,require("./locale/"+e),ut(t)}catch(e){}return x[e]}function ut(e,t){return e&&((t=a(t)?mt(e):_t(e,t))?rt=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),rt._abbr}function _t(e,t){if(null===t)return delete x[e],null;var i,s=lt;if(t.abbr=e,null!=x[e])J("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=x[e]._config;else if(null!=t.parentLocale)if(null!=x[t.parentLocale])s=x[t.parentLocale]._config;else{if(null==(i=ht(t.parentLocale)))return ct[t.parentLocale]||(ct[t.parentLocale]=[]),ct[t.parentLocale].push({name:e,config:t}),null;s=i._config}return x[e]=new Z(X(s,t)),ct[e]&&ct[e].forEach(function(e){_t(e.name,e.config)}),ut(e),x[e]}function mt(e){var t;if(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e){if(!l(e)){if(t=ht(e))return t;e=[e]}for(var i,s,o,a,n=e,r=0;r<n.length;){for(i=(a=dt(n[r]).split("-")).length,s=(s=dt(n[r+1]))?s.split("-"):null;0<i;){if(o=ht(a.slice(0,i).join("-")))return o;if(s&&s.length>=i&&G(a,s,!0)>=i-1)break;i--}r++}}return rt}function pt(e){var t=e._a;return t&&-2===p(e).overflow&&(t=t[C]<0||11<t[C]?C:t[S]<1||t[S]>Ae(t[w],t[C])?S:t[T]<0||24<t[T]||24===t[T]&&(0!==t[$]||0!==t[M]||0!==t[Me])?T:t[$]<0||59<t[$]?$:t[M]<0||59<t[M]?M:t[Me]<0||999<t[Me]?Me:-1,p(e)._overflowDayOfYear&&(t<w||S<t)&&(t=S),p(e)._overflowWeeks&&-1===t&&(t=Ee),p(e)._overflowWeekday&&-1===t&&(t=xe),p(e).overflow=t),e}function gt(e,t,i){return null!=e?e:null!=t?t:i}function ft(e){var t,i,s,o,a,n,r,l,c=[];if(!e._d){var d=e,h=new Date(_.now()),u=d._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()];for(e._w&&null==e._a[S]&&null==e._a[C]&&(null!=(h=(d=e)._w).GG||null!=h.W||null!=h.E?(o=1,a=4,r=gt(h.GG,d._a[w],Ge(D(),1,4).year),l=gt(h.W,1),((i=gt(h.E,1))<1||7<i)&&(s=!0)):(o=d._locale._week.dow,a=d._locale._week.doy,n=Ge(D(),o,a),r=gt(h.gg,d._a[w],n.year),l=gt(h.w,n.week),null!=h.d?((i=h.d)<0||6<i)&&(s=!0):null!=h.e?(i=h.e+o,(h.e<0||6<h.e)&&(s=!0)):i=o),l<1||l>qe(r,o,a)?p(d)._overflowWeeks=!0:null!=s?p(d)._overflowWeekday=!0:(n=ze(r,l,i,o,a),d._a[w]=n.year,d._dayOfYear=n.dayOfYear)),null!=e._dayOfYear&&(h=gt(e._a[w],u[w]),(e._dayOfYear>De(h)||0===e._dayOfYear)&&(p(e)._overflowDayOfYear=!0),s=We(h,0,e._dayOfYear),e._a[C]=s.getUTCMonth(),e._a[S]=s.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=c[t]=u[t];for(;t<7;t++)e._a[t]=c[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[T]&&0===e._a[$]&&0===e._a[M]&&0===e._a[Me]&&(e._nextDay=!0,e._a[T]=0),e._d=(e._useUTC?We:function(e,t,i,s,o,a,n){var r;return e<100&&0<=e?(r=new Date(e+400,t,i,s,o,a,n),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,i,s,o,a,n),r}).apply(null,c),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[T]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(p(e).weekdayMismatch=!0)}}var vt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bt=/Z|[+-]\d\d(?::?\d\d)?/,kt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],wt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ct=/^\/?Date\((\-?\d+)/i;function St(e){var t,i,s,o,a,n,r=e._i,l=vt.exec(r)||yt.exec(r);if(l){for(p(e).iso=!0,t=0,i=kt.length;t<i;t++)if(kt[t][1].exec(l[1])){o=kt[t][0],s=!1!==kt[t][2];break}if(null==o)return e._isValid=!1;if(l[3]){for(t=0,i=wt.length;t<i;t++)if(wt[t][1].exec(l[3])){a=(l[2]||" ")+wt[t][0];break}if(null==a)return e._isValid=!1}if(!s&&null!=a)return e._isValid=!1;if(l[4]){if(!bt.exec(l[4]))return e._isValid=!1;n="Z"}e._f=o+(a||"")+(n||""),Et(e)}else e._isValid=!1}var Tt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;var $t={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Mt(e){var t,i,s,o,a,n,r=Tt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));r?(t=r[4],i=r[3],s=r[2],o=r[5],a=r[6],n=r[7],t=[(t=parseInt(t,10))<=49?2e3+t:t<=999?1900+t:t,Fe.indexOf(i),parseInt(s,10),parseInt(o,10),parseInt(a,10)],n&&t.push(parseInt(n,10)),s=i=t,o=e,(a=r[1])&&Xe.indexOf(a)!==new Date(s[0],s[1],s[2]).getDay()?(p(o).weekdayMismatch=!0,o._isValid=!1):(e._a=i,e._tzm=(n=r[8],t=r[9],a=r[10],n?$t[n]:t?0:((n=parseInt(a,10))-(t=n%100))/100*60+t),e._d=We.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),p(e).rfc2822=!0)):e._isValid=!1}function Et(e){if(e._f!==_.ISO_8601)if(e._f!==_.RFC_2822){e._a=[],p(e).empty=!0;for(var t,i,s,o=""+e._i,a=o.length,n=0,r=ce(e._f,e._locale).match(oe)||[],l=0;l<r.length;l++)t=r[l],(u=(o.match((u=e,m(Ce,h=t)?Ce[h](u._strict,u._locale):new RegExp(Se(h.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,s,o){return t||i||s||o})))))||[])[0])&&(0<(h=o.substr(0,o.indexOf(u))).length&&p(e).unusedInput.push(h),o=o.slice(o.indexOf(u)+u.length),n+=u.length),re[t]?(u?p(e).empty=!1:p(e).unusedTokens.push(t),h=t,s=e,null!=(i=u)&&m(Te,h)&&Te[h](i,s._a,s,h)):e._strict&&!u&&p(e).unusedTokens.push(t);p(e).charsLeftOver=a-n,0<o.length&&p(e).unusedInput.push(o),e._a[T]<=12&&!0===p(e).bigHour&&0<e._a[T]&&(p(e).bigHour=void 0),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[T]=(a=e._locale,c=e._a[T],null==(d=e._meridiem)?c:null!=a.meridiemHour?a.meridiemHour(c,d):(null!=a.isPM&&((a=a.isPM(d))&&c<12&&(c+=12),a||12!==c||(c=0)),c)),ft(e),pt(e)}else Mt(e);else St(e);var c,d,h,u}function xt(e){var t,i,s=e._i,o=e._f;return e._locale=e._locale||mt(e._l),null===s||void 0===o&&""===s?K({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),n(s)?new z(pt(s)):(F(s)?e._d=s:l(o)?function(e){var t,i,s,o,a;if(0===e._f.length)return p(e).invalidFormat=!0,e._d=new Date(NaN);for(o=0;o<e._f.length;o++)a=0,t=W({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],Et(t),H(t)&&(a=(a+=p(t).charsLeftOver)+10*p(t).unusedTokens.length,p(t).score=a,null==s||a<s)&&(s=a,i=t);r(e,i||t)}(e):o?Et(e):a(o=(s=e)._i)?s._d=new Date(_.now()):F(o)?s._d=new Date(o.valueOf()):"string"==typeof o?(t=s,null===(i=Ct.exec(t._i))?(St(t),!1===t._isValid&&(delete t._isValid,Mt(t),!1===t._isValid)&&(delete t._isValid,_.createFromInputFallback(t))):t._d=new Date(+i[1])):l(o)?(s._a=U(o.slice(0),function(e){return parseInt(e,10)}),ft(s)):N(o)?(t=s)._d||(i=ie(t._i),t._a=U([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(e){return e&&parseInt(e,10)}),ft(t)):R(o)?s._d=new Date(o):_.createFromInputFallback(s),H(e)||(e._d=null),e))}function Dt(e,t,i,s,o){var a={};return!0!==i&&!1!==i||(s=i,i=void 0),(N(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(e.hasOwnProperty(t))return;return 1}(e)||l(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=i,a._i=e,a._f=t,a._strict=s,(o=new z(pt(xt(a))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function D(e,t,i,s){return Dt(e,t,i,s,!1)}_.createFromInputFallback=e("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),_.ISO_8601=function(){},_.RFC_2822=function(){};_e=e("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=D.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:K()}),me=e("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=D.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:K()});function Ot(e,t){var i,s;if(!(t=1===t.length&&l(t[0])?t[0]:t).length)return D();for(i=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](i)||(i=t[s]);return i}var It=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Pt(e){var e=ie(e),t=e.year||0,i=e.quarter||0,s=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,n=e.hour||0,r=e.minute||0,l=e.second||0,c=e.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===E.call(It,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var i=!1,s=0;s<It.length;++s)if(e[It[s]]){if(i)return!1;parseFloat(e[It[s]])!==h(e[It[s]])&&(i=!0)}return!0}(e),this._milliseconds=+c+1e3*l+6e4*r+1e3*n*60*60,this._days=+a+7*o,this._months=+s+3*i+12*t,this._data={},this._locale=mt(),this._bubble()}function Bt(e){return e instanceof Pt}function Lt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function At(e,i){s(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+f(~~(e/60),2)+i+f(~~e%60,2)})}At("Z",":"),At("ZZ",""),b("Z",ke),b("ZZ",ke),k(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Rt(ke,e)});var Nt=/([\+\-]|\d\d)/gi;function Rt(e,t){var t=(t||"").match(e);return null===t?null:0===(t=60*(e=((t[t.length-1]||[])+"").match(Nt)||["-",0,0])[1]+h(e[2]))?0:"+"===e[0]?t:-t}function Ft(e,t){var i;return t._isUTC?(t=t.clone(),i=(n(e)||F(e)?e:D(e)).valueOf()-t.valueOf(),t._d.setTime(t._d.valueOf()+i),_.updateOffset(t,!1),t):D(e).local()}function Ut(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ht(){return!!this.isValid()&&this._isUTC&&0===this._offset}_.updateOffset=function(){};var Kt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Yt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function O(e,t){var i,s,o=e;return Bt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:R(e)?(o={},t?o[t]=e:o.milliseconds=e):(t=Kt.exec(e))?(i="-"===t[1]?-1:1,o={y:0,d:h(t[S])*i,h:h(t[T])*i,m:h(t[$])*i,s:h(t[M])*i,ms:h(Lt(1e3*t[Me]))*i}):(t=Yt.exec(e))?(i="-"===t[1]?-1:1,o={y:jt(t[2],i),M:jt(t[3],i),w:jt(t[4],i),d:jt(t[5],i),h:jt(t[6],i),m:jt(t[7],i),s:jt(t[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(t=D(o.from),i=D(o.to),t=t.isValid()&&i.isValid()?(i=Ft(i,t),t.isBefore(i)?s=Wt(t,i):((s=Wt(i,t)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(o={}).ms=t.milliseconds,o.M=t.months),s=new Pt(o),Bt(e)&&m(e,"_locale")&&(s._locale=e._locale),s}function jt(e,t){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*t}function Wt(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Vt(s,o){return function(e,t){var i;return null===t||isNaN(+t)||(J(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=e,e=t,t=i),zt(this,O(e="string"==typeof e?+e:e,t),s),this}}function zt(e,t,i,s){var o=t._milliseconds,a=Lt(t._days),t=Lt(t._months);e.isValid()&&(s=null==s||s,t&&Ue(e,Be(e,"Month")+t*i),a&&Le(e,"Date",Be(e,"Date")+a*i),o&&e._d.setTime(e._d.valueOf()+o*i),s)&&_.updateOffset(e,a||t)}O.fn=Pt.prototype,O.invalid=function(){return O(NaN)};Re=Vt(1,"add"),Je=Vt(-1,"subtract");function Gt(e,t){var i=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(i,"months");return-(i+(t-s<0?(t-s)/(s-e.clone().add(i-1,"months")):(t-s)/(e.clone().add(1+i,"months")-s)))||0}function qt(e){return void 0===e?this._locale._abbr:(null!=(e=mt(e))&&(this._locale=e),this)}_.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",_.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";Ze=e("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Qt(){return this._locale}var Jt=126227808e5;function Xt(e,t){return(e%t+t)%t}function Zt(e,t,i){return e<100&&0<=e?new Date(e+400,t,i)-Jt:new Date(e,t,i).valueOf()}function ei(e,t,i){return e<100&&0<=e?Date.UTC(e+400,t,i)-Jt:Date.UTC(e,t,i)}function ti(e,t){s(0,[e,e.length],0,t)}function ii(e,t,i,s,o){var a;return null==e?Ge(this,s,o).year:((a=qe(e,s,o))<t&&(t=a),function(e,t,i,s,o){e=ze(e,t,i,s,o),t=We(e.year,0,e.dayOfYear);return this.year(t.getUTCFullYear()),this.month(t.getUTCMonth()),this.date(t.getUTCDate()),this}.call(this,e,t,i,s,o))}s(0,["gg",2],0,function(){return this.weekYear()%100}),s(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ti("gggg","weekYear"),ti("ggggg","weekYear"),ti("GGGG","isoWeekYear"),ti("GGGGG","isoWeekYear"),t("weekYear","gg"),t("isoWeekYear","GG"),i("weekYear",1),i("isoWeekYear",1),b("G",ye),b("g",ye),b("GG",y,v),b("gg",y,v),b("GGGG",ge,he),b("gggg",ge,he),b("GGGGG",fe,ue),b("ggggg",fe,ue),$e(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,s){t[s.substr(0,2)]=h(e)}),$e(["gg","GG"],function(e,t,i,s){t[s]=_.parseTwoDigitYear(e)}),s("Q",0,"Qo","quarter"),t("quarter","Q"),i("quarter",7),b("Q",o),k("Q",function(e,t){t[C]=3*(h(e)-1)}),s("D",["DD",2],"Do","date"),t("date","D"),i("date",9),b("D",y),b("DD",y,v),b("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),k(["D","DD"],S),k("Do",function(e,t){t[S]=h(e.match(y)[0])});ge=Pe("Date",!0),s("DDD",["DDDD",3],"DDDo","dayOfYear"),t("dayOfYear","DDD"),i("dayOfYear",4),b("DDD",pe),b("DDDD",de),k(["DDD","DDDD"],function(e,t,i){i._dayOfYear=h(e)}),s("m",["mm",2],0,"minute"),t("minute","m"),i("minute",14),b("m",y),b("mm",y,v),k(["m","mm"],$),he=Pe("Minutes",!1);s("s",["ss",2],0,"second"),t("second","s"),i("second",15),b("s",y),b("ss",y,v),k(["s","ss"],M);var si,fe=Pe("Seconds",!1);for(s("S",0,0,function(){return~~(this.millisecond()/100)}),s(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),s(0,["SSS",3],0,"millisecond"),s(0,["SSSS",4],0,function(){return 10*this.millisecond()}),s(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),s(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),s(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),s(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),s(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),t("millisecond","ms"),i("millisecond",16),b("S",pe,o),b("SS",pe,v),b("SSS",pe,de),si="SSSS";si.length<=9;si+="S")b(si,ve);function oi(e,t){t[Me]=h(1e3*("0."+e))}for(si="S";si.length<=9;si+="S")k(si,oi);ue=Pe("Milliseconds",!1),s("z",0,0,"zoneAbbr"),s("zz",0,0,"zoneName"),o=z.prototype;function ai(e){return e}o.add=Re,o.calendar=function(e,t){var e=e||D(),i=Ft(e,this).startOf("day"),i=_.calendarFormat(this,i)||"sameElse",t=t&&(u(t[i])?t[i].call(this,e):t[i]);return this.format(t||this.localeData().calendar(i,this,D(e)))},o.clone=function(){return new z(this)},o.diff=function(e,t,i){var s,o,a;if(!this.isValid())return NaN;if(!(s=Ft(e,this)).isValid())return NaN;switch(o=6e4*(s.utcOffset()-this.utcOffset()),t=g(t)){case"year":a=Gt(this,s)/12;break;case"month":a=Gt(this,s);break;case"quarter":a=Gt(this,s)/3;break;case"second":a=(this-s)/1e3;break;case"minute":a=(this-s)/6e4;break;case"hour":a=(this-s)/36e5;break;case"day":a=(this-s-o)/864e5;break;case"week":a=(this-s-o)/6048e5;break;default:a=this-s}return i?a:d(a)},o.endOf=function(e){var t;if(void 0!==(e=g(e))&&"millisecond"!==e&&this.isValid()){var i=this._isUTC?ei:Zt;switch(e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-Xt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-Xt(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-Xt(t,1e3)-1}this._d.setTime(t),_.updateOffset(this,!0)}return this},o.format=function(e){e=e||(this.isUtc()?_.defaultFormatUtc:_.defaultFormat);e=le(this,e);return this.localeData().postformat(e)},o.from=function(e,t){return this.isValid()&&(n(e)&&e.isValid()||D(e).isValid())?O({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},o.fromNow=function(e){return this.from(D(),e)},o.to=function(e,t){return this.isValid()&&(n(e)&&e.isValid()||D(e).isValid())?O({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},o.toNow=function(e){return this.to(D(),e)},o.get=function(e){return u(this[e=g(e)])?this[e]():this},o.invalidAt=function(){return p(this).overflow},o.isAfter=function(e,t){e=n(e)?e:D(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=g(t)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},o.isBefore=function(e,t){e=n(e)?e:D(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=g(t)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},o.isBetween=function(e,t,i,s){e=n(e)?e:D(e),t=n(t)?t:D(t);return!!(this.isValid()&&e.isValid()&&t.isValid())&&("("===(s=s||"()")[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===s[1]?this.isBefore(t,i):!this.isAfter(t,i))},o.isSame=function(e,t){var e=n(e)?e:D(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=g(t)||"millisecond")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},o.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},o.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},o.isValid=function(){return H(this)},o.lang=Ze,o.locale=qt,o.localeData=Qt,o.max=me,o.min=_e,o.parsingFlags=function(){return r({},p(this))},o.set=function(i,e){if("object"==typeof i)for(var t=function(){var e,t=[];for(e in i)t.push({unit:e,priority:se[e]});return t.sort(function(e,t){return e.priority-t.priority}),t}(i=ie(i)),s=0;s<t.length;s++)this[t[s].unit](i[t[s].unit]);else if(u(this[i=g(i)]))return this[i](e);return this},o.startOf=function(e){var t;if(void 0!==(e=g(e))&&"millisecond"!==e&&this.isValid()){var i=this._isUTC?ei:Zt;switch(e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Xt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=Xt(t,6e4);break;case"second":t=this._d.valueOf(),t-=Xt(t,1e3)}this._d.setTime(t),_.updateOffset(this,!0)}return this},o.subtract=Je,o.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},o.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},o.toDate=function(){return new Date(this.valueOf())},o.toISOString=function(e){var t;return this.isValid()?(t=(e=!0!==e)?this.clone().utc():this).year()<0||9999<t.year()?le(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):u(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",le(t,"Z")):le(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ"):null},o.inspect=function(){var e,t,i;return this.isValid()?(t="moment",e="",this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z"),t="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(t+i+"-MM-DD[T]HH:mm:ss.SSS"+(e+'[")]'))):"moment.invalid(/* "+this._i+" */)"},o.toJSON=function(){return this.isValid()?this.toISOString():null},o.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},o.unix=function(){return Math.floor(this.valueOf()/1e3)},o.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},o.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},o.year=Ie,o.isLeapYear=function(){return Oe(this.year())},o.weekYear=function(e){return ii.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},o.isoWeekYear=function(e){return ii.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},o.quarter=o.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},o.month=He,o.daysInMonth=function(){return Ae(this.year(),this.month())},o.week=o.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},o.isoWeek=o.isoWeeks=function(e){var t=Ge(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},o.weeksInYear=function(){var e=this.localeData()._week;return qe(this.year(),e.dow,e.doy)},o.isoWeeksInYear=function(){return qe(this.year(),1,4)},o.date=ge,o.day=o.days=function(e){var t,i,s;return this.isValid()?(s=this._isUTC?this._d.getUTCDay():this._d.getDay(),null!=e?(t=e,i=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=i.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s):null!=e?this:NaN},o.weekday=function(e){var t;return this.isValid()?(t=(this.day()+7-this.localeData()._week.dow)%7,null==e?t:this.add(e-t,"d")):null!=e?this:NaN},o.isoWeekday=function(e){var t,i;return this.isValid()?null==e?this.day()||7:(t=e,i=this.localeData(),i="string"==typeof t?i.weekdaysParse(t)%7||7:isNaN(t)?null:t,this.day(this.day()%7?i:i-7)):null!=e?this:NaN},o.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},o.hour=o.hours=we,o.minute=o.minutes=he,o.second=o.seconds=fe,o.millisecond=o.milliseconds=ue,o.utcOffset=function(e,t,i){var s,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?o:Ut(this);if("string"==typeof e){if(null===(e=Rt(ke,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(s=Ut(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),o!==e&&(!t||this._changeInProgress?zt(this,O(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_.updateOffset(this,!0),this._changeInProgress=null)),this},o.utc=function(e){return this.utcOffset(0,e)},o.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e)&&this.subtract(Ut(this),"m"),this},o.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Rt(be,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},o.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?D(e).utcOffset():0,(this.utcOffset()-e)%60==0)},o.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},o.isLocal=function(){return!!this.isValid()&&!this._isUTC},o.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},o.isUtc=Ht,o.isUTC=Ht,o.zoneAbbr=function(){return this._isUTC?"UTC":""},o.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},o.dates=e("dates accessor is deprecated. Use date instead.",ge),o.months=e("months accessor is deprecated. Use month instead",He),o.years=e("years accessor is deprecated. Use year instead",Ie),o.zone=e("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),o.isDSTShifted=e("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){var e,t;return a(this._isDSTShifted)&&(W(e={},this),(e=xt(e))._a?(t=(e._isUTC?c:D)(e._a),this._isDSTShifted=this.isValid()&&0<G(e._a,t.toArray())):this._isDSTShifted=!1),this._isDSTShifted});v=Z.prototype;function ni(e,t,i,s){var o=mt(),s=c().set(s,t);return o[i](s,e)}function ri(e,t,i){if(R(e)&&(t=e,e=void 0),e=e||"",null!=t)return ni(e,t,i,"month");for(var s=[],o=0;o<12;o++)s[o]=ni(e,o,i,"month");return s}function li(e,t,i,s){"boolean"==typeof e?R(t)&&(i=t,t=void 0):(t=e,e=!1,R(i=t)&&(i=t,t=void 0)),t=t||"";var o=mt(),a=e?o._week.dow:0;if(null!=i)return ni(t,(i+a)%7,s,"day");for(var n=[],r=0;r<7;r++)n[r]=ni(t,(r+a)%7,s,"day");return n}v.calendar=function(e,t,i){e=this._calendar[e]||this._calendar.sameElse;return u(e)?e.call(t,i):e},v.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},v.invalidDate=function(){return this._invalidDate},v.ordinal=function(e){return this._ordinal.replace("%d",e)},v.preparse=ai,v.postformat=ai,v.relativeTime=function(e,t,i,s){var o=this._relativeTime[i];return u(o)?o(e,t,i,s):o.replace(/%d/i,e)},v.pastFuture=function(e,t){e=this._relativeTime[0<e?"future":"past"];return u(e)?e(t):e.replace(/%s/i,t)},v.set=function(e){var t,i;for(i in e)u(t=e[i])?this[i]=t:this["_"+i]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},v.months=function(e,t){return e?(l(this._months)?this._months:this._months[(this._months.isFormat||Ne).test(t)?"format":"standalone"])[e.month()]:l(this._months)?this._months:this._months.standalone},v.monthsShort=function(e,t){return e?(l(this._monthsShort)?this._monthsShort:this._monthsShort[Ne.test(t)?"format":"standalone"])[e.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},v.monthsParse=function(e,t,i){var s,o;if(this._monthsParseExact)return function(e,t,i){var s,o,a,e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)a=c([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(a,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(o=E.call(this._shortMonthsParse,e))?o:null:-1!==(o=E.call(this._longMonthsParse,e))?o:null:"MMM"===t?-1!==(o=E.call(this._shortMonthsParse,e))||-1!==(o=E.call(this._longMonthsParse,e))?o:null:-1!==(o=E.call(this._longMonthsParse,e))||-1!==(o=E.call(this._shortMonthsParse,e))?o:null}.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(o=c([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[s]||(o="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[s]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(i&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!i&&this._monthsParse[s].test(e))return s}},v.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||je.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=Ye),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},v.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||je.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Ke),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},v.week=function(e){return Ge(e,this._week.dow,this._week.doy).week},v.firstDayOfYear=function(){return this._week.doy},v.firstDayOfWeek=function(){return this._week.dow},v.weekdays=function(e,t){t=l(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Qe(t,this._week.dow):e?t[e.day()]:t},v.weekdaysMin=function(e){return!0===e?Qe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},v.weekdaysShort=function(e){return!0===e?Qe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},v.weekdaysParse=function(e,t,i){var s,o;if(this._weekdaysParseExact)return function(e,t,i){var s,o,a,e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)a=c([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(a,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(o=E.call(this._weekdaysParse,e))?o:null:"ddd"===t?-1!==(o=E.call(this._shortWeekdaysParse,e))?o:null:-1!==(o=E.call(this._minWeekdaysParse,e))?o:null:"dddd"===t?-1!==(o=E.call(this._weekdaysParse,e))||-1!==(o=E.call(this._shortWeekdaysParse,e))||-1!==(o=E.call(this._minWeekdaysParse,e))?o:null:"ddd"===t?-1!==(o=E.call(this._shortWeekdaysParse,e))||-1!==(o=E.call(this._weekdaysParse,e))||-1!==(o=E.call(this._minWeekdaysParse,e))?o:null:-1!==(o=E.call(this._minWeekdaysParse,e))||-1!==(o=E.call(this._weekdaysParse,e))||-1!==(o=E.call(this._shortWeekdaysParse,e))?o:null}.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(o=c([2e3,1]).day(s),i&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(o="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[s]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(i&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(i&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!i&&this._weekdaysParse[s].test(e))return s}},v.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||st.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=et),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},v.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||st.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=tt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},v.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||st.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=it),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},v.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},v.meridiem=function(e,t,i){return 11<e?i?"pm":"PM":i?"am":"AM"},ut("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===h(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),_.lang=e("moment.lang is deprecated. Use moment.locale instead.",ut),_.langData=e("moment.langData is deprecated. Use moment.localeData instead.",mt);var I=Math.abs;function ci(e,t,i,s){t=O(t,i);return e._milliseconds+=s*t._milliseconds,e._days+=s*t._days,e._months+=s*t._months,e._bubble()}function di(e){return e<0?Math.floor(e):Math.ceil(e)}function hi(e){return 4800*e/146097}function ui(e){return 146097*e/4800}function P(e){return function(){return this.as(e)}}pe=P("ms"),de=P("s"),Re=P("m"),me=P("h"),_e=P("d"),Je=P("w"),we=P("M"),he=P("Q"),fe=P("y");function _i(e){return function(){return this.isValid()?this._data[e]:NaN}}var ue=_i("milliseconds"),ge=_i("seconds"),Ie=_i("minutes"),v=_i("hours"),mi=_i("days"),pi=_i("months"),gi=_i("years"),fi=Math.round,B={ss:44,s:45,m:45,h:22,d:26,M:11},vi=Math.abs;function yi(e){return(0<e)-(e<0)||+e}function bi(){var e,t,i,s,o,a,n,r,l,c;return this.isValid()?(a=vi(this._milliseconds)/1e3,i=vi(this._days),t=vi(this._months),s=d((o=d(a/60))/60),a%=60,o%=60,e=d(t/12),t=t%=12,i=i,s=s,o=o,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",(n=this.asSeconds())?(r=yi(this._months)!==yi(n)?"-":"",l=yi(this._days)!==yi(n)?"-":"",c=yi(this._milliseconds)!==yi(n)?"-":"",(n<0?"-":"")+"P"+(e?r+e+"Y":"")+(t?r+t+"M":"")+(i?l+i+"D":"")+(s||o||a?"T":"")+(s?c+s+"H":"")+(o?c+o+"M":"")+(a?c+a+"S":"")):"P0D"):this.localeData().invalidDate()}var L=Pt.prototype;return L.isValid=function(){return this._isValid},L.abs=function(){var e=this._data;return this._milliseconds=I(this._milliseconds),this._days=I(this._days),this._months=I(this._months),e.milliseconds=I(e.milliseconds),e.seconds=I(e.seconds),e.minutes=I(e.minutes),e.hours=I(e.hours),e.months=I(e.months),e.years=I(e.years),this},L.add=function(e,t){return ci(this,e,t,1)},L.subtract=function(e,t){return ci(this,e,t,-1)},L.as=function(e){if(!this.isValid())return NaN;var t,i,s=this._milliseconds;if("month"===(e=g(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,i=this._months+hi(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(ui(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},L.asMilliseconds=pe,L.asSeconds=de,L.asMinutes=Re,L.asHours=me,L.asDays=_e,L.asWeeks=Je,L.asMonths=we,L.asQuarters=he,L.asYears=fe,L.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*h(this._months/12):NaN},L._bubble=function(){var e=this._milliseconds,t=this._days,i=this._months,s=this._data;return 0<=e&&0<=t&&0<=i||e<=0&&t<=0&&i<=0||(e+=864e5*di(ui(i)+t),i=t=0),s.milliseconds=e%1e3,e=d(e/1e3),s.seconds=e%60,e=d(e/60),s.minutes=e%60,e=d(e/60),s.hours=e%24,i+=e=d(hi(t+=d(e/24))),t-=di(ui(e)),e=d(i/12),i%=12,s.days=t,s.months=i,s.years=e,this},L.clone=function(){return O(this)},L.get=function(e){return e=g(e),this.isValid()?this[e+"s"]():NaN},L.milliseconds=ue,L.seconds=ge,L.minutes=Ie,L.hours=v,L.days=mi,L.weeks=function(){return d(this.days()/7)},L.months=pi,L.years=gi,L.humanize=function(e){var t,i,s,o,a,n,r,l,c;return this.isValid()?(t=!e,i=l=this.localeData(),n=O(this).abs(),r=fi(n.as("s")),c=fi(n.as("m")),s=fi(n.as("h")),o=fi(n.as("d")),a=fi(n.as("M")),n=fi(n.as("y")),(r=(r<=B.ss?["s",r]:r<B.s&&["ss",r])||(c<=1?["m"]:c<B.m&&["mm",c])||(s<=1?["h"]:s<B.h&&["hh",s])||(o<=1?["d"]:o<B.d&&["dd",o])||(a<=1?["M"]:a<B.M&&["MM",a])||(n<=1?["y"]:["yy",n]))[2]=t,r[3]=0<+this,r[4]=i,c=function(e,t,i,s,o){return o.relativeTime(t||1,!!i,e,s)}.apply(null,r),e&&(c=l.pastFuture(+this,c)),l.postformat(c)):this.localeData().invalidDate()},L.toISOString=bi,L.toString=bi,L.toJSON=bi,L.locale=qt,L.localeData=Qt,L.toIsoString=e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",bi),L.lang=Ze,s("X",0,0,"unix"),s("x",0,0,"valueOf"),b("x",ye),b("X",/[+-]?\d+(\.\d{1,3})?/),k("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),k("x",function(e,t,i){i._d=new Date(h(e))}),_.version="2.24.0",A=D,_.fn=o,_.min=function(){return Ot("isBefore",[].slice.call(arguments,0))},_.max=function(){return Ot("isAfter",[].slice.call(arguments,0))},_.now=function(){return Date.now?Date.now():+new Date},_.utc=c,_.unix=function(e){return D(1e3*e)},_.months=function(e,t){return ri(e,t,"months")},_.isDate=F,_.locale=ut,_.invalid=K,_.duration=O,_.isMoment=n,_.weekdays=function(e,t,i){return li(e,t,i,"weekdays")},_.parseZone=function(){return D.apply(null,arguments).parseZone()},_.localeData=mt,_.isDuration=Bt,_.monthsShort=function(e,t){return ri(e,t,"monthsShort")},_.weekdaysMin=function(e,t,i){return li(e,t,i,"weekdaysMin")},_.defineLocale=_t,_.updateLocale=function(e,t){var i,s;return null!=t?(s=lt,(i=new Z(t=X(s=null!=(i=ht(e))?i._config:s,t))).parentLocale=x[e],x[e]=i,ut(e)):null!=x[e]&&(null!=x[e].parentLocale?x[e]=x[e].parentLocale:null!=x[e]&&delete x[e]),x[e]},_.locales=function(){return ee(x)},_.weekdaysShort=function(e,t,i){return li(e,t,i,"weekdaysShort")},_.normalizeUnits=g,_.relativeTimeRounding=function(e){return void 0===e?fi:"function"==typeof e&&(fi=e,!0)},_.relativeTimeThreshold=function(e,t){return void 0!==B[e]&&(void 0===t?B[e]:(B[e]=t,"s"===e&&(B.ss=t-1),!0))},_.calendarFormat=function(e,t){e=e.diff(t,"days",!0);return e<-6?"sameElse":e<-1?"lastWeek":e<0?"lastDay":e<1?"sameDay":e<2?"nextDay":e<7?"nextWeek":"sameElse"},_.prototype=o,_.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},_}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(a){Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};var e,n="rangeslider",r=0,l=((e=document.createElement("input")).setAttribute("type","range"),"text"!==e.type),c={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},d={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};function i(e,t){var i=function(e){for(var t,i=[],s=e.parentNode;(t=s)&&(0===t.offsetWidth||0===t.offsetHeight||!1===t.open);)i.push(s),s=s.parentNode;return i}(e),s=i.length,o=[],a=e[t];function n(e){void 0!==e.open&&(e.open=!e.open)}if(s){for(var r=0;r<s;r++)o[r]=i[r].style.cssText,i[r].style.setProperty?i[r].style.setProperty("display","block","important"):i[r].style.cssText+=";display: block !important",i[r].style.height="0",i[r].style.overflow="hidden",i[r].style.visibility="hidden",n(i[r]);for(var a=e[t],l=0;l<s;l++)i[l].style.cssText=o[l],n(i[l])}return a}function s(e,t){e=parseFloat(e);return Number.isNaN(e)?t:e}function o(e){return e.charAt(0).toUpperCase()+e.substr(1)}function h(e,t){if(this.$window=a(window),this.$document=a(document),this.$element=a(e),this.options=a.extend({},c,t),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=d.orientation[this.orientation].dimension,this.DIRECTION=d.orientation[this.orientation].direction,this.DIRECTION_STYLE=d.orientation[this.orientation].directionStyle,this.COORDINATE=d.orientation[this.orientation].coordinate,this.polyfill&&l)return!1;this.identifier="js-"+n+"-"+r++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=a('<div class="'+this.options.fillClass+'" />'),this.$handle=a('<div class="'+this.options.handleClass+'" />'),this.$range=a('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=a.proxy(this.handleDown,this),this.handleMove=a.proxy(this.handleMove,this),this.handleEnd=a.proxy(this.handleEnd,this),this.init();var i,s,o=this;this.$window.on("resize."+this.identifier,(i=function(){!function(e,t){var i=Array.prototype.slice.call(arguments,2);setTimeout(function(){return e.apply(null,i)},t)}(function(){o.update(!1,!1)},300)},s=(s=20)||100,function(){var e;return i.debouncing||(e=Array.prototype.slice.apply(arguments),i.lastReturnVal=i.apply(window,e),i.debouncing=!0),clearTimeout(i.debounceTimeout),i.debounceTimeout=setTimeout(function(){i.debouncing=!1},s),i.lastReturnVal})),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(e,t){t&&t.origin===o.identifier||(t=e.target.value,e=o.getPositionFromValue(t),o.setPosition(e))})}return h.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},h.prototype.update=function(e,t){(e=e||!1)&&(this.min=s(this.$element[0].getAttribute("min"),0),this.max=s(this.$element[0].getAttribute("max"),100),this.value=s(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=s(this.$element[0].getAttribute("step"),1)),this.handleDimension=i(this.$handle[0],"offset"+o(this.DIMENSION)),this.rangeDimension=i(this.$range[0],"offset"+o(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,t)},h.prototype.handleDown=function(e){var t,i;e.preventDefault(),e.button&&0!==e.button||(this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),this.$range.addClass(this.options.activeClass),-1<(" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass))||(e=this.getRelativePosition(e),t=this.$range[0].getBoundingClientRect()[this.DIRECTION],t=this.getPositionFromNode(this.$handle[0])-t,i="vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos,this.setPosition(i),t<=e&&e<t+this.handleDimension&&(this.grabPos=e-t))},h.prototype.handleMove=function(e){e.preventDefault();e=this.getRelativePosition(e),e="vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos;this.setPosition(e)},h.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$range.removeClass(this.options.activeClass),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},h.prototype.cap=function(e,t,i){return e<t?t:i<e?i:e},h.prototype.setPosition=function(e,t){var i;void 0===t&&(t=!0),e=this.getValueFromPosition(this.cap(e,0,this.maxHandlePos)),i=this.getPositionFromValue(e),this.$fill[0].style[this.DIMENSION]=i+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=i+"px",this.setValue(e),this.position=i,this.value=e,t&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(i,e)},h.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},h.prototype.getRelativePosition=function(e){var t=o(this.COORDINATE),i=this.$range[0].getBoundingClientRect()[this.DIRECTION],s=0;return void 0!==e.originalEvent["client"+t]?s=e.originalEvent["client"+t]:e.originalEvent.touches&&e.originalEvent.touches[0]&&void 0!==e.originalEvent.touches[0]["client"+t]?s=e.originalEvent.touches[0]["client"+t]:e.currentPoint&&void 0!==e.currentPoint[this.COORDINATE]&&(s=e.currentPoint[this.COORDINATE]),s-i},h.prototype.getPositionFromValue=function(e){e=(e-this.min)/(this.max-this.min);return Number.isNaN(e)?0:e*this.maxHandlePos},h.prototype.getValueFromPosition=function(e){e/=this.maxHandlePos||1,e=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min;return Number(e.toFixed(this.toFixed))},h.prototype.setValue=function(e){e===this.value&&""!==this.$element[0].value||this.$element.val(e).trigger("input",{origin:this.identifier})},h.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+n),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},a.fn[n]=function(i){var s=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=a(this),t=e.data("plugin_"+n);t||e.data("plugin_"+n,t=new h(this,i)),"string"==typeof i&&t[i].apply(t,s)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"});var QRCode,custom_keyboard={isShown:!1,currentLanguage:"english",isUpperCase:!1,currentInput:null,lastFocusedKey:null,cursorPosition:0,inputValue:"",layouts:{english:{lowercase:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],uppercase:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]],numbers:["1","2","3","4","5","6","7","8","9","0"],special:[".",",","/",":",";","@","#","%","&","?","!","-","_","=","+","(",")","'",'"']},arabic:{lowercase:[["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","","",""]],uppercase:[["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","","",""]],numbers:["1","2","3","4","5","6","7","8","9","0"],special:[".","","/",":","","@","#","%","&","","!","-","_","=","+",")","(","'",'"']}},init:function(){this.render(),this.attachEventHandlers(),this.updateSpecialCharacters()},show:function(e){this.isShown||(this.currentInput=e,this.cursorPosition=e.selectionStart||0,this.inputValue=e.value||"",this._languageDetected||(("rtl"===(e=this.detectTextDirection(e.value))&&"english"===this.currentLanguage||"ltr"===e&&"arabic"===this.currentLanguage)&&this.toggleLanguage(),this._languageDetected=!0),$("#custom-keyboard").show(),this.isShown=!0,setTimeout(function(){this.setFocusToFirstKey()}.bind(this),50))},hide:function(){this.isShown&&(this.lastFocusedKey=document.activeElement,$(".keyboard-key").blur(),$("#custom-keyboard").hide(),this.isShown=!1,this.currentInput&&(this.currentInput.blur(),this.currentInput=null),this.cursorPosition=0,this.inputValue="",key_focused=!1,"search-page"===current_route)&&search_page&&"function"==typeof search_page.focusFirstResult&&setTimeout(function(){search_page.focusFirstResult()},100)},addCharacter:function(e){var t,i;this.currentInput&&(t=this.cursorPosition,e=(i=this.currentInput.value).substring(0,t)+e+i.substring(t),this.currentInput.value=e,this.cursorPosition=t+1,this.inputValue=e,(i=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(i))},handleSpace:function(){this.addCharacter(" ")},handleBackspace:function(){var e,t,i;this.currentInput&&(t=this.cursorPosition,i=this.currentInput.value,t=0<t?(e=i.substring(0,t-1)+i.substring(t),t-1):(e=i,0),this.currentInput.value=e,this.cursorPosition=t,this.inputValue=e,this.currentInput.setSelectionRange(t,t),(i=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(i))},handleEnter:function(){this.currentInput&&(key_focused=!1,"search-page-input"===this.currentInput.id&&(search_page.keywordChange(),setTimeout(function(){search_page&&"function"==typeof search_page.focusFirstResult&&search_page.focusFirstResult()},200)),this.currentInput.blur(),this.hide())},clearAll:function(){var e;this.currentInput&&(this.currentInput.value="",this.currentInput.setSelectionRange(0,0),this.cursorPosition=0,this.inputValue="",(e=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(e))},detectTextDirection:function(e){return e&&/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/.test(e)?"rtl":"ltr"},setFocusToFirstKey:function(){(this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey):($("#keyboard-row-1 .keyboard-key").length?$("#keyboard-row-1 .keyboard-key"):$("#keyboard-row-0 .keyboard-key")).first()).focus()},toggleCase:function(){"arabic"!==this.currentLanguage&&(this.lastFocusedKey=document.activeElement,this.isUpperCase=!this.isUpperCase,this.updateKeys(),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50))},toggleLanguage:function(){this.lastFocusedKey=document.activeElement,this.currentLanguage="english"===this.currentLanguage?"arabic":"english","arabic"===this.currentLanguage&&(this.isUpperCase=!1),this.updateKeys(),this.updateSpecialCharacters(),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50)},toggleSymbols:function(){this.lastFocusedKey=document.activeElement;var e=$("#keyboard-row-special");e.is(":visible")?(e.hide(),$("#keyboard-symbols").text("$%^")):(e.show(),$("#keyboard-symbols").text("abc"),this.updateSpecialCharacters()),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50)},updateKeys:function(){this.createLetterRows();var t=this.layouts[this.currentLanguage].numbers;$("#keyboard-row-0 .keyboard-number").each(function(e){e<t.length&&(e=t[e],$(this).text(e).attr("data-key-value",e))}),$("#keyboard-lang").text("english"===this.currentLanguage?"EN":"AR"),"arabic"===this.currentLanguage?$("#keyboard-shift").hide():$("#keyboard-shift").show()},createLetterRows:function(){var e=this.layouts[this.currentLanguage],e=this.isUpperCase?e.uppercase:e.lowercase;$("#keyboard-row-1 .keyboard-letter-container").empty(),$("#keyboard-row-2 .keyboard-letter-container").empty(),$("#keyboard-row-3 .keyboard-letter-container").empty(),this.createLetterRow(e[0],"#keyboard-row-1 .keyboard-letter-container"),this.createLetterRow(e[1],"#keyboard-row-2 .keyboard-letter-container"),this.createLetterRow(e[2],"#keyboard-row-3 .keyboard-letter-container")},createLetterRow:function(e,t){for(var i=$(t),s=0;s<e.length;s++)i.append('<button class="keyboard-key" tabindex="0" data-key-value="'+e[s]+'">'+e[s]+"</button>")},updateSpecialCharacters:function(){var e=this.layouts[this.currentLanguage].special,t=$("#keyboard-row-special");t.empty();for(var i=0;i<e.length;i++){var s=e[i];t.append('<button class="keyboard-key keyboard-special" tabindex="0" data-key-value="'+s+'">'+s+"</button>")}},render:function(){for(var e=(e='<div id="custom-keyboard" class="keyboard-container" style="display:none;">')+'<div id="keyboard-row-0" class="keyboard-row">'+'<button id="keyboard-lang" class="keyboard-key keyboard-action" tabindex="0">EN</button>',t=0;t<this.layouts.english.numbers.length;t++)e+='<button class="keyboard-key keyboard-number" tabindex="0" data-key-value="'+this.layouts.english.numbers[t]+'">'+this.layouts.english.numbers[t]+"</button>";e+='<button id="keyboard-backspace" class="keyboard-key keyboard-action" tabindex="0"><i class="fas fa-backspace"></i></button></div><div id="keyboard-row-1" class="keyboard-row"><button id="keyboard-symbols" class="keyboard-key keyboard-action" tabindex="0">$%^</button><div class="keyboard-letter-container"></div><button id="keyboard-enter" class="keyboard-key keyboard-action" tabindex="0">Enter</button></div><div id="keyboard-row-2" class="keyboard-row"><div class="keyboard-letter-container"></div><button class="keyboard-key" tabindex="0" data-key-value=":">:</button></div><div id="keyboard-row-3" class="keyboard-row"><button id="keyboard-shift" class="keyboard-key keyboard-action" tabindex="0"></button><button class="keyboard-key" tabindex="0" data-key-value="@">@</button><div class="keyboard-letter-container"></div><button class="keyboard-key" tabindex="0" data-key-value=".">.</button><button class="keyboard-key" tabindex="0" data-key-value="/">/</button><button id="keyboard-clear" class="keyboard-key keyboard-action" tabindex="0">Clear</button></div><div id="keyboard-row-special" class="keyboard-row keyboard-special-row" style="display:none;"></div><div class="keyboard-row"><button id="keyboard-space" class="keyboard-key keyboard-space" tabindex="0" data-key-value=" ">Space</button></div></div>',$("body").append(e),this.createLetterRows()},navigateLeft:function(e){var t=this.getParentRow(e).find(".keyboard-key:visible"),e=t.index(e);(0<e?t.eq(e-1):t.last()).focus()},navigateRight:function(e){var t=this.getParentRow(e).find(".keyboard-key:visible"),e=t.index(e);(e<t.length-1?t.eq(e+1):t.first()).focus()},navigateUp:function(e){var t,i;"keyboard-space"===e.attr("id")?(t=$("#keyboard-row-special").is(":visible")?$("#keyboard-row-special"):$("#keyboard-row-3"),this.focusMiddleKey(t)):(t=this.getParentRow(e),0<(t=(i=$(".keyboard-row:visible")).index(t))?(i=i.eq(t-1),this.focusNearestKey(e,i)):$("#keyboard-space").focus())},navigateDown:function(e){var t=this.getParentRow(e),i=$(".keyboard-row:visible"),t=i.index(t);if(t===i.length-1||"keyboard-space"===e.attr("id"))s=i.first(),this.focusMiddleKey(s);else{var s=t+1,t=i.eq(s);if("keyboard-row-special"===t.attr("id")&&!t.is(":visible")){if(!(s+1<i.length))return void $("#keyboard-space").focus();t=i.eq(s+1)}0<t.find("#keyboard-space").length?$("#keyboard-space").focus():this.focusNearestKey(e,t)}},getParentRow:function(e){e=e.parent();return e=e.hasClass("keyboard-letter-container")?e.parent():e},focusMiddleKey:function(e){var e=e.find(".keyboard-key:visible"),t=Math.floor(e.length/2);e.eq(t).focus()},focusNearestKey:function(e,t){var i=this.getParentRow(e),s=i.find(".keyboard-key:visible").index(e),i=i.width(),e=(e.position().left+e.width()/2)/i,i=t.find(".keyboard-key:visible"),o=t.width()*e,a=null,n=Number.MAX_VALUE;i.each(function(){var e=$(this),t=e.position().left+e.width()/2,t=Math.abs(t-o);t<n&&(n=t,a=e)}),(a||(t=Math.min(s,i.length-1),i.eq(t))).focus()},handleRemoteKeys:function(e){if(this.isShown)switch(e.keyCode){case 13:if(document.activeElement&&"keyboard-enter"===document.activeElement.id)return this.handleEnter(),!0;if(document.activeElement&&$(document.activeElement).hasClass("keyboard-key"))return $(document.activeElement).click(),!0;break;case 27:return this.hide(),!0;case 37:case 38:case 39:case 40:return document.activeElement&&$(document.activeElement).hasClass("keyboard-key")||this.setFocusToFirstKey(),!0}return!1},attachEventHandlers:function(){var i=this,s=!1;function e(t){return function(e){s||(s=!0,t.call(i,e,$(this)),setTimeout(function(){s=!1},100))}}$(document).on("click",".keyboard-key:not(.keyboard-action)",e(function(e,t){t=t.attr("data-key-value")||t.text();this.addCharacter(t)})),$(document).on("click","#keyboard-shift",e(function(){this.toggleCase()})),$(document).on("click","#keyboard-lang",e(function(){this.toggleLanguage()})),$(document).on("click","#keyboard-space",e(function(){this.handleSpace()})),$(document).on("click","#keyboard-backspace",e(function(){this.handleBackspace()})),$(document).on("click","#keyboard-enter",e(function(){this.handleEnter()})),$(document).on("click","#keyboard-clear",e(function(){this.clearAll()})),$(document).on("click","#keyboard-symbols",e(function(){this.toggleSymbols()})),$(document).on("focus",".keyboard-key",function(){i.isShown&&(i.lastFocusedKey=this)}),$(document).on("keydown",".keyboard-key",function(e){if(i.isShown){var t=$(this);switch(e.keyCode){case 37:i.navigateLeft(t),e.preventDefault();break;case 39:i.navigateRight(t),e.preventDefault();break;case 38:i.navigateUp(t),e.preventDefault();break;case 40:i.navigateDown(t),e.preventDefault();break;case 13:"keyboard-enter"===t.attr("id")?i.handleEnter():t.click(),e.preventDefault();break;case 27:i.hide(),e.preventDefault()}}})}},VodModel={movies:[],category_name:"vod_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],saved_video_times:[],favourite_ids:[],stream_type:"vod",favourite_insert_position:"after",recent_insert_position:"before",category_orders:[],favourite_position:1,recent_position:0,init:function(){this.movies=[],this.categories=[]},isProtected:function(e){return!!checkForAdult(e,"category",[])},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i){for(var s=this.stream_type,o=this.saved_video_times,a=-1,n=0;n<o.length;n++)if(o[n].stream_id==e){a=n;break}t={stream_id:e,time:t,duration:i};-1!=a?o[a]=t:o.push(t),this.saved_video_times=o,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+s+"_times",JSON.stringify(o))},removeVideoTime:function(e){for(var t=this.stream_type,i=this.saved_video_times,s=0;s<i.length;s++)if(i[s].stream_id==e){i.splice(s,1);break}this.saved_video_times=i,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+t+"_times",JSON.stringify(i))},addToWatchList:function(t){var e=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[e].movies,s=!1;i.map(function(e){e.stream_id==t.stream_id&&(s=!0)}),s||(i.unshift(t),i.splice(this.recent_movie_count),this.categories[e].movies=i)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s=0;s<i.length;s++)if(i[s].stream_id==e.stream_id){i.splice(s,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){for(var i,s,o,e=this,t=this.stream_type,a=this.movies,n=this.categories,r={recent:{category_id:"recent",category_name:"Continue Watching",parent_id:0,movies:[],is_hide:!1},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:!1},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},newlyAdded:{category_id:"newly_added",category_name:"Newly Added",parent_id:0,movies:[],is_hide:!1},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}},l=(n.push(r.undefined),l=storage_id+settings.playlist.id+"_saved_"+t+"_times",(l=localStorage.getItem(l))?JSON.parse(l):[]),c=(this.saved_video_times=l,this.movie_key),d=(t=storage_id+settings.playlist.id+t+"_favourite",JSON.parse(localStorage.getItem(t))||[]),h=(this.favourite_ids=d,t=l,"xc"!==settings.playlist.playlist_type?t.map(function(e){return e.stream_id}):t.map(function(e){return parseInt(e.stream_id,10)})),u=[],_=[],m=[],p=[],g={},f=Math.floor(Date.now()/1e3),v=0;v<a.length;v++){E=M=$=T=S=C=w=k=b=y=void 0;var y=a[v],b=g,k=h,w=d,C=u,S=_,T=m,$=p,M=f,E=(void 0!==y.category_id&&"null"!==y.category_id&&null!==y.category_id||(y.category_id="undefined"),y.category_id.toString());b[E]||(b[E]=[]),b[E].push(y),y.is_recent=!1,-1!==k.indexOf(y[c])&&C.push(y),-1!==w.indexOf(y[c])&&("before"===e.favourite_insert_position?S.unshift(y):S.push(y)),y.rating&&!isNaN(parseFloat(y.rating))&&$.push(y),y.added&&function(e,t){return t-e<=1296e3}(y.added,M)&&T.push(y)}i=u,s=[],h.forEach(function(e){for(var t=0;t<i.length;t++)if(i[t].stream_id==e){s.unshift(i[t]),i.splice(t,1);break}}),u=s,o=g,n.forEach(function(e){var t=e.category_id.toString();e.movies=o[t]||[]}),r.recent.movies=u,r.favourite.movies=_,r.newlyAdded.movies=m,r.topRated.movies=utilities.getTopRatedMovies(p)||[],null==r.topRated.movies&&(r.topRated.movies=[]),n.unshift(r.newlyAdded),n.unshift(r.topRated),n.unshift(r.favourite),n.unshift(r.recent);for(var x=n,D=0;D<x.length;D++)if("undefined"===x[D].category_id&&0===x[D].movies.length){x.splice(D,1);break}this.categories=n,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)}},LiveModel={movies:[],category_name:"live_categories",favourite_movie_count:500,recent_movie_count:15,movie_key:"stream_id",categories:[],programmes:{},movie_saved:!1,programme_saved:!1,favourite_ids:[],stream_type:"live",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=(e=localStorage.getItem(storage_id+settings.playlist.id+"_category_orders"))?JSON.parse(e):[];this.category_orders=e;var t=(t=localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders"))?JSON.parse(t):{},i=(this.channel_orders=t,this.stream_type),s=this.movies,o=this.categories,a={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},n={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},r=(o.push({category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}),this.movie_key),l=null==(l=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_recent")))?[]:l,c=null==(c=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_favourite")))?[]:c;this.favourite_ids=c;for(var d=[],h=[],u={},_=0;_<s.length;_++){var m=s[_];void 0!==m.category_id&&"null"!=m.category_id&&null!=m.category_id||(m.category_id="undefined"),void 0===u[p=m.category_id.toString()]?u[p]=[m]:u[p].push(m),m.is_recent=!1,l.includes(m[r])&&("before"===this.recent_insert_position?d.unshift(m):d.push(m),m.is_recent=!0),c.includes(m[r])&&("before"===this.favourite_insert_position?h.unshift(m):h.push(m))}for(_=0;_<o.length;_++){var p,s=u[p=o[_].category_id.toString()]||[];o[_].movies=s}a.movies=d,n.movies=h,o.unshift(n),o.unshift(a);for(_=0;_<o.length;_++)if("undefined"===o[_].category_id){o[_].movies&&0==o[_].movies.length&&o.splice(_,1);break}for(_=0;_<e.length;_++)for(f=0;f<o.length;f++)if(e[_].id==o[f].category_id){o=makeRearrangeArray(o,f,e[_].position);break}for(_=0;_<o.length;_++)if("favourite"==o[_].category_id&&(this.favourite_position=_),"recent"==o[_].category_id&&(this.recent_position=_),t[o[_].category_id]){for(var g=t[o[_].category_id],s=o[_].movies,f=0;f<g.length;f++)for(var v=0;v<s.length;v++)if(g[f].id==s[v].stream_id&&g[f].name==s[v].name){s=makeRearrangeArray(s,v,g[f].position);break}o[_].movies=s}this.categories=o,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},getProgrammeVideoUrl:function(e,t){var i;return"xc"===settings.playlist_type?(i=moment(t.start).subtract(time_difference_with_server,"minute").format("Y-MM-DD:HH-mm"),{duration:t=getMinute(t.stop)-getMinute(t.start),url:api_host_url+"/streaming/timeshift.php?username="+user_name+"&password="+password+"&stream="+e+"&start="+i+"&duration="+t}):{duration:"00:00",url:""}},getMovieFromId:function(e){var t=this.movies,i=null;this.categories.map(function(e){t=t.concat(e.movies)});for(var s=0;s<t.length;s++)if(t[s].stream_id==e){i=t[s];break}return i},getNextProgrammes:function(e){for(var t=!1,i=[],s=moment(new Date).unix(),o=0,a=0;a<e.length;a++){var n=e[a];if(s<=moment(n.stop).unix()&&(o++,moment(n.start).unix()<=s&&(t=!0),i.push(e[a])),4<=o)break}return{current_program_exist:t,programmes:i}}},SeriesModel={movies:[],favourite_movie_count:200,recent_movie_count:15,movie_key:"series_id",categories:[],saved_video_times:[],favourite_ids:[],stream_type:"series",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[]},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i,s,o){for(var a=this.stream_type,n=this.saved_video_times,r=-1,l={},c=0;c<n.length;c++)if(n[c].stream_id==e){l=n[r=c].video_times;break}var d={},s={time:s,duration:o};if((d=l[t.toString()]?l[t.toString()]:d)[i.toString()]=s,l[t.toString()]=d,-1!=r){o=this.getRecentOrFavouriteCategoryPosition("recent");if(this.categories[o].movies.length>=this.recent_movie_count)return;n[r].video_times=l}else n.push({stream_id:e,video_times:l});return this.saved_video_times=n,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+a+"_times",JSON.stringify(n)),l},removeVideoTime:function(e,t,i){for(var s,o=this.stream_type,a=this.saved_video_times,n={},r=!1,l=0;l<a.length;l++)if(a[l].stream_id==e){(n=a[l].video_times)[t.toString()]&&(delete(s=n[t.toString()])[i.toString()],0==Object.keys(s).length&&delete n[t.toString()],0==Object.keys(n).length?(a.splice(l,1),r=!0,n={},this.removeFromWatchList(e)):a[l].video_times=n,this.saved_video_times=a,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+o+"_times",JSON.stringify(a)));break}return[r,n]},addToWatchList:function(t){var i,e=this.getRecentOrFavouriteCategoryPosition("recent"),s=this.categories[e].movies;s.length>=this.recent_movie_count||(i=!1,s.map(function(e){e.series_id==t.series_id&&(i=!0)}),i)||(s.unshift(t),s.splice(this.recent_movie_count),this.categories[e].movies=s)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s="object"==typeof e?e.series_id:e,o=0;o<i.length;o++)if(i[o].series_id==s){i.splice(o,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){for(var e,t=this,i=this.stream_type,s=this.movies,o=this.categories,a={recent:{category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:!1},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},recentlyModified:{category_id:"recently_modified",category_name:"Recently Added/Updated",parent_id:0,movies:[],is_hide:!1},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}},n=(o.push(a.undefined),this.movie_key),r=(e=storage_id+settings.playlist.id+i+"_favourite",JSON.parse(localStorage.getItem(e))||[]),i=(this.favourite_ids=r,e=storage_id+settings.playlist.id+"_saved_"+i+"_times",(e=localStorage.getItem(e))?JSON.parse(e):[]),l=(this.saved_video_times=i,e=i,"xc"!==settings.playlist.playlist_type?e.map(function(e){return e.stream_id}):e.map(function(e){return parseInt(e.stream_id,10)})),c=[],d=[],h=[],u=[],_={},m=Math.floor(Date.now()/1e3),p=0;p<s.length;p++){T=S=C=w=k=b=y=v=f=g=void 0;var g=s[p],f=_,v=l,y=r,b=h,k=c,w=d,C=u,S=m,T=(void 0!==g.category_id&&"null"!=g.category_id&&null!=g.category_id||(g.category_id="undefined"),g.category_id.toString());f[T]||(f[T]=[]),f[T].push(g),g.is_recent=!1,-1!==v.indexOf(g[n])&&b.push(g),-1!==y.indexOf(g[n])&&("before"===t.favourite_insert_position?k.unshift(g):k.push(g)),g.rating&&!isNaN(parseFloat(g.rating))&&C.push(g),g.last_modified&&function(e,t){return t-parseInt(e,10)<=1296e3}(g.last_modified,S)&&w.push(g)}for(var i=function(e,t){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<t.length;o++)if(t[o].series_id==e[s]){i.unshift(t[o]),t.splice(o,1);break}return i}(l,h),$=o,M=_,E=0;E<$.length;E++){var x=$[E].category_id.toString();$[E].movies=M[x]||[]}a.recent.movies=i,a.favourite.movies=c,a.recentlyModified.movies=d,a.topRated.movies=utilities.getTopRatedMovies(u)||[],null==a.topRated.movies&&(a.topRated.movies=[]),o.unshift(a.recentlyModified),o.unshift(a.topRated),o.unshift(a.favourite),o.unshift(a.recent);for(var D=o,O=0;O<D.length;O++)if("undefined"===D[O].category_id&&0==D[O].movies.length){D.splice(O,1);break}this.categories=o,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)}},STORE_URL="https://store.cr7player.com",STORE_TOKEN="sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB",IBO_TMDB_URL="https://tmdb.iboplayer.com",IBO_TMDB_TOKEN="sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB",STARARCS_URL="https://backend.stararcs.com";function updateProxyURL(){if(window.PROXY_URL="",settings&&settings.smart_proxy_connection_state&&proxyAvailableServers&&0!==proxyAvailableServers.length)try{var e,t,i=settings.smart_proxy_region||0,s=settings.smart_proxy_country||0,o=settings.smart_proxy_server||0,a=proxyAvailableServers[i];a&&a.Countries&&0<a.Countries.length&&(e=a.Countries[s])&&e.Servers&&0<e.Servers.length&&(t=e.Servers[o])&&(window.PROXY_URL="http://"+t+":8080/?mimo_proxy_token_765=QCIBMHoAmBrlTOQGGvmmcVWbEHdNnUNVIQoirolvjrcsSpGZ&mimo_proxy_target_765=",console.log("Proxy URL updated to:",window.PROXY_URL),$.ajax({url:"http://"+t+":765",type:"GET",success:function(e){},error:function(e,t,i){},complete:function(){console.log("Discovery request completed.")}}))}catch(e){console.error("Error updating proxy URL:",e),window.PROXY_URL=""}}function api(e){console.log(e),window.ongoingRequests||(window.ongoingRequests=[]);var t={type:"GET",headers:{},data:null},i=e.url,i={url:i=settings&&settings.smart_proxy_connection_state&&window.PROXY_URL&&""!==window.PROXY_URL&&(i=window.PROXY_URL+e.url,e.headers)&&e.headers["Custom-Proxy-Mode"]&&1==e.headers["Custom-Proxy-Mode"]?e.url:i,type:e.type||e.method||t.type,headers:e.headers||t.headers,data:e.data||t.data},s=("function"==typeof e.success&&(i.success=e.success),"function"==typeof e.error&&(i.error=e.error),e.timeout&&(i.timeout=e.timeout),$.ajax(i));return window.ongoingRequests.push(s),s.always(function(){var e=window.ongoingRequests.indexOf(s);-1<e&&window.ongoingRequests.splice(e,1)}),s}window.PROXY_URL="";var utilities={formatTimeStringToSeconds:function(e){var t;return"string"!=typeof e?(console.error("Invalid input: duration must be a string"),0):(t=0,3===(e=e.split(":").map(Number)).length?t=(t=(t+=3600*e[0])+60*e[1])+e[2]:2===e.length?t=(t+=60*e[0])+e[1]:1===e.length&&(t+=e[0]),t)},getPercentage:function(e,t){return Math.floor(e/t*100)},isNewlyAdded:function(e){return Math.floor(Date.now()/1e3)-e<=1296e3},isRecentlyModifiedSeries:function(e){return Math.floor(Date.now()/1e3)-parseInt(e,10)<=1296e3},compareTimestamps:function(e){var t=new Date;if(isNaN(String(e)))try{var i=e.split(" "),s=i[0].split("-"),o=i[1].split(":"),a=[s[0],s[1].padStart(2,"0"),s[2].padStart(2,"0")].join("-"),n=[o[0].padStart(2,"0"),o[1].padStart(2,"0")].join(":");if(r=new Date(a+"T"+n+":00"),isNaN(r.getTime()))throw new Error("Invalid date format")}catch(e){throw new Error("Invalid timestamp or date format. Expected Unix timestamp or 'YYYY-MM-DD HH:MM' format")}else{var i=String(e),r=i.length<=10?new Date(1e3*parseInt(i)):new Date(parseInt(i));if(isNaN(r.getTime()))throw new Error("Invalid timestamp value")}s=t.getTime(),o=r.getTime();return Math.round((o-s)/864e5)},convertToTimestamp:function(e){var t,i;if(e.match(/^\d{4}-\d{2}-\d{2}$/))t=e.split("-"),i=new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10));else{if(!e.match(/^\d{2}-\d{2}-\d{4}$/))throw new Error("Invalid date format. Please use either 'YYYY-MM-DD' or 'MM-DD-YYYY'");t=e.split("-"),i=new Date(parseInt(t[2],10),parseInt(t[0],10)-1,parseInt(t[1],10))}if((e=i)instanceof Date&&!isNaN(e))return i.getTime();throw new Error("Invalid date. Please check if the date exists.")},timestampDiffInDays:function(e){return Math.ceil((e-(new Date).getTime())/864e5)},getCurrentDate:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")},getCurrentDateTimeFormatted:function(){var e=new Date,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],i=e.getDate();return t+". "+(i<10?"0":"")+i+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()},pickProperties:function(e,t){for(var i={},s=0;s<t.length;s++){var o=t[s];e.hasOwnProperty(o)&&(i[o]=e[o])}return i},shuffleArray:function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[--s],e[s]=e[i],e[i]=t;return e},getTopRatedMovies:function(e){if(e&&0!=e.length){for(var t=e.sort(function(e,t){e=parseFloat(e.rating)||0;return(parseFloat(t.rating)||0)-e}),i=parseFloat(t[0].rating),s=[],o=0;o<t.length&&parseFloat(t[o].rating)==i;o++)s.push(t[o]);if(10<s.length)for(o=s.length-1;0<o;o--){var a=Math.floor(Math.random()*(o+1)),n=s[o];s[o]=s[a],s[a]=n}else if(s.length<10){var r=10;s.length<10&&(r=s.length+1);for(o=s.length;o<r;o++)s.push(e[o])}return(10<=s.length?s:t).slice(0,10)}},clampNumber:function(e,t,i){return Math.max(t,Math.min(e,i))}},color_theme_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:null,prev_route:"",themes:[["#080808","#1aa3a3"]],current_theme:0,init:function(e){this.generateColorThemes(),this.current_theme=this.getThemeChoiceIndex(),this.styleCurrentChoice(),this.prev_route=e,current_route="color-theme-page",this.current_theme&&0<=this.current_theme&&this.current_theme<this.menu_doms.length?this.hoverMenuItem(this.current_theme):this.hoverMenuItem(0),$("#colors-setting-modal").modal("show")},goBack:function(){$("#colors-setting-modal").modal("hide"),current_route=this.prev_route},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},hoverMenuItem:function(e,t){var t=t||!1,i=this.keys;i.focused_part="menu_selection",i.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active"),moveScrollPosition($("#colors-btns-container"),this.menu_doms[e],"horizontal",!0,t)},generateColorThemes:function(){var i="";this.themes.forEach(function(e,t){i+="      <div        class='colors-setting-item'        onmouseenter='color_theme_page.hoverMenuItem("+t+", true)'        onclick='color_theme_page.changeAppColors("+t+")'      >        <div class='color-setting-colors'>          <span class='color-setting-color' style='background: "+e[0]+";'></span>          <span class='color-setting-color' style='background: "+e[1]+";'></span>        </div>      </div>"}),$("#colors-btns-container").html(i),this.menu_doms=$(".colors-setting-item")},changeAppColors:function(e){settings.saveSettings("colors_theme",e),this.current_theme=e,this.styleCurrentChoice(),styleAppColors()},getThemeChoice:function(){var e=parseInt(localStorage.getItem(storage_id+"colors_theme"));return 0<=e&&e<=this.themes.length?this.themes[e]:this.themes[0]},getThemeChoiceIndex:function(){var e=parseInt(localStorage.getItem(storage_id+"colors_theme"));return 0<=e&&e<=this.themes.length?e:(this.changeAppColors(0),0)},getAppBackgroundColor:function(){return this.getThemeChoice()[0]},getAppMainColor:function(){return this.getThemeChoice()[1]},styleCurrentChoice:function(){$(this.menu_doms).removeClass("current"),$(this.menu_doms[this.current_theme]).addClass("current")},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;t.menu_selection+=e,t.menu_selection<0?t.menu_selection=0:t.menu_selection>this.menu_doms.length-1?t.menu_selection=this.menu_doms.length-1:this.hoverMenuItem(t.menu_selection)},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},colorUtils={processColor:function(e){var t;return"main"===e?t=color_theme_page.getAppMainColor():"background"===e&&(t=color_theme_page.getAppBackgroundColor()),t},processCustomStyle:function(e){return e=(e=e.replace("$BACKGROUND",color_theme_page.getAppBackgroundColor())).replace("$MAIN",color_theme_page.getAppMainColor())}},styleGroups={activeStyles:[{selector:".menu-item-container.active::before",property:"background-color",colorType:"main"},{selector:".latest-movie-item-wrapper.active .latest-movie-item-title-container",property:"background-color",colorType:"main"},{selector:".home-tab-item-container.active",property:"background-color",colorType:"main"},{selector:".layout-setting-item.active",property:"border-color",colorType:"main"},{selector:".layout-setting-item.active",property:"color",colorType:"main"},{selector:".layout-setting-item.current::after",property:"background-color",colorType:"main"},{selector:".setting-menu-item-wrapper.active .setting-menu-item-icon-container",property:"background-color",colorType:"main"},{selector:".hide-category-modal-option.active",property:"background-color",colorType:"main"},{selector:".vod-series-category-item.active",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item",property:"border-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item-title-wrapper",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-top-order",property:"background-color",colorType:"main"},{selector:".catchup-page-category-item.active, .catchup-channel-menu-item.active",property:"background-color",colorType:"main"},{selector:".epg-programme-item-wrapper.active",property:"background-color",colorType:"main"},{selector:".epg-date-item-container.active",property:"background-color",colorType:"main"},{selector:".channel-page-category-item.current",property:"background-color",colorType:"main"},{selector:"#vod-watch-movie-button.active .vod-watch-movie-icon-container",property:"background-color",colorType:"main"},{selector:".vod-action-btn.active",property:"background-color",colorType:"main"},{selector:".vod-action-btn.active",property:"border-color",colorType:"main"},{selector:".vod-series-search-btn.active",property:"background-color",colorType:"main"},{selector:"#vod-series-order-btn.active",property:"background-color",colorType:"main"},{selector:".sort-modal-item.active",property:"background-color",colorType:"main"},{selector:".filtered-movie-wrapper.active",property:"background-color",colorType:"main"},{selector:".modal-operation-menu-type-3.active",property:"background-color",colorType:"main"},{selector:".modal-btn-1.active",property:"background-color",colorType:"main"},{selector:".season-item-container.active",property:"background-color",colorType:"main"},{selector:".episode-item-wrapper.active",property:"background-color",colorType:"main"},{selector:".modal-btn-2.active",property:"background-color",colorType:"main"},{selector:"#aspect-ratio-modal-body div.active",property:"border-color",colorType:"main"},{selector:"#vod-summary-cast .cast-member.active .cast-image",property:"border-color",colorType:"main"},{selector:".rangeslider.active .rangeslider__handle",property:"border-color",colorType:"main"},{selector:".video-control-icon i.active",property:"border-color",colorType:"main"},{selector:".video-info-btn.active .video-info-icon",property:"border-color",colorType:"main"},{selector:".channel-sidebar-option.active",property:"border-color",colorType:"main"},{selector:".channel-sidebar-suboption.active",property:"border-color",colorType:"main"},{selector:".confirm-exit-movie-btn.active",property:"background-color",colorType:"main"}],staticStyles:[{selector:"#app",property:"background-color",colorType:"background"},{selector:"#channel-page.classic",property:"background-color",colorType:"background"},{selector:".latest-movie-item-wrapper",property:"border-color",colorType:"main"},{selector:".vod-new-label",property:"background-color",colorType:"main"},{selector:"#vod-summary-watched-bar",property:"background-color",colorType:"main"},{selector:".notification-action-btn",property:"background-color",colorType:"main"},{selector:".highlight",property:"color",colorType:"main"},{selector:".rangeslider__fill",property:"background",colorType:"main"}],customStyles:[{selector:".playlist-item-wrapper",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #00000085 77%)"},{selector:"#add-playlist-btn",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #00000085 77%)"},{selector:".playlist-state",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #000000 77%)"},{selector:".channel-page-category-item.active, .channel-menu-item.active",property:"background",value:"linear-gradient( 90deg, $MAIN 37%, transparent, transparent )"},{selector:".modal-operation-menu-type-3.current",property:"border",value:"0.2rem solid $MAIN"}]};function styleAppColors(){for(var e="",t=0;t<styleGroups.customStyles.length;t++){var i=styleGroups.customStyles[t],s=colorUtils.processCustomStyle(i.value);e+=i.selector+" { "+i.property+": "+s+"; }\n"}for(t=0;t<styleGroups.activeStyles.length;t++){var o=styleGroups.activeStyles[t],a=colorUtils.processColor(o.colorType);e+=o.selector+" { "+o.property+": "+a+"; }\n"}for(t=0;t<styleGroups.staticStyles.length;t++){var n=styleGroups.staticStyles[t],a=colorUtils.processColor(n.colorType);e+=n.selector+" { "+n.property+": "+a+"; }\n"}var r=document.getElementById("themeColorStyles");r||((r=document.createElement("style")).id="themeColorStyles",document.head.appendChild(r)),r.innerHTML=e}$(document).ready(function(){styleAppColors()});var mac_address,ip_address,user_name,password,device_key,api_host_url,is_trial,weatherCountry,weatherCity,weatherForecast,weatherToday,weatherNow,expire_date,playlist_expire_date,playlist_status,current_movie,current_season,current_episode,current_series,activation_code,scroll_text_timer,settings={bg_img_url:"",playlist_id:0,playlist:{},vod_sort:"default",series_sort:"default",live_sort:"default",sort_keys:{added:"Added",number:"Number",rating:"Rating",a_z:"A-Z",z_a:"Z-A",name:"Name",default:"Default"},language:"en",time_format:"24",playlist_type:"",stream_format:"default",tmdb_choice:"on",home_favorites_choice:"on",live_initialization_choice:"default",subtitle_size:50,subtitle_bg:"transparent",smart_proxy_connection_state:!1,smart_proxy_region:0,smart_proxy_country:0,smart_proxy_server:0,initFromLocal:function(){var t=localStorage.getItem(storage_id+"bg_img_url");if(t){if(t.includes("http"))for(var e=t.split("/"),i=e[e.length-1].trim(),s=0;s<themes.length;s++){var o=themes[s];if(o.url==i){t=o.url;break}}this.bg_img_url=t}t=localStorage.getItem(storage_id+"playlist_id"),this.playlist_id=t||0;var a=this;["vod_sort","series_sort","live_sort","stream_format","tmdb_choice","home_favorites_choice","live_initialization_choice"].map(function(e){(t=localStorage.getItem(storage_id+e))&&(a[e]=t)}),t=localStorage.getItem(storage_id+"smart_proxy_connection_state"),console.log("Loading smart_proxy_connection_state from localStorage:",t),t&&(this.smart_proxy_connection_state="true"===t),t=localStorage.getItem(storage_id+"smart_proxy_region"),console.log("Loading smart_proxy_region from localStorage:",t),t&&(this.smart_proxy_region=parseInt(t,10)||0),t=localStorage.getItem(storage_id+"smart_proxy_country"),console.log("Loading smart_proxy_country from localStorage:",t),t&&(this.smart_proxy_country=parseInt(t,10)||0),t=localStorage.getItem(storage_id+"smart_proxy_server"),console.log("Loading smart_proxy_server from localStorage:",t),t&&(this.smart_proxy_server=parseInt(t,10)||0),console.log("Final smart proxy settings after loading:",{connection_state:this.smart_proxy_connection_state,region:this.smart_proxy_region,country:this.smart_proxy_country,server:this.smart_proxy_server}),(t=localStorage.getItem(storage_id+"language"))?this.language=t:void 0!==navigator.language&&(e=navigator.language.split("-"),this.language=e[0]),(t=localStorage.getItem(storage_id+"subtitle_size"))&&(this.subtitle_size=parseInt(t)),(t=localStorage.getItem(storage_id+"subtitle_bg"))&&(this.subtitle_bg=t),(t=localStorage.getItem(storage_id+"smart_proxy_region"))&&(this.smart_proxy_region=parseInt(t)),(t=localStorage.getItem(storage_id+"smart_proxy_country"))&&(this.smart_proxy_country=parseInt(t)),(t=localStorage.getItem(storage_id+"smart_proxy_server"))&&(this.smart_proxy_server=parseInt(t)),(t=localStorage.getItem(storage_id+"smart_proxy_connection_state"))&&(this.smart_proxy_connection_state="true"===t)},saveSettings:function(e,t,i){this[e]=t,"object"!==i&&"array"!==i||(t=JSON.stringify(t)),localStorage.setItem(storage_id+e,t)},resetDefaultValues:function(){this.vod_sort="default",this.series_sort="default",this.live_sort="default",this.language="en",this.playlist_id="",this.time_format="24",this.stream_format="default",this.tmdb_choice="on",this.home_favorites_choice="on",this.live_initialization_choice="default",this.playlist={},this.subtitle_size=50,this.subtitle_bg="transparent",this.smart_proxy_connection_state=!1,this.smart_proxy_region=0,this.smart_proxy_country=0,this.smart_proxy_server=0}},panel_urls=["https://messitvplayer.com/api"],time_difference_with_server=0,is_device_low=!1,app_loading=!1,themes=[],current_route="login-page",default_movie_icon=HOST+"app_src_min/images/default_channel.png",parent_account_password="0000",mac_valid=!0,playlist_urls=[],languages=[],current_words=[],notification={},client_offset=moment(new Date).utcOffset(),storage_id="Messif5IUv3mg_",samsung_version="1.0.1",lg_version="1.0.2",vidaa_version="1.0.2",zeasn_version="1.0.0",api_succeed=!1,key_focused=!1,tmdb_api_key="8c16ccb8909edd817467103427d56efe",tmdb_prefix_url="https://api.themoviedb.org/3",tmdb_img_url="https://image.tmdb.org/t/p/",main_domain="ibosol.pro",agent_urls=["https://messitvplayer.com/api"],ad_url="",scroll_text_time=400,env="production",storageMoviesInfo=JSON.parse(localStorage.getItem(storage_id+"saved-movie-info"))||{},proxySubscriptionStatus=!0,proxyAvailableServers=[],proxyUrl="",isPlaylistWorking=!0;function showLoader(e){(e=void 0===e?!0:e)?$("#loader").show():$("#loader").hide()}function saveData(e,t){window[e]=t}function getMovieUrl(e,t,i){if("live"===t)if("default"!=settings.stream_format)i=settings.stream_format;else{var s=settings.playlist.url;try{var o=s.split("output="),a=o[1]||"";"mpegts"===a||"ts"===a?i="ts":"hls"!==a&&"m3u8"!==a||(i="m3u8"),console.log("here extension1="+a,i)}catch(e){}}return api_host_url+"/"+t+"/"+user_name+"/"+password+"/"+e+"."+i}function moveScrollPosition(e,t,i,s,o,a){var n,r,l,c;if(e&&t&&i)return a=a||!1,n=$(t).position(),"vertical"===i?(i=d(e,"height"),l=d(t,"height"),r=0,!s||o?(n.top+l>=i&&(r=n.top+l-i),n.top<0&&(r=n.top),$(e).animate({scrollTop:"+="+r},10,"swing")):(c=n.top+l/2-i/2,$(e).animate({scrollTop:"+="+c},100,"linear")),r):(l=d(e,"width"),i=d(t,"width"),c=0,!s||o?(n.left+i>=l&&(c=n.left+i-l),n.left<0&&!a?c=n.left:n.left<50&&a&&(c=n.left-100)):c=n.left+i/2-l/2,$(e).animate({scrollLeft:"+="+c},100,"linear"),c);function d(e,t){return parseInt($(e).css(t).replace("px",""))}}function showToast(e,t){$("#toast-body").html("<h3>"+e+"<br>"+t+"</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")}function getMinute(e){e=new Date(e);return parseInt(e.getTime()/60/1e3)}function changeBackgroundImage(){var e=settings.bg_img_url;e.includes("http")?api_succeed&&$("#app").css({"background-image":"url("+e+")"}):(e=HOST+"app_src_min/images/backgrounds/"+e,$("#app").css({"background-image":"url("+e+")"}))}function parseM3uResponse(e,t){var i=0;if("general"===e){var s=[],o=[],a=[],n=[],r=[],l=[],c=(t=t.replace(/['"]+/g,"")).split(/#EXTINF:-{0,1}[0-9]{1,} {0,},{0,}/gm),d=(c.splice(0,1),[]);(new Date).getTime();if(t.includes("tvg-"))for(var h={},u={},_={},m=0;m<c.length;m++)try{var p,g,f,v,d=c[m].split("\n");i++,(y=1<d[1].length?d[1]:"").includes("http:")&&(e="live",(y.includes("/movie/")||y.includes("vod")||y.includes("=movie")||y.includes("==movie=="))&&(e="vod"),y.includes("/series/")&&(e="series"),p=d[0].trim().split(","),b=1<p.length?p[1]:"",g=splitStrings(p[0],["tvg-","channel-","group-"]),k={stream_id:"",name:b,stream_icon:"",title:""},f="All",g.map(function(e){var e=e.split("="),t=e[0],i=e[1];switch(t){case"id":k.stream_id=i;break;case"name":k.name=""!=i.trim()?i:b;break;case"logo":k.stream_icon=i;break;case"title":""==(f=i.split(",")[0])&&(f="Uncategorized")}}),""===k.stream_id.trim()&&(k.stream_id=k.name),k.url=y,k.num=i,"live"===e&&(void 0===h[f]&&(v={category_id:h[f]=f,category_name:f},s.push(v)),k.category_id=f,o.push(k)),"vod"===e&&(void 0===u[f]&&(v={category_id:u[f]=f,category_name:f},n.push(v)),k.category_id=f,a.push(k)),"series"===e)&&(void 0===_[f]&&(v={category_id:_[f]=f,category_name:f},r.push(v)),k.category_id=f,l.push(k))}catch(e){console.log("parsing m3u error "+m,e)}else for(s=[{category_id:"all",category_name:"All"}],n=[{category_id:"all",category_name:"All"}],r=[{category_id:"all",category_name:"All"}],m=0;m<c.length;m++){d=c[m].split("\n");try{var y,b=d[0],e="live",k=((y=d[1]).includes("/movie/")&&(e="movie"),y.includes("/series/")&&(e="series"),{});b=b.trim(),k.stream_id=b,k.name=b,k.stream_icon="",k.num=m+1,k.category_id="all",k.url=y,"live"===e&&o.push(k),"series"===e&&l.push(k),"movie"===e&&a.push(k)}catch(e){console.log(d[0]),console.log(e)}}1<s.length&&s.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<n.length&&n.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<r.length&&r.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),LiveModel.setCategories(s),LiveModel.setMovies(o),LiveModel.insertMoviesToCategories(),VodModel.setCategories(n),VodModel.setMovies(a),VodModel.insertMoviesToCategories(),SeriesModel.setCategories(r);t=parseSeries(l);SeriesModel.setMovies(t),SeriesModel.insertMoviesToCategories()}}function parseSeries(e){var s=[],a={},n={},r={},o=(e.map(function(e){try{var t=e.name.split(/ S[0-9]{2}/),i=e.name.match(/S[0-9]{2}/)[0],s=(i="Season "+(i=i.trim().replace("S","")),t[0].trim()),o=t[1].trim().replace("E","");void 0===a[s]?(n={},(r={})[i]=[{name:o,url:e.url,id:o,info:{},title:"Episode "+o}],n[i]={name:i,cover:HOST+"app_src_min/images/series-icon.png"},a[s]={series_id:s,name:s,cover:e.stream_icon,youtube_trailer:"",category_id:e.category_id,rating:"",rating_5based:"",genre:"",director:"",cast:"",plot:"",season_map:n,episodes:r}):(void 0===n[i]?(r[i]=[{name:o,url:e.url,id:o,info:{},title:"Episode "+o}],n[i]={name:i,cover:HOST+"app_src_min/images/series-icon.png"},a[s].season_map=n):r[i].push({name:i,url:e.url,id:i,info:{},title:"Episode "+o}),a[s].episodes=r)}catch(e){}}),console.log("Here Series Map",a),0);return Object.keys(a).map(function(e){o++;var t=a[e],i=[];try{Object.keys(t.season_map).map(function(e){i.push(t.season_map[e])})}catch(e){}delete t.season_map,t.num=o,t.seasons=i,s.push(t)}),s}function splitStrings(e,t){for(var i=[],s=0;s<t.length;s++){var o=e.split(t[s]);if(s==t.length-1)for(var a=0;a<o.length;a++)""!=o[a].trim()&&i.push(o[a]);else for(a=0;a<o.length;a++)""!=o[a].trim()&&splitStrings(o[a],t.slice(s+1)).map(function(e){""!==e.trim()&&i.push(e)});return i}}function getAtob(e){var t=e;try{return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){}return t}function checkForAdult(e,t,i,s){if("off"==parent_account_password&&s)return!1;var o,a=!1;if("movie"===t){for(var n=0;n<i.length;n++)if(e.category_id==i[n].category_id){o=i[n];break}}else o=e;for(var r=o.category_name.toLowerCase(),l=["xxx","sex","porn","adult","18+","+18"],n=0;n<l.length;n++)if(r.includes(l[n])){a=!0;break}return a=o.parent_id&&0!=o.parent_id?!0:a}function pickPanelUrl(i){var e,t;if(0==i.length){for(var s=0;s<panel_urls.length;s++)if(panel_urls[s].includes(main_domain)){e=panel_urls[s],t=s;break}e||(e=panel_urls[0],t=0)}else for(var o=[],a=(panel_urls.map(function(e,t){i.includes(t)||o.push(e)}),Math.random()),n=1/o.length,s=0;s<o.length;s++)if(s*n<=a&&a<=n*(s+1)){e=o[s],t=s;break}return[t,e]}function getSortedMovies(e,t){var i=[],s="number"===t?"num":"a_z"!==t&&"z_a"!==t?t:"name";if(0==e.length)return e;if(void 0===e[0][s])return e;var o=1;switch(t){case"rating":case"number":case"added":o=1,"number"===t&&(o=-1),i=e.sort(function(e,t){e=parseFloat(e[s]),isNaN(e)&&(e=0),t=parseFloat(t[s]);return isNaN(t)&&(t=0),o*(e<t?1:t<e?-1:0)});break;case"a_z":case"z_a":case"name":o="a_z"===t||"name"===t?1:-1,i=e.sort(function(e,t){return o*e[s].localeCompare(t[s])});break;case"default":return e}return i}function parseM3uUrl(){var e,t=settings.playlist.url;t.includes("username=")&&t.includes("password=")?settings.playlist_type="xc":settings.playlist_type="general",api_host_url="xc"===settings.playlist_type?((e=settings.playlist.url.split("?"))[1].split("&").map(function(e){var e=e.split("="),t=e[0],e=e[1];"username"===t.toLowerCase()&&(user_name=e),"password"===t.toLowerCase()&&(password=e)}),e[0].replace("/get.php","")):t}function makeRearrangeArray(e,t,i){t=e.splice(t,1)[0];return e.splice(i,0,t),e}function setSelectionRange(t){setTimeout(function(){var e=$(t).val();$(t)[0].setSelectionRange(e.length,e.length)},200)}function exitApp(){"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close()}function checkVerticalMovable(e,t,i,s){var o=i<t&&s<0?!1:!0;return o=(Math.ceil(e/t)-1)*t<=i&&0<s?!1:o}function getLatestMovies(e){var t=[],i=("channel"===e?t=LiveModel.getCategories(!1,!1):"movie"===e?t=VodModel.getCategories(!1,!1):"series"===e&&(t=SeriesModel.getCategories(!1,!1)),[]);return t.map(function(e){checkForAdult(e,"category",[])||(i=i.concat(e.movies))}),(i=getSortedMovies(i,"added")).slice(0,50)}function getEncryptKey(e){for(var t="";t.length<e;t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(62*Math.random()|0));return t}function getEncryptKeyPosition(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i=0;i<t.length;i++)if(t[i]==e)return i}function getEncryptPositionChar(e){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(e)}function encryptRequest(e){var e=JSON.stringify(e),e=btoa(e),t=parseInt(30*Math.random()),i=(t<20&&(t=20),Math.floor(Math.random()*e.length)),s=(42<=i&&(i=42),getEncryptKey(t)),s=e.slice(0,i).concat(s).concat(e.slice(i));return getEncryptPositionChar(i)+getEncryptPositionChar(t)+s}function decryptResponse(e){var e=e.data,t=getEncryptKeyPosition(e[e.length-2]),i=getEncryptKeyPosition(e[e.length-1]),e=getAtob((e=e.slice(0,e.length-2)).slice(0,t).concat(e.slice(t+i)));return JSON.parse(e)}function changeLocalStorageKeysForPlaylist(e,s){for(var o=[],a=[],n=[],t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);e.map(function(e,t){var i;r.includes(e)&&r.includes(storage_id)&&(i=localStorage.getItem(r),e=r.replace(e,s[t]),a.push(e),n.push(i),o.push(r))})}o.map(function(e){localStorage.removeItem(e)}),a.map(function(e,t){localStorage.setItem(e,n[t])})}function removeLocalStorageKeysForPlaylist(e){for(var t=[],i=localStorage.length-1;0<=i;i--){var s=localStorage.key(i);e.map(function(e){s.includes(storage_id)&&s.includes(e)&&t.push(s)})}t.map(function(e){localStorage.removeItem(e)})}function checkActivePlaylist(){return!(!settings.playlist_id||0==Object.keys(settings.playlist).length)||(showToast("Sorry","No active playlist now<br>Please select one playlist in change playlist page"),!1)}function getRealMovieName(e){for(var e=e.split("-"),t=(1<e.length?e[1]:e[0]).split("("),e=t[0].trim(),i="",s="",o=1;o<t.length;o++){var a=t[o].replace(")","").trim();isNaN(a)?i=a:s=parseInt(a)}return{name:e,country:i,year:s}}function hideImg(e){$(e).hide(),$(".vod-series-background-img-overlay").hide()}function pickAgentUrl(i){for(var e,t,s=[],o=(agent_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),a=1/s.length,n=0;n<s.length;n++)if(n*a<=o&&o<=a*(n+1)){e=s[n],t=n;break}return[t,e]}function updateTimeStr(){var e=moment().format("hh:mm A");$(".current-time").text(e)}function debounce(i,s){var o;return function(){var e=this,t=arguments;clearTimeout(o),o=setTimeout(function(){o=null,i.apply(e,t)},s)}}function applyAnimation(t){try{clearTimeout(scroll_text_timer),scroll_text_timer=null,scroll_text_timer=setTimeout(function(){var e;$(t).find(".floatTextWrapper").width()<$(t).find(".floatText").width()&&(0==$(t).find(".floatTextTail").length&&(e=$(t).find(".floatText").html(),$(t).find(".floatTextWrapper").append('<span class="floatText floatTextTail">'+e+"</span>")),e=15*$(t).find(".floatText").width()/1e3,$(t).find(".floatText").css({"animation-duration":e+"s","-webkit-animation-duration":e+"s"}).addClass("has-animation"))},scroll_text_time)}catch(e){}}Array.prototype.includes||(Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,n,r){return function(e,t){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var i=a(this),s=i.length>>>0,o=r(0|t,s);if(o<0)o=n(0,s+o);else if(s<=o)return-1;if(void 0===e){for(;o!==s;++o)if(void 0===i[o]&&o in i)return o}else if(e!=e){for(;o!==s;++o)if(i[o]!=i[o])return o}else for(;o!==s;++o)if(i[o]===e)return o;return-1}}(Object,Math.max,Math.min)),String.prototype.includes||(String.prototype.includes=function(e){return!!~this.indexOf(e)});var clearCachedMoviesInfo=function(){storageMoviesInfo&&(console.log("Clearing cached movies info"),storageMoviesInfo={},localStorage.removeItem(storage_id+"saved-movie-info"))};function handleWeatherFetchAndStore(){var e=JSON.parse(localStorage.getItem(storage_id+"weather-forecast")),t=(console.log("Stored Weather Data:",e),-20);e&&e.date&&(console.log("Date detected"),t=utilities.compareTimestamps(e.date)),e&&e.timestamp&&(console.log("Timestamp detected"),t=utilities.compareTimestamps(e.timestamp)),!e||t<=-13?api({method:"get",url:"http://api.weatherapi.com/v1/forecast.json?key=0c1f9db9b99649f3a2b124503241310&q="+ip_address+"&days=14",headers:{"Custom-Proxy-Mode":1},success:function(e){e={date:e.location.localtime,country:e.location.country,city:e.location.name,forecast:e.forecast.forecastday};localStorage.setItem(storage_id+"weather-forecast",JSON.stringify(e)),handleWeatherFetchAndStore()}}):(weatherCountry=e.country,weatherCity=e.city,weatherForecast=e.forecast,weatherToday=binarySearchForecastDays(weatherForecast),weatherNow=binarySearchForecastHours(weatherToday.hour))}function binarySearchForecastDays(e){for(var t=new Date,i=(t.setUTCHours(0,0,0,0),Math.floor(t.getTime()/1e3)),s=0,o=e.length-1;s<=o;){var a=Math.floor((s+o)/2);if(e[a].date_epoch===i)return e[a];e[a].date_epoch<i?s=a+1:o=a-1}return 0<=o&&e[o].date_epoch<=i?e[o]:s<e.length?e[s]:null}function binarySearchForecastHours(e){for(var t=new Date,i=Math.floor(t.getTime()/1e3),s=0,o=e.length-1;s<=o;){var a=Math.floor((s+o)/2);if(e[a].time_epoch<=i&&(a===e.length-1||e[a+1].time_epoch>i))return e[a];e[a].time_epoch>i?o=a-1:s=a+1}return s<e.length?e[s]:null}function checkDevicePerformance(s){var e,t={frameThreshold:30,testDuration:500,iterations:1e3};for(e in s=s||{},t)s.hasOwnProperty(e)||(s[e]=t[e]);function o(e){if(r){n++;for(var t=0;t<s.iterations;t++)l.style.transform="rotate("+t+"deg)",Math.sqrt(1e4*Math.random());if(e-a<s.testDuration)requestAnimationFrame(o);else{r=!1;var e=performance.now()-a,i=n/(e/1e3),e=(document.body.removeChild(l),console.log("Performance Test Results:"),console.log("- Frames rendered:",n),console.log("- Time elapsed:",e.toFixed(2)+"ms"),console.log("- Average FPS:",i.toFixed(2)),console.log("- Target FPS:",s.frameThreshold),i>=s.frameThreshold);if(e){is_device_low=false;document.body.classList.add("allow-transition")}else{is_device_low=true;document.body.classList.remove("allow-transition")}console.log("Test passed:",e)}}}var a=performance.now(),n=0,r=!0,l=document.createElement("div");l.style.position="absolute",l.style.left="-9999px",document.body.appendChild(l);requestAnimationFrame(o)}function handleProxyInfoFetch(t){api({url:STARARCS_URL+"/api/tv/general",type:"POST",data:{DeviceMac:mac_address,DeviceAppName:"MessiTV",DeviceUserAgent:platform},success:function(e){if(proxySubscriptionStatus=e.Response.Status,proxyAvailableServers=e.Response.Servers,proxyUrl=e.Response.Url,settings_page.setupSmartProxyOptions(),console.log("Proxy Servers",proxyAvailableServers),"function"==typeof updateProxyURL&&updateProxyURL(),t)switch(e.Response.Status){case"Success":return showToast("Success","You are now subscribed to the service"),!0;case"Expired":return showToast("Expired","Your subscription has expired."),!1;case"QuotaLimit":return showToast("Quota Limit","You've used all your quota."),!1;case"SubFail":return showToast("Failed","We couldn't find an active subscription."),!1;default:return showToast("Failed","Something went wrong."),!1}},error:function(e){console.error("PROXY ERROR",e),t&&showToast("Error","Something went wrong.")}})}function generateQRCode(e,t,i){return i=i||{},t.empty(),new QRCode(t[0],{text:e,width:i.width||128,height:i.height||128,colorDark:i.colorDark||"#000000",colorLight:i.colorLight||"#ffffff",correctLevel:QRCode.CorrectLevel.M})}function handlePlaylistDependantElements(e){void 0!==e&&(isPlaylistWorking=e),$(".playlist-dependant").each(function(){var e,t=$(this);isPlaylistWorking?t.find(".playlist-not-working-overlay").remove():(t.css("position","relative"),(e=$("<div class='playlist-not-working-overlay'>PLAYLIST NOT WORKING</div>")).css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-color":"rgba(0, 0, 0, 0.6)",display:"flex","align-items":"center","justify-content":"center","z-index":"9999","pointer-events":"none",color:"#fff","font-size":"1.5rem","font-style":"italic"}),t.append(e))})}function handleServerNotifications(e){if(e.length)for(var t=0;t<e.length;t++)home_page.addNotification(e[t])}function getHostVersion(){var e="";return"samsung"===platform?e="undefined"!=typeof host_samsung_version&&host_samsung_version?host_samsung_version:samsung_version:"lg"===platform?e="undefined"!=typeof host_lg_version&&host_lg_version?host_lg_version:lg_version:"vidaa"===platform?e="undefined"!=typeof host_vidaa_version&&host_vidaa_version?host_vidaa_version:vidaa_version:"zeasn"!==platform&&"titanos"!==platform||(e="undefined"!=typeof host_zeasn_version&&host_zeasn_version?host_zeasn_version:zeasn_version),e}var login_page={is_loading:!1,activeRequests:[],keys:{focused_part:"main_area",main_area:0,network_issue_btn:0,expired_issue_btn:0,no_playlist_btn:0,loading_stuck_btn:0},login_succeed:!1,tried_panel_indexes:[],network_issue_btns:$(".network-issue-btn"),expired_issue_btns:$(".expired-issue-btn"),no_playlist_btns:$(".no-playlist-btn"),playlist_not_working_timer:null,loading_stuck_check_timer:6e4,introVideoHasEnded:!1,goBack:function(){turn_off_page.init("login-page")},showLoadImage:function(){$("#loading-issue-container").hide(),$("#loading-page").removeClass("hide")},showLoginError:function(){$(".loading-issue-item").addClass("hide"),$("#loading-issue-container").show()},showNetworkErrorModal:function(){this.showLoginError(),$("#network-issue-container").removeClass("hide"),this.hoverNetworkIssueBtn(0)},reloadApp:function(){window.location.reload()},continueDemoPlaylist:function(){var e=this;$("#loading-issue-container").hide(),$(".loading-issue-item").addClass("hide"),setTimeout(function(){e.login()},200)},exit:function(){exitApp()},enterActivationPage:function(){activation_page.init("login-page")},syncWithServer:function(r){var e,t,i,s,l,c,d=localStorage.getItem(storage_id+"local_data");d&&((d=JSON.parse(d)).playlist_urls&&0<d.playlist_urls.length||d.remove_ids&&0<d.remove_ids.length)?(e=(e=d.playlist_urls)||[],c=(c=d.remove_ids)||[],api_succeed?(t=(s=pickPanelUrl(this.tried_panel_indexes))[1],i=s[0],s=encryptRequest({mac_address:mac_address,app_type:platform,playlists:e,remove_ids:c}),l=this,api({method:"post",url:t+"/update_playlist",data:{data:s},success:function(e){l.tried_panel_indexes=[];for(var t=decryptResponse(e),i=[],s=[],o=0;o<t.length;o++)t[o].id!=t[o].origin_id&&(i.push(t[o].id),s.push(t[o].origin_id),settings.playlist_id===t[o].origin_id)&&settings.saveSettings("playlist_id",t[o].id,"");0<i.length&&changeLocalStorageKeysForPlaylist(s,i);for(var a=r.urls,o=a.length-1;0<=o;o--)for(var n=0;n<t.length;n++)if(a[o].id==t[n].id){a.splice(o,1);break}for(o=(a=a.concat(t)).length-1;0<=o;o--)c.includes(a[o].id)&&a.splice(o,1);r.urls=a,localStorage.setItem(storage_id+"api_data",JSON.stringify(r)),d.playlist_urls=[],d.remove_ids=[],localStorage.setItem(storage_id+"local_data",JSON.stringify(d)),l.loadApp(r)},error:function(){l.is_loading=!1,l.tried_panel_indexes.push(i),l.tried_panel_indexes.length<panel_urls.length?l.syncWithServer(r):l.syncFailedWithServer(r,d)}})):this.syncFailedWithServer(r,d)):this.loadApp(r)},syncFailedWithServer:function(e,t){for(var i=(i=t.playlist_urls)||[],s=(s=t.remove_ids)||[],o=e.urls,a=o.length-1;0<=a;a--)for(var n=0;n<i.length;n++)if(o[a].id==i[n].id){o.splice(a,1);break}for(a=(o=o.concat(i)).length-1;0<=a;a--)s.includes(o[a].id)&&o.splice(a,1);t.remove_ids=s=[],localStorage.setItem("local_data",JSON.stringify(t)),e.urls=o,this.loadApp(e)},fetchPlaylistInformation:function(){var i,e,s,t;this.is_loading||(api_succeed=!0,this.showLoadImage(),(i=this).is_loading=!0,$("#mac-address").text(mac_address),$(".mac-address").text(mac_address),e=(t=pickPanelUrl(this.tried_panel_indexes))[1],s=t[0],t=getHostVersion(),t=encryptRequest({mac_address:mac_address,app_type:platform,version:t}),api({url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+e+"/playlist_info",type:"POST",data:{data:t},success:function(e){i.tried_panel_indexes=[];e=decryptResponse(e);console.log("API Decrypted response",e),generateQRCode("https://messitvplayer.com/device/login?mac_address="+mac_address,$("#device-login-qr")),ip_address=e.ip_address,2==e.is_trial?$(".app-expire-date").text("Lifetime"):$(".app-expire-date").text(e.expire_date),localStorage.setItem(storage_id+"api_data",JSON.stringify(e)),e.themes&&(themes=e.themes),i.syncWithServer(e),handleWeatherFetchAndStore(),handleProxyInfoFetch(),e.notifications&&handleServerNotifications(e.notifications)},error:function(e){var t;saveData("api_succeed",i.is_loading=!1),i.tried_panel_indexes.length<panel_urls.length?(i.tried_panel_indexes.push(s),i.fetchPlaylistInformation()):(t=localStorage.getItem(storage_id+"api_data"))?(t=JSON.parse(t),i.syncWithServer(t)):i.showNetworkErrorModal()}}))},loadApp:function(e){console.log("DATA",e);var t=moment().format("Y-MM-DD");saveData("playlist_urls",e.urls),saveData("notification",e.notification),$(".device-key").text(e.device_key),$(".loading-page-device-info-container").slideDown(),saveData("languages",e.languages),saveData("device_key",e.device_key),saveData("expire_date",e.expire_date),!api_succeed&&e.expire_date<t&&saveData("expire_date","2438-01-02"),saveData("is_trial",e.is_trial),this.is_loading=!1,$(".expire-date").text(expire_date),e.expire_date<t?(saveData("mac_valid",!1),this.showLoginError(),$("#expired-issue-container").removeClass("hide"),this.hoverExpiredIssueBtn(0),this.hideLoadingForTooLong()):e.has_own_playlist?this.login():(this.showLoginError(),$("#no-playlist-issue-container").removeClass("hide"),this.hoverNoPlaylistBtn(0),this.hideLoadingForTooLong())},getPlayListDetail:function(){var s=this;if(this.playlist_not_working_timer=setTimeout(function(){s.showLoadingForTooLong()},this.loading_stuck_check_timer),mac_address="52:54:00:12:34:59","samsung"===platform)try{tizen.systeminfo.getPropertyValue("ETHERNET_NETWORK",function(e){void 0!==e&&void 0!==e.macAddress&&(mac_address=e.macAddress),s.fetchPlaylistInformation()})}catch(e){this.fetchPlaylistInformation()}else if("lg"===platform)webOS.service.request("luna://com.webos.service.sm",{method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onSuccess:function(e){mac_address="";for(var t=e.idList[0].idValue.replace(/['-]+/g,""),i=0;i<=5;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":");s.fetchPlaylistInformation()},onFailure:function(e){s.fetchPlaylistInformation()}});else if("vidaa"===platform)try{if("function"==typeof Hisense_GetDeviceID){var e=Hisense_GetDeviceID();if(/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(e))mac_address=e;else{mac_address="";var t=e.slice(-12);try{for(var i=0;i<6;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":")}catch(e){}}console.log("VIDAA MAC Address: "+mac_address)}s.fetchPlaylistInformation()}catch(e){s.fetchPlaylistInformation()}else"zeasn"===platform||"titanos"===platform?window.onDeviceInfoReady(function(e){try{var t=e.Product.deviceID,i=e.Product.WhaleAdID,s=e.Product.mac,o=(console.log("Device ID:",t),console.log("Whale ID:",i),console.log("Device MAC Address:",s),""),a="";if(mac_address="",s&&"undefined"!==s&&""!==s&&null!==s&&"null"!==s)mac_address=o=s;else{for(var o=i,n=0;n<o.length&&("-"!=o[n]&&(a+=o[n]),!(12<=a.length));n++);for(n=0;n<=5;n++)mac_address+=a.substr(2*n,2),n<5&&(mac_address+=":")}console.log("Zeasn mac address=",mac_address),login_page.fetchPlaylistInformation()}catch(e){login_page.fetchPlaylistInformation()}console.log(e)}):("windows"===platform&&console.log("Windows test mac address",mac_address),s.fetchPlaylistInformation())},login:function(){home_page.dataLoaded={live:!1,vod:!1,series:!1},checkDevicePerformance(),this.showLoadImage();for(var e=settings.playlist_id,t=0,i=0;i<playlist_urls.length;i++)if(playlist_urls[i].id==e){t=i;break}settings.saveSettings("playlist",playlist_urls[t],"array"),settings.saveSettings("playlist_id",playlist_urls[t].id,"");var s=this;"code"===playlist_urls[t].playlist_type?api({type:"POST",url:STORE_URL+"/api/sync-code",data:{code:playlist_urls[t].code,mac_address:mac_address},headers:{Authorization:"Bearer "+STORE_TOKEN},success:function(e){console.log(e),e.status?e.data.is_expired?s.goToPlaylistPageWithError("Code is expired"):"enable"!==e.data.status?s.goToPlaylistPageWithError("Code is disabled"):e.data.url&&0!==e.data.url.length?(playlist_urls[t].code_response=e.data,playlist_urls[t].url_index=0,s.tryPlaylistUrl(t)):s.goToPlaylistPageWithError("No playlist URL found in this code"):s.goToPlaylistPageWithError(e.msg)},error:function(){s.goToPlaylistPageWithError()}}):this.continueLogin(t)},tryPlaylistUrl:function(e){var t,i=playlist_urls[e].code_response,s=playlist_urls[e].url_index;s>=i.url.length?this.goToPlaylistPageWithError("All playlist URLs failed"):(t=i.url[s],console.log("Trying playlist URL "+(s+1)+" of "+i.url.length),(!t.includes("get.php")||!t.includes("type=m3u"))&&"xc"===i.type&&i.username&&i.password?(playlist_urls[e].playlist_type="xc",playlist_urls[e].url=t,playlist_urls[e].username=i.username,playlist_urls[e].password=i.password):(playlist_urls[e].playlist_type="general",playlist_urls[e].url=t),this.continueLoginWithFallback(e))},continueLoginWithFallback:function(e){"xc"===playlist_urls[e].playlist_type?(user_name=playlist_urls[e].username,password=playlist_urls[e].password,api_host_url=playlist_urls[e].url,settings.playlist_type="xc"):parseM3uUrl(),this.proceedLoginWithFallback(e)},proceedLoginWithFallback:function(e){var t,r,l,c,d=this;this.is_loading||($("#playlist-error").hide(),$("#playlist-items-container").removeClass("has-error"),LiveModel.init(),VodModel.init(),SeriesModel.init(),t=settings.playlist_type,this.is_loading=!0,api_host_url=api_host_url||(settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url),storageMoviesInfo.host_url!=api_host_url&&clearCachedMoviesInfo(),r=function(){handlePlaylistDependantElements(!(d.is_loading=!1)),home_page.init(!0),d.hideLoadingForTooLong()},l=function(){d.is_loading=!1,playlist_urls[e].url_index++,d.tryPlaylistUrl(e)},api("xc"===t?{method:"get",url:(c=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=").replace("&action=",""),headers:{Accept:"application/json"},success:function(e){if("object"!=typeof e||null===e)d.is_loading=!1,d.goToPlaylistPageWithError("Invalid response from server");else{if(void 0!==e.server_info&&calculateTimeDifference(e.server_info.time_now,e.server_info.timestamp_now),void 0!==e.user_info){if(0==e.user_info.auth||void 0!==e.user_info.status&&("Expired"===e.user_info.status||"Banned"===e.user_info.status||"Disabled"===e.user_info.status))return void l();null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD")));var t=parseInt(localStorage.getItem(storage_id+"load_on_demand"));if(t||0==t||(t=1,localStorage.setItem(storage_id+"load_on_demand",1)),t)return void r();var t=api({method:"get",url:c+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),i=api({method:"get",url:c+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),s=api({method:"get",url:c+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),o=api({method:"get",url:c+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),a=api({method:"get",url:c+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),n=api({method:"get",url:c+"get_series",success:function(e){SeriesModel.setMovies(e)}});d.activeRequests=[t,i,s,o,a,n],$.when(t,i,s,o,a,n).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),r()}catch(e){l()}}).fail(function(){l()})}playlist_status=e.user_info&&e.user_info.status||"Unknown"}},error:function(e){l()},timeout:15e3}:{method:"get",url:api_host_url=settings.playlist.url,headers:{Accept:"application/json"},timeout:24e4,success:function(e){if("object"==typeof e&&null!==e||e.startsWith("#EXTM3U"))try{parseM3uResponse("general",e),$("#loading-page").addClass("hide"),r()}catch(e){l()}else d.is_loading=!1,d.goToPlaylistPageWithError("Invalid response from server")},error:function(e){l()}}))},continueLogin:function(e){"xc"===playlist_urls[e].playlist_type?(user_name=playlist_urls[e].username,password=playlist_urls[e].password,api_host_url=playlist_urls[e].url,settings.playlist_type="xc"):parseM3uUrl(),this.proceed_login()},goToPlaylistPageWithError:function(e,t){t&&this.abortAllRequests(),playlist_expire_date=null,handlePlaylistDependantElements(!1),this.is_loading=!1,LiveModel.insertMoviesToCategories([]),VodModel.insertMoviesToCategories([]),SeriesModel.insertMoviesToCategories([]),$("#loading-page").addClass("hide"),$("#playlist-error").show(),e&&"string"==typeof e?$("#playlist-error").text(e):$("#playlist-error").text("We regret to inform you that there is a problem with the current                playlist. This issue is associated with your IPTV service                provider, not our application. For inquiries about the playlists                status and expiration, please reach out to your provider."),$("#playlist-items-container").addClass("has-error"),home_page.init(),this.hideLoadingForTooLong(),home_page.hoverBottomMenu(6),home_page.handleMenuClick()},abortAllRequests:function(){if(console.log("Aborting all requests..."),this.activeRequests&&0<this.activeRequests.length){console.log("Found "+this.activeRequests.length+" local active requests to abort");for(var t=0;t<this.activeRequests.length;t++)if(this.activeRequests[t]&&this.activeRequests[t].abort)try{this.activeRequests[t].abort(),console.log("Aborted local request "+(t+1))}catch(e){console.log("Error aborting local request "+(t+1)+":",e)}this.activeRequests=[]}if(window.ongoingRequests){console.log("Found "+window.ongoingRequests.length+" ongoing requests to abort");for(t=0;t<window.ongoingRequests.length;t++)if(window.ongoingRequests[t]&&window.ongoingRequests[t].abort)try{window.ongoingRequests[t].abort(),console.log("Aborted request "+(t+1))}catch(e){console.log("Error aborting request "+(t+1)+":",e)}window.ongoingRequests=[]}jQuery&&0<jQuery.active&&(console.log("Found "+jQuery.active+" active jQuery requests"),$(document).ajaxStop()),this.playlist_not_working_timer&&(clearTimeout(this.playlist_not_working_timer),this.playlist_not_working_timer=null),this.is_loading=!1,console.log("Request abortion completed")},convertNormalM3u:function(){var e;console.log("Converting to normal M3U"),this.is_loading=!1,"xc"===settings.playlist.playlist_type&&(e=settings.playlist.url+"/get.php?username="+settings.playlist.username+"&password="+settings.playlist.password+"&type=m3u_plus&output=m3u8",settings.playlist.url=e),settings.playlist_type="general",api_host_url=settings.playlist.url,this.proceed_login()},proceed_login:function(){var l,e,t;this.is_loading||($("#playlist-error").hide(),$("#playlist-items-container").removeClass("has-error"),LiveModel.init(),VodModel.init(),SeriesModel.init(),l=this,e=settings.playlist_type,this.is_loading=!0,api_host_url=api_host_url||(settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url),storageMoviesInfo&&storageMoviesInfo.host_url&&storageMoviesInfo.host_url!=api_host_url&&clearCachedMoviesInfo(),t=proxySubscriptionStatus?1e3:0,setTimeout(function(){var r;api("xc"===e?{method:"get",url:(r=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=").replace("&action=",""),headers:{Accept:"application/json"},success:function(e){if("object"!=typeof e||null===e)l.is_loading=!1,l.goToPlaylistPageWithError("Invalid response from server");else{if(void 0!==e.server_info&&calculateTimeDifference(e.server_info.time_now,e.server_info.timestamp_now),void 0!==e.user_info)if(playlist_status=e.user_info.status,0==e.user_info.auth||void 0!==e.user_info.status&&("Expired"===e.user_info.status||"Banned"===e.user_info.status||"Disabled"===e.user_info.status))l.is_loading=!1,l.goToPlaylistPageWithError(),e.user_info.exp_date&&(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD"))));else{null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD")));var t=parseInt(localStorage.getItem(storage_id+"load_on_demand"));if(t||0==t||(t=1,localStorage.setItem(storage_id+"load_on_demand",1)),t)return handlePlaylistDependantElements(!(l.is_loading=!1)),home_page.init(!0),void l.hideLoadingForTooLong();var t=api({method:"get",url:r+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),i=api({method:"get",url:r+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),s=api({method:"get",url:r+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),o=api({method:"get",url:r+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),a=api({method:"get",url:r+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),n=api({method:"get",url:r+"get_series",success:function(e){SeriesModel.setMovies(e)}});l.activeRequests=[t,i,s,o,a,n],$.when(t,i,s,o,a,n).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),l.is_loading=!1,home_page.init(!0),handlePlaylistDependantElements(!0),l.hideLoadingForTooLong()}catch(e){l.convertNormalM3u()}}).fail(function(){l.convertNormalM3u()})}playlist_status=e.user_info&&e.user_info.status||"Unknown"}},error:function(e){l.convertNormalM3u()},timeout:15e3}:{method:"get",url:api_host_url=settings.playlist.url,headers:{Accept:"application/json"},timeout:24e4,success:function(e){"object"==typeof e&&null!==e||e.startsWith("#EXTM3U")?(parseM3uResponse("general",e),$("#loading-page").addClass("hide"),home_page.init(!0),l.hideLoadingForTooLong(),l.is_loading=!1):(l.is_loading=!1,l.goToPlaylistPageWithError("Invalid response from server"))},error:function(e){l.goToPlaylistPageWithError()}})},t))},hoverNetworkIssueBtn:function(e){var t=this.keys;t.focused_part="network_issue_btn",t.network_issue_btn=e,$(this.network_issue_btns).removeClass("active"),$(this.network_issue_btns[e]).addClass("active")},hoverExpiredIssueBtn:function(e){var t=this.keys;t.focused_part="expired_issue_btn",t.expired_issue_btn=e,$(this.expired_issue_btns).removeClass("active"),$(this.expired_issue_btns[e]).addClass("active")},hoverNoPlaylistBtn:function(e){var t=this.keys;t.focused_part="no_playlist_btn",t.no_playlist_btn=e,$(this.no_playlist_btns).removeClass("active"),$(this.no_playlist_btns[e]).addClass("active")},showLoadingForTooLong:function(){$("#app-loading-too-long").css("display","flex"),this.keys.focused_part="loading_stuck"},hideLoadingForTooLong:function(){clearTimeout(this.playlist_not_working_timer),$("#app-loading-too-long").hide()},clickLoadingForTooLongOption:function(e){switch(e){case 0:this.goToPlaylistPageWithError("Playlist loading aborted by the user.",!0);break;case 1:window.location.reload();break;case 2:this.hideLoadingForTooLong()}},hoverLoadingForTooLongOption:function(e){this.keys.loading_stuck_btn=e,$(".app-loading-too-long-cta-button").removeClass("active"),$($(".app-loading-too-long-cta-button")[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"network_issue_btn":$(this.network_issue_btns[e.network_issue_btn]).trigger("click");break;case"no_playlist_btn":$(this.no_playlist_btns[e.no_playlist_btn]).trigger("click");break;case"expired_issue_btn":$(this.expired_issue_btns[e.expired_issue_btn]).trigger("click");break;case"loading_stuck":this.clickLoadingForTooLongOption(e.loading_stuck_btn)}},handleMenuUpDown:function(e){var t=this.keys;"main_area"===t.focused_part&&(t.main_area+=e,(e=[$("#login-button")]).map(function(e){$(e).removeClass("active")}),t.main_area<0&&(t.main_area=e.length-1),t.main_area>=e.length&&(t.main_area=0),$(e[t.main_area]).addClass("active"))},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"network_issue_btn":t.network_issue_btn+=e,t.network_issue_btn<0&&(t.network_issue_btn=0),t.network_issue_btn>=this.network_issue_btns.length&&(t.network_issue_btn=this.network_issue_btns.length-1),this.hoverNetworkIssueBtn(t.network_issue_btn);break;case"expired_issue_btn":t.expired_issue_btn+=e,t.expired_issue_btn<0&&(t.expired_issue_btn=0),1<t.expired_issue_btn&&(t.expired_issue_btn=1),this.hoverExpiredIssueBtn(t.expired_issue_btn);break;case"no_playlist_btn":t.no_playlist_btn+=e,t.no_playlist_btn<0&&(t.no_playlist_btn=0),1<t.no_playlist_btn&&(t.no_playlist_btn=1),this.hoverNoPlaylistBtn(t.no_playlist_btn);break;case"loading_stuck":t.loading_stuck_btn+=e,t.loading_stuck_btn<0&&(t.loading_stuck_btn=0),2<t.loading_stuck_btn&&(t.loading_stuck_btn=2),this.hoverLoadingForTooLongOption(t.loading_stuck_btn)}},HandleKey:function(e){switch(e.keyCode){case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},temps=[{name:"Afar",iso6392B:"aar",iso6391:"aa"},{name:"Abkhazian",iso6392B:"abk",iso6391:"ab"},{name:"Achinese",iso6392B:"ace"},{name:"Acoli",iso6392B:"ach"},{name:"Adangme",iso6392B:"ada"},{name:"Adyghe; Adygei",iso6392B:"ady"},{name:"Afro-Asiatic languages",iso6392B:"afa"},{name:"Afrihili",iso6392B:"afh"},{name:"Afrikaans",iso6392B:"afr",iso6391:"af"},{name:"Ainu",iso6392B:"ain"},{name:"Akan",iso6392B:"aka",iso6391:"ak"},{name:"Akkadian",iso6392B:"akk"},{name:"Albanian",iso6392B:"alb",iso6392T:"sqi",iso6391:"sq"},{name:"Aleut",iso6392B:"ale"},{name:"Algonquian languages",iso6392B:"alg"},{name:"Southern Altai",iso6392B:"alt"},{name:"Amharic",iso6392B:"amh",iso6391:"am"},{name:"English, Old (ca.450-1100)",iso6392B:"ang"},{name:"Angika",iso6392B:"anp"},{name:"Apache languages",iso6392B:"apa"},{name:"Arabic",iso6392B:"ara",iso6391:"ar"},{name:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",iso6392B:"arc"},{name:"Aragonese",iso6392B:"arg",iso6391:"an"},{name:"Armenian",iso6392B:"arm",iso6392T:"hye",iso6391:"hy"},{name:"Mapudungun; Mapuche",iso6392B:"arn"},{name:"Arapaho",iso6392B:"arp"},{name:"Artificial languages",iso6392B:"art"},{name:"Arawak",iso6392B:"arw"},{name:"Assamese",iso6392B:"asm",iso6391:"as"},{name:"Asturian; Bable; Leonese; Asturleonese",iso6392B:"ast"},{name:"Athapascan languages",iso6392B:"ath"},{name:"Australian languages",iso6392B:"aus"},{name:"Avaric",iso6392B:"ava",iso6391:"av"},{name:"Avestan",iso6392B:"ave",iso6391:"ae"},{name:"Awadhi",iso6392B:"awa"},{name:"Aymara",iso6392B:"aym",iso6391:"ay"},{name:"Azerbaijani",iso6392B:"aze",iso6391:"az"},{name:"Banda languages",iso6392B:"bad"},{name:"Bamileke languages",iso6392B:"bai"},{name:"Bashkir",iso6392B:"bak",iso6391:"ba"},{name:"Baluchi",iso6392B:"bal"},{name:"Bambara",iso6392B:"bam",iso6391:"bm"},{name:"Balinese",iso6392B:"ban"},{name:"Basque",iso6392B:"baq",iso6392T:"eus",iso6391:"eu"},{name:"Basa",iso6392B:"bas"},{name:"Baltic languages",iso6392B:"bat"},{name:"Beja; Bedawiyet",iso6392B:"bej"},{name:"Belarusian",iso6392B:"bel",iso6391:"be"},{name:"Bemba",iso6392B:"bem"},{name:"Bengali",iso6392B:"ben",iso6391:"bn"},{name:"Berber languages",iso6392B:"ber"},{name:"Bhojpuri",iso6392B:"bho"},{name:"Bihari languages",iso6392B:"bih",iso6391:"bh"},{name:"Bikol",iso6392B:"bik"},{name:"Bini; Edo",iso6392B:"bin"},{name:"Bislama",iso6392B:"bis",iso6391:"bi"},{name:"Siksika",iso6392B:"bla"},{name:"Bantu languages",iso6392B:"bnt"},{name:"Bosnian",iso6392B:"bos",iso6391:"bs"},{name:"Braj",iso6392B:"bra"},{name:"Breton",iso6392B:"bre",iso6391:"br"},{name:"Batak languages",iso6392B:"btk"},{name:"Buriat",iso6392B:"bua"},{name:"Buginese",iso6392B:"bug"},{name:"Bulgarian",iso6392B:"bul",iso6391:"bg"},{name:"Burmese",iso6392B:"bur",iso6392T:"mya",iso6391:"my"},{name:"Blin; Bilin",iso6392B:"byn"},{name:"Caddo",iso6392B:"cad"},{name:"Central American Indian languages",iso6392B:"cai"},{name:"Galibi Carib",iso6392B:"car"},{name:"Catalan; Valencian",iso6392B:"cat",iso6391:"ca"},{name:"Caucasian languages",iso6392B:"cau"},{name:"Cebuano",iso6392B:"ceb"},{name:"Celtic languages",iso6392B:"cel"},{name:"Chamorro",iso6392B:"cha",iso6391:"ch"},{name:"Chibcha",iso6392B:"chb"},{name:"Chechen",iso6392B:"che",iso6391:"ce"},{name:"Chagatai",iso6392B:"chg"},{name:"Chinese",iso6392B:"chi",iso6392T:"zho",iso6391:"zh"},{name:"Chuukese",iso6392B:"chk"},{name:"Mari",iso6392B:"chm"},{name:"Chinook jargon",iso6392B:"chn"},{name:"Choctaw",iso6392B:"cho"},{name:"Chipewyan; Dene Suline",iso6392B:"chp"},{name:"Cherokee",iso6392B:"chr"},{name:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",iso6392B:"chu",iso6391:"cu"},{name:"Chuvash",iso6392B:"chv",iso6391:"cv"},{name:"Cheyenne",iso6392B:"chy"},{name:"Chamic languages",iso6392B:"cmc"},{name:"Montenegrin",iso6392B:"cnr"},{name:"Coptic",iso6392B:"cop"},{name:"Cornish",iso6392B:"cor",iso6391:"kw"},{name:"Corsican",iso6392B:"cos",iso6391:"co"},{name:"Creoles and pidgins, English based",iso6392B:"cpe"},{name:"Creoles and pidgins, French-based",iso6392B:"cpf"},{name:"Creoles and pidgins, Portuguese-based",iso6392B:"cpp"},{name:"Cree",iso6392B:"cre",iso6391:"cr"},{name:"Crimean Tatar; Crimean Turkish",iso6392B:"crh"},{name:"Creoles and pidgins",iso6392B:"crp"},{name:"Kashubian",iso6392B:"csb"},{name:"Cushitic languages",iso6392B:"cus"},{name:"Czech",iso6392B:"cze",iso6392T:"ces",iso6391:"cs"},{name:"Dakota",iso6392B:"dak"},{name:"Danish",iso6392B:"dan",iso6391:"da"},{name:"Dargwa",iso6392B:"dar"},{name:"Land Dayak languages",iso6392B:"day"},{name:"Delaware",iso6392B:"del"},{name:"Slave (Athapascan)",iso6392B:"den"},{name:"Dogrib",iso6392B:"dgr"},{name:"Dinka",iso6392B:"din"},{name:"Divehi; Dhivehi; Maldivian",iso6392B:"div",iso6391:"dv"},{name:"Dogri",iso6392B:"doi"},{name:"Dravidian languages",iso6392B:"dra"},{name:"Lower Sorbian",iso6392B:"dsb"},{name:"Duala",iso6392B:"dua"},{name:"Dutch, Middle (ca.1050-1350)",iso6392B:"dum"},{name:"Dutch; Flemish",iso6392B:"dut",iso6392T:"nld",iso6391:"nl"},{name:"Dyula",iso6392B:"dyu"},{name:"Dzongkha",iso6392B:"dzo",iso6391:"dz"},{name:"Efik",iso6392B:"efi"},{name:"Egyptian (Ancient)",iso6392B:"egy"},{name:"Ekajuk",iso6392B:"eka"},{name:"Elamite",iso6392B:"elx"},{name:"English",iso6392B:"eng",iso6391:"en"},{name:"English, Middle (1100-1500)",iso6392B:"enm"},{name:"Esperanto",iso6392B:"epo",iso6391:"eo"},{name:"Estonian",iso6392B:"est",iso6391:"et"},{name:"Ewe",iso6392B:"ewe",iso6391:"ee"},{name:"Ewondo",iso6392B:"ewo"},{name:"Fang",iso6392B:"fan"},{name:"Faroese",iso6392B:"fao",iso6391:"fo"},{name:"Fanti",iso6392B:"fat"},{name:"Fijian",iso6392B:"fij",iso6391:"fj"},{name:"Filipino; Pilipino",iso6392B:"fil"},{name:"Finnish",iso6392B:"fin",iso6391:"fi"},{name:"Finno-Ugrian languages",iso6392B:"fiu"},{name:"Fon",iso6392B:"fon"},{name:"French",iso6392B:"fre",iso6392T:"fra",iso6391:"fr"},{name:"French, Middle (ca.1400-1600)",iso6392B:"frm"},{name:"French, Old (842-ca.1400)",iso6392B:"fro"},{name:"Northern Frisian",iso6392B:"frr"},{name:"Eastern Frisian",iso6392B:"frs"},{name:"Western Frisian",iso6392B:"fry",iso6391:"fy"},{name:"Fulah",iso6392B:"ful",iso6391:"ff"},{name:"Friulian",iso6392B:"fur"},{name:"Ga",iso6392B:"gaa"},{name:"Gayo",iso6392B:"gay"},{name:"Gbaya",iso6392B:"gba"},{name:"Germanic languages",iso6392B:"gem"},{name:"Georgian",iso6392B:"geo",iso6392T:"kat",iso6391:"ka"},{name:"German",iso6392B:"ger",iso6392T:"deu",iso6391:"de"},{name:"Geez",iso6392B:"gez"},{name:"Gilbertese",iso6392B:"gil"},{name:"Gaelic; Scottish Gaelic",iso6392B:"gla",iso6391:"gd"},{name:"Irish",iso6392B:"gle",iso6391:"ga"},{name:"Galician",iso6392B:"glg",iso6391:"gl"},{name:"Manx",iso6392B:"glv",iso6391:"gv"},{name:"German, Middle High (ca.1050-1500)",iso6392B:"gmh"},{name:"German, Old High (ca.750-1050)",iso6392B:"goh"},{name:"Gondi",iso6392B:"gon"},{name:"Gorontalo",iso6392B:"gor"},{name:"Gothic",iso6392B:"got"},{name:"Grebo",iso6392B:"grb"},{name:"Greek, Ancient (to 1453)",iso6392B:"grc"},{name:"Greek, Modern (1453-)",iso6392B:"gre",iso6392T:"ell",iso6391:"el"},{name:"Guarani",iso6392B:"grn",iso6391:"gn"},{name:"Swiss German; Alemannic; Alsatian",iso6392B:"gsw"},{name:"Gujarati",iso6392B:"guj",iso6391:"gu"},{name:"Gwich'in",iso6392B:"gwi"},{name:"Haida",iso6392B:"hai"},{name:"Haitian; Haitian Creole",iso6392B:"hat",iso6391:"ht"},{name:"Hausa",iso6392B:"hau",iso6391:"ha"},{name:"Hawaiian",iso6392B:"haw"},{name:"Hebrew",iso6392B:"heb",iso6391:"he"},{name:"Herero",iso6392B:"her",iso6391:"hz"},{name:"Hiligaynon",iso6392B:"hil"},{name:"Himachali languages; Western Pahari languages",iso6392B:"him"},{name:"Hindi",iso6392B:"hin",iso6391:"hi"},{name:"Hittite",iso6392B:"hit"},{name:"Hmong; Mong",iso6392B:"hmn"},{name:"Hiri Motu",iso6392B:"hmo",iso6391:"ho"},{name:"Croatian",iso6392B:"hrv",iso6391:"hr"},{name:"Upper Sorbian",iso6392B:"hsb"},{name:"Hungarian",iso6392B:"hun",iso6391:"hu"},{name:"Hupa",iso6392B:"hup"},{name:"Iban",iso6392B:"iba"},{name:"Igbo",iso6392B:"ibo",iso6391:"ig"},{name:"Icelandic",iso6392B:"ice",iso6392T:"isl",iso6391:"is"},{name:"Ido",iso6392B:"ido",iso6391:"io"},{name:"Sichuan Yi; Nuosu",iso6392B:"iii",iso6391:"ii"},{name:"Ijo languages",iso6392B:"ijo"},{name:"Inuktitut",iso6392B:"iku",iso6391:"iu"},{name:"Interlingue; Occidental",iso6392B:"ile",iso6391:"ie"},{name:"Iloko",iso6392B:"ilo"},{name:"Interlingua (International Auxiliary Language Association)",iso6392B:"ina",iso6391:"ia"},{name:"Indic languages",iso6392B:"inc"},{name:"Indonesian",iso6392B:"ind",iso6391:"id"},{name:"Indo-European languages",iso6392B:"ine"},{name:"Ingush",iso6392B:"inh"},{name:"Inupiaq",iso6392B:"ipk",iso6391:"ik"},{name:"Iranian languages",iso6392B:"ira"},{name:"Iroquoian languages",iso6392B:"iro"},{name:"Italian",iso6392B:"ita",iso6391:"it"},{name:"Javanese",iso6392B:"jav",iso6391:"jv"},{name:"Lojban",iso6392B:"jbo"},{name:"Japanese",iso6392B:"jpn",iso6391:"ja"},{name:"Judeo-Persian",iso6392B:"jpr"},{name:"Judeo-Arabic",iso6392B:"jrb"},{name:"Kara-Kalpak",iso6392B:"kaa"},{name:"Kabyle",iso6392B:"kab"},{name:"Kachin; Jingpho",iso6392B:"kac"},{name:"Kalaallisut; Greenlandic",iso6392B:"kal",iso6391:"kl"},{name:"Kamba",iso6392B:"kam"},{name:"Kannada",iso6392B:"kan",iso6391:"kn"},{name:"Karen languages",iso6392B:"kar"},{name:"Kashmiri",iso6392B:"kas",iso6391:"ks"},{name:"Kanuri",iso6392B:"kau",iso6391:"kr"},{name:"Kawi",iso6392B:"kaw"},{name:"Kazakh",iso6392B:"kaz",iso6391:"kk"},{name:"Kabardian",iso6392B:"kbd"},{name:"Khasi",iso6392B:"kha"},{name:"Khoisan languages",iso6392B:"khi"},{name:"Central Khmer",iso6392B:"khm",iso6391:"km"},{name:"Khotanese; Sakan",iso6392B:"kho"},{name:"Kikuyu; Gikuyu",iso6392B:"kik",iso6391:"ki"},{name:"Kinyarwanda",iso6392B:"kin",iso6391:"rw"},{name:"Kirghiz; Kyrgyz",iso6392B:"kir",iso6391:"ky"},{name:"Kimbundu",iso6392B:"kmb"},{name:"Konkani",iso6392B:"kok"},{name:"Komi",iso6392B:"kom",iso6391:"kv"},{name:"Kongo",iso6392B:"kon",iso6391:"kg"},{name:"Korean",iso6392B:"kor",iso6391:"ko"},{name:"Kosraean",iso6392B:"kos"},{name:"Kpelle",iso6392B:"kpe"},{name:"Karachay-Balkar",iso6392B:"krc"},{name:"Karelian",iso6392B:"krl"},{name:"Kru languages",iso6392B:"kro"},{name:"Kurukh",iso6392B:"kru"},{name:"Kuanyama; Kwanyama",iso6392B:"kua",iso6391:"kj"},{name:"Kumyk",iso6392B:"kum"},{name:"Kurdish",iso6392B:"kur",iso6391:"ku"},{name:"Kutenai",iso6392B:"kut"},{name:"Ladino",iso6392B:"lad"},{name:"Lahnda",iso6392B:"lah"},{name:"Lamba",iso6392B:"lam"},{name:"Lao",iso6392B:"lao",iso6391:"lo"},{name:"Latin",iso6392B:"lat",iso6391:"la"},{name:"Latvian",iso6392B:"lav",iso6391:"lv"},{name:"Lezghian",iso6392B:"lez"},{name:"Limburgan; Limburger; Limburgish",iso6392B:"lim",iso6391:"li"},{name:"Lingala",iso6392B:"lin",iso6391:"ln"},{name:"Lithuanian",iso6392B:"lit",iso6391:"lt"},{name:"Mongo",iso6392B:"lol"},{name:"Lozi",iso6392B:"loz"},{name:"Luxembourgish; Letzeburgesch",iso6392B:"ltz",iso6391:"lb"},{name:"Luba-Lulua",iso6392B:"lua"},{name:"Luba-Katanga",iso6392B:"lub",iso6391:"lu"},{name:"Ganda",iso6392B:"lug",iso6391:"lg"},{name:"Luiseno",iso6392B:"lui"},{name:"Lunda",iso6392B:"lun"},{name:"Luo (Kenya and Tanzania)",iso6392B:"luo"},{name:"Lushai",iso6392B:"lus"},{name:"Macedonian",iso6392B:"mac",iso6392T:"mkd",iso6391:"mk"},{name:"Madurese",iso6392B:"mad"},{name:"Magahi",iso6392B:"mag"},{name:"Marshallese",iso6392B:"mah",iso6391:"mh"},{name:"Maithili",iso6392B:"mai"},{name:"Makasar",iso6392B:"mak"},{name:"Malayalam",iso6392B:"mal",iso6391:"ml"},{name:"Mandingo",iso6392B:"man"},{name:"Maori",iso6392B:"mao",iso6392T:"mri",iso6391:"mi"},{name:"Austronesian languages",iso6392B:"map"},{name:"Marathi",iso6392B:"mar",iso6391:"mr"},{name:"Masai",iso6392B:"mas"},{name:"Malay",iso6392B:"may",iso6392T:"msa",iso6391:"ms"},{name:"Moksha",iso6392B:"mdf"},{name:"Mandar",iso6392B:"mdr"},{name:"Mende",iso6392B:"men"},{name:"Irish, Middle (900-1200)",iso6392B:"mga"},{name:"Mi'kmaq; Micmac",iso6392B:"mic"},{name:"Minangkabau",iso6392B:"min"},{name:"Uncoded languages",iso6392B:"mis"},{name:"Mon-Khmer languages",iso6392B:"mkh"},{name:"Malagasy",iso6392B:"mlg",iso6391:"mg"},{name:"Maltese",iso6392B:"mlt",iso6391:"mt"},{name:"Manchu",iso6392B:"mnc"},{name:"Manipuri",iso6392B:"mni"},{name:"Manobo languages",iso6392B:"mno"},{name:"Mohawk",iso6392B:"moh"},{name:"Mongolian",iso6392B:"mon",iso6391:"mn"},{name:"Mossi",iso6392B:"mos"},{name:"Multiple languages",iso6392B:"mul"},{name:"Munda languages",iso6392B:"mun"},{name:"Creek",iso6392B:"mus"},{name:"Mirandese",iso6392B:"mwl"},{name:"Marwari",iso6392B:"mwr"},{name:"Mayan languages",iso6392B:"myn"},{name:"Erzya",iso6392B:"myv"},{name:"Nahuatl languages",iso6392B:"nah"},{name:"North American Indian languages",iso6392B:"nai"},{name:"Neapolitan",iso6392B:"nap"},{name:"Nauru",iso6392B:"nau",iso6391:"na"},{name:"Navajo; Navaho",iso6392B:"nav",iso6391:"nv"},{name:"Ndebele, South; South Ndebele",iso6392B:"nbl",iso6391:"nr"},{name:"Ndebele, North; North Ndebele",iso6392B:"nde",iso6391:"nd"},{name:"Ndonga",iso6392B:"ndo",iso6391:"ng"},{name:"Low German; Low Saxon; German, Low; Saxon, Low",iso6392B:"nds"},{name:"Nepali",iso6392B:"nep",iso6391:"ne"},{name:"Nepal Bhasa; Newari",iso6392B:"new"},{name:"Nias",iso6392B:"nia"},{name:"Niger-Kordofanian languages",iso6392B:"nic"},{name:"Niuean",iso6392B:"niu"},{name:"Norwegian Nynorsk; Nynorsk, Norwegian",iso6392B:"nno",iso6391:"nn"},{name:"Bokml, Norwegian; Norwegian Bokml",iso6392B:"nob",iso6391:"nb"},{name:"Nogai",iso6392B:"nog"},{name:"Norse, Old",iso6392B:"non"},{name:"Norwegian",iso6392B:"nor",iso6391:"no"},{name:"N'Ko",iso6392B:"nqo"},{name:"Pedi; Sepedi; Northern Sotho",iso6392B:"nso"},{name:"Nubian languages",iso6392B:"nub"},{name:"Classical Newari; Old Newari; Classical Nepal Bhasa",iso6392B:"nwc"},{name:"Chichewa; Chewa; Nyanja",iso6392B:"nya",iso6391:"ny"},{name:"Nyamwezi",iso6392B:"nym"},{name:"Nyankole",iso6392B:"nyn"},{name:"Nyoro",iso6392B:"nyo"},{name:"Nzima",iso6392B:"nzi"},{name:"Occitan (post 1500)",iso6392B:"oci",iso6391:"oc"},{name:"Ojibwa",iso6392B:"oji",iso6391:"oj"},{name:"Oriya",iso6392B:"ori",iso6391:"or"},{name:"Oromo",iso6392B:"orm",iso6391:"om"},{name:"Osage",iso6392B:"osa"},{name:"Ossetian; Ossetic",iso6392B:"oss",iso6391:"os"},{name:"Turkish, Ottoman (1500-1928)",iso6392B:"ota"},{name:"Otomian languages",iso6392B:"oto"},{name:"Papuan languages",iso6392B:"paa"},{name:"Pangasinan",iso6392B:"pag"},{name:"Pahlavi",iso6392B:"pal"},{name:"Pampanga; Kapampangan",iso6392B:"pam"},{name:"Panjabi; Punjabi",iso6392B:"pan",iso6391:"pa"},{name:"Papiamento",iso6392B:"pap"},{name:"Palauan",iso6392B:"pau"},{name:"Persian, Old (ca.600-400 B.C.)",iso6392B:"peo"},{name:"Persian",iso6392B:"per",iso6392T:"fas",iso6391:"fa"},{name:"Philippine languages",iso6392B:"phi"},{name:"Phoenician",iso6392B:"phn"},{name:"Pali",iso6392B:"pli",iso6391:"pi"},{name:"Polish",iso6392B:"pol",iso6391:"pl"},{name:"Pohnpeian",iso6392B:"pon"},{name:"Portuguese",iso6392B:"por",iso6391:"pt"},{name:"Prakrit languages",iso6392B:"pra"},{name:"Provenal, Old (to 1500); Occitan, Old (to 1500)",iso6392B:"pro"},{name:"Pushto; Pashto",iso6392B:"pus",iso6391:"ps"},{name:"Reserved for local use",iso6392B:"qaa-qtz"},{name:"Quechua",iso6392B:"que",iso6391:"qu"},{name:"Rajasthani",iso6392B:"raj"},{name:"Rapanui",iso6392B:"rap"},{name:"Rarotongan; Cook Islands Maori",iso6392B:"rar"},{name:"Romance languages",iso6392B:"roa"},{name:"Romansh",iso6392B:"roh",iso6391:"rm"},{name:"Romany",iso6392B:"rom"},{name:"Romanian; Moldavian; Moldovan",iso6392B:"rum",iso6392T:"ron",iso6391:"ro"},{name:"Rundi",iso6392B:"run",iso6391:"rn"},{name:"Aromanian; Arumanian; Macedo-Romanian",iso6392B:"rup"},{name:"Russian",iso6392B:"rus",iso6391:"ru"},{name:"Sandawe",iso6392B:"sad"},{name:"Sango",iso6392B:"sag",iso6391:"sg"},{name:"Yakut",iso6392B:"sah"},{name:"South American Indian languages",iso6392B:"sai"},{name:"Salishan languages",iso6392B:"sal"},{name:"Samaritan Aramaic",iso6392B:"sam"},{name:"Sanskrit",iso6392B:"san",iso6391:"sa"},{name:"Sasak",iso6392B:"sas"},{name:"Santali",iso6392B:"sat"},{name:"Sicilian",iso6392B:"scn"},{name:"Scots",iso6392B:"sco"},{name:"Selkup",iso6392B:"sel"},{name:"Semitic languages",iso6392B:"sem"},{name:"Irish, Old (to 900)",iso6392B:"sga"},{name:"Sign Languages",iso6392B:"sgn"},{name:"Shan",iso6392B:"shn"},{name:"Sidamo",iso6392B:"sid"},{name:"Sinhala; Sinhalese",iso6392B:"sin",iso6391:"si"},{name:"Siouan languages",iso6392B:"sio"},{name:"Sino-Tibetan languages",iso6392B:"sit"},{name:"Slavic languages",iso6392B:"sla"},{name:"Slovak",iso6392B:"slo",iso6392T:"slk",iso6391:"sk"},{name:"Slovenian",iso6392B:"slv",iso6391:"sl"},{name:"Southern Sami",iso6392B:"sma"},{name:"Northern Sami",iso6392B:"sme",iso6391:"se"},{name:"Sami languages",iso6392B:"smi"},{name:"Lule Sami",iso6392B:"smj"},{name:"Inari Sami",iso6392B:"smn"},{name:"Samoan",iso6392B:"smo",iso6391:"sm"},{name:"Skolt Sami",iso6392B:"sms"},{name:"Shona",iso6392B:"sna",iso6391:"sn"},{name:"Sindhi",iso6392B:"snd",iso6391:"sd"},{name:"Soninke",iso6392B:"snk"},{name:"Sogdian",iso6392B:"sog"},{name:"Somali",iso6392B:"som",iso6391:"so"},{name:"Songhai languages",iso6392B:"son"},{name:"Sotho, Southern",iso6392B:"sot",iso6391:"st"},{name:"Spanish; Castilian",iso6392B:"spa",iso6391:"es"},{name:"Sardinian",iso6392B:"srd",iso6391:"sc"},{name:"Sranan Tongo",iso6392B:"srn"},{name:"Serbian",iso6392B:"srp",iso6391:"sr"},{name:"Serer",iso6392B:"srr"},{name:"Nilo-Saharan languages",iso6392B:"ssa"},{name:"Swati",iso6392B:"ssw",iso6391:"ss"},{name:"Sukuma",iso6392B:"suk"},{name:"Sundanese",iso6392B:"sun",iso6391:"su"},{name:"Susu",iso6392B:"sus"},{name:"Sumerian",iso6392B:"sux"},{name:"Swahili",iso6392B:"swa",iso6391:"sw"},{name:"Swedish",iso6392B:"swe",iso6391:"sv"},{name:"Classical Syriac",iso6392B:"syc"},{name:"Syriac",iso6392B:"syr"},{name:"Tahitian",iso6392B:"tah",iso6391:"ty"},{name:"Tai languages",iso6392B:"tai"},{name:"Tamil",iso6392B:"tam",iso6391:"ta"},{name:"Tatar",iso6392B:"tat",iso6391:"tt"},{name:"Telugu",iso6392B:"tel",iso6391:"te"},{name:"Timne",iso6392B:"tem"},{name:"Tereno",iso6392B:"ter"},{name:"Tetum",iso6392B:"tet"},{name:"Tajik",iso6392B:"tgk",iso6391:"tg"},{name:"Tagalog",iso6392B:"tgl",iso6391:"tl"},{name:"Thai",iso6392B:"tha",iso6391:"th"},{name:"Tibetan",iso6392B:"tib",iso6392T:"bod",iso6391:"bo"},{name:"Tigre",iso6392B:"tig"},{name:"Tigrinya",iso6392B:"tir",iso6391:"ti"},{name:"Tiv",iso6392B:"tiv"},{name:"Tokelau",iso6392B:"tkl"},{name:"Klingon; tlhIngan-Hol",iso6392B:"tlh"},{name:"Tlingit",iso6392B:"tli"},{name:"Tamashek",iso6392B:"tmh"},{name:"Tonga (Nyasa)",iso6392B:"tog"},{name:"Tonga (Tonga Islands)",iso6392B:"ton",iso6391:"to"},{name:"Tok Pisin",iso6392B:"tpi"},{name:"Tsimshian",iso6392B:"tsi"},{name:"Tswana",iso6392B:"tsn",iso6391:"tn"},{name:"Tsonga",iso6392B:"tso",iso6391:"ts"},{name:"Turkmen",iso6392B:"tuk",iso6391:"tk"},{name:"Tumbuka",iso6392B:"tum"},{name:"Tupi languages",iso6392B:"tup"},{name:"Turkish",iso6392B:"tur",iso6391:"tr"},{name:"Altaic languages",iso6392B:"tut"},{name:"Tuvalu",iso6392B:"tvl"},{name:"Twi",iso6392B:"twi",iso6391:"tw"},{name:"Tuvinian",iso6392B:"tyv"},{name:"Udmurt",iso6392B:"udm"},{name:"Ugaritic",iso6392B:"uga"},{name:"Uighur; Uyghur",iso6392B:"uig",iso6391:"ug"},{name:"Ukrainian",iso6392B:"ukr",iso6391:"uk"},{name:"Umbundu",iso6392B:"umb"},{name:"Undetermined",iso6392B:"und"},{name:"Urdu",iso6392B:"urd",iso6391:"ur"},{name:"Uzbek",iso6392B:"uzb",iso6391:"uz"},{name:"Vai",iso6392B:"vai"},{name:"Venda",iso6392B:"ven",iso6391:"ve"},{name:"Vietnamese",iso6392B:"vie",iso6391:"vi"},{name:"Volapk",iso6392B:"vol",iso6391:"vo"},{name:"Votic",iso6392B:"vot"},{name:"Wakashan languages",iso6392B:"wak"},{name:"Wolaitta; Wolaytta",iso6392B:"wal"},{name:"Waray",iso6392B:"war"},{name:"Washo",iso6392B:"was"},{name:"Welsh",iso6392B:"wel",iso6392T:"cym",iso6391:"cy"},{name:"Sorbian languages",iso6392B:"wen"},{name:"Walloon",iso6392B:"wln",iso6391:"wa"},{name:"Wolof",iso6392B:"wol",iso6391:"wo"},{name:"Kalmyk; Oirat",iso6392B:"xal"},{name:"Xhosa",iso6392B:"xho",iso6391:"xh"},{name:"Yao",iso6392B:"yao"},{name:"Yapese",iso6392B:"yap"},{name:"Yiddish",iso6392B:"yid",iso6391:"yi"},{name:"Yoruba",iso6392B:"yor",iso6391:"yo"},{name:"Yupik languages",iso6392B:"ypk"},{name:"Zapotec",iso6392B:"zap"},{name:"Blissymbols; Blissymbolics; Bliss",iso6392B:"zbl"},{name:"Zenaga",iso6392B:"zen"},{name:"Standard Moroccan Tamazight",iso6392B:"zgh"},{name:"Zhuang; Chuang",iso6392B:"zha",iso6391:"za"},{name:"Zande languages",iso6392B:"znd"},{name:"Zulu",iso6392B:"zul",iso6391:"zu"},{name:"Zuni",iso6392B:"zun"},{name:"No linguistic content; Not applicable",iso6392B:"zxx"},{name:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",iso6392B:"zza"}],language_codes={},home_page=(temps.map(function(e){var t;void 0!==e.iso6391&&(t=e.iso6391,language_codes[t]=e.name),void 0!==e.iso6392B&&(t=e.iso6392B,language_codes[t]=e.name),void 0!==e.iso6392T&&(t=e.iso6392T,language_codes[t]=e.name)}),{initiated:!(language_codes.tu="Turkish"),keys:{focused_part:"menu_selection",menu_selection:0,bottom_menu_selection:0},prev_focus_dom:null,menu_doms:$("#home-page .menu-item-container"),bottom_menu_doms:$("#home-page .home-bottom-item"),isLiveFavoriteAllowed:!0,initialized:!1,openedModal:!1,dataLoaded:{live:!1,vod:!1,series:!1},init:function(e){this.setLiveFavoritesChoice(),account_page.fillAccountDetails(),this.showCurrentWeather(),this.prev_focus_dom=null,turn_off_page.prev_route="home-page","turn-off-page"!==current_route&&(current_route="home-page"),$("#loading-page").addClass("hide"),$("#login-container").hide(),$("#app").show(),$("#home-page").removeClass("hide");var i="";languages?languages.map(function(e,t){i+='        <div           class="setting-select-option"          data-word_code="'+e.code+'"          data-language="'+e.code+'"          onmouseenter="settings_page.hoverChangeLanguageOption('+t+', true)"          onclick="settings_page.handleMenuClick()"        >          '+e.name+"        </div>"}):console.error("Languages not found"),$("#settings-languages-options").html(i),settings_page.change_language_items=$("#change-language-settings .setting-select-option"),settings_page.doms_translated=$("*").filter(function(){return void 0!==$(this).data("word_code")}),settings_page.changeDomsLanguage(),this.hoverMainMenu(0),this.checkForPlaylistExpirationDate(),this.fillCategoriesCount(),this.updateProxyState(),isPlaylistWorking||this.hoverMainMenu(4)},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":turn_off_page.init(current_route);break;case"notifications_modal":this.hideNotificationsModal();break;default:this.hoverMainMenu(e.menu_selection)}},exit:function(){$("#home-page").addClass("hide")},reEnter:function(){this.hoverMainMenu(this.keys.menu_selection),$("#home-page").removeClass("hide"),current_route="home-page"},updateProxyState:function(){var e;settings.smart_proxy_connection_state?($($(".home-proxy-info-container")[0]).show(),e=proxyAvailableServers[settings.smart_proxy_region].Countries[settings.smart_proxy_country],$("#country-name").text(e.CountryName),$("#proxy-country-img").attr("src",e.CountryImage)):$($(".home-proxy-info-container")[0]).hide()},fillCategoriesCount:function(){isPlaylistWorking?parseInt(localStorage.getItem(storage_id+"load_on_demand"))?(LiveModel.categories.length?$("#live-categories-count").text(LiveModel.categories.length+" Categories"):$("#live-categories-count").text("Press to Load Content"),VodModel.categories.length?$("#movies-categories-count").text(VodModel.categories.length+" Categories"):$("#movies-categories-count").text("Press to Load Content"),SeriesModel.categories.length?$("#series-categories-count").text(SeriesModel.categories.length+" Categories"):$("#series-categories-count").text("Press to Load Content")):($("#live-categories-count").text(LiveModel.categories.length+" Categories"),$("#movies-categories-count").text(VodModel.categories.length+" Categories"),$("#series-categories-count").text(SeriesModel.categories.length+" Categories")):($("#live-categories-count").text(""),$("#movies-categories-count").text(""),$("#series-categories-count").text(""))},showCurrentWeather:function(){weatherNow&&(e=Math.floor(parseInt(weatherNow.temp_c))+"",t="https:"+weatherNow.condition.icon);var e,t,i=utilities.getCurrentDateTimeFormatted();weatherCountry&&weatherCity&&$("#weather-country").text(weatherCity+", "+weatherCountry+"."),$("#current-date").text(i),$("#current-weather-icon").attr("src",t),$("#current-weather-degree").text(e)},requestMovies:function(t){showLoader(!0);var e,i,s=this,o=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=";switch(t){case"live":i="get_live_categories",e="get_live_streams";break;case"vod":i="get_vod_categories",e="get_vod_streams";break;case"series":i="get_series_categories",e="get_series"}var a=api({method:"get",url:o+i,success:function(e){!function(e){switch(t){case"live":LiveModel.setCategories(e);break;case"vod":VodModel.setCategories(e);break;case"series":SeriesModel.setCategories(e)}}(e)}}),o=api({method:"get",url:o+e,success:function(e){!function(e){switch(t){case"live":LiveModel.setMovies(e);break;case"vod":VodModel.setMovies(e);break;case"series":SeriesModel.setMovies(e)}}(e)}});$.when(a,o).then(function(){try{switch(t){case"live":LiveModel.insertMoviesToCategories();break;case"vod":VodModel.insertMoviesToCategories();break;case"series":SeriesModel.insertMoviesToCategories()}}catch(e){console.log("Error loading data",e),showToast("Error","Data loading failed")}}).then(function(){console.log("Loaded successfully for",t),showLoader(!1),s.fillCategoriesCount(),s.initPage(t)}).fail(function(){showLoader(!1),showToast("Failed","Data loading failed"),console.log("Failed to load data")})},initPage:function(e){switch(e){case"live":this.dataLoaded.live=!0,channel_page.init("home-page",null);break;case"vod":this.dataLoaded.vod=!0,vod_series_page.init("vod");break;case"series":this.dataLoaded.series=!0,vod_series_page.init("series")}},clickMainMenu:function(){var e=parseInt(localStorage.getItem(storage_id+"load_on_demand"));try{media_player.close()}catch(e){}switch(this.keys.menu_selection){case 0:isPlaylistWorking?e&&!this.dataLoaded.live?this.requestMovies("live"):this.initPage("live"):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 1:isPlaylistWorking?e&&!this.dataLoaded.vod?this.requestMovies("vod"):this.initPage("vod"):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 2:isPlaylistWorking?e&&!this.dataLoaded.series?this.requestMovies("series"):this.initPage("series"):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 3:isPlaylistWorking?catchup_page.init():showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 4:playlist_page.init("home-page");break;case 5:isPlaylistWorking?channel_page.init("home-page",null,!0):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 6:layout_page.init("home-page")}},setLiveFavoritesChoice:function(){"off"==localStorage.getItem(storage_id+"home_favorites_choice")?(this.isLiveFavoriteAllowed=!1,$(this.bottom_menu_doms[2]).hide()):(this.isLiveFavoriteAllowed=!0,$(this.bottom_menu_doms[2]).show())},hoverMainMenu:function(e,t){t&&this.openedModal||((t=this.keys).focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.bottom_menu_doms).removeClass("active"),$(".home-bottom-menu-item-tooltip").removeClass("visible"),$(".home-page-bottom-info-container").removeClass("active"),$(this.menu_doms[e]).addClass("active"))},hoverAccountInfo:function(e){e&&this.openedModal||(this.keys.focused_part="account_info_selection",$(this.menu_doms).removeClass("active"),$(this.bottom_menu_doms).removeClass("active"),$(".home-bottom-menu-item-tooltip").removeClass("visible"),$(".home-page-bottom-info-container").addClass("active"))},addNotification:function(e){console.log("NOTIFICATION TO ADD",e),e.message&&(e.title||(e.title="App System"),e.date||(e.date=utilities.getCurrentDateTimeFormatted()),e='      <div class="notifications-modal-item">        <div class="notifications-modal-item-header">          <div class="notifications-modal-item-sender">'+e.title+'</div>          <div class="notifications-modal-item-date">'+e.date+'</div>        </div>        <div class="notifications-modal-item-body">'+e.message+"</div>      </div>    ",$("#notifications-modal-body").append(e),$(".home-bottom-item.notifications").addClass("has-items"),$(".empty-notifications").hide())},showNotificationsModal:function(){this.keys.focused_part="notifications_modal",this.openedModal="notifications",$("#notifications-modal").addClass("open")},hideNotificationsModal:function(){this.keys.focused_part="bottom_menu_selection",this.openedModal=null,$("#notifications-modal").removeClass("open"),$(".home-bottom-item.notifications").removeClass("has-items")},clickBottomMenu:function(){switch(this.keys.bottom_menu_selection){case 0:this.showNotificationsModal();break;case 1:playlist_page.init("home-page"),playlist_page.hoverAddPlaylistBtn(),playlist_page.handleMenuClick(),playlist_edit_page.handleMenusUpDown(-1),playlist_edit_page.handleMenuLeftRight(1),playlist_edit_page.handleMenuClick(1),playlist_edit_page.handleMenusUpDown(1);break;case 2:isPlaylistWorking?catchup_page.init():showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 3:isPlaylistWorking?channel_page.init("home-page",null,!0):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 4:search_page.init("home-page");break;case 5:account_page.init("home-page");break;case 6:playlist_page.init("home-page");break;case 7:settings_page.init(),settings_page.hoverSettingsItem(11),settings_page.handleMenuClick();break;case 8:settings_page.init();break;case 9:window.location.reload()}},hoverBottomMenu:function(e,t){t&&this.openedModal||((t=this.keys).focused_part="bottom_menu_selection",t.bottom_menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.bottom_menu_doms).removeClass("active"),$(this.bottom_menu_doms[e]).addClass("active"),$(".home-page-bottom-info-container").removeClass("active"),$(".home-bottom-menu-item-tooltip").removeClass("visible"),$(this.bottom_menu_doms[e]).find(".home-bottom-menu-item-tooltip").addClass("visible"))},updatePlaylistExpiryDays:function(e){switch(e){case 0:$(".playlist-will-expire-in").text("a few hours");break;case 1:$(".playlist-will-expire-in").text(e+" day");break;case null:$(".playlist-will-expire-in").text("Unknown");break;default:$(".playlist-will-expire-in").text(e+" days")}},checkForPlaylistExpirationDate:function(){if("Expired"==playlist_status)this.updatePlaylistExpiryDays(null);else if(playlist_expire_date)try{console.log("####### Playlist expiry date",playlist_expire_date);var e=utilities.convertToTimestamp(playlist_expire_date),t=utilities.timestampDiffInDays(e);console.log("Playlist will expire in",t),this.updatePlaylistExpiryDays(t),t<=5&&0<=t&&this.addNotification({message:"Your playlist will expire in "+t+" days. Please contact your provider to extend it and continue enjoying your service."})}catch(e){console.log("Error checking for playlist expiration date",e),this.updatePlaylistExpiryDays(null)}else this.updatePlaylistExpiryDays(null)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$(this.menu_doms[e.menu_selection]).trigger("click");break;case"bottom_menu_selection":this.clickBottomMenu(this.bottom_menu_doms);break;case"account_info_selection":account_page.init("home-page")}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":e<0&&this.hoverBottomMenu(t.bottom_menu_selection);break;case"bottom_menu_selection":0<e&&this.hoverAccountInfo();break;case"account_info_selection":e<0&&this.hoverBottomMenu(t.bottom_menu_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length?(t.menu_selection=this.menu_doms.length-1,this.hoverAccountInfo()):this.hoverMainMenu(t.menu_selection);break;case"bottom_menu_selection":t.bottom_menu_selection+=e,t.bottom_menu_selection<0&&(t.bottom_menu_selection=0),t.bottom_menu_selection>=this.bottom_menu_doms.length&&(t.bottom_menu_selection=this.bottom_menu_doms.length-1),this.isLiveFavoriteAllowed||2!=t.bottom_menu_selection||(t.bottom_menu_selection+=e),this.hoverBottomMenu(t.bottom_menu_selection);break;case"account_info_selection":e<0&&this.hoverMainMenu(2)}},HandleKey:function(e){this.keys;if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}),playlist_edit_page={initiated:!1,keys:{focused_part:"playlist_edit_selection",playlist_edit_selection:0,code_playlist_edit_selection:0,playlist_tabs_selection:0},current_playlist_type:0,playlist_edit_doms:$(".playlist-edit-item"),code_playlist_edit_doms:$(".code-playlist-edit-item"),playlist_tabs_doms:$(".add-playlist-tab"),back_btn_dom:null,playlist:null,is_loading:!1,tried_panel_indexes:[],prev_route:"",init:function(e){this.prev_route=e,this.tried_panel_indexes=[],this.playlist=null,$("#home-page").addClass("hide"),$("#playlist-edit-page").removeClass("hide"),$("#playlist-edit-error-message").hide();$(this.playlist_edit_doms[0]).val(""),$(this.playlist_edit_doms[1]).val(""),$(this.playlist_edit_doms[2]).val(""),$(this.playlist_edit_doms[3]).val(""),this.hoverPlaylistEditItem(0),current_route="playlist-edit-page"},savePlaylist:function(){var t,i,s,o,a,e,n;0==this.current_playlist_type?(t=$(this.playlist_edit_doms[0]).val(),i=$(this.playlist_edit_doms[1]).val(),s=$(this.playlist_edit_doms[2]).val(),o=$(this.playlist_edit_doms[3]).val(),t?i?s?o?($("#playlist-edit-error-message").slideUp(),showLoader(!0),this.is_loading=!0,a=this,api({method:"get",url:i+"/player_api.php?username="+s+"&password="+o,success:function(e){!e||!e.user_info||0==(e=e.user_info).auth||e.status&&("Expired"===e.status||"Banned"===e.status)?a.showPlaylistErrorMessage():(e={url:i+="/get.php?username="+s+"&password="+o+"&type=m3u&output=hls",playlist_name:t,mac_address:mac_address,app_type:platform},a.updatePlaylistWithServer(e))},error:function(){a.showPlaylistErrorMessage()}})):$("#playlist-edit-error-message").text("Sorry, password is required").slideDown():$("#playlist-edit-error-message").text("Sorry, username is required").slideDown():$("#playlist-edit-error-message").text("Sorry, playlist url is required").slideDown():$("#playlist-edit-error-message").text("Sorry, playlist name is required").slideDown()):1==this.current_playlist_type&&(n=$(this.code_playlist_edit_doms[1]).val(),e=$(this.code_playlist_edit_doms[0]).val()||n,n?(n={playlist_type:"code",playlist_code:n,playlist_name:e,mac_address:mac_address,app_type:platform},console.log("Playlist data sent to the server",n),this.updatePlaylistWithServer(n)):$("#playlist-edit-error-message").text("Sorry, code is required").slideDown())},showPlaylistErrorMessage:function(){showLoader(!1),this.is_loading=!1,$("#playlist-edit-error-message").html("Sorry, Your playlist is not working<br>Please check your playlist and try again").slideDown()},updatePlaylistWithServer:function(e){var t=encryptRequest(e),i=pickPanelUrl(this.tried_panel_indexes),s=i[1],o=i[0],a=this;api({type:"POST",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+s+"/add_playlist",data:{data:t},success:function(e){a.tried_panel_indexes=[];e=decryptResponse(e);a.playListSaved(e,!0),console.log("Server response",e)},error:function(){a.tried_panel_indexes.push(o),a.tried_panel_indexes.length<panel_urls.length&&a.updatePlaylistWithServer(e)}})},playListSaved:function(e,t){playlist_urls.push(e),saveData("playlist_urls",playlist_urls),showLoader(!1),this.is_loading=!1;var i=playlist_urls.length-1,i='<div class="playlist-item-container"                onmouseenter="playlist_page.hoverPlayListItem('+i+')"                onclick="playlist_page.changePlaylist('+i+')"            >                <div class="playlist-item-wrapper">                    <img class="playlist-item-logo" src="'+HOST+'app_src_min/images/logo.png">                     <span class="playlist-name">'+e.playlist_name+'</span><div class="playlist-state"><i class="fa fa-play"></i></div></div>         </div>';$("#playlist-items-container").append(i),playlist_page.playlist_doms=$(".playlist-item-wrapper"),this.goBack()},updateInputs:function(){switch(this.current_playlist_type){case 0:$("#add-xc-playlist-inputs-container").show(),$("#add-code-playlist-inputs-container").hide();break;case 1:$("#add-xc-playlist-inputs-container").hide(),$("#add-code-playlist-inputs-container").show()}$("#playlist-edit-error-message").text("Sorry, code is required").slideUp(),$(this.playlist_tabs_doms).removeClass("current"),$(this.playlist_tabs_doms[this.current_playlist_type]).addClass("current")},hoverPlaylistEditItem:function(e){$(this.playlist_tabs_doms).removeClass("active"),$("#playlist-submit-btn").removeClass("active");var t=this.keys;switch(this.current_playlist_type){case 0:t.focused_part="playlist_edit_selection",$(this.playlist_edit_doms).removeClass("active"),t.playlist_edit_selection=e,$(this.playlist_edit_doms[e]).addClass("active");break;case 1:t.focused_part="code_playlist_edit_selection",$(this.code_playlist_edit_doms).removeClass("active"),t.code_playlist_edit_selection=e,$(this.code_playlist_edit_doms[e]).addClass("active")}},hoverPlaylistTabItem:function(e){$(this.playlist_edit_doms).removeClass("active"),$(this.code_playlist_edit_doms).removeClass("active"),$("#playlist-submit-btn").removeClass("active");var t=this.keys;t.focused_part="playlist_tabs_selection",t.playlist_tabs_selection=e,$(this.playlist_tabs_doms).removeClass("active"),$(this.playlist_tabs_doms[e]).addClass("active")},hoverPlaylistSaveBtn:function(){$(this.playlist_edit_doms).removeClass("active"),$(this.code_playlist_edit_doms).removeClass("active"),this.keys.focused_part="playlist_submit_btn",$("#playlist-submit-btn").addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"playlist_edit_selection":e.playlist_edit_selection<4?($(this.playlist_edit_doms[e.playlist_edit_selection]).focus(),setSelectionRange(this.playlist_edit_doms[e.playlist_edit_selection])):4==e.playlist_edit_selection?this.savePlaylist():this.goBack();break;case"code_playlist_edit_selection":e.code_playlist_edit_selection<2&&($(this.code_playlist_edit_doms[e.code_playlist_edit_selection]).focus(),setSelectionRange(this.code_playlist_edit_doms[e.code_playlist_edit_selection]));break;case"playlist_tabs_selection":this.current_playlist_type=this.keys.playlist_tabs_selection,this.updateInputs();break;case"playlist_submit_btn":this.savePlaylist()}},handleMenuLeftRight:function(e){var t=this.keys;"playlist_tabs_selection"===t.focused_part&&(t.playlist_tabs_selection+=e,t.playlist_tabs_selection<0?t.playlist_tabs_selection=0:t.playlist_tabs_selection>=this.playlist_tabs_doms.length&&(t.playlist_tabs_selection=this.playlist_tabs_doms.length-1),this.hoverPlaylistTabItem(t.playlist_tabs_selection))},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"playlist_tabs_selection":0<e&&this.hoverPlaylistEditItem(0);break;case"playlist_edit_selection":t.playlist_edit_selection+=e,t.playlist_edit_selection<0?(t.playlist_edit_selection=0,this.hoverPlaylistTabItem(t.playlist_tabs_selection)):4<=t.playlist_edit_selection?(t.playlist_edit_selection=3,this.hoverPlaylistSaveBtn()):this.hoverPlaylistEditItem(t.playlist_edit_selection);break;case"code_playlist_edit_selection":t.code_playlist_edit_selection+=e,t.code_playlist_edit_selection<0?(t.code_playlist_edit_selection=0,this.hoverPlaylistTabItem(t.playlist_tabs_selection)):2<=t.code_playlist_edit_selection?(t.code_playlist_edit_selection=1,this.hoverPlaylistSaveBtn()):this.hoverPlaylistEditItem(t.code_playlist_edit_selection);break;case"playlist_submit_btn":0<e||(0==this.current_playlist_type?this.hoverPlaylistEditItem(this.playlist_edit_doms.length-1):1==this.current_playlist_type&&this.hoverPlaylistEditItem(this.code_playlist_edit_doms.length-1))}},goBack:function(){$("#playlist-edit-page").addClass("hide"),current_route="playlist-page"},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},playlist_page={initiated:!1,keys:{focused_part:"playlist_selection",playlist_selection:0,color_buttons_selection:0},playlist_doms:[],color_btns_doms:$("#playlists-page .bottom-label-item"),back_btn_dom:null,is_loading:!1,tried_panel_indexes:[],prev_route:"home-page",init:function(e){var s,o;this.prev_route=e,current_route="playlist-page",this.tried_panel_indexes=[],this.initiated||(s="",o=settings.playlist_id,playlist_urls.map(function(e,t){var i=o===e.id;s+='<div class="playlist-item-container"                       onmouseenter="playlist_page.hoverPlayListItem('+t+')"                       onclick="playlist_page.changePlaylist('+t+')"                   >                       <div class="playlist-item-wrapper">                           <span class="playlist-name">'+e.playlist_name+"</span>"+('<div class="playlist-state '+(i?"playing":"")+'">SELECTED</div>')+"</div>                    </div>"}),this.initiated=!0,$("#playlist-items-container").html(s),this.playlist_doms=$(".playlist-item-wrapper"),this.back_btn_dom=$("#playlist-back-icon"),this.keys.playlist_selection=0),home_page.exit(),$("#playlists-page").removeClass("hide"),this.hoverPlayListItem(this.keys.playlist_selection)},hoverColorButton:function(e){var t=this.keys;t.color_buttons_selection=e,t.focused_part="color_buttons_selection",$(this.playlist_doms).removeClass("active"),$("#add-playlist-btn").removeClass("active"),$(this.color_btns_doms).removeClass("active"),$(this.color_btns_doms[e]).addClass("active")},clickColorButton:function(e){switch(e){case 0:this.removePlayList();break;case 1:window.location.reload()}},hoverPlayListItem:function(e){var t=this.keys;t.focused_part="playlist_selection",current_route="playlist-page",$(home_page.menu_doms).removeClass("active"),$("#add-playlist-btn").removeClass("active"),$(this.color_btns_doms).removeClass("active"),t.playlist_selection=e,$(this.playlist_doms).removeClass("active"),$(this.playlist_doms[e]).addClass("active"),moveScrollPosition($("#playlist-items-container"),this.playlist_doms[e],"horizontal",!1)},hoverAddPlaylistBtn:function(){this.keys.focused_part="add_playlist_btn",$(this.playlist_doms).removeClass("active"),$(this.color_btns_doms).removeClass("active"),$("#add-playlist-btn").addClass("active")},changePlaylist:function(e){var t=playlist_urls[e];"playlist-page"==current_route&&($(home_page.menu_doms).removeClass("active"),$(this.playlist_doms).find(".playlist-state").removeClass("playing"),$($(this.playlist_doms[e]).find(".playlist-state")).addClass("playing"),$(this.playlist_doms).removeClass("active"),$("#playlists-page").addClass("hide"),settings.saveSettings("playlist_id",t.id,""),settings.saveSettings("playlist",t,"array"),current_route="login-page",$("#home-page").addClass("hide"),$("#loading-page").removeClass("hide"),login_page.login())},showPlayListEditPage:function(){playlist_edit_page.init("playlist-page")},removePlayList:function(){0!=playlist_urls.length&&(1==playlist_urls.length?showToast("Sorry","You need to have 1 playlist at least"):0<playlist_urls.length&&(showLoader(!0),this.is_loading=!0,this.proceedRemovingWithServer()))},proceedRemovingWithServer:function(){var e=this.keys,e=playlist_urls[e.playlist_selection],e=encryptRequest({mac_address:mac_address,app_type:platform,id:e.id}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],o=this;api({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+i+"/remove_playlist",data:{data:e},success:function(e){o.tried_panel_indexes=[],o.playlistRemoved(!0)},error:function(){o.tried_panel_indexes.push(s),o.tried_panel_indexes.length<panel_urls.length?o.proceedRemovingWithServer():o.playlistRemoved(!1)}})},playlistRemoved:function(e){var t=this.keys,i=playlist_urls[t.playlist_selection].id,i=(playlist_urls.splice(t.playlist_selection,1),settings.playlist_id===i&&(settings.saveSettings("playlist_id","",""),settings.saveSettings("playlist",{},"array")),showLoader(!1),this.is_loading=!1,$(this.playlist_doms[t.playlist_selection]).remove(),t.playlist_selection);this.initiated=!1,this.init(),i>=this.playlist_doms.length&&(i=this.playlist_doms.length-1),this.hoverPlayListItem(i),settings.playlist_id||this.handleMenuClick()},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":$(this.playlist_doms[e.playlist_selection]).trigger("click");break;case"add_playlist_btn":this.showPlayListEditPage();break;case"color_buttons_selection":this.clickColorButton(e.color_buttons_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"playlist_selection":t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection);break;case"color_buttons_selection":t.color_buttons_selection+=e,t.color_buttons_selection<0&&(t.color_buttons_selection=0),t.color_buttons_selection>=this.color_btns_doms.length&&(t.color_buttons_selection=this.color_btns_doms.length-1),this.hoverColorButton(t.color_buttons_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"playlist_selection":0<e&&this.hoverAddPlaylistBtn();break;case"add_playlist_btn":e<0?this.hoverPlayListItem(t.playlist_selection):this.hoverColorButton(t.color_buttons_selection);break;case"color_buttons_selection":e<0&&this.hoverAddPlaylistBtn()}},goBack:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":case"add_playlist_btn":$("#playlists-page").addClass("hide"),$("#home-page").removeClass("hide"),home_page.hoverMainMenu(home_page.keys.menu_selection),current_route="home-page";break;case"color_buttons_selection":this.hoverPlayListItem(e.playlist_selection)}},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-3);break;case tvKey.DOWN:this.handleMenusUpDown(3);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.YELLOW:window.location.reload();break;case tvKey.RED:this.removePlayList()}}},account_page={init:function(){this.fillAccountDetails(),current_route="account-page",$("#account-page").removeClass("hide"),$("#home-page").addClass("hide")},fillAccountDetails:function(){$("#mac-address").text(mac_address.toUpperCase()),$(".mac-address").text(mac_address.toUpperCase()),$("#device-key").text(device_key),$(".device-key").text(device_key),$("#platform").text(platform.toUpperCase()||"Unknown"),1==is_trial||2==is_trial?$("#app-status").text("Active"):$("#app-status").text("Trial"),"lg"==platform?$("#app-version").text(lg_version):$("#app-version").text(samsung_version),$(".playlist-username").text(user_name),$("#playlist-status").text(playlist_status),$("playlist-expire-date").text(expire_date),generateQRCode("https://messitvplayer.com/device/login?mac_address="+mac_address,$("#account-page-login-qr"))},handleMenuClick:function(){},handleMenuLeftRight:function(e){},handleMenusUpDown:function(e){},goBack:function(){$("#account-page").addClass("hide"),$("#home-page").removeClass("hide"),current_route="home-page"},HandleKey:function(e){e.keyCode===tvKey.RETURN&&this.goBack()}};function initKeys(){var e;if("samsung"===platform){var t,i;try{for(i=tizen.tvinputdevice.getSupportedKeys(),t=0;t<i.length;t++)i[t].name,i[t].code,tizen.tvinputdevice.registerKey(i[t].name);tizen.tvinputdevice.unregisterKey("VolumeUp"),tizen.tvinputdevice.unregisterKey("VolumeDown"),tizen.tvinputdevice.unregisterKey("VolumeMute")}catch(e){}e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,RETURN:10009,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}}else"lg"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:461,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}:"vidaa"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072,RETURN:8,PLAY_PAUSE:463,MediaPlayPause:463}:"zeasn"===platform||"titanos"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072,RETURN:8,PLAY_PAUSE:463,MediaPlayPause:179}:"windows"===platform&&(e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:27,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072});window.tvKey=e}function confirmParentPassword(){"home-page"===current_route&&home_page.confirmParentPassword()}function cancelParentPassword(){"home-page"===current_route&&home_page.cancelParentPassword()}var media_player,channel_page={current_channel_id:0,full_screen_video:!1,information_timer:null,progressbar_timer:null,player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],current_category_index:0,category_hover_timer:null,category_hover_timeout:300,channel_hover_timer:null,channel_hover_timeout:300,channel_sidebar_options_timer:null,keys:{focused_part:"category_selection",category_selection:0,channel_selection:0,sidebar_selection:0,aspect_ratio_selection:0,subtitles_selection:0,audio_selection:0,prev_focus:"",video_control:0,color_buttons_selection:0,switch_page_modal_selection:0},category_doms:[],channel_doms:[],switch_page_modal_doms:$(".channel-switch-page-modal-page-item"),video_control_doms:$("#channel-page .video-control-icon-wrapper"),play_icon_index:1,search_items:[],filtered_movies:[],next_programme_timer:null,programmes:[],short_epg_limit_count:30,prev_focus_dom:null,next_channel_timer:null,prev_keyword:"",search_timer:null,rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,rearrange_origin_position:0,show_information:!1,epg_channel_id:null,prev_channel:null,current_category_dom:null,channel_layout:1,is_categories_menu_visible:!1,is_no_categories:!1,fullscreen_sidebar_doms:$(".channel-sidebar-option"),sidebar_aspect_ratio_doms:$("#channel-sidebar-aspect-ratio-options-wrapper .channel-sidebar-suboption"),sidebar_subtitles_doms:$("#channel-sidebar-subtitles-options-wrapper .channel-sidebar-suboption"),sidebar_audio_doms:$("#channel-sidebar-audio-options-wrapper .channel-sidebar-suboption"),last_chosen_aspect_ratio:"stretch",current_subtitle_index:0,current_audio_track_index:0,init:function(e,t,i){this.rearrange_mode=!1,this.prev_focus_dom=null,this.prev_route=e;var e=this.keys,s=(home_page.exit(),$("#channel-page").removeClass("hide"),current_route="channel-page",$("#channel-page .stream-page-title").removeClass("hide"),LiveModel.getCategories(!1,!0)),o=(this.categories=s,""),a=(s.map(function(e,t){o+='<div class="channel-page-category-item"                    onmouseenter="channel_page.hoverCategory(this)"                    onclick="channel_page.handleMenuClick()"                    data-index="'+t+'"                >                    <div class="channel-category-name-wrapper floatTextWrapper">                        <span class="floatText">                            <span class="channel-category-name">'+e.category_name+'</span>                        </span>                    </div>                     <span class="channel-category-movie-counts-wrapper">                        <span class="channel-category-movie-counts">'+e.movies.length+"</span>                        <span class='channel-category-movie-counts-word'> Channels</span>                    </span>                </div>"}),$("#channel-page-categories-container").html(o),this.category_doms=$(".channel-page-category-item"),0);if(t){for(n=0;n<s.length;n++)if(s[n].category_id==t.category_id){a=n;break}}else for(var n=0;n<s.length;n++)if(0<s[n].movies.length){a=n;break}this.current_category_index=-1,e.category_selection=a,this.showInformation(!1),this.hoverCategory(a),this.showCategoryChannels(t),t||this.showInitialChannel(s,i),this.epg_channel_id=null,this.setupCurrentLayout()},goBack:function(){var e=this.keys;switch(e.focused_part){case"video_control":var t=this.checkIfShowInfo();console.log("Going back in video control"),t?(clearTimeout(this.full_screen_timer),this.hideFullScreenInfo()):(console.log("Will go back to channels"),this.showInformation(!1));break;case"full_screen":this.showInformation(!1);break;case"category_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):this.Exit();break;case"channel_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):this.is_no_categories?this.Exit():this.hoverCategory(e.category_selection);break;case"sidebar_options":this.hideSidebarOptions();break;case"aspect_ratio_selection":case"subtitles_selection":case"audio_selection":this.hideSidebarSubOptions();break;case"color_buttons_selection":this.hoverChannel(e.channel_selection);break;case"switch_page_modal":this.hideSwitchPageModal()}},Exit:function(e){e=e||"home-page";try{media_player.close()}catch(e){console.log("Error closing media player",e)}this.keys;$("#channel-page").addClass("hide"),clearInterval(this.progressbar_timer),clearTimeout(this.information_timer),clearTimeout(this.next_channel_timer),$("#next-program-container").html(""),$("#channel-title").html(""),"home-page"==e?home_page.reEnter():($("#search-page").show(),current_route="search-page",search_page.init("channel-page","live"));var t=LiveModel.category_orders;if(0<t.length){for(var i=this.categories,s=0;s<i.length;s++)for(var o=0;o<t.length;o++)if(i[s].category_id==t[o].id){t[o].position=s;break}t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(t)),LiveModel.category_orders=t}},showInitialChannel:function(e,t){if(t=t||!1){$("#channel-page-categories-container").hide();for(var i=-1,s=0;s<e.length;s++)if("favourite"===e[s].category_id){i=s;break}return-1===i||(this.hoverCategory($(this.category_doms[i])),this.handleMenuClick(),this.hoverChannel(0),this.movies&&0!=this.movies.length)?void(this.is_no_categories=!0):(this.Exit(),home_page.hoverBottomMenu(2),void showToast("Sorry","You have no favorite channels."))}$("#channel-page-categories-container").show(),this.is_no_categories=!1;t=localStorage.getItem(storage_id+"live_initialization_choice");"last"==(t=t||"default")?this.initializeByLast(e):"favorite"==t?this.initializeByFavorite(e):this.initializeByDefault(e)},initializeByDefault:function(e){var t=2;if(!e[t]||0==e[t].movies.length||!e[t].movies)for(var i=0;i<e.length;i++)if(0<e[i].movies.length){t=i;break}e[t]&&0<e[t].movies.length&&(this.hoverCategory(t),this.handleMenuClick(),this.hoverChannel(0),this.showMovie(e[t].movies[0]),this.keys.focused_part="channel_selection")},initializeByFavorite:function(e){for(var t=null,i=-1,s=0;s<e.length;s++)if("favourite"==e[s].category_id){t=e[s],i=s;break}t&&0<t.movies.length?(this.hoverCategory(i),this.handleMenuClick(),this.hoverChannel(0),this.showMovie(t.movies[0])):this.initializeByDefault(e)},initializeByLast:function(e){var t=localStorage.getItem(storage_id+settings.playlist.id+"live_recent");if(t){t=JSON.parse(t);if(t&&0<t.length){for(var i=t[0],s=null,o=-1,a=-1,n=2;n<e.length;n++){for(var r=e[n],l=0;l<r.movies.length;l++)if(r.movies[l].stream_id==i){s=r,o=n,a=l;break}if(s)break}if(s)return this.hoverCategory(o),this.handleMenuClick(),this.hoverChannel(a),void this.showMovie(s.movies[a])}}this.initializeByDefault(e)},setupCurrentLayout:function(){$("#channel-page .player-container").removeClass("expanded");var e=["classic","classic-compact","normal","normal-compact","modern"],t=(this.channel_layout=layout_page.getLayoutChoice(),e[this.channel_layout]);$("#channel-page").removeClass(e.join(" ")).addClass(t),this.is_no_categories?$("#channel-page").addClass("no-categories"):$("#channel-page").removeClass("no-categories")},showCategoryChannels:function(e){var t=this.keys;if(t.category_selection!==this.current_category_index){var i=this.categories[t.category_selection],s=(this.movies=i.movies,$(this.current_category_dom).removeClass("current"),$(this.category_doms[t.category_selection]).addClass("current"),this.current_category_dom=this.category_doms[t.category_selection],"");if(this.movies.forEach(function(e,t){s+='      <div class="channel-menu-item"        data-channel_id="'+e.stream_id+'"        data-index="'+t+'"        onmouseenter="channel_page.hoverChannel(this)"        onclick="channel_page.handleMenuClick()"        >          <div class="channel-icon-container channel-icon-'+t+'">            <img class="channel-icon '+t+'" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"/>          </div>          <div class="channel-item-number-title">            <div class="channel-info-top">\n              <span class="channel-number">'+e.num+"</span>"+(LiveModel.favourite_ids.includes(e.stream_id)?'<i class="fa fa-star favourite-icon"></i>':"")+'</div>\n            <div class="channel-name-wrapper floatTextWrapper">              <span class="channel-name floatText">'+e.name+"</span>            </div>          </div></div>"}),$("#channel-page-menu-container").html(s),t.channel_selection=0,this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),$("#channel-page-menu-container").scrollTop(0),this.current_category_index=t.category_selection,0<this.movies.length){if(this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),this.channel_nav_doms=$("#full-screen-navigation .channel-nav-item"),moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[0],"vertical",!0),this.hoverChannel(0),e){for(var o=0;o<this.movies.length;o++)if(this.movies[o].stream_id==e.stream_id){t.channel_selection=o,this.showMovie(this.movies[o]),this.hoverChannel(o);break}}else this.showMovie(this.movies[0]);t.focused_part="channel_selection"}}},goChannelNum:function(e){var t,s;this.full_screen_video&&(0!=(t=this.channel_num)||0==t&&0!=e)&&(this.channel_num=t=10*t+e,this.channel_number_timer&&(clearTimeout(this.channel_number_timer),this.channel_number_timer=null),s=this,$("#typed-channel-number").text(t),this.channel_number_timer=setTimeout(function(){for(var e=s.movies,t=!1,i=0;i<e.length;i++)if(e[i].num===s.channel_num){t=!0,current_movie=e[i],s.showMovie(current_movie),s.current_channel_id=current_movie.stream_id,s.hoverChannel(s.channel_doms[i]),s.keys.focused_part="video_control";break}t||showToast("Sorry","Channel does not exist"),s.channel_num=0,$("#typed-channel-number").text("")},2e3))},addOrRemoveFav:function(){var e=this.keys;if("channel_selection"===e.focused_part){var t=this.movies[e.channel_selection],i="add";"add"===(i=LiveModel.favourite_ids.includes(t.stream_id)?"remove":i)?(LiveModel.addRecentOrFavouriteMovie(t,"favourite"),$(this.channel_doms[e.channel_selection]).find(".channel-info-top").append('<i class="fa fa-star favourite-icon"></i>')):(i=this.categories[this.current_category_index],LiveModel.removeRecentOrFavouriteMovie(t.stream_id,"favourite"),$(this.channel_doms[e.channel_selection]).find(".favourite-icon").remove(),"favourite"===i.category_id&&($(this.channel_doms[e.channel_selection]).remove(),t=$("#channel-page-menu-container .channel-menu-item"),0==(this.channel_doms=t).length?this.hoverCategory(e.category_selection):(e.channel_selection>=t.length&&(e.channel_selection=t.length-1),this.hoverChannel(e.channel_selection))));try{for(var s=this.categories,o=0;o<s.length;o++)if("favourite"===s[o].category_id){var a=LiveModel.getRecentOrFavouriteCategory("favourite").movies.length;$(this.category_doms[o]).find(".channel-category-movie-counts").text(a);break}}catch(e){}}},showNextProgrammes:function(){for(var e="next-program-container",t=this.movies[this.keys.channel_selection],t=($("#channel-title").text(t.name),LiveModel.getNextProgrammes(this.programmes)),i=t.current_program_exist,s=t.programmes,o=0,a="",n=0;n<s.length&&(a+='<div class="next-program-item '+(0==o&&i?"current":"")+'"><span class="program-time">'+s[n].start.substring(11)+" ~ "+s[n].stop.substring(11)+"</span>"+s[n].title+"</div>",!(4<=++o));n++);0<o?$("#"+e).html(a).show():$("#"+e).hide().html("");var r,l,t="No Info",e="",c="No Info",d="";i?(r=s[0],1<s.length&&(l=s[1])):0<s.length&&(l=s[0]),r&&(t=r.title,e=r.start.substring(11)+" ~ "+r.stop.substring(11)),l&&(c=l.title,d=l.start.substring(11)+" ~ "+l.stop.substring(11)),$(".full-screen-program-name.current").text(t),$(".full-screen-program-time.current").text(e),$(".full-screen-program-name.next").text(c),$(".full-screen-program-time.next").text(d)},updateNextProgrammes:function(){this.showNextProgrammes(),clearInterval(this.next_programme_timer);var e=this;this.next_programme_timer=setInterval(function(){e.showNextProgrammes()},6e4)},getEpgProgrammes:function(){var t,i,s,e=this.movies[this.keys.channel_selection];this.epg_channel_id!==e.stream_id&&(i=[],(t=this).programmes=[],t.showNextProgrammes(),this.epg_channel_id=e.stream_id,"xc"===settings.playlist_type)&&(s="Y-MM-DD HH:mm",api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_short_epg&stream_id="+e.stream_id+"&limit="+this.short_epg_limit_count,success:function(e){e.epg_listings.map(function(e){i.push({start:getLocalChannelTime(e.start).format(s),stop:getLocalChannelTime(e.end).format(s),title:getAtob(e.title),description:getAtob(e.description)})}),t.programmes=i,t.updateNextProgrammes()}}))},checkIfShowInfo:function(){var e=!1;return e="block"===$("#full-screen-information").css("display")?!0:e},showInformation:function(e){$("#channel-page .player-container").removeClass("expanded"),$("#channel-page-contents-container").show();var t=this,i=(this.information_timer&&(clearTimeout(this.information_timer),this.information_timer=null),this.information_timer=setTimeout(function(){t.hideInformation()},25e3),this.keys);"category_selection"!=i.focused_part&&"channel_selection"!=i.focused_part&&(i.focused_part="channel_selection",e)&&"channel_selection"===i.focused_part&&this.hoverChannel(i.channel_selection),this.hideFullScreenInfo(),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){console.log(e)}},0)},hideInformation:function(){var e=this,t=this.keys;"category_selection"!=t.focused_part&&"channel_selection"!=t.focused_part||($("#channel-page .player-container").addClass("expanded"),"video_control"!=t.focused_part&&(t.prev_focus=t.focused_part),t.focused_part="video_control",$("#channel-page-contents-container").hide(),this.hoverVideoControl(1),setTimeout(function(){try{e.last_chosen_aspect_ratio?media_player.setDisplayArea(e.last_chosen_aspect_ratio,"channel"):media_player.setDisplayArea()}catch(e){console.log(e)}},0))},showFullScreenInfo:function(){clearTimeout(this.full_screen_timer),this.full_screen_timer=null,$("#full-screen-information").slideDown();var e=this;this.full_screen_timer=setTimeout(function(){e.hideFullScreenInfo()},5e3)},hideFullScreenInfo:function(){$("#full-screen-information").slideUp()},showMovie:function(e){this.last_chosen_aspect_ratio="stretch";var t,i=e.stream_id;"xc"===settings.playlist_type?t=getMovieUrl(i,"live","ts"):"general"===settings.playlist_type&&(t=e.url);try{media_player.close()}catch(e){}media_player.init("channel-page-video","channel-page");try{media_player.playAsync(window.PROXY_URL+t)}catch(e){}this.current_channel_id=i,$(".full-screen-channel-name").text(e.name),$(".full-screen-channel-logo").attr("src",e.stream_icon);var s=this;if(setTimeout(function(){s.populateSubtitleTracks(),s.populateAudioTracks()},2e3),!checkForAdult(e,"movie",LiveModel.categories)){LiveModel.addRecentOrFavouriteMovie(e,"recent");for(var o=this.categories,a=0;a<o.length;a++)if("recent"===o[a].category_id){var n=LiveModel.getRecentOrFavouriteCategory("recent").movies.length;$(this.category_doms[a]).find(".channel-category-movie-counts").text(n);break}}},showNextChannel:function(e){var t=this.keys,i=(t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this);setTimeout(function(){var e=i.movies[t.channel_selection],e=(i.current_channel_id=e.stream_id,i.showMovie(i.movies[t.channel_selection]),$(i.video_control_doms[1]).find("i"));$(e).removeClass("fa-play"),$(e).addClass("fa-pause")},400),this.showFullScreenInfo()},playOrPause:function(){var e=$(this.video_control_doms[1]).find("i");if(media_player.state==media_player.STATES.PLAYING){try{media_player.pause()}catch(e){}$(e).removeClass("fa-pause"),$(e).addClass("fa-play")}else{try{media_player.play()}catch(e){}$(e).removeClass("fa-play"),$(e).addClass("fa-pause")}},goToSearchPage:function(){this.hideFullScreenInfo(),$("#channel-page").addClass("hide"),search_page.init("channel-page","live"),this.toggleRearrangeMode(!1)},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_focus_dom).removeClass("rearrange");else if(e){e=this.keys;if("category_selection"===e.focused_part||"channel_selection"===e.focused_part){this.rearrange_mode=!0;var t=0;if("channel_selection"===e.focused_part)t=e.channel_selection;else for(var i=this.categories[e.category_selection],s=0;s<LiveModel.categories.length;s++)if(LiveModel.categories[s].category_id==i.category_id){t=s;break}this.rearrange_origin_position=t,$(this.prev_focus_dom).addClass("rearrange")}}},changeChannelDomContent:function(e,t,i){$(e).find(".channel-number").text(t.num),$(e).find(".channel-icon").attr("src",t.stream_icon),$(e).data("index",i),$(e).find(".channel-name").text(t.name),$(e).data("channel_id",t.stream_id)},changeCategoryDomContent:function(e,t,i){$(e).find(".channel-category-name").text(t.category_name),$(e).data("index",i),$(e).find(".channel-category-movie-counts").text(t.movies.length)},hoverColorButton:function(e){var t=this.keys,i=(t.color_buttons_selection=e,$("#channel-page .bottom-label-item"));t.focused_part="color_buttons_selection",$(this.prev_focus_dom).removeClass("active"),$(i).removeClass("active"),$(i[e]).addClass("active"),this.prev_focus_dom=$(i[e])},clickColorButton:function(e){var t=this.keys;switch(e){case 0:this.Exit("search-page");break;case 1:this.hoverChannel(t.channel_selection),this.toggleRearrangeMode(!0);break;case 2:this.hoverChannel(t.channel_selection),this.addOrRemoveFav();break;case 3:this.showSwitchPageModal()}},hoverVideoControl:function(e){var t=this.keys;t.video_control=e,t.focused_part="video_control",$(this.video_control_doms).removeClass("active"),$(this.video_control_doms[e]).addClass("active"),this.showFullScreenInfo()},hoverCategory:function(e){$("#channel-page .bottom-label-item").removeClass("active"),$("#channel-page-menu-container").css("overflow-y","hidden"),$("#channel-page-categories-container").css("overflow-y","scroll");var t=this.keys;t.focused_part="category_selection",this.toggleCategoriesMenu(!0),t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#channel-page-categories-container"),this.category_doms[t.category_selection],"vertical",!1),this.showInformation(!1),applyAnimation(this.category_doms[t.category_selection])},hoverChannel:function(e){$("#channel-page .bottom-label-item").removeClass("active"),$("#channel-page-categories-container").css("overflow-y","hidden"),$("#channel-page-menu-container").css("overflow-y","scroll");var t=this.keys,i=(t.focused_part="channel_selection",this.toggleCategoriesMenu(!1),t.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[t.channel_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.channel_doms[t.channel_selection]).addClass("rearrange")),this.prev_focus_dom=this.channel_doms[t.channel_selection],this.showInformation(!1),this);moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[t.channel_selection],"vertical",!1),this.channel_hover_timer&&(clearTimeout(this.channel_hover_timer),this.channel_hover_timer=null),this.channel_hover_timer=setTimeout(function(){i.getEpgProgrammes()},this.channel_hover_timeout),applyAnimation(this.channel_doms[t.channel_selection])},toggleCategoriesMenu:function(e){4==this.channel_layout&&(1==e?$(".categories-container").addClass("visible"):$(".categories-container").removeClass("visible"))},hoverSidebarOption:function(e){"sidebar_options"==this.keys.focused_part&&($(this.fullscreen_sidebar_doms).removeClass("active"),$(this.fullscreen_sidebar_doms[e]).addClass("active"),this.resetSidebarOptionsTimer())},showSidebarOptions:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="sidebar_options",this.resetSidebarOptionsTimer(),$("#channel-fullscreen-sidebar-options").addClass("visible")},hideSidebarOptions:function(){var e=this.keys;e.focused_part="video_control",e.sidebar_selection=0,clearTimeout(this.channel_sidebar_options_timer),$("#channel-fullscreen-sidebar-options").removeClass("visible")},resetSidebarOptionsTimer:function(){var e=this;clearTimeout(this.channel_sidebar_options_timer),this.channel_sidebar_options_timer=setTimeout(function(){e.hideSidebarOptions()},1e4)},clickSidebarMainItem:function(e){if("sidebar_options"==this.keys.focused_part)switch(this.resetSidebarOptionsTimer(),e){case 0:this.showSidebarSubOptions(0);break;case 1:this.showSidebarSubOptions(1);break;case 2:this.showSidebarSubOptions(2)}},showSidebarSubOptions:function(e){clearTimeout(this.channel_sidebar_options_timer);var t=this.keys;switch($("#channel-fullscreen-sidebar-options").addClass("suboptions-visible"),this.hideAllSidebarSubOptions(),e){case 0:t.focused_part="aspect_ratio_selection",$("#channel-sidebar-aspect-ratio-options-container").show(),this.hoverSidebarSubOptionItem(t.aspect_ratio_selection);break;case 1:t.focused_part="subtitles_selection",$("#channel-sidebar-subtitles-options-container").show(),this.hoverSidebarSubOptionItem(t.subtitles_selection);break;case 2:t.focused_part="audio_selection",$("#channel-sidebar-audio-options-container").show(),this.hoverSidebarSubOptionItem(t.audio_selection)}},hideSidebarSubOptions:function(){this.keys.focused_part="sidebar_options",$("#channel-fullscreen-sidebar-options").removeClass("suboptions-visible"),this.resetSidebarOptionsTimer()},hideAllSidebarSubOptions:function(){$("#channel-sidebar-aspect-ratio-options-container").hide(),$("#channel-sidebar-subtitles-options-container").hide(),$("#channel-sidebar-audio-options-container").hide()},hoverSidebarSubOptionItem:function(e){var t=this.keys;if("aspect_ratio_selection"==t.focused_part||"subtitles_selection"==t.focused_part||"audio_selection"==t.focused_part)switch(t.focused_part){case"aspect_ratio_selection":$(this.sidebar_aspect_ratio_doms).removeClass("active"),$(this.sidebar_aspect_ratio_doms[e]).addClass("active"),t.aspect_ratio_selection=e;break;case"subtitles_selection":$(this.sidebar_subtitles_doms).removeClass("active"),$(this.sidebar_subtitles_doms[e]).addClass("active"),t.subtitles_selection=e;break;case"audio_selection":$(this.sidebar_audio_doms).removeClass("active"),$(this.sidebar_audio_doms[e]).addClass("active"),t.audio_selection=e}},clickSidebarSubOptionItem:function(e){var t=this.keys;if("aspect_ratio_selection"==t.focused_part||"subtitles_selection"==t.focused_part||"audio_selection"==t.focused_part)switch(t.focused_part){case"aspect_ratio_selection":this.clickAspectRatioItem(e);break;case"subtitles_selection":this.clickSubtitleItem(e);break;case"audio_selection":this.clickAudioItem(e)}},clickAspectRatioItem:function(e){$(this.sidebar_aspect_ratio_doms).removeClass("current"),$(this.sidebar_aspect_ratio_doms[e]).addClass("current"),this.changeAspectRatio(e)},changeAspectRatio:function(e){switch(e){case 0:media_player.setDisplayArea("stretch","channel"),this.last_chosen_aspect_ratio="stretch";break;case 1:media_player.setDisplayArea("16:9","channel"),this.last_chosen_aspect_ratio="16:9";break;case 2:media_player.setDisplayArea("21:9","channel"),this.last_chosen_aspect_ratio="21:9";break;case 3:media_player.setDisplayArea("4:3","channel"),this.last_chosen_aspect_ratio="4:3";break;case 4:media_player.setDisplayArea("1:1","channel"),this.last_chosen_aspect_ratio="1:1"}},clickSubtitleItem:function(e){if($(this.sidebar_subtitles_doms).removeClass("current"),$(this.sidebar_subtitles_doms[e]).addClass("current"),0===e)try{media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("TEXT",-1)}catch(e){console.log("Error turning off subtitles:",e)}else{var t=media_player.getSubtitleOrAudioTrack("TEXT"),e=e-1;if(t&&t[e])try{var i=t[e].index||e;media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("TEXT",i)}catch(e){console.log("Error setting subtitle track:",e)}}},showSwitchPageModal:function(){var e=this.keys;e.switch_page_modal_selection=0,e.focused_part="switch_page_modal",$("#channel-switch-page-modal-container").show(),this.hoverSwitchPageModal(0),clearTimeout(this.channel_hover_timer)},hideSwitchPageModal:function(){this.keys.focused_part="channel_selection",this.hoverChannel(this.keys.channel_selection),$("#channel-switch-page-modal-container").hide()},hoverSwitchPageModal:function(e){this.keys.switch_page_modal_selection=e,$(this.switch_page_modal_doms).removeClass("active"),$(this.switch_page_modal_doms[e]).addClass("active")},clickSwitchPageModal:function(){switch(this.hideSwitchPageModal(),this.Exit(),this.keys.switch_page_modal_selection){case 0:home_page.keys.menu_selection=1;break;case 1:home_page.keys.menu_selection=2;break;case 2:home_page.hoverBottomMenu(6);break;case 3:home_page.hoverBottomMenu(8)}home_page.handleMenuClick()},clickAudioItem:function(e){$(this.sidebar_audio_doms).removeClass("current"),$(this.sidebar_audio_doms[e]).addClass("current");var t=media_player.getSubtitleOrAudioTrack("AUDIO");if(t&&t[e])try{var i=t[e].index||e;media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("AUDIO",i)}catch(e){console.log("Error setting audio track:",e)}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":var t=checkForAdult(this.categories[e.category_selection],"category",[],!0);this.showInformation(!1),t?parent_confirm_page.init(current_route):(this.showCategoryChannels(),this.toggleRearrangeMode(!1));break;case"video_control":this.goBack();break;case"full_screen":this.showInformation(!0);break;case"channel_selection":t=this.movies[e.channel_selection].stream_id;this.showInformation(!1),this.current_channel_id==t?this.hideInformation():this.showMovie(this.movies[e.channel_selection]),this.toggleRearrangeMode(!1);break;case"sidebar_options":this.clickSidebarMainItem(e.sidebar_selection);break;case"aspect_ratio_selection":this.clickSidebarSubOptionItem(e.aspect_ratio_selection);break;case"subtitles_selection":this.clickSubtitleItem(e.subtitles_selection);break;case"audio_selection":this.clickAudioItem(e.audio_selection);break;case"color_buttons_selection":this.clickColorButton(this.keys.color_buttons_selection);break;case"switch_page_modal":this.clickSwitchPageModal(e.switch_page_modal_selection)}},handleMenusUpDown:function(e){var s=this.keys,t=this.channel_doms;switch(s.focused_part){case"category_selection":var i=s.category_selection;if(s.category_selection+=e,s.category_selection<0)s.category_selection=0;else if(s.category_selection>=this.category_doms.length)s.category_selection=this.category_doms.length-1;else{if(this.rearrange_mode&&i!==s.category_selection){for(var o=this.categories[i],a=this.categories[s.category_selection],n=(this.changeCategoryDomContent(this.category_doms[i],a,i),this.changeCategoryDomContent(this.category_doms[s.category_selection],o,s.category_selection),this.category_doms=$(".channel-page-category-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),0),r=0;r<LiveModel.categories.length;r++)if(a.category_id==LiveModel.categories[r].category_id){n=r;break}LiveModel.categories=makeRearrangeArray(LiveModel.categories,this.rearrange_origin_position,n),this.rearrange_origin_position=n,this.categories=LiveModel.getCategories(!1,!0),this.rearrange_timer=setTimeout(function(){for(var e=LiveModel.category_orders,t=0;t<e.length;t++)if(e[t].id==o.category_id){e.splice(t,1);break}e.push({id:o.category_id,position:n}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(e)),LiveModel.category_orders=e,LiveModel.updateRecentAndFavouritePosition()},this.rearrange_timeout)}this.hoverCategory(s.category_selection)}break;case"channel_selection":var l,c,d,i=s.channel_selection;s.channel_selection+=e,s.channel_selection>=t.length?s.channel_selection=t.length-1:s.channel_selection<0?s.channel_selection=0:(this.rearrange_mode&&s.channel_selection!==i&&(c=makeRearrangeArray(this.movies,i,s.channel_selection),this.movies=c,(d=this.categories[this.current_category_index]).movies=c,c=this.movies[i],l=this.movies[s.channel_selection],this.changeChannelDomContent(this.channel_doms[i],c,i),this.changeChannelDomContent(this.channel_doms[s.channel_selection],l,s.channel_selection),this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),this.rearrange_timer=setTimeout(function(){var e=LiveModel.channel_orders,t=[];e[d.category_id]&&(t=e[d.category_id]);for(var i=0;i<t.length;i++)if(t[i].id==l.stream_id&&t[i].name==l.name){t.splice(i,1);break}t.push({id:l.stream_id,name:l.name,position:s.channel_selection}),t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),e[d.category_id]=t,LiveModel.channel_orders=e,localStorage.setItem(storage_id+settings.playlist.id+"_channel_orders",JSON.stringify(e))},this.rearrange_timeout)),this.hoverChannel(s.channel_selection));break;case"full_screen":this.showNextChannel(-1*e);break;case"video_control":this.checkIfShowInfo()&&this.showNextChannel(-1*e),this.showFullScreenInfo();break;case"sidebar_options":s.sidebar_selection+=e,s.sidebar_selection<0&&(s.sidebar_selection=0),s.sidebar_selection>=this.fullscreen_sidebar_doms.length&&(s.sidebar_selection=this.fullscreen_sidebar_doms.length-1),this.hoverSidebarOption(s.sidebar_selection);break;case"aspect_ratio_selection":s.aspect_ratio_selection+=e,s.aspect_ratio_selection<0&&(s.aspect_ratio_selection=0),s.aspect_ratio_selection>=this.sidebar_aspect_ratio_doms.length&&(s.aspect_ratio_selection=this.sidebar_aspect_ratio_doms.length-1),this.hoverSidebarSubOptionItem(s.aspect_ratio_selection);break;case"subtitles_selection":s.subtitles_selection+=e,s.subtitles_selection<0&&(s.subtitles_selection=0),s.subtitles_selection>=this.sidebar_subtitles_doms.length&&(s.subtitles_selection=this.sidebar_subtitles_doms.length-1),this.hoverSidebarSubOptionItem(s.subtitles_selection);break;case"audio_selection":s.audio_selection+=e,s.audio_selection<0&&(s.audio_selection=0),s.audio_selection>=this.sidebar_audio_doms.length&&(s.audio_selection=this.sidebar_audio_doms.length-1),this.hoverSidebarSubOptionItem(s.audio_selection);break;case"switch_page_modal":s.switch_page_modal_selection+=e,s.switch_page_modal_selection>=this.switch_page_modal_doms.length&&(s.switch_page_modal_selection=this.switch_page_modal_doms.length-1),s.switch_page_modal_selection<0&&(s.switch_page_modal_selection=0),this.hoverSwitchPageModal(s.switch_page_modal_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&0<this.movies.length&&(t.focused_part="channel_selection",$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverChannel(t.channel_selection));break;case"channel_selection":this.is_no_categories||(e<0&&($(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverCategory(t.category_selection)),0<e&&this.hoverColorButton(0));break;case"video_control":console.log("Going left right video control"),this.showSidebarOptions();break;case"sidebar_options":e<0&&this.hideSidebarOptions(),0<e&&this.showSidebarSubOptions(t.sidebar_selection);break;case"aspect_ratio_selection":case"subtitles_selection":case"audio_selection":e<0&&this.hideSidebarSubOptions();break;case"color_buttons_selection":t.color_buttons_selection+=e,3<t.color_buttons_selection&&(t.color_buttons_selection=3),t.color_buttons_selection<0?(t.color_buttons_selection=0,this.hoverChannel(t.channel_selection)):this.hoverColorButton(t.color_buttons_selection)}},HandleKey:function(e){if(!this.is_loading){var t=this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:"video_control"===t.focused_part&&this.showNextChannel(1);break;case tvKey.CH_DOWN:"video_control"===t.focused_part&&this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:case tvKey.PLAY:case tvKey.PLAYPAUSE:this.playOrPause();break;case tvKey.BLUE:this.Exit("search-page");break;case tvKey.RED:this.toggleRearrangeMode(!0);break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.GREEN:this.showSwitchPageModal()}}},populateSubtitleTracks:function(){if(media_player&&"function"==typeof media_player.getSubtitleOrAudioTrack){var e=media_player.getSubtitleOrAudioTrack("TEXT"),n=(console.log("[DEBUG] Available subtitle tracks:",e),!1);try{media_player.parent_id&&(n=$("#"+media_player.parent_id+" .subtitle-container").is(":visible"),console.log("[DEBUG] Subtitle container is visible:",n))}catch(e){console.log("[DEBUG] Error checking subtitle visibility:",e)}var r="";r+='<div class="channel-sidebar-suboption'+(n?"":" current")+'" onclick="channel_page.clickSubtitleItem(0)"><span>Off</span></div>',e.forEach(function(e,t){var i="",s=e.index,o=n&&0===t;try{var a="string"==typeof e.extra_info?JSON.parse(e.extra_info):e.extra_info,i=a.track_lang||"Subtitle "+(t+1);language_codes&&language_codes[i]&&(i=language_codes[i]),console.log("[DEBUG] Subtitle track "+t+":",{language:i,index:s,extraInfo:a,isCurrent:o})}catch(e){i="Subtitle "+(t+1),console.log("[DEBUG] Error parsing subtitle track "+t+":",e)}r+='<div class="channel-sidebar-suboption'+(o?" current":"")+'" onclick="channel_page.clickSubtitleItem('+(t+1)+')"><span>'+i+"</span></div>"}),$("#channel-sidebar-subtitles-options-wrapper").html(r),this.sidebar_subtitles_doms=$("#channel-sidebar-subtitles-options-wrapper .channel-sidebar-suboption"),n&&0<e.length?(this.keys.subtitles_selection=1,this.current_subtitle_index=1):(this.keys.subtitles_selection=0,this.current_subtitle_index=0)}else console.log("[DEBUG] Media player or getSubtitleOrAudioTrack function not available")},populateAudioTracks:function(){if(media_player&&"function"==typeof media_player.getSubtitleOrAudioTrack){var e=media_player.getSubtitleOrAudioTrack("AUDIO"),o=0;try{if(media_player.videoObj&&media_player.videoObj.audioTracks)for(var t=0;t<media_player.videoObj.audioTracks.length;t++)if(media_player.videoObj.audioTracks[t].enabled){o=t,console.log("Found enabled audio track at index:",t);break}}catch(e){console.log("Error detecting enabled audio track:",e)}var a="";e.forEach(function(e,t){var i="",s=(e.index,t===o);try{i=("string"==typeof e.extra_info?JSON.parse(e.extra_info):e.extra_info).language||"Audio "+(t+1);language_codes&&language_codes[i]&&(i=language_codes[i])}catch(e){i="Audio "+(t+1)}a+='<div class="channel-sidebar-suboption'+(s?" current":"")+'" onclick="channel_page.clickAudioItem('+t+')"><span>'+i+"</span></div>"}),0===e.length&&(a+='<div class="channel-sidebar-suboption current" onclick="channel_page.clickAudioItem(0)"><span>Default</span></div>'),$("#channel-sidebar-audio-options-wrapper").html(a),this.sidebar_audio_doms=$("#channel-sidebar-audio-options-wrapper .channel-sidebar-suboption"),this.keys.audio_selection=o,this.current_audio_track_index=o}}};function initPlayer(){media_player="samsung"===platform?{videoObj:null,parent_id:"",STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},current_time:0,reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",init:function(e,t){this.videoObj=null,this.parent_id=t,this.state=this.STATES.STOPPED,this.parent_id=t,this.current_time=0,this.reconnect_count=0,this.url="",this.videoObj=document.getElementById(e),$("#"+t).find(".video-error").hide(),$(".video-resolution").text(""),$("#"+this.parent_id).find(".subtitle-container").html("").hide()},playAsync:function(e){if(this.url=e,$("#"+this.parent_id).find(".video-error").hide(),$(".video-loader").show(),!(this.state>this.STATES.STOPPED)){if(!this.videoObj)return 0;try{console.log(e),webapis.avplay.open(e),this.setupEventListeners(),this.setDisplayArea(),webapis.avplay.setBufferingParam("PLAYER_BUFFER_FOR_PLAY","PLAYER_BUFFER_SIZE_IN_SECOND",3);var a=this;webapis.avplay.prepareAsync(function(){$(".video-loader").hide(),a.reconnect_count=0,a.state=a.STATES.PLAYING,webapis.avplay.play(),$("#"+a.parent_id).find(".video-total-time").text(a.formatTime(webapis.avplay.getDuration()/1e3)),$("#"+a.parent_id).find(".video-error").hide();var e={min:0,max:webapis.avplay.getDuration()/1e3};$("#"+a.parent_id).find(".video-progress-bar-slider").attr(e),$("#"+a.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+a.parent_id).find(".video-current-time").text("00:00"),$("#"+a.parent_id).find(".video-reconnect-message").hide(),"vod-series-player-video"===current_route&&vod_series_player.showResumeBar();try{for(var t=webapis.avplay.getCurrentStreamInfo(),i=0;i<t.length;i++)if("VIDEO"===t[i].type){var s,o=JSON.parse(t[i].extra_info);o.Width&&o.Height&&(s=o.Width+" x "+o.Height,$(".video-resolution").text(s));break}}catch(e){console.log(e)}},function(){$(".video-loader").hide(),$("#"+a.parent_id).find(".video-error").show(),a.reconnect_count<a.reconnect_max_count&&a.tryReconnect()})}catch(e){$(".video-loader").hide(),$("#"+this.parent_id).find(".video-error").show(),this.reconnect_count<this.reconnect_max_count&&this.tryReconnect()}}},play:function(){this.state=this.STATES.PLAYING;try{webapis.avplay.play()}catch(e){}},pause:function(){this.state=this.STATES.PAUSED;try{webapis.avplay.pause()}catch(e){}},stop:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.stop()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},close:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.close()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_count+=1,this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{console.log("reconnect count=",this.reconnect_count),$("#"+this.parent_id).find(".video-reconnect-message").show(),this.state=this.STATES.STOPPED;var e=this;try{webapis.avplay.close()}catch(e){}this.reconnect_timer=setTimeout(function(){e.playAsync(e.url)},6e3)}},setDisplayArea:function(e,t){if(webapis&&webapis.avplay){var i=null,i="channel"==t?"#channel-page-video-lg":"#vod-series-player-video-lg";if(e)try{var s=$(this.videoObj).parent().width(),o=$(this.videoObj).parent().height();switch(e){case"1:1":$(i).css("object-fit","fill"),r=l=o;break;case"16:9":$(i).css("object-fit","fill"),l=o,r=Math.round(l*(16/9));break;case"4:3":$(i).css("object-fit","fill"),l=o,r=Math.round(l*(4/3));break;case"21:9":$(i).css("object-fit","fill"),r=window.innerWidth,l=Math.round(r*(9/21));break;case"stretch":$(i).css("object-fit","fill"),r=s,l=o;break;default:$(i).css("object-fit","contain"),r=s,l=o}var a=Math.round((s-r)/2),n=Math.round((o-l)/2);(s=$(this.videoObj).parent().width())<r&&(a-=(r-s)/2),webapis.avplay.setDisplayRect(Math.round(a),Math.round(n),Math.round(r),Math.round(l)),console.log("Samsung Display Rectangle:",{left:Math.round(a),top:Math.round(n),width:Math.round(r),height:Math.round(l)})}catch(e){console.log("Error in setDisplayRect",e)}else{var n=$(this.videoObj).offset().top,a=$(this.videoObj).offset().left,r=parseInt($(this.videoObj).width()),l=parseInt($(this.videoObj).height());webapis.avplay.setDisplayRect(a,n,r,l)}}else console.log("Samsung webapis.avplay is not available")},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},setupEventListeners:function(){var o=this;webapis.avplay.setListener({onbufferingstart:function(){$("#"+o.parent_id).find(".video-loader").show()},onbufferingprogress:function(e){},onbufferingcomplete:function(){$("#"+o.parent_id).find(".video-loader").hide()},onstreamcompleted:function(){$("#"+o.parent_id).find(".video-error").hide(),webapis.avplay.stop(),o.state=o.STATES.STOPPED,$("#"+o.parent_id).find(".progress-amount").css({width:"100%"}),"vod-series-player-video"===current_route&&vod_series_player.showNextVideo(1,!0)},oncurrentplaytime:function(e){o.current_time=e,$("#"+o.parent_id).find(".video-error").hide(),"vod-series-player-video"===current_route&&(vod_series_player.current_time=e/1e3),0<webapis.avplay.getDuration()&&($("#"+o.parent_id).find(".video-current-time").html(o.formatTime(e/1e3)),$("#"+o.parent_id).find(".video-progress-bar-slider").val(e/1e3).change())},ondrmevent:function(e,t){},onerror:function(e,t){$("#"+o.parent_id).find(".video-error").show()},onsubtitlechange:function(e,t,i,s){$("#"+o.parent_id).find(".subtitle-container").html(""),$("#"+o.parent_id).find(".subtitle-container").html(t)}})},onDeviceReady:function(){document.addEventListener("pause",this.onPause),document.addEventListener("resume",this.onResume)},onPause:function(){this.pause()},onResume:function(){this.play()},getSubtitleOrAudioTrack:function(t){var e=[];if("develop"==env)return e=[{extra_info:{fourCC:"un",subtitle_type:"0",track_lang:"un",index:3,type:"TEXT"}}];var i="",s="TEXT"===t?"track_lang":"language",o="TEXT"===t?"Subtitle ":"Track ";try{for(var a,n,r=webapis.avplay.getTotalTrackInfo(),l=0;l<r.length;l++)try{r[l].type==t&&(a=JSON.parse(r[l].extra_info),"TEXT"===t||"AUDIO"===t?(n=a[s].trim(),i.includes(n)||""===n?""===n&&(a[s]=o+(l+1),r[l].extra_info=a,e.push(r[l])):(i+=", "+n,a[s]=void 0!==language_codes[n]?language_codes[n]:n,r[l].extra_info=a,e.push(r[l]))):(r[l].extra_info=a,e.push(r[l])))}catch(e){console.log(t,e)}}catch(e){}return e},setSubtitleOrAudioTrack:function(e,t){try{webapis.avplay.setSelectTrack(e,t)}catch(e){}"TEXT"===e&&(-1==t?$("#"+this.parent_id+" .subtitle-container").hide():$("#"+this.parent_id+" .subtitle-container").show())}}:{id:"",videoObj:null,parent_id:"",current_time:0,STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},subtitles:[],tracks:[],reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",srt_map:{},movie_list_id:null,init:function(e,t){this.reconnect_count=0,this.url="",this.srt_map={},this.movie_list_id=null,e.includes("-lg")||(e+="-lg"),"lg"!=platform&&($("video").addClass("hide"),$("#"+e).removeClass("hide"),$("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden")),this.id=e,this.videoObj=null,this.parent_id=t,this.current_time=0,$("#"+t).find(".video-error").hide(),this.state=this.STATES.STOPPED,this.videoObj=document.getElementById(e),this.subtitles=[],this.tracks=[],$("#"+this.parent_id).find(".subtitle-container").html("").hide(),SrtOperation.deStruct();var s=this.videoObj,o=this,e=document.getElementById("channel-page-video"),i=document.getElementById("vod-series-player-video");e&&(e.onload=function(){$(this).css("visibility","visible")}),i&&(i.onload=function(){$(this).css("visibility","visible")}),this.videoObj.addEventListener("error",function(e){console.log("Error"),o.tryReconnect(),$("#"+o.parent_id).find(".video-error").show()}),this.videoObj.addEventListener("canplay",function(e){$("#"+o.parent_id).find(".video-error").hide(),"lg"!=platform&&($("#channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible"))}),this.videoObj.addEventListener("durationchange",function(e){}),this.videoObj.addEventListener("loadeddata",function(e){var t=parseInt(s.duration),i={min:0,max:t};$("#"+o.parent_id).find(".video-progress-bar-slider").attr(i),$("#"+o.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+o.parent_id).find(".video-total-time").text(o.formatTime(t)),"vod-series-player-video"===current_route&&vod_series_player.showResumeBar(),$("#"+o.parent_id).find(".video-reconnect-message").hide(),o.reconnect_count=0,clearTimeout(o.reconnect_timer)}),$("#"+t).find(".video-reconnect-message").hide(),this.videoObj.ontimeupdate=function(e){var t=o.videoObj.duration,i=o.videoObj.currentTime;0<t&&($("#"+o.parent_id).find(".video-progress-bar-slider").val(i).change(),$("#"+o.parent_id).find(".video-current-time").html(o.formatTime(i))),"vod-series-player-video"==current_route&&(vod_series_player.current_time=i,SrtOperation.timeChange(s.currentTime))},this.videoObj.addEventListener("loadedmetadata",function(){var e="No Information";try{var t=o.videoObj.videoWidth,i=o.videoObj.videoHeight;t&&i&&(e=t+" x "+i+"px")}catch(e){console.log(e)}console.log(e),$(".video-resolution").text(e)}),this.videoObj.addEventListener("waiting",function(e){}),this.videoObj.addEventListener("suspend",function(e){}),this.videoObj.addEventListener("stalled",function(e){console.log("Failed to fetch data, but trying.")}),this.videoObj.addEventListener("ended",function(e){"vod-series-player-video"===current_route&&vod_series_player.showNextVideo(1,!0)}),this.videoObj.addEventListener("emptied",function(e){})},playAsync:function(e){"lg"!=platform&&($("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden"));try{this.videoObj.pause()}catch(e){}console.log(e),this.url=e;var t=this;for($("#"+this.parent_id).find(".video-error").hide();this.videoObj.firstChild;)this.videoObj.removeChild(this.videoObj.firstChild);this.videoObj.load();var i=document.createElement("source");i.setAttribute("src",e),this.videoObj.appendChild(i),this.videoObj.addEventListener("playing",function e(){"lg"!=platform&&($("channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible")),this.removeEventListener("playing",e)}),this.videoObj.play(),$("#"+this.parent_id).find(".progress-amount").css({width:0}),i.addEventListener("error",function(e){$(".video-loader").hide(),$("#"+t.parent_id).find(".video-error").show(),t.tryReconnect()}),i.addEventListener("emptied",function(e){console.log("Empty"),$("#"+t.parent_id).find(".video-error").show()}),this.state=this.STATES.PLAYING},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_timer=null,this.reconnect_count+=1,console.log("here reconnecting",this.reconnect_count),this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{$("#"+this.parent_id).find(".video-reconnect-message").show();var e=this;try{this.videoObj.close()}catch(e){}this.reconnect_timer=setTimeout(function(){try{e.playAsync(e.url)}catch(e){console.log(e)}},6e3)}},play:function(){this.state=this.STATES.PLAYING,this.videoObj.play(),0<SrtOperation.srt.length&&(SrtOperation.stopped=!1)},setDisplayArea:function(e,t){if(e){$("video_element").css("object-fit","fill");var i,s=parseInt($(this.videoObj).height());switch(e){case"1:1":$("video_element").css("object-fit","fill"),i=s+"px";break;case"16:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(16/9))+"px";break;case"4:3":$("video_element").css("object-fit","fill"),i=Math.round(s*(4/3))+"px";break;case"21:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(21/9))+"px";break;case"stretch":$("video_element").css("object-fit","fill"),s=i="100%";break;default:$("video_element").css("object-fit","contain"),s=i="100%"}this.videoObj.style.width=i,this.videoObj.style.height=s,console.log("NEW height",s),console.log("NEW WIDTH",i)}},pause:function(){this.state=this.STATES.PAUSED;try{this.videoObj.pause()}catch(e){}},close:function(){try{this.videoObj.pause()}catch(e){}this.state=this.STATES.STOPPED,SrtOperation.deStruct(),this.subtitles=[],this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},seekTo:function(e){},getSubtitleOrAudioTrack:function(e){var i=[],s="TEXT"==e?0<media_player.videoObj.textTracks.length?media_player.videoObj.textTracks:{}:media_player.videoObj.audioTracks&&0<media_player.videoObj.audioTracks.length?media_player.videoObj.audioTracks:{};return console.log(s),0<Object.keys(s).length&&Object.keys(s).map(function(e,t){"object"==typeof s[e]&&null!=s[e]&&i.push(s[e])}),console.log(i),i},setSubtitleOrAudioTrack:function(e,t){if("TEXT"==e)-1==t?(SrtOperation.deStruct(),this.subtitles=[],$("#"+this.parent_id+" .subtitle-container").hide()):(this.subtitles[t]&&(e=this.subtitles[t].file_id.toString(),this.srt_map[e])&&SrtOperation.init(this.srt_map[e],media_player.videoObj.currentTime),$("#"+this.parent_id+" .subtitle-container").show());else{for(var i=0;i<this.videoObj.audioTracks.length;i++)this.videoObj.audioTracks[i].enabled=!1;this.videoObj.audioTracks[t].enabled=!0}}}}function convertProgrammeTimeToClientTime(e){e=moment(e,"YYYYMMDDHHmmss Z");return e.utc().add(client_offset,"minute"),e.format("Y-MM-DD HH:mm")}function getTodayDate(e){var t=new Date;return moment(t).format(e)}function calculateTimeDifference(e,t){e=new Date(e);time_difference_with_server=parseInt((1e3*t-e.getTime())/6e4)}function getLocalChannelTime(e){return moment(e).add(time_difference_with_server,"minute")}var vod_summary_page={keys:{focused_part:"action_selection",index:0,cast_selection:0},min_btn_index:0,favourite_action:0,action_btns:$(".vod-action-btn"),is_favourite:!1,is_protected:!1,is_loading:!1,is_trailer_exist:!0,prev_route:"",init:function(e){this.prev_route=e,this.favourite_action=0;var t,i=this,e=(showLoader(!0),this.is_loading=!0,$("#vod-summary-release-cast").siblings(".circle").hide(),$("#vod-summary-release-date").siblings(".circle").hide(),$("#vod-summary-release-director").siblings(".circle").hide(),$("#vod-summary-release-length").siblings(".circle").hide(),$("#vod-summary-release-genre").siblings(".circle").hide(),$("#vod-watch-trailer-button").hide(),$("#vod-watch-trailer-button-container").hide(),$("#vod-summary-release-date").text(""),$("#vod-summary-release-genre").text(""),$("#vod-summary-release-length").text(""),$("#vod-summary-release-age").text(""),$("#vod-summary-release-director").text(""),$("#vod-summary-release-cast").text(""),$("#vod-summary-description").text(""),this.hoverButton(0),$("#vod-summary-image-wrapper img").attr("src",""),$("#vod-summary-name").text(current_movie.name),$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#vod-summary-image-wrapper img").attr("src",current_movie.stream_icon||HOST+"app_src_min/images/default_movie.png"),this.is_favourite=!VodModel.favourite_ids.includes(current_movie.stream_id),this.toggleFavourite(),VodModel.favourite_ids.includes(current_movie.stream_id)?($($(".vod-action-btn")[2]).data("action","remove"),$($(".vod-action-btn")[2]).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')):($($(".vod-action-btn")[2]).data("action","add"),$($(".vod-action-btn")[2]).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')),0),e=void 0===current_movie.rating||""===current_movie.rating?0:parseFloat(current_movie.rating),e=(isNaN(e)&&(e=0),$("#vod-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#vod-rating-mark").text(e.toFixed(1)),current_movie.youtube_trailer="",current_route="vod-summary-page",$("#vod-series-page").addClass("hide"),$("#vod-series-player-page").addClass("hide"),$("#player-movies-modal").modal("hide"),$("#search-page").hide(),$("#vod-summary-page").removeClass("hide"),this.min_btn_index=0,current_movie.info={},current_movie.summary_downloaded=!1,console.log("PLAYLIST TYPe",settings.playlist_type),"xc"===settings.playlist_type||"xc"==settings.playlist_type?(console.log("GETTING TMDB"),api({url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+current_movie.stream_id,success:function(e){console.log("Got TMDB"),t=e.info,i.fillVodSummaryData(e,t);e=t.tmdb_id||t.tmdb;t.backdrop_path&&0<t.backdrop_path.length?i.fetchMovieImages(e,t.backdrop_path[0]):i.fetchMovieImages(e,HOST+"app_src_min/images/default_movie_bg.png"),i.fetchCast(e),showLoader(!1),i.is_loading=!1},fail:function(e){showLoader(!1),i.is_loading=!1}})):(showLoader(!1),this.is_loading=!1),vod_series_page.categories[vod_series_page.keys.category_selection]);this.is_protected=VodModel.isProtected(e),console.log("This movie is protected?",this.is_protected)},goBack:function(){var e,t,i;$("#vod-summary-page").addClass("hide"),current_route=this.prev_route,"vod-series-page"===this.prev_route?($("#vod-series-page").removeClass("hide"),t=vod_series_page.keys,e=vod_series_page.menu_doms,this.is_favourite?0==$(e[t.menu_selection]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$($(e[t.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),i=vod_series_page.categories[t.category_selection],e=vod_series_page.menu_doms,"favourite"===i.category_id?(this.is_favourite||(vod_series_page.menu_selection=0,vod_series_page.keys.focused_part="category_selection",vod_series_page.toggleCategoriesBar(!0),vod_series_page.hoverCategory(vod_series_page.category_doms[vod_series_page.keys.category_selection]),vod_series_page.showCategoryContent(!0),$(e[t.menu_selection]).remove()),t.focused_part="category_selection",$(vod_series_page.category_doms[t.category_selection]).addClass("active")):$($(e[t.menu_selection]).find(".favourite-badge")).remove())):"search-page"===this.prev_route&&($("#search-page").show(),current_route="search-page",e=search_page.movie_doms[1],i=(t=search_page.keys).hor_keys[1],this.is_favourite?0==$(e[i]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$(e[i]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),$($(e[i]).find(".favourite-badge")).remove()))},fetchMovieImages:function(e,t,i){var s;e&&0!=e&&null!=e&&vod_series_page.isTMDBAllowed?$.getJSON(tmdb_prefix_url+("/movie/"+e+"/images?api_key="+tmdb_api_key),function(e){0<e.backdrops.length&&(t=tmdb_img_url+"w1280"+e.backdrops[0].file_path),(s=0<e.logos.length?tmdb_img_url+"w500"+e.logos[0].file_path:s)?($("#vod-summary-log-title").attr("src",s).show(),$("#vod-summary-name").hide()):($("#vod-summary-log-title").hide(),$("#vod-summary-name").show());try{$("#movie-image").attr("src",t).show(),$(".vod-series-summary-section-img-darken").show()}catch(e){showImg($(".vod-series-background-img"))}i&&i()}):i&&i()},fetchCast:function(e,i){$("#vod-summary-cast").hide(),vod_series_page.isTMDBAllowed&&e&&0!=e&&null!=e&&api({url:tmdb_prefix_url+("/movie/"+e+"/credits?api_key="+tmdb_api_key),headers:{"Custom-Proxy-Mode":1},success:function(e){var t;0<e.cast.length&&(t="",e.cast.forEach(function(e){t+='<div class="cast-member" onmouseenter="vod_summary_page.hoverCastMember('+e.order+')"><img src="'+(e.profile_path?tmdb_img_url+"w500"+e.profile_path:HOST+"app_src_min/images/avater.svg")+'" alt="'+e.name+'" class="cast-image"><span class="cast-name">'+e.name+"</span></div>"}),$("#vod-summary-cast #cast-container").html(t),$("#vod-summary-cast").show()),i&&i()},error:function(e){console.error("Error fetching cast data:",e),i&&i()}})},fillVodSummaryData:function(e,t){$("#vod-summary-release-date").text(t.releasedate),t.releasedate&&$("#vod-summary-release-date").siblings(".circle").show(),$("#vod-summary-release-genre").text(t.genre),t.genre&&$("#vod-summary-release-genre").siblings(".circle").show(),$("#vod-summary-release-length").text(t.duration),t.duration&&$("#vod-summary-release-length").siblings(".circle").show();var i={},s=(VodModel.saved_video_times.forEach(function(e){i[e.stream_id.toString()]=e}),i[current_movie.stream_id]),s=s?utilities.getPercentage(s.time,s.duration):0,s=(0<s?($("#vod-watch-movie-button").addClass("continue"),$("#vod-summary-watched-bar").css("width",s+"%"),$("#vod-summary-progress-percentage").text(s+"%"),$("#vod-watch-movie-btn-text").attr("data-word_code","continue_watching"),null!=typeof current_words.continue_watching?$("#vod-watch-movie-btn-text").text(current_words.continue_watching):$("#vod-watch-movie-btn-text").text("Continue Watching.")):($("#vod-watch-movie-button").removeClass("continue"),$("#vod-watch-movie-btn-text").attr("data-word_code","start_watching"),null!=typeof current_words.start_watching?$("#vod-watch-movie-btn-text").text(current_words.start_watching):$("#vod-watch-movie-btn-text").text("Start Watching.")),$("#vod-summary-release-age").text(t.age),$("#vod-summary-release-director").text(t.director),t.director&&$("#vod-summary-release-director").siblings(".circle").show(),$("#vod-summary-release-cast").text(t.cast),t.cast&&$("#vod-summary-release-cast").siblings(".circle").show(),$("#vod-summary-description").text(t.plot),(current_movie.info=t).tmdb_id&&(current_movie.tmdb_id=t.tmdb_id),current_movie.summary_downloaded=!0,"");try{(s=t.backdrop_path[0]||HOST+"app_src_min/images/default_movie_bg.png")&&$(".vod-series-background-img").attr("src",s).show()}catch(e){s=vod_series_page.current_backdrop,(vod_series_page.current_backdrop?$(".vod-series-background-img").attr("src",vod_series_page.current_backdrop):$(".vod-series-background-img").attr("src",HOST+"app_src_min/images/default_movie_bg.png")).show()}$(".vod-series-background-img-overlay").show(),current_movie.youtube_trailer=e.info.youtube_trailer,void 0!==t.youtube_trailer&&null!=t.youtube_trailer&&""!==t.youtube_trailer.trim()?(this.is_trailer_exist=!0,this.min_btn_index=0,$("#vod-watch-trailer-button").show(),$("#vod-watch-trailer-button-container").show(),vod_summary_page.playTrailerVideo(e.info.youtube_trailer)):(this.is_trailer_exist=!1,$("#vod-watch-trailer-button").hide(),$("#vod-watch-trailer-button-container").hide())},showTrailerVideo:function(){""===current_movie.youtube_trailer||null==current_movie.youtube_trailer?($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")):trailer_page.init(current_movie.youtube_trailer,current_route)},showMovie:function(){$("#vod-summary-page").addClass("hide"),vod_series_player.makeEpisodeDoms("vod-summary-page"),vod_series_player.init(current_movie,"movie","vod-summary-page","",!0)},toggleFavourite:function(){var e;this.is_protected&&!this.is_favourite?showToast("Parental Safety","Adding protected content to favourites is not allowed."):(e=this.action_btns[2],this.is_favourite=!this.is_favourite,this.is_favourite?$(e).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'):$(e).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'))},hoverButton:function(e){var t=this.keys;t.index=e,t.focused_part="action_selection",$(".cast-member").removeClass("active"),$(".vod-action-btn").removeClass("active"),$($(".vod-action-btn")[t.index]).addClass("active")},hoverCastMember:function(e){var t=this.keys;t.focused_part="cast_selection",t.cast_selection=e,$(".vod-action-btn").removeClass("active"),$(".cast-member").removeClass("active"),$($(".cast-member")[t.cast_selection]).addClass("active"),moveScrollPosition($("#cast-container"),$($(".cast-member")[t.cast_selection])[0],"horizontal",!1,!1,!0)},keyClick:function(){var e=this.keys,e=$(".vod-action-btn")[e.index];$(e).trigger("click")},handleMenuLeftRight:function(e){var t,i=this.keys;switch(i.focused_part){case"action_selection":var s=this.min_btn_index;i.index+=e,this.is_trailer_exist||(i.index+=e),i.index<s&&(i.index=2),2<i.index&&(i.index=s),this.hoverButton(i.index);break;case"cast_selection":i.cast_selection+=e,$(".cast-member")&&(t=$(".cast-member").length),i.cast_selection<0&&(i.cast_selection=0),i.cast_selection>=t&&(i.cast_selection=t-1),this.hoverCastMember(i.cast_selection);break;default:this.hoverButton(1)}},HandleKey:function(e){var t=this.keys;if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.hoverButton(t.index);break;case tvKey.DOWN:this.hoverCastMember(t.cast_selection);break;case tvKey.ENTER:this.keyClick();break;case tvKey.YELLOW:this.toggleFavourite()}},playTrailerVideo:function(e){}},vod_series_player={player:null,back_url:"",show_control:!1,timeOut:null,has_episodes:!1,keys:{focused_part:"control_bar",control_bar:0,info_bar:0,operation_modal:0,subtitle_audio_selection_modal:0,audio_selection_modal:0,aspect_ratio_selection:0,prev_focus:"",resume_bar:0,episode_selection:0,subtitle_adjust_selection:0,leave_popup_selection:1},current_subtitle_index:-1,current_audio_track_index:-1,subtitle_audio_menus:[],forwardTimer:null,current_time:0,show_subtitle:!1,show_audio_track:!1,video_control_doms:$("#vod-series-video-controls-container .video-control-icon i"),video_info_doms:$("#vod-series-video-controls-container .video-info-btn"),vod_info_timer:null,current_movie:{},resume_time:0,resume_timer:null,episode_doms:[],resume_bar_doms:$("#video-resume-modal .resume-action-btn"),seek_timer:null,seek_interval_timer:null,current_movie_type:"",video_duration:0,last_key_time:0,slider_element:$("#vod-series-video-progressbar-container .video-progress-bar-slider")[0],subtitle_loading:!1,subtitle_loaded:!1,fw_timer:null,subtitle_adjust_items:$(".subtitle-adjust-item"),subtitle_adjust_time:0,aspect_ratio_doms:$("#aspect-ratio-modal-body div"),showNextVideo_debounce:!1,init:function(e,t,i,s,o){this.current_movie=e,this.current_time=0,this.video_duration=0,this.fw_timer=null,this.subtitle_adjust_time=0,$("#vod-summary-page").addClass("hide"),$("#series-summary-page").addClass("hide"),$("#vod-series-player-page").removeClass("hide"),this.current_movie_type=t,this.showControlBar(o),o&&this.makeEpisodeDoms();var a,n,r,o=$(this.video_control_doms[2]),l=($(o).removeClass("fa-play"),$(o).addClass("fa-pause"),$("#vod-series-player-page").find(".video-current-time").text("--:--"),$("#vod-series-player-page").find(".video-total-time").text("--:--"),this),o=this.slider_element;$(o).attr({min:0,max:100}),$(o).rangeslider({polyfill:!1,rangeClass:"rangeslider",onSlideEnd:function(e,t){l.sliderPositionChanged(t)}}),$(o).val(0).change(),$(o).rangeslider("update"),clearTimeout(this.resume_timer),"movie"===t?("xc"===settings.playlist_type?a=getMovieUrl(e.stream_id,"movie",e.container_extension):"general"===settings.playlist_type&&(a=e.url),$("#vod-series-video-title").html(e.name)):"series"===t?("xc"===settings.playlist_type?a=getMovieUrl(e.id,"series",e.container_extension):"general"===settings.playlist_type&&(a=e.url),$("#vod-series-video-title").html(e.title)):"epg"===t&&(o="channel-page"===i?(a=s,getAtob((n=channel_page.programmes[channel_page.keys.epg_selection]).title)+"  <span class='player-epg-title-time'>"+n.start.substr(11)+"~"+n.stop.substr(11)+"</span>"):(n=this.current_movie,a=LiveModel.getProgrammeVideoUrl(epg_page.movie.stream_id,n,!0).url,getAtob(n.title)+"  <span class='player-epg-title-time'>"+n.start.substr(11)+"~"+n.stop.substr(11)+"</span>"),$("#vod-series-video-title").html(o)),this.back_url=i;try{media_player.close()}catch(e){}try{media_player.init("vod-series-player-video","vod-series-player-page"),media_player.setDisplayArea()}catch(e){}try{media_player.playAsync(window.PROXY_URL+a)}catch(e){}if(r="movie"===t?"stream_id":"id",this.resume_time=0,"movie"===t||"series"===t)if(r=e[r].toString(),"movie"===t){for(var c=VodModel.saved_video_times,d=this.resume_time=0;d<c.length;d++)if(c[d].stream_id==r){this.resume_time=c[d].time;break}}else if("series"===t)for(c=SeriesModel.saved_video_times,d=0;d<c.length;d++)if(c[d].stream_id==current_series.series_id){var h=c[d].video_times,u=series_summary_page.keys.episode_selection.toString(),_=series_summary_page.current_season_index.toString();if(h[_]&&h[_][u]){this.resume_time=h[_][u].time;break}}current_route="vod-series-player-video",this.current_subtitle_index=-1,this.current_audio_track_index=-1,this.show_subtitle=!1},sliderPositionChanged:function(e){this.hoverSlider(),media_player.videoObj.currentTime=e,this.current_time=e,$(this.slider_element).val(e).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(e))},makeEpisodeDoms:function(){var e,s;this.keys.episode_selection=0,"series"===this.current_movie_type?(e=current_season.episodes,this.episodes=e,this.has_episodes=!0,s="",e.map(function(e,t){var i;e.info.movie_image?i=e.info.movie_image:series_summary_page.current_series_backdrop_image&&(i=series_summary_page.current_series_backdrop_image),s+='<div class="player-season-item"                        onclick="vod_series_player.showSelectedEpisode()"                        onmouseenter="vod_series_player.hoverEpisode('+t+')"                    >                        <div class="player-episodes-image-container">                            <img src="'+i+'" />                        </div>                        <div class="player-episode-title-container">                            <div class="player-episode-number">'+(t+1)+'</div>                             <div class="player-episode-title max-line-2">'+e.title+"</div>                        </div>                    </div>"}),$("#player-seasons-container").html(s),this.episode_doms=$(".player-season-item"),$("#player-seasons-container").removeClass("expanded"),$("#player-seasons-container").show()):(this.has_episodes=!1,$("#player-seasons-container").html(""),this.episode_doms=$(".player-season-item"),this.episode_doms=[],$("#player-seasons-container").hide())},showResumeBar:function(){var e,t=this.keys;0<this.resume_time&&("resume_bar"!==t.focused_part&&(t.prev_focus=t.focused_part),e=1e3,"lg"!==platform&&"vidaa"!==platform&&"zeasn"!==platform&&"titanos"!==platform||(e=1),e=media_player.formatTime(this.resume_time/e),$("#vod-resume-time").text(e),$("#video-resume-modal").show(),this.hideControlBar(),clearTimeout(this.resume_timer),this.resume_timer=null,"resume_bar"!=t.focused_part&&(t.prev_focus=t.focused_part),"subtitle_audio_selection_modal"!=t.focused_part?this.hoverResumeBtn(0):(this.hoverResumeBtn(0),t.focused_part="subtitle_audio_selection_modal",t.prev_focus="resume_bar"))},Exit:function(){this.saveVideoTime(),current_route=this.back_url;try{media_player.close()}catch(e){console.log(e)}$("#"+media_player.parent_id).find(".video-error").hide(),$("#"+media_player.parent_id).find(".subtitle-container").text(""),$("#vod-series-player-page").addClass("hide")},saveVideoTime:function(){try{var e,t,i,s;if("samsung"===platform){s=i=1e4;try{e=webapis.avplay.getCurrentTime(),t=webapis.avplay.getDuration()}catch(e){}}else"lg"!==platform&&"vidaa"!==platform&&"zeasn"!==platform&&"titanos"!==platform||(s=10,e=media_player.videoObj.currentTime,t=media_player.videoObj.duration,i=10);"develop"===env&&(t=(e=25e3)+5e4*Math.random());var o,a,n,r=this.current_movie;if(i<=t-e&&s<=e){if("movie"===this.current_movie_type){if(checkForAdult(r,"movie",o=VodModel.getCategories(!0,!1)))return;VodModel.saveVideoTime(r.stream_id,e,t),VodModel.addToWatchList(r),"vod-series-page"===this.back_url&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").addClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-progress").css({width:e/t*100+"%"}),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress"))}"series"===this.current_movie_type&&(o=SeriesModel.getCategories(!0,!1),checkForAdult(current_series,"movie",o)||(a=SeriesModel.saveVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection,e,t),SeriesModel.addToWatchList(current_series),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-duration").addClass("has-progress"),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-progress").css({width:e/t*100+"%"}),series_summary_page.series_video_times=a,"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress")))}else t-e<i&&("movie"===this.current_movie_type&&(VodModel.removeVideoTime(r.stream_id),"vod-series-page"===this.back_url)&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").removeClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress")),"series"===this.current_movie_type)&&((n=SeriesModel.removeVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection))[0]&&"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress"),series_summary_page.series_video_times=n[1])}catch(e){console.log("here error",e)}},goBack:function(){$(".modal").modal("hide");var e=this.keys;console.log(e.focused_part),"resume_bar"===e.focused_part&&($("#video-resume-modal").hide(),"resume_bar"!=e.prev_focus?e.focused_part=e.prev_focus:e.focused_part="info_bar",clearTimeout(this.resume_timer)),"leave_popup_selection"==e.focused_part?this.hideLeavePopup():this.show_control?this.hideControlBar():"control_bar"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part&&"slider"!==e.focused_part||this.showLeavePopup(),"subtitle_audio_selection_modal"===e.focused_part&&(e.focused_part="control_bar",$("#subtitle-selection-modal").modal("hide")),"vod_info"===e.focused_part&&($("#vod-video-info-container").hide(),clearTimeout(this.vod_info_timer),e.focused_part=e.prev_focus),"subtitle_adjust_selection"===e.focused_part&&($("#subtitle-time-adjust-modal").hide(),e.focused_part="control_bar"),"aspect_ratio_modal"===e.focused_part&&($("aspect-ratio-modal").modal("hide"),e.focused_part=e.prev_focus)},playPauseVideo:function(e){this.showControlBar(!1);var t=this.video_control_doms,i=$(t[2]);switch(e){case"pause":if(media_player.state===media_player.STATES.PLAYING)try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}break;case"play":if(media_player.state===media_player.STATES.PAUSED)try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}break;default:if(media_player.state===media_player.STATES.PAUSED){console.log("We are in pause state, will play");try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}}else if(media_player.state===media_player.STATES.PLAYING){console.log("We are in playing state, will pause");try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}}}},seekTo:function(e){if("samsung"===platform){var t=(new Date).getTime()/1e3;if(!(t-this.last_key_time<.1)){if(this.last_key_time=t,0===this.current_time&&(this.current_time=media_player.current_time/1e3),0!=this.video_duration)i=this.video_duration;else try{i=webapis.avplay.getDuration()/1e3,this.video_duration=i}catch(e){this.video_duration=i=0}if(i)if((s=this.current_time+e)<0)this.showNextVideo(-1);else if(i<=s)this.showNextVideo(1);else{if(this.current_time=s,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)),$(this.slider_element).val(s).change(),clearTimeout(this.seek_timer),media_player.state===media_player.STATES.PLAYING)try{media_player.pause()}catch(e){}$("#"+media_player.parent_id).find(".video-loader").show(),this.seek_timer=setTimeout(function(){webapis.avplay.seekTo(1e3*s),setTimeout(function(){try{media_player.play()}catch(e){}},200)},500)}}}else{var i,s;0===this.current_time&&(this.current_time=media_player.videoObj.currentTime),(i=media_player.videoObj.duration)<=(s=(s=this.current_time+e)<0?0:s)&&(s=i),this.current_time=s,media_player.videoObj.currentTime=s,0<i&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),SrtOperation.stopOperation(),this.fw_timer&&(clearTimeout(this.fw_timer),this.fw_timer=null),this.fw_timer=setTimeout(function(){SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1},200),$(this.slider_element).val(s).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)))}},showSelectedEpisode:function(){var e=series_summary_page.keys,t=this.keys,i=series_summary_page.episode_doms;if(e.episode_selection!=t.episode_selection){this.saveVideoTime(),$(i).removeClass("active"),e.episode_selection=t.episode_selection,$(i[e.episode_selection]).addClass("active");i=this.episodes[t.episode_selection];this.resume_time=0;try{media_player.close()}catch(e){}current_episode=i,this.init(current_episode,"series","episode-page","",!1),this.hoverEpisode(t.episode_selection)}},showNextVideo:function(e){if(!this.showNextVideo_debounce){this.showNextVideo_debounce=!0;var t=this;switch(setTimeout(function(){t.showNextVideo_debounce=!1},1e3),this.saveVideoTime(),this.resume_time=0,this.back_url){case"vod-series-page":var i=vod_series_page.menu_doms;(s=vod_series_page.keys).menu_selection+=e,s.menu_selection<0?s.menu_selection=0:s.menu_selection>=vod_series_page.movies.length?s.menu_selection=vod_series_page.movies.length-1:($(i).removeClass("active"),$(i[s.menu_selection]).addClass("active"),current_movie=vod_series_page.movies[s.menu_selection],this.init(current_movie,"movie","vod-series-page","",!1));break;case"home-page":var s=home_page.keys;if("movie"===this.current_movie_type){if(o=home_page.keys.latest_movie_selection+e,i=home_page.latest_movies,o<0)return;if(o>=i.length)return this.hideControlBar(),void this.goBack();s.latest_movie_selection=o,current_movie=home_page.latest_movies[o],this.init(current_movie,"movie","home-page","",!1)}break;case"episode-page":var o,s=series_summary_page.keys,i=series_summary_page.episode_doms;$(i).removeClass("active"),s.episode_selection+=e,s.episode_selection<0?s.episode_selection=0:s.episode_selection>=i.length?s.episode_selection=i.length-1:($(i[s.episode_selection]).addClass("active"),o=current_season.episodes,current_episode=o[s.episode_selection],this.init(current_episode,"series","episode-page","",!1));break;case"channel-page":i=channel_page.keys.epg_selection;(i+=e)<0||i>=channel_page.programmes.length||(channel_page.keys.epg_selection=i,channel_page.showEpgVideo());break;case"search-page":(s=search_page.keys).hor_keys[1]+=e,s.hor_keys[1]<0?s.hor_keys[1]=0:(o=search_page.filtered_movies[1],s.hor_keys[1]>=o.length?s.hor_keys[1]=o.length-1:(this.saveVideoTime(),current_movie=o[s.hor_keys[1]],this.init(current_movie,"movie","search-page","",!1)));break;case"catch-up-detail":(s=epg_page.keys).programme_selection+=e,s.programme_selection<0?s.programme_selection=0:s.programme_selection>=epg_page.programme_doms.length?s.programme_selection=epg_page.programme_doms.length-1:this.init(epg_page.current_programmes[s.programme_selection],"epg","catch-up-detail",!1)}}},showControlBar:function(e){$("#vod-series-video-controls-container").slideDown(),$("#vod-series-video-title").slideDown(),this.show_control=!0;var t=this;e&&(this.hoverVideoControlIcon(2),$("#player-seasons-container").removeClass("expanded")),clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){t.hideControlBar()},1e4)},hideControlBar:function(){$("#vod-series-video-controls-container").slideUp(),$("#vod-series-video-title").slideUp(),this.show_control=!1},makeMediaTrackElement:function(e,t){var s,i,o="",a=0;return"TEXT"===t&&(a=1,o='<div class="modal-operation-menu-type-2 subtitle-item"                    onmouseenter="vod_series_player.hoverSubtitle(0)"                     onclick="vod_series_player.handleMenuClick()"                 >                   <input class="magic-radio" type="radio" name="radio" id="disable-subtitle" value="-1">                   <label for="disable-subtitle">Disabled</label>                </div>'),"samsung"===platform?(s="TEXT"!==t?"language":"track_lang",e.map(function(e,t){var i=e.extra_info;o+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player.hoverSubtitle('+(t+a)+')"                     onclick="vod_series_player.handleMenuClick()"                 >                    <input class="magic-radio" type="radio" name="radio"                        value="'+e.index+'"                    >                    <label>'+i[s]+"</label>                </div>"})):(i="TEXT"===t?"Subtitle ":"Track ",e.map(function(e,t){e=e.language;e?language_codes[e]&&(e=language_codes[e]):e=i+(t+1),o+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player.hoverSubtitle('+(t+a)+')"                         onclick="vod_series_player.handleMenuClick()"                     >                        <input class="magic-radio" type="radio" name="radio"                            value="'+t+'">                        <label>'+e+"</label>                    </div>"})),o},showSubtitleAudioModal:function(e){this.hideControlBar();var t,i,s,o=this.keys;try{$("#subtitle-loader-container").hide(),this.subtitle_loading=!1,"samsung"!==platform&&"TEXT"===e?this.subtitle_loaded?0<media_player.subtitles.length?this.renderSubtitles(e,media_player.subtitles):this.showEmptySubtitleMessage(e):($("#subtitle-selection-container").html(""),"subtitle_audio_selection_modal"!==o.focused_part&&(o.prev_focus=o.focused_part),this.hoverSubtitle(-2),this.subtitle_loading=!0,$("#subtitle-selection-modal").modal("show"),$("#subtitle-loader-container").show(),i=settings.playlist_type,s=this.current_movie,"movie"===this.current_movie_type?s.tmdb_id?this.getSubtitlesForLG():s.tmdb?(s.tmdb_id=s.tmdb,this.getSubtitlesForLG()):"xc"!==i||s.summary_downloaded?this.getTmdbID(s,"movie"):this.getMovieDetail():(console.log(current_series),current_series.tmdb||current_series.info&&current_series.info.tmdb||s.info&&s.info.tmdb_id?this.getSubtitlesForLG():this.getTmdbID(current_series,"series"))):0<(t=media_player.getSubtitleOrAudioTrack(e)).length?this.renderSubtitles(e,t):showToast("Sorry","TEXT"===e?"No Subtitles exists":"No Audios exists")}catch(e){console.log(e),$("#vod-series-player-operation-modal").modal("hide"),showToast("Sorry","Video not loaded yet")}},showAspectRatioMenu:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="aspect_ratio_modal",this.hideControlBar(),$("#aspect-ratio-modal").modal("show")},getMovieDetail:function(){var t=this,i=this.current_movie;"xc"===settings.playlist_type&&api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+i.stream_id,success:function(e){e=e.info;t.current_movie.info=e,i.summary_downloaded=!0,e.tmdb_id?(t.current_movie.tmdb_id=e.tmdb_id,t.getSubtitlesForLG()):t.getTmdbID(i,"movie")},fail:function(e){console.log(e),t.getTmdbID(i,"movie")}})},getTmdbID:function(r,l){var e="movie"===l?r.info&&(r.info.o_name||r.info.name)||r.name:(r.info&&r.info.name?r.info:r).name,e=getRealMovieName(e),c=e.name.toLowerCase(),d=(e.year,e.country,this);api({method:"get",url:tmdb_prefix_url+("movie"===l?"/search/movie":"/search/tv")+"?api_key="+tmdb_api_key+"&query="+c,success:function(e){if(e.results&&0<e.results.length){var t=e.results;if(console.log(e),1==t.length)"movie"===l?d.current_movie.tmdb_id=t[0].id:current_series.tmdb=t[0].id,d.getSubtitlesForLG();else if("movie"===l){e=r.info;if(e&&e.releasedate){for(var i=e.releasedate,s=0;s<t.length;s++)if(t[s].release_date===i){d.current_movie.tmdb_id=t[s].id;break}}else{for(var o=0,s=0;s<t.length;s++)c.includes(t[s].title.toLowerCase())&&(o++,a=s);1==o&&(console.log(t[a]),d.current_movie.tmdb_id=t[a].id)}d.current_movie.tmdb_id?d.getSubtitlesForLG():d.showEmptySubtitleMessage("TEXT")}else{console.log("here series tmdb api results",t);for(var a,o=0,n=current_series.plot?current_series.plot.toLowerCase().trim():"",s=0;s<t.length;s++)if((c.includes(t[s].name.toLowerCase())||c.includes(t[s].original_name.toLowerCase()))&&(o++,a=s,n)&&n==t[s].overview.toLowerCase().trim()){console.log("here same overview"),o=1;break}1==o?(console.log(t[a]),current_series.tmdb=t[a].id,d.getSubtitlesForLG()):d.showEmptySubtitleMessage("TEXT")}}else d.showEmptySubtitleMessage("TEXT")},error:function(e){d.showEmptySubtitleMessage("TEXT")}})},getSubtitlesForLG:function(){var e,t,i,s=this;"movie"===this.current_movie_type?e={tmdb_id:this.current_movie.tmdb_id}:(t=current_season.episodes[series_summary_page.keys.episode_selection],current_series.tmdb?i=current_series.tmdb:current_series.info&&current_series.info.tmdb&&(i=current_series.info.tmdb),i?(e={movie_type:"episode",season_number:current_season.season_number||series_summary_page.keys.season_selection+1,episode_number:t.episode_num||series_summary_page.keys.episode_selection+1,tmdb_id:i},t.info&&t.info.tmdb_id&&(e.episode_tmdb_id=t.info.tmdb_id)):t.info&&t.info.tmdb_id&&(e={movie_type:"episode",episode_tmdb_id:t.info.tmdb_id})),api({method:"post",url:"https://ibosub.com/api/get-subtitles-update",data:e,dataType:"json",success:function(e){s.subtitle_loading=!1,s.subtitle_loaded=!0,$("#subtitle-loader-container").hide(),"success"===e.status&&(0<e.subtitles.length?(media_player.subtitles=e.subtitles,media_player.srt_map=e.srt_map,media_player.movie_list_id=e.movie_list_id,s.renderSubtitles("TEXT",media_player.subtitles)):s.showEmptySubtitleMessage("TEXT"))},error:function(e){s.showEmptySubtitleMessage("TEXT")}})},renderSubtitles:function(e,t){var i,s,o=this,a=this.keys;0<t.length&&("subtitle_audio_selection_modal"!=a.focused_part&&(a.prev_focus=a.focused_part),"TEXT"==e?$("#subtitle-modal-title").text("Subtitle"):$("#subtitle-modal-title").text("Audio Track"),a.focused_part="subtitle_audio_selection_modal",$("#subtitle-selection-modal .modal-operation-menu-type-2").removeClass("active"),a=this.makeMediaTrackElement(t,e),$("#subtitle-selection-container").html(a),$("#subtitle-selection-modal").modal("show"),i=$("#subtitle-selection-modal .subtitle-item"),this.subtitle_audio_menus=i,$(i[0]).find("input").prop("checked",!0),this.hoverSubtitle(0),s="TEXT"===e?this.current_subtitle_index:this.current_audio_track_index,this.subtitle_audio_menus.map(function(e,t){t=parseInt($(t).find("input").val());console.log(t),t==s&&(console.log("here"+s),$(i).find("input").prop("checked",!1),$(i[e]).find("input").prop("checked",!0),o.hoverSubtitle(e))}),t=$("#subtitle-selection-modal").find(".modal-btn-2"),$(t).removeClass("active"))},showEmptySubtitleMessage:function(e){$("#subtitle-selection-modal").modal("hide"),"TEXT"===e?(this.subtitle_loaded=!1,this.subtitle_loading=!1,media_player.subtitles=[],showToast("Sorry","No Subtitles exists")):showToast("Sorry","No Audios exists");e=this.keys;"subtitle_audio_selection_modal"==e.focused_part&&(e.focused_part=e.prev_focus)},cancelSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},confirmSubtitle:function(){if($("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,$("#subtitle-modal-title").text().toLowerCase().includes("subtitle")){var t,i=this;this.current_subtitle_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val(),-1==this.current_subtitle_index||"samsung"==platform||(t=media_player.subtitles[this.current_subtitle_index].file_id.toString(),media_player.srt_map[t])?this.subtitleChanged():api({method:"post",url:"https://ibosub.com/api/get-single-subtitle-content",data:{movie_list_id:media_player.movie_list_id,file_id:t},dataType:"json",success:function(e){"success"===e.status&&(media_player.srt_map[t]=e.content,i.subtitleChanged())},error:function(e){showToast("Sorry","Something error caused while downloading subtitles for current language, please try again later")}})}else{this.current_audio_track_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val();try{media_player.setSubtitleOrAudioTrack("AUDIO",parseInt(this.current_audio_track_index))}catch(e){}console.log(this.current_audio_track_index)}},subtitleChanged:function(){try{this.show_subtitle=!0,media_player.setSubtitleOrAudioTrack("TEXT",parseInt(this.current_subtitle_index))}catch(e){}},removeAllActiveClass:function(){$(this.video_control_doms).removeClass("active"),$(this.video_info_doms).removeClass("active"),$(this.video_control_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$("#vod-series-player-page .rangeslider").removeClass("active")},showSubtitleAdjustModal:function(){var e=this.keys;this.hideControlBar(),"subtitle_adjust_selection"!=e.focused_part&&(e.prev_focus=e.focused_part),$("#subtitle-adjust-time").val(this.subtitle_adjust_time),$("#subtitle-time-adjust-modal").show(),this.hoverSubtitleAdjustBtn(0)},saveSubtitleAdjustTime:function(){var e=(e=$("#subtitle-adjust-time").val())||0;this.subtitle_adjust_time!=e&&(this.subtitle_adjust_time=e,SrtOperation.srt)&&0<SrtOperation.srt.length&&(SrtOperation.setTimeDifference(e),SrtOperation.stopOperation(),SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1),this.goBack()},hoverSubtitleAdjustBtn:function(e){var t=this.keys;t.focused_part="subtitle_adjust_selection",t.subtitle_adjust_selection=e,$(this.subtitle_adjust_items).removeClass("active"),$(this.subtitle_adjust_items[e]).addClass("active")},hoverSubtitle:function(e){var t=this.keys;t.focused_part="subtitle_audio_selection_modal",$(this.subtitle_audio_menus).removeClass("active"),0<=e?(t.subtitle_audio_selection_modal=e,t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2&&moveScrollPosition($("#subtitle-selection-container"),this.subtitle_audio_menus[t.subtitle_audio_selection_modal],"vertical",!1)):t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length+e,$(this.subtitle_audio_menus[t.subtitle_audio_selection_modal]).addClass("active")},hoverSlider:function(){$("#player-seasons-container").removeClass("expanded"),this.removeAllActiveClass(),this.keys.focused_part="slider",$("#vod-series-player-page .rangeslider").addClass("active")},hoverVideoControlIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1),this.removeAllActiveClass();var t=this.keys;t.focused_part="control_bar",t.control_bar=e,$(this.video_control_doms[e]).addClass("active")},hoverVideoInfoIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="info_bar",t.info_bar=e,$(this.video_info_doms[e]).addClass("active")},hoverEpisode:function(e){$("#player-seasons-container").addClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="episode_selection",t.episode_selection=e,$(this.episode_doms[e]).addClass("active"),moveScrollPosition($("#player-seasons-container"),this.episode_doms[t.episode_selection],"horizontal",!1)},hoverAspectRatioItem:function(e){var t=this.keys;"aspect_ratio_modal"!=t.focused_part&&(t.prev_focus=t.focused_part,t.focused_part="aspect_ratio_modal"),t.aspect_ratio_selection=e,$(this.aspect_ratio_doms).removeClass("active"),$(this.aspect_ratio_doms[e]).addClass("active"),moveScrollPosition($("#aspect-ratio-modal-body"),$(this.aspect_ratio_doms[e]),"vertical",!1)},hoverResumeBtn:function(e){var t=this.keys;t.resume_bar=e,t.focused_part="resume_bar",$(this.resume_bar_doms).removeClass("active"),$(this.resume_bar_doms[e]).addClass("active"),clearTimeout(this.resume_timer),this.resume_timer=setTimeout(function(){$("#video-resume-modal").hide(),"resume_bar"==t.focused_part?"resume_bar"!=t.prev_focus?t.focused_part=t.prev_focus:t.focused_part="info_bar":"subtitle_audio_selection_modal"===t.focused_part&&(t.prev_focus="info_bar")},15e3)},changeAspectRatio:function(e){e=e||"16:9",setTimeout(function(){try{media_player.setDisplayArea(e)}catch(e){console.log(e)}},0)},showLeavePopup:function(){this.keys.focused_part="leave_popup_selection",$("#confirm-exit-movie-popup-container").css("display","flex"),this.hoverLeavePopupBtn(1)},hideLeavePopup:function(){this.keys.focused_part="control_bar",$("#confirm-exit-movie-popup-container").hide()},hoverLeavePopupBtn:function(e){this.keys.leave_popup_selection=e,this.keys.focused_part="leave_popup_selection",$(".confirm-exit-movie-btn").removeClass("active"),$($(".confirm-exit-movie-btn")[e]).addClass("active")},exitPlayer:function(){switch(this.hideLeavePopup(),this.Exit(),this.back_url){case"vod-series-page":current_route="vod-series-page",$("#vod-series-page").removeClass("hide"),moveScrollPosition($("#vod-series-menus-container"),vod_series_page.menu_doms[vod_series_page.keys.menu_selection],"vertical",!1);break;case"vod-summary-page":current_route="vod-summary-page",$("#vod-summary-page").removeClass("hide");break;case"home-page":current_route="home-page",$("#home-page").removeClass("hide"),home_page.hoverLatestMovie(home_page.keys.latest_movie_selection,"movie");break;case"episode-page":current_route="series-summary-page",$("#series-summary-page").removeClass("hide"),series_summary_page.hoverEpisode(series_summary_page.keys.episode_selection);break;case"channel-page":channel_page.reEnter(),channel_page.hoverEpgItem(channel_page.keys.channel_selection,!0);break;case"search-page":$("#search-page").show();var e="movie"===this.current_movie_type?1:2;search_page.keys.hor_keys[e]>=search_page.movie_doms[e].length&&(search_page.keys.hor_keys[e]=search_page.movie_doms[e].length-1),search_page.hoverMovie(search_page.keys.hor_keys[e],e);break;case"catch-up-detail":$("#catchup-detail-page").removeClass("hide"),epg_page.hoverProgramme(epg_page.keys.programme_selection)}},handleMenuClick:function(){console.log("FOCUSED PART",this.focused_part),console.log("PREV FOCUS",this.prev_focus);var e=this.keys;if("resume_bar"===e.focused_part&&"none"===$("#video-resume-modal").css("display")&&(e.focused_part="control_bar"),this.show_control||"control_bar"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part&&"slider"!==e.focused_part)switch(e.focused_part){case"control_bar":this.showControlBar(!1),$(this.video_control_doms[e.control_bar]).trigger("click");break;case"info_bar":this.show_control&&(this.showControlBar(!1),$(this.video_info_doms[e.info_bar]).find(".video-info-icon").trigger("click"));break;case"episode_selection":this.showControlBar(!1),$(this.episode_doms[e.episode_selection]).trigger("click");break;case"resume_bar":if($("#video-resume-modal").hide(),e.focused_part=e.prev_focus,0==e.resume_bar)if("samsung"===platform)try{webapis.avplay.getCurrentTime()<this.resume_time&&(webapis.avplay.seekTo(this.resume_time),$(this.slider_element).val(this.resume_time/1e3).change())}catch(e){}else if("lg"===platform||"vidaa"===platform||"zeasn"===platform||"titanos"===platform)try{media_player.videoObj.currentTime<this.resume_time&&(media_player.videoObj.currentTime=this.resume_time,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(this.resume_time)),0<media_player.videoObj.duration)&&$(this.slider_element).val(this.resume_time).change()}catch(e){}break;case"subtitle_audio_selection_modal":e.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).trigger("click"):($(this.subtitle_audio_menus).find("input").prop("checked",!1),$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).find("input").prop("checked",!0));break;case"subtitle_adjust_selection":0==e.subtitle_adjust_selection?$(this.subtitle_adjust_items[0]).focus():$(this.subtitle_adjust_items[e.subtitle_adjust_selection]).trigger("click");break;case"aspect_ratio_modal":$(this.aspect_ratio_doms[e.aspect_ratio_selection]).trigger("click");break;case"leave_popup_selection":1==e.leave_popup_selection&&this.exitPlayer(),0==e.leave_popup_selection&&this.hideLeavePopup()}else this.showControlBar(!0)},handleMenuLeftRight:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":this.seekTo(30*e),this.showControlBar(!1);break;case"control_bar":t.control_bar+=e,t.control_bar<0&&(t.control_bar=0),t.control_bar>=this.video_control_doms.length?(t.control_bar=this.video_control_doms.length-1,this.hoverVideoInfoIcon(0)):this.hoverVideoControlIcon(t.control_bar);break;case"info_bar":var i=3;this.is_catchup&&(i=2),t.info_bar+=e,2==t.info_bar&&"samsung"==platform&&(t.info_bar+=e),t.info_bar>i&&(t.info_bar=i),t.info_bar<0?(t.info_bar=0,this.hoverVideoControlIcon(t.control_bar)):this.hoverVideoInfoIcon(t.info_bar);break;case"episode_selection":$(this.episode_doms).removeClass("active"),t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length&&(t.episode_selection=this.episode_doms.length-1),this.hoverEpisode(t.episode_selection);break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2?0<e?this.hoverSubtitle(-1):this.hoverSubtitle(-2):(i=this.subtitle_audio_menus.length,t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<i-2&&(t.subtitle_audio_selection_modal=i-2),t.subtitle_audio_selection_modal>=i&&(t.subtitle_audio_selection_modal=i-1),this.hoverSubtitle(t.subtitle_audio_selection_modal));break;case"subtitle_adjust_selection":t.subtitle_adjust_selection=0<e?2:1,this.hoverSubtitleAdjustBtn(t.subtitle_adjust_selection);break;case"leave_popup_selection":t.leave_popup_selection+=e,1<t.leave_popup_selection&&(t.leave_popup_selection=1),t.leave_popup_selection<0&&(t.leave_popup_selection=0),this.hoverLeavePopupBtn(t.leave_popup_selection)}else this.seekTo(30*e)},handleMenuUpDown:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part&&"episode_selection"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":e<0&&this.hoverVideoControlIcon(2),this.has_episodes&&0<e&&this.hoverEpisode(t.episode_selection);break;case"control_bar":0<e&&this.hoverSlider();break;case"info_bar":0<e&&this.hoverSlider(2);break;case"episode_selection":e<0&&this.hoverSlider();break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?e<0&&(t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length-3):t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<0&&(t.subtitle_audio_selection_modal=0),this.hoverSubtitle(t.subtitle_audio_selection_modal);break;case"subtitle_adjust_selection":0<t.subtitle_adjust_selection?e<0&&this.hoverSubtitleAdjustBtn(0):0<e&&this.hoverSubtitleAdjustBtn(1);break;case"resume_bar":var i=this.resume_bar_doms;t.resume_bar+=e,t.resume_bar<0&&(t.resume_bar=0),t.resume_bar>=i.length&&(t.resume_bar=i.length-1),this.hoverResumeBtn(t.resume_bar);break;case"aspect_ratio_modal":t.aspect_ratio_selection+=e,t.aspect_ratio_selection<0&&(t.aspect_ratio_selection=0),t.aspect_ratio_selection>=this.aspect_ratio_doms.length&&(t.aspect_ratio_selection=this.aspect_ratio_doms.length-1),this.hoverAspectRatioItem(t.aspect_ratio_selection)}else this.showControlBar(!0)},HandleKey:function(e){switch(console.log("CURRENT FOCUSED PART",this.keys.focused_part),e.keyCode){case tvKey.MediaFastForward:this.seekTo(30);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.MediaRewind:this.seekTo(-30);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.MediaPause:this.playPauseVideo("pause");break;case tvKey.MediaPlay:this.playPauseVideo("play");break;case tvKey.MediaPlayPause:this.playPauseVideo("");break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:"movie"===this.current_movie_type?current_movie.is_favourite?(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),current_movie.is_favourite=!1):(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),current_movie.is_favourite=!0):current_series.is_favourite?(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),current_series.is_favourite=!1):(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),current_series.is_favourite=!0)}}},trailer_page={player:null,done:!1,back_url:"home-page",is_paused:!1,is_loading:!1,init:function(e,t){showLoader(!0),this.is_loading=!0,this.back_url=t,this.is_paused=!1,$("#vod-summary-page").addClass("hide"),$("#series-summary-page").addClass("hide"),$("#trailer-player-page").show(),current_route="trailer-page",trailer_page.player=new YT.Player("trailer-player",{height:"100%",width:"100%",videoId:e,events:{onReady:trailer_page.onPlayerReady,onStateChange:trailer_page.onPlayerStateChange}}),$("#trailer-player").on("load",function(){$("#trailer-player").contents().find(".ytp-chrome-top-buttons").hide(),$("#trailer-player").contents().find(".ytp-right-controls").hide(),showLoader(!1),trailer_page.is_loading=!1,$(document.getElementById("trailer-player").contentWindow.document).keydown(function(e){switch(e.keyCode){case tvKey.RETURN:trailer_page.goBack();break;case tvKey.RIGHT:trailer_page.seekTo(5);break;case tvKey.LEFT:trailer_page.seekTo(-5);break;case tvKey.ENTER:trailer_page.playOrPause()}})})},goBack:function(){current_route=this.back_url,this.player.stopVideo(),$("#trailer-player-page").hide(),$("#trailer-player").remove(),$("#trailer-player-page").html('<div id="trailer-player"></div>'),"vod-summary-page"===this.back_url&&$("#vod-summary-page").removeClass("hide"),"series-summary-page"===this.back_url&&$("#series-summary-page").removeClass("hide")},onPlayerReady:function(e){e.target.playVideo()},onPlayerStateChange:function(e){},seekTo:function(e){var e=this.player.getCurrentTime()+e,t=this.player.getDuration();this.player.seekTo(e=t<(e=e<0?0:e)?t:e)},playOrPause:function(){this.is_paused?this.player.playVideo():this.player.pauseVideo(),this.is_paused=!this.is_paused},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.RIGHT:this.seekTo(5);break;case tvKey.LEFT:this.seekTo(-5);break;case tvKey.ENTER:this.playOrPause()}}},series_summary_page={keys:{focused_part:"season_selection",season_selection:0,episode_selection:0},min_btn_index:0,season_doms:[],episode_doms:[],current_season_index:0,hover_season_timer:null,is_loading:!1,prev_route:"",series_video_times:{},current_series_backdrop_image:"",init:function(e){this.prev_route=e,this.current_season_index=-1,showLoader(!0),this.is_loading=!0,this.series_video_times={};for(var t=SeriesModel.saved_video_times,i=0;i<t.length;i++)if(t[i].stream_id==current_series.series_id){this.series_video_times=t[i].video_times;break}var s,r=this,e=(current_route="series-summary-page",$("#season-items-container").html(""),$("#series-summary-episode-items-container").html(""),$("#series-summary-image-wrapper img").attr("src",""),$("#series-summary-page .vod-series-background-img").attr("src",""),hideImg($("#series-summary-page .vod-series-background-img")),$("#series-summary-name").text(current_series.name),$("#series-summary-release-date").text(current_series.releasedate),$("#series-summary-release-genre").text(current_series.genre),$("#series-summary-release-length").text(current_series.duration),$("#series-summary-release-director").text(current_series.director),$("#series-summary-release-cast").text(current_series.cast),$("#series-summary-description").text(current_series.plot),$("#series-summary-image-wrapper img").attr("src",current_series.cover||HOST+"app_src_min/images/default_movie.png"),0),e=void 0===current_series.rating||""===current_series.rating?0:parseFloat(current_series.rating);isNaN(e)&&(e=0),$("#series-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#series-rating-mark").text(e.toFixed(1)),$("#vod-series-page").addClass("hide"),$("#series-summary-page").removeClass("hide"),$("#season-items-container").scrollTop(0),"xc"===settings.playlist_type?api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_series_info&series_id="+current_series.series_id,success:function(e){current_series.info=e.info;var i=e.seasons;if(e.episodes&&(i&&0<i.length||0<Object.keys(e.episodes).length)){var s=e.episodes,t=(i&&0!=i.length?i.map(function(e){e.episodes=s[e.season_number.toString()]}):(i=[],Object.keys(s).map(function(e,t){i.push({name:"Season "+(t+1),cover:HOST+"app_src_min/images/series.png",episodes:s[e]})})),i.filter(function(e){return e.episodes&&0<e.episodes.length})),o=Object.keys(s);if(o.length>t.length){for(var a=0;a<t.length;a++)t[a].name="Season "+(a+1);for(a=t.length;a<o.length;a++)t.push({name:"Season "+(a+1),episodes:s[(a+1).toString()]})}current_series.seasons=t;var n="";current_series.seasons.map(function(e,t){n+='<div class="season-item-container" onmouseenter="series_summary_page.hoverSeason('+t+')">'+e.name+"</div>"}),$("#season-items-container").html(n),r.showSeriesInfo()}else showLoader(!1),r.is_loading=!1,showToast("Sorry","No seasons available"),r.goBack()},fail:function(e){showLoader(!1),r.is_loading=!1,r.goBack()}}):"general"===settings.playlist.playlist_type&&(current_series.seasons.map(function(e){e.episodes=current_series.episodes[e.name]}),s="",current_series.seasons.map(function(e,t){s+='<div class="season-item-container"   onmouseenter="series_summary_page.hoverSeason('+t+')">'+e.name+"</div>"}),$("#season-items-container").html(s),r.showSeriesInfo())},showSeriesInfo:function(){this.season_doms=$(".season-item-container");try{this.hoverSeason(0),$("#selected-season-name").text(current_series.seasons[0].name);try{try{(e=current_series.info.backdrop_path[0])&&(this.current_series_backdrop_image=e,$("#series-summary-page .vod-series-background-img").attr("src",e).show(),$("#series-summary-page .vod-series-background-img-overlay").show())}catch(e){}}catch(e){}this.showEpisodes()}catch(e){}var e;current_series.info&&(e=current_series.info).releaseDate&&""==$("#series-summary-release-date").text()&&$("#series-summary-release-date").text(e.releaseDate),void 0!==current_series.youtube_trailer&&null!=current_series.youtube_trailer&&""!==current_series.youtube_trailer.trim()?(this.min_btn_index=0,$("#vod-watch-trailer-button").show()):(this.min_btn_index=1,$("#vod-watch-trailer-button").hide()),showLoader(!1),this.is_loading=!1},showEpisodes:function(){var e,a,n,t=this.keys;this.current_season_index!==t.season_selection&&(e=(current_season=current_series.seasons[t.season_selection]).episodes,a=this.series_video_times[t.season_selection.toString()]?this.series_video_times[t.season_selection.toString()]:{},void 0!==e&&0<e.length?(n="",e.map(function(e,t){var i,s="",o=0;a[t.toString()]&&(s="has-progress",(i=a[t.toString()]).duration)&&(o=100*parseFloat(i.time)/parseFloat(i.duration)+"%"),n+='<div class="episode-item-wrapper"                        onmouseenter="series_summary_page.hoverEpisode('+t+')"                        onclick="series_summary_page.handleMenuClick()"                    >'+(e.title||"Episode "+(t+1))+'   <div class="episode-video-duration-container">                            <div class="episode-video-duration '+s+'">                                <span class="episode-video-progress" style="width: '+o+'"></span>                            </div>                         </div>                    </div>'}),$("#series-summary-episode-items-container").html(n),$("#series-summary-episode-items-container").scrollTop(0)):(showToast("Sorry","No episodes available"),$("#series-summary-episode-items-container").html("")),t.episode_selection=0,this.episode_doms=$(".episode-item-wrapper"),$("#selected-season-name").text(current_season.name),this.current_season_index=t.season_selection)},goBack:function(){var e=this.keys;switch(e.focused_part){case"season_selection":switch(current_route=this.prev_route,$("#series-summary-page").addClass("hide"),this.prev_route){case"vod-series-page":$("#vod-series-page").removeClass("hide");break;case"search-page":$("#search-page").show();break;case"home-page":home_page.reEnter()}break;case"episode_selection":e.focused_part="season_selection",e.episode_selection=0,$(this.episode_doms).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e.season_selection]).addClass("active")}},hoverSeason:function(e){var t=this.keys,i=(t.focused_part="season_selection",t.season_selection=e,$(this.episode_doms).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e]).addClass("active"),clearTimeout(this.hover_season_timer),moveScrollPosition($("#season-items-container"),this.season_doms[t.season_selection],"vertical",!1),this);this.hover_season_timer=setTimeout(function(){i.showEpisodes()},300)},hoverEpisode:function(e){var t=this.keys;t.episode_selection=e,t.focused_part="episode_selection",$(this.season_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$(this.episode_doms[t.episode_selection]).addClass("active"),moveScrollPosition($("#series-summary-episode-items-container"),this.episode_doms[t.episode_selection],"vertical",!1)},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":0<e&&0<this.episode_doms.length&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":e<0&&this.hoverSeason(t.season_selection)}},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":t.season_selection+=e,t.season_selection<0?t.season_selection=0:t.season_selection>=this.season_doms.length?t.season_selection=this.season_doms.length-1:this.hoverSeason(t.season_selection);break;case"episode_selection":t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length?t.episode_selection=this.episode_doms.length-1:this.hoverEpisode(t.episode_selection)}},handleMenuClick:function(){var e,t=this.keys;"episode_selection"===t.focused_part&&(e=(current_season=current_series.seasons[t.season_selection]).episodes,current_episode=e[t.episode_selection],vod_series_player.init(current_episode,"series","episode-page","",!0),vod_series_player.keys.episode_selection=t.episode_selection)},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},vod_series_page={player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],category_hover_timer:null,category_hover_timeout:300,current_backdrop:"",keys:{focused_part:"category_selection",category_selection:0,menu_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,themes_modal_selection:0},category_doms:[],menu_doms:[],top_menu_doms:$("#vod-series-page .top-menu"),current_movie_type:"movie",sort_key:"vod_sort",search_key_timer:"",search_key_timout:400,current_render_count:0,render_count_increment:40,is_drawing:!1,prev_keyword:"",prev_dom:null,sort_doms:$(".sort-modal-item"),rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,rearrange_origin_position:0,is_categories_open:!0,current_category:"",movie_hover_timer:null,vod_theme:null,isTMDBAllowed:!1,init:function(e,t){this.getTMDBChoice(),this.prev_dom=null,this.is_drawing=!1;var i=this.keys,s=settings[e+"_sort"],o=($(this.top_menu_doms[0]).data("word_code",s),$(this.top_menu_doms[0]).text(current_words[s]||settings.sort_keys[s]),$(".vod-series-mark-wrapper").addClass("hide"),$("."+e+"-mark-wrapper").removeClass("hide"),home_page.exit(),$("#vod-series-page").removeClass("hide"),current_route="vod-series-page",s="vod"===(this.current_movie_type=e)?(this.sort_key="vod_sort",this.categories=VodModel.getCategories(!1,!0),current_words.movies||"Movies"):(this.sort_key="series_sort",this.categories=SeriesModel.getCategories(!1,!0),current_words.series||"Series"),$("#vod-series-page .page-title").text(s),this.setupTheme(),"");this.categories.map(function(e,t){o+='<div class="vod-series-category-item" data-index="'+t+'"                    onmouseenter="vod_series_page.hoverCategory(this)"                    onclick="vod_series_page.handleMenuClick()"                >                    <div class="floatTextWrapper">                        <div class="vod-series-category-name floatText">'+e.category_name+"</div>                    </div>                </div>"}),$("#vod-series-categories-container").html(o),this.category_doms=$(".vod-series-category-item"),i.focused_part="category_selection",i.category_selection=0,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.current_category_index=-1;for(var a=0;a<this.categories.length;a++)if(0<this.categories[a].movies.length){i.category_selection=a;break}this.showCategoryContent(),this.hoverCategory(this.category_doms[i.category_selection]),this.fetchHoverMovie(0)},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":e.focused_part="category_selection",this.hoverCategory(this.category_doms[e.category_selection]);break;case"category_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):($("#vod-series-page").addClass("hide"),home_page.reEnter());break;case"top_menu_selection":$("#vod-series-search-input").blur(),this.hoverCategory(this.category_doms[e.category_selection]);break;case"sort_selection":$("#sort-modal-container").removeClass("visible"),this.hoverTopMenu(0);break;case"theme_vod_modal":$("#vod-theme-modal").modal("hide"),this.hoverTopMenu(2)}},getTMDBChoice:function(){var e=localStorage.getItem(storage_id+"tmdb_choice");this.isTMDBAllowed="off"!=e},setupTheme:function(){this.theme=localStorage.getItem(storage_id+"vod_theme"),this.theme||(this.theme="modern"),"replay"!=this.current_movie_type&&this.isTMDBAllowed||(this.theme="normal"),"normal"==this.theme?(this.keys.themes_modal_selection=0,$("#vod-series-info-container").addClass("d-none"),$("#vod-series-info-container").removeClass("d-block"),$("#vod-series-menus-container").css("height","60rem"),$("#vod-series-menus-container").css("margin-top","0")):(this.keys.themes_modal_selection=1,$("#vod-series-info-container").addClass("d-block"),$("#vod-series-info-container").removeClass("d-none"),$("#vod-series-menus-container").css("height","29rem"),$("#vod-series-menus-container").css("margin-top","29rem"))},showCategoryContent:function(){var e,t,i,s=this.keys;this.current_category_index!==s.category_selection&&(e=this.categories[s.category_selection],this.current_category=e,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.prev_keyword="",$("#vod-series-search-input").val(""),t=e.movies.filter(function(e){return!0}),i=settings[this.current_movie_type+"_sort"],this.movies=getSortedMovies(t,i),this.renderCategoryContent(),$("#vod-series-menus-container").scrollTop(0),s.menu_selection=0,this.current_category_index=s.category_selection,$("#vod-series-current-category").text(e.category_name))},renderCategoryContent:function(){var n,r,l,c,d,h="",u=HOST+"app_src_min/images/default_movie.png",_="stream_icon";"vod"!==this.current_movie_type&&(_="cover"),this.current_render_count<this.movies.length&&(showLoader(this.is_drawing=!0),n=this,setTimeout(function(){showLoader(n.is_drawing=!1)},1e3),c={},"vod"===(d=this.current_movie_type)||"movie"===d?(l=VodModel.movie_key,r=VodModel.favourite_ids,VodModel.saved_video_times.map(function(e){c[e.stream_id.toString()]=e})):(l=SeriesModel.movie_key,r=SeriesModel.favourite_ids,SeriesModel.saved_video_times.map(function(e){c[e.stream_id.toString()]=e})),this.movies.slice(this.current_render_count,this.current_render_count+this.render_count_increment).map(function(e,t){var i=r.includes(e[l]),s="",o=0,a=e[l].toString();c[a]&&(s="has-progress",(a=c[a]).duration)&&"vod"==d&&(o=100*parseFloat(a.time)/parseFloat(a.duration)+"%"),a="movie"==e.stream_type?utilities.isNewlyAdded(e.added)?"vod-new-label ":"vod-new-label hidden":utilities.isRecentlyModifiedSeries(e.last_modified)?"vod-new-label ":"vod-new-label hidden","top_rated"==n.current_category.category_id?h+='<div class="vod-series-menu-item-container top-rated" data-stream_id="'+e.stream_id+'"                        data-index="'+(n.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                       <div class="vod-series-menu-item">                      <div class="vod-series-menu-top-order"> TOP #'+(t+1)+'</div>                      <div class="'+a+'">NEW</div>'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'       <img class="vod-series-icon" src="'+e[_]+'" onerror="this.src=\''+u+'\'">                            <div class="vod-series-menu-item-title-container">                                <div class="vod-series-menu-item-title-wrapper">                                   <div class="vod-series-menu-item-title max-line-2">'+e.name+'</div>                                </div>                            </div>                            <div class="vod-series-video-duration-container">                                <div class="vod-series-video-duration '+d+" "+s+'">                                    <span class="vod-series-video-progress" style="width: '+o+'"></span>                                </div>                             </div>                        </div>                    </div>':h+='<div class="vod-series-menu-item-container" data-stream_id="'+e.stream_id+'"                        data-index="'+(n.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                       <div class="vod-series-menu-item"><div class="'+a+'">NEW</div>'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'       <img class="vod-series-icon" src="'+e[_]+'" onerror="this.src=\''+u+'\'">                            <div class="vod-series-menu-item-title-container">                                <div class="vod-series-menu-item-title-wrapper">                                   <div class="vod-series-menu-item-title max-line-2">'+e.name+'</div>                                </div>                            </div>                            <div class="vod-series-video-duration-container">                                <div class="vod-series-video-duration '+d+" "+s+'">                                    <span class="vod-series-video-progress" style="width: '+o+'"></span>                                </div>                             </div>                        </div>                    </div>'}),this.current_render_count+=this.render_count_increment,$("#vod-series-menus-container").append(h),this.menu_doms=$("#vod-series-menus-container .vod-series-menu-item-container"))},addOrRemoveFav:function(){var e,t,i,s=this.keys;"menu_selection"===s.focused_part&&(i=this.menu_doms,e=this.movies,("vod"===this.current_movie_type||"movie"===this.current_movie_type?(t=VodModel.movie_key,VodModel):(t=SeriesModel.movie_key,SeriesModel)).favourite_ids.includes(e[s.menu_selection][t])?($($(i[s.menu_selection]).find(".favourite-badge")).remove(),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).removeRecentOrFavouriteMovie(e[s.menu_selection][t],"favourite"),"favourite"===this.categories[this.current_category_index].category_id&&($(i[s.menu_selection]).remove(),0<(i=$("#vod-series-menus-container .vod-series-menu-item-container")).length?(i.map(function(e,t){$(t).data("index",e)}),this.menu_doms=i,s.menu_selection>=this.menu_doms.length&&(s.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[s.menu_selection])):this.hoverCategory(this.category_doms[s.category_selection]))):($($(i[s.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>'),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).addRecentOrFavouriteMovie(e[s.menu_selection],"favourite")))},showSortModal:function(){var i=settings[this.current_movie_type+"_sort"],s=0;this.sort_doms.map(function(e,t){$(t).data("sort_key")==i&&(s=e)}),$("#sort-modal-container").addClass("visible"),this.hoverSortItem(s)},closeSortModal:function(){$("#sort-modal-container").removeClass("visible"),"sort_selection"===this.keys.focused_part&&this.hoverTopMenu(1)},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_dom).removeClass("rearrange");else if(e){var e=this.keys,t="vod"==this.current_movie_type?VodModel:SeriesModel;if("category_selection"===e.focused_part){this.rearrange_mode=!0;var i=0;if("channel_selection"===e.focused_part)i=e.channel_selection;else for(var s=this.categories[e.category_selection],o=0;o<t.categories.length;o++)if(t.categories[o].category_id==s.category_id){i=o;break}this.rearrange_origin_position=i,$(this.prev_dom).addClass("rearrange")}}},changeCategoryDomContent:function(e,t,i){$(e).find(".vod-series-category-name").text(t.category_name),$(e).data("index",i)},hoverTopMenu:function(e){var t;key_focused||(this.toggleCategoriesBar(!1),(t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e])},hoverSortItem:function(e){var t;key_focused||(this.toggleCategoriesBar(!1),(t=this.keys).focused_part="sort_selection",t.sort_selection=e,$(this.prev_dom).removeClass("active"),$(this.sort_doms[e]).addClass("active"),this.prev_dom=this.sort_doms[e])},hoverCategory:function(e){var t;key_focused||(this.toggleCategoriesBar(!0),t=this.keys,e=$(e).data("index"),t.focused_part="category_selection",t.category_selection=e,$(this.prev_dom).removeClass("active"),$(this.category_doms[e]).addClass("active"),this.rearrange_mode&&($(this.prev_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_dom=this.category_doms[e],moveScrollPosition($("#vod-series-categories-container"),this.category_doms[e],"vertical",!1),applyAnimation(this.category_doms[e]))},hoverMovieItem:function(e,t){this.current_backdrop="";clearTimeout(this.channel_hover_timer);var i=this.keys,s=this,e=$(e).data("index");i.focused_part="menu_selection",i.menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.menu_doms[e]).addClass("active"),this.prev_dom=this.menu_doms[e],moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[i.menu_selection],"vertical",!1),clearTimeout(this.movie_hover_timer),this.movie_hover_timer=setTimeout(function(){s.fetchHoverMovie()},1e3),this.toggleCategoriesBar(!1)},fetchHoverMovie:function(e){var t,i,s,o,a,n=this;this.resetMovieUI(),"replay"!==this.current_movie_type&&(e=null!=e&&"number"==typeof e?this.movies[e]:this.movies[this.keys.menu_selection],s=this.getMovieUrlKey(e),this.setTitleScrolling(e.name),i=e.series_id?(t="series",e.series_id):(t="vod",e.stream_id),this.isTMDBAllowed)&&((e=this.getCachedMovieInfo(t,i))?((e=e.info)&&0!==e.length||(n.fetchHoverMovie(),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png")),this.updateMovieUI(e),o=e.tmdb_id||e.tmdb,e.backdrop_path&&0<e.backdrop_path.length&&(a=e.backdrop_path[0]),this.fetchMovieImages(o,a||HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-image").fadeIn()):api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+s,success:function(e){n.handleMovieResponse(e,t,i),$("#movie-image").fadeIn()},error:function(e){n.handleFetchError(e)}}),this.resetScrollPosition(),$("#vod-series-info-container").css("opacity",1))},resetMovieUI:function(){$("#movie-log-title").hide(),$("#vod-img-bg").css("opacity",0),$("#vod-series-info-container .movie-info").hide(),$("#vod-series-info-container").css("opacity",0);["#movie-title","#movie-synopsis","#movie-cast","#release-data","#director","#duration","#genre","#rate"].forEach(function(e){$(e).text("")}),$("#movie-title").text(this.movies[this.keys.menu_selection].name),$("#rate").text(this.movies[this.keys.menu_selection].rating),$("#movie-image").hide().attr("src","")},getMovieUrlKey:function(e){return"series"===this.current_movie_type?"&action=get_series_info&series_id="+e.series_id:"&action=get_vod_info&vod_id="+e.stream_id},setTitleScrolling:function(e){50<e.length?$("#movie-title").css({"padding-left":"100%",animation:"scroll-left 20s linear infinite"}):$("#movie-title").css({"padding-left":"",animation:""})},handleMovieResponse:function(e,t,i){var s,e=e.info;e&&0!==e.length&&(this.updateMovieUI(e),this.cacheMovieInfo(t,i,e),t=e.tmdb_id||e.tmdb,e.backdrop_path&&0<e.backdrop_path.length&&(s=e.backdrop_path[0]),this.fetchMovieImages(t,s||HOST+"app_src_min/images/default_movie_bg.png"))},updateMovieUI:function(e){$("#movie-title").text(e.name).show(),!e.backdrop_path&&e.movie_image&&(e.backdrop_path=e.movie_image),$("#movie-image").attr("src",e.backdrop_path).css("opacity",1),$("#movie-synopsis").text(e.description||e.plot),$("#movie-cast").text(e.cast),$("#release-data").text(e.releasedate||e.releaseDate),$("#director").text(e.director),$("#duration").text(e.duration),$("#genre").text(e.genre),$("#rate").text(Math.round(10*e.rating)/10),this.toggleCircle("#movie-cast",e.cast),this.toggleCircle("#release-data",e.releasedate||e.releaseDate),this.toggleCircle("#director",e.director),this.toggleCircle("#duration",e.duration),this.toggleCircle("#genre",e.genre),$("#vod-series-info-container .movie-info").show()},toggleCircle:function(e,t){$(e).siblings(".circle").toggle(!!t)},handleFetchError:function(e){console.error("fetchHoverMovie",e),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png").show()},resetScrollPosition:function(){},fetchMovieImages:function(e,t){var i,s=this,o=(e||t||$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-log-title").attr("src",""),"series"===this.current_movie_type?"/tv/"+e+"/images?api_key="+tmdb_api_key:"/movie/"+e+"/images?api_key="+tmdb_api_key);return e?(i="series"==this.current_movie_type?"series":"movies",api({url:IBO_TMDB_URL+"/api/"+i+"/images/show/"+e,type:"GET",headers:{Authorization:"Bearer "+IBO_TMDB_TOKEN,"Custom-Proxy-Mode":1}}).then(function(e){return e.data}).fail(function(e){return $.getJSON(tmdb_prefix_url+o).then(function(e){return console.log("Official TMDB API success:",e),e}).then(s.handleImageResponse.bind(s,t)).then(function(){$("#vod-series-info-container .movie-info").show()}).fail(function(e){return console.log("Official TMDB API failed:",e),null})}).then(this.handleImageResponse.bind(this,t)).then(function(){$("##vod-series-info-container .movie-info").show()})):$.Deferred().resolve().promise()},handleImageResponse:function(e,t){t.backdrops&&0<t.backdrops.length&&(e=tmdb_img_url+"w1280"+t.backdrops[0].file_path,this.current_backdrop=e);var i,s=t.logos&&0<t.logos.length?tmdb_img_url+"w500"+t.logos[0].file_path:null;if(s?($(".title-container").css("margin-bottom","1rem"),$("#movie-log-title").attr("src",s).show(),$("#movie-title").hide()):($(".title-container").css("margin-bottom","0"),$("#movie-log-title").hide(),$("#movie-title").show()),$("#vod-series-info-container .movie-info").show(),$("#movie-image").attr("src",e).css("opacity",1),$(".vod-series-summary-section-img-darken").show(),$("#vod-img-bg").css("opacity",1),i=i||("series"==this.current_movie_type?"series":"movies"),!t.tmdbId)return api({url:IBO_TMDB_URL+"/api/"+i+"/images/store",type:"POST",headers:{Authorization:"Bearer "+IBO_TMDB_TOKEN,"Custom-Proxy-Mode":1},data:{tmdbId:t.tmdbId||t.id,backdrops:t.backdrops,logos:t.logos,posters:t.posters}}).then(function(e){return console.log("TMDB Images stored to server",e),e}).fail(function(e,t,i){console.log("Error storing TMDB Images to server:",i)})},cacheMovieInfo:function(e,t,i,s,o){var e=e+t,t=(i=utilities.pickProperties(i,["name","duration","cover","cover_big","movie_image","releasedate","releaseDate","director","actors","cast","description","plot","genre","rating","backdrop_path","tmdb","tmdb_id"]),Object.keys(storageMoviesInfo));t&&0!=t.length||(storageMoviesInfo.host_url=api_host_url),100<=t.length&&(t=t[1],delete storageMoviesInfo[t]),storageMoviesInfo[e]={info:i,logo:s,bg:o},localStorage.setItem(storage_id+"saved-movie-info",JSON.stringify(storageMoviesInfo))},getCachedMovieInfo:function(e,t){return storageMoviesInfo&&storageMoviesInfo!={}?storageMoviesInfo[e+t]:null},showThemeModal:function(){var e;this.isTMDBAllowed?(this.keys.focused_part="theme_vod_modal",$("#vod-theme-modal").modal("show"),e=this.keys.themes_modal_selection,this.modal_visible=!0,$("#vod-theme-modal .vod-theme").removeClass("current"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("current")}),this.updateModalFocus()):showToast("Sorry","Theme cannot be changed unless TMDB is allowed in settings.")},hideThemeModal:function(){this.keys.focused_part="top_menu_selection",$("#vod-theme-modal").modal("hide"),this.modal_visible=!1},updateModalFocus:function(){var e=this.keys.themes_modal_selection;$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")})},handleModalSelection:function(e){0==(this.keys.themes_modal_selection=e)?(localStorage.setItem(storage_id+"vod_theme","normal"),this.vod_theme="normal"):(localStorage.setItem(storage_id+"vod_theme","modern"),this.vod_theme="modern"),this.setupTheme(),this.hideThemeModal()},hoverThemeVod:function(e){$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")}),this.keys.themes_modal_selection=e},toggleCategoriesBar:function(e){void 0!==e&&(1==e?($("#vod-series-page").addClass("categories-open"),this.is_categories_open=!0):($("#vod-series-page").removeClass("categories-open"),this.is_categories_open=!1))},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":("vod"===this.current_movie_type?(current_movie=this.movies[e.menu_selection],vod_summary_page):(current_series=this.movies[e.menu_selection],series_summary_page)).init("vod-series-page");break;case"top_menu_selection":switch(e.top_menu_selection){case 0:this.showSortModal();break;case 1:search_page.init("vod-series-page",this.current_movie_type);break;case 2:this.showThemeModal()}break;case"category_selection":var t=this.categories[e.category_selection];this.current_category_index!=e.category_selection&&(checkForAdult(t,"category",[],!0)?parent_confirm_page.init(current_route):(this.showCategoryContent(),this.toggleRearrangeMode(!1)));break;case"sort_selection":this.current_category_index=-1;t=$(this.sort_doms[e.sort_selection]).data("sort_key");settings.saveSettings(this.current_movie_type+"_sort",t,""),$(this.top_menu_doms[0]).data("word_code",t),$(this.top_menu_doms[0]).text(current_words[t]||settings.sort_keys[t]),this.showCategoryContent(),this.goBack();break;case"theme_vod_modal":this.handleModalSelection(e.themes_modal_selection)}},handleMenusUpDown:function(e){var t=this.keys,i=this.menu_doms;switch($("#vod-series-search-input").blur(),t.focused_part){case"category_selection":var s=t.category_selection;if(t.category_selection+=e,t.category_selection<0)t.category_selection=0,this.hoverCategorySearch();else if(t.category_selection>=this.category_doms.length)t.category_selection=this.category_doms.length-1;else{if(this.rearrange_mode&&s!=t.category_selection){for(var o=this.categories[s],a=this.categories[t.category_selection],n=(this.changeCategoryDomContent(this.category_doms[s],a,s),this.changeCategoryDomContent(this.category_doms[t.category_selection],o,t.category_selection),this.category_doms=$(".vod-series-category-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),0),r=null,r="vod"==this.current_movie_type?VodModel:SeriesModel,l=0;l<r.categories.length;l++)if(a.category_id==r.categories[l].category_id){n=l;break}r.categories=makeRearrangeArray(r.categories,this.rearrange_origin_position,n),this.rearrange_origin_position=n,this.categories=r.getCategories(!1,!0),this.rearrange_timer=setTimeout(function(){for(var e=r.category_orders,t=0;t<e.length;t++)if(e[t].id==o.category_id){e.splice(t,1);break}e.push({id:o.category_id,position:n}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_"+r.stream_type+"_category_orders",JSON.stringify(e)),r.category_orders=e,r.updateRecentAndFavouritePosition()},this.rearrange_timeout)}this.hoverCategory(this.category_doms[t.category_selection])}break;case"menu_selection":s=t.menu_selection;t.menu_selection<5&&e<0?(t.menu_selection=s,this.hoverTopMenu(0)):checkVerticalMovable(this.menu_doms.length,4,t.menu_selection,e)&&(t.menu_selection+=5*e,t.menu_selection>=i.length&&(t.menu_selection=i.length-1),t.menu_selection>=this.current_render_count-6&&this.renderCategoryContent(),this.hoverMovieItem(this.menu_doms[t.menu_selection]));break;case"top_menu_selection":if(0<e){if($("#vod-series-search-input").blur(),0==this.menu_doms.length)return;t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),4<t.menu_selection&&(t.menu_selection=0),this.hoverMovieItem(this.menu_doms[t.menu_selection])}break;case"sort_selection":t.sort_selection+=e,t.sort_selection<0&&(t.sort_selection=0),t.sort_selection>=this.sort_doms.length&&(t.sort_selection=this.sort_doms.length-1),this.hoverSortItem(t.sort_selection);case"theme_vod_modal":0<e?this.hoverThemeVod(1):this.hoverThemeVod(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&(0<this.movies.length?(this.toggleRearrangeMode(!1),this.hoverMovieItem(this.menu_doms[t.menu_selection])):$("#vod-series-search-input").val()&&(this.toggleRearrangeMode(!1),this.hoverTopMenu(0)));break;case"menu_selection":t.menu_selection%5==0&&e<0?this.hoverCategory(this.category_doms[t.category_selection]):(t.menu_selection+=e,t.menu_selection<0?(t.menu_selection=0,this.hoverCategory(this.category_doms[t.category_selection])):(t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[t.menu_selection]),0<e&&t.menu_selection>=this.current_render_count-6&&this.renderCategoryContent()));break;case"top_menu_selection":key_focused||(t.top_menu_selection+=e,t.top_menu_selection<0?this.hoverCategory(this.category_doms[t.category_selection]):(2<t.top_menu_selection&&(t.top_menu_selection=2),this.hoverTopMenu(t.top_menu_selection)))}},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case 65376:case 65385:$("input").blur();break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:this.showNextChannel(1);break;case tvKey.CH_DOWN:this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:this.playOrPause();break;case tvKey.RED:return void this.toggleRearrangeMode(!0);case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.GREEN:this.hoverTopMenu(2),this.handleMenuClick();break;case tvKey.BLUE:this.hoverTopMenu(1),this.handleMenuClick();break;default:console.log("No matching")}}},settings_page={keys:{focused_part:"settings_selection",settings_selection:0,parental_control_tabs_selection:0,current_parental_control_tab_selection:0,parental_control_selection:0,hide_categories_tabs_selection:0,current_hide_categories_tabs_selection:0,hide_categories_selection:0,themes_selection:0,change_language_selection:0,clear_cache_selection:0,clear_watch_lists_selection:0,subtitle_selection:0,toggle_tmdb_selection:0,toggle_home_favorites_selection:0,live_initialization_selection:0,live_layout_selection:0,smart_proxy_selection:0,smart_proxy_region_selection:0,current_smart_proxy_region:0,current_smart_proxy_server:0,load_on_demand_selection:0},transparency_mode:!1,subtitle_bg_options:{black:{color:"#fff",background:"#000"},white:{color:"#000",background:"#fff"},cyan:{color:"#000",background:"#1aa3a3"},transparent:{color:"#fff",background:"transparent"}},doms_translated:[],tried_panel_indexes:[],settings_doms:$(".settings-page-option"),settings_options_doms:$(".setting-option-container"),parental_control_tab_items:$("#parental-control-settings .setting-tab"),hide_categories_tabs_items:$("#hide-categories-settings .setting-tab"),hide_categories_live_items:$("#hide_categories_live_container .setting-select-multi-option"),hide_categories_movies_items:$("#hide_categories_movies_container .setting-select-multi-option"),hide_categories_series_items:$("#hide_categories_series_container .setting-select-multi-option"),themes_items:$("#theme-settings .setting-select-option"),change_language_items:$("#stream-format-settings .setting-select-option"),clear_cache_items:$("#clear-cache-settings .setting-select-option"),clear_watch_lists_items:$("#clear-watch-lists-settings .setting-select-option"),subtitle_items:$("#subtitle-settings .settings-multi-value-option"),toggle_tmdb_items:$("#toggle-tmdb-settings .setting-select-option"),toggle_home_favorites_items:$("#toggle-home-favorites-settings .setting-select-option"),live_initialization_items:$("#live-initialization-settings .setting-select-option"),live_layout_items:$("#live-layout-settings .setting-select-option"),smart_proxy_items:$("#smart-proxy-settings .active-proxy-choice"),smart_proxy_connection_state:!1,isProxyCheckDisabled:!1,current_proxy_selections:{region:0,country:0,server:0},load_on_demand_items:$("#load-on-demand-settings .setting-select-option"),init:function(){$("#home-page").addClass("hide"),$("#settings-page").css("display","flex"),current_route="settings-page",$(this.settings_doms).removeClass("current"),$(this.settings_options_doms).hide(),this.createThemesDoms(),this.createCategoriesDoms(),this.loadSmartProxySettings(),this.hoverSettingsItem(0)},goBack:function(){var e=this.keys;switch(e.focused_part){case"hide_categories":e.hide_categories_selection=0,this.hoverHideCategoriesTab(e.hide_categories_tabs_selection);break;case"subtitle_option":this.hoverSubtitleOption(e.subtitle_selection);break;case"smart_proxy_option":this.hoverSmartProxyOption(e.smart_proxy_selection);break;default:this.keys.focused_part="settings_selection",$("#settings-page").css("display","none"),$("#home-page").removeClass("hide"),current_route="home-page"}},updateActiveClass:function(e,t){e.removeClass("active").eq(t).addClass("active")},handleScrolling:function(e,t,i,s){s=!s;moveScrollPosition($(e),$(t[i]),"vertical",s)},hoverOption:function(e,t,i,s){console.log("Hovering index",i),this.updateActiveClass(t,i),this.handleScrolling(e,t,i,s)},hoverSettingsItem:function(e,t){$("#proxy-sub-confirmation-btn").removeClass("active"),key_focused||(t&&t.removeClass("active"),(t=this.keys).focused_part="settings_selection",this.updateActiveClass(this.settings_doms,t.settings_selection=e),1==this.transparency_mode&&(this.transparency_mode=!1,$("#settings-page").css("opacity",1)))},clickSettingsItem:function(e){var t=this.keys;switch(e="number"==typeof e?e:t.settings_selection,$(this.settings_doms).removeClass("current").removeClass("active").eq(e).addClass("current"),$(this.settings_options_doms).hide().eq(e).show(),t.settings_selection){case 0:this.setupChangeLanguageOptions(),this.hoverChangeLanguageOption(t.change_language_selection);break;case 1:this.setupHideCategoriesOptions(),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);break;case 2:this.setupParentalControlOptions();break;case 3:this.hoverClearCacheOption(t.clear_cache_selection);break;case 4:this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case 5:this.setupSubtitleOptions(),this.hoverSubtitleOption(t.subtitle_selection);break;case 6:this.setupToggleTMDBOptions(),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case 7:this.setupToggleHomeFavoritesOptions(),this.hoverToggleHomeFavoritesOption(t.toggle_home_favorites_selection);break;case 8:this.setupLiveInitializationOptions(),this.hoverLiveInitializationOption(t.live_initialization_selection);break;case 9:this.setupLiveLayoutOptions(),this.hoverLiveLayoutOption(t.live_layout_selection);break;case 10:this.setupSmartProxyOptions(),this.hoverSmartProxyOption(t.smart_proxy_selection);break;case 11:this.setupLoadOnDemandOptions(),this.hoverLoadOnDemandOption(t.load_on_demand_selection)}},setupParentalControlOptions:function(){var e=this.keys;e.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("current"),$("#settings-parental-control-off").hide(),"off"==parent_account_password?($("#parental-control-settings .setting-tabs-container").hide(),$("#settings-parental-control-change").hide(),$("#settings-parental-control-on").show(),e.current_parental_control_tab_selection=-1,this.hoverParentalControlOption(0)):($("#parental-control-settings .setting-tabs-container").show(),$("#settings-parental-control-change").show(),$("#settings-parental-control-on").hide(),e.current_parental_control_tab_selection=0,e.parental_control_tabs_selection=0,this.hoverParentalControlTab(e.parental_control_tabs_selection),this.clickParentalControlTab(e.current_parental_control_tab_selection))},resetParentalControlStyles:function(){$("#parental-control-settings .settings-input").removeClass("active"),$("#settings-parental-control-off-button").removeClass("active"),$("#settings-parental-control-on-button").removeClass("active")},hoverParentalControlTab:function(e){var t;key_focused||((t=this.keys).focused_part="parental_control_tabs",this.resetParentalControlStyles(),this.updateActiveClass(this.parental_control_tab_items,e),t.parental_control_tabs_selection=e)},clickParentalControlTab:function(e){var t=this.keys;switch(t.parental_control_tabs_selection=e,t.current_parental_control_tab_selection=e,$(this.parental_control_tab_items).removeClass("current").eq(e).addClass("current"),$("#settings-parental-control-change").hide(),$("#settings-parental-control-off").hide(),$("#settings-parental-control-on").hide(),$("#change-parental-validation-error").text(""),$("#turn-off-parental-validation-error").text(""),$("#turn-on-parental-validation-error").text(""),e){case 0:$("#settings-parental-control-change").show();break;case 1:$("#settings-parental-control-off").show()}},hoverParentalControlOption:function(e){if(!key_focused){var t=this.keys;switch(t.focused_part="parental_control",t.parental_control_selection=e,$(this.parental_control_tab_items).removeClass("active"),this.resetParentalControlStyles(),t.current_parental_control_tab_selection){case 0:t.parental_control_selection<3?$($("#settings-parental-control-change .settings-input")[e]).addClass("active"):3==t.parental_control_selection&&$("#settings-parental-control-change-button").addClass("active");break;case 1:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password-off").addClass("active");break;case 1:$("#settings-parental-control-off-button").addClass("active")}break;case-1:switch(t.parental_control_selection){case 0:$("#settings-create-parental-password").addClass("active");break;case 1:$("#settings-parental-control-on-button").addClass("active")}}}},clickParentalControlOption:function(e){var t=this.keys;switch(t.parental_control_selection=e,$("#settings-current-parental-password").removeClass("active"),$("#settings-new-parental-password").removeClass("active"),$("#settings-confirm-parental-password").removeClass("active"),t.current_parental_control_tab_selection){case 0:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password").focus().addClass("active");break;case 1:$("#settings-new-parental-password").focus().addClass("active");break;case 2:$("#settings-confirm-parental-password").focus().addClass("active");break;case 3:this.submitParentalControlChangePassword()}break;case 1:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password-off").focus().addClass("active");break;case 1:this.submitParentalControlTurnOff()}break;case-1:switch(t.parental_control_selection){case 0:$("#settings-create-parental-password").focus().addClass("active");break;case 1:this.submitParentalControlTurnOn()}}},submitParentalControlChangePassword:function(){var e=$("#change-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password").val()),i=$("#settings-new-parental-password").val(),s=$("#settings-confirm-parental-password").val();""==t||""==i||""==s?e.text("Please fill all fields"):t!=parent_account_password?e.text("Current password is incorrect"):i!=s?e.text("New passwords do not match"):i.length<4?$("#change-parental-validation-error").text("Password must be 4 digits"):(parent_account_password=i,localStorage.setItem(storage_id+"parent_account_password",i),showToast("Successful","Parental control password changed successfully!"),this.clearParentChangePasswordInputs())},submitParentalControlTurnOff:function(){var e=$("#turn-off-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password-off").val());""==t?e.text("Please enter the current password"):t!=parent_account_password?e.text("Current password is incorrect"):(parent_account_password="off",localStorage.setItem(storage_id+"parent_account_password","off"),showToast("Successful","Parental control turned off."),this.clearParentChangePasswordInputs(),this.setupParentalControlOptions())},submitParentalControlTurnOn:function(){var e=$("#turn-on-parental-validation-error"),t=(e.text(""),$("#settings-create-parental-password").val());""==t?e.text("Please enter the new password"):t.length<4?e.text("Password must be 4 digits"):(parent_account_password=t,localStorage.setItem(storage_id+"parent_account_password",t),showToast("Successful","Parental control turned on"),this.clearParentChangePasswordInputs(),this.setupParentalControlOptions())},clearParentChangePasswordInputs:function(){$("#change-parental-validation-error").val(""),$("#settings-current-parental-password").val(""),$("#settings-new-parental-password").val(""),$("#settings-confirm-parental-password").val(""),$("#settings-current-parental-password-off").val(""),$("#settings-create-parental-password").val("")},createCategoriesDoms:function(){var e,t={live:LiveModel.getCategories(!0,!1),movies:VodModel.getCategories(!0,!1),series:SeriesModel.getCategories(!0,!1)},i={live:"",movies:"",series:""};for(e in t){var s=t[e];if(0!=s.length)for(var o=0;o<s.length;o++)i[e]+='        <div           class="setting-select-multi-option '+(s[o].is_hide?"":"checked")+'"          onmouseenter="settings_page.hoverHideCategoriesOption('+o+', true)"          onclick="settings_page.handleMenuClick()"        >          '+s[o].category_name+"        </div>"}var a=$("#hide-categories-settings .setting-select-multi-options");$(a[0]).html(i.live),$(a[1]).html(i.movies),$(a[2]).html(i.series),this.hide_categories_live_items=$("#hide_categories_live_container .setting-select-multi-option"),this.hide_categories_movies_items=$("#hide_categories_movies_container .setting-select-multi-option"),this.hide_categories_series_items=$("#hide_categories_series_container .setting-select-multi-option")},setupHideCategoriesOptions:function(){var e=this.keys;e.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("current"),$("#hide_categories_movies_container").hide(),$("#hide_categories_series_container").hide(),this.clickHideCategoriesTab(e.current_hide_categories_tabs_selection)},hoverHideCategoriesTab:function(e){var t=this.keys;t.focused_part="hide_categories_tabs",this.updateActiveClass(this.hide_categories_tabs_items,e),$(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),t.hide_categories_tabs_selection=e},clickHideCategoriesTab:function(e){var t=this.keys;switch(t.hide_categories_tabs_selection=e,t.current_hide_categories_tabs_selection=e,t.hide_categories_selection=0,$(this.hide_categories_tabs_items).removeClass("current").eq(e).addClass("current"),$("#hide_categories_live_container").hide(),$("#hide_categories_movies_container").hide(),$("#hide_categories_series_container").hide(),e){case 0:$("#hide_categories_live_container").show();break;case 1:$("#hide_categories_movies_container").show();break;case 2:$("#hide_categories_series_container").show()}},hoverHideCategoriesOption:function(e,t){var i=this.keys;switch(i.focused_part="hide_categories",$(this.hide_categories_tabs_items).removeClass("active"),i.hide_categories_selection=e,i.current_hide_categories_tabs_selection){case 0:this.hoverOption("#hide_categories_live_container",this.hide_categories_live_items,i.hide_categories_selection,t);break;case 1:this.hoverOption("#hide_categories_movies_container",this.hide_categories_movies_items,i.hide_categories_selection,t);break;case 2:this.hoverOption("#hide_categories_series_container",this.hide_categories_series_items,i.hide_categories_selection,t)}},clickHideCategoriesOption:function(e){var t=[];switch(this.keys.current_hide_categories_tabs_selection){case 0:t=LiveModel.getCategories(!0,!1),LiveModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_live_items[e]),t[e].is_hide);break;case 1:t=VodModel.getCategories(!0,!1),VodModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_movies_items[e]),t[e].is_hide);break;case 2:t=SeriesModel.getCategories(!0,!1),SeriesModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_series_items[e]),t[e].is_hide)}},toggleCategoryItem:function(e,t){t?e.removeClass("checked"):e.addClass("checked")},createThemesDoms:function(){var i="";themes.map(function(e,t){i+='      <div         class="setting-select-option"        onmouseenter="settings_page.hoverThemesOption('+t+', true)"        onclick="settings_page.handleMenuClick()"      >        '+e.name+"      </div>"}),$("#settings-themes-options").html(i),this.themes_items=$("#theme-settings .setting-select-option")},setupThemesOptions:function(){for(var e=0,t=themes.length,i=0;i<t;i++)if(themes[i].name==settings.bg_img_name){e=i;break}$(this.themes_items).removeClass("current").eq(e).addClass("current")},hoverThemesOption:function(e,t){var i=this.keys;i.focused_part="themes",i.themes_selection=e,this.hoverOption("#settings-themes-options",this.themes_items,i.themes_selection,t),1==this.transparency_mode&&(this.transparency_mode=!1,$("#settings-page").css("opacity",1))},clickThemesOption:function(e){void 0!==themes[e]&&(settings.saveSettings("bg_img_url",themes[e].url,""),settings.saveSettings("bg_img_name",themes[e].name,""),changeBackgroundImage(),$(this.themes_items).removeClass("current").eq(e).addClass("current"),0==this.transparency_mode)&&(this.transparency_mode=!0,$("#settings-page").css("opacity",.25))},getSelectedLanguageWords:function(e){for(var t={},i=0;i<languages.length;i++)if(languages[i].code===e){t=languages[i].words;break}current_words=t},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language),this.doms_translated.map(function(e,t){var i=$(t).data("word_code");void 0!==current_words[i]&&$(t).text(current_words[i])})},setupChangeLanguageOptions:function(){for(var e=0,t=languages.length,i=0;i<t;i++)if(languages[i].code===settings.language){e=i;break}$(this.change_language_items).removeClass("current").eq(e).addClass("current")},hoverChangeLanguageOption:function(e,t){var i=this.keys;i.focused_part="change_language",i.change_language_selection=e,this.hoverOption("#settings-languages-options",this.change_language_items,i.change_language_selection,t)},clickChangeLanguageOption:function(e){void 0!==languages[e]&&(settings.saveSettings("language",languages[e].code,""),this.changeDomsLanguage(),$(this.change_language_items).removeClass("current").eq(e).addClass("current"))},hoverClearCacheOption:function(e){var t=this.keys;t.focused_part="clear_cache",this.updateActiveClass(this.clear_cache_items,e),t.clear_cache_selection=e},clickClearCacheOption:function(){clear_cache_page.handleMenuClick(!0)},hoverClearWatchListOption:function(e){var t=this.keys;t.focused_part="clear_watch_lists",this.updateActiveClass(this.clear_watch_lists_items,e),t.clear_watch_lists_selection=e},clickClearWatchListsOption:function(e){switch(this.keys.clear_watch_lists_selection){case 0:clear_recent_page.handleMenuClick("vod");break;case 1:clear_recent_page.handleMenuClick("series")}},setupSubtitleOptions:function(){$(this.subtitle_items).removeClass("current"),this.updateSubtitleSize(settings.subtitle_size),this.updateSubtitleBackground(settings.subtitle_bg)},updateSubtitleSize:function(e){$(".subtitle-container").css({"font-size":e/16+"rem"}),$("#subtitle-settings-preview-text").css("font-size",e/16+"rem"),$(this.subtitle_items[0]).find(".settings-multi-value-option-value").text(e+"px"),settings.subtitle_size=e,settings.saveSettings("subtitle_size",e,"")},updateSubtitleBackground:function(e){$(".subtitle-container").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$("#subtitle-settings-preview-text").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$(this.subtitle_items[1]).find(".settings-multi-value-option-value").text(e),settings.subtitle_bg=e,settings.saveSettings("subtitle_bg",e,"")},hoverSubtitleOption:function(e){$(this.subtitle_items).removeClass("current");var t=this.keys;t.focused_part="subtitle",this.updateActiveClass(this.subtitle_items,t.subtitle_selection=e)},clickSubtitleOption:function(e){this.keys.focused_part="subtitle_option",$(this.subtitle_items).removeClass("current").eq(e).addClass("current")},handleSubtitleSettingChange:function(e){var t=this.keys,i=Number(settings.subtitle_size),s=settings.subtitle_bg,o=Object.keys(this.subtitle_bg_options);switch(t.subtitle_selection){case 0:this.updateSubtitleSize(i=80<(i=(i+=5*e)<20?20:i)?80:i);break;case 1:var a=o.indexOf(s)+e,a=o[a=(a=a<0?o.length-1:a)>=o.length?0:a];this.updateSubtitleBackground(a)}},setupToggleTMDBOptions:function(){var e={off:0,on:1}[settings.tmdb_choice]||0;$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},hoverToggleTMDBOption:function(e){var t=this.keys;t.focused_part="toggle_tmdb",this.updateActiveClass(this.toggle_tmdb_items,e),t.toggle_tmdb_selection=e},clickToggleTMDBOption:function(e){settings.saveSettings("tmdb_choice",["off","on"][e],""),$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},setupToggleHomeFavoritesOptions:function(){var e={off:0,on:1}[settings.home_favorites_choice]||0;$(this.toggle_home_favorites_items).removeClass("current").eq(e).addClass("current")},hoverToggleHomeFavoritesOption:function(e){var t=this.keys;t.focused_part="toggle_home_favorites",this.updateActiveClass(this.toggle_home_favorites_items,e),t.toggle_home_favorites_selection=e},clickToggleHomeFavoritesOption:function(e){settings.saveSettings("home_favorites_choice",["off","on"][e],""),$(this.toggle_home_favorites_items).removeClass("current").eq(e).addClass("current"),home_page.setLiveFavoritesChoice()},setupLiveInitializationOptions:function(){var e={default:0,last:1,favorite:2}[settings.live_initialization_choice]||0;$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},hoverLiveInitializationOption:function(e){var t=this.keys;t.focused_part="live_initialization",this.updateActiveClass(this.live_initialization_items,e),t.live_initialization_selection=e},clickLiveInitializationOption:function(e){settings.saveSettings("live_initialization_choice",["default","last","favorite"][e],""),$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},setupLiveLayoutOptions:function(){var e=parseInt(localStorage.getItem(storage_id+"live_layout"));void 0===(e=(e=null==typeof e?1:e)||0==e?e:1)&&(e=1),(isNaN(e)?$(this.live_layout_items).removeClass("current").eq(0):$(this.live_layout_items).removeClass("current").eq(e)).addClass("current")},hoverLiveLayoutOption:function(e){var t=this.keys;t.focused_part="live_layout",this.updateActiveClass(this.live_layout_items,e),t.live_layout_selection=e},clickLiveLayoutOption:function(e){localStorage.setItem(storage_id+"live_layout",e),$(this.live_layout_items).removeClass("current").eq(e).addClass("current")},loadSmartProxySettings:function(){this.smart_proxy_connection_state=settings.smart_proxy_connection_state,this.current_proxy_selections={region:settings.smart_proxy_region,country:settings.smart_proxy_country,server:settings.smart_proxy_server},console.log("Loading smart proxy settings:",{connection_state:this.smart_proxy_connection_state,selections:this.current_proxy_selections,settings_values:{region:settings.smart_proxy_region,country:settings.smart_proxy_country,server:settings.smart_proxy_server}}),"function"==typeof updateProxyURL&&updateProxyURL()},saveSmartProxySettings:function(){var e;settings.saveSettings("smart_proxy_connection_state",this.smart_proxy_connection_state,""),settings.saveSettings("smart_proxy_region",this.current_proxy_selections.region,""),settings.saveSettings("smart_proxy_country",this.current_proxy_selections.country,""),settings.saveSettings("smart_proxy_server",this.current_proxy_selections.server,""),"function"==typeof updateProxyURL&&updateProxyURL(),this.smart_proxy_connection_state?($($(".home-proxy-info-container")[0]).show(),e=this.current_proxy_selections,e=proxyAvailableServers[e.region].Countries[e.country],$("#country-name").text(e.CountryName),$("#proxy-country-img").attr("src",e.CountryImage)):$($(".home-proxy-info-container")[0]).hide(),this.sendServerChangeRequest()},sendServerChangeRequest:function(){var e;this.current_proxy_selections&&proxyAvailableServers&&0!==proxyAvailableServers.length&&(e=this.current_proxy_selections,e={ServerIP:proxyAvailableServers[e.region].Countries[e.country].Servers[0],DeviceMac:mac_address},$.ajax({url:STARARCS_URL+"/api/tv/country/change",type:"POST",data:e,success:function(e){console.log("Server change request successful:",e)},error:function(e,t,i){console.error("Server change request failed:",i)}}))},setupSmartProxyOptions:function(){"Success"==proxySubscriptionStatus?($("#proxy-not-active").hide(),$("#proxy-active").show(),this.smart_proxy_connection_state=settings.smart_proxy_connection_state,this.validateProxySelections(),this.smart_proxy_connection_state?($("#smart-proxy-settings .settings-multi-value-option").show(),$($(".settings-toggle-switch-value")[0]).addClass("on").removeClass("off")):($("#smart-proxy-settings .settings-multi-value-option").hide(),$($(".settings-toggle-switch-value")[0]).removeClass("on").addClass("off")),this.updateSmartProxyDisplayValues()):($("#proxy-active").hide(),$("#proxy-not-active").show(),generateQRCode(proxyUrl,$("#proxy-sub-qr-container")))},validateProxySelections:function(){var e,t,i,s,o,a;proxyAvailableServers&&0!==proxyAvailableServers.length&&(t=(e=this.current_proxy_selections).region,i=e.country,s=e.server,o=!1,(e.region>=proxyAvailableServers.length||e.region<0)&&(o=!(e.region=0)),(a=proxyAvailableServers[e.region]).Countries&&0<a.Countries.length?((e.country>=a.Countries.length||e.country<0)&&(o=!(e.country=0)),(a=a.Countries[e.country]).Servers&&0<a.Servers.length?(e.server>=a.Servers.length||e.server<0)&&(o=!(e.server=0)):0!==e.server&&(o=!(e.server=0))):0===e.country&&0===e.server||(e.country=0,o=!(e.server=0)),o)&&(console.log("Proxy selections were out of bounds and corrected:",{original:{region:t,country:i,server:s},corrected:{region:e.region,country:e.country,server:e.server}}),this.saveSmartProxySettings())},updateSmartProxyDisplayValues:function(){var e,t;proxyAvailableServers&&0!==proxyAvailableServers.length&&(e=this.current_proxy_selections,t=proxyAvailableServers[e.region],$(this.smart_proxy_items[1]).find(".settings-multi-value-option-value").text(t.RegionName),t.Countries)&&0<t.Countries.length&&(t=t.Countries[e.country],$(this.smart_proxy_items[2]).find(".settings-multi-value-option-value").text(t.CountryName),t.Servers)&&0<t.Servers.length&&(t=e.server+1,$(this.smart_proxy_items[3]).find(".settings-multi-value-option-value").text("Server "+t))},hoverSmartProxyOption:function(e){$(this.smart_proxy_items).removeClass("current"),this.keys.focused_part="smart_proxy",this.keys.smart_proxy_selection=e,"Success"===proxySubscriptionStatus?this.updateActiveClass(this.smart_proxy_items,e):$("#proxy-sub-confirmation-btn").addClass("active")},toggleSmartProxy:function(){this.smart_proxy_connection_state?($($(".settings-toggle-switch-value")[0]).removeClass("on").addClass("off"),this.smart_proxy_connection_state=!1,$("#smart-proxy-settings .settings-multi-value-option").hide()):($($(".settings-toggle-switch-value")[0]).addClass("on").removeClass("off"),this.smart_proxy_connection_state=!0,$("#smart-proxy-settings .settings-multi-value-option").show()),this.saveSmartProxySettings()},clickSmartProxyOption:function(e){switch(e){case 0:"Success"===proxySubscriptionStatus?this.toggleSmartProxy():this.isProxyCheckDisabled||this.attemptProxyStatusChange();break;case 1:case 2:case 3:this.keys.focused_part="smart_proxy_option",$(this.smart_proxy_items).removeClass("current").eq(e).addClass("current")}},attemptProxyStatusChange:function(){var e=this;!0===handleProxyInfoFetch(!0)&&e.hoverSmartProxyOption(0),this.isProxyCheckDisabled=!0,console.log("Disabled?",this.isProxyCheckDisabled),$("#proxy-sub-confirmation-btn").addClass("disabled"),setTimeout(function(){$("#proxy-sub-confirmation-btn").removeClass("disabled"),e.isProxyCheckDisabled=!1},5e3)},handleSmartProxySettingChange:function(e){if(proxyAvailableServers&&0!==proxyAvailableServers.length){var t,i=this.keys,s=this.current_proxy_selections;switch(i.smart_proxy_selection){case 1:s.region+=e,s.region<0&&(s.region=proxyAvailableServers.length-1),s.region>=proxyAvailableServers.length&&(s.region=0),s.country=0,s.server=0;break;case 2:(t=proxyAvailableServers[s.region]).Countries&&0<t.Countries.length&&(s.country+=e,s.country<0&&(s.country=t.Countries.length-1),s.country>=t.Countries.length&&(s.country=0),s.server=0);break;case 3:(t=proxyAvailableServers[s.region]).Countries&&t.Countries[s.country]&&(t=t.Countries[s.country]).Servers&&0<t.Servers.length&&(s.server+=e,s.server<0&&(s.server=t.Servers.length-1),s.server>=t.Servers.length)&&(s.server=0)}this.saveSmartProxySettings(),this.updateSmartProxyDisplayValues()}},setupLoadOnDemandOptions:function(){var e=parseInt(localStorage.getItem(storage_id+"load_on_demand"));void 0===(e=(e=null==typeof e?1:e)||0==e?e:1)&&(e=1),(isNaN(e)?$(this.load_on_demand_items).removeClass("current").eq(1):$(this.load_on_demand_items).removeClass("current").eq(e)).addClass("current")},hoverLoadOnDemandOption:function(e){var t=this.keys;t.focused_part="load_on_demand",this.updateActiveClass(this.load_on_demand_items,e),t.load_on_demand_selection=e},clickLoadOnDemandOption:function(e){localStorage.setItem(storage_id+"load_on_demand",e),$(this.load_on_demand_items).removeClass("current").eq(e).addClass("current"),0==e&&window.location.reload()},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"settings_selection":this.clickSettingsItem(e.settings_selection);break;case"parental_control_tabs":this.clickParentalControlTab(e.parental_control_tabs_selection);break;case"parental_control":this.clickParentalControlOption(e.parental_control_selection);break;case"hide_categories_tabs":this.clickHideCategoriesTab(e.hide_categories_tabs_selection);break;case"hide_categories":this.clickHideCategoriesOption(e.hide_categories_selection);break;case"themes":this.clickThemesOption(e.themes_selection);break;case"change_language":this.clickChangeLanguageOption(e.change_language_selection);break;case"clear_cache":this.clickClearCacheOption();break;case"clear_watch_lists":this.clickClearWatchListsOption();break;case"subtitle":this.clickSubtitleOption(e.subtitle_selection);break;case"toggle_tmdb":this.clickToggleTMDBOption(e.toggle_tmdb_selection);break;case"toggle_home_favorites":this.clickToggleHomeFavoritesOption(e.toggle_home_favorites_selection);break;case"live_initialization":this.clickLiveInitializationOption(e.live_initialization_selection);break;case"live_layout":this.clickLiveLayoutOption(e.live_layout_selection);break;case"smart_proxy":this.clickSmartProxyOption(e.smart_proxy_selection);break;case"load_on_demand":this.clickLoadOnDemandOption(e.load_on_demand_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":t.settings_selection=utilities.clampNumber(t.settings_selection+e,0,this.settings_doms.length-1),this.hoverSettingsItem(t.settings_selection);break;case"parental_control_tabs":0<e&&this.hoverParentalControlOption(0);break;case"parental_control":if(t.parental_control_selection+=e,-1==t.current_parental_control_tab_selection&&t.parental_control_selection<0)t.parental_control_selection=0;else if(t.parental_control_selection<0)t.parental_control_selection=0,this.hoverParentalControlTab(t.parental_control_tabs_selection);else{switch(t.current_parental_control_tab_selection){case 0:3<t.parental_control_selection&&(t.parental_control_selection=3);break;case 1:case-1:1<t.parental_control_selection&&(t.parental_control_selection=1)}this.hoverParentalControlOption(t.parental_control_selection)}break;case"hide_categories_tabs":0<e&&this.hoverHideCategoriesOption(0);break;case"hide_categories":if(t.hide_categories_selection+=e,t.hide_categories_selection<0)t.hide_categories_selection=0,this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);else{switch(t.current_hide_categories_tabs_selection){case 0:t.hide_categories_selection>=this.hide_categories_live_items.length&&(t.hide_categories_selection=this.hide_categories_live_items.length-1);break;case 1:t.hide_categories_selection>=this.hide_categories_movies_items.length&&(t.hide_categories_selection=this.hide_categories_movies_items.length-1);break;case 2:t.hide_categories_selection>=this.hide_categories_series_items.length&&(t.hide_categories_selection=this.hide_categories_series_items.length-1)}this.hoverHideCategoriesOption(t.hide_categories_selection)}break;case"themes":t.themes_selection=utilities.clampNumber(t.themes_selection+e,0,this.themes_items.length-1),this.hoverThemesOption(t.themes_selection);break;case"change_language":t.change_language_selection=utilities.clampNumber(t.change_language_selection+e,0,this.change_language_items.length-1),this.hoverChangeLanguageOption(t.change_language_selection);break;case"clear_watch_lists":t.clear_watch_lists_selection=utilities.clampNumber(t.clear_watch_lists_selection+e,0,this.clear_watch_lists_items.length-1),this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case"subtitle":t.subtitle_selection=utilities.clampNumber(t.subtitle_selection+e,0,this.subtitle_items.length-1),this.hoverSubtitleOption(t.subtitle_selection);break;case"toggle_tmdb":t.toggle_tmdb_selection=utilities.clampNumber(t.toggle_tmdb_selection+e,0,this.toggle_tmdb_items.length-1),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case"toggle_home_favorites":t.toggle_home_favorites_selection=utilities.clampNumber(t.toggle_home_favorites_selection+e,0,this.toggle_home_favorites_items.length-1),this.hoverToggleHomeFavoritesOption(t.toggle_home_favorites_selection);break;case"live_initialization":t.live_initialization_selection=utilities.clampNumber(t.live_initialization_selection+e,0,this.live_initialization_items.length-1),this.hoverLiveInitializationOption(t.live_initialization_selection);break;case"live_layout":t.live_layout_selection=utilities.clampNumber(t.live_layout_selection+e,0,this.live_layout_items.length-1),this.hoverLiveLayoutOption(t.live_layout_selection);break;case"smart_proxy":proxySubscriptionStatus&&this.smart_proxy_connection_state&&(t.smart_proxy_selection=utilities.clampNumber(t.smart_proxy_selection+e,0,this.smart_proxy_items.length-1),this.hoverSmartProxyOption(t.smart_proxy_selection));break;case"load_on_demand":t.load_on_demand_selection=utilities.clampNumber(t.load_on_demand_selection+e,0,this.load_on_demand_items.length-1),this.hoverLoadOnDemandOption(t.load_on_demand_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":0<e&&this.clickSettingsItem(t.settings_selection);break;case"parental_control_tabs":t.parental_control_tabs_selection+=e,t.parental_control_tabs_selection<0?(t.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.parental_control_tabs_selection>=this.parental_control_tab_items.length&&(t.parental_control_tabs_selection=this.parental_control_tab_items.length-1),this.hoverParentalControlTab(t.parental_control_tabs_selection));break;case"parental_control":e<0&&(this.resetParentalControlStyles(),this.hoverSettingsItem(t.settings_selection));break;case"hide_categories_tabs":t.hide_categories_tabs_selection+=e,t.hide_categories_tabs_selection<0?(t.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.hide_categories_tabs_selection>=this.hide_categories_tabs_items.length&&(t.hide_categories_tabs_selection=this.hide_categories_tabs_items.length-1),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection));break;case"hide_categories":e<0&&($(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection));break;case"themes":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.themes_items));break;case"change_language":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.change_language_items));case"clear_cache":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_cache_items));break;case"clear_watch_lists":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_watch_lists_items));break;case"subtitle":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.subtitle_items));break;case"subtitle_option":this.handleSubtitleSettingChange(e);break;case"toggle_tmdb":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_tmdb_items));break;case"toggle_home_favorites":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_home_favorites_items));break;case"live_initialization":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.live_initialization_items));break;case"live_layout":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.live_layout_items));break;case"smart_proxy":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.smart_proxy_items));break;case"smart_proxy_option":this.handleSmartProxySettingChange(e);break;case"load_on_demand":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.load_on_demand_items))}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},turn_off_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#turn-off-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="turn-off-page",this.hoverMenuItem(0),$("#turn-off-modal").modal("show")},goBack:function(){$("#turn-off-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close();break;case 1:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},parent_confirm_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".parent-confirm-item"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="parent-confirm-page",this.resetPasswordInput(),this.hoverMenuItem(0),$("#parent-confirm-password-error").hide(),$("#parent-confirm-modal").modal("show"),this.setupCustomKeyboardForInput()},goBack:function(){$("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"vod-summary-page"!==this.prev_route&&"series-summary-page"!==this.prev_route||(current_route="vod-series-page"),"channel-category-page"===this.prev_route&&(current_route="channel-category-page")},setupCustomKeyboardForInput:function(){var e;USE_CUSTOM_KEYBOARD&&"function"==typeof inputFocusHandler&&"function"==typeof inputBlurHandler&&(e=document.getElementById("parent-confirm-password"))&&(e.removeEventListener("focus",inputFocusHandler),e.removeEventListener("blur",inputBlurHandler),e.addEventListener("focus",inputFocusHandler),e.addEventListener("blur",inputBlurHandler),e.addEventListener("click",function(e){USE_CUSTOM_KEYBOARD&&(e.preventDefault(),e.stopPropagation(),custom_keyboard.isShown||this.focus())}),console.log("Custom keyboard setup completed for parent-confirm-password input"))},resetPasswordInput:function(){var e=$("#parent-confirm-password"),t=e.clone().val(""),i=(e.replaceWith(t),this);setTimeout(function(){i.setupCustomKeyboardForInput()},100)},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:$(this.menu_doms[0]).find("input").focus();break;case 1:var t=$(this.menu_doms[0]).find("input").val();$("#parent-confirm-password-error").hide(),t!=parent_account_password?$("#parent-confirm-password-error").slideDown():($("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"channel-page"===this.prev_route?channel_page.showCategoryChannels():"vod-series-page"===this.prev_route?vod_series_page.showCategoryContent():"stream-category-page"===this.prev_route&&stream_category_page.showStreamPage());break;case 2:this.goBack()}},handleMenusUpDown:function(e){var t=this.keys;1<=t.menu_selection&&0<e||(1<=t.menu_selection&&e<0?t.menu_selection=0:0==t.menu_selection&&0<e&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&1<=t.menu_selection&&(t.menu_selection+=e,t.menu_selection<1&&(t.menu_selection=0),2<t.menu_selection&&(t.menu_selection=2),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},activation_page={keys:{focused_part:"input_selection",input_selection:0,btn_selection:0},prev_route:"",buttons:$(".activation-btn"),activation_input:$("#activation-input")[0],is_loading:!1,tried_panel_indexes:[],init:function(e){this.prev_route=e,$("#activation-modal").modal("show"),$(this.activation_input).val(""),current_route="activation-page",this.hoverInput(),this.tried_panel_indexes=[],$("#activation-code-message").hide()},goBack:function(){$("#activation-modal").modal("hide"),current_route=this.prev_route},showErrorMessage:function(e){$("#activation-code-message").text(e).slideDown(),setTimeout(function(){$("#activation-code-message").slideUp()},4e3)},confirmActivationCode:function(){var t,e,i,s;$("#activation-code-message").hide(),(activation_code=$(this.activation_input).val())?(showLoader(this.is_loading=!0),i=(e=pickPanelUrl((t=this).tried_panel_indexes))[1],s=e[0],api({method:"post",url:i+"/change-code",data:{data:encryptRequest({mac_address:mac_address,code:activation_code,app_type:platform,version:"samsung"===platform?samsung_version:lg_version})},success:function(e){t.is_loading&&(showLoader(t.is_loading=!1),"success"===e.status?($(".activation-code").text(activation_code),t.goBack(),"login-page"===t.prev_route&&login_page.reloadApp()):t.showErrorMessage(e.msg))},error:function(){t.tried_panel_indexes.length<panel_urls.length?(t.tried_panel_indexes.push(s),t.fetchPlaylistInformation()):(showLoader(t.is_loading=!1),t.showErrorMessage("Sorry, Code is not valid"))}})):this.showErrorMessage("Sorry, activation code is required")},hoverInput:function(){$(this.buttons).removeClass("active"),$(this.activation_input).addClass("active"),this.keys.focused_part="input_selection"},hoverBtn:function(e){var t=this.keys;t.btn_selection=e,t.focused_part="btn_selection",$(this.activation_input).removeClass("active"),$(this.buttons).removeClass("active"),$(this.buttons[e]).addClass("active")},handleMenuLeftRight:function(e){var t=this.keys;"btn_selection"===t.focused_part&&(t.btn_selection=0<e?1:0,this.hoverBtn(t.btn_selection))},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"input_selection":0<e&&($(this.activation_input).blur(),this.hoverBtn(t.btn_selection));break;case"btn_selection":e<0&&this.hoverInput()}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"input_selection":$(this.activation_input).focus(),setSelectionRange(this.activation_input);break;case"btn_selection":0==e.btn_selection?this.confirmActivationCode():this.goBack()}},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},category_selection_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:[],back_url:"",categories:[],init:function(e,t){this.back_url=e,this.categories=t,current_route="category-selection-page";var i="";t.map(function(e,t){i+='<div class="category-item-container">                    <div class="category-item-wrapper"                        onmouseenter="category_selection_page.hoverMenuItem('+t+')"                         onclick="category_selection_page.handleMenuClick()"                     >'+e.category_name+"                     </div>                 </div>                "}),$("#select-category-items-container").html(i),this.menu_doms=$("#select-category-items-container .category-item-wrapper"),$("#select-category-modal").modal("show"),this.hoverMenuItem(0)},goBack:function(){$("#select-category-modal").modal("hide"),current_route=this.back_url},hoverMenuItem:function(e){$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active"),this.keys.menu_selection=e,moveScrollPosition($("#select-category-items-container"),$(this.menu_doms[e]).closest(".category-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;"menu_selection"===e.focused_part&&(this.goBack(),"channel-page"===this.back_url)&&channel_page.goToSelectedCategory(e.menu_selection)},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMenuItem(t.menu_selection))},handleMenusUpDown:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(checkVerticalMovable(this.menu_doms.length,4,t.menu_selection,e)&&(t.menu_selection+=4*e),t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.BLUE:this.showPlayListEditPage();break;case tvKey.RED:this.removePlayList()}}},SrtParser={seperator:",",init:function(){this.seperator=","},timestampToSeconds:function(e){var e=e.split(","),t=e[0],e=parseInt(e[1]),t=t.split(":").map(function(e){return parseInt(e)}),i=t[0];return.001*e+t[2]+60*t[1]+3600*i},correctFormat:function(e){var e=e.replace(".",",").split(","),t=e[0],e=this.fixed_str_digit(3,e[1],!0),t=t.split(":"),i=t[0],s=t[1],t=t[2];return this.fixed_str_digit(2,i,!1)+":"+this.fixed_str_digit(2,s,!1)+":"+this.fixed_str_digit(2,t,!1)+","+e},fixed_str_digit:function(e,t,i){return t.length==e?t:e<t.length?t.slice(0,e):t.length<e?i?t.padEnd(e,"0"):t.padStart(e,"0"):void 0},tryComma:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g);return e.shift(),e},tryDot:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g);return e.shift(),this.seperator=".",e},fromSrt:function(e){if(""==e.trim())return[];for(var t=(new Date).getTime(),i=this.tryComma(e),s=(0==i.length&&(i=this.tryDot(e)),[]),o=0;o<i.length;o+=4){var a=this.correctFormat(i[o+1].trim()),n=this.correctFormat(i[o+2].trim()),a={id:i[o].trim(),startTime:a,startSeconds:this.timestampToSeconds(a),endTime:n,endSeconds:this.timestampToSeconds(n),text:i[o+3].trim()};s.push(a)}e=(new Date).getTime();return console.log(e-t,"ms take to parse"),s}},SrtOperation={current_srt_index:0,next_srt_time:0,srt:[],stopped:!1,subtitle_shown:!1,time_difference:0,init:function(t,e){this.time_difference=0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1;var i=[];if(t)try{SrtParser.init(),i=SrtParser.fromSrt(t)}catch(e){console.log("here subtitle parse issue",e,t)}0<(this.srt=i).length?(this.stopped=!1,this.current_srt_index=this.findIndex(e,0,i.length-1),console.log("here found srt index",this.current_srt_index,e,i),this.current_srt_index<0&&(this.current_srt_index=0),this.next_srt_time=0):this.stopped=!0},findIndex:function(e,t,i){var s,o;return 0==(e+=this.time_difference)?0:(s=this.srt,i<t?i:s[o=Math.floor((t+i)/2)].startSeconds<=e&&e<s[o].endTime?o:s[o].startSeconds>e?this.findIndex(e,t,o-1):this.findIndex(e,o+1,i))},timeChange:function(e){if(!this.stopped){e+=this.time_difference,.98<=Math.random()&&console.log("current_time=",e,media_player.videoObj.currentTime);var t=this.current_srt_index,i=this.srt[t];if(e>=i.startSeconds&&e<i.endSeconds)this.subtitle_shown||$("#"+media_player.parent_id).find(".subtitle-container").html(i.text);else if(e>i.endSeconds){t=this.srt[t+1];try{e<t.startSeconds?this.subtitle_shown&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1):t.endSeconds>e?($("#"+media_player.parent_id).find(".subtitle-container").html(t.text),this.subtitle_shown=!0,this.current_srt_index+=1):(console.log("here finding new srt index"),this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0))}catch(e){console.log("subtitle timer issue",e)}}else if(e<i.startSeconds)try{this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0)}catch(e){}}},stopOperation:function(){this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},setTimeDifference:function(e){this.time_difference=parseInt(e),$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},deStruct:function(){this.srt=[],this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html("")}},search_page={keys:{top_menu_selection:0,hor_keys:[0,0,0],v_selection:0,movie_selection:[],focused_part:""},prev_dom:null,is_loading:!1,filtered_movies:[],render_counts:[0,0,0],prev_keyword:"",search_timeout:null,prev_route:"",top_menu_doms:$(".search-page-top-menu"),movie_doms:[],render_count_increment:50,searching_for:[],parent_elements:[$("#filtered_channels_container")[0],$("#filtered_movies_container")[0],$("#filtered_series_container")[0]],init:function(e,t){switch(this.prev_route=e,$("#filtered_replay_container").html(""),$("#filtered_channels_container").html(""),$("#filtered_movies_container").html(""),$("#filtered_series_container").html(""),$(".search-page-stream-type-container.replay").hide(),$(".search-page-stream-type-container.live").hide(),$(".search-page-stream-type-container.vod").hide(),$(".search-page-stream-type-container.series").hide(),this.searching_for=t||"all",this.searching_for){case"vod":$(".search-page-stream-type-container.vod").show();break;case"series":$(".search-page-stream-type-container.series").show();break;case"live":$(".search-page-stream-type-container.live").show();break;case"replay":$(".search-page-stream-type-container.replay").show();break;default:$(".search-page-stream-type-container.live").show(),$(".search-page-stream-type-container.vod").show(),$(".search-page-stream-type-container.series").show()}this.filtered_movies=[],this.keys.hor_keys=[0,0,0],this.prev_keyword="",$("#search-page-input").val(""),$("#home-page").addClass("hide"),$("#channel-page").addClass("hide"),$("#search-page").show(),current_route="search-page",this.hoverTopMenu(0),this.handleMenuClick()},goBack:function(){clearTimeout(this.search_timeout),$("#search-page-input").blur(),$("#search-page").hide();var e="#"+this.prev_route;current_route="channel-page"==this.prev_route?($("#channel-page").removeClass("hide"),"channel-page"):($(e).removeClass("hide"),this.prev_route)},keywordChange:function(){clearTimeout(this.search_timeout);var n=this;this.search_timeout=setTimeout(function(){var e=n.prev_keyword,t=$("#search-page-input").val().toLowerCase();if(e!=t&&t){showLoader(!0),n.is_loading=!0;var i=VodModel.getCategories(!1,!1),s=SeriesModel.getCategories(!1,!1),o=LiveModel.getCategories(!1,!1),a=n.getReplayCategories();switch(n.filtered_movies=[],n.searching_for){case"vod":n.filtered_movies.push([]),n.filtered_movies.push(n.getFilteredMovies(i,t)),n.filtered_movies.push([]);break;case"series":n.filtered_movies.push([]),n.filtered_movies.push([]),n.filtered_movies.push(n.getFilteredMovies(s,t));break;case"live":n.filtered_movies.push(n.getFilteredMovies(o,t)),n.filtered_movies.push([]),n.filtered_movies.push([]),console.log("Filtered movies",n.filtered_movies);break;case"replay":n.filtered_movies.push(n.getFilteredMovies(a,t)),n.filtered_movies.push([]),n.filtered_movies.push([]);break;default:n.filtered_movies.push(n.getFilteredMovies(o,t)),n.filtered_movies.push(n.getFilteredMovies(i,t)),n.filtered_movies.push(n.getFilteredMovies(s,t))}switch(n.render_counts=[0,0,0],n.keys.hor_keys=[0,0,0],n.movie_doms=[[],[],[]],$(n.parent_elements[0]).html(""),$(n.parent_elements[1]).html(""),$(n.parent_elements[2]).html(""),n.searching_for){case"vod":n.renderFilteredMovies(1,!1,!1);break;case"series":n.renderFilteredMovies(2,!1,!1);break;case"live":n.renderFilteredMovies(0,!1,!1);break;case"replay":n.renderFilteredMovies(0,!1,!1,!0);break;default:n.renderFilteredMovies(0,!1,!0),n.renderFilteredMovies(1,!1,!0),n.renderFilteredMovies(2,!1,!0)}n.prev_keyword=t;e=2e3;n.filtered_movies[0].length+n.filtered_movies[1].length+n.filtered_movies[2].length<50&&(e=500),setTimeout(function(){showLoader(!1),n.is_loading=!1},e)}},400)},getReplayCategories:function(){return LiveModel.getCategories(!1,!1).map(function(e){var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));return e.movies=t,e}).filter(function(e){return 0<e.movies.length})},getFilteredMovies:function(e,t){var i=[];return e.map(function(e){checkForAdult(e,"category",[])||"resume"===e.category_id||(e=e.movies.filter(function(e){if(e&&e.name)return e.name.toLowerCase().includes(t)}),i=i.concat(e))}),i},renderFilteredMovies:function(s,e,t,i){var o,a,n,r,l,c,d,h,u=this.parent_elements[s],_=((i=i||!1)&&(u=$("#filtered_replay_container")[0]),this.render_counts[s]);0==this.filtered_movies[s].length?$(u).append("<p class='search-no-results'>No results found!</p>"):_>=this.filtered_movies[s].length||(i=this.render_count_increment,e&&(showLoader(!0),this.is_loading=!0),o=this,a="",n=0==s?"channel":"vod",r="stream_icon",c="stream_id",d=HOST+"app_src_min/images/default_movie.png",0==s&&(d=HOST+"app_src_min/images/logo.png",l=LiveModel.favourite_ids),1==s&&(VodModel.saved_video_times,l=VodModel.favourite_ids),2==s&&(r="cover",l=SeriesModel.favourite_ids,c="series_id"),h=this.filtered_movies[s].slice(_,_+i),t?$(".search-page-stream-items-container").addClass("one-line"):$(".search-page-stream-items-container").removeClass("one-line"),t=1500,h.length<10&&(t=0),h.map(function(e,t){var i=l.includes(e[c]);a+='<div class="filtered-movie-container '+n+'">                      <div class="filtered-movie-wrapper"                          onmouseenter="search_page.hoverMovie('+(_+t)+","+s+')"                          onclick="search_page.handleMenuClick()"                       >'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'<div class="filtered-movie-img-wrapper">                              <img src="'+e[r]+'" onerror="this.src=\''+d+'\'">                          </div>                          <div class="filtered-movie-title-wrapper">                              <div class="filtered-movie-title">'+e.name+"</div>                           </div>                       </div>                  </div>"}),this.render_counts[s]+=i,$(u).append(a),this.movie_doms[s]=$(u).find(".filtered-movie-wrapper"),e&&setTimeout(function(){showLoader(!1),o.is_loading=!1},t))},hoverTopMenu:function(e){var t;key_focused||((t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],t=this.parent_elements[0],moveScrollPosition($("#search-page-contents-wrapper"),$(t).closest(".search-page-stream-type-container"),"vertical",!1))},hoverMovie:function(e,t){if(!key_focused){var i=this.keys,i=(i.hor_keys[t]=e,i.v_selection=t,i.focused_part="movie_selection",this.parent_elements[t]);if($(this.prev_dom).removeClass("active"),$(this.movie_doms[t][e]).addClass("active"),this.prev_dom=this.movie_doms[t][e],moveScrollPosition(i,$(this.prev_dom).closest(".filtered-movie-container"),"horizontal",!1),"all"==this.searching_for)moveScrollPosition($("#search-page-contents-wrapper"),$(i).closest(".search-page-stream-type-container"),"vertical",!1);else{var s="";switch(this.searching_for){case"replay":s="replay";break;case"live":s="channels";break;case"vod":s="movies";break;case"series":s="series"}moveScrollPosition($("#filtered_"+s+"_container"),this.movie_doms[t][e],"vertical",!1)}}},handleMenuLeftRight:function(e){var t=this.keys;if(!key_focused)switch(t.focused_part){case"top_menu_selection":break;case"movie_selection":var i=t.hor_keys[t.v_selection]+e;(i=i<0?0:i)>=this.movie_doms[t.v_selection].length&&(i=this.movie_doms[t.v_selection].length-1),this.hoverMovie(i,t.v_selection),0<e&&i>=this.movie_doms[t.v_selection].length-9&&this.renderFilteredMovies(t.v_selection,!0)}},handleMenuUpDown:function(e){var t,i=this.keys;switch(i.focused_part){case"top_menu_selection":if(!key_focused&&0<e){if("vod"==this.searching_for)t=1;else if("series"==this.searching_for)t=2;else if("live"==this.searching_for)t=0;else for(var s=0;s<this.filtered_movies.length;s++)if(0<this.filtered_movies[s].length){t=s;break}null!=t&&0<this.filtered_movies[t].length&&(i.v_selection=t,this.hoverMovie(i.hor_keys[t],t));for(s=0;s<this.filtered_movies.length;s++)if(0<this.filtered_movies[s].length){i.v_selection=s,this.hoverMovie(i.hor_keys[s],s);break}}break;case"movie_selection":if("all"==this.searching_for){var o=-1;if(0<e){if(2<=i.v_selection)return;for(s=i.v_selection+1;s<3;s++)if(0<this.filtered_movies[s].length){o=s;break}}else for(s=i.v_selection-1;0<=s;s--)if(0<this.filtered_movies[s].length){o=s;break}if(e<0&&(i.v_selection<=0||-1===o)||-1===o)return void this.hoverTopMenu(0);-1!==o&&this.hoverMovie(i.hor_keys[o],o)}else{o=-1;switch(this.searching_for){case"replay":case"live":o=0;break;case"vod":o=1;break;case"series":o=2}"live"==this.searching_for||"replay"==this.searching_for?i.hor_keys[o]+=6*e:i.hor_keys[o]+=8*e;var a=this.filtered_movies[o];if(i.hor_keys[o]>=a.length&&(i.hor_keys[o]=a.length-1),i.hor_keys[o]<0)return i.hor_keys[o]=0,void this.hoverTopMenu(0);-1!==o&&this.hoverMovie(i.hor_keys[o],o),0<e&&i.hor_keys[o]>=this.movie_doms[i.v_selection].length-9&&this.renderFilteredMovies(i.v_selection,!0)}}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"top_menu_selection":0==e.top_menu_selection&&(key_focused?$("#search-page-input").blur():($("#search-page-input").focus(),setSelectionRange($("#search-page-input"))));break;case"movie_selection":var t=this.filtered_movies[e.v_selection][e.hor_keys[e.v_selection]];switch($("#search-page").hide(),e.v_selection){case 0:"replay"==this.searching_for?vod_series_page.init("replay",t):channel_page.init("search-page",t);break;case 1:current_movie=this.filtered_movies[1][e.hor_keys[1]],vod_summary_page.init("search-page");break;case 2:current_series=this.filtered_movies[2][e.hor_keys[2]],series_summary_page.init("search-page")}}},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},catchup_page={keys:{focused_part:"category_selection",category_search_selection:0,channel_search_selection:0,category_selection:0,channel_selection:0},category_doms:[],channel_doms:[],category_search_dom:$("#catchup-page-category-search-bar"),channel_search_dom:$("#catchup-page-channel-search-bar"),all_categories:[],categories:[],movies:[],all_movies:[],prev_focus_dom:null,prev_keyword:"",prev_category_keyword:"",search_timer:null,is_loading:!1,category_shown:!1,init:function(){var e;this.is_loading=!1,this.category_shown=!1,"xc"===settings.playlist_type&&($("#catchup-page-category-items-container").html(""),$("#catchup-page").addClass("category-expanded"),this.prev_category_keyword="",$("#catchup-page-category-search-input").val(""),e=LiveModel.getCategories(!1,!1),this.all_categories=e.map(function(e){var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));return e.movies=t,e}).filter(function(e){return 0<e.movies.length}),this.categories=this.all_categories.filter(function(e){return!0}),0<this.all_categories.length)?($("#home-page").addClass("hide"),$("#catchup-page").removeClass("hide"),this.renderCategories(),current_route="catchup-page",this.hoverCategory(0),this.showCategoryChannels()):showToast(current_words.sorry||"Sorry",current_words.no_catchup_available||"No catch up available for current playlist")},goBack:function(){var e=this.keys;switch(e.focused_part){case"channel_search_selection":if(key_focused)break;case"channel_selection":$("#catchup-page").addClass("category-expanded"),this.category_shown=!0,this.hoverCategory(e.category_selection);break;default:$("#catchup-page").addClass("hide"),home_page.reEnter()}},renderCategories:function(){var i="";this.categories.map(function(e,t){i+='<div class="catchup-page-category-item-container">                    <div class="catchup-page-category-item bg-focus"                        onmouseenter="catchup_page.hoverCategory('+t+')"                        onclick="catchup_page.handleMenuClick()"                        data-index="'+t+'"                    >                        <span class="catchup-category-name-wrapper">'+e.category_name+'</span>                        <span class="catchup-category-stream-count-container">                            <span class="catchup-category-stream-count">'+e.movies.length+'</span>                            <span class="catchup-category-count-icon">                                <img src="'+HOST+'app_src_min/images/forward_arrow.png">                            </span>                        </span>                    </div>                </div>'}),$("#catchup-page-category-items-container").html(i),this.category_doms=$(".catchup-page-category-item"),this.keys.category_selection=0},showCategoryChannels:function(){var e,t=this.keys;t.category_selection!==this.current_category_index&&(this.prev_keyword="",$("#catchup-page-channel-search-input").val(""),e=this.categories[t.category_selection],$("#catchup-category-title").text(e.category_name),e=e.movies,this.all_movies=e,this.movies=e.filter(function(e){return!0}),this.renderCategoryChannels(),t.channel_selection=0,this.current_category_index=t.category_selection)},renderCategoryChannels:function(){var i="";this.movies.map(function(e,t){i+='<div class="catchup-channel-menu-item-container">                    <div class="catchup-channel-menu-item bg-focus" data-channel_id="'+e.stream_id+'"                       data-index="'+t+'"                       onmouseenter="catchup_page.hoverChannel(this)"                       onclick="catchup_page.handleMenuClick()"                    >                        <span class="catchup-channel-number">'+e.num+'</span>                        <span class="catchup-channel-icon-wrapper"><img class="catchup-channel-icon" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></span>                        <span class="catchup-channel-name">'+e.name+"</span>                    </div>                </div>"}),$("#catchup-page-channel-items-container").html(i),this.channel_doms=$("#catchup-page-channel-items-container .catchup-channel-menu-item")},getEpgProgrammes:function(){var t,i,e=this.movies[this.keys.channel_selection];this.epg_channel_id!==e.stream_id&&(i=[],(t=this).programmes=[],t.showNextProgrammes(),this.epg_channel_id=e.stream_id,"xc"===settings.playlist_type)&&api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+e.stream_id,success:function(e){e.epg_listings.map(function(e){i.push({start:e.start,stop:e.end,title:e.title,description:e.description})}),t.programmes=i,t.updateNextProgrammes()}})},channelKeywordChange:function(){clearTimeout(this.search_timer);var s=this;this.search_timer=setTimeout(function(){var e,t,i=$("#catchup-page-channel-search-input").val();s.prev_keyword!==i&&((e=s.all_movies).sort(function(e,t){return e.name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.name.toLowerCase().includes(i)})),s.movies=t,s.prev_keyword=i,s.renderCategoryChannels())},400)},categoryKeywordChange:function(){clearTimeout(this.search_timer);var s=this;this.search_timer=setTimeout(function(){var e,t,i=$("#catchup-page-category-search-input").val();s.prev_category_keyword!==i&&((e=s.all_categories).sort(function(e,t){return e.category_name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.category_name.toLowerCase().includes(i)})),s.categories=t,s.prev_category_keyword=i,s.renderCategories())},400)},hoverCategorySearchBar:function(){this.keys.focused_part="category_search_selection",$(this.prev_focus_dom).removeClass("active"),$(this.category_search_dom).addClass("active"),this.prev_focus_dom=this.category_search_dom,$("#catchup-page").addClass("category-expanded"),this.category_shown=!0},hoverChannelSearchBar:function(){this.keys.focused_part="channel_search_selection",$(this.prev_focus_dom).removeClass("active"),$(this.channel_search_dom).addClass("active"),this.prev_focus_dom=this.channel_search_dom,$("#catchup-page").removeClass("category-expanded"),this.category_shown=!1},hoverCategory:function(e){var t=this.keys;t.focused_part="category_selection",t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#catchup-page-category-items-container"),$(this.category_doms[t.category_selection]).closest(".catchup-page-category-item"),"vertical",!1)},hoverChannel:function(e){var t=this.keys;t.focused_part="channel_selection",t.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[t.channel_selection]).addClass("active"),this.prev_focus_dom=this.channel_doms[t.channel_selection],moveScrollPosition($("#catchup-page-channel-items-container"),$(this.channel_doms[t.channel_selection]).closest(".catchup-channel-menu-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":checkForAdult(this.categories[e.category_selection],"category",[])?parent_confirm_page.init(current_route):(this.showCategoryChannels(),$("#catchup-page").removeClass("category-expanded"),this.category_shown=!1,this.hoverChannel(0));break;case"channel_selection":epg_page.init(this.movies[e.channel_selection]);break;case"channel_search_selection":key_focused?$("#catchup-page-channel-search-input").blur():($("#catchup-page-channel-search-input").focus(),setSelectionRange($("#catchup-page-channel-search-input")));break;case"category_search_selection":key_focused?$("#catchup-page-category-search-input").blur():($("#catchup-page-category-search-input").focus(),setSelectionRange($("#catchup-page-category-search-input")))}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":t.category_selection<2&&e<0?this.hoverCategorySearchBar():checkVerticalMovable(this.category_doms.length,2,t.category_selection,e)&&(t.category_selection+=2*e,t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(t.category_selection));break;case"channel_selection":t.channel_selection<2&&e<0?this.hoverChannelSearchBar():checkVerticalMovable(this.channel_doms.length,2,t.channel_selection,e)&&(t.channel_selection+=2*e,t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),t.channel_selection<0&&(t.channel_selection=0),this.hoverChannel(t.channel_selection));break;case"category_search_selection":key_focused||0<e&&0<this.category_doms.length&&this.hoverCategory(0);break;case"channel_search_selection":key_focused||0<e&&0<this.channel_doms.length&&this.hoverChannel(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":t.category_selection+=e,t.category_selection<0&&(t.category_selection=0),t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(t.category_selection);break;case"channel_selection":t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this.hoverChannel(t.channel_selection);break;case"category_search_selection":key_focused||0<e&&0<this.channel_doms.length&&this.hoverChannelSearchBar();break;case"channel_search_selection":e<0&&this.hoverCategorySearchBar()}},HandleKey:function(e){if(!this.is_loading){this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}},epg_page={keys:{focused_part:"date_selection",date_selection:0,programme_selection:0},movie:{},sorted_programmes:[],date_doms:[],programme_doms:[],current_programmes:[],is_loading:!1,channel_id:"",init:function(l){showLoader(!0),this.is_loading=!0,this.movie=l;var c=this,d=this.keys;current_route="catch-up-detail",d.focused_part="date_selection",api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+l.stream_id,success:function(e){for(var i,t=[],s=e.epg_listings,o="Y-MM-DD HH:mm",a=(12==settings.time_format&&(o="Y-MM-DD hh:mm A"),moment().subtract(l.tv_archive_duration,"days").unix(),0);a<s.length;a++){var n=s[a],r=getLocalChannelTime(n.start);r.unix();0!=n.has_archive&&t.push({start:r.format(o),stop:getLocalChannelTime(n.end).format(o),title:n.title,has_archive:n.has_archive})}c.sorted_programmes=c.sortProgrammesByDate(t),0==t.length||0==Object.keys(c.sorted_programmes).length?(showLoader(!1),c.is_loading=!1,showToast(current_words.sorry||"Sorry",current_words.no_epg_avaliable||"No Epg Available"),c.goBack()):($("#catchup-page").addClass("hide"),$("#catchup-detail-page").removeClass("hide"),i="",c.sorted_programmes.map(function(e,t){i+='<div class="epg-date-item-container bg-focus"                            onmouseenter="epg_page.selectDate('+t+',true,false)"                            onclick="epg_page.handleMenuClick()"                        >                            <div class="epg-date-item-date">'+e.day_string+"</div>                        </div>"}),$("#epg-dates-wrapper").html(i),c.date_doms=$(".epg-date-item-container"),d.focused_part="programme_selection",d.date_selection=c.sorted_programmes.length-1,$(c.date_doms[d.date_selection]).addClass("active"),c.selectDate(d.date_selection,!1,!0),setTimeout(function(){c.hoverProgramme(d.programme_selection),showLoader(!1),c.is_loading=!1},200))},error:function(){showLoader(!1),c.is_loading=!1,showToast(current_words.sorry||"Sorry",current_words.no_epg_avaliable||"No Epg Available"),c.goBack()}})},goBack:function(){var e=this.keys;switch(e.focused_part){case"date_selection":$("#catchup-detail-page").addClass("hide"),$("#catchup-page").removeClass("hide"),current_route="catchup-page";break;case"programme_selection":this.selectDate(e.date_selection,!0,!1)}},sortProgrammesByDate:function(e){for(var t={},i=moment().format("Y-MM-DD HH:mm:ss"),s=0;s<e.length;s++){var o=e[s];if(o.start>=i||o.stop>=i)break;var a,n=o.start,r=n.substr(0,10);void 0!==t[r]?t[r].programmes.push(o):(a=(n=moment(n,"Y-MM-DD HH:mm:ss")).format("DD MMM YYYY"),n=n.format("YYYY-MM-DD"),t[r]={day_string:a,date_string:n,programmes:[o]})}var l=[];return Object.keys(t).map(function(e){l.push(t[e])}),l},selectDate:function(e,t,i){var s=this.keys,o=(s.date_selection=e,"");this.current_programmes=this.sorted_programmes[e].programmes,this.sorted_programmes[e].programmes.map(function(e,t){o+='<div class="epg-programme-item-container">                    <div class="epg-programme-item-wrapper bg-focus"                        onmouseenter="epg_page.hoverProgramme('+t+')"                        onclick="epg_page.handleMenuClick()"                    >                        <div class="epg-programme-title">'+getAtob(e.title)+'</div>                        <div class="epg-time-icon-container">                            <span class="epg-programme-time">'+e.start.substr(11)+"-"+e.stop.substr(11)+"</span>                      </div>                   </div>                </div>"}),$("#epg-programmes-container").html(o),$("#epg-programmes-container").scrollLeft(0),i||(s.programme_selection=0),this.programme_doms=$(".epg-programme-item-wrapper "),$(this.date_doms).removeClass("active"),$(this.programme_doms).removeClass("active"),$(this.date_doms[e]).addClass("active"),t?(s.focused_part="date_selection",i||moveScrollPosition($("#epg-programmes-container"),$(this.programme_doms[0]).closest(".epg-programme-item-container"),"vertical",!1)):i||this.hoverProgramme(0),moveScrollPosition($("#epg-dates-wrapper"),this.date_doms[e],"horizontal",!1)},hoverProgramme:function(e){var t=this.keys;t.programme_selection=e,t.focused_part="programme_selection",$(this.date_doms).removeClass("active"),$(this.programme_doms).removeClass("active"),$(this.programme_doms[e]).addClass("active"),moveScrollPosition($("#epg-programmes-container"),$(this.programme_doms[e]).closest(".epg-programme-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;"programme_selection"===e.focused_part&&(e=this.sorted_programmes[e.date_selection].programmes[e.programme_selection],$("#catchup-detail-page").addClass("hide"),vod_series_player.init(e,"epg","catch-up-detail","",!0))},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"programme_selection":t.programme_selection+=e,t.programme_selection<0?(t.programme_selection=0,this.selectDate(t.date_selection,!0,!1)):(t.programme_selection>=this.current_programmes.length&&(t.programme_selection=this.current_programmes.length-1),this.hoverProgramme(t.programme_selection));break;case"date_selection":0<e&&0<this.programme_doms.length&&this.hoverProgramme(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"date_selection":case"programme_selection":t.date_selection+=e,t.date_selection<0&&(t.date_selection=0),t.date_selection>=this.sorted_programmes.length&&(t.date_selection=this.sorted_programmes.length-1),t.focused_part,this.selectDate(t.date_selection,!0,!1)}},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RIGHT:epg_page.handleMenuLeftRight(1);break;case tvKey.LEFT:epg_page.handleMenuLeftRight(-1);break;case tvKey.DOWN:epg_page.handleMenusUpDown(1);break;case tvKey.UP:epg_page.handleMenusUpDown(-1);break;case tvKey.ENTER:epg_page.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_recent_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-recent-modal button"),prev_route:"",movie:null,movie_kind:"",init:function(e,t){this.movie_kind=t,this.prev_route=e,current_route="clear_recent_page",this.hoverMenuItem(0),$("#clear-recent-modal").modal("show")},goBack:function(){$("#clear-recent-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t=this.keys;if("vod"==e)VodModel.removeAllWatchList(),showToast("Successful","Movies Watch lists cleared successfully!");else if("series"==e)SeriesModel.removeAllWatchList(),showToast("Successful","Series Watch lists cleared successfully!");else if("menu_selection"===t.focused_part)switch(this.keys.menu_selection){case 1:("vod"===this.movie_kind?VodModel:SeriesModel).removeAllWatchList(),this.goBack();break;case 0:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_cache_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-cache-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="clear_cache_page",this.hoverMenuItem(0),$("#clear-cache-modal").modal("show")},goBack:function(){$("#clear-cache-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){window.location.reload()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t;e=e||!1,"menu_selection"===this.keys.focused_part&&(1==this.keys.menu_selection||e?(current_route="login-page",$("#clear-cache-modal").modal("hide"),t=[],Object.keys(localStorage).map(function(e){e.includes(storage_id)&&t.push(e)}),t.map(function(e){localStorage.removeItem(e)}),settings.resetDefaultValues(),this.reloadPage()):this.goBack())},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},subtitle_setting_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".subtitle-setting-item"),prev_route:"",init:function(e){$("#current-subtitle-size").text(settings.subtitle_size+"px"),this.prev_route=e,current_route="subtitle-setting-page",this.hoverMenuItem(0),$("#subtitle-setting-modal").modal("show")},goBack:function(){$("#subtitle-setting-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){$("#app").hide(),$("#setting-page").addClass("hide"),$(home_page.prev_focus_dom).removeClass("active"),home_page.prev_focus_dom=null,current_route="login-page",$(".home-page-sub-container").removeClass("hide"),$("#home-page").addClass("is-home"),$(setting_page.menu_doms).removeClass("active"),setting_page.keys.menu_selection=0,login_page.login()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},increaseSubtitleSize:function(e){var t=settings.subtitle_size;100<(t=(t+=e)<20?20:t)&&(t=100),$("#current-subtitle-size").text(t+"px"),$(".subtitle-container").css({"font-size":t/16+"rem"}),settings.saveSettings("subtitle_size",t,"")},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){0<e?this.hoverMenuItem(1):this.hoverMenuItem(0)},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},layout_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".layout-setting-item"),prev_route:"",current_layout:1,init:function(e){this.current_layout=this.getLayoutChoice(),this.styleCurrentChoice(),this.prev_route=e,current_route="layout-page",this.current_layout&&0<=this.current_layout&&this.current_layout<this.menu_doms.length?this.hoverMenuItem(this.current_layout):this.hoverMenuItem(0),$("#layout-setting-modal").modal("show")},goBack:function(){$("#layout-setting-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},styleCurrentChoice:function(){$(this.menu_doms).removeClass("current"),$(this.menu_doms[this.current_layout]).addClass("current"),channel_page.setupCurrentLayout()},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},changeLiveLayoutSetting:function(e){e!=this.current_layout&&(this.current_layout=e,this.storeLayoutChoice(e),this.styleCurrentChoice(),this.goBack())},storeLayoutChoice:function(e){e?localStorage.setItem(storage_id+"live_layout",e):localStorage.setItem(storage_id+"live_layout",0)},getLayoutChoice:function(){return parseInt(localStorage.getItem(storage_id+"live_layout"))},handleMenusUpDown:function(e){var t=this.keys;t.menu_selection+=e,t.menu_selection<0?t.menu_selection=0:t.menu_selection>=this.menu_doms.length?t.menu_selection=this.menu_doms.length-1:this.hoverMenuItem(t.menu_selection)},handleMenuLeftRight:function(e){},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},USE_CUSTOM_KEYBOARD=!1,processingInputFocus=!1;function keyboardVisibilityChange(e){e.detail.visibility?key_focused=!0:(key_focused=!1,$("input").blur())}function isBackButtonPressed(e){if(27===e.keyCode)return!0;if(window.tvKey){if(e.keyCode===tvKey.RETURN)return!0;if("samsung"===platform&&10009===e.keyCode)return!0;if("lg"===platform&&461===e.keyCode)return!0;if(("vidaa"===platform||"zeasn"==platform||"titanos"===platform)&&8===e.keyCode)return!0}return!1}function initPlatformKeyboard(){if("samsung"===platform){document.addEventListener("visibilitychange",function(){document.hidden?webapis.avplay.suspend():webapis.avplay.restore()});for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var i=e[t];i.addEventListener("focus",function(){console.log("input element is focused and ready to get user input."),key_focused=!0}),i.addEventListener("blur",function(){console.log("input element loses focus."),key_focused=!1})}}else if("lg"===platform)document.addEventListener("keyboardStateChange",keyboardVisibilityChange,!1);else if("vidaa"===platform||"zeasn"==platform||"titanos"===platform){window.lastFocusedInput=null;for(var s=document.getElementsByTagName("input"),t=0;t<s.length;t++)s[t].addEventListener("click",function(e){e.preventDefault(),e.stopPropagation()})}document.addEventListener("keydown",function(e){var t=document.activeElement;if(13===e.keyCode&&t&&"INPUT"===t.tagName&&(!USE_CUSTOM_KEYBOARD||!custom_keyboard.isShown))return e.preventDefault(),e.stopPropagation(),t.blur(),!1})}function initCustomKeyboard(){custom_keyboard.init();for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var i=e[t];i.removeEventListener("focus",inputFocusHandler),i.removeEventListener("blur",inputBlurHandler),i.addEventListener("focus",inputFocusHandler),i.addEventListener("blur",inputBlurHandler),i.addEventListener("click",function(e){USE_CUSTOM_KEYBOARD&&(e.preventDefault(),e.stopPropagation(),custom_keyboard.isShown||this.focus())})}"lg"===platform&&document.addEventListener("keyboardStateChange",function(e){var t;USE_CUSTOM_KEYBOARD&&e.detail.visibility&&(console.log("Native keyboard trying to show - suppressing"),t=document.activeElement)&&"INPUT"===t.tagName&&(t.blur(),setTimeout(function(){custom_keyboard.show(t)},50))},!1),document.addEventListener("keydown",function(e){if(isBackButtonPressed(e)&&custom_keyboard.isShown)return custom_keyboard.hide(),e.preventDefault(),e.stopPropagation(),!1},!0)}function inputFocusHandler(){processingInputFocus||(processingInputFocus=!0,console.log("input element is focused and ready to show custom keyboard."),key_focused=!0,custom_keyboard.isShown||custom_keyboard.show(this),setTimeout(function(){processingInputFocus=!1},50))}function inputBlurHandler(){processingInputFocus||(console.log("input element loses focus."),key_focused=!1,setTimeout(function(){processingInputFocus||document.activeElement&&$(document.activeElement).hasClass("keyboard-key")||custom_keyboard.hide()},100))}$(document).ready(function(){if("vidaa"==platform||"zeasn"==platform||"titanos"==platform){USE_CUSTOM_KEYBOARD=!0;for(var e=document.querySelectorAll("div, span, p, img, section"),t=0;t<e.length;t++)e[t].setAttribute("tabindex","-1")}$("#app").addClass(platform),initKeys(),initPlayer(),settings.initFromLocal();var i=localStorage.getItem(storage_id+"parent_account_password");parent_account_password=null!=i?i:parent_account_password,"samsung"===platform?($("#vod-series-player-video-lg").hide(),$("#channel-page-video-lg").hide(),$("#home-page-player-lg").hide()):"lg"===platform&&($("#vod-series-player-video").hide(),$("#channel-page-video").hide(),$("#home-page-player").hide()),login_page.getPlayListDetail(),(USE_CUSTOM_KEYBOARD?initCustomKeyboard:initPlatformKeyboard)(),document.addEventListener("keydown",function(e){if(isBackButtonPressed(e)&&USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown)custom_keyboard.hide(),e.preventDefault(),e.stopPropagation();else if(!(USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown&&custom_keyboard.handleRemoteKeys(e))){if("samsung"===platform)switch(e.keyCode==tvKey.EXIT&&tizen.application.getCurrentApplication().exit(),e.keyCode){case 65376:case 65385:return void $("input").blur()}else if("vidaa"==platform||"zeasn"==platform||"titanos"==platform){var t=document.activeElement,i=t&&"INPUT"===t.tagName;switch(e.keyCode){case 13:if(i){if(key_focused)key_focused=!1,"search-page-input"===t.id&&search_page.keywordChange(),t.blur(),document.activeElement&&document.activeElement.blur(),window.lastFocusedInput=null;else if(window.lastFocusedInput=t,key_focused=!0,USE_CUSTOM_KEYBOARD)return custom_keyboard.show(t),e.preventDefault(),void e.stopPropagation();return e.preventDefault(),void e.stopPropagation()}break;case tvKey.RETURN:case 27:if(USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown)return custom_keyboard.hide(),key_focused=!1,e.preventDefault(),void e.stopPropagation();if(key_focused)return key_focused=!1,t&&t.blur(),document.activeElement&&document.activeElement.blur(),window.lastFocusedInput=null,e.preventDefault(),void e.stopPropagation();break;case 37:case 38:case 39:case 40:if(key_focused)return e.preventDefault(),void e.stopPropagation();i&&(t.blur(),document.activeElement)&&document.activeElement.blur()}e.keyCode!=tvKey.EXIT&&e.preventDefault()}if(!app_loading)switch(current_route){case"login-page":login_page.HandleKey(e);break;case"home-page":home_page.HandleKey(e);break;case"channel-page":channel_page.HandleKey(e);break;case"vod-series-page":vod_series_page.HandleKey(e);break;case"vod-summary-page":vod_summary_page.HandleKey(e);break;case"vod-series-player-video":vod_series_player.HandleKey(e);break;case"trailer-page":trailer_page.HandleKey(e);break;case"seasons-page":seasons_variable.HandleKey(e);break;case"episode-page":episode_variable.HandleKey(e);break;case"series-summary-page":series_summary_page.HandleKey(e);break;case"playlist-page":playlist_page.HandleKey(e);break;case"account-page":account_page.HandleKey(e);break;case"settings-page":settings_page.HandleKey(e);break;case"parent-confirm-page":parent_confirm_page.HandleKey(e);break;case"turn-off-page":turn_off_page.HandleKey(e);break;case"activation-page":activation_page.HandleKey(e);break;case"playlist-edit-page":playlist_edit_page.HandleKey(e);break;case"category-selection-page":category_selection_page.HandleKey(e);break;case"search-page":search_page.HandleKey(e);break;case"catchup-page":catchup_page.HandleKey(e);break;case"catch-up-detail":epg_page.HandleKey(e);break;case"clear_recent_page":clear_recent_page.HandleKey(e);break;case"clear_cache_page":clear_cache_page.HandleKey(e);break;case"subtitle-setting-page":subtitle_setting_page.HandleKey(e);break;case"layout-page":layout_page.HandleKey(e);break;case"color-theme-page":color_theme_page.HandleKey(e)}}}),$(".subtitle-container").css({"font-size":settings.subtitle_size/16+"rem",color:settings_page.subtitle_bg_options[settings.subtitle_bg].color,"background-color":settings_page.subtitle_bg_options[settings.subtitle_bg].background}),updateTimeStr(),setInterval(function(){updateTimeStr()},3e4)}),document.addEventListener("keydown",function(e){if(custom_keyboard&&custom_keyboard.isShown&&13===e.keyCode){var t=document.activeElement;if(t&&"keyboard-enter"===t.id)return console.log("Enter key pressed on Enter button via remote, hiding keyboard"),custom_keyboard.currentInput&&"search-page-input"===custom_keyboard.currentInput.id&&search_page.keywordChange(),custom_keyboard.hide(),key_focused=!1,e.preventDefault(),e.stopPropagation(),!1}},!0);