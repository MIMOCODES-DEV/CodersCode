function api(e){console.log(e),window.ongoingRequests||(window.ongoingRequests=[]);var t={type:"GET",headers:{},data:null},t={url:e.url,type:e.type||e.method||t.type,headers:e.headers||t.headers,data:e.data||t.data},i=("function"==typeof e.success&&(t.success=e.success),"function"==typeof e.error&&(t.error=e.error),e.timeout&&(t.timeout=e.timeout),$.ajax(t));return window.ongoingRequests.push(i),i.always(function(){var e=window.ongoingRequests.indexOf(i);-1<e&&window.ongoingRequests.splice(e,1)}),i}!function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}(this,function(){c=Math,A=Object.create||function(e){return xe.prototype=e,e=new xe,xe.prototype=null,e},p=(g={}).lib={},t=p.Base={extend:function(e){var t=A(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=p.WordArray=t.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||D).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,o=e.sigBytes;if(this.clamp(),s%4)for(var a=0;a<o;a++){var n=i[a>>>2]>>>24-a%4*8&255;t[s+a>>>2]|=n<<24-(s+a)%4*8}else for(a=0;a<o;a+=4)t[s+a>>>2]=i[a>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=t.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4){var s=function(t){var i=987654321,s=4294967295;return function(){var e=((i=36969*(65535&i)+(i>>16)&s)<<16)+(t=18e3*(65535&t)+(t>>16)&s)&s;return(e/4294967296+.5)*(.5<c.random()?1:-1)}}(4294967296*(o||c.random())),o=987654071*s();t.push(4294967296*s()|0)}return new d.init(t,e)}}),v=g.enc={},D=v.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],o=0;o<i;o++){var a=t[o>>>2]>>>24-o%4*8&255;s.push((a>>>4).toString(16)),s.push((15&a).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new d.init(i,t/2)}},N=v.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],o=0;o<i;o++){var a=t[o>>>2]>>>24-o%4*8&255;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new d.init(i,t)}},K=v.Utf8={stringify:function(e){try{return decodeURIComponent(escape(N.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return N.parse(unescape(encodeURIComponent(e)))}},F=p.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=K.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,s=t.sigBytes,o=this.blockSize,a=s/(4*o),n=(e?c.ceil(a):c.max((0|a)-this._minBufferSize,0))*o,e=c.min(4*n,s);if(n){for(var r=0;r<n;r+=o)this._doProcessBlock(i,r);var l=i.splice(0,n);t.sigBytes-=e}return new d.init(l,e)},clone:function(){var e=t.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p.Hasher=F.extend({cfg:t.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){F.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new H.HMAC.init(i,t).finalize(e)}}}),H=g.algo={};var c,A,t,d,D,N,K,F,H,o,n,r,a,l,h,U,j,z,W,V,q,G,J,Y,X,_,Z,Q,ee,te,e,ie,se,oe,i,ae,ne,re,le,ce,de,he,_e,ue,me,pe,ge,s,ve,fe,ye,be,ke,we,$e,Ce,Se,Me,Be,u,Te,m=g;function xe(){}Te=(v=m).lib.WordArray,v.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var o=[],a=0;a<i;a+=3)for(var n=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,r=0;r<4&&a+.75*r<i;r++)o.push(s.charAt(n>>>6*(3-r)&63));var l=s.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e){var t=e.length,i=this._map;if(!(s=this._reverseMap))for(var s=this._reverseMap=[],o=0;o<i.length;o++)s[i.charCodeAt(o)]=o;for(var a,n,r=i.charAt(64),l=(r&&-1!==(r=e.indexOf(r))&&(t=r),e),c=t,d=s,h=[],_=0,u=0;u<c;u++)u%4&&(a=d[l.charCodeAt(u-1)]<<u%4*2,n=d[l.charCodeAt(u)]>>>6-u%4*2,h[_>>>2]|=(a|n)<<24-_%4*8,_++);return Te.create(h,_)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};var Oe=Math;function M(e,t,i,s,o,a,n){e=e+(t&i|~t&s)+o+n;return(e<<a|e>>>32-a)+t}function B(e,t,i,s,o,a,n){e=e+(t&s|i&~s)+o+n;return(e<<a|e>>>32-a)+t}function T(e,t,i,s,o,a,n){e=e+(t^i^s)+o+n;return(e<<a|e>>>32-a)+t}function x(e,t,i,s,o,a,n){e=e+(i^(t|~s))+o+n;return(e<<a|e>>>32-a)+t}for(var p=m,Ie=(g=p.lib).WordArray,Ee=g.Hasher,g=p.algo,O=[],Re=0;Re<64;Re++)O[Re]=4294967296*Oe.abs(Oe.sin(Re+1))|0;g=g.MD5=Ee.extend({_doReset:function(){this._hash=new Ie.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,o=e[s];e[s]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var a=this._hash.words,n=e[t+0],r=e[t+1],l=e[t+2],c=e[t+3],d=e[t+4],h=e[t+5],_=e[t+6],u=e[t+7],m=e[t+8],p=e[t+9],g=e[t+10],v=e[t+11],f=e[t+12],y=e[t+13],b=e[t+14],k=e[t+15],w=M(a[0],S=a[1],C=a[2],$=a[3],n,7,O[0]),$=M($,w,S,C,r,12,O[1]),C=M(C,$,w,S,l,17,O[2]),S=M(S,C,$,w,c,22,O[3]);w=M(w,S,C,$,d,7,O[4]),$=M($,w,S,C,h,12,O[5]),C=M(C,$,w,S,_,17,O[6]),S=M(S,C,$,w,u,22,O[7]),w=M(w,S,C,$,m,7,O[8]),$=M($,w,S,C,p,12,O[9]),C=M(C,$,w,S,g,17,O[10]),S=M(S,C,$,w,v,22,O[11]),w=M(w,S,C,$,f,7,O[12]),$=M($,w,S,C,y,12,O[13]),C=M(C,$,w,S,b,17,O[14]),w=B(w,S=M(S,C,$,w,k,22,O[15]),C,$,r,5,O[16]),$=B($,w,S,C,_,9,O[17]),C=B(C,$,w,S,v,14,O[18]),S=B(S,C,$,w,n,20,O[19]),w=B(w,S,C,$,h,5,O[20]),$=B($,w,S,C,g,9,O[21]),C=B(C,$,w,S,k,14,O[22]),S=B(S,C,$,w,d,20,O[23]),w=B(w,S,C,$,p,5,O[24]),$=B($,w,S,C,b,9,O[25]),C=B(C,$,w,S,c,14,O[26]),S=B(S,C,$,w,m,20,O[27]),w=B(w,S,C,$,y,5,O[28]),$=B($,w,S,C,l,9,O[29]),C=B(C,$,w,S,u,14,O[30]),w=T(w,S=B(S,C,$,w,f,20,O[31]),C,$,h,4,O[32]),$=T($,w,S,C,m,11,O[33]),C=T(C,$,w,S,v,16,O[34]),S=T(S,C,$,w,b,23,O[35]),w=T(w,S,C,$,r,4,O[36]),$=T($,w,S,C,d,11,O[37]),C=T(C,$,w,S,u,16,O[38]),S=T(S,C,$,w,g,23,O[39]),w=T(w,S,C,$,y,4,O[40]),$=T($,w,S,C,n,11,O[41]),C=T(C,$,w,S,c,16,O[42]),S=T(S,C,$,w,_,23,O[43]),w=T(w,S,C,$,p,4,O[44]),$=T($,w,S,C,f,11,O[45]),C=T(C,$,w,S,k,16,O[46]),w=x(w,S=T(S,C,$,w,l,23,O[47]),C,$,n,6,O[48]),$=x($,w,S,C,u,10,O[49]),C=x(C,$,w,S,b,15,O[50]),S=x(S,C,$,w,h,21,O[51]),w=x(w,S,C,$,f,6,O[52]),$=x($,w,S,C,c,10,O[53]),C=x(C,$,w,S,g,15,O[54]),S=x(S,C,$,w,r,21,O[55]),w=x(w,S,C,$,m,6,O[56]),$=x($,w,S,C,k,10,O[57]),C=x(C,$,w,S,_,15,O[58]),S=x(S,C,$,w,y,21,O[59]),w=x(w,S,C,$,d,6,O[60]),$=x($,w,S,C,v,10,O[61]),C=x(C,$,w,S,l,15,O[62]),S=x(S,C,$,w,p,21,O[63]),a[0]=a[0]+w|0,a[1]=a[1]+S|0,a[2]=a[2]+C|0,a[3]=a[3]+$|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes,o=(t[s>>>5]|=128<<24-s%32,Oe.floor(i/4294967296));t[15+(64+s>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[14+(64+s>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,a=o.words,n=0;n<4;n++){var r=a[n];a[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}return o},clone:function(){var e=Ee.clone.call(this);return e._hash=this._hash.clone(),e}}),p.MD5=Ee._createHelper(g),p.HmacMD5=Ee._createHmacHelper(g),p=(v=m).lib,Me=p.WordArray,Be=p.Hasher,u=[],p=v.algo.SHA1=Be.extend({_doReset:function(){this._hash=new Me.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],o=i[1],a=i[2],n=i[3],r=i[4],l=0;l<80;l++){u[l]=l<16?0|e[t+l]:(c=u[l-3]^u[l-8]^u[l-14]^u[l-16])<<1|c>>>31;var c=(s<<5|s>>>27)+r+u[l];c+=l<20?1518500249+(o&a|~o&n):l<40?1859775393+(o^a^n):l<60?(o&a|o&n|a&n)-1894007588:(o^a^n)-899497514,r=n,n=a,a=o<<30|o>>>2,o=s,s=c}i[0]=i[0]+s|0,i[1]=i[1]+o|0,i[2]=i[2]+a|0,i[3]=i[3]+n|0,i[4]=i[4]+r|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=Math.floor(i/4294967296),t[15+(64+s>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=Be.clone.call(this);return e._hash=this._hash.clone(),e}}),v.SHA1=Be._createHelper(p),v.HmacSHA1=Be._createHmacHelper(p);var Le=Math,g=m,Pe=(v=g.lib).WordArray,Ae=v.Hasher,v=g.algo,De=[],Ne=[];function Ke(e){return 4294967296*(e-(0|e))|0}for(var Fe=2,He=0;He<64;)!function(e){for(var t=Le.sqrt(e),i=2;i<=t;i++)if(!(e%i))return;return 1}(Fe)||(He<8&&(De[He]=Ke(Le.pow(Fe,.5))),Ne[He]=Ke(Le.pow(Fe,1/3)),He++),Fe++;for(var Ue=[],v=v.SHA256=Ae.extend({_doReset:function(){this._hash=new Pe.init(De.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],o=i[1],a=i[2],n=i[3],r=i[4],l=i[5],c=i[6],d=i[7],h=0;h<64;h++){Ue[h]=h<16?0|e[t+h]:(((_=Ue[h-15])<<25|_>>>7)^(_<<14|_>>>18)^_>>>3)+Ue[h-7]+(((_=Ue[h-2])<<15|_>>>17)^(_<<13|_>>>19)^_>>>10)+Ue[h-16];var _=s&o^s&a^o&a,u=d+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&l^~r&c)+Ne[h]+Ue[h],d=c,c=l,l=r,r=n+u|0,n=a,a=o,o=s,s=u+(((s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22))+_)|0}i[0]=i[0]+s|0,i[1]=i[1]+o|0,i[2]=i[2]+a|0,i[3]=i[3]+n|0,i[4]=i[4]+r|0,i[5]=i[5]+l|0,i[6]=i[6]+c|0,i[7]=i[7]+d|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=Le.floor(i/4294967296),t[15+(64+s>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=Ae.clone.call(this);return e._hash=this._hash.clone(),e}}),je=(g.SHA256=Ae._createHelper(v),g.HmacSHA256=Ae._createHmacHelper(v),Se=(p=m).lib.WordArray,(p=p.enc).Utf16=p.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],o=0;o<i;o+=2){var a=t[o>>>2]>>>16-o%4*8&65535;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>1]|=e.charCodeAt(s)<<16-s%2*16;return Se.create(i,2*t)}},p.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],o=0;o<i;o+=2){var a=Pt(t[o>>>2]>>>16-o%4*8&65535);s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>1]|=Pt(e.charCodeAt(s)<<16-s%2*16);return Se.create(i,2*t)}},"function"==typeof ArrayBuffer&&(g=m.lib.WordArray,Ce=g.init,(g.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var t=e.byteLength,i=[],s=0;s<t;s++)i[s>>>2]|=e[s]<<24-s%4*8;Ce.call(this,i,t)}else Ce.apply(this,arguments)}).prototype=g),Math,p=(v=m).lib,s=p.WordArray,ve=p.Hasher,p=v.algo,fe=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),ye=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),be=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),ke=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),we=s.create([0,1518500249,1859775393,2400959708,2840853838]),$e=s.create([1352829926,1548603684,1836072691,2053994217,0]),p=p.RIPEMD160=ve.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,o=e[s];e[s]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}for(var a,n,r,l,c,d,h=this._hash.words,_=we.words,u=$e.words,m=fe.words,p=ye.words,g=be.words,v=ke.words,f=a=h[0],y=n=h[1],b=r=h[2],k=l=h[3],w=c=h[4],i=0;i<80;i+=1)d=(d=Lt(d=(d=a+e[t+m[i]]|0)+(i<16?(n^r^l)+_[0]:i<32?Et(n,r,l)+_[1]:i<48?((n|~r)^l)+_[2]:i<64?Rt(n,r,l)+_[3]:(n^(r|~l))+_[4])|0,g[i]))+c|0,a=c,c=l,l=Lt(r,10),r=n,n=d,d=(d=Lt(d=(d=f+e[t+p[i]]|0)+(i<16?(y^(b|~k))+u[0]:i<32?Rt(y,b,k)+u[1]:i<48?((y|~b)^k)+u[2]:i<64?Et(y,b,k)+u[3]:(y^b^k)+u[4])|0,v[i]))+w|0,f=w,w=k,k=Lt(b,10),b=y,y=d;d=h[1]+r+k|0,h[1]=h[2]+l+w|0,h[2]=h[3]+c+f|0,h[3]=h[4]+a+y|0,h[4]=h[0]+n+b|0,h[0]=d},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,o=s.words,a=0;a<5;a++){var n=o[a];o[a]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}return s},clone:function(){var e=ve.clone.call(this);return e._hash=this._hash.clone(),e}}),v.RIPEMD160=ve._createHelper(p),v.HmacRIPEMD160=ve._createHmacHelper(p),v=(g=m).lib.Base,ge=g.enc.Utf8,g.algo.HMAC=v.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=ge.parse(t));var i=e.blockSize,s=4*i;(t=t.sigBytes>s?e.finalize(t):t).clamp();for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),o=e.words,a=t.words,n=0;n<i;n++)o[n]^=1549556828,a[n]^=909522486;e.sigBytes=t.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}}),g=(p=m).lib,v=g.Base,ue=g.WordArray,f=(g=p.algo).SHA1,me=g.HMAC,pe=g.PBKDF2=v.extend({cfg:v.extend({keySize:4,hasher:f,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=me.create(i.hasher,e),o=ue.create(),a=ue.create([1]),n=o.words,r=a.words,l=i.keySize,c=i.iterations;n.length<l;){var d=s.update(t).finalize(a);s.reset();for(var h=d.words,_=h.length,u=d,m=1;m<c;m++){u=s.finalize(u),s.reset();for(var p=u.words,g=0;g<_;g++)h[g]^=p[g]}o.concat(d),r[0]++}return o.sigBytes=4*l,o}}),p.PBKDF2=function(e,t,i){return pe.create(i).compute(e,t)},v=(g=m).lib,f=v.Base,he=v.WordArray,p=(v=g.algo).MD5,_e=v.EvpKDF=f.extend({cfg:f.extend({keySize:4,hasher:p,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=i.hasher.create(),o=he.create(),a=o.words,n=i.keySize,r=i.iterations;a.length<n;){l&&s.update(l);var l=s.update(e).finalize(t);s.reset();for(var c=1;c<r;c++)l=s.finalize(l),s.reset();o.concat(l)}return o.sigBytes=4*n,o}}),g.EvpKDF=function(e,t,i){return _e.create(i).compute(e,t)},ce=(v=m).lib.WordArray,de=(f=v.algo).SHA256,f=f.SHA224=de.extend({_doReset:function(){this._hash=new ce.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=de._doFinalize.call(this);return e.sigBytes-=4,e}}),v.SHA224=de._createHelper(f),v.HmacSHA224=de._createHmacHelper(f),g=(p=m).lib,re=g.Base,le=g.WordArray,(g=p.x64={}).Word=re.extend({init:function(e,t){this.high=e,this.low=t}}),g.WordArray=re.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],s=0;s<t;s++){var o=e[s];i.push(o.high),i.push(o.low)}return le.create(i,this.sigBytes)},clone:function(){for(var e=re.clone.call(this),t=e.words=this.words.slice(0),i=t.length,s=0;s<i;s++)t[s]=t[s].clone();return e}}),Math),v=m,ze=(f=v.lib).WordArray,We=f.Hasher,Ve=v.x64.Word,f=v.algo,qe=[],Ge=[],Je=[],y=1,b=0,Ye=0;Ye<24;Ye++){qe[y+5*b]=(Ye+1)*(Ye+2)/2%64;var Xe=(2*y+3*b)%5;y=b%5,b=Xe}for(y=0;y<5;y++)for(b=0;b<5;b++)Ge[y+5*b]=b+(2*y+3*b)%5*5;for(var Ze=1,Qe=0;Qe<24;Qe++){for(var et,tt=0,it=0,st=0;st<7;st++)1&Ze&&((et=(1<<st)-1)<32?it^=1<<et:tt^=1<<et-32),128&Ze?Ze=Ze<<1^113:Ze<<=1;Je[Qe]=Ve.create(tt,it)}for(var I=[],ot=0;ot<25;ot++)I[ot]=Ve.create();function k(){return w.create.apply(w,arguments)}f=f.SHA3=We.extend({cfg:We.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new Ve.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,s=this.blockSize/2,o=0;o<s;o++){var a=e[t+2*o],n=e[t+2*o+1],a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);(w=i[o]).high^=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),w.low^=a}for(var r=0;r<24;r++){for(var l=0;l<5;l++){for(var c=0,d=0,h=0;h<5;h++)c^=(w=i[l+5*h]).high,d^=w.low;var _=I[l];_.high=c,_.low=d}for(l=0;l<5;l++)for(var u=I[(l+4)%5],m=I[(l+1)%5],p=m.high,m=m.low,c=u.high^(p<<1|m>>>31),d=u.low^(m<<1|p>>>31),h=0;h<5;h++)(w=i[l+5*h]).high^=c,w.low^=d;for(var g=1;g<25;g++){var v=(w=i[g]).high,f=w.low,y=qe[g],v=(d=y<32?(c=v<<y|f>>>32-y,f<<y|v>>>32-y):(c=f<<y-32|v>>>64-y,v<<y-32|f>>>64-y),I[Ge[g]]);v.high=c,v.low=d}var b=I[0],k=i[0];b.high=k.high,b.low=k.low;for(l=0;l<5;l++)for(h=0;h<5;h++){var w=i[g=l+5*h],$=I[g],C=I[(l+1)%5+5*h],S=I[(l+2)%5+5*h];w.high=$.high^~C.high&S.high,w.low=$.low^~C.low&S.low}w=i[0],b=Je[r];w.high^=b.high,w.low^=b.low}},_doFinalize:function(){var e=this._data,t=e.words,i=(this._nDataBytes,8*e.sigBytes),s=32*this.blockSize;t[i>>>5]|=1<<24-i%32,t[(je.ceil((1+i)/s)*s>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var o=this._state,i=this.cfg.outputLength/8,a=i/8,n=[],r=0;r<a;r++){var l=o[r],c=l.high,l=l.low,c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);n.push(16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)),n.push(c)}return new ze.init(n,i)},clone:function(){for(var e=We.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}}),v.SHA3=We._createHelper(f),v.HmacSHA3=We._createHmacHelper(f);for(var p=m,at=p.lib.Hasher,w=(g=p.x64).Word,nt=g.WordArray,g=p.algo,rt=[k(1116352408,3609767458),k(1899447441,602891725),k(3049323471,3964484399),k(3921009573,2173295548),k(961987163,4081628472),k(1508970993,3053834265),k(2453635748,2937671579),k(2870763221,3664609560),k(3624381080,2734883394),k(310598401,1164996542),k(607225278,1323610764),k(1426881987,3590304994),k(1925078388,4068182383),k(2162078206,991336113),k(2614888103,633803317),k(3248222580,3479774868),k(3835390401,2666613458),k(4022224774,944711139),k(264347078,2341262773),k(604807628,2007800933),k(770255983,1495990901),k(1249150122,1856431235),k(1555081692,3175218132),k(1996064986,2198950837),k(2554220882,3999719339),k(2821834349,766784016),k(2952996808,2566594879),k(3210313671,3203337956),k(3336571891,1034457026),k(3584528711,2466948901),k(113926993,3758326383),k(338241895,168717936),k(666307205,1188179964),k(773529912,1546045734),k(1294757372,1522805485),k(1396182291,2643833823),k(1695183700,2343527390),k(1986661051,1014477480),k(2177026350,1206759142),k(2456956037,344077627),k(2730485921,1290863460),k(2820302411,3158454273),k(3259730800,3505952657),k(3345764771,106217008),k(3516065817,3606008344),k(3600352804,1432725776),k(4094571909,1467031594),k(275423344,851169720),k(430227734,3100823752),k(506948616,1363258195),k(659060556,3750685593),k(883997877,3785050280),k(958139571,3318307427),k(1322822218,3812723403),k(1537002063,2003034995),k(1747873779,3602036899),k(1955562222,1575990012),k(2024104815,1125592928),k(2227730452,2716904306),k(2361852424,442776044),k(2428436474,593698344),k(2756734187,3733110249),k(3204031479,2999351573),k(3329325298,3815920427),k(3391569614,3928383900),k(3515267271,566280711),k(3940187606,3454069534),k(4118630271,4000239992),k(116418474,1914138554),k(174292421,2731055270),k(289380356,3203993006),k(460393269,320620315),k(685471733,587496836),k(852142971,1086792851),k(1017036298,365543100),k(1126000580,2618297676),k(1288033470,3409855158),k(1501505948,4234509866),k(1607167915,987167468),k(1816402316,1246189591)],lt=[],ct=0;ct<80;ct++)lt[ct]=k();g=g.SHA512=at.extend({_doReset:function(){this._hash=new nt.init([new w.init(1779033703,4089235720),new w.init(3144134277,2227873595),new w.init(1013904242,4271175723),new w.init(2773480762,1595750129),new w.init(1359893119,2917565137),new w.init(2600822924,725511199),new w.init(528734635,4215389547),new w.init(1541459225,327033209)])},_doProcessBlock:function(A,D){for(var e=this._hash.words,t=e[0],i=e[1],s=e[2],o=e[3],a=e[4],n=e[5],r=e[6],e=e[7],N=t.high,l=t.low,K=i.high,c=i.low,F=s.high,d=s.low,H=o.high,h=o.low,U=a.high,_=a.low,j=n.high,u=n.low,z=r.high,m=r.low,W=e.high,p=e.low,g=N,v=l,f=K,y=c,b=F,k=d,V=H,w=h,$=U,C=_,q=j,S=u,G=z,M=m,J=W,Y=p,B=0;B<80;B++)var T,x,O=lt[B],I=(B<16?(x=O.high=0|A[D+2*B],T=O.low=0|A[D+2*B+1]):(L=(E=lt[B-15]).high,R=(X=lt[B-2]).high,I=(P=lt[B-7]).high,Z=(Q=lt[B-16]).high,x=(x=(x=((L>>>1|(E=E.low)<<31)^(L>>>8|E<<24)^L>>>7)+I+((T=(I=(E>>>1|L<<31)^(E>>>8|L<<24)^(E>>>7|L<<25))+P.low)>>>0<I>>>0?1:0))+((R>>>19|(E=X.low)<<13)^(R<<3|E>>>29)^R>>>6)+((T=T+(L=(E>>>19|R<<13)^(E<<3|R>>>29)^(E>>>6|R<<26)))>>>0<L>>>0?1:0))+Z+((T=T+(P=Q.low))>>>0<P>>>0?1:0),O.high=x,O.low=T),$&q^~$&G),X=C&S^~C&M,E=g&f^g&b^f&b,R=(v>>>28|g<<4)^(v<<30|g>>>2)^(v<<25|g>>>7),L=rt[B],Z=L.high,Q=L.low,P=Y+((C>>>14|$<<18)^(C>>>18|$<<14)^(C<<23|$>>>9)),O=J+(($>>>14|C<<18)^($>>>18|C<<14)^($<<23|C>>>9))+(P>>>0<Y>>>0?1:0),ee=R+(v&y^v&k^y&k),J=G,Y=M,G=q,M=S,q=$,S=C,$=V+(O=O+I+((P=P+X)>>>0<X>>>0?1:0)+Z+((P=P+Q)>>>0<Q>>>0?1:0)+x+((P=P+T)>>>0<T>>>0?1:0))+((C=w+P|0)>>>0<w>>>0?1:0)|0,V=b,w=k,b=f,k=y,f=g,y=v,g=O+(((g>>>28|v<<4)^(g<<30|v>>>2)^(g<<25|v>>>7))+E+(ee>>>0<R>>>0?1:0))+((v=P+ee|0)>>>0<P>>>0?1:0)|0;l=t.low=l+v,t.high=N+g+(l>>>0<v>>>0?1:0),c=i.low=c+y,i.high=K+f+(c>>>0<y>>>0?1:0),d=s.low=d+k,s.high=F+b+(d>>>0<k>>>0?1:0),h=o.low=h+w,o.high=H+V+(h>>>0<w>>>0?1:0),_=a.low=_+C,a.high=U+$+(_>>>0<C>>>0?1:0),u=n.low=u+S,n.high=j+q+(u>>>0<S>>>0?1:0),m=r.low=m+M,r.high=z+G+(m>>>0<M>>>0?1:0),p=e.low=p+Y,e.high=W+J+(p>>>0<Y>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[30+(128+s>>>10<<5)]=Math.floor(i/4294967296),t[31+(128+s>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=at.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),p.SHA512=at._createHelper(g),p.HmacSHA512=at._createHmacHelper(g),f=(v=m).x64,i=f.Word,ae=f.WordArray,ne=(f=v.algo).SHA512,f=f.SHA384=ne.extend({_doReset:function(){this._hash=new ae.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=ne._doFinalize.call(this);return e.sigBytes-=16,e}}),v.SHA384=ne._createHelper(f),v.HmacSHA384=ne._createHmacHelper(f),m.lib.Cipher||(g=(p=m).lib,v=g.Base,_=g.WordArray,Z=g.BufferedBlockAlgorithm,(f=p.enc).Utf8,Q=f.Base64,ee=p.algo.EvpKDF,te=g.Cipher=Z.extend({cfg:v.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){Z.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(s){return{encrypt:function(e,t,i){return It(t).encrypt(s,e,t,i)},decrypt:function(e,t,i){return It(t).decrypt(s,e,t,i)}}}}),g.StreamCipher=te.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=p.mode={},e=g.BlockCipherMode=v.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),e=f.CBC=((f=e.extend()).Encryptor=f.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize;Ot.call(this,e,t,s),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),f.Decryptor=f.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,o=e.slice(t,t+s);i.decryptBlock(e,t),Ot.call(this,e,t,s),this._prevBlock=o}}),f),f=(p.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,i=t-e.sigBytes%t,s=i<<24|i<<16|i<<8|i,o=[],a=0;a<i;a+=4)o.push(s);t=_.create(o,i);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g.BlockCipher=te.extend({cfg:te.cfg.extend({mode:e,padding:f}),reset:function(){te.reset.call(this);var e,t=this.cfg,i=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,i&&i.words):(this._mode=e.call(t,this,i&&i.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),ie=g.CipherParams=v.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),e=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt;return(e?_.create([1398893684,1701076831]).concat(e).concat(t):t).toString(Q)},parse:function(e){var t,e=Q.parse(e),i=e.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=_.create(i.slice(2,4)),i.splice(0,4),e.sigBytes-=16),ie.create({ciphertext:e,salt:t})}},se=g.SerializableCipher=v.extend({cfg:v.extend({format:e}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var o=e.createEncryptor(i,s),t=o.finalize(t),o=o.cfg;return ie.create({ciphertext:t,key:i,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(i,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),f=(p.kdf={}).OpenSSL={execute:function(e,t,i,s){s=s||_.random(8);e=ee.create({keySize:t+i}).compute(e,s),i=_.create(e.words.slice(t),4*i);return e.sigBytes=4*t,ie.create({key:e,iv:i,salt:s})}},oe=g.PasswordBasedCipher=se.extend({cfg:se.cfg.extend({kdf:f}),encrypt:function(e,t,i,s){i=(s=this.cfg.extend(s)).kdf.execute(i,e.keySize,e.ivSize),s.iv=i.iv,e=se.encrypt.call(this,e,t,i.key,s);return e.mixIn(i),e},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);i=s.kdf.execute(i,e.keySize,e.ivSize,t.salt);return s.iv=i.iv,se.decrypt.call(this,e,t,i.key,s)}})),m.mode.CFB=((v=m.lib.BlockCipherMode.extend()).Encryptor=v.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize;xt.call(this,e,t,s,i),this._prevBlock=e.slice(t,t+s)}}),v.Decryptor=v.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,o=e.slice(t,t+s);xt.call(this,e,t,s,i),this._prevBlock=o}}),v),m.mode.ECB=((e=m.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e),m.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,t=4*t,t=t-i%t,i=i+t-1;e.clamp(),e.words[i>>>2]|=t<<24-i%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m.pad.Iso10126={pad:function(e,t){t*=4,t-=e.sigBytes%t;e.concat(m.lib.WordArray.random(t-1)).concat(m.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m.pad.Iso97971={pad:function(e,t){e.concat(m.lib.WordArray.create([2147483648],1)),m.pad.ZeroPadding.pad(e,t)},unpad:function(e){m.pad.ZeroPadding.unpad(e),e.sigBytes--}},m.mode.OFB=(p=m.lib.BlockCipherMode.extend(),g=p.Encryptor=p.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,o=this._iv,a=this._keystream;o&&(a=this._keystream=o.slice(0),this._iv=void 0),i.encryptBlock(a,0);for(var n=0;n<s;n++)e[t+n]^=a[n]}}),p.Decryptor=g,p),m.pad.NoPadding={pad:function(){},unpad:function(){}},Y=(f=m).lib.CipherParams,X=f.enc.Hex,f.format.Hex={stringify:function(e){return e.ciphertext.toString(X)},parse:function(e){e=X.parse(e);return Y.create({ciphertext:e})}};for(var v=m,g=v.lib.BlockCipher,p=v.algo,$=[],dt=[],ht=[],_t=[],ut=[],mt=[],pt=[],gt=[],vt=[],ft=[],C=[],S=0;S<256;S++)C[S]=S<128?S<<1:S<<1^283;for(var E=0,R=0,S=0;S<256;S++){var L=R^R<<1^R<<2^R<<3^R<<4,yt=C[dt[$[E]=L=L>>>8^255&L^99]=E],bt=C[yt],kt=C[bt],P=257*C[L]^16843008*L;ht[E]=P<<24|P>>>8,_t[E]=P<<16|P>>>16,ut[E]=P<<8|P>>>24,mt[E]=P,pt[L]=(P=16843009*kt^65537*bt^257*yt^16843008*E)<<24|P>>>8,gt[L]=P<<16|P>>>16,vt[L]=P<<8|P>>>24,ft[L]=P,E?(E=yt^C[C[C[kt^yt]]],R^=C[C[R]]):E=R=1}var wt=[0,1,2,4,8,16,32,64,128,27,54],p=p.AES=g.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,s=4*(1+(this._nRounds=6+i)),o=this._keySchedule=[],a=0;a<s;a++)a<i?o[a]=t[a]:(l=o[a-1],a%i?6<i&&a%i==4&&(l=$[l>>>24]<<24|$[l>>>16&255]<<16|$[l>>>8&255]<<8|$[255&l]):(l=$[(l=l<<8|l>>>24)>>>24]<<24|$[l>>>16&255]<<16|$[l>>>8&255]<<8|$[255&l],l^=wt[a/i|0]<<24),o[a]=o[a-i]^l);for(var n=this._invKeySchedule=[],r=0;r<s;r++){var l,a=s-r;l=r%4?o[a]:o[a-4],n[r]=r<4||a<=4?l:pt[$[l>>>24]]^gt[$[l>>>16&255]]^vt[$[l>>>8&255]]^ft[$[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,ht,_t,ut,mt,$)},decryptBlock:function(e,t){var i=e[t+1],i=(e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,pt,gt,vt,ft,dt),e[t+1]);e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,o,a,n,r){for(var l=this._nRounds,c=e[t]^i[0],d=e[t+1]^i[1],h=e[t+2]^i[2],_=e[t+3]^i[3],u=4,m=1;m<l;m++)var p=s[c>>>24]^o[d>>>16&255]^a[h>>>8&255]^n[255&_]^i[u++],g=s[d>>>24]^o[h>>>16&255]^a[_>>>8&255]^n[255&c]^i[u++],v=s[h>>>24]^o[_>>>16&255]^a[c>>>8&255]^n[255&d]^i[u++],f=s[_>>>24]^o[c>>>16&255]^a[d>>>8&255]^n[255&h]^i[u++],c=p,d=g,h=v,_=f;p=(r[c>>>24]<<24|r[d>>>16&255]<<16|r[h>>>8&255]<<8|r[255&_])^i[u++],g=(r[d>>>24]<<24|r[h>>>16&255]<<16|r[_>>>8&255]<<8|r[255&c])^i[u++],v=(r[h>>>24]<<24|r[_>>>16&255]<<16|r[c>>>8&255]<<8|r[255&d])^i[u++],f=(r[_>>>24]<<24|r[c>>>16&255]<<16|r[d>>>8&255]<<8|r[255&h])^i[u++];e[t]=p,e[t+1]=g,e[t+2]=v,e[t+3]=f},keySize:8});return v.AES=g._createHelper(p),v=(f=m).lib,j=v.WordArray,v=v.BlockCipher,z=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],W=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],V=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],q=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],G=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],J=(g=f.algo).DES=v.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var s=z[i]-1;t[i]=e[s>>>5]>>>31-s%32&1}for(var o=this._subKeys=[],a=0;a<16;a++){for(var n=o[a]=[],r=V[a],i=0;i<24;i++)n[i/6|0]|=t[(W[i]-1+r)%28]<<31-i%6,n[4+(i/6|0)]|=t[28+(W[i+24]-1+r)%28]<<31-i%6;n[0]=n[0]<<1|n[0]>>>31;for(i=1;i<7;i++)n[i]=n[i]>>>4*(i-1)+3;n[7]=n[7]<<5|n[7]>>>27}for(var l=this._invSubKeys=[],i=0;i<16;i++)l[i]=o[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],Bt.call(this,4,252645135),Bt.call(this,16,65535),Tt.call(this,2,858993459),Tt.call(this,8,16711935),Bt.call(this,1,1431655765);for(var s=0;s<16;s++){for(var o=i[s],a=this._lBlock,n=this._rBlock,r=0,l=0;l<8;l++)r|=q[l][((n^o[l])&G[l])>>>0];this._lBlock=n,this._rBlock=a^r}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,Bt.call(this,1,1431655765),Tt.call(this,8,16711935),Tt.call(this,2,858993459),Bt.call(this,16,65535),Bt.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2}),f.DES=v._createHelper(J),g=g.TripleDES=v.extend({_doReset:function(){var e=this._key.words;this._des1=J.createEncryptor(j.create(e.slice(0,2))),this._des2=J.createEncryptor(j.create(e.slice(2,4))),this._des3=J.createEncryptor(j.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),f.TripleDES=v._createHelper(g),f=(p=m).lib.StreamCipher,U=(v=p.algo).RC4=f.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,s=this._S=[],o=0;o<256;o++)s[o]=o;for(var o=0,a=0;o<256;o++){var n=o%i,n=t[n>>>2]>>>24-n%4*8&255,a=(a+s[o]+n)%256,n=s[o];s[o]=s[a],s[a]=n}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=Mt.call(this)},keySize:8,ivSize:0}),p.RC4=f._createHelper(U),v=v.RC4Drop=U.extend({cfg:U.cfg.extend({drop:192}),_doReset:function(){U._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)Mt.call(this)}}),p.RC4Drop=f._createHelper(v),m.mode.CTRGladman=(g=m.lib.BlockCipherMode.extend(),p=g.Encryptor=g.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,o=this._iv,a=this._counter,n=(o&&(a=this._counter=o.slice(0),this._iv=void 0),0===((o=a)[0]=St(o[0]))&&(o[1]=St(o[1])),a.slice(0));i.encryptBlock(n,0);for(var r=0;r<s;r++)e[t+r]^=n[r]}}),g.Decryptor=p,g),v=(f=m).lib.StreamCipher,a=[],l=[],h=[],p=f.algo.Rabbit=v.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);for(var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],i=this._b=0;i<4;i++)Ct.call(this);for(i=0;i<8;i++)o[i]^=s[i+4&7];if(t){var t=t.words,a=t[0],t=t[1],a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),n=a>>>16|4294901760&t,r=t<<16|65535&a;o[0]^=a,o[1]^=n,o[2]^=t,o[3]^=r,o[4]^=a,o[5]^=n,o[6]^=t,o[7]^=r;for(i=0;i<4;i++)Ct.call(this)}},_doProcessBlock:function(e,t){var i=this._X;Ct.call(this),a[0]=i[0]^i[5]>>>16^i[3]<<16,a[1]=i[2]^i[7]>>>16^i[5]<<16,a[2]=i[4]^i[1]>>>16^i[7]<<16,a[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)a[s]=16711935&(a[s]<<8|a[s]>>>24)|4278255360&(a[s]<<24|a[s]>>>8),e[t+s]^=a[s]},blockSize:4,ivSize:2}),f.Rabbit=v._createHelper(p),m.mode.CTR=(g=m.lib.BlockCipherMode.extend(),f=g.Encryptor=g.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,o=this._iv,a=this._counter,n=(o&&(a=this._counter=o.slice(0),this._iv=void 0),a.slice(0));i.encryptBlock(n,0),a[s-1]=a[s-1]+1|0;for(var r=0;r<s;r++)e[t+r]^=n[r]}}),g.Decryptor=f,g),p=(v=m).lib.StreamCipher,o=[],n=[],r=[],f=v.algo.RabbitLegacy=p.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],o=this._b=0;o<4;o++)$t.call(this);for(o=0;o<8;o++)s[o]^=i[o+4&7];if(t){var e=t.words,t=e[0],e=e[1],t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),a=t>>>16|4294901760&e,n=e<<16|65535&t;s[0]^=t,s[1]^=a,s[2]^=e,s[3]^=n,s[4]^=t,s[5]^=a,s[6]^=e,s[7]^=n;for(o=0;o<4;o++)$t.call(this)}},_doProcessBlock:function(e,t){var i=this._X;$t.call(this),o[0]=i[0]^i[5]>>>16^i[3]<<16,o[1]=i[2]^i[7]>>>16^i[5]<<16,o[2]=i[4]^i[1]>>>16^i[7]<<16,o[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)o[s]=16711935&(o[s]<<8|o[s]>>>24)|4278255360&(o[s]<<24|o[s]>>>8),e[t+s]^=o[s]},blockSize:4,ivSize:2}),v.RabbitLegacy=p._createHelper(f),m.pad.ZeroPadding={pad:function(e,t){t*=4;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},m;function $t(){for(var e=this._X,t=this._C,i=0;i<8;i++)n[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<n[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<n[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<n[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<n[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<n[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<n[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<n[6]>>>0?1:0)|0,this._b=t[7]>>>0<n[7]>>>0?1:0;for(i=0;i<8;i++){var s=e[i]+t[i],o=65535&s,a=s>>>16;r[i]=((o*o>>>17)+o*a>>>15)+a*a^((4294901760&s)*s|0)+((65535&s)*s|0)}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}function Ct(){for(var e=this._X,t=this._C,i=0;i<8;i++)l[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(i=0;i<8;i++){var s=e[i]+t[i],o=65535&s,a=s>>>16;h[i]=((o*o>>>17)+o*a>>>15)+a*a^((4294901760&s)*s|0)+((65535&s)*s|0)}e[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,e[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,e[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,e[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,e[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,e[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,e[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,e[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}function St(e){var t,i,s;return 255==(e>>24&255)?(i=e>>8&255,s=255&e,255===(t=e>>16&255)?(t=0,255===i?(i=0,255===s?s=0:++s):++i):++t,e=0,e=(e+=t<<16)+(i<<8)+s):e+=1<<24,e}function Mt(){for(var e=this._S,t=this._i,i=this._j,s=0,o=0;o<4;o++){var i=(i+e[t=(t+1)%256])%256,a=e[t];e[t]=e[i],e[i]=a,s|=e[(e[t]+e[i])%256]<<24-8*o}return this._i=t,this._j=i,s}function Bt(e,t){t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function Tt(e,t){t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}function xt(e,t,i,s){var o,a=this._iv;a?(o=a.slice(0),this._iv=void 0):o=this._prevBlock,s.encryptBlock(o,0);for(var n=0;n<i;n++)e[t+n]^=o[n]}function Ot(e,t,i){var s,o=this._iv;o?(s=o,this._iv=void 0):s=this._prevBlock;for(var a=0;a<i;a++)e[t+a]^=s[a]}function It(e){return"string"==typeof e?oe:se}function Et(e,t,i){return e&t|~e&i}function Rt(e,t,i){return e&i|t&~i}function Lt(e,t){return e<<t|e>>>32-t}function Pt(e){return e<<8&4278255360|e>>>8&16711935}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(a){Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&e!=e};var e,n="rangeslider",r=0,l=((e=document.createElement("input")).setAttribute("type","range"),"text"!==e.type),c={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},d={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};function i(e,t){var i=function(e){for(var t,i=[],s=e.parentNode;(t=s)&&(0===t.offsetWidth||0===t.offsetHeight||!1===t.open);)i.push(s),s=s.parentNode;return i}(e),s=i.length,o=[],a=e[t];function n(e){void 0!==e.open&&(e.open=!e.open)}if(s){for(var r=0;r<s;r++)o[r]=i[r].style.cssText,i[r].style.setProperty?i[r].style.setProperty("display","block","important"):i[r].style.cssText+=";display: block !important",i[r].style.height="0",i[r].style.overflow="hidden",i[r].style.visibility="hidden",n(i[r]);for(var a=e[t],l=0;l<s;l++)i[l].style.cssText=o[l],n(i[l])}return a}function s(e,t){e=parseFloat(e);return Number.isNaN(e)?t:e}function o(e){return e.charAt(0).toUpperCase()+e.substr(1)}function h(e,t){if(this.$window=a(window),this.$document=a(document),this.$element=a(e),this.options=a.extend({},c,t),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=d.orientation[this.orientation].dimension,this.DIRECTION=d.orientation[this.orientation].direction,this.DIRECTION_STYLE=d.orientation[this.orientation].directionStyle,this.COORDINATE=d.orientation[this.orientation].coordinate,this.polyfill&&l)return!1;this.identifier="js-"+n+"-"+r++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=a('<div class="'+this.options.fillClass+'" />'),this.$handle=a('<div class="'+this.options.handleClass+'" />'),this.$range=a('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=a.proxy(this.handleDown,this),this.handleMove=a.proxy(this.handleMove,this),this.handleEnd=a.proxy(this.handleEnd,this),this.init();var i,s,o=this;this.$window.on("resize."+this.identifier,(i=function(){!function(e,t){var i=Array.prototype.slice.call(arguments,2);setTimeout(function(){return e.apply(null,i)},t)}(function(){o.update(!1,!1)},300)},s=(s=20)||100,function(){var e;return i.debouncing||(e=Array.prototype.slice.apply(arguments),i.lastReturnVal=i.apply(window,e),i.debouncing=!0),clearTimeout(i.debounceTimeout),i.debounceTimeout=setTimeout(function(){i.debouncing=!1},s),i.lastReturnVal})),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(e,t){t&&t.origin===o.identifier||(t=e.target.value,e=o.getPositionFromValue(t),o.setPosition(e))})}return h.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},h.prototype.update=function(e,t){(e=e||!1)&&(this.min=s(this.$element[0].getAttribute("min"),0),this.max=s(this.$element[0].getAttribute("max"),100),this.value=s(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=s(this.$element[0].getAttribute("step"),1)),this.handleDimension=i(this.$handle[0],"offset"+o(this.DIMENSION)),this.rangeDimension=i(this.$range[0],"offset"+o(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,t)},h.prototype.handleDown=function(e){var t,i;e.preventDefault(),e.button&&0!==e.button||(this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),this.$range.addClass(this.options.activeClass),-1<(" "+e.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass))||(e=this.getRelativePosition(e),t=this.$range[0].getBoundingClientRect()[this.DIRECTION],t=this.getPositionFromNode(this.$handle[0])-t,i="vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos,this.setPosition(i),t<=e&&e<t+this.handleDimension&&(this.grabPos=e-t))},h.prototype.handleMove=function(e){e.preventDefault();e=this.getRelativePosition(e),e="vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos;this.setPosition(e)},h.prototype.handleEnd=function(e){e.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$range.removeClass(this.options.activeClass),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},h.prototype.cap=function(e,t,i){return e<t?t:i<e?i:e},h.prototype.setPosition=function(e,t){var i;void 0===t&&(t=!0),e=this.getValueFromPosition(this.cap(e,0,this.maxHandlePos)),i=this.getPositionFromValue(e),this.$fill[0].style[this.DIMENSION]=i+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=i+"px",this.setValue(e),this.position=i,this.value=e,t&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(i,e)},h.prototype.getPositionFromNode=function(e){for(var t=0;null!==e;)t+=e.offsetLeft,e=e.offsetParent;return t},h.prototype.getRelativePosition=function(e){var t=o(this.COORDINATE),i=this.$range[0].getBoundingClientRect()[this.DIRECTION],s=0;return void 0!==e.originalEvent["client"+t]?s=e.originalEvent["client"+t]:e.originalEvent.touches&&e.originalEvent.touches[0]&&void 0!==e.originalEvent.touches[0]["client"+t]?s=e.originalEvent.touches[0]["client"+t]:e.currentPoint&&void 0!==e.currentPoint[this.COORDINATE]&&(s=e.currentPoint[this.COORDINATE]),s-i},h.prototype.getPositionFromValue=function(e){e=(e-this.min)/(this.max-this.min);return Number.isNaN(e)?0:e*this.maxHandlePos},h.prototype.getValueFromPosition=function(e){e/=this.maxHandlePos||1,e=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min;return Number(e.toFixed(this.toFixed))},h.prototype.setValue=function(e){e===this.value&&""!==this.$element[0].value||this.$element.val(e).trigger("input",{origin:this.identifier})},h.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+n),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},a.fn[n]=function(i){var s=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=a(this),t=e.data("plugin_"+n);t||e.data("plugin_"+n,t=new h(this,i)),"string"==typeof i&&t[i].apply(t,s)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"}),window.PROXY_URL="";var VodModel={movies:[],category_name:"vod_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],saved_video_times:[],favourite_ids:[],stream_type:"vod",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,init:function(){this.movies=[],this.categories=[]},isProtected:function(e){return!!checkForAdult(e,"category",[])},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i){for(var s=this.stream_type,o=this.saved_video_times,a=-1,n=0;n<o.length;n++)if(o[n].stream_id==e){a=n;break}t={stream_id:e,time:t,duration:i};-1!=a?o[a]=t:o.push(t),this.saved_video_times=o,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+s+"_times",JSON.stringify(o))},removeVideoTime:function(e){for(var t=this.stream_type,i=this.saved_video_times,s=0;s<i.length;s++)if(i[s].stream_id==e){i.splice(s,1);break}this.saved_video_times=i,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+t+"_times",JSON.stringify(i))},addToWatchList:function(t){var e=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[e].movies,s=!1;i.map(function(e){e.stream_id==t.stream_id&&(s=!0)}),s||(i.unshift(t),i.splice(this.recent_movie_count),this.categories[e].movies=i)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s=0;s<i.length;s++)if(i[s].stream_id==e.stream_id){i.splice(s,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!0),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=this,t=this.stream_type,i=this.movies,s=this.categories;function o(e){return a.includes(e)}for(var a=null==(a=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(a),n={recent:{category_id:"recent",category_name:"Continue Watching",parent_id:0,movies:[],is_hide:o("recent")},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:o("top_rated")},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:o("favourite")},newlyAdded:{category_id:"newly_added",category_name:"Newly Added",parent_id:0,movies:[],is_hide:o("newly_added")},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:o("undefined")}},r=(s.push(n.undefined),{}),l=0;l<s.length;l++){var c=(s[l].category_name||"").toLowerCase();(c.includes("xxx")||c.includes("adult")||c.includes("porn")||c.includes("sex"))&&(r[s[l].category_id]=!0)}u=storage_id+settings.playlist.id+"_saved_"+t+"_times";for(var d,h,_,u=(u=localStorage.getItem(u))?JSON.parse(u):[],m=(this.saved_video_times=u,this.movie_key),p=(t=storage_id+settings.playlist.id+t+"_favourite",JSON.parse(localStorage.getItem(t))||[]),g=(this.favourite_ids=p,t=u,"xc"!==settings.playlist.playlist_type?t.map(function(e){return e.stream_id}):t.map(function(e){return parseInt(e.stream_id,10)})),v=[],f=[],y=[],b=[],k={},w=Math.floor(Date.now()/1e3),l=0;l<i.length;l++){E=I=O=x=T=B=M=S=C=$=void 0;var $=i[l],C=k,S=g,M=p,B=v,T=f,x=y,O=b,I=w,E=(void 0!==$.category_id&&"null"!==$.category_id&&null!==$.category_id||($.category_id="undefined"),$.category_id.toString());C[E]||(C[E]=[]),C[E].push($),$.is_recent=!1,-1!==S.indexOf($[m])&&B.push($),-1!==M.indexOf($[m])&&("before"===e.favourite_insert_position?T.unshift($):T.push($)),(C=function(e){return console.log("Caught the movie in an adult category",e),!0===r[e]}(E))||!$.rating||isNaN(parseFloat($.rating))||O.push($),!C&&$.added&&function(e,t){return t-e<=1296e3}($.added,I)&&x.push($)}d=v,h=[],g.forEach(function(e){for(var t=0;t<d.length;t++)if(d[t].stream_id==e){h.unshift(d[t]),d.splice(t,1);break}}),v=h,_=k,s.forEach(function(e){var t=e.category_id.toString();e.movies=_[t]||[]}),n.recent.movies=v,n.favourite.movies=f,n.newlyAdded.movies=y,n.topRated.movies=utilities.getTopRatedMovies(b)||[],null==n.topRated.movies&&(n.topRated.movies=[]),s.unshift(n.newlyAdded),s.unshift(n.topRated),s.unshift(n.favourite),s.unshift(n.recent);for(var R=s,L=0;L<R.length;L++)if("undefined"===R[L].category_id&&0===R[L].movies.length){R.splice(L,1);break}this.categories=s,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)}},LiveModel={movies:[],category_name:"live_categories",favourite_movie_count:500,recent_movie_count:15,movie_key:"stream_id",categories:[],programmes:{},movie_saved:!1,programme_saved:!1,favourite_ids:[],stream_type:"live",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!0),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=(e=localStorage.getItem(storage_id+settings.playlist.id+"_category_orders"))?JSON.parse(e):[];this.category_orders=e;var t=(t=localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders"))?JSON.parse(t):{},i=(this.channel_orders=t,this.stream_type),s=this.movies,o=this.categories;function a(e){return n.includes(e)}var n=null==(n=localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"))?[]:JSON.parse(n),r={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:a("recent")},l={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:a("favourite")},c={category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:a("undefined")},d=(o.push(c),this.movie_key),h=null==(h=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_recent")))?[]:h,_=null==(_=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_favourite")))?[]:_;this.favourite_ids=_;for(var u=[],m=[],p={},g=0;g<s.length;g++){var v=s[g];void 0!==v.category_id&&"null"!=v.category_id&&null!=v.category_id||(v.category_id="undefined"),void 0===p[f=v.category_id.toString()]?p[f]=[v]:p[f].push(v),v.is_recent=!1,h.includes(v[d])&&("before"===this.recent_insert_position?u.unshift(v):u.push(v),v.is_recent=!0),_.includes(v[d])&&("before"===this.favourite_insert_position?m.unshift(v):m.push(v))}for(g=0;g<o.length;g++){var f,s=p[f=o[g].category_id.toString()]||[];o[g].movies=s}r.movies=u,l.movies=m,o.unshift(l),o.unshift(r);for(g=0;g<o.length;g++)if("undefined"===o[g].category_id){o[g].movies&&0==o[g].movies.length&&o.splice(g,1);break}for(g=0;g<e.length;g++)for(b=0;b<o.length;b++)if(e[g].id==o[b].category_id){o=makeRearrangeArray(o,b,e[g].position);break}for(g=0;g<o.length;g++)if("favourite"==o[g].category_id&&(this.favourite_position=g),"recent"==o[g].category_id&&(this.recent_position=g),t[o[g].category_id]){for(var y=t[o[g].category_id],s=o[g].movies,b=0;b<y.length;b++)for(var k=0;k<s.length;k++)if(y[b].id==s[k].stream_id&&y[b].name==s[k].name){s=makeRearrangeArray(s,k,y[b].position);break}o[g].movies=s}this.categories=o,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},getProgrammeVideoUrl:function(e,t){var i;return"xc"===settings.playlist.playlist_type?(i=moment(t.start).subtract(time_difference_with_server,"minute").format("Y-MM-DD:HH-mm"),{duration:t=getMinute(t.stop)-getMinute(t.start),url:api_host_url+"/streaming/timeshift.php?username="+user_name+"&password="+password+"&stream="+e+"&start="+i+"&duration="+t}):{duration:"00:00",url:""}},getMovieFromId:function(e){var t=this.movies,i=null;this.categories.map(function(e){t=t.concat(e.movies)});for(var s=0;s<t.length;s++)if(t[s].stream_id==e){i=t[s];break}return i},getNextProgrammes:function(e){for(var t=!1,i=[],s=moment(new Date).unix(),o=0,a=0;a<e.length;a++){var n=e[a];if(s<=moment(n.stop).unix()&&(o++,moment(n.start).unix()<=s&&(t=!0),i.push(e[a])),4<=o)break}return{current_program_exist:t,programmes:i}}},SeriesModel={movies:[],favourite_movie_count:200,recent_movie_count:15,movie_key:"series_id",categories:[],saved_video_times:[],favourite_ids:[],stream_type:"series",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[]},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i,s,o){for(var a=this.stream_type,n=this.saved_video_times,r=-1,l={},c=0;c<n.length;c++)if(n[c].stream_id==e){l=n[r=c].video_times;break}var d={},s={time:s,duration:o};if((d=l[t.toString()]?l[t.toString()]:d)[i.toString()]=s,l[t.toString()]=d,-1!=r){o=this.getRecentOrFavouriteCategoryPosition("recent");if(this.categories[o].movies.length>=this.recent_movie_count)return;n[r].video_times=l}else n.push({stream_id:e,video_times:l});return this.saved_video_times=n,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+a+"_times",JSON.stringify(n)),l},removeVideoTime:function(e,t,i){for(var s,o=this.stream_type,a=this.saved_video_times,n={},r=!1,l=0;l<a.length;l++)if(a[l].stream_id==e){(n=a[l].video_times)[t.toString()]&&(delete(s=n[t.toString()])[i.toString()],0==Object.keys(s).length&&delete n[t.toString()],0==Object.keys(n).length?(a.splice(l,1),r=!0,n={},this.removeFromWatchList(e)):a[l].video_times=n,this.saved_video_times=a,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+o+"_times",JSON.stringify(a)));break}return[r,n]},addToWatchList:function(t){var i,e=this.getRecentOrFavouriteCategoryPosition("recent"),s=this.categories[e].movies;s.length>=this.recent_movie_count||(i=!1,s.map(function(e){e.series_id==t.series_id&&(i=!0)}),i)||(s.unshift(t),s.splice(this.recent_movie_count),this.categories[e].movies=s)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s="object"==typeof e?e.series_id:e,o=0;o<i.length;o++)if(i[o].series_id==s){i.splice(o,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!0),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=this,t=this.stream_type,i=this.movies,s=this.categories;function o(e){return n.includes(e)}for(var a,n=null==(n=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(n),r={recent:{category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:o("recent")},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:o("top_rated")},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:o("favourite")},recentlyModified:{category_id:"recently_modified",category_name:"Recently Added/Updated",parent_id:0,movies:[],is_hide:o("recently_modified")},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:o("undefined")}},l=(s.push(r.undefined),this.movie_key),c=(a=storage_id+settings.playlist.id+t+"_favourite",JSON.parse(localStorage.getItem(a))||[]),t=(this.favourite_ids=c,a=storage_id+settings.playlist.id+"_saved_"+t+"_times",(a=localStorage.getItem(a))?JSON.parse(a):[]),d=(this.saved_video_times=t,a=t,"xc"!==settings.playlist.playlist_type?a.map(function(e){return e.stream_id}):a.map(function(e){return parseInt(e.stream_id,10)})),h=[],_=[],u=[],m=[],p={},g=Math.floor(Date.now()/1e3),v=0;v<i.length;v++){B=M=S=C=$=w=k=b=y=f=void 0;var f=i[v],y=p,b=d,k=c,w=u,$=h,C=_,S=m,M=g,B=(void 0!==f.category_id&&"null"!=f.category_id&&null!=f.category_id||(f.category_id="undefined"),f.category_id.toString());y[B]||(y[B]=[]),y[B].push(f),f.is_recent=!1,-1!==b.indexOf(f[l])&&w.push(f),-1!==k.indexOf(f[l])&&("before"===e.favourite_insert_position?$.unshift(f):$.push(f)),f.rating&&!isNaN(parseFloat(f.rating))&&S.push(f),f.last_modified&&function(e,t){return t-parseInt(e,10)<=1296e3}(f.last_modified,M)&&C.push(f)}for(var t=function(e,t){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<t.length;o++)if(t[o].series_id==e[s]){i.unshift(t[o]),t.splice(o,1);break}return i}(d,u),T=s,x=p,O=0;O<T.length;O++){var I=T[O].category_id.toString();T[O].movies=x[I]||[]}r.recent.movies=t,r.favourite.movies=h,r.recentlyModified.movies=_,r.topRated.movies=utilities.getTopRatedMovies(m)||[],null==r.topRated.movies&&(r.topRated.movies=[]),s.unshift(r.recentlyModified),s.unshift(r.topRated),s.unshift(r.favourite),s.unshift(r.recent);for(var E=s,R=0;R<E.length;R++)if("undefined"===E[R].category_id&&0==E[R].movies.length){E.splice(R,1);break}this.categories=s,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)}},utilities={formatTimeStringToSeconds:function(e){var t;return"string"!=typeof e?(console.error("Invalid input: duration must be a string"),0):(t=0,3===(e=e.split(":").map(Number)).length?t=(t=(t+=3600*e[0])+60*e[1])+e[2]:2===e.length?t=(t+=60*e[0])+e[1]:1===e.length&&(t+=e[0]),t)},getPercentage:function(e,t){return Math.floor(e/t*100)},isNewlyAdded:function(e){return Math.floor(Date.now()/1e3)-e<=1296e3},isRecentlyModifiedSeries:function(e){return Math.floor(Date.now()/1e3)-parseInt(e,10)<=1296e3},compareTimestamps:function(e){var t=new Date;if(isNaN(String(e)))try{var i=e.split(" "),s=i[0].split("-"),o=i[1].split(":"),a=[s[0],s[1].padStart(2,"0"),s[2].padStart(2,"0")].join("-"),n=[o[0].padStart(2,"0"),o[1].padStart(2,"0")].join(":");if(r=new Date(a+"T"+n+":00"),isNaN(r.getTime()))throw new Error("Invalid date format")}catch(e){throw new Error("Invalid timestamp or date format. Expected Unix timestamp or 'YYYY-MM-DD HH:MM' format")}else{var i=String(e),r=i.length<=10?new Date(1e3*parseInt(i)):new Date(parseInt(i));if(isNaN(r.getTime()))throw new Error("Invalid timestamp value")}s=t.getTime(),o=r.getTime();return Math.round((o-s)/864e5)},convertToTimestamp:function(e){var t,i;if(e.match(/^\d{4}-\d{2}-\d{2}$/))t=e.split("-"),i=new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10));else{if(!e.match(/^\d{2}-\d{2}-\d{4}$/))throw new Error("Invalid date format. Please use either 'YYYY-MM-DD' or 'MM-DD-YYYY'");t=e.split("-"),i=new Date(parseInt(t[2],10),parseInt(t[0],10)-1,parseInt(t[1],10))}if((e=i)instanceof Date&&!isNaN(e))return i.getTime();throw new Error("Invalid date. Please check if the date exists.")},timestampDiffInDays:function(e){return Math.ceil((e-(new Date).getTime())/864e5)},getCurrentDate:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")},getCurrentDateTimeFormatted:function(){var e=new Date,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],i=e.getDate();return t+". "+(i<10?"0":"")+i+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()},pickProperties:function(e,t){for(var i={},s=0;s<t.length;s++){var o=t[s];e.hasOwnProperty(o)&&(i[o]=e[o])}return i},shuffleArray:function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[--s],e[s]=e[i],e[i]=t;return e},getTopRatedMovies:function(e){if(e&&0!=e.length){for(var t=e.sort(function(e,t){e=parseFloat(e.rating)||0;return(parseFloat(t.rating)||0)-e}),i=parseFloat(t[0].rating),s=[],o=0;o<t.length&&parseFloat(t[o].rating)==i;o++)s.push(t[o]);if(10<s.length)for(o=s.length-1;0<o;o--){var a=Math.floor(Math.random()*(o+1)),n=s[o];s[o]=s[a],s[a]=n}else if(s.length<10){var r=10;s.length<10&&(r=s.length+1);for(o=s.length;o<r;o++)s.push(e[o])}return(10<=s.length?s:t).slice(0,10)}},clampNumber:function(e,t,i){return Math.max(t,Math.min(e,i))}},color_theme_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:null,prev_route:"",themes:[["#000000","#950606"]],current_theme:0,init:function(e){this.generateColorThemes(),this.current_theme=this.getThemeChoiceIndex(),this.styleCurrentChoice(),this.prev_route=e,current_route="color-theme-page",this.current_theme&&0<=this.current_theme&&this.current_theme<this.menu_doms.length?this.hoverMenuItem(this.current_theme):this.hoverMenuItem(0),$("#colors-setting-modal").modal("show")},goBack:function(){$("#colors-setting-modal").modal("hide"),current_route=this.prev_route},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},hoverMenuItem:function(e,t){var t=t||!1,i=this.keys;i.focused_part="menu_selection",i.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active"),moveScrollPosition($("#colors-btns-container"),this.menu_doms[e],"horizontal",!0,t)},generateColorThemes:function(){var i="";this.themes.forEach(function(e,t){i+="      <div        class='colors-setting-item'        onmouseenter='color_theme_page.hoverMenuItem("+t+", true)'        onclick='color_theme_page.changeAppColors("+t+")'      >        <div class='color-setting-colors'>          <span class='color-setting-color' style='background: "+e[0]+";'></span>          <span class='color-setting-color' style='background: "+e[1]+";'></span>        </div>      </div>"}),$("#colors-btns-container").html(i),this.menu_doms=$(".colors-setting-item")},changeAppColors:function(e){settings.saveSettings("colors_theme",e),this.current_theme=e,this.styleCurrentChoice(),styleAppColors()},getThemeChoice:function(){var e=parseInt(localStorage.getItem(storage_id+"colors_theme"));return 0<=e&&e<=this.themes.length?this.themes[e]:this.themes[0]},getThemeChoiceIndex:function(){var e=parseInt(localStorage.getItem(storage_id+"colors_theme"));return 0<=e&&e<=this.themes.length?e:(this.changeAppColors(0),0)},getAppBackgroundColor:function(){return this.getThemeChoice()[0]},getAppMainColor:function(){return this.getThemeChoice()[1]},styleCurrentChoice:function(){$(this.menu_doms).removeClass("current"),$(this.menu_doms[this.current_theme]).addClass("current")},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;t.menu_selection+=e,t.menu_selection<0?t.menu_selection=0:t.menu_selection>this.menu_doms.length-1?t.menu_selection=this.menu_doms.length-1:this.hoverMenuItem(t.menu_selection)},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},colorUtils={processColor:function(e){var t;return"main"===e?t=color_theme_page.getAppMainColor():"background"===e&&(t=color_theme_page.getAppBackgroundColor()),t},processCustomStyle:function(e){return e=(e=e.replace("$BACKGROUND",color_theme_page.getAppBackgroundColor())).replace("$MAIN",color_theme_page.getAppMainColor())}},styleGroups={activeStyles:[{selector:".menu-item-container.active::before",property:"background-color",colorType:"main"},{selector:".latest-movie-item-wrapper.active .latest-movie-item-title-container",property:"background-color",colorType:"main"},{selector:".home-tab-item-container.active",property:"background-color",colorType:"main"},{selector:".layout-setting-item.active",property:"border-color",colorType:"main"},{selector:".layout-setting-item.active",property:"color",colorType:"main"},{selector:".layout-setting-item.current::after",property:"background-color",colorType:"main"},{selector:".setting-menu-item-wrapper.active .setting-menu-item-icon-container",property:"background-color",colorType:"main"},{selector:".hide-category-modal-option.active",property:"background-color",colorType:"main"},{selector:".vod-series-category-item.active",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item",property:"border-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item-title-wrapper",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-top-order",property:"background-color",colorType:"main"},{selector:".catchup-page-category-item.active, .catchup-channel-menu-item.active",property:"background-color",colorType:"main"},{selector:".epg-programme-item-wrapper.active",property:"background-color",colorType:"main"},{selector:".epg-date-item-container.active",property:"background-color",colorType:"main"},{selector:".channel-page-category-item.current",property:"background-color",colorType:"main"},{selector:"#vod-watch-movie-button.active .vod-watch-movie-icon-container",property:"background-color",colorType:"main"},{selector:".vod-action-btn.active",property:"background-color",colorType:"main"},{selector:".vod-action-btn.active",property:"border-color",colorType:"main"},{selector:".vod-series-search-btn.active",property:"background-color",colorType:"main"},{selector:"#vod-series-order-btn.active",property:"background-color",colorType:"main"},{selector:".sort-modal-item.active",property:"background-color",colorType:"main"},{selector:".filtered-movie-wrapper.active",property:"background-color",colorType:"main"},{selector:".modal-operation-menu-type-3.active",property:"background-color",colorType:"main"},{selector:".modal-btn-1.active",property:"background-color",colorType:"main"},{selector:".season-item-container.active",property:"background-color",colorType:"main"},{selector:".episode-item-wrapper.active",property:"background-color",colorType:"main"},{selector:".modal-btn-2.active",property:"background-color",colorType:"main"},{selector:"#aspect-ratio-modal-body div.active",property:"border-color",colorType:"main"},{selector:"#vod-summary-cast .cast-member.active .cast-image",property:"border-color",colorType:"main"},{selector:".rangeslider.active .rangeslider__handle",property:"border-color",colorType:"main"},{selector:".video-control-icon i.active",property:"border-color",colorType:"main"},{selector:".video-info-btn.active .video-info-icon",property:"border-color",colorType:"main"},{selector:".player-season-item.active",property:"background",colorType:"main"}],staticStyles:[{selector:"#app",property:"background-color",colorType:"background"},{selector:"#channel-page.classic",property:"background-color",colorType:"background"},{selector:".latest-movie-item-wrapper",property:"border-color",colorType:"main"},{selector:".vod-new-label",property:"background-color",colorType:"main"},{selector:"#vod-summary-watched-bar",property:"background-color",colorType:"main"},{selector:".notification-action-btn",property:"background-color",colorType:"main"},{selector:".highlight",property:"color",colorType:"main"},{selector:".rangeslider__fill",property:"background",colorType:"main"}],customStyles:[{selector:".playlist-item-wrapper",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #00000085 77%)"},{selector:"#add-playlist-btn",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #00000085 77%)"},{selector:".playlist-state",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #000000 77%)"},{selector:".channel-page-category-item.active, .channel-menu-item.active",property:"background",value:"linear-gradient( 90deg, $MAIN 37%, transparent, transparent )"},{selector:".modal-operation-menu-type-3.current",property:"border",value:"0.2rem solid $MAIN"}]};function styleAppColors(){for(var e="",t=0;t<styleGroups.customStyles.length;t++){var i=styleGroups.customStyles[t],s=colorUtils.processCustomStyle(i.value);e+=i.selector+" { "+i.property+": "+s+"; }\n"}for(t=0;t<styleGroups.activeStyles.length;t++){var o=styleGroups.activeStyles[t],a=colorUtils.processColor(o.colorType);e+=o.selector+" { "+o.property+": "+a+"; }\n"}for(t=0;t<styleGroups.staticStyles.length;t++){var n=styleGroups.staticStyles[t],a=colorUtils.processColor(n.colorType);e+=n.selector+" { "+n.property+": "+a+"; }\n"}var r=document.getElementById("themeColorStyles");r||((r=document.createElement("style")).id="themeColorStyles",document.head.appendChild(r)),r.innerHTML=e}$(document).ready(function(){styleAppColors()});var mac_address,ip_address,user_name,playlist_status,password,api_host_url,device_key,is_trial,weatherCountry,weatherCity,weatherForecast,weatherToday,weatherNow,expire_date,playlist_expire_date,current_movie,current_season,current_episode,current_series,settings={bg_img_url:"",playlist_id:0,playlist:{},vod_sort:"default",series_sort:"default",live_sort:"default",sort_keys:{added:"Added",number:"Number",rating:"Rating",a_z:"A-Z",z_a:"Z-A",name:"Name",default:"Default"},language:"en",time_format:"24",playlist_type:"",stream_format:"default",tmdb_choice:"on",home_favorites_choice:"on",live_initialization_choice:"default",subtitle_size:50,subtitle_bg:"transparent",initFromLocal:function(){var e,t=localStorage.getItem(storage_id+"bg_img_url"),i=(t&&(this.bg_img_url=t),t=localStorage.getItem(storage_id+"playlist_id"),this.playlist_id=t||0,this);["vod_sort","series_sort","live_sort","stream_format","tmdb_choice","home_favorites_choice","live_initialization_choice"].map(function(e){(t=localStorage.getItem(storage_id+e))&&(i[e]=t)}),(t=localStorage.getItem(storage_id+"language"))?this.language=t:void 0!==navigator.language&&(e=navigator.language.split("-"),this.language=e[0]),(t=localStorage.getItem(storage_id+"subtitle_size"))&&(this.subtitle_size=parseInt(t)),(t=localStorage.getItem(storage_id+"subtitle_bg"))&&(this.subtitle_bg=t)},saveSettings:function(e,t,i){this[e]=t,"object"!==i&&"array"!==i||(t=JSON.stringify(t)),localStorage.setItem(storage_id+e,t)},resetDefaultValues:function(){this.vod_sort="default",this.series_sort="default",this.live_sort="default",this.language="en",this.playlist_id="",this.time_format="24",this.stream_format="default",this.tmdb_choice="on",this.home_favorites_choice="on",this.live_initialization_choice="default",this.playlist={},this.subtitle_size=50,this.subtitle_bg="transparent"}},panel_urls=["https://iboiptv.com/api","https://iboplayer.com/api","https://ibotvplayer.com/api","https://tvplayeribo.com/api","https://ibobtv.com/api"],time_difference_with_server=0,is_device_low=!1,app_loading=!1,current_route="login",default_movie_icon=HOST+"app_src_min/images/logo.png",parent_account_password="0000",mac_valid=!0,playlist_urls=[],themes=[{name:"Future",url:"125984.png"},{name:"Honor Wallpaper",url:"166531.jpg"},{name:"Red Bubbles",url:"453684.png"},{name:"Movies Area",url:"521487.jpg"},{name:"Red Strings",url:"654236.png"},{name:"IBO Classic",url:"698079.png"},{name:"Modern Look",url:"753215.png"},{name:"Red Lines",url:"765321.png"},{name:"Main Background",url:"784319.jpg"},{name:"Sharp Lines",url:"951354.png"},{name:"Cinema",url:"953645.png"}],languages=[],current_words=[],notification={},client_offset=moment(new Date).utcOffset(),storage_id="gz3rYzUIC7_",platform="samsung",samsung_version="1.1.4",lg_version="1.0.6",vidaa_version="1.0.6",api_succeed=!0,current_timer=null,key_focused=!1,tmdb_api_key="a3c79068cd6961a3526ba1b516c50c39",tmdb_prefix_url="https://api.themoviedb.org/3",tmdb_img_url="https://image.tmdb.org/t/p/",storageMoviesInfo=JSON.parse(localStorage.getItem(storage_id+"saved-movie-info"))||{},agent_urls=["https://babyeducate.com/api","https://babyeducationonline.com/api"],main_domain="iboiptv.com",env="production",fontSize=localStorage.getItem(storage_id+"font_size");function showLoader(e){(e=void 0===e?!0:e)?$("#loader").show():$("#loader").hide()}function saveData(e,t){window[e]=t}function getMovieUrl(e,t,i){if("live"===t)if("default"!=settings.stream_format)i=settings.stream_format;else{var s=settings.playlist.origin_url;try{var o=s.split("output="),a=o[1]||"";"mpegts"===a||"ts"===a?i="ts":"hls"!==a&&"m3u8"!==a||(i="m3u8"),console.log("here extension1="+a,i)}catch(e){}}return api_host_url+"/"+t+"/"+user_name+"/"+password+"/"+e+"."+i}function moveScrollPosition(e,t,i,s,o,a){function n(e,t){return parseInt($(e).css(t).replace("px",""))}a=a||!1;var r,l,c,d=$(t).position();return"vertical"===i?(i=n(e,"height"),l=n(t,"height"),r=0,!s||o?(d.top+l>=i&&(r=d.top+l-i),d.top<0&&(r=d.top),$(e).animate({scrollTop:"+="+r},10,"swing")):(c=d.top+l/2-i/2,$(e).animate({scrollTop:"+="+c},100,"linear")),r):(l=n(e,"width"),i=n(t,"width"),c=0,!s||o?(d.left+i>=l&&(c=d.left+i-l),d.left<0&&!a?c=d.left:d.left<50&&a&&(c=d.left-100)):c=d.left+i/2-l/2,$(e).animate({scrollLeft:"+="+c},100,"linear"),c)}function showToast(e,t){$("#toast-body").html("<h3>"+e+"<br>"+t+"</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")}function getMinute(e){e=new Date(e);return parseInt(e.getTime()/60/1e3)}function goHomePageWithMovieType(e){try{var t=$("#menu-wrapper").find("*[data-type="+e+"]")[0];$(t).trigger("click"),"live-tv"===e?($("#home-page-movie-logo").hide(),$("#home-page-movie-logo").closest(".player-container").css({background:"#111"}),$("#search-button-wrapper").hide(),$("#home-page-video-preview").show(),home_page.reEnter()):(home_page.player=new AVPlayer("home-page-video-preview"),home_page.preview_url&&home_page.player.playAsync(home_page.preview_url)),current_route="home-page",$("#home-page-right-part-content-2").hide(""),$("#home-page-slider-container").css({opacity:0}),$("#home-page-slider-container").slick("unslick"),setTimeout(function(){$("#home-page-slider-container").css({opacity:1}),$("#home-page-slider-container").slick({autoplay:!0,arrows:!1,dots:!0,variableWidth:!1,autoplaySpeed:5e3})},1500),$("#home-page-right-part-content-1").css({height:"100vh"}),$("#home-page").css({height:"100vh"})}catch(e){showToast("Sorry","Some Error occured")}}function changeBackgroundImage(){var e=settings.bg_img_url;e.includes("http")?api_succeed&&$("#app").css({"background-image":"url("+e+")"}):(e=HOST+"app_src_min/images/backgrounds/"+e,$("#app").css({"background-image":"url("+e+")"}))}function parseM3uResponse(e,t){var i=0;if("general"===e){var s=[],o=[],a=[],n=[],r=[],l=[],c=(t=t.replace(/['"]+/g,"")).split(/#EXTINF:-{0,1}[0-9]{1,} {0,},{0,}/gm),d=(c.splice(0,1),[]);(new Date).getTime();if(t.includes("tvg-"))for(var h={},_={},u={},m=0;m<c.length;m++)try{var p,g,v,f,d=c[m].split("\n");i++,(y=1<d[1].length?d[1]:"").includes("http:")&&(e="live",(y.includes("/movie/")||y.includes("vod")||y.includes("=movie")||y.includes("==movie=="))&&(e="vod"),y.includes("/series/")&&(e="series"),p=d[0].trim().split(","),b=1<p.length?p[1]:"",g=splitStrings(p[0],["tvg-","channel-","group-"]),k={stream_id:"",name:b,stream_icon:"",title:""},v="All",g.map(function(e){var e=e.split("="),t=e[0],i=e[1];switch(t){case"id":k.stream_id=i;break;case"name":k.name=""!=i.trim()?i:b;break;case"logo":k.stream_icon=i;break;case"title":""==(v=i.split(",")[0])&&(v="Uncategorized")}}),""===k.stream_id.trim()&&(k.stream_id=k.name),k.url=y,k.num=i,"live"===e&&(void 0===h[v]&&(f={category_id:h[v]=v,category_name:v},s.push(f)),k.category_id=v,o.push(k)),"vod"===e&&(void 0===_[v]&&(f={category_id:_[v]=v,category_name:v},n.push(f)),k.category_id=v,a.push(k)),"series"===e)&&(void 0===u[v]&&(f={category_id:u[v]=v,category_name:v},r.push(f)),k.category_id=v,l.push(k))}catch(e){console.log("parsing m3u error "+m,e)}else for(s=[{category_id:"all",category_name:"All"}],n=[{category_id:"all",category_name:"All"}],r=[{category_id:"all",category_name:"All"}],m=0;m<c.length;m++){d=c[m].split("\n");try{var y,b=d[0],e="live",k=((y=d[1]).includes("/movie/")&&(e="movie"),y.includes("/series/")&&(e="series"),{});b=b.trim(),k.stream_id=b,k.name=b,k.stream_icon="",k.num=m+1,k.category_id="all",k.url=y,"live"===e&&o.push(k),"series"===e&&l.push(k),"movie"===e&&a.push(k)}catch(e){console.log(d[0]),console.log(e)}}1<s.length&&s.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<n.length&&n.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<r.length&&r.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),LiveModel.setCategories(s),LiveModel.setMovies(o),LiveModel.insertMoviesToCategories(),VodModel.setCategories(n),VodModel.setMovies(a),VodModel.insertMoviesToCategories(),SeriesModel.setCategories(r);t=parseSeries(l);SeriesModel.setMovies(t),SeriesModel.insertMoviesToCategories()}}function parseSeries(e){var s=[],a={},n={},r={},o=(e.map(function(e){try{var t=e.name.split(/ S[0-9]{2}/),i=e.name.match(/S[0-9]{2}/)[0],s=(i="Season "+(i=i.trim().replace("S","")),t[0].trim()),o=t[1].trim().replace("E","");void 0===a[s]?(n={},(r={})[i]=[{name:o,url:e.url,id:o,info:{},title:"Episode "+o}],n[i]={name:i,cover:HOST+"app_src_min/images/series.png"},a[s]={series_id:s,name:s,cover:e.stream_icon,youtube_trailer:"",category_id:e.category_id,rating:"",rating_5based:"",genre:"",director:"",cast:"",plot:"",season_map:n,episodes:r}):(void 0===n[i]?(r[i]=[{name:o,url:e.url,id:o,info:{},title:"Episode "+o}],n[i]={name:i,cover:HOST+"app_src_min/images/series.png"},a[s].season_map=n):r[i].push({name:i,url:e.url,id:i,info:{},title:"Episode "+o}),a[s].episodes=r)}catch(e){}}),console.log("Here Series Map",a),0);return Object.keys(a).map(function(e){o++;var t=a[e],i=[];try{Object.keys(t.season_map).map(function(e){i.push(t.season_map[e])})}catch(e){}delete t.season_map,t.num=o,t.seasons=i,s.push(t)}),s}function splitStrings(e,t){for(var i=[],s=0;s<t.length;s++){var o=e.split(t[s]);if(s==t.length-1)for(var a=0;a<o.length;a++)""!=o[a].trim()&&i.push(o[a]);else for(a=0;a<o.length;a++)""!=o[a].trim()&&splitStrings(o[a],t.slice(s+1)).map(function(e){""!==e.trim()&&i.push(e)});return i}}function getAtob(e){var t=e;try{return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){console.log(e)}return t}function checkForAdult(e,t,i){var s,o=!1;if("movie"===t){for(var a=0;a<i.length;a++)if(e.category_id==i[a].category_id){s=i[a];break}}else s=e;t=s.category_name.toLowerCase();return o=t.includes("xxx")||t.includes("adult")||t.includes("porn")?!0:o}function pickPanelUrl(i){for(var e,t,s=[],o=(panel_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),a=1/s.length,n=0;n<s.length;n++)if(n*a<=o&&o<=a*(n+1)){e=s[n],t=n;break}return[t,e]}function pickAgentUrl(i){for(var e,t,s=[],o=(agent_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),a=1/s.length,n=0;n<s.length;n++)if(n*a<=o&&o<=a*(n+1)){e=s[n],t=n;break}return[t,e]}function setSelectionRange(t){setTimeout(function(){var e=$(t).val();$(t)[0].setSelectionRange(e.length,e.length)},200)}function getSortedMovies(e,t){var i=[],s="number"===t?"num":"a_z"!==t&&"z_a"!==t?t:"name";if(0==e.length)return e;if(void 0===e[0][s])return e;var o=1;switch(t){case"rating":case"number":case"added":case"last_modified":o=1,"number"===t&&(o=-1),i=e.sort(function(e,t){e=parseFloat(e[s]),isNaN(e)&&(e=0),t=parseFloat(t[s]);return isNaN(t)&&(t=0),o*(e<t?1:t<e?-1:0)});break;case"a_z":case"z_a":case"name":o="a_z"===t||"name"===t?1:-1,i=e.sort(function(e,t){return o*e[s].localeCompare(t[s])});break;case"default":return e}return i}function updateCurrentTime(){var e=moment().format("hh:mm A");$(".current-time").text(e)}function parseM3uUrl(e){var i,s,t=e.includes("username=")&&e.includes("password=")?"xc":"general",o="xc"===t?((o=e.split("?"))[1].split("&").map(function(e){var e=e.split("="),t=e[0],e=e[1];"username"===t.toLowerCase()&&(i=e),"password"===t.toLowerCase()&&(s=e)}),o[0].replace("/get.php","")):e;return{playlist_type:t,url:o,username:i,password:s}}function getEncryptKey(e){for(var t="";t.length<e;t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(62*Math.random()|0));return t}function getEncryptKeyPosition(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i=0;i<t.length;i++)if(t[i]==e)return i}function getEncryptPositionChar(e){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(e)}function encryptRequest(e){var e=JSON.stringify(e),e=btoa(e),t=parseInt(30*Math.random()),i=(t<20&&(t=20),Math.floor(Math.random()*e.length)),s=(42<=i&&(i=42),getEncryptKey(t)),s=e.slice(0,i).concat(s).concat(e.slice(i)),e=getEncryptPositionChar(i),i=getEncryptPositionChar(t);return s=(s=s.slice(0,0)+e+s.slice(0)).slice(0,1)+i+s.slice(1)}function decryptResponse(e){var e=e.data,t=getEncryptKeyPosition(e[e.length-2]),i=getEncryptKeyPosition(e[e.length-1]),e=((e=e.slice(0,e.length-2)).slice(t,t+i),getAtob(e.slice(0,t).concat(e.slice(t+i))));return JSON.parse(e)}function newEncryptRequest(e,t){return CryptoJS.AES.encrypt(JSON.stringify(e),t).toString()}function newDecryptResponse(e,t){return JSON.parse(CryptoJS.AES.decrypt(e,t).toString(CryptoJS.enc.Utf8))}function changeLocalStorageKeysForPlaylist(e,s){for(var o=[],t=localStorage.length-1;0<=t;t--){var a=localStorage.key(t);e.map(function(e,t){var i;a.includes(e)&&a.includes(storage_id)&&(i=localStorage.getItem(a),e=a.replace(e,s[t]),localStorage.setItem(e,i),o.push(a))})}o.map(function(e){localStorage.removeItem(e)})}function removeLocalStorageKeysForPlaylist(e){for(var t=[],i=localStorage.length-1;0<=i;i--){var s=localStorage.key(i);e.map(function(e){s.includes(storage_id)&&s.includes(e)&&t.push(s)})}t.map(function(e){localStorage.removeItem(e)})}function checkActivePlaylist(){return!(!settings.playlist_id||0==Object.keys(settings.playlist).length)||(showToast("Sorry","No active playlist now<br>Please select one playlist in change playlist page"),!1)}function makeRearrangeArray(e,t,i){t=e.splice(t,1)[0];return e.splice(i,0,t),e}function getRealMovieName(e){for(var e=e.split("-"),t=(1<e.length?e[1]:e[0]).split("("),e=t[0].trim(),i="",s="",o=1;o<t.length;o++){var a=t[o].replace(")","").trim();isNaN(a)?i=a:s=parseInt(a)}return{name:e,country:i,year:s}}function hideImg(e){$(e).hide(),$(".vod-series-background-img-overlay").hide()}function checkVerticalMovable(e,t,i,s){var o=i<t&&s<0?!1:!0;return o=(Math.ceil(e/t)-1)*t<=i&&0<s?!1:o}function getLatestMovies(e){var t=[],i=("channel"===e?t=LiveModel.getCategories(!1,!1):"movie"===e?t=VodModel.getCategories(!1,!1):"series"===e&&(t=SeriesModel.getCategories(!1,!1)),[]);return t.map(function(e){checkForAdult(e,"category",[])||(i=i.concat(e.movies))}),(i=getSortedMovies(i,"added")).slice(0,50)}function updateTimeStr(){var e=moment().format("hh:mm A");$(".current-time").text(e)}function debounce(i,s){var o;return function(){var e=this,t=arguments;clearTimeout(o),o=setTimeout(function(){o=null,i.apply(e,t)},s)}}function applyAnimation(t){try{clearTimeout(scroll_text_timer),scroll_text_timer=null,scroll_text_timer=setTimeout(function(){var e;$(t).find(".floatTextWrapper").width()<$(t).find(".floatText").width()&&(0==$(t).find(".floatTextTail").length&&(e=$(t).find(".floatText").html(),$(t).find(".floatTextWrapper").append('<span class="floatText floatTextTail">'+e+"</span>")),e=15*$(t).find(".floatText").width()/1e3,$(t).find(".floatText").css({"animation-duration":e+"s","-webkit-animation-duration":e+"s"}).addClass("has-animation"))},scroll_text_time)}catch(e){}}function handleWeatherFetchAndStore(){var e=JSON.parse(localStorage.getItem(storage_id+"weather-forecast")),t=(console.log("Stored Weather Data:",e),-20);e&&e.date&&(console.log("Date detected"),t=utilities.compareTimestamps(e.date)),e&&e.timestamp&&(console.log("Timestamp detected"),t=utilities.compareTimestamps(e.timestamp)),!e||t<=-13?$.getJSON("http://api.weatherapi.com/v1/forecast.json?key=0c1f9db9b99649f3a2b124503241310&q="+ip_address+"&days=14",function(e){e={date:e.location.localtime,country:e.location.country,city:e.location.name,forecast:e.forecast.forecastday};localStorage.setItem(storage_id+"weather-forecast",JSON.stringify(e)),handleWeatherFetchAndStore()}):(weatherCountry=e.country,weatherCity=e.city,weatherForecast=e.forecast,weatherToday=binarySearchForecastDays(weatherForecast),weatherNow=binarySearchForecastHours(weatherToday.hour))}function binarySearchForecastDays(e){for(var t=new Date,i=(t.setUTCHours(0,0,0,0),Math.floor(t.getTime()/1e3)),s=0,o=e.length-1;s<=o;){var a=Math.floor((s+o)/2);if(e[a].date_epoch===i)return e[a];e[a].date_epoch<i?s=a+1:o=a-1}return 0<=o&&e[o].date_epoch<=i?e[o]:s<e.length?e[s]:null}function binarySearchForecastHours(e){for(var t=new Date,i=Math.floor(t.getTime()/1e3),s=0,o=e.length-1;s<=o;){var a=Math.floor((s+o)/2);if(e[a].time_epoch<=i&&(a===e.length-1||e[a+1].time_epoch>i))return e[a];e[a].time_epoch>i?o=a-1:s=a+1}return s<e.length?e[s]:null}fontSize&&"large"===fontSize&&document.body.classList.add("large-font"),String.prototype.endsWith||(String.prototype.endsWith=function(e){return e=String(e),this.slice(-e.length)===e}),Array.prototype.map||(Array.prototype.map=function(e,t){if(null==this)throw new TypeError("this is null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var i=Object(this),s=i.length>>>0,o=new Array(s),a=0;a<s;a++)a in i&&(o[a]=e.call(t,i[a],a,i));return o}),Array.prototype.includes||(Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,n,r){return function(e,t){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var i=a(this),s=i.length>>>0,o=r(0|t,s);if(o<0)o=n(0,s+o);else if(s<=o)return-1;if(void 0===e){for(;o!==s;++o)if(void 0===i[o]&&o in i)return o}else if(e!=e){for(;o!==s;++o)if(i[o]!=i[o])return o}else for(;o!==s;++o)if(i[o]===e)return o;return-1}}(Object,Math.max,Math.min)),String.prototype.includes||(String.prototype.includes=function(e){return!!~this.indexOf(e)}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))});var isOnline=!0,checkInterval=null,isOnline=!0,checkInterval=null;function checkConnection(){var a,n;a=["https://vidaa.iboprotv.com/","https://vidaa.iboprotv.com/"],n=0,function e(){var t,i,s,o;n<a.length?(t=a[n],i=function(){},s=function(){n++,e()},(o=new XMLHttpRequest).open("GET",t,!0),o.onreadystatechange=function(){4===o.readyState&&(200<=o.status&&o.status<300?(handleUIOnlineStatus(!0),i):s)()},o.send()):handleUIOnlineStatus(!1)}()}function handleUIOnlineStatus(e){!0===e?($("#connection-status").removeClass("offline"),$("#connection-status").addClass("online"),isOnline||(isOnline=!0,clearInterval(checkInterval),checkInterval=setInterval(checkConnection,3e4))):($("#connection-status").removeClass("online"),$("#connection-status").addClass("offline"),isOnline&&(isOnline=!1,clearInterval(checkInterval),checkInterval=setInterval(checkConnection,5e3)))}function checkDevicePerformance(s){var e,t={frameThreshold:30,testDuration:500,iterations:1e3};for(e in s=s||{},t)s.hasOwnProperty(e)||(s[e]=t[e]);function o(e){if(r){n++;for(var t=0;t<s.iterations;t++)l.style.transform="rotate("+t+"deg)",Math.sqrt(1e4*Math.random());if(e-a<s.testDuration)requestAnimationFrame(o);else{r=!1;var e=performance.now()-a,i=n/(e/1e3),e=(document.body.removeChild(l),console.log("Performance Test Results:"),console.log("- Frames rendered:",n),console.log("- Time elapsed:",e.toFixed(2)+"ms"),console.log("- Average FPS:",i.toFixed(2)),console.log("- Target FPS:",s.frameThreshold),i>=s.frameThreshold);if(e){is_device_low=false;document.body.classList.add("allow-transition")}else{is_device_low=true;document.body.classList.remove("allow-transition")}console.log("Test passed:",e)}}}var a=performance.now(),n=0,r=!0,l=document.createElement("div");l.style.position="absolute",l.style.left="-9999px",document.body.appendChild(l);requestAnimationFrame(o)}var clearCachedMoviesInfo=function(){storageMoviesInfo&&(storageMoviesInfo={},localStorage.removeItem(storage_id+"saved-movie-info"))};function getHostVersion(){var e="";return"samsung"===platform?e="undefined"!=typeof host_samsung_version&&host_samsung_version?host_samsung_version:samsung_version:"lg"===platform?e="undefined"!=typeof host_lg_version&&host_lg_version?host_lg_version:lg_version:"vidaa"===platform?e="undefined"!=typeof host_vidaa_version&&host_vidaa_version?host_vidaa_version:vidaa_version:"zeasn"!==platform&&"titanos"!==platform||(e="undefined"!=typeof host_zeasn_version&&host_zeasn_version?host_zeasn_version:zeasn_version),e}var device_key_login_page={keys:{focused_part:"input"},input_dom:$($(".login-page-key-input")[0]),submit_button_dom:$($(".login-page-key-submit")[0]),init:function(){current_route="device_key_login_page",$("#loading-page").hide(),$("#login_page").css("display","flex"),this.hoverInput()},goBack:function(){},hoverInput:function(){this.keys.focused_part="input",$(this.submit_button_dom).removeClass("active"),$(this.input_dom).addClass("active")},clickInput:function(){$(this.input_dom).focus().addClass("active")},hoverSubmitButton:function(){this.keys.focused_part="submit",$(this.submit_button_dom).addClass("active"),$(this.input_dom).removeClass("active")},clickSubmitButton:function(){var s=$(this.input_dom).val(),e=getHostVersion(),o="3R%6R2FJ*b5)Vmt84$^eWf0r@r?szdw*fwf*ewd&VXmne$%",e=newEncryptRequest({mac_address:mac_address,app_type:platform,version:e,device_key:s},o),t=(t=CryptoJS.HmacSHA256(e,"sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB").toString(CryptoJS.enc.Base64).trim()).trim();$.ajax({method:"post",url:"https://iboapi.mimocodes.com/api/MBBPj5UwlCmTstXGb/tv/v3/playlist_information",data:{data:e,signature:t},timeout:15e3,success:function(e){var t,i;console.log("Api response data",e),e.status?(e.status,403==e.error_code&&showToast("Invalid device key","Please try again, or contact us with a screenshot if you forgot your device key.")):(e=newDecryptResponse(e.data,o),i="",(t=JSON.parse(localStorage.getItem(storage_id+"api_data")))&&t.device_key&&(i=t.device_key),e.device_key=s||i||"",localStorage.setItem(storage_id+"api_data",JSON.stringify(e)),window.location.reload())},error:function(e){showToast("Something went wrong","Please try again later or contact us.")}})},handleMenuClick:function(){switch(this.keys.focused_part){case"input":this.clickInput();break;case"submit":this.clickSubmitButton()}},handleMenusUpDown:function(e){switch(this.keys.focused_part){case"input":0<e&&this.hoverSubmitButton();break;case"submit":e<0&&this.hoverInput()}},handleMenuLeftRight:function(e){},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},login_page={is_loading:!1,activeRequests:[],keys:{focused_part:"main_area",main_area:0,network_issue_btn:0,expired_issue_btn:0,no_playlist_btn:0,loading_stuck_btn:0},login_succeed:!1,tried_panel_indexes:[],tried_agent_url_indices:[],network_issue_btns:$(".network-issue-btn"),expired_issue_btns:$(".expired-issue-btn"),no_playlist_btns:$(".no-playlist-btn"),playlist_not_working_timer:null,loading_stuck_check_timer:12e4,goBack:function(){turn_off_page.init("login-page")},showLoginError:function(){$(".loading-issue-item").addClass("hide"),$("#loading-issue-container").show()},showLoadImage:function(){$("#login-container").addClass("hide"),$("#loading-page").removeClass("hide")},fetchPlaylistInformation:function(i){var s,e,o,t,a,n,r;api_succeed=!0,this.is_loading||(r=i.domains,main_domain=i.main_domain,panel_urls=[],r&&r.map(function(e){panel_urls.push("https://"+e+"/api")}),(s=this).is_loading=!0,$("#mac-address").text(mac_address),$(".mac-address").text(mac_address),e=(r=pickPanelUrl(this.tried_panel_indexes))[1],o=r[0],r=getHostVersion(),n=JSON.parse(localStorage.getItem(storage_id+"api_data")),t="",n&&n.device_key&&(t=n.device_key),n={mac_address:mac_address,app_type:platform,version:r,device_key:t,u_id:this.getUniqueId()},console.log("Playlist Information Request Data",n),a=this.getValues(0),r=this.getValues(1),n=newEncryptRequest(n,a),console.log("encrypted_data",n),r=(r=CryptoJS.HmacSHA256(n,r).toString(CryptoJS.enc.Base64).trim()).trim(),$.ajax({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+e+"/MBBPj5UwlCmTstXGb/tv/v3/playlist_information",data:{data:n,signature:r},timeout:15e3,success:function(e){s.tried_panel_indexes=[],console.log("Api response data",e),e.status&&(e.status,403==e.error_code)?device_key_login_page.init():(e=newDecryptResponse(e.data,a),console.log("here playlist information api decrypted response",e),ip_address=e.ip_address,$(".app-expire-date").text(e.expire_date),e.device_key=e.device_key||t||"",localStorage.setItem(storage_id+"api_data",JSON.stringify(e)),e.themes&&(themes=e.themes),s.syncWithServer(e),handleWeatherFetchAndStore())},error:function(e){var t;s.is_loading=!1,s.tried_panel_indexes.push(o),s.tried_panel_indexes.length<panel_urls.length?s.fetchPlaylistInformation(i):(t=localStorage.getItem(storage_id+"api_data"),saveData("api_succeed",!1),t?(t=JSON.parse(t),s.syncWithServer(t)):(console.log("Api request failed",e),showToast("Sorry","Api not working")))}}))},fetchDomains:function(){var i,e,s,o,t;this.is_loading||((i=this).is_loading=!0,e=(t=pickAgentUrl(this.tried_agent_url_indices))[1],s=t[0],t=getHostVersion(),o=JSON.stringify({domains:["app.ibo-dev.com","iboapp.mimocodes.com","iboapi.mimocodes.com"],main_domain:"api.ibo-dev.com"}),t=encryptRequest({mac_address:mac_address,app_type:platform,version:t}),$.ajax({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+e+"/playlist_info",data:{data:t},timeout:15e3,success:function(e){i.tried_agent_url_indices=[];e=decryptResponse(e);localStorage.setItem(storage_id+"domain_lists",JSON.stringify(e)),console.log("here agent server api decrypted response",e),i.is_loading=!1,i.fetchPlaylistInformation(e)},error:function(e){var t;i.is_loading=!1,i.tried_agent_url_indices.push(s),i.tried_agent_url_indices.length<agent_urls.length?i.fetchDomains():(t=localStorage.getItem(storage_id+"domain_lists"))?(t=JSON.parse(o),i.fetchPlaylistInformation(t)):(t=JSON.parse(o),i.fetchPlaylistInformation(t),console.log("Api request failed, falling back to static domain list",t))}}))},fetchPlaylistList:function(){var r;return this.is_loading?Promise.reject("Already loading"):((r=this).is_loading=!0,new Promise(function(a,n){!function t(i){null==typeof i&&(i=0);var e=pickPanelUrl(r.tried_panel_indexes),s=e[1],o=e[0],e=getHostVersion(),e=encryptRequest({mac_address:mac_address,app_type:platform,version:e});$.ajax({method:"post",url:s+"/playlist_list",data:{data:e},timeout:15e3,success:function(e){r.tried_panel_indexes=[],r.is_loading=!1,e=decryptResponse(e),console.log("Playlist list api decrypted response",e),playlist_urls=e.urls,a(e.urls||[])},error:function(e){r.tried_panel_indexes.push(o),r.tried_panel_indexes.length<panel_urls.length?t(i+1):(r.is_loading=!1,console.log("Playlist list api request failed",e),n("Failed to fetch playlist list after "+(i+1)+" attempts"))}})}()}))},loadApp:function(e){var t=moment().format("Y-MM-DD");saveData("playlist_urls",e.urls),saveData("notification",e.notification),$(".device-key").text(e.device_key),$(".loading-page-device-info-container").slideDown(),saveData("languages",e.languages),saveData("device_key",e.device_key),saveData("expire_date",e.expire_date),!api_succeed&&e.expire_date<t&&saveData("expire_date","2438-01-02"),saveData("is_trial",e.is_trial),this.is_loading=!1,$(".expire-date").text(expire_date),e.expire_date<t?(saveData("mac_valid",!1),this.showLoginError(),$("#expired-issue-container").removeClass("hide"),this.hoverExpiredIssueBtn(0)):e.has_own_playlist?this.login():(this.showLoginError(),$("#no-playlist-issue-container").removeClass("hide"),this.keys.focused_part="no_playlist_btn",this.hoverNoPlaylistBtn(0))},syncWithServer:function(r){var e,t,i,s,l,c,d=localStorage.getItem(storage_id+"local_data");d&&((d=JSON.parse(d)).playlist_urls&&0<d.playlist_urls.length||d.remove_ids&&0<d.remove_ids.length)?(e=(e=d.playlist_urls)||[],c=(c=d.remove_ids)||[],api_succeed?(t=(s=pickPanelUrl(this.tried_panel_indexes))[1],i=s[0],s=encryptRequest({mac_address:mac_address,app_type:platform,playlists:e,remove_ids:c}),l=this,$.ajax({method:"post",url:t+"/update_playlist",data:{data:s},success:function(e){l.tried_panel_indexes=[];for(var t=decryptResponse(e),i=[],s=[],o=0;o<t.length;o++)t[o].id!=t[o].origin_id&&(i.push(t[o].id),s.push(t[o].origin_id),settings.playlist_id===t[o].origin_id)&&settings.saveSettings("playlist_id",t[o].id,"");0<i.length&&changeLocalStorageKeysForPlaylist(s,i);for(var a=r.urls,o=a.length-1;0<=o;o--)for(var n=0;n<t.length;n++)if(a[o].id==t[n].id){a.splice(o,1);break}for(o=(a=a.concat(t)).length-1;0<=o;o--)c.includes(a[o].id)&&a.splice(o,1);r.urls=a,localStorage.setItem(storage_id+"api_data",JSON.stringify(r)),d.playlist_urls=[],d.remove_ids=[],localStorage.setItem(storage_id+"local_data",JSON.stringify(d)),l.loadApp(r)},error:function(){l.is_loading=!1,l.tried_panel_indexes.push(i),l.tried_panel_indexes.length<panel_urls.length?l.syncWithServer(r):l.syncFailedWithServer(r,d)}})):this.syncFailedWithServer(r,d)):this.loadApp(r)},syncFailedWithServer:function(e,t){for(var i=(i=t.playlist_urls)||[],s=(s=t.remove_ids)||[],o=e.urls,a=o.length-1;0<=a;a--)for(var n=0;n<i.length;n++)if(o[a].id==i[n].id){o.splice(a,1);break}for(a=(o=o.concat(i)).length-1;0<=a;a--)s.includes(o[a].id)&&o.splice(a,1);t.remove_ids=s=[],localStorage.setItem("local_data",JSON.stringify(t)),e.urls=o,this.loadApp(e)},getPlayListDetail:function(){current_route="login-page";var s=this;if(mac_address="52:54:00:12:34:57","samsung"===platform)try{tizen.systeminfo.getPropertyValue("ETHERNET_NETWORK",function(e){void 0!==e&&void 0!==e.macAddress&&(mac_address=e.macAddress),s.fetchDomains()})}catch(e){this.fetchDomains()}else if("lg"===platform)webOS.service.request("luna://com.webos.service.sm",{method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onSuccess:function(e){mac_address="";for(var t=e.idList[0].idValue.replace(/['-]+/g,""),i=0;i<=5;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":");s.fetchDomains()},onFailure:function(e){s.fetchDomains()}});else if("vidaa"===platform)try{if("function"==typeof Hisense_GetDeviceID){var e=Hisense_GetDeviceID();if(/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(e))mac_address=e;else{mac_address="";var t=e.slice(-12);try{for(var i=0;i<6;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":")}catch(e){}}console.log("VIDAA MAC Address: "+mac_address)}s.fetchDomains()}catch(e){s.fetchDomains()}else"windows"===platform&&console.log("Windows test mac address",mac_address),s.fetchDomains()},login:function(){home_page.dataLoaded={live:!1,vod:!1,series:!1};for(var e=this,t=(checkDevicePerformance(),this.showLoadImage(),settings.playlist_id),i=0,s=0;s<playlist_urls.length;s++)if(playlist_urls[s].id==t){i=s;break}settings.saveSettings("playlist",playlist_urls[i],"array"),settings.saveSettings("playlist_id",playlist_urls[i].id,""),this.hideLoadingForTooLong(),this.playlist_not_working_timer&&clearTimeout(this.playlist_not_working_timer),this.playlist_not_working_timer=setTimeout(function(){e.showLoadingForTooLong()},this.loading_stuck_check_timer),this.proceed_login()},goToPlaylistPageWithError:function(e,t){t&&this.abortAllRequests(),this.is_loading=!1,LiveModel.insertMoviesToCategories([]),VodModel.insertMoviesToCategories([]),SeriesModel.insertMoviesToCategories([]),$("#loading-page").addClass("hide"),$("#playlist-items-container").addClass("has-error"),e&&"string"==typeof e?$("#playlist-error").text(e):$("#playlist-error").text("We regret to inform you that there is a problem with the current        playlist. This issue is associated with your IPTV service        provider, not our application. For inquiries about the playlists        status and expiration, please reach out to your provider."),$("#playlist-error").show(),home_page.init(),home_page.hoverMainMenu(4),home_page.handleMenuClick(),$("#home-expire-date").text("Unknown"),$(".playlist-will-expire-in").text("Unknown")},abortAllRequests:function(){if(console.log("Aborting all requests..."),this.activeRequests&&0<this.activeRequests.length){console.log("Found "+this.activeRequests.length+" local active requests to abort");for(var t=0;t<this.activeRequests.length;t++)if(this.activeRequests[t]&&this.activeRequests[t].abort)try{this.activeRequests[t].abort(),console.log("Aborted local request "+(t+1))}catch(e){onsole.log("Error aborting local request "+(t+1)+":",e)}this.activeRequests=[]}if(window.ongoingRequests){console.log("Found "+window.ongoingRequests.length+" ongoing requests to abort");for(t=0;t<window.ongoingRequests.length;t++)if(window.ongoingRequests[t]&&window.ongoingRequests[t].abort)try{window.ongoingRequests[t].abort(),console.log("Aborted request "+(t+1))}catch(e){console.log("Error aborting request "+(t+1)+":",e)}window.ongoingRequests=[]}jQuery&&0<jQuery.active&&(console.log("Found "+jQuery.active+" active jQuery requests"),$(document).ajaxStop()),this.playlist_not_working_timer&&(clearTimeout(this.playlist_not_working_timer),this.playlist_not_working_timer=null),this.is_loading=!1,console.log("Request abortion completed")},convertToGeneralM3u:function(){console.log("Converting to general M3U"),this.is_loading=!1,settings.playlist.playlist_type="general",settings.playlist.url=settings.playlist.origin_url,this.proceed_login()},proceed_login:function(){var e,t,r,l=this;this.is_loading||($("#playlist-error").hide(),LiveModel.init(),VodModel.init(),SeriesModel.init(),(l=this).showLoadImage(),t=(e=settings.playlist).playlist_type,api_host_url=settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url,storageMoviesInfo.host_url!=api_host_url&&clearCachedMoviesInfo(),t=t||"general",this.is_loading=!0,"xc"===t?(console.log("XC Playlist"),user_name=e.username,password=e.password,api({method:"get",url:(r=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=").replace("&action=",""),headers:{Accept:"application/json"},success:function(e){if("object"!=typeof e||null===e)l.is_loading=!1,l.goToPlaylistPageWithError("Invalid response from server");else{if(void 0!==e.server_info&&calculateTimeDifference(e.server_info.time_now,e.server_info.timestamp_now),void 0!==e.user_info)if(0==e.user_info.auth||void 0!==e.user_info.status&&("Expired"===e.user_info.status||"Banned"===e.user_info.status||"Disabled"===e.user_info.status))l.is_loading=!1,l.goToPlaylistPageWithError(),e.user_info.exp_date&&(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD"))));else{null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD")));var t=parseInt(localStorage.getItem(storage_id+"load_on_demand"));if(t||0==t||(t=1,localStorage.setItem(storage_id+"load_on_demand",1)),t)return l.is_loading=!1,home_page.init(!0),void l.hideLoadingForTooLong();var t=api({method:"get",url:r+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),i=api({method:"get",url:r+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),s=api({method:"get",url:r+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),o=api({method:"get",url:r+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),a=api({method:"get",url:r+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),n=api({method:"get",url:r+"get_series",success:function(e){SeriesModel.setMovies(e)}});l.activeRequests=[t,i,s,o,a,n],$.when(t,i,s,o,a,n).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),l.is_loading=!1,home_page.init()}catch(e){l.convertToGeneralM3u()}}).fail(function(){l.convertToGeneralM3u()})}console.log("User Info",e.user_info),playlist_status=e.user_info&&e.user_info.status||"Unknown"}},error:function(e){l.convertToGeneralM3u()},timeout:15e3})):"general"===t&&(console.log("General Playlist"),api_host_url=settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url,$.ajax({method:"get",url:api_host_url,headers:{Accept:"application/json"},success:function(e){"object"==typeof e&&null!==e||e.startsWith("#EXTM3U")?(parseM3uResponse("general",e),$("#loading-page").addClass("hide"),home_page.init(),l.is_loading=!1):(l.is_loading=!1,l.goToPlaylistPageWithError("Invalid response from server"))},error:function(e){l.goToPlaylistPageWithError()}})))},reloadApp:function(){window.location.reload()},continueDemoPlaylist:function(){var e=this;$("#loading-issue-container").hide(),$(".loading-issue-item").addClass("hide"),setTimeout(function(){e.login()},200)},hoverNoPlaylistBtn:function(e){var t=this.keys;t.focused_part="no_playlist_btn",t.no_playlist_btn=e,$(this.no_playlist_btns).removeClass("active"),$(this.no_playlist_btns[e]).addClass("active")},showLoadingForTooLong:function(){$("#app-loading-too-long").css("display","flex"),this.keys.focused_part="loading_stuck"},hideLoadingForTooLong:function(){clearTimeout(this.playlist_not_working_timer),$("#app-loading-too-long").hide()},clickLoadingForTooLongOption:function(e){switch(e){case 0:this.goToPlaylistPageWithError("Playlist loading aborted by the user.",!0);break;case 1:window.location.reload();break;case 2:this.hideLoadingForTooLong()}},hoverLoadingForTooLongOption:function(e){this.keys.loading_stuck_btn=e,$(".app-loading-too-long-cta-button").removeClass("active"),$($(".app-loading-too-long-cta-button")[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"network_issue_btn":$(this.network_issue_btns[e.network_issue_btn]).trigger("click");break;case"no_playlist_btn":$(this.no_playlist_btns[e.no_playlist_btn]).trigger("click");break;case"expired_issue_btn":$(this.expired_issue_btns[e.expired_issue_btn]).trigger("click");break;case"loading_stuck":this.clickLoadingForTooLongOption(e.loading_stuck_btn)}},handleMenuUpDown:function(e){var t=this.keys;"main_area"===t.focused_part&&(t.main_area+=e,(e=[$("#login-button")]).map(function(e){$(e).removeClass("active")}),t.main_area<0&&(t.main_area=e.length-1),t.main_area>=e.length&&(t.main_area=0),$(e[t.main_area]).addClass("active"))},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"network_issue_btn":t.network_issue_btn+=e,t.network_issue_btn<0&&(t.network_issue_btn=0),t.network_issue_btn>=this.network_issue_btns.length&&(t.network_issue_btn=this.network_issue_btns.length-1),this.hoverNetworkIssueBtn(t.network_issue_btn);break;case"expired_issue_btn":t.expired_issue_btn+=e,t.expired_issue_btn<0&&(t.expired_issue_btn=0),2<t.expired_issue_btn&&(t.expired_issue_btn=2),this.hoverExpiredIssueBtn(t.expired_issue_btn);break;case"no_playlist_btn":t.no_playlist_btn+=e,t.no_playlist_btn<0&&(t.no_playlist_btn=0),1<t.no_playlist_btn&&(t.no_playlist_btn=1),this.hoverNoPlaylistBtn(t.no_playlist_btn);break;case"loading_stuck":t.loading_stuck_btn+=e,t.loading_stuck_btn<0&&(t.loading_stuck_btn=0),2<t.loading_stuck_btn&&(t.loading_stuck_btn=2),this.hoverLoadingForTooLongOption(t.loading_stuck_btn)}},getValues:function(e){return["3R%6R2FJ*b5)Vmt84$^eWf0r@r?szdw*fwf*ewd&VXmne$%","$2b$10$KX0D?09++^*90988e+uhz5%avsf4EO80aTgba=zubwW4CpmoERkcLgW6"][e]},getUniqueId:function(){return CryptoJS.HmacSHA1(mac_address.toLowerCase()+this.getValues(0),this.getValues(1)).toString(CryptoJS.enc.Base64).trim()},HandleKey:function(e){switch(console.log("Handling key",e.keyCode),e.keyCode){case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},temps=[{name:"Afar",iso6392B:"aar",iso6391:"aa"},{name:"Abkhazian",iso6392B:"abk",iso6391:"ab"},{name:"Achinese",iso6392B:"ace"},{name:"Acoli",iso6392B:"ach"},{name:"Adangme",iso6392B:"ada"},{name:"Adyghe; Adygei",iso6392B:"ady"},{name:"Afro-Asiatic languages",iso6392B:"afa"},{name:"Afrihili",iso6392B:"afh"},{name:"Afrikaans",iso6392B:"afr",iso6391:"af"},{name:"Ainu",iso6392B:"ain"},{name:"Akan",iso6392B:"aka",iso6391:"ak"},{name:"Akkadian",iso6392B:"akk"},{name:"Albanian",iso6392B:"alb",iso6392T:"sqi",iso6391:"sq"},{name:"Aleut",iso6392B:"ale"},{name:"Algonquian languages",iso6392B:"alg"},{name:"Southern Altai",iso6392B:"alt"},{name:"Amharic",iso6392B:"amh",iso6391:"am"},{name:"English, Old (ca.450-1100)",iso6392B:"ang"},{name:"Angika",iso6392B:"anp"},{name:"Apache languages",iso6392B:"apa"},{name:"Arabic",iso6392B:"ara",iso6391:"ar"},{name:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",iso6392B:"arc"},{name:"Aragonese",iso6392B:"arg",iso6391:"an"},{name:"Armenian",iso6392B:"arm",iso6392T:"hye",iso6391:"hy"},{name:"Mapudungun; Mapuche",iso6392B:"arn"},{name:"Arapaho",iso6392B:"arp"},{name:"Artificial languages",iso6392B:"art"},{name:"Arawak",iso6392B:"arw"},{name:"Assamese",iso6392B:"asm",iso6391:"as"},{name:"Asturian; Bable; Leonese; Asturleonese",iso6392B:"ast"},{name:"Athapascan languages",iso6392B:"ath"},{name:"Australian languages",iso6392B:"aus"},{name:"Avaric",iso6392B:"ava",iso6391:"av"},{name:"Avestan",iso6392B:"ave",iso6391:"ae"},{name:"Awadhi",iso6392B:"awa"},{name:"Aymara",iso6392B:"aym",iso6391:"ay"},{name:"Azerbaijani",iso6392B:"aze",iso6391:"az"},{name:"Banda languages",iso6392B:"bad"},{name:"Bamileke languages",iso6392B:"bai"},{name:"Bashkir",iso6392B:"bak",iso6391:"ba"},{name:"Baluchi",iso6392B:"bal"},{name:"Bambara",iso6392B:"bam",iso6391:"bm"},{name:"Balinese",iso6392B:"ban"},{name:"Basque",iso6392B:"baq",iso6392T:"eus",iso6391:"eu"},{name:"Basa",iso6392B:"bas"},{name:"Baltic languages",iso6392B:"bat"},{name:"Beja; Bedawiyet",iso6392B:"bej"},{name:"Belarusian",iso6392B:"bel",iso6391:"be"},{name:"Bemba",iso6392B:"bem"},{name:"Bengali",iso6392B:"ben",iso6391:"bn"},{name:"Berber languages",iso6392B:"ber"},{name:"Bhojpuri",iso6392B:"bho"},{name:"Bihari languages",iso6392B:"bih",iso6391:"bh"},{name:"Bikol",iso6392B:"bik"},{name:"Bini; Edo",iso6392B:"bin"},{name:"Bislama",iso6392B:"bis",iso6391:"bi"},{name:"Siksika",iso6392B:"bla"},{name:"Bantu languages",iso6392B:"bnt"},{name:"Bosnian",iso6392B:"bos",iso6391:"bs"},{name:"Braj",iso6392B:"bra"},{name:"Breton",iso6392B:"bre",iso6391:"br"},{name:"Batak languages",iso6392B:"btk"},{name:"Buriat",iso6392B:"bua"},{name:"Buginese",iso6392B:"bug"},{name:"Bulgarian",iso6392B:"bul",iso6391:"bg"},{name:"Burmese",iso6392B:"bur",iso6392T:"mya",iso6391:"my"},{name:"Blin; Bilin",iso6392B:"byn"},{name:"Caddo",iso6392B:"cad"},{name:"Central American Indian languages",iso6392B:"cai"},{name:"Galibi Carib",iso6392B:"car"},{name:"Catalan; Valencian",iso6392B:"cat",iso6391:"ca"},{name:"Caucasian languages",iso6392B:"cau"},{name:"Cebuano",iso6392B:"ceb"},{name:"Celtic languages",iso6392B:"cel"},{name:"Chamorro",iso6392B:"cha",iso6391:"ch"},{name:"Chibcha",iso6392B:"chb"},{name:"Chechen",iso6392B:"che",iso6391:"ce"},{name:"Chagatai",iso6392B:"chg"},{name:"Chinese",iso6392B:"chi",iso6392T:"zho",iso6391:"zh"},{name:"Chuukese",iso6392B:"chk"},{name:"Mari",iso6392B:"chm"},{name:"Chinook jargon",iso6392B:"chn"},{name:"Choctaw",iso6392B:"cho"},{name:"Chipewyan; Dene Suline",iso6392B:"chp"},{name:"Cherokee",iso6392B:"chr"},{name:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",iso6392B:"chu",iso6391:"cu"},{name:"Chuvash",iso6392B:"chv",iso6391:"cv"},{name:"Cheyenne",iso6392B:"chy"},{name:"Chamic languages",iso6392B:"cmc"},{name:"Montenegrin",iso6392B:"cnr"},{name:"Coptic",iso6392B:"cop"},{name:"Cornish",iso6392B:"cor",iso6391:"kw"},{name:"Corsican",iso6392B:"cos",iso6391:"co"},{name:"Creoles and pidgins, English based",iso6392B:"cpe"},{name:"Creoles and pidgins, French-based",iso6392B:"cpf"},{name:"Creoles and pidgins, Portuguese-based",iso6392B:"cpp"},{name:"Cree",iso6392B:"cre",iso6391:"cr"},{name:"Crimean Tatar; Crimean Turkish",iso6392B:"crh"},{name:"Creoles and pidgins",iso6392B:"crp"},{name:"Kashubian",iso6392B:"csb"},{name:"Cushitic languages",iso6392B:"cus"},{name:"Czech",iso6392B:"cze",iso6392T:"ces",iso6391:"cs"},{name:"Dakota",iso6392B:"dak"},{name:"Danish",iso6392B:"dan",iso6391:"da"},{name:"Dargwa",iso6392B:"dar"},{name:"Land Dayak languages",iso6392B:"day"},{name:"Delaware",iso6392B:"del"},{name:"Slave (Athapascan)",iso6392B:"den"},{name:"Dogrib",iso6392B:"dgr"},{name:"Dinka",iso6392B:"din"},{name:"Divehi; Dhivehi; Maldivian",iso6392B:"div",iso6391:"dv"},{name:"Dogri",iso6392B:"doi"},{name:"Dravidian languages",iso6392B:"dra"},{name:"Lower Sorbian",iso6392B:"dsb"},{name:"Duala",iso6392B:"dua"},{name:"Dutch, Middle (ca.1050-1350)",iso6392B:"dum"},{name:"Dutch; Flemish",iso6392B:"dut",iso6392T:"nld",iso6391:"nl"},{name:"Dyula",iso6392B:"dyu"},{name:"Dzongkha",iso6392B:"dzo",iso6391:"dz"},{name:"Efik",iso6392B:"efi"},{name:"Egyptian (Ancient)",iso6392B:"egy"},{name:"Ekajuk",iso6392B:"eka"},{name:"Elamite",iso6392B:"elx"},{name:"English",iso6392B:"eng",iso6391:"en"},{name:"English, Middle (1100-1500)",iso6392B:"enm"},{name:"Esperanto",iso6392B:"epo",iso6391:"eo"},{name:"Estonian",iso6392B:"est",iso6391:"et"},{name:"Ewe",iso6392B:"ewe",iso6391:"ee"},{name:"Ewondo",iso6392B:"ewo"},{name:"Fang",iso6392B:"fan"},{name:"Faroese",iso6392B:"fao",iso6391:"fo"},{name:"Fanti",iso6392B:"fat"},{name:"Fijian",iso6392B:"fij",iso6391:"fj"},{name:"Filipino; Pilipino",iso6392B:"fil"},{name:"Finnish",iso6392B:"fin",iso6391:"fi"},{name:"Finno-Ugrian languages",iso6392B:"fiu"},{name:"Fon",iso6392B:"fon"},{name:"French",iso6392B:"fre",iso6392T:"fra",iso6391:"fr"},{name:"French, Middle (ca.1400-1600)",iso6392B:"frm"},{name:"French, Old (842-ca.1400)",iso6392B:"fro"},{name:"Northern Frisian",iso6392B:"frr"},{name:"Eastern Frisian",iso6392B:"frs"},{name:"Western Frisian",iso6392B:"fry",iso6391:"fy"},{name:"Fulah",iso6392B:"ful",iso6391:"ff"},{name:"Friulian",iso6392B:"fur"},{name:"Ga",iso6392B:"gaa"},{name:"Gayo",iso6392B:"gay"},{name:"Gbaya",iso6392B:"gba"},{name:"Germanic languages",iso6392B:"gem"},{name:"Georgian",iso6392B:"geo",iso6392T:"kat",iso6391:"ka"},{name:"German",iso6392B:"ger",iso6392T:"deu",iso6391:"de"},{name:"Geez",iso6392B:"gez"},{name:"Gilbertese",iso6392B:"gil"},{name:"Gaelic; Scottish Gaelic",iso6392B:"gla",iso6391:"gd"},{name:"Irish",iso6392B:"gle",iso6391:"ga"},{name:"Galician",iso6392B:"glg",iso6391:"gl"},{name:"Manx",iso6392B:"glv",iso6391:"gv"},{name:"German, Middle High (ca.1050-1500)",iso6392B:"gmh"},{name:"German, Old High (ca.750-1050)",iso6392B:"goh"},{name:"Gondi",iso6392B:"gon"},{name:"Gorontalo",iso6392B:"gor"},{name:"Gothic",iso6392B:"got"},{name:"Grebo",iso6392B:"grb"},{name:"Greek, Ancient (to 1453)",iso6392B:"grc"},{name:"Greek, Modern (1453-)",iso6392B:"gre",iso6392T:"ell",iso6391:"el"},{name:"Guarani",iso6392B:"grn",iso6391:"gn"},{name:"Swiss German; Alemannic; Alsatian",iso6392B:"gsw"},{name:"Gujarati",iso6392B:"guj",iso6391:"gu"},{name:"Gwich'in",iso6392B:"gwi"},{name:"Haida",iso6392B:"hai"},{name:"Haitian; Haitian Creole",iso6392B:"hat",iso6391:"ht"},{name:"Hausa",iso6392B:"hau",iso6391:"ha"},{name:"Hawaiian",iso6392B:"haw"},{name:"Hebrew",iso6392B:"heb",iso6391:"he"},{name:"Herero",iso6392B:"her",iso6391:"hz"},{name:"Hiligaynon",iso6392B:"hil"},{name:"Himachali languages; Western Pahari languages",iso6392B:"him"},{name:"Hindi",iso6392B:"hin",iso6391:"hi"},{name:"Hittite",iso6392B:"hit"},{name:"Hmong; Mong",iso6392B:"hmn"},{name:"Hiri Motu",iso6392B:"hmo",iso6391:"ho"},{name:"Croatian",iso6392B:"hrv",iso6391:"hr"},{name:"Upper Sorbian",iso6392B:"hsb"},{name:"Hungarian",iso6392B:"hun",iso6391:"hu"},{name:"Hupa",iso6392B:"hup"},{name:"Iban",iso6392B:"iba"},{name:"Igbo",iso6392B:"ibo",iso6391:"ig"},{name:"Icelandic",iso6392B:"ice",iso6392T:"isl",iso6391:"is"},{name:"Ido",iso6392B:"ido",iso6391:"io"},{name:"Sichuan Yi; Nuosu",iso6392B:"iii",iso6391:"ii"},{name:"Ijo languages",iso6392B:"ijo"},{name:"Inuktitut",iso6392B:"iku",iso6391:"iu"},{name:"Interlingue; Occidental",iso6392B:"ile",iso6391:"ie"},{name:"Iloko",iso6392B:"ilo"},{name:"Interlingua (International Auxiliary Language Association)",iso6392B:"ina",iso6391:"ia"},{name:"Indic languages",iso6392B:"inc"},{name:"Indonesian",iso6392B:"ind",iso6391:"id"},{name:"Indo-European languages",iso6392B:"ine"},{name:"Ingush",iso6392B:"inh"},{name:"Inupiaq",iso6392B:"ipk",iso6391:"ik"},{name:"Iranian languages",iso6392B:"ira"},{name:"Iroquoian languages",iso6392B:"iro"},{name:"Italian",iso6392B:"ita",iso6391:"it"},{name:"Javanese",iso6392B:"jav",iso6391:"jv"},{name:"Lojban",iso6392B:"jbo"},{name:"Japanese",iso6392B:"jpn",iso6391:"ja"},{name:"Judeo-Persian",iso6392B:"jpr"},{name:"Judeo-Arabic",iso6392B:"jrb"},{name:"Kara-Kalpak",iso6392B:"kaa"},{name:"Kabyle",iso6392B:"kab"},{name:"Kachin; Jingpho",iso6392B:"kac"},{name:"Kalaallisut; Greenlandic",iso6392B:"kal",iso6391:"kl"},{name:"Kamba",iso6392B:"kam"},{name:"Kannada",iso6392B:"kan",iso6391:"kn"},{name:"Karen languages",iso6392B:"kar"},{name:"Kashmiri",iso6392B:"kas",iso6391:"ks"},{name:"Kanuri",iso6392B:"kau",iso6391:"kr"},{name:"Kawi",iso6392B:"kaw"},{name:"Kazakh",iso6392B:"kaz",iso6391:"kk"},{name:"Kabardian",iso6392B:"kbd"},{name:"Khasi",iso6392B:"kha"},{name:"Khoisan languages",iso6392B:"khi"},{name:"Central Khmer",iso6392B:"khm",iso6391:"km"},{name:"Khotanese; Sakan",iso6392B:"kho"},{name:"Kikuyu; Gikuyu",iso6392B:"kik",iso6391:"ki"},{name:"Kinyarwanda",iso6392B:"kin",iso6391:"rw"},{name:"Kirghiz; Kyrgyz",iso6392B:"kir",iso6391:"ky"},{name:"Kimbundu",iso6392B:"kmb"},{name:"Konkani",iso6392B:"kok"},{name:"Komi",iso6392B:"kom",iso6391:"kv"},{name:"Kongo",iso6392B:"kon",iso6391:"kg"},{name:"Korean",iso6392B:"kor",iso6391:"ko"},{name:"Kosraean",iso6392B:"kos"},{name:"Kpelle",iso6392B:"kpe"},{name:"Karachay-Balkar",iso6392B:"krc"},{name:"Karelian",iso6392B:"krl"},{name:"Kru languages",iso6392B:"kro"},{name:"Kurukh",iso6392B:"kru"},{name:"Kuanyama; Kwanyama",iso6392B:"kua",iso6391:"kj"},{name:"Kumyk",iso6392B:"kum"},{name:"Kurdish",iso6392B:"kur",iso6391:"ku"},{name:"Kutenai",iso6392B:"kut"},{name:"Ladino",iso6392B:"lad"},{name:"Lahnda",iso6392B:"lah"},{name:"Lamba",iso6392B:"lam"},{name:"Lao",iso6392B:"lao",iso6391:"lo"},{name:"Latin",iso6392B:"lat",iso6391:"la"},{name:"Latvian",iso6392B:"lav",iso6391:"lv"},{name:"Lezghian",iso6392B:"lez"},{name:"Limburgan; Limburger; Limburgish",iso6392B:"lim",iso6391:"li"},{name:"Lingala",iso6392B:"lin",iso6391:"ln"},{name:"Lithuanian",iso6392B:"lit",iso6391:"lt"},{name:"Mongo",iso6392B:"lol"},{name:"Lozi",iso6392B:"loz"},{name:"Luxembourgish; Letzeburgesch",iso6392B:"ltz",iso6391:"lb"},{name:"Luba-Lulua",iso6392B:"lua"},{name:"Luba-Katanga",iso6392B:"lub",iso6391:"lu"},{name:"Ganda",iso6392B:"lug",iso6391:"lg"},{name:"Luiseno",iso6392B:"lui"},{name:"Lunda",iso6392B:"lun"},{name:"Luo (Kenya and Tanzania)",iso6392B:"luo"},{name:"Lushai",iso6392B:"lus"},{name:"Macedonian",iso6392B:"mac",iso6392T:"mkd",iso6391:"mk"},{name:"Madurese",iso6392B:"mad"},{name:"Magahi",iso6392B:"mag"},{name:"Marshallese",iso6392B:"mah",iso6391:"mh"},{name:"Maithili",iso6392B:"mai"},{name:"Makasar",iso6392B:"mak"},{name:"Malayalam",iso6392B:"mal",iso6391:"ml"},{name:"Mandingo",iso6392B:"man"},{name:"Maori",iso6392B:"mao",iso6392T:"mri",iso6391:"mi"},{name:"Austronesian languages",iso6392B:"map"},{name:"Marathi",iso6392B:"mar",iso6391:"mr"},{name:"Masai",iso6392B:"mas"},{name:"Malay",iso6392B:"may",iso6392T:"msa",iso6391:"ms"},{name:"Moksha",iso6392B:"mdf"},{name:"Mandar",iso6392B:"mdr"},{name:"Mende",iso6392B:"men"},{name:"Irish, Middle (900-1200)",iso6392B:"mga"},{name:"Mi'kmaq; Micmac",iso6392B:"mic"},{name:"Minangkabau",iso6392B:"min"},{name:"Uncoded languages",iso6392B:"mis"},{name:"Mon-Khmer languages",iso6392B:"mkh"},{name:"Malagasy",iso6392B:"mlg",iso6391:"mg"},{name:"Maltese",iso6392B:"mlt",iso6391:"mt"},{name:"Manchu",iso6392B:"mnc"},{name:"Manipuri",iso6392B:"mni"},{name:"Manobo languages",iso6392B:"mno"},{name:"Mohawk",iso6392B:"moh"},{name:"Mongolian",iso6392B:"mon",iso6391:"mn"},{name:"Mossi",iso6392B:"mos"},{name:"Multiple languages",iso6392B:"mul"},{name:"Munda languages",iso6392B:"mun"},{name:"Creek",iso6392B:"mus"},{name:"Mirandese",iso6392B:"mwl"},{name:"Marwari",iso6392B:"mwr"},{name:"Mayan languages",iso6392B:"myn"},{name:"Erzya",iso6392B:"myv"},{name:"Nahuatl languages",iso6392B:"nah"},{name:"North American Indian languages",iso6392B:"nai"},{name:"Neapolitan",iso6392B:"nap"},{name:"Nauru",iso6392B:"nau",iso6391:"na"},{name:"Navajo; Navaho",iso6392B:"nav",iso6391:"nv"},{name:"Ndebele, South; South Ndebele",iso6392B:"nbl",iso6391:"nr"},{name:"Ndebele, North; North Ndebele",iso6392B:"nde",iso6391:"nd"},{name:"Ndonga",iso6392B:"ndo",iso6391:"ng"},{name:"Low German; Low Saxon; German, Low; Saxon, Low",iso6392B:"nds"},{name:"Nepali",iso6392B:"nep",iso6391:"ne"},{name:"Nepal Bhasa; Newari",iso6392B:"new"},{name:"Nias",iso6392B:"nia"},{name:"Niger-Kordofanian languages",iso6392B:"nic"},{name:"Niuean",iso6392B:"niu"},{name:"Norwegian Nynorsk; Nynorsk, Norwegian",iso6392B:"nno",iso6391:"nn"},{name:"Bokml, Norwegian; Norwegian Bokml",iso6392B:"nob",iso6391:"nb"},{name:"Nogai",iso6392B:"nog"},{name:"Norse, Old",iso6392B:"non"},{name:"Norwegian",iso6392B:"nor",iso6391:"no"},{name:"N'Ko",iso6392B:"nqo"},{name:"Pedi; Sepedi; Northern Sotho",iso6392B:"nso"},{name:"Nubian languages",iso6392B:"nub"},{name:"Classical Newari; Old Newari; Classical Nepal Bhasa",iso6392B:"nwc"},{name:"Chichewa; Chewa; Nyanja",iso6392B:"nya",iso6391:"ny"},{name:"Nyamwezi",iso6392B:"nym"},{name:"Nyankole",iso6392B:"nyn"},{name:"Nyoro",iso6392B:"nyo"},{name:"Nzima",iso6392B:"nzi"},{name:"Occitan (post 1500)",iso6392B:"oci",iso6391:"oc"},{name:"Ojibwa",iso6392B:"oji",iso6391:"oj"},{name:"Oriya",iso6392B:"ori",iso6391:"or"},{name:"Oromo",iso6392B:"orm",iso6391:"om"},{name:"Osage",iso6392B:"osa"},{name:"Ossetian; Ossetic",iso6392B:"oss",iso6391:"os"},{name:"Turkish, Ottoman (1500-1928)",iso6392B:"ota"},{name:"Otomian languages",iso6392B:"oto"},{name:"Papuan languages",iso6392B:"paa"},{name:"Pangasinan",iso6392B:"pag"},{name:"Pahlavi",iso6392B:"pal"},{name:"Pampanga; Kapampangan",iso6392B:"pam"},{name:"Panjabi; Punjabi",iso6392B:"pan",iso6391:"pa"},{name:"Papiamento",iso6392B:"pap"},{name:"Palauan",iso6392B:"pau"},{name:"Persian, Old (ca.600-400 B.C.)",iso6392B:"peo"},{name:"Persian",iso6392B:"per",iso6392T:"fas",iso6391:"fa"},{name:"Philippine languages",iso6392B:"phi"},{name:"Phoenician",iso6392B:"phn"},{name:"Pali",iso6392B:"pli",iso6391:"pi"},{name:"Polish",iso6392B:"pol",iso6391:"pl"},{name:"Pohnpeian",iso6392B:"pon"},{name:"Portuguese",iso6392B:"por",iso6391:"pt"},{name:"Prakrit languages",iso6392B:"pra"},{name:"Provenal, Old (to 1500); Occitan, Old (to 1500)",iso6392B:"pro"},{name:"Pushto; Pashto",iso6392B:"pus",iso6391:"ps"},{name:"Reserved for local use",iso6392B:"qaa-qtz"},{name:"Quechua",iso6392B:"que",iso6391:"qu"},{name:"Rajasthani",iso6392B:"raj"},{name:"Rapanui",iso6392B:"rap"},{name:"Rarotongan; Cook Islands Maori",iso6392B:"rar"},{name:"Romance languages",iso6392B:"roa"},{name:"Romansh",iso6392B:"roh",iso6391:"rm"},{name:"Romany",iso6392B:"rom"},{name:"Romanian; Moldavian; Moldovan",iso6392B:"rum",iso6392T:"ron",iso6391:"ro"},{name:"Rundi",iso6392B:"run",iso6391:"rn"},{name:"Aromanian; Arumanian; Macedo-Romanian",iso6392B:"rup"},{name:"Russian",iso6392B:"rus",iso6391:"ru"},{name:"Sandawe",iso6392B:"sad"},{name:"Sango",iso6392B:"sag",iso6391:"sg"},{name:"Yakut",iso6392B:"sah"},{name:"South American Indian languages",iso6392B:"sai"},{name:"Salishan languages",iso6392B:"sal"},{name:"Samaritan Aramaic",iso6392B:"sam"},{name:"Sanskrit",iso6392B:"san",iso6391:"sa"},{name:"Sasak",iso6392B:"sas"},{name:"Santali",iso6392B:"sat"},{name:"Sicilian",iso6392B:"scn"},{name:"Scots",iso6392B:"sco"},{name:"Selkup",iso6392B:"sel"},{name:"Semitic languages",iso6392B:"sem"},{name:"Irish, Old (to 900)",iso6392B:"sga"},{name:"Sign Languages",iso6392B:"sgn"},{name:"Shan",iso6392B:"shn"},{name:"Sidamo",iso6392B:"sid"},{name:"Sinhala; Sinhalese",iso6392B:"sin",iso6391:"si"},{name:"Siouan languages",iso6392B:"sio"},{name:"Sino-Tibetan languages",iso6392B:"sit"},{name:"Slavic languages",iso6392B:"sla"},{name:"Slovak",iso6392B:"slo",iso6392T:"slk",iso6391:"sk"},{name:"Slovenian",iso6392B:"slv",iso6391:"sl"},{name:"Southern Sami",iso6392B:"sma"},{name:"Northern Sami",iso6392B:"sme",iso6391:"se"},{name:"Sami languages",iso6392B:"smi"},{name:"Lule Sami",iso6392B:"smj"},{name:"Inari Sami",iso6392B:"smn"},{name:"Samoan",iso6392B:"smo",iso6391:"sm"},{name:"Skolt Sami",iso6392B:"sms"},{name:"Shona",iso6392B:"sna",iso6391:"sn"},{name:"Sindhi",iso6392B:"snd",iso6391:"sd"},{name:"Soninke",iso6392B:"snk"},{name:"Sogdian",iso6392B:"sog"},{name:"Somali",iso6392B:"som",iso6391:"so"},{name:"Songhai languages",iso6392B:"son"},{name:"Sotho, Southern",iso6392B:"sot",iso6391:"st"},{name:"Spanish; Castilian",iso6392B:"spa",iso6391:"es"},{name:"Sardinian",iso6392B:"srd",iso6391:"sc"},{name:"Sranan Tongo",iso6392B:"srn"},{name:"Serbian",iso6392B:"srp",iso6391:"sr"},{name:"Serer",iso6392B:"srr"},{name:"Nilo-Saharan languages",iso6392B:"ssa"},{name:"Swati",iso6392B:"ssw",iso6391:"ss"},{name:"Sukuma",iso6392B:"suk"},{name:"Sundanese",iso6392B:"sun",iso6391:"su"},{name:"Susu",iso6392B:"sus"},{name:"Sumerian",iso6392B:"sux"},{name:"Swahili",iso6392B:"swa",iso6391:"sw"},{name:"Swedish",iso6392B:"swe",iso6391:"sv"},{name:"Classical Syriac",iso6392B:"syc"},{name:"Syriac",iso6392B:"syr"},{name:"Tahitian",iso6392B:"tah",iso6391:"ty"},{name:"Tai languages",iso6392B:"tai"},{name:"Tamil",iso6392B:"tam",iso6391:"ta"},{name:"Tatar",iso6392B:"tat",iso6391:"tt"},{name:"Telugu",iso6392B:"tel",iso6391:"te"},{name:"Timne",iso6392B:"tem"},{name:"Tereno",iso6392B:"ter"},{name:"Tetum",iso6392B:"tet"},{name:"Tajik",iso6392B:"tgk",iso6391:"tg"},{name:"Tagalog",iso6392B:"tgl",iso6391:"tl"},{name:"Thai",iso6392B:"tha",iso6391:"th"},{name:"Tibetan",iso6392B:"tib",iso6392T:"bod",iso6391:"bo"},{name:"Tigre",iso6392B:"tig"},{name:"Tigrinya",iso6392B:"tir",iso6391:"ti"},{name:"Tiv",iso6392B:"tiv"},{name:"Tokelau",iso6392B:"tkl"},{name:"Klingon; tlhIngan-Hol",iso6392B:"tlh"},{name:"Tlingit",iso6392B:"tli"},{name:"Tamashek",iso6392B:"tmh"},{name:"Tonga (Nyasa)",iso6392B:"tog"},{name:"Tonga (Tonga Islands)",iso6392B:"ton",iso6391:"to"},{name:"Tok Pisin",iso6392B:"tpi"},{name:"Tsimshian",iso6392B:"tsi"},{name:"Tswana",iso6392B:"tsn",iso6391:"tn"},{name:"Tsonga",iso6392B:"tso",iso6391:"ts"},{name:"Turkmen",iso6392B:"tuk",iso6391:"tk"},{name:"Tumbuka",iso6392B:"tum"},{name:"Tupi languages",iso6392B:"tup"},{name:"Turkish",iso6392B:"tur",iso6391:"tr"},{name:"Altaic languages",iso6392B:"tut"},{name:"Tuvalu",iso6392B:"tvl"},{name:"Twi",iso6392B:"twi",iso6391:"tw"},{name:"Tuvinian",iso6392B:"tyv"},{name:"Udmurt",iso6392B:"udm"},{name:"Ugaritic",iso6392B:"uga"},{name:"Uighur; Uyghur",iso6392B:"uig",iso6391:"ug"},{name:"Ukrainian",iso6392B:"ukr",iso6391:"uk"},{name:"Umbundu",iso6392B:"umb"},{name:"Undetermined",iso6392B:"und"},{name:"Urdu",iso6392B:"urd",iso6391:"ur"},{name:"Uzbek",iso6392B:"uzb",iso6391:"uz"},{name:"Vai",iso6392B:"vai"},{name:"Venda",iso6392B:"ven",iso6391:"ve"},{name:"Vietnamese",iso6392B:"vie",iso6391:"vi"},{name:"Volapk",iso6392B:"vol",iso6391:"vo"},{name:"Votic",iso6392B:"vot"},{name:"Wakashan languages",iso6392B:"wak"},{name:"Wolaitta; Wolaytta",iso6392B:"wal"},{name:"Waray",iso6392B:"war"},{name:"Washo",iso6392B:"was"},{name:"Welsh",iso6392B:"wel",iso6392T:"cym",iso6391:"cy"},{name:"Sorbian languages",iso6392B:"wen"},{name:"Walloon",iso6392B:"wln",iso6391:"wa"},{name:"Wolof",iso6392B:"wol",iso6391:"wo"},{name:"Kalmyk; Oirat",iso6392B:"xal"},{name:"Xhosa",iso6392B:"xho",iso6391:"xh"},{name:"Yao",iso6392B:"yao"},{name:"Yapese",iso6392B:"yap"},{name:"Yiddish",iso6392B:"yid",iso6391:"yi"},{name:"Yoruba",iso6392B:"yor",iso6391:"yo"},{name:"Yupik languages",iso6392B:"ypk"},{name:"Zapotec",iso6392B:"zap"},{name:"Blissymbols; Blissymbolics; Bliss",iso6392B:"zbl"},{name:"Zenaga",iso6392B:"zen"},{name:"Standard Moroccan Tamazight",iso6392B:"zgh"},{name:"Zhuang; Chuang",iso6392B:"zha",iso6391:"za"},{name:"Zande languages",iso6392B:"znd"},{name:"Zulu",iso6392B:"zul",iso6391:"zu"},{name:"Zuni",iso6392B:"zun"},{name:"No linguistic content; Not applicable",iso6392B:"zxx"},{name:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",iso6392B:"zza"}],language_codes={},home_page=(temps.map(function(e){var t;void 0!==e.iso6391&&(t=e.iso6391,language_codes[t]=e.name),void 0!==e.iso6392B&&(t=e.iso6392B,language_codes[t]=e.name),void 0!==e.iso6392T&&(t=e.iso6392T,language_codes[t]=e.name)}),{initiated:!(language_codes.tu="Turkish"),activeRequests:[],isLoading:!1,keys:{focused_part:"menu_selection",menu_selection:0,bottom_menu_selection:0},prev_focus_dom:null,menu_doms:$("#home-page .menu-item-container"),bottom_menu_doms:$("#home-page .home-bottom-item"),isLiveFavoriteAllowed:!0,isSearchAllowed:!0,openedModal:null,dataLoaded:{live:!1,vod:!1,series:!1},init:function(){this.setLiveFavoritesChoice(),this.setSearchAvailability(),account_page.fillAccountDetails(),this.showCurrentWeather(),this.prev_focus_dom=null,turn_off_page.prev_route="home-page","turn-off-page"!==current_route&&(current_route="home-page"),$("#loading-page").addClass("hide"),$("#login-container").hide(),$("#app").show(),$("#home-page").removeClass("hide");var i="";languages?languages.map(function(e,t){i+='        <div           class="setting-select-option"          data-word_code="'+e.code+'"          data-language="'+e.code+'"          onmouseenter="settings_page.hoverChangeLanguageOption('+t+', true)"          onclick="settings_page.handleMenuClick()"        >          '+e.name+"        </div>"}):console.error("Languages not found"),$("#settings-languages-options").html(i),settings_page.change_language_items=$("#change-language-settings .setting-select-option"),settings_page.doms_translated=$("*").filter(function(){return void 0!==$(this).data("word_code")}),settings_page.changeDomsLanguage(),this.hoverMainMenu(0),this.checkForPlaylistExpirationDate(),this.fillCategoriesCount()},goBack:function(){if(this.isLoading)this.manuallyAborted=!0,this.abortAllRequests(),showLoader(this.isLoading=!1);else{var e=this.keys;switch(e.focused_part){case"menu_selection":turn_off_page.init(current_route);break;case"notifications_modal":this.hideNotificationsModal();break;default:this.hoverMainMenu(e.menu_selection)}}},abortAllRequests:function(){if(this.activeRequests&&0<this.activeRequests.length){for(var e=0;e<this.activeRequests.length;e++)if(this.activeRequests[e]&&this.activeRequests[e].abort)try{this.activeRequests[e].abort()}catch(e){console.log("Error aborting home_page request",e)}this.activeRequests=[]}},exit:function(){$("#home-page").addClass("hide")},reEnter:function(){this.hoverMainMenu(this.keys.menu_selection),$("#home-page").removeClass("hide"),current_route="home-page"},requestMovies:function(t,e){showLoader(!0),this.isLoading=!0,this.manuallyAborted=!1;var i,s,o=this,a=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=";switch(t){case"live":s="get_live_categories",i="get_live_streams";break;case"vod":s="get_vod_categories",i="get_vod_streams";break;case"series":s="get_series_categories",i="get_series"}var n=api({method:"get",url:a+s,success:function(e){!function(e){switch(t){case"live":LiveModel.setCategories(e);break;case"vod":VodModel.setCategories(e);break;case"series":SeriesModel.setCategories(e)}}(e)}}),a=api({method:"get",url:a+i,success:function(e){!function(e){switch(t){case"live":LiveModel.setMovies(e);break;case"vod":VodModel.setMovies(e);break;case"series":SeriesModel.setMovies(e)}}(e)}});o.activeRequests=[n,a],$.when(n,a).then(function(){try{switch(t){case"live":LiveModel.insertMoviesToCategories();break;case"vod":VodModel.insertMoviesToCategories();break;case"series":SeriesModel.insertMoviesToCategories()}}catch(e){console.log("Error loading data",e),showToast("Error","Data loading failed")}}).then(function(){console.log("Loaded successfully for",t),showLoader(!1),o.isLoading=!1,o.fillCategoriesCount(),o.initPage(t,e)}).fail(function(){showLoader(!1),o.isLoading=!1,o.manuallyAborted?(showToast("Cancelled","Data loading aborted"),console.log("Data loading aborted by user")):(showToast("Failed","Data loading failed"),console.log("Failed to load data"))})},initPage:function(e,t){switch(e){case"live":this.dataLoaded.live=!0,checkActivePlaylist()&&channel_page.init("home-page",null,t);break;case"vod":this.dataLoaded.vod=!0,checkActivePlaylist()&&vod_series_page.init("vod");break;case"series":this.dataLoaded.series=!0,checkActivePlaylist()&&vod_series_page.init("series")}},fillCategoriesCount:function(){parseInt(localStorage.getItem(storage_id+"load_on_demand"))?(LiveModel.categories.length?$("#live-categories-count").text(LiveModel.categories.length+" Categories"):$("#live-categories-count").text("Press to Load Content"),VodModel.categories.length?$("#movies-categories-count").text(VodModel.categories.length+" Categories"):$("#movies-categories-count").text("Press to Load Content"),SeriesModel.categories.length?$("#series-categories-count").text(SeriesModel.categories.length+" Categories"):$("#series-categories-count").text("Press to Load Content")):($("#live-categories-count").text(LiveModel.categories.length+" Categories"),$("#movies-categories-count").text(VodModel.categories.length+" Categories"),$("#series-categories-count").text(SeriesModel.categories.length+" Categories"))},showCurrentWeather:function(){weatherNow&&(e=Math.floor(parseInt(weatherNow.temp_c))+"",t="https:"+weatherNow.condition.icon);var e,t,i=utilities.getCurrentDateTimeFormatted();weatherCountry&&weatherCity&&$("#weather-country").text(weatherCity+", "+weatherCountry+"."),$("#current-date").text(i),$("#current-weather-icon").attr("src",t),$("#current-weather-degree").text(e)},clickMainMenu:function(){var e=parseInt(localStorage.getItem(storage_id+"load_on_demand"));try{media_player.close()}catch(e){}switch(this.keys.menu_selection){case 0:e&&!this.dataLoaded.live?this.requestMovies("live"):this.initPage("live");break;case 1:e&&!this.dataLoaded.vod?this.requestMovies("vod"):this.initPage("vod");break;case 2:e&&!this.dataLoaded.series?this.requestMovies("series"):this.initPage("series");break;case 3:catchup_page.init();break;case 4:playlist_page.init("home-page");break;case 5:e&&!this.dataLoaded.live?this.requestMovies("live",!0):this.initPage("live",!0);break;case 6:layout_page.init("home-page")}},setLiveFavoritesChoice:function(){"off"==localStorage.getItem(storage_id+"home_favorites_choice")?(this.isLiveFavoriteAllowed=!1,$(this.menu_doms[5]).hide(),$(".right-menu-items .menu-item-container").css("height","14rem")):(this.isLiveFavoriteAllowed=!0,$(this.menu_doms[5]).show(),$(".right-menu-items .menu-item-container").css("height","10rem"))},setSearchAvailability:function(){parseInt(localStorage.getItem(storage_id+"load_on_demand"))?(this.isSearchAllowed=!1,$(this.bottom_menu_doms[3]).hide()):(this.isSearchAllowed=!0,$(this.bottom_menu_doms[3]).show())},hoverMainMenu:function(e,t){t&&this.openedModal||((t=this.keys).focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.bottom_menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active"))},addNotification:function(e){e.message&&(e.title||(e.title="App System"),e.date||(e.date=utilities.getCurrentDateTimeFormatted()),e='      <div class="notifications-modal-item">        <div class="notifications-modal-item-header">          <div class="notifications-modal-item-sender">'+e.title+'</div>          <div class="notifications-modal-item-date">'+e.date+'</div>        </div>        <div class="notifications-modal-item-body">'+e.message+"</div>      </div>    ",$("#notifications-modal-items").append(e),$(".home-bottom-item.notifications").addClass("has-items"),$(".empty-notifications").hide())},showNotificationsModal:function(){this.keys.focused_part="notifications_modal",this.openedModal="notifications",$("#notifications-modal").addClass("open")},hideNotificationsModal:function(){this.keys.focused_part="bottom_menu_selection",this.openedModal=null,$("#notifications-modal").removeClass("open"),$(".home-bottom-item.notifications").removeClass("has-items")},clickBottomMenu:function(){switch(this.keys.bottom_menu_selection){case 0:this.showNotificationsModal();break;case 1:window.location.reload();break;case 2:account_page.init("home-page");break;case 3:this.isSearchAllowed&&search_page.init("home-page");break;case 4:settings_page.init()}},hoverBottomMenu:function(e,t){t&&this.openedModal||!this.isSearchAllowed&&3===e||((t=this.keys).focused_part="bottom_menu_selection",t.bottom_menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.bottom_menu_doms).removeClass("active"),$(this.bottom_menu_doms[e]).addClass("active"))},updatePlaylistExpiryDays:function(e){switch(e){case 0:$(".playlist-will-expire-in").text("a few hours");break;case 1:$(".playlist-will-expire-in").text(e+" day");break;case null:$(".playlist-will-expire-in").text("Unknown");break;default:$(".playlist-will-expire-in").text(e+" days")}},checkForPlaylistExpirationDate:function(){if("Expired"!=playlist_status)if(playlist_expire_date)try{console.log("####### Playlist expiry date",playlist_expire_date);var e=utilities.convertToTimestamp(playlist_expire_date),t=utilities.timestampDiffInDays(e);console.log("Playlist will expire in",t),this.updatePlaylistExpiryDays(t),t<=5&&0<=t&&this.addNotification({message:"Your playlist will expire in "+t+" days. Please contact your provider to extend it and continue enjoying your service."})}catch(e){console.log("Error checking for playlist expiration date",e),this.updatePlaylistExpiryDays(null)}else console.log("This playlist is unlimited")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$(this.menu_doms[e.menu_selection]).trigger("click");break;case"bottom_menu_selection":this.clickBottomMenu(this.bottom_menu_doms);break;case"search_input":search_page.init("home-page","all");break;case"refresh_button":window.location.reload();break;case"account_button":account_page.init()}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":switch(t.menu_selection){case 0:case 1:case 2:e<0&&this.hoverBottomMenu(t.bottom_menu_selection);break;case 3:0<e?(t.menu_selection+=e,this.hoverMainMenu(t.menu_selection)):e<0&&this.hoverBottomMenu(t.bottom_menu_selection);break;case 4:t.menu_selection+=e,0<e&&!this.isLiveFavoriteAllowed&&(t.menu_selection+=e),this.hoverMainMenu(t.menu_selection);break;case 5:t.menu_selection+=e,this.hoverMainMenu(t.menu_selection);break;case 6:e<0&&(t.menu_selection+=e,this.isLiveFavoriteAllowed||(t.menu_selection+=e),this.hoverMainMenu(t.menu_selection))}break;case"bottom_menu_selection":0<e&&this.hoverMainMenu(t.menu_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":t.menu_selection<3&&(t.menu_selection+=e),3<=t.menu_selection&&e<0&&(t.menu_selection=2),t.menu_selection<0&&(t.menu_selection=0),this.hoverMainMenu(t.menu_selection);break;case"bottom_menu_selection":t.bottom_menu_selection+=e,t.bottom_menu_selection<0&&(t.bottom_menu_selection=0),t.bottom_menu_selection>=this.bottom_menu_doms.length&&(t.bottom_menu_selection=this.bottom_menu_doms.length-1),this.isSearchAllowed||3!==t.bottom_menu_selection||(t.bottom_menu_selection+=e,t.bottom_menu_selection<0&&(t.bottom_menu_selection=0),t.bottom_menu_selection>=this.bottom_menu_doms.length&&(t.bottom_menu_selection=this.bottom_menu_doms.length-1)),this.hoverBottomMenu(t.bottom_menu_selection)}},HandleKey:function(e){this.keys;if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}),playlist_page={initiated:!1,keys:{focused_part:"playlist_selection",playlist_selection:0,color_buttons_selection:0},playlist_doms:[],color_btns_doms:$("#playlists-page .bottom-label-item"),back_btn_dom:null,is_loading:!1,tried_panel_indexes:[],prev_route:"home-page",init:function(e){var s,o;this.prev_route=e,current_route="playlist-page",this.tried_panel_indexes=[],this.initiated||(s="",o=settings.playlist_id,playlist_urls.map(function(e,t){var i=o===e.id;s+='<div class="playlist-item-container"                       onmouseenter="playlist_page.hoverPlayListItem('+t+')"                       onclick="playlist_page.changePlaylist('+t+')"                   >                       <div class="playlist-item-wrapper">                           <span class="playlist-name">'+e.playlist_name+"</span>"+('<div class="playlist-state '+(i?"playing":"")+'">SELECTED</div>')+"</div>                    </div>"}),this.initiated=!0,$("#playlist-items-container").html(s),this.playlist_doms=$(".playlist-item-wrapper"),this.back_btn_dom=$("#playlist-back-icon"),this.keys.playlist_selection=0),home_page.exit(),$("#playlists-page").removeClass("hide"),this.hoverPlayListItem(this.keys.playlist_selection)},hoverColorButton:function(e){var t=this.keys;t.color_buttons_selection=e,t.focused_part="color_buttons_selection",$(this.playlist_doms).removeClass("active"),$("#add-playlist-btn").removeClass("active"),$(this.color_btns_doms).removeClass("active"),$(this.color_btns_doms[e]).addClass("active")},clickColorButton:function(e){switch(e){case 0:this.removePlayList();break;case 1:window.location.reload()}},hoverPlayListItem:function(e){var t=this.keys;t.focused_part="playlist_selection",current_route="playlist-page",$(home_page.menu_doms).removeClass("active"),$("#add-playlist-btn").removeClass("active"),$(this.color_btns_doms).removeClass("active"),t.playlist_selection=e,$(this.playlist_doms).removeClass("active"),$(this.playlist_doms[e]).addClass("active"),moveScrollPosition($("#playlist-items-container"),this.playlist_doms[e],"horizontal",!1)},hoverAddPlaylistBtn:function(){this.keys.focused_part="add_playlist_btn",$(this.playlist_doms).removeClass("active"),$(this.color_btns_doms).removeClass("active"),$("#add-playlist-btn").addClass("active")},changePlaylist:function(e){var t=playlist_urls[e];"playlist-page"==current_route&&($(home_page.menu_doms).removeClass("active"),$(this.playlist_doms).find(".playlist-state").removeClass("playing"),$($(this.playlist_doms[e]).find(".playlist-state")).addClass("playing"),$(this.playlist_doms).removeClass("active"),$("#playlists-page").addClass("hide"),settings.saveSettings("playlist_id",t.id,""),settings.saveSettings("playlist",t,"array"),current_route="login-page",$("#home-page").addClass("hide"),$("#loading-page").removeClass("hide"),$(".empty-notifications").show(),$("#notifications-modal-items").html(""),login_page.login())},showPlayListEditPage:function(){playlist_edit_page.init("playlist-page")},removePlayList:function(){0!=playlist_urls.length&&(1==playlist_urls.length?showToast("Sorry","You need to have 1 playlist at least"):0<playlist_urls.length&&(showLoader(!0),this.is_loading=!0,this.proceedRemovingWithServer()))},proceedRemovingWithServer:function(){var e=this.keys,e=playlist_urls[e.playlist_selection],e=encryptRequest({mac_address:mac_address,app_type:platform,id:e.id}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],o=this;$.ajax({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+i+"/remove_playlist",data:{data:e},success:function(e){o.tried_panel_indexes=[],o.playlistRemoved(!0)},error:function(){o.tried_panel_indexes.push(s),o.tried_panel_indexes.length<panel_urls.length?o.proceedRemovingWithServer():o.playlistRemoved(!1)}})},playlistRemoved:function(e){var t=this.keys,i=playlist_urls[t.playlist_selection].id,i=(playlist_urls.splice(t.playlist_selection,1),settings.playlist_id===i&&(settings.saveSettings("playlist_id","",""),settings.saveSettings("playlist",{},"array")),showLoader(!1),this.is_loading=!1,$(this.playlist_doms[t.playlist_selection]).remove(),t.playlist_selection);this.initiated=!1,this.init(),i>=this.playlist_doms.length&&(i=this.playlist_doms.length-1),this.hoverPlayListItem(i),settings.playlist_id||this.handleMenuClick()},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":$(this.playlist_doms[e.playlist_selection]).trigger("click");break;case"add_playlist_btn":this.showPlayListEditPage();break;case"color_buttons_selection":this.clickColorButton(e.color_buttons_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"playlist_selection":t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection);break;case"color_buttons_selection":t.color_buttons_selection+=e,t.color_buttons_selection<0&&(t.color_buttons_selection=0),t.color_buttons_selection>=this.color_btns_doms.length&&(t.color_buttons_selection=this.color_btns_doms.length-1),this.hoverColorButton(t.color_buttons_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"playlist_selection":0<e&&this.hoverAddPlaylistBtn();break;case"add_playlist_btn":e<0?this.hoverPlayListItem(t.playlist_selection):this.hoverColorButton(t.color_buttons_selection);break;case"color_buttons_selection":e<0&&this.hoverAddPlaylistBtn()}},goBack:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":case"add_playlist_btn":$("#playlists-page").addClass("hide"),$("#home-page").removeClass("hide"),home_page.hoverMainMenu(home_page.keys.menu_selection),current_route="home-page";break;case"color_buttons_selection":this.hoverPlayListItem(e.playlist_selection)}},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-3);break;case tvKey.DOWN:this.handleMenusUpDown(3);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.YELLOW:window.location.reload();break;case tvKey.RED:this.removePlayList()}}},account_page={init:function(){this.fillAccountDetails(),current_route="account-page",$("#account-page").removeClass("hide"),$("#home-page").addClass("hide")},fillAccountDetails:function(){$("#mac-address").text(mac_address.toUpperCase()),$(".mac-address").text(mac_address.toUpperCase()),$("#device-key").text(device_key),$(".device-key").text(device_key),$("#platform").text(platform.toUpperCase()||"Unknown"),1==is_trial||2==is_trial?$("#app-status").text("Active"):$("#app-status").text("Trial"),"lg"==platform?$("#app-version").text(lg_version):$("#app-version").text(samsung_version),$("#playlist-username").text(user_name),$("#playlist-status").text(playlist_status),$("playlist-expire-date").text(expire_date)},handleMenuClick:function(){},handleMenuLeftRight:function(e){},handleMenusUpDown:function(e){},goBack:function(){$("#account-page").addClass("hide"),$("#home-page").removeClass("hide"),current_route="home-page"},HandleKey:function(e){e.keyCode===tvKey.RETURN&&this.goBack()}};function initKeys(){var e;if("samsung"===platform){var t,i;try{for(i=tizen.tvinputdevice.getSupportedKeys(),t=0;t<i.length;t++)i[t].name,i[t].code,tizen.tvinputdevice.registerKey(i[t].name);tizen.tvinputdevice.unregisterKey("VolumeUp"),tizen.tvinputdevice.unregisterKey("VolumeDown"),tizen.tvinputdevice.unregisterKey("VolumeMute")}catch(e){}e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,RETURN:10009,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}}else"lg"===platform&&(e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:461,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072});window.tvKey=e}function confirmParentPassword(){"home-page"===current_route&&home_page.confirmParentPassword()}function cancelParentPassword(){"home-page"===current_route&&home_page.cancelParentPassword()}var media_player,channel_page={current_channel_id:0,full_screen_video:!1,information_timer:null,progressbar_timer:null,player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],current_category_index:0,category_hover_timer:null,category_hover_timeout:300,channel_hover_timer:null,channel_hover_timeout:300,channel_sidebar_options_timer:null,keys:{focused_part:"category_selection",category_selection:0,channel_selection:0,sidebar_selection:0,aspect_ratio_selection:0,subtitles_selection:0,audio_selection:0,prev_focus:"",video_control:0,color_buttons_selection:0,switch_page_modal_selection:0},category_doms:[],channel_doms:[],switch_page_modal_doms:$(".channel-switch-page-modal-page-item"),video_control_doms:$("#channel-page .video-control-icon-wrapper"),play_icon_index:1,search_items:[],filtered_movies:[],next_programme_timer:null,programmes:[],short_epg_limit_count:30,prev_focus_dom:null,next_channel_timer:null,prev_keyword:"",search_timer:null,rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,rearrange_origin_position:0,show_information:!1,epg_channel_id:null,prev_channel:null,current_category_dom:null,channel_layout:1,is_categories_menu_visible:!1,is_no_categories:!1,fullscreen_sidebar_doms:$(".channel-sidebar-option"),sidebar_aspect_ratio_doms:$("#channel-sidebar-aspect-ratio-options-wrapper .channel-sidebar-suboption"),sidebar_subtitles_doms:$("#channel-sidebar-subtitles-options-wrapper .channel-sidebar-suboption"),sidebar_audio_doms:$("#channel-sidebar-audio-options-wrapper .channel-sidebar-suboption"),last_chosen_aspect_ratio:"stretch",current_subtitle_index:0,current_audio_track_index:0,init:function(e,t,i){this.rearrange_mode=!1,this.prev_focus_dom=null,this.prev_route=e;var e=this.keys,s=(home_page.exit(),$("#channel-page").removeClass("hide"),current_route="channel-page",$("#channel-page .stream-page-title").removeClass("hide"),LiveModel.getCategories(!1,!0)),o=(this.categories=s,""),a=(s.map(function(e,t){o+='<div class="channel-page-category-item"                    onmouseenter="channel_page.hoverCategory(this)"                    onclick="channel_page.handleMenuClick()"                    data-index="'+t+'"                >                    <div class="channel-category-name-wrapper floatTextWrapper">                        <span class="floatText">                            <span class="channel-category-name">'+e.category_name+'</span>                        </span>                    </div>                     <span class="channel-category-movie-counts-wrapper">                        <span class="channel-category-movie-counts">'+e.movies.length+"</span>                        <span class='channel-category-movie-counts-word'> Channels</span>                    </span>                </div>"}),$("#channel-page-categories-container").html(o),this.category_doms=$(".channel-page-category-item"),0);if(t){for(n=0;n<s.length;n++)if(s[n].category_id==t.category_id){a=n;break}}else for(var n=0;n<s.length;n++)if(0<s[n].movies.length){a=n;break}this.current_category_index=-1,e.category_selection=a,this.showInformation(!1),this.hoverCategory(a),this.showCategoryChannels(t),t||this.showInitialChannel(s,i),this.epg_channel_id=null,this.setupCurrentLayout()},goBack:function(){var e=this.keys;switch(e.focused_part){case"video_control":var t=this.checkIfShowInfo();console.log("Going back in video control"),t?(clearTimeout(this.full_screen_timer),this.hideFullScreenInfo()):(console.log("Will go back to channels"),this.showInformation(!1));break;case"full_screen":this.showInformation(!1);break;case"category_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):this.Exit();break;case"channel_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):this.is_no_categories?this.Exit():this.hoverCategory(e.category_selection);break;case"sidebar_options":this.hideSidebarOptions();break;case"aspect_ratio_selection":case"subtitles_selection":case"audio_selection":this.hideSidebarSubOptions();break;case"color_buttons_selection":this.hoverChannel(e.channel_selection);break;case"switch_page_modal":this.hideSwitchPageModal()}},Exit:function(e){e=e||"home-page";try{media_player.close()}catch(e){console.log("Error closing media player",e)}this.keys;$("#channel-page").addClass("hide"),clearInterval(this.progressbar_timer),clearTimeout(this.information_timer),clearTimeout(this.next_channel_timer),$("#next-program-container").html(""),$("#channel-title").html(""),"home-page"==e?home_page.reEnter():($("#search-page").show(),current_route="search-page",search_page.init("channel-page","live"));var t=LiveModel.category_orders;if(0<t.length){for(var i=this.categories,s=0;s<i.length;s++)for(var o=0;o<t.length;o++)if(i[s].category_id==t[o].id){t[o].position=s;break}t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(t)),LiveModel.category_orders=t}},showInitialChannel:function(e,t){if(t=t||!1){$("#channel-page-categories-container").hide();for(var i=-1,s=0;s<e.length;s++)if("favourite"===e[s].category_id){i=s;break}if(-1!==i){if(this.hoverCategory($(this.category_doms[i])),this.handleMenuClick(),!this.movies||0==this.movies.length)return this.Exit(),void showToast("Sorry","You have no favorite channels.");this.hoverChannel(0)}this.is_no_categories=!0}else{$("#channel-page-categories-container").show(),this.is_no_categories=!1;t=localStorage.getItem(storage_id+"live_initialization_choice");"last"==(t=t||"default")?this.initializeByLast(e):"favorite"==t?this.initializeByFavorite(e):this.initializeByDefault(e)}},initializeByDefault:function(e){var t=2;if(!e[t]||0==e[t].movies.length||!e[t].movies)for(var i=0;i<e.length;i++)if(0<e[i].movies.length){t=i;break}e[t]&&0<e[t].movies.length&&(this.hoverCategory(t),this.handleMenuClick(),this.hoverChannel(0),this.showMovie(e[t].movies[0]),this.keys.focused_part="channel_selection")},initializeByFavorite:function(e){for(var t=null,i=-1,s=0;s<e.length;s++)if("favourite"==e[s].category_id){t=e[s],i=s;break}t&&0<t.movies.length?(this.hoverCategory(i),this.handleMenuClick(),this.hoverChannel(0),this.showMovie(t.movies[0])):this.initializeByDefault(e)},initializeByLast:function(e){var t=localStorage.getItem(storage_id+settings.playlist.id+"live_recent");if(t){t=JSON.parse(t);if(t&&0<t.length){for(var i=t[0],s=null,o=-1,a=-1,n=2;n<e.length;n++){for(var r=e[n],l=0;l<r.movies.length;l++)if(r.movies[l].stream_id==i){s=r,o=n,a=l;break}if(s)break}if(s)return this.hoverCategory(o),this.handleMenuClick(),this.hoverChannel(a),void this.showMovie(s.movies[a])}}this.initializeByDefault(e)},setupCurrentLayout:function(){$("#channel-page .player-container").removeClass("expanded");var e=["classic","classic-compact","normal","normal-compact","modern"],t=(this.channel_layout=layout_page.getLayoutChoice(),e[this.channel_layout]);$("#channel-page").removeClass(e.join(" ")).addClass(t),this.is_no_categories?$("#channel-page").addClass("no-categories"):$("#channel-page").removeClass("no-categories")},showCategoryChannels:function(e){var t=this.keys;if(t.category_selection!==this.current_category_index){var i=this.categories[t.category_selection],s=(this.movies=i.movies,$(this.current_category_dom).removeClass("current"),$(this.category_doms[t.category_selection]).addClass("current"),this.current_category_dom=this.category_doms[t.category_selection],"");if(this.movies.forEach(function(e,t){s+='      <div class="channel-menu-item"        data-channel_id="'+e.stream_id+'"        data-index="'+t+'"        onmouseenter="channel_page.hoverChannel(this)"        onclick="channel_page.handleMenuClick()"        >          <div class="channel-icon-container channel-icon-'+t+'">            <img class="channel-icon '+t+'" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"/>          </div>          <div class="channel-item-number-title">            <div class="channel-info-top">\n              <span class="channel-number">'+e.num+"</span>"+(LiveModel.favourite_ids.includes(e.stream_id)?'<i class="fa fa-star favourite-icon"></i>':"")+'</div>\n            <div class="channel-name-wrapper floatTextWrapper">              <span class="channel-name floatText">'+e.name+"</span>            </div>          </div></div>"}),$("#channel-page-menu-container").html(s),t.channel_selection=0,this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),$("#channel-page-menu-container").scrollTop(0),this.current_category_index=t.category_selection,0<this.movies.length){if(this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),this.channel_nav_doms=$("#full-screen-navigation .channel-nav-item"),moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[0],"vertical",!0),this.hoverChannel(0),e){for(var o=0;o<this.movies.length;o++)if(this.movies[o].stream_id==e.stream_id){t.channel_selection=o,this.showMovie(this.movies[o]),this.hoverChannel(o);break}}else this.showMovie(this.movies[0]);t.focused_part="channel_selection"}}},goChannelNum:function(e){var t,s;this.full_screen_video&&(0!=(t=this.channel_num)||0==t&&0!=e)&&(this.channel_num=t=10*t+e,this.channel_number_timer&&(clearTimeout(this.channel_number_timer),this.channel_number_timer=null),s=this,$("#typed-channel-number").text(t),this.channel_number_timer=setTimeout(function(){for(var e=s.movies,t=!1,i=0;i<e.length;i++)if(e[i].num===s.channel_num){t=!0,current_movie=e[i],s.showMovie(current_movie),s.current_channel_id=current_movie.stream_id,s.hoverChannel(s.channel_doms[i]),s.keys.focused_part="video_control";break}t||showToast("Sorry","Channel does not exist"),s.channel_num=0,$("#typed-channel-number").text("")},2e3))},addOrRemoveFav:function(){var e=this.keys;if("channel_selection"===e.focused_part){var t=this.movies[e.channel_selection],i="add";"add"===(i=LiveModel.favourite_ids.includes(t.stream_id)?"remove":i)?(LiveModel.addRecentOrFavouriteMovie(t,"favourite"),$(this.channel_doms[e.channel_selection]).find(".channel-info-top").append('<i class="fa fa-star favourite-icon"></i>')):(i=this.categories[this.current_category_index],LiveModel.removeRecentOrFavouriteMovie(t.stream_id,"favourite"),$(this.channel_doms[e.channel_selection]).find(".favourite-icon").remove(),"favourite"===i.category_id&&($(this.channel_doms[e.channel_selection]).remove(),t=$("#channel-page-menu-container .channel-menu-item"),0==(this.channel_doms=t).length?this.hoverCategory(e.category_selection):(e.channel_selection>=t.length&&(e.channel_selection=t.length-1),this.hoverChannel(e.channel_selection))));try{for(var s=this.categories,o=0;o<s.length;o++)if("favourite"===s[o].category_id){var a=LiveModel.getRecentOrFavouriteCategory("favourite").movies.length;$(this.category_doms[o]).find(".channel-category-movie-counts").text(a);break}}catch(e){}}},showNextProgrammes:function(){for(var e="next-program-container",t=this.movies[this.keys.channel_selection],t=($("#channel-title").text(t.name),LiveModel.getNextProgrammes(this.programmes)),i=t.current_program_exist,s=t.programmes,o=0,a="",n=0;n<s.length&&(a+='<div class="next-program-item '+(0==o&&i?"current":"")+'"><span class="program-time">'+s[n].start.substring(11)+" ~ "+s[n].stop.substring(11)+"</span>"+s[n].title+"</div>",!(4<=++o));n++);0<o?$("#"+e).html(a).show():$("#"+e).hide().html("");var r,l,t="No Info",e="",c="No Info",d="";i?(r=s[0],1<s.length&&(l=s[1])):0<s.length&&(l=s[0]),r&&(t=r.title,e=r.start.substring(11)+" ~ "+r.stop.substring(11)),l&&(c=l.title,d=l.start.substring(11)+" ~ "+l.stop.substring(11)),$(".full-screen-program-name.current").text(t),$(".full-screen-program-time.current").text(e),$(".full-screen-program-name.next").text(c),$(".full-screen-program-time.next").text(d)},updateNextProgrammes:function(){this.showNextProgrammes(),clearInterval(this.next_programme_timer);var e=this;this.next_programme_timer=setInterval(function(){e.showNextProgrammes()},6e4)},getEpgProgrammes:function(){var t,i,s,e=this.movies[this.keys.channel_selection];this.epg_channel_id!==e.stream_id&&(i=[],(t=this).programmes=[],t.showNextProgrammes(),this.epg_channel_id=e.stream_id,"xc"===settings.playlist.playlist_type)&&(s="Y-MM-DD HH:mm",$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_short_epg&stream_id="+e.stream_id+"&limit="+this.short_epg_limit_count,success:function(e){e.epg_listings.map(function(e){i.push({start:getLocalChannelTime(e.start).format(s),stop:getLocalChannelTime(e.end).format(s),title:getAtob(e.title),description:getAtob(e.description)})}),t.programmes=i,t.updateNextProgrammes()}}))},checkIfShowInfo:function(){var e=!1;return e="block"===$("#full-screen-information").css("display")?!0:e},showInformation:function(e){$("#channel-page .player-container").removeClass("expanded"),$("#channel-page-contents-container").show();var t=this,i=(this.information_timer&&(clearTimeout(this.information_timer),this.information_timer=null),this.information_timer=setTimeout(function(){t.hideInformation()},25e3),this.keys);"category_selection"!=i.focused_part&&"channel_selection"!=i.focused_part&&(i.focused_part="channel_selection",e)&&"channel_selection"===i.focused_part&&this.hoverChannel(i.channel_selection),this.hideFullScreenInfo(),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){console.log(e)}},0)},hideInformation:function(){var e=this,t=this.keys;"category_selection"!=t.focused_part&&"channel_selection"!=t.focused_part||($("#channel-page .player-container").addClass("expanded"),"video_control"!=t.focused_part&&(t.prev_focus=t.focused_part),t.focused_part="video_control",$("#channel-page-contents-container").hide(),this.hoverVideoControl(1),setTimeout(function(){try{e.last_chosen_aspect_ratio?media_player.setDisplayArea(e.last_chosen_aspect_ratio,"channel"):media_player.setDisplayArea()}catch(e){console.log(e)}},0))},showFullScreenInfo:function(){clearTimeout(this.full_screen_timer),this.full_screen_timer=null,$("#full-screen-information").slideDown();var e=this;this.full_screen_timer=setTimeout(function(){e.hideFullScreenInfo()},5e3)},hideFullScreenInfo:function(){$("#full-screen-information").slideUp()},showMovie:function(e){this.last_chosen_aspect_ratio="stretch";var t,i=e.stream_id;"xc"===settings.playlist.playlist_type?t=getMovieUrl(i,"live","ts"):"general"===settings.playlist.playlist_type&&(t=e.url);try{media_player.close()}catch(e){}media_player.init("channel-page-video","channel-page");try{window.PROXY_URL?media_player.playAsync(window.PROXY_URL+t):media_player.playAsync(t)}catch(e){}this.current_channel_id=i,$(".full-screen-channel-name").text(e.name),$(".full-screen-channel-logo").attr("src",e.stream_icon);var s=this;if(setTimeout(function(){s.populateSubtitleTracks(),s.populateAudioTracks()},2e3),!checkForAdult(e,"movie",LiveModel.categories)){LiveModel.addRecentOrFavouriteMovie(e,"recent");for(var o=this.categories,a=0;a<o.length;a++)if("recent"===o[a].category_id){var n=LiveModel.getRecentOrFavouriteCategory("recent").movies.length;$(this.category_doms[a]).find(".channel-category-movie-counts").text(n);break}}},showNextChannel:function(e){var t=this.keys,i=(t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this);setTimeout(function(){var e=i.movies[t.channel_selection],e=(i.current_channel_id=e.stream_id,i.showMovie(i.movies[t.channel_selection]),$(i.video_control_doms[1]).find("i"));$(e).removeClass("fa-play"),$(e).addClass("fa-pause")},400),this.showFullScreenInfo()},playOrPause:function(){var e=$(this.video_control_doms[1]).find("i");if(media_player.state==media_player.STATES.PLAYING){try{media_player.pause()}catch(e){}$(e).removeClass("fa-pause"),$(e).addClass("fa-play")}else{try{media_player.play()}catch(e){}$(e).removeClass("fa-play"),$(e).addClass("fa-pause")}},goToSearchPage:function(){this.hideFullScreenInfo(),$("#channel-page").addClass("hide"),search_page.init("channel-page","live"),this.toggleRearrangeMode(!1)},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_focus_dom).removeClass("rearrange");else if(e){e=this.keys;if("category_selection"===e.focused_part||"channel_selection"===e.focused_part){this.rearrange_mode=!0;var t=0;if("channel_selection"===e.focused_part)t=e.channel_selection;else for(var i=this.categories[e.category_selection],s=0;s<LiveModel.categories.length;s++)if(LiveModel.categories[s].category_id==i.category_id){t=s;break}this.rearrange_origin_position=t,$(this.prev_focus_dom).addClass("rearrange")}}},changeChannelDomContent:function(e,t,i){$(e).find(".channel-number").text(t.num),$(e).find(".channel-icon").attr("src",t.stream_icon),$(e).data("index",i),$(e).find(".channel-name").text(t.name),$(e).data("channel_id",t.stream_id)},changeCategoryDomContent:function(e,t,i){$(e).find(".channel-category-name").text(t.category_name),$(e).data("index",i),$(e).find(".channel-category-movie-counts").text(t.movies.length)},hoverColorButton:function(e){var t=this.keys,i=(t.color_buttons_selection=e,$("#channel-page .bottom-label-item"));t.focused_part="color_buttons_selection",$(this.prev_focus_dom).removeClass("active"),$(i).removeClass("active"),$(i[e]).addClass("active"),this.prev_focus_dom=$(i[e])},clickColorButton:function(e){var t=this.keys;switch(e){case 0:this.Exit("search-page");break;case 1:this.hoverChannel(t.channel_selection),this.toggleRearrangeMode(!0);break;case 2:this.hoverChannel(t.channel_selection),this.addOrRemoveFav();break;case 3:this.showSwitchPageModal()}},hoverVideoControl:function(e){var t=this.keys;t.video_control=e,t.focused_part="video_control",$(this.video_control_doms).removeClass("active"),$(this.video_control_doms[e]).addClass("active"),this.showFullScreenInfo()},hoverCategory:function(e){$("#channel-page .bottom-label-item").removeClass("active"),$("#channel-page-menu-container").css("overflow-y","hidden"),$("#channel-page-categories-container").css("overflow-y","scroll");var t=this.keys;t.focused_part="category_selection",this.toggleCategoriesMenu(!0),t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#channel-page-categories-container"),this.category_doms[t.category_selection],"vertical",!1),this.showInformation(!1),applyAnimation(this.category_doms[t.category_selection])},hoverChannel:function(e){$("#channel-page .bottom-label-item").removeClass("active"),$("#channel-page-categories-container").css("overflow-y","hidden"),$("#channel-page-menu-container").css("overflow-y","scroll");var t=this.keys,i=(t.focused_part="channel_selection",this.toggleCategoriesMenu(!1),t.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[t.channel_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.channel_doms[t.channel_selection]).addClass("rearrange")),this.prev_focus_dom=this.channel_doms[t.channel_selection],this.showInformation(!1),this);moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[t.channel_selection],"vertical",!1),this.channel_hover_timer&&(clearTimeout(this.channel_hover_timer),this.channel_hover_timer=null),this.channel_hover_timer=setTimeout(function(){i.getEpgProgrammes()},this.channel_hover_timeout),applyAnimation(this.channel_doms[t.channel_selection])},toggleCategoriesMenu:function(e){4==this.channel_layout&&(1==e?$(".categories-container").addClass("visible"):$(".categories-container").removeClass("visible"))},hoverSidebarOption:function(e){"sidebar_options"==this.keys.focused_part&&($(this.fullscreen_sidebar_doms).removeClass("active"),$(this.fullscreen_sidebar_doms[e]).addClass("active"),this.resetSidebarOptionsTimer())},showSidebarOptions:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="sidebar_options",this.resetSidebarOptionsTimer(),$("#channel-fullscreen-sidebar-options").addClass("visible")},hideSidebarOptions:function(){var e=this.keys;e.focused_part="video_control",e.sidebar_selection=0,clearTimeout(this.channel_sidebar_options_timer),$("#channel-fullscreen-sidebar-options").removeClass("visible")},resetSidebarOptionsTimer:function(){var e=this;clearTimeout(this.channel_sidebar_options_timer),this.channel_sidebar_options_timer=setTimeout(function(){e.hideSidebarOptions()},1e4)},clickSidebarMainItem:function(e){if("sidebar_options"==this.keys.focused_part)switch(this.resetSidebarOptionsTimer(),e){case 0:this.showSidebarSubOptions(0);break;case 1:this.showSidebarSubOptions(1);break;case 2:this.showSidebarSubOptions(2)}},showSidebarSubOptions:function(e){clearTimeout(this.channel_sidebar_options_timer);var t=this.keys;switch($("#channel-fullscreen-sidebar-options").addClass("suboptions-visible"),this.hideAllSidebarSubOptions(),e){case 0:t.focused_part="aspect_ratio_selection",$("#channel-sidebar-aspect-ratio-options-container").show(),this.hoverSidebarSubOptionItem(t.aspect_ratio_selection);break;case 1:t.focused_part="subtitles_selection",$("#channel-sidebar-subtitles-options-container").show(),this.hoverSidebarSubOptionItem(t.subtitles_selection);break;case 2:t.focused_part="audio_selection",$("#channel-sidebar-audio-options-container").show(),this.hoverSidebarSubOptionItem(t.audio_selection)}},hideSidebarSubOptions:function(){this.keys.focused_part="sidebar_options",$("#channel-fullscreen-sidebar-options").removeClass("suboptions-visible"),this.resetSidebarOptionsTimer()},hideAllSidebarSubOptions:function(){$("#channel-sidebar-aspect-ratio-options-container").hide(),$("#channel-sidebar-subtitles-options-container").hide(),$("#channel-sidebar-audio-options-container").hide()},hoverSidebarSubOptionItem:function(e){var t=this.keys;if("aspect_ratio_selection"==t.focused_part||"subtitles_selection"==t.focused_part||"audio_selection"==t.focused_part)switch(t.focused_part){case"aspect_ratio_selection":$(this.sidebar_aspect_ratio_doms).removeClass("active"),$(this.sidebar_aspect_ratio_doms[e]).addClass("active"),t.aspect_ratio_selection=e;break;case"subtitles_selection":$(this.sidebar_subtitles_doms).removeClass("active"),$(this.sidebar_subtitles_doms[e]).addClass("active"),t.subtitles_selection=e;break;case"audio_selection":$(this.sidebar_audio_doms).removeClass("active"),$(this.sidebar_audio_doms[e]).addClass("active"),t.audio_selection=e}},clickSidebarSubOptionItem:function(e){var t=this.keys;if("aspect_ratio_selection"==t.focused_part||"subtitles_selection"==t.focused_part||"audio_selection"==t.focused_part)switch(t.focused_part){case"aspect_ratio_selection":this.clickAspectRatioItem(e);break;case"subtitles_selection":this.clickSubtitleItem(e);break;case"audio_selection":this.clickAudioItem(e)}},clickAspectRatioItem:function(e){$(this.sidebar_aspect_ratio_doms).removeClass("current"),$(this.sidebar_aspect_ratio_doms[e]).addClass("current"),this.changeAspectRatio(e)},changeAspectRatio:function(e){switch(e){case 0:media_player.setDisplayArea("stretch","channel"),this.last_chosen_aspect_ratio="stretch";break;case 1:media_player.setDisplayArea("16:9","channel"),this.last_chosen_aspect_ratio="16:9";break;case 2:media_player.setDisplayArea("21:9","channel"),this.last_chosen_aspect_ratio="21:9";break;case 3:media_player.setDisplayArea("4:3","channel"),this.last_chosen_aspect_ratio="4:3";break;case 4:media_player.setDisplayArea("1:1","channel"),this.last_chosen_aspect_ratio="1:1"}},clickSubtitleItem:function(e){if($(this.sidebar_subtitles_doms).removeClass("current"),$(this.sidebar_subtitles_doms[e]).addClass("current"),0===e)try{media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("TEXT",-1)}catch(e){console.log("Error turning off subtitles:",e)}else{var t=media_player.getSubtitleOrAudioTrack("TEXT"),e=e-1;if(t&&t[e])try{var i=t[e].index||e;media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("TEXT",i)}catch(e){console.log("Error setting subtitle track:",e)}}},showSwitchPageModal:function(){var e=this.keys;e.switch_page_modal_selection=0,e.focused_part="switch_page_modal",$("#channel-switch-page-modal-container").show(),this.hoverSwitchPageModal(0),clearTimeout(this.channel_hover_timer)},hideSwitchPageModal:function(){this.keys.focused_part="channel_selection",this.hoverChannel(this.keys.channel_selection),$("#channel-switch-page-modal-container").hide()},hoverSwitchPageModal:function(e){this.keys.switch_page_modal_selection=e,$(this.switch_page_modal_doms).removeClass("active"),$(this.switch_page_modal_doms[e]).addClass("active")},clickSwitchPageModal:function(){switch(this.hideSwitchPageModal(),this.Exit(),this.keys.switch_page_modal_selection){case 0:home_page.keys.menu_selection=1;break;case 1:home_page.keys.menu_selection=2;break;case 2:home_page.keys.menu_selection=4;break;case 3:home_page.hoverBottomMenu(3)}home_page.handleMenuClick()},clickAudioItem:function(e){$(this.sidebar_audio_doms).removeClass("current"),$(this.sidebar_audio_doms[e]).addClass("current");var t=media_player.getSubtitleOrAudioTrack("AUDIO");if(t&&t[e])try{var i=t[e].index||e;media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("AUDIO",i)}catch(e){console.log("Error setting audio track:",e)}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":var t=checkForAdult(this.categories[e.category_selection],"category",[],!0);this.showInformation(!1),t?parent_confirm_page.init(current_route):(this.showCategoryChannels(),this.toggleRearrangeMode(!1));break;case"video_control":this.goBack();break;case"full_screen":this.showInformation(!0);break;case"channel_selection":t=this.movies[e.channel_selection].stream_id;this.showInformation(!1),this.current_channel_id==t?this.hideInformation():this.showMovie(this.movies[e.channel_selection]),this.toggleRearrangeMode(!1);break;case"sidebar_options":this.clickSidebarMainItem(e.sidebar_selection);break;case"aspect_ratio_selection":this.clickSidebarSubOptionItem(e.aspect_ratio_selection);break;case"subtitles_selection":this.clickSubtitleItem(e.subtitles_selection);break;case"audio_selection":this.clickAudioItem(e.audio_selection);break;case"color_buttons_selection":this.clickColorButton(this.keys.color_buttons_selection);break;case"switch_page_modal":this.clickSwitchPageModal(e.switch_page_modal_selection)}},handleMenusUpDown:function(e){var s=this.keys,t=this.channel_doms;switch(s.focused_part){case"category_selection":var i=s.category_selection;if(s.category_selection+=e,s.category_selection<0)s.category_selection=0;else if(s.category_selection>=this.category_doms.length)s.category_selection=this.category_doms.length-1;else{if(this.rearrange_mode&&i!==s.category_selection){for(var o=this.categories[i],a=this.categories[s.category_selection],n=(this.changeCategoryDomContent(this.category_doms[i],a,i),this.changeCategoryDomContent(this.category_doms[s.category_selection],o,s.category_selection),this.category_doms=$(".channel-page-category-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),0),r=0;r<LiveModel.categories.length;r++)if(a.category_id==LiveModel.categories[r].category_id){n=r;break}LiveModel.categories=makeRearrangeArray(LiveModel.categories,this.rearrange_origin_position,n),this.rearrange_origin_position=n,this.categories=LiveModel.getCategories(!1,!0),this.rearrange_timer=setTimeout(function(){for(var e=LiveModel.category_orders,t=0;t<e.length;t++)if(e[t].id==o.category_id){e.splice(t,1);break}e.push({id:o.category_id,position:n}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(e)),LiveModel.category_orders=e,LiveModel.updateRecentAndFavouritePosition()},this.rearrange_timeout)}this.hoverCategory(s.category_selection)}break;case"channel_selection":var l,c,d,i=s.channel_selection;s.channel_selection+=e,s.channel_selection>=t.length?s.channel_selection=t.length-1:s.channel_selection<0?s.channel_selection=0:(this.rearrange_mode&&s.channel_selection!==i&&(c=makeRearrangeArray(this.movies,i,s.channel_selection),this.movies=c,(d=this.categories[this.current_category_index]).movies=c,c=this.movies[i],l=this.movies[s.channel_selection],this.changeChannelDomContent(this.channel_doms[i],c,i),this.changeChannelDomContent(this.channel_doms[s.channel_selection],l,s.channel_selection),this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),this.rearrange_timer=setTimeout(function(){var e=LiveModel.channel_orders,t=[];e[d.category_id]&&(t=e[d.category_id]);for(var i=0;i<t.length;i++)if(t[i].id==l.stream_id&&t[i].name==l.name){t.splice(i,1);break}t.push({id:l.stream_id,name:l.name,position:s.channel_selection}),t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),e[d.category_id]=t,LiveModel.channel_orders=e,localStorage.setItem(storage_id+settings.playlist.id+"_channel_orders",JSON.stringify(e))},this.rearrange_timeout)),this.hoverChannel(s.channel_selection));break;case"full_screen":this.showNextChannel(-1*e);break;case"video_control":this.checkIfShowInfo()&&this.showNextChannel(-1*e),this.showFullScreenInfo();break;case"sidebar_options":s.sidebar_selection+=e,s.sidebar_selection<0&&(s.sidebar_selection=0),s.sidebar_selection>=this.fullscreen_sidebar_doms.length&&(s.sidebar_selection=this.fullscreen_sidebar_doms.length-1),this.hoverSidebarOption(s.sidebar_selection);break;case"aspect_ratio_selection":s.aspect_ratio_selection+=e,s.aspect_ratio_selection<0&&(s.aspect_ratio_selection=0),s.aspect_ratio_selection>=this.sidebar_aspect_ratio_doms.length&&(s.aspect_ratio_selection=this.sidebar_aspect_ratio_doms.length-1),this.hoverSidebarSubOptionItem(s.aspect_ratio_selection);break;case"subtitles_selection":s.subtitles_selection+=e,s.subtitles_selection<0&&(s.subtitles_selection=0),s.subtitles_selection>=this.sidebar_subtitles_doms.length&&(s.subtitles_selection=this.sidebar_subtitles_doms.length-1),this.hoverSidebarSubOptionItem(s.subtitles_selection);break;case"audio_selection":s.audio_selection+=e,s.audio_selection<0&&(s.audio_selection=0),s.audio_selection>=this.sidebar_audio_doms.length&&(s.audio_selection=this.sidebar_audio_doms.length-1),this.hoverSidebarSubOptionItem(s.audio_selection);break;case"switch_page_modal":s.switch_page_modal_selection+=e,s.switch_page_modal_selection>=this.switch_page_modal_doms.length&&(s.switch_page_modal_selection=this.switch_page_modal_doms.length-1),s.switch_page_modal_selection<0&&(s.switch_page_modal_selection=0),this.hoverSwitchPageModal(s.switch_page_modal_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&0<this.movies.length&&(t.focused_part="channel_selection",$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverChannel(t.channel_selection));break;case"channel_selection":this.is_no_categories||(e<0&&($(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverCategory(t.category_selection)),0<e&&this.hoverColorButton(0));break;case"video_control":console.log("Going left right video control"),this.showSidebarOptions();break;case"sidebar_options":e<0&&this.hideSidebarOptions(),0<e&&this.showSidebarSubOptions(t.sidebar_selection);break;case"aspect_ratio_selection":case"subtitles_selection":case"audio_selection":e<0&&this.hideSidebarSubOptions();break;case"color_buttons_selection":t.color_buttons_selection+=e,3<t.color_buttons_selection&&(t.color_buttons_selection=3),t.color_buttons_selection<0?(t.color_buttons_selection=0,this.hoverChannel(t.channel_selection)):this.hoverColorButton(t.color_buttons_selection)}},HandleKey:function(e){if(!this.is_loading){var t=this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:"video_control"===t.focused_part&&this.showNextChannel(1);break;case tvKey.CH_DOWN:"video_control"===t.focused_part&&this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:case tvKey.PLAY:case tvKey.PLAYPAUSE:this.playOrPause();break;case tvKey.BLUE:this.Exit("search-page");break;case tvKey.RED:this.toggleRearrangeMode(!0);break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.GREEN:this.showSwitchPageModal()}}},populateSubtitleTracks:function(){if(media_player&&"function"==typeof media_player.getSubtitleOrAudioTrack){var e=media_player.getSubtitleOrAudioTrack("TEXT"),n=(console.log("[DEBUG] Available subtitle tracks:",e),!1);try{media_player.parent_id&&(n=$("#"+media_player.parent_id+" .subtitle-container").is(":visible"),console.log("[DEBUG] Subtitle container is visible:",n))}catch(e){console.log("[DEBUG] Error checking subtitle visibility:",e)}var r="";r+='<div class="channel-sidebar-suboption'+(n?"":" current")+'" onclick="channel_page.clickSubtitleItem(0)"><span>Off</span></div>',e.forEach(function(e,t){var i="",s=e.index,o=n&&0===t;try{var a="string"==typeof e.extra_info?JSON.parse(e.extra_info):e.extra_info,i=a.track_lang||"Subtitle "+(t+1);language_codes&&language_codes[i]&&(i=language_codes[i]),console.log("[DEBUG] Subtitle track "+t+":",{language:i,index:s,extraInfo:a,isCurrent:o})}catch(e){i="Subtitle "+(t+1),console.log("[DEBUG] Error parsing subtitle track "+t+":",e)}r+='<div class="channel-sidebar-suboption'+(o?" current":"")+'" onclick="channel_page.clickSubtitleItem('+(t+1)+')"><span>'+i+"</span></div>"}),$("#channel-sidebar-subtitles-options-wrapper").html(r),this.sidebar_subtitles_doms=$("#channel-sidebar-subtitles-options-wrapper .channel-sidebar-suboption"),n&&0<e.length?(this.keys.subtitles_selection=1,this.current_subtitle_index=1):(this.keys.subtitles_selection=0,this.current_subtitle_index=0)}else console.log("[DEBUG] Media player or getSubtitleOrAudioTrack function not available")},populateAudioTracks:function(){if(media_player&&"function"==typeof media_player.getSubtitleOrAudioTrack){var e=media_player.getSubtitleOrAudioTrack("AUDIO"),o=0;try{if(media_player.videoObj&&media_player.videoObj.audioTracks)for(var t=0;t<media_player.videoObj.audioTracks.length;t++)if(media_player.videoObj.audioTracks[t].enabled){o=t,console.log("Found enabled audio track at index:",t);break}}catch(e){console.log("Error detecting enabled audio track:",e)}var a="";e.forEach(function(e,t){var i="",s=(e.index,t===o);try{i=("string"==typeof e.extra_info?JSON.parse(e.extra_info):e.extra_info).language||"Audio "+(t+1);language_codes&&language_codes[i]&&(i=language_codes[i])}catch(e){i="Audio "+(t+1)}a+='<div class="channel-sidebar-suboption'+(s?" current":"")+'" onclick="channel_page.clickAudioItem('+t+')"><span>'+i+"</span></div>"}),0===e.length&&(a+='<div class="channel-sidebar-suboption current" onclick="channel_page.clickAudioItem(0)"><span>Default</span></div>'),$("#channel-sidebar-audio-options-wrapper").html(a),this.sidebar_audio_doms=$("#channel-sidebar-audio-options-wrapper .channel-sidebar-suboption"),this.keys.audio_selection=o,this.current_audio_track_index=o}}};function initPlayer(){media_player="samsung"===platform?{videoObj:null,parent_id:"",STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},current_time:0,reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",init:function(e,t){this.videoObj=null,this.parent_id=t,this.state=this.STATES.STOPPED,this.parent_id=t,this.current_time=0,this.reconnect_count=0,this.url="",this.videoObj=document.getElementById(e),$("#"+t).find(".video-error").hide(),$(".video-resolution").text(""),$("#"+this.parent_id).find(".subtitle-container").html("").hide()},playAsync:function(e){if(this.url=e,$("#"+this.parent_id).find(".video-error").hide(),$(".video-loader").show(),!(this.state>this.STATES.STOPPED)){if(!this.videoObj)return 0;try{console.log(e),webapis.avplay.open(e),this.setupEventListeners(),this.setDisplayArea(),webapis.avplay.setBufferingParam("PLAYER_BUFFER_FOR_PLAY","PLAYER_BUFFER_SIZE_IN_SECOND",5);var a=this;webapis.avplay.prepareAsync(function(){$(".video-loader").hide(),a.reconnect_count=0,a.state=a.STATES.PLAYING,webapis.avplay.play(),$("#"+a.parent_id).find(".video-total-time").text(a.formatTime(webapis.avplay.getDuration()/1e3)),$("#"+a.parent_id).find(".video-error").hide();var e={min:0,max:webapis.avplay.getDuration()/1e3};$("#"+a.parent_id).find(".video-progress-bar-slider").attr(e),$("#"+a.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+a.parent_id).find(".video-current-time").text("00:00"),$("#"+a.parent_id).find(".video-reconnect-message").hide(),"vod-series-player-video"===current_route&&vod_series_player.showResumeBar();try{for(var t=webapis.avplay.getCurrentStreamInfo(),i=0;i<t.length;i++)if("VIDEO"===t[i].type){var s,o=JSON.parse(t[i].extra_info);o.Width&&o.Height&&(s=o.Width+" x "+o.Height,$(".video-resolution").text(s));break}}catch(e){console.log(e)}},function(){$(".video-loader").hide(),$("#"+a.parent_id).find(".video-error").show(),a.reconnect_count<a.reconnect_max_count&&a.tryReconnect()})}catch(e){$(".video-loader").hide(),$("#"+this.parent_id).find(".video-error").show(),this.reconnect_count<this.reconnect_max_count&&this.tryReconnect()}}},play:function(){this.state=this.STATES.PLAYING;try{webapis.avplay.play()}catch(e){}},pause:function(){this.state=this.STATES.PAUSED;try{webapis.avplay.pause()}catch(e){}},stop:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.stop()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},close:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.close()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_count+=1,this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{console.log("reconnect count=",this.reconnect_count),$("#"+this.parent_id).find(".video-reconnect-message").show(),this.state=this.STATES.STOPPED;var e=this;try{webapis.avplay.close()}catch(e){}this.reconnect_timer=setTimeout(function(){e.playAsync(e.url)},6e3)}},setDisplayArea:function(e,t){if(webapis&&webapis.avplay){var i=null,i="channel"==t?"#channel-page-video-lg":"#vod-series-player-video-lg";if(e)try{var s=$(this.videoObj).parent().width(),o=$(this.videoObj).parent().height();switch(e){case"1:1":$(i).css("object-fit","fill"),r=l=o;break;case"16:9":$(i).css("object-fit","fill"),l=o,r=Math.round(l*(16/9));break;case"4:3":$(i).css("object-fit","fill"),l=o,r=Math.round(l*(4/3));break;case"21:9":$(i).css("object-fit","fill"),r=window.innerWidth,l=Math.round(r*(9/21));break;case"stretch":$(i).css("object-fit","fill"),r=s,l=o;break;default:$(i).css("object-fit","contain"),r=s,l=o}var a=Math.round((s-r)/2),n=Math.round((o-l)/2);(s=$(this.videoObj).parent().width())<r&&(a-=(r-s)/2),webapis.avplay.setDisplayRect(Math.round(a),Math.round(n),Math.round(r),Math.round(l)),console.log("Samsung Display Rectangle:",{left:Math.round(a),top:Math.round(n),width:Math.round(r),height:Math.round(l)})}catch(e){console.log("Error in setDisplayRect",e)}else{var n=$(this.videoObj).offset().top,a=$(this.videoObj).offset().left,r=parseInt($(this.videoObj).width()),l=parseInt($(this.videoObj).height());webapis.avplay.setDisplayRect(a,n,r,l)}}else console.log("Samsung webapis.avplay is not available")},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},setupEventListeners:function(){var o=this;webapis.avplay.setListener({onbufferingstart:function(){$("#"+o.parent_id).find(".video-loader").show()},onbufferingprogress:function(e){},onbufferingcomplete:function(){$("#"+o.parent_id).find(".video-loader").hide()},onstreamcompleted:function(){$("#"+o.parent_id).find(".video-error").hide(),webapis.avplay.stop(),o.state=o.STATES.STOPPED,$("#"+o.parent_id).find(".progress-amount").css({width:"100%"}),"vod-series-player-video"===current_route&&vod_series_player.showNextVideo(1,!0)},oncurrentplaytime:function(e){o.current_time=e,$("#"+o.parent_id).find(".video-error").hide(),"vod-series-player-video"===current_route&&(vod_series_player.current_time=e/1e3),0<webapis.avplay.getDuration()&&($("#"+o.parent_id).find(".video-current-time").html(o.formatTime(e/1e3)),$("#"+o.parent_id).find(".video-progress-bar-slider").val(e/1e3).change())},ondrmevent:function(e,t){},onerror:function(e,t){$("#"+o.parent_id).find(".video-error").show()},onsubtitlechange:function(e,t,i,s){$("#"+o.parent_id).find(".subtitle-container").html(""),$("#"+o.parent_id).find(".subtitle-container").html(t)}})},onDeviceReady:function(){document.addEventListener("pause",this.onPause),document.addEventListener("resume",this.onResume)},onPause:function(){this.pause()},onResume:function(){this.play()},getSubtitleOrAudioTrack:function(t){var e=[];if("develop"==env)return e=[{extra_info:{fourCC:"un",subtitle_type:"0",track_lang:"un",index:3,type:"TEXT"}}];var i="",s="TEXT"===t?"track_lang":"language",o="TEXT"===t?"Subtitle ":"Track ";try{for(var a,n,r=webapis.avplay.getTotalTrackInfo(),l=0;l<r.length;l++)try{r[l].type==t&&(a=JSON.parse(r[l].extra_info),"TEXT"===t||"AUDIO"===t?(n=a[s].trim(),i.includes(n)||""===n?""===n&&(a[s]=o+(l+1),r[l].extra_info=a,e.push(r[l])):(i+=", "+n,a[s]=void 0!==language_codes[n]?language_codes[n]:n,r[l].extra_info=a,e.push(r[l]))):(r[l].extra_info=a,e.push(r[l])))}catch(e){console.log(t,e)}}catch(e){}return e},setSubtitleOrAudioTrack:function(e,t){try{webapis.avplay.setSelectTrack(e,t)}catch(e){}"TEXT"===e&&(-1==t?$("#"+this.parent_id+" .subtitle-container").hide():$("#"+this.parent_id+" .subtitle-container").show())}}:{id:"",videoObj:null,parent_id:"",current_time:0,STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},subtitles:[],tracks:[],reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",srt_map:{},movie_list_id:null,init:function(e,t){this.reconnect_count=0,this.url="",this.srt_map={},this.movie_list_id=null,e.includes("-lg")||(e+="-lg"),"lg"!=platform&&($("video").addClass("hide"),$("#"+e).removeClass("hide"),$("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden")),this.id=e,this.videoObj=null,this.parent_id=t,this.current_time=0,$("#"+t).find(".video-error").hide(),this.state=this.STATES.STOPPED,this.videoObj=document.getElementById(e),this.subtitles=[],this.tracks=[],$("#"+this.parent_id).find(".subtitle-container").html("").hide(),SrtOperation.deStruct();var s=this.videoObj,o=this,e=document.getElementById("channel-page-video"),i=document.getElementById("vod-series-player-video");e&&(e.onload=function(){$(this).css("visibility","visible")}),i&&(i.onload=function(){$(this).css("visibility","visible")}),this.videoObj.addEventListener("error",function(e){console.log("Error"),o.tryReconnect(),$("#"+o.parent_id).find(".video-error").show()}),this.videoObj.addEventListener("canplay",function(e){$("#"+o.parent_id).find(".video-error").hide(),"lg"!=platform&&($("#channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible"))}),this.videoObj.addEventListener("durationchange",function(e){}),this.videoObj.addEventListener("loadeddata",function(e){var t=parseInt(s.duration),i={min:0,max:t};$("#"+o.parent_id).find(".video-progress-bar-slider").attr(i),$("#"+o.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+o.parent_id).find(".video-total-time").text(o.formatTime(t)),"vod-series-player-video"===current_route&&vod_series_player.showResumeBar(),$("#"+o.parent_id).find(".video-reconnect-message").hide(),o.reconnect_count=0,clearTimeout(o.reconnect_timer)}),$("#"+t).find(".video-reconnect-message").hide(),this.videoObj.ontimeupdate=function(e){var t=o.videoObj.duration,i=o.videoObj.currentTime;0<t&&($("#"+o.parent_id).find(".video-progress-bar-slider").val(i).change(),$("#"+o.parent_id).find(".video-current-time").html(o.formatTime(i))),"vod-series-player-video"==current_route&&(vod_series_player.current_time=i,SrtOperation.timeChange(s.currentTime))},this.videoObj.addEventListener("loadedmetadata",function(){var e="No Information";try{var t=o.videoObj.videoWidth,i=o.videoObj.videoHeight;t&&i&&(e=t+" x "+i+"px")}catch(e){console.log(e)}console.log(e),$(".video-resolution").text(e)}),this.videoObj.addEventListener("waiting",function(e){}),this.videoObj.addEventListener("suspend",function(e){}),this.videoObj.addEventListener("stalled",function(e){console.log("Failed to fetch data, but trying.")}),this.videoObj.addEventListener("ended",function(e){"vod-series-player-video"===current_route&&vod_series_player.showNextVideo(1,!0)}),this.videoObj.addEventListener("emptied",function(e){})},playAsync:function(e){"lg"!=platform&&($("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden"));try{this.videoObj.pause()}catch(e){}console.log(e),this.url=e;var t=this;for($("#"+this.parent_id).find(".video-error").hide();this.videoObj.firstChild;)this.videoObj.removeChild(this.videoObj.firstChild);this.videoObj.load();var i=document.createElement("source");i.setAttribute("src",e),this.videoObj.appendChild(i),this.videoObj.addEventListener("playing",function e(){"lg"!=platform&&($("channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible")),this.removeEventListener("playing",e)}),this.videoObj.play(),$("#"+this.parent_id).find(".progress-amount").css({width:0}),i.addEventListener("error",function(e){$(".video-loader").hide(),$("#"+t.parent_id).find(".video-error").show(),t.tryReconnect()}),i.addEventListener("emptied",function(e){console.log("Empty"),$("#"+t.parent_id).find(".video-error").show()}),this.state=this.STATES.PLAYING},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_timer=null,this.reconnect_count+=1,console.log("here reconnecting",this.reconnect_count),this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{$("#"+this.parent_id).find(".video-reconnect-message").show();var e=this;try{this.videoObj.close()}catch(e){}this.reconnect_timer=setTimeout(function(){try{e.playAsync(e.url)}catch(e){console.log(e)}},6e3)}},play:function(){this.state=this.STATES.PLAYING,this.videoObj.play(),0<SrtOperation.srt.length&&(SrtOperation.stopped=!1)},setDisplayArea:function(e,t){if(e){$("video_element").css("object-fit","fill");var i,s=parseInt($(this.videoObj).height());switch(e){case"1:1":$("video_element").css("object-fit","fill"),i=s+"px";break;case"16:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(16/9))+"px";break;case"4:3":$("video_element").css("object-fit","fill"),i=Math.round(s*(4/3))+"px";break;case"21:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(21/9))+"px";break;case"stretch":$("video_element").css("object-fit","fill"),s=i="100%";break;default:$("video_element").css("object-fit","contain"),s=i="100%"}this.videoObj.style.width=i,this.videoObj.style.height=s,console.log("NEW height",s),console.log("NEW WIDTH",i)}},pause:function(){this.state=this.STATES.PAUSED;try{this.videoObj.pause()}catch(e){}},close:function(){try{this.videoObj.pause()}catch(e){}this.state=this.STATES.STOPPED,SrtOperation.deStruct(),this.subtitles=[],this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},seekTo:function(e){},getSubtitleOrAudioTrack:function(e){var i=[],s="TEXT"==e?0<media_player.videoObj.textTracks.length?media_player.videoObj.textTracks:{}:media_player.videoObj.audioTracks&&0<media_player.videoObj.audioTracks.length?media_player.videoObj.audioTracks:{};return console.log(s),0<Object.keys(s).length&&Object.keys(s).map(function(e,t){"object"==typeof s[e]&&null!=s[e]&&i.push(s[e])}),console.log(i),i},setSubtitleOrAudioTrack:function(e,t){if("TEXT"==e)-1==t?(SrtOperation.deStruct(),this.subtitles=[],$("#"+this.parent_id+" .subtitle-container").hide()):(this.subtitles[t]&&(e=this.subtitles[t].file_id.toString(),this.srt_map[e])&&SrtOperation.init(this.srt_map[e],media_player.videoObj.currentTime),$("#"+this.parent_id+" .subtitle-container").show());else{for(var i=0;i<this.videoObj.audioTracks.length;i++)this.videoObj.audioTracks[i].enabled=!1;this.videoObj.audioTracks[t].enabled=!0}}}}function convertProgrammeTimeToClientTime(e){e=moment(e,"YYYYMMDDHHmmss Z");return e.utc().add(client_offset,"minute"),e.format("Y-MM-DD HH:mm")}function getTodayDate(e){var t=new Date;return moment(t).format(e)}function calculateTimeDifference(e,t){e=new Date(e);time_difference_with_server=parseInt((1e3*t-e.getTime())/6e4)}function getLocalChannelTime(e){return moment(e).add(time_difference_with_server,"minute")}var vod_summary_page={keys:{focused_part:"action_selection",index:0,cast_selection:0},min_btn_index:0,favourite_action:0,action_btns:$(".vod-action-btn"),is_favourite:!1,is_protected:!1,is_loading:!1,is_trailer_exist:!0,prev_route:"",init:function(e){this.prev_route=e,this.favourite_action=0;var t,i=this,e=(showLoader(!0),this.is_loading=!0,$("#vod-summary-release-cast").siblings(".circle").hide(),$("#vod-summary-release-date").siblings(".circle").hide(),$("#vod-summary-release-director").siblings(".circle").hide(),$("#vod-summary-release-length").siblings(".circle").hide(),$("#vod-summary-release-genre").siblings(".circle").hide(),$("#vod-watch-trailer-button").hide(),$("#vod-watch-trailer-button-container").hide(),$("#vod-summary-release-date").text(""),$("#vod-summary-release-genre").text(""),$("#vod-summary-release-length").text(""),$("#vod-summary-release-age").text(""),$("#vod-summary-release-director").text(""),$("#vod-summary-release-cast").text(""),$("#vod-summary-description").text(""),this.hoverButton(0),$("#vod-summary-image-wrapper img").attr("src",""),$("#vod-summary-name").text(current_movie.name),$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#vod-summary-image-wrapper img").attr("src",current_movie.stream_icon||HOST+"app_src_min/images/default_movie.png"),this.is_favourite=!VodModel.favourite_ids.includes(current_movie.stream_id),this.toggleFavourite(),VodModel.favourite_ids.includes(current_movie.stream_id)?($($(".vod-action-btn")[2]).data("action","remove"),$($(".vod-action-btn")[2]).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')):($($(".vod-action-btn")[2]).data("action","add"),$($(".vod-action-btn")[2]).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')),0),e=void 0===current_movie.rating||""===current_movie.rating?0:parseFloat(current_movie.rating),e=(isNaN(e)&&(e=0),$("#vod-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#vod-rating-mark").text(e.toFixed(1)),current_movie.youtube_trailer="",current_route="vod-summary-page",$("#vod-series-page").addClass("hide"),$("#vod-series-player-page").addClass("hide"),$("#player-movies-modal").modal("hide"),$("#search-page").hide(),$("#vod-summary-page").removeClass("hide"),this.min_btn_index=0,current_movie.info={},current_movie.summary_downloaded=!1,console.log("PLAYLIST TYPe",settings.playlist.playlist_type),"xc"===settings.playlist.playlist_type||"xc"==settings.playlist.playlist_type?(console.log("GETTING TMDB"),$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+current_movie.stream_id,function(e){console.log("Got TMDB"),t=e.info,i.fillVodSummaryData(e,t);e=t.tmdb_id||t.tmdb;t.backdrop_path&&0<t.backdrop_path.length?i.fetchMovieImages(e,t.backdrop_path[0]):i.fetchMovieImages(e,HOST+"app_src_min/images/default_movie_bg.png"),i.fetchCast(e),showLoader(!1),i.is_loading=!1},function(e){showLoader(!1),i.is_loading=!1})):(showLoader(!1),this.is_loading=!1),vod_series_page.categories[vod_series_page.keys.category_selection]);this.is_protected=VodModel.isProtected(e),console.log("This movie is protected?",this.is_protected)},goBack:function(){var e,t,i;$("#vod-summary-page").addClass("hide"),current_route=this.prev_route,"vod-series-page"===this.prev_route?($("#vod-series-page").removeClass("hide"),t=vod_series_page.keys,e=vod_series_page.menu_doms,this.is_favourite?0==$(e[t.menu_selection]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$($(e[t.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),i=vod_series_page.categories[t.category_selection],e=vod_series_page.menu_doms,"favourite"===i.category_id?(this.is_favourite||(vod_series_page.menu_selection=0,vod_series_page.keys.focused_part="category_selection",vod_series_page.toggleCategoriesBar(!0),vod_series_page.hoverCategory(vod_series_page.category_doms[vod_series_page.keys.category_selection]),vod_series_page.showCategoryContent(!0),$(e[t.menu_selection]).remove()),t.focused_part="category_selection",$(vod_series_page.category_doms[t.category_selection]).addClass("active")):$($(e[t.menu_selection]).find(".favourite-badge")).remove()),vod_series_page.updateFavouriteOrRecentCount("favourite")):"search-page"===this.prev_route&&($("#search-page").show(),current_route="search-page",e=search_page.movie_doms[1],i=(t=search_page.keys).hor_keys[1],this.is_favourite?0==$(e[i]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$(e[i]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),$($(e[i]).find(".favourite-badge")).remove()))},fetchMovieImages:function(e,t,i){var s;e&&0!=e&&null!=e&&vod_series_page.isTMDBAllowed?$.getJSON(tmdb_prefix_url+("/movie/"+e+"/images?api_key="+tmdb_api_key),function(e){0<e.backdrops.length&&(t=tmdb_img_url+"w1280"+e.backdrops[0].file_path),(s=0<e.logos.length?tmdb_img_url+"w500"+e.logos[0].file_path:s)?($("#vod-summary-log-title").attr("src",s).show(),$("#vod-summary-name").hide()):($("#vod-summary-log-title").hide(),$("#vod-summary-name").show());try{$("#movie-image").attr("src",t).show(),$(".vod-series-summary-section-img-darken").show()}catch(e){showImg($(".vod-series-background-img"))}i&&i()}):i&&i()},fetchCast:function(e,i){$("#vod-summary-cast").hide(),vod_series_page.isTMDBAllowed&&e&&0!=e&&null!=e&&$.getJSON(tmdb_prefix_url+("/movie/"+e+"/credits?api_key="+tmdb_api_key),function(e){var t;0<e.cast.length&&(t="",e.cast.forEach(function(e){t+='<div class="cast-member" onmouseenter="vod_summary_page.hoverCastMember('+e.order+')"><img src="'+(e.profile_path?tmdb_img_url+"w500"+e.profile_path:HOST+"app_src_min/images/avater.svg")+'" alt="'+e.name+'" class="cast-image"><span class="cast-name">'+e.name+"</span></div>"}),$("#vod-summary-cast #cast-container").html(t),$("#vod-summary-cast").show()),i&&i()})},fillVodSummaryData:function(e,t){$("#vod-summary-release-date").text(t.releasedate),t.releasedate&&$("#vod-summary-release-date").siblings(".circle").show(),$("#vod-summary-release-genre").text(t.genre),t.genre&&$("#vod-summary-release-genre").siblings(".circle").show(),$("#vod-summary-release-length").text(t.duration),t.duration&&$("#vod-summary-release-length").siblings(".circle").show();var i,s={},o=(VodModel.saved_video_times.forEach(function(e){s[e.stream_id.toString()]=e}),s[current_movie.stream_id]),o=o?utilities.getPercentage(o.time,o.duration):0;0<o?($("#vod-watch-movie-button").addClass("continue"),$("#vod-summary-watched-bar").css("width",o+"%"),$("#vod-summary-progress-percentage").text(o+"%"),$("#vod-watch-movie-btn-text").attr("data-word_code","continue_watching"),null!=typeof current_words.continue_watching?$("#vod-watch-movie-btn-text").text(current_words.continue_watching):$("#vod-watch-movie-btn-text").text("Continue Watching.")):($("#vod-watch-movie-button").removeClass("continue"),$("#vod-watch-movie-btn-text").attr("data-word_code","start_watching"),null!=typeof current_words.start_watching?$("#vod-watch-movie-btn-text").text(current_words.start_watching):$("#vod-watch-movie-btn-text").text("Start Watching.")),$("#vod-summary-release-age").text(t.age),$("#vod-summary-release-director").text(t.director),t.director&&$("#vod-summary-release-director").siblings(".circle").show(),$("#vod-summary-release-cast").text(t.cast),t.cast&&$("#vod-summary-release-cast").siblings(".circle").show(),$("#vod-summary-description").text(t.plot),(current_movie.info=t).tmdb_id&&(current_movie.tmdb_id=t.tmdb_id),current_movie.summary_downloaded=!0;try{(i=t.backdrop_path[0]||HOST+"app_src_min/images/default_movie_bg.png")&&$(".vod-series-background-img").attr("src",i).show()}catch(e){$(".vod-series-background-img").attr("src",HOST+"app_src_min/images/default_movie_bg.png").show()}$(".vod-series-background-img-overlay").show(),current_movie.youtube_trailer=e.info.youtube_trailer,void 0!==t.youtube_trailer&&null!=t.youtube_trailer&&""!==t.youtube_trailer.trim()?(this.is_trailer_exist=!0,this.min_btn_index=0,$("#vod-watch-trailer-button").show(),$("#vod-watch-trailer-button-container").show(),vod_summary_page.playTrailerVideo(e.info.youtube_trailer)):(this.is_trailer_exist=!1,$("#vod-watch-trailer-button").hide(),$("#vod-watch-trailer-button-container").hide())},showTrailerVideo:function(){""===current_movie.youtube_trailer||null==current_movie.youtube_trailer?($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")):trailer_page.init(current_movie.youtube_trailer,current_route)},showMovie:function(){$("#vod-summary-page").addClass("hide"),vod_series_player.makeEpisodeDoms("vod-summary-page"),vod_series_player.init(current_movie,"movie","vod-summary-page","",!0)},toggleFavourite:function(){var e;this.is_protected&&!this.is_favourite?showToast("Parental Safety","Adding protected content to favourites is not allowed."):(e=this.action_btns[2],this.is_favourite=!this.is_favourite,this.is_favourite?$(e).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'):$(e).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'))},hoverButton:function(e){var t=this.keys;t.index=e,t.focused_part="action_selection",$(".cast-member").removeClass("active"),$(".vod-action-btn").removeClass("active"),$($(".vod-action-btn")[t.index]).addClass("active")},hoverCastMember:function(e){var t=this.keys;t.focused_part="cast_selection",t.cast_selection=e,$(".vod-action-btn").removeClass("active"),$(".cast-member").removeClass("active"),$($(".cast-member")[t.cast_selection]).addClass("active"),moveScrollPosition($("#cast-container"),$($(".cast-member")[t.cast_selection])[0],"horizontal",!1,!1,!0)},keyClick:function(){var e=this.keys,e=$(".vod-action-btn")[e.index];$(e).trigger("click")},handleMenuLeftRight:function(e){var t,i=this.keys;switch(i.focused_part){case"action_selection":var s=this.min_btn_index;i.index+=e,this.is_trailer_exist||(i.index+=e),i.index<s&&(i.index=2),2<i.index&&(i.index=s),this.hoverButton(i.index);break;case"cast_selection":i.cast_selection+=e,$(".cast-member")&&(t=$(".cast-member").length),i.cast_selection<0&&(i.cast_selection=0),i.cast_selection>=t&&(i.cast_selection=t-1),this.hoverCastMember(i.cast_selection);break;default:this.hoverButton(1)}},HandleKey:function(e){var t=this.keys;if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.hoverButton(t.index);break;case tvKey.DOWN:this.hoverCastMember(t.cast_selection);break;case tvKey.ENTER:this.keyClick();break;case tvKey.YELLOW:this.toggleFavourite()}},playTrailerVideo:function(e){}},vod_series_player={player:null,back_url:"",show_control:!1,timeOut:null,has_episodes:!1,keys:{focused_part:"control_bar",control_bar:0,info_bar:0,operation_modal:0,subtitle_audio_selection_modal:0,audio_selection_modal:0,aspect_ratio_selection:0,prev_focus:"",resume_bar:0,episode_selection:0,subtitle_adjust_selection:0,leave_popup_selection:1},current_subtitle_index:-1,current_audio_track_index:-1,subtitle_audio_menus:[],forwardTimer:null,current_time:0,show_subtitle:!1,show_audio_track:!1,video_control_doms:$("#vod-series-video-controls-container .video-control-icon i"),video_info_doms:$("#vod-series-video-controls-container .video-info-btn"),vod_info_timer:null,current_movie:{},resume_time:0,resume_timer:null,episode_doms:[],resume_bar_doms:$("#video-resume-modal .resume-action-btn"),seek_timer:null,seek_interval_timer:null,current_movie_type:"",video_duration:0,last_key_time:0,slider_element:$("#vod-series-video-progressbar-container .video-progress-bar-slider")[0],subtitle_loading:!1,subtitle_loaded:!1,fw_timer:null,subtitle_adjust_items:$(".subtitle-adjust-item"),subtitle_adjust_time:0,aspect_ratio_doms:$("#aspect-ratio-modal-body div"),showNextVideo_debounce:!1,init:function(e,t,i,s,o){this.current_movie=e,this.current_time=0,this.video_duration=0,this.fw_timer=null,this.subtitle_adjust_time=0,$("#vod-summary-page").addClass("hide"),$("#series-summary-page").addClass("hide"),$("#vod-series-player-page").removeClass("hide"),this.current_movie_type=t,this.showControlBar(o),o&&this.makeEpisodeDoms();var a,n,r,o=$(this.video_control_doms[2]),l=($(o).removeClass("fa-play"),$(o).addClass("fa-pause"),$("#vod-series-player-page").find(".video-current-time").text("--:--"),$("#vod-series-player-page").find(".video-total-time").text("--:--"),this),o=this.slider_element;$(o).attr({min:0,max:100}),$(o).rangeslider({polyfill:!1,rangeClass:"rangeslider",onSlideEnd:function(e,t){l.sliderPositionChanged(t)}}),$(o).val(0).change(),$(o).rangeslider("update"),clearTimeout(this.resume_timer),"movie"===t?("xc"===settings.playlist.playlist_type?a=getMovieUrl(e.stream_id,"movie",e.container_extension):"type1"===settings.playlist.playlist_type&&(a=e.url),$("#vod-series-video-title").html(e.name)):"series"===t?("xc"===settings.playlist.playlist_type?a=getMovieUrl(e.id,"series",e.container_extension):"type1"===settings.playlist.playlist_type&&(a=e.url),$("#vod-series-video-title").html(e.title)):"epg"===t&&(o="channel-page"===i?(a=s,getAtob((n=channel_page.programmes[channel_page.keys.epg_selection]).title)+"  <span class='player-epg-title-time'>"+n.start.substr(11)+"~"+n.stop.substr(11)+"</span>"):(n=this.current_movie,a=LiveModel.getProgrammeVideoUrl(epg_page.movie.stream_id,n,!0).url,getAtob(n.title)+"  <span class='player-epg-title-time'>"+n.start.substr(11)+"~"+n.stop.substr(11)+"</span>"),$("#vod-series-video-title").html(o)),this.back_url=i;try{media_player.close()}catch(e){}try{media_player.init("vod-series-player-video","vod-series-player-page"),media_player.setDisplayArea()}catch(e){}try{media_player.playAsync(a)}catch(e){}if(r="movie"===t?"stream_id":"id",this.resume_time=0,"movie"===t||"series"===t)if(r=e[r].toString(),"movie"===t){for(var c=VodModel.saved_video_times,d=this.resume_time=0;d<c.length;d++)if(c[d].stream_id==r){this.resume_time=c[d].time;break}}else if("series"===t)for(c=SeriesModel.saved_video_times,d=0;d<c.length;d++)if(c[d].stream_id==current_series.series_id){var h=c[d].video_times,_=series_summary_page.keys.episode_selection.toString(),u=series_summary_page.current_season_index.toString();if(h[u]&&h[u][_]){this.resume_time=h[u][_].time;break}}current_route="vod-series-player-video",this.current_subtitle_index=-1,this.current_audio_track_index=-1,this.show_subtitle=!1},sliderPositionChanged:function(e){this.hoverSlider(),media_player.videoObj.currentTime=e,this.current_time=e,$(this.slider_element).val(e).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(e))},makeEpisodeDoms:function(){var e,s;this.keys.episode_selection=0,"series"===this.current_movie_type?(e=current_season.episodes,this.episodes=e,this.has_episodes=!0,s="",e.map(function(e,t){var i;e.info.movie_image?i=e.info.movie_image:series_summary_page.current_series_backdrop_image&&(i=series_summary_page.current_series_backdrop_image),s+='<div class="player-season-item"                        onclick="vod_series_player.showSelectedEpisode()"                        onmouseenter="vod_series_player.hoverEpisode('+t+')"                    >                        <div class="player-episodes-image-container">                            <img src="'+i+'" />                        </div>                        <div class="player-episode-title-container">                            <div class="player-episode-number">'+(t+1)+'</div>                             <div class="player-episode-title max-line-2">'+e.title+"</div>                        </div>                    </div>"}),$("#player-seasons-container").html(s),this.episode_doms=$(".player-season-item"),$("#player-seasons-container").removeClass("expanded"),$("#player-seasons-container").show()):(this.has_episodes=!1,$("#player-seasons-container").html(""),this.episode_doms=$(".player-season-item"),this.episode_doms=[],$("#player-seasons-container").hide())},showResumeBar:function(){var e,t=this.keys;0<this.resume_time&&("resume_bar"!==t.focused_part&&(t.prev_focus=t.focused_part),e="lg"===platform?1:1e3,e=media_player.formatTime(this.resume_time/e),$("#vod-resume-time").text(e),$("#video-resume-modal").show(),this.hideControlBar(),clearTimeout(this.resume_timer),this.resume_timer=null,"resume_bar"!=t.focused_part&&(t.prev_focus=t.focused_part),"subtitle_audio_selection_modal"!=t.focused_part?this.hoverResumeBtn(0):(this.hoverResumeBtn(0),t.focused_part="subtitle_audio_selection_modal",t.prev_focus="resume_bar"))},Exit:function(){this.saveVideoTime(),current_route=this.back_url;try{media_player.close()}catch(e){console.log(e)}$("#"+media_player.parent_id).find(".video-error").hide(),$("#"+media_player.parent_id).find(".subtitle-container").text(""),$("#vod-series-player-page").addClass("hide")},saveVideoTime:function(){try{var e,t,i,s;if("samsung"===platform){s=i=1e4;try{e=webapis.avplay.getCurrentTime(),t=webapis.avplay.getDuration()}catch(e){}}else"lg"===platform&&(s=10,e=media_player.videoObj.currentTime,t=media_player.videoObj.duration,i=10);"develop"===env&&(t=(e=25e3)+5e4*Math.random());var o,a,n,r=this.current_movie;if(i<=t-e&&s<=e){if("movie"===this.current_movie_type){if(checkForAdult(r,"movie",o=VodModel.getCategories(!0,!1)))return;VodModel.saveVideoTime(r.stream_id,e,t),VodModel.addToWatchList(r),"vod-series-page"===this.back_url&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").addClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-progress").css({width:e/t*100+"%"}),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress"))}"series"===this.current_movie_type&&(o=SeriesModel.getCategories(!0,!1),checkForAdult(current_series,"movie",o)||(a=SeriesModel.saveVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection,e,t),SeriesModel.addToWatchList(current_series),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-duration").addClass("has-progress"),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-progress").css({width:e/t*100+"%"}),series_summary_page.series_video_times=a,"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress")))}else t-e<i&&("movie"===this.current_movie_type&&(VodModel.removeVideoTime(r.stream_id),"vod-series-page"===this.back_url)&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").removeClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress")),"series"===this.current_movie_type)&&((n=SeriesModel.removeVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection))[0]&&"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress"),series_summary_page.series_video_times=n[1])}catch(e){console.log("here error",e)}},goBack:function(){$(".modal").modal("hide");var e=this.keys;console.log(e.focused_part),"resume_bar"===e.focused_part&&($("#video-resume-modal").hide(),"resume_bar"!=e.prev_focus?e.focused_part=e.prev_focus:e.focused_part="info_bar",clearTimeout(this.resume_timer)),"leave_popup_selection"==e.focused_part?this.hideLeavePopup():this.show_control?this.hideControlBar():"control_bar"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part&&"slider"!==e.focused_part||this.showLeavePopup(),"subtitle_audio_selection_modal"===e.focused_part&&(e.focused_part="control_bar",$("#subtitle-selection-modal").modal("hide")),"vod_info"===e.focused_part&&($("#vod-video-info-container").hide(),clearTimeout(this.vod_info_timer),e.focused_part=e.prev_focus),"subtitle_adjust_selection"===e.focused_part&&($("#subtitle-time-adjust-modal").hide(),e.focused_part="control_bar"),"aspect_ratio_modal"===e.focused_part&&($("aspect-ratio-modal").modal("hide"),e.focused_part=e.prev_focus)},playPauseVideo:function(e){this.showControlBar(!1);var t=this.video_control_doms,i=$(t[2]);switch(e){case"pause":if(media_player.state===media_player.STATES.PLAYING)try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}break;case"play":if(media_player.state===media_player.STATES.PAUSED)try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}break;default:if(media_player.state===media_player.STATES.PAUSED){console.log("We are in pause state, will play");try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}}else if(media_player.state===media_player.STATES.PLAYING){console.log("We are in playing state, will pause");try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}}}},seekTo:function(e){if("samsung"===platform){var t=(new Date).getTime()/1e3;if(!(t-this.last_key_time<.1)){if(this.last_key_time=t,0===this.current_time&&(this.current_time=media_player.current_time/1e3),0!=this.video_duration)i=this.video_duration;else try{i=webapis.avplay.getDuration()/1e3,this.video_duration=i}catch(e){this.video_duration=i=0}if(i)if((s=this.current_time+e)<0)this.showNextVideo(-1);else if(i<=s)this.showNextVideo(1);else{if(this.current_time=s,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)),$(this.slider_element).val(s).change(),clearTimeout(this.seek_timer),media_player.state===media_player.STATES.PLAYING)try{media_player.pause()}catch(e){}$("#"+media_player.parent_id).find(".video-loader").show(),this.seek_timer=setTimeout(function(){webapis.avplay.seekTo(1e3*s),setTimeout(function(){try{media_player.play()}catch(e){}},200)},500)}}}else{var i,s;0===this.current_time&&(this.current_time=media_player.videoObj.currentTime),(i=media_player.videoObj.duration)<=(s=(s=this.current_time+e)<0?0:s)&&(s=i),this.current_time=s,media_player.videoObj.currentTime=s,0<i&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),SrtOperation.stopOperation(),this.fw_timer&&(clearTimeout(this.fw_timer),this.fw_timer=null),this.fw_timer=setTimeout(function(){SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1},200),$(this.slider_element).val(s).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)))}},showSelectedEpisode:function(){var e=series_summary_page.keys,t=this.keys,i=series_summary_page.episode_doms;if(e.episode_selection!=t.episode_selection){this.saveVideoTime(),$(i).removeClass("active"),e.episode_selection=t.episode_selection,$(i[e.episode_selection]).addClass("active");i=this.episodes[t.episode_selection];this.resume_time=0;try{media_player.close()}catch(e){}current_episode=i,this.init(current_episode,"series","episode-page","",!1),this.hoverEpisode(t.episode_selection)}},showNextVideo:function(e){if(!this.showNextVideo_debounce){this.showNextVideo_debounce=!0;var t=this;switch(setTimeout(function(){t.showNextVideo_debounce=!1},1e3),this.saveVideoTime(),this.resume_time=0,this.back_url){case"vod-series-page":var i=vod_series_page.menu_doms;(s=vod_series_page.keys).menu_selection+=e,s.menu_selection<0?s.menu_selection=0:s.menu_selection>=vod_series_page.movies.length?s.menu_selection=vod_series_page.movies.length-1:($(i).removeClass("active"),$(i[s.menu_selection]).addClass("active"),current_movie=vod_series_page.movies[s.menu_selection],this.init(current_movie,"movie","vod-series-page","",!1));break;case"home-page":var s=home_page.keys;if("movie"===this.current_movie_type){if(o=home_page.keys.latest_movie_selection+e,i=home_page.latest_movies,o<0)return;if(o>=i.length)return this.hideControlBar(),void this.goBack();s.latest_movie_selection=o,current_movie=home_page.latest_movies[o],this.init(current_movie,"movie","home-page","",!1)}break;case"episode-page":var o,s=series_summary_page.keys,i=series_summary_page.episode_doms;$(i).removeClass("active"),s.episode_selection+=e,s.episode_selection<0?s.episode_selection=0:s.episode_selection>=i.length?s.episode_selection=i.length-1:($(i[s.episode_selection]).addClass("active"),o=current_season.episodes,current_episode=o[s.episode_selection],this.init(current_episode,"series","episode-page","",!1));break;case"channel-page":i=channel_page.keys.epg_selection;(i+=e)<0||i>=channel_page.programmes.length||(channel_page.keys.epg_selection=i,channel_page.showEpgVideo());break;case"search-page":(s=search_page.keys).hor_keys[1]+=e,s.hor_keys[1]<0?s.hor_keys[1]=0:(o=search_page.filtered_movies[1],s.hor_keys[1]>=o.length?s.hor_keys[1]=o.length-1:(this.saveVideoTime(),current_movie=o[s.hor_keys[1]],this.init(current_movie,"movie","search-page","",!1)));break;case"catch-up-detail":(s=epg_page.keys).programme_selection+=e,s.programme_selection<0?s.programme_selection=0:s.programme_selection>=epg_page.programme_doms.length?s.programme_selection=epg_page.programme_doms.length-1:this.init(epg_page.current_programmes[s.programme_selection],"epg","catch-up-detail",!1)}}},showControlBar:function(e){$("#vod-series-video-controls-container").slideDown(),$("#vod-series-video-title").slideDown(),this.show_control=!0;var t=this;e&&(this.hoverVideoControlIcon(2),$("#player-seasons-container").removeClass("expanded")),clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){t.hideControlBar()},1e4)},hideControlBar:function(){$("#vod-series-video-controls-container").slideUp(),$("#vod-series-video-title").slideUp(),this.show_control=!1},makeMediaTrackElement:function(e,t){var s,i,o="",a=0;return"TEXT"===t&&(a=1,o='<div class="modal-operation-menu-type-2 subtitle-item"                    onmouseenter="vod_series_player.hoverSubtitle(0)"                     onclick="vod_series_player.handleMenuClick()"                 >                   <input class="magic-radio" type="radio" name="radio" id="disable-subtitle" value="-1">                   <label for="disable-subtitle">Disabled</label>                </div>'),"samsung"===platform?(s="TEXT"!==t?"language":"track_lang",e.map(function(e,t){var i=e.extra_info;o+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player.hoverSubtitle('+(t+a)+')"                     onclick="vod_series_player.handleMenuClick()"                 >                    <input class="magic-radio" type="radio" name="radio"                        value="'+e.index+'"                    >                    <label>'+i[s]+"</label>                </div>"})):(i="TEXT"===t?"Subtitle ":"Track ",e.map(function(e,t){e=e.language;e?language_codes[e]&&(e=language_codes[e]):e=i+(t+1),o+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player.hoverSubtitle('+(t+a)+')"                         onclick="vod_series_player.handleMenuClick()"                     >                        <input class="magic-radio" type="radio" name="radio"                            value="'+t+'">                        <label>'+e+"</label>                    </div>"})),o},showSubtitleAudioModal:function(e){this.hideControlBar();var t,i,s,o=this.keys;try{$("#subtitle-loader-container").hide(),this.subtitle_loading=!1,"samsung"!==platform&&"TEXT"===e?this.subtitle_loaded?0<media_player.subtitles.length?this.renderSubtitles(e,media_player.subtitles):this.showEmptySubtitleMessage(e):($("#subtitle-selection-container").html(""),"subtitle_audio_selection_modal"!==o.focused_part&&(o.prev_focus=o.focused_part),this.hoverSubtitle(-2),this.subtitle_loading=!0,$("#subtitle-selection-modal").modal("show"),$("#subtitle-loader-container").show(),i=settings.playlist.playlist_type,s=this.current_movie,"movie"===this.current_movie_type?s.tmdb_id?this.getSubtitlesForLG():s.tmdb?(s.tmdb_id=s.tmdb,this.getSubtitlesForLG()):"xc"!==i||s.summary_downloaded?this.getTmdbID(s,"movie"):this.getMovieDetail():(console.log(current_series),current_series.tmdb||current_series.info&&current_series.info.tmdb||s.info&&s.info.tmdb_id?this.getSubtitlesForLG():this.getTmdbID(current_series,"series"))):0<(t=media_player.getSubtitleOrAudioTrack(e)).length?this.renderSubtitles(e,t):showToast("Sorry","TEXT"===e?"No Subtitles exists":"No Audios exists")}catch(e){console.log(e),$("#vod-series-player-operation-modal").modal("hide"),showToast("Sorry","Video not loaded yet")}},showAspectRatioMenu:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="aspect_ratio_modal",this.hideControlBar(),$("#aspect-ratio-modal").modal("show")},getMovieDetail:function(){var t=this,i=this.current_movie;"xc"===settings.playlist.playlist_type&&$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+i.stream_id,function(e){e=e.info;t.current_movie.info=e,i.summary_downloaded=!0,e.tmdb_id?(t.current_movie.tmdb_id=e.tmdb_id,t.getSubtitlesForLG()):t.getTmdbID(i,"movie")},function(e){console.log(e),t.getTmdbID(i,"movie")})},getTmdbID:function(r,l){var e="movie"===l?r.info&&(r.info.o_name||r.info.name)||r.name:(r.info&&r.info.name?r.info:r).name,e=getRealMovieName(e),c=e.name.toLowerCase(),e=(e.year,e.country,tmdb_prefix_url+("movie"===l?"/search/movie":"/search/tv")+"?api_key="+tmdb_api_key+"&query="+c),d=this;$.ajax({method:"get",url:e,success:function(e){if(e.results&&0<e.results.length){var t=e.results;if(console.log(e),1==t.length)"movie"===l?d.current_movie.tmdb_id=t[0].id:current_series.tmdb=t[0].id,d.getSubtitlesForLG();else if("movie"===l){e=r.info;if(e&&e.releasedate){for(var i=e.releasedate,s=0;s<t.length;s++)if(t[s].release_date===i){d.current_movie.tmdb_id=t[s].id;break}}else{for(var o=0,s=0;s<t.length;s++)c.includes(t[s].title.toLowerCase())&&(o++,a=s);1==o&&(console.log(t[a]),d.current_movie.tmdb_id=t[a].id)}d.current_movie.tmdb_id?d.getSubtitlesForLG():d.showEmptySubtitleMessage("TEXT")}else{console.log("here series tmdb api results",t);for(var a,o=0,n=current_series.plot?current_series.plot.toLowerCase().trim():"",s=0;s<t.length;s++)if((c.includes(t[s].name.toLowerCase())||c.includes(t[s].original_name.toLowerCase()))&&(o++,a=s,n)&&n==t[s].overview.toLowerCase().trim()){console.log("here same overview"),o=1;break}1==o?(console.log(t[a]),current_series.tmdb=t[a].id,d.getSubtitlesForLG()):d.showEmptySubtitleMessage("TEXT")}}else d.showEmptySubtitleMessage("TEXT")},error:function(e){d.showEmptySubtitleMessage("TEXT")}})},getSubtitlesForLG:function(){var e,t,i,s=this;"movie"===this.current_movie_type?e={tmdb_id:this.current_movie.tmdb_id}:(t=current_season.episodes[series_summary_page.keys.episode_selection],current_series.tmdb?i=current_series.tmdb:current_series.info&&current_series.info.tmdb&&(i=current_series.info.tmdb),i?(e={movie_type:"episode",season_number:current_season.season_number||series_summary_page.keys.season_selection+1,episode_number:t.episode_num||series_summary_page.keys.episode_selection+1,tmdb_id:i},t.info&&t.info.tmdb_id&&(e.episode_tmdb_id=t.info.tmdb_id)):t.info&&t.info.tmdb_id&&(e={movie_type:"episode",episode_tmdb_id:t.info.tmdb_id})),$.ajax({method:"post",url:"https://ibosub.com/api/get-subtitles-update",data:e,dataType:"json",success:function(e){s.subtitle_loading=!1,s.subtitle_loaded=!0,$("#subtitle-loader-container").hide(),"success"===e.status&&(0<e.subtitles.length?(media_player.subtitles=e.subtitles,media_player.srt_map=e.srt_map,media_player.movie_list_id=e.movie_list_id,s.renderSubtitles("TEXT",media_player.subtitles)):s.showEmptySubtitleMessage("TEXT"))},error:function(e){s.showEmptySubtitleMessage("TEXT")}})},renderSubtitles:function(e,t){var i,s,o=this,a=this.keys;0<t.length&&("subtitle_audio_selection_modal"!=a.focused_part&&(a.prev_focus=a.focused_part),"TEXT"==e?$("#subtitle-modal-title").text("Subtitle"):$("#subtitle-modal-title").text("Audio Track"),a.focused_part="subtitle_audio_selection_modal",$("#subtitle-selection-modal .modal-operation-menu-type-2").removeClass("active"),a=this.makeMediaTrackElement(t,e),$("#subtitle-selection-container").html(a),$("#subtitle-selection-modal").modal("show"),i=$("#subtitle-selection-modal .subtitle-item"),this.subtitle_audio_menus=i,$(i[0]).find("input").prop("checked",!0),this.hoverSubtitle(0),s="TEXT"===e?this.current_subtitle_index:this.current_audio_track_index,this.subtitle_audio_menus.map(function(e,t){t=parseInt($(t).find("input").val());console.log(t),t==s&&(console.log("here"+s),$(i).find("input").prop("checked",!1),$(i[e]).find("input").prop("checked",!0),o.hoverSubtitle(e))}),t=$("#subtitle-selection-modal").find(".modal-btn-2"),$(t).removeClass("active"))},showEmptySubtitleMessage:function(e){$("#subtitle-selection-modal").modal("hide"),"TEXT"===e?(this.subtitle_loaded=!1,this.subtitle_loading=!1,media_player.subtitles=[],showToast("Sorry","No Subtitles exists")):showToast("Sorry","No Audios exists");e=this.keys;"subtitle_audio_selection_modal"==e.focused_part&&(e.focused_part=e.prev_focus)},cancelSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},confirmSubtitle:function(){if($("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,$("#subtitle-modal-title").text().toLowerCase().includes("subtitle")){var t,i=this;this.current_subtitle_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val(),-1==this.current_subtitle_index||"samsung"==platform||(t=media_player.subtitles[this.current_subtitle_index].file_id.toString(),media_player.srt_map[t])?this.subtitleChanged():$.ajax({method:"post",url:"https://ibosub.com/api/get-single-subtitle-content",data:{movie_list_id:media_player.movie_list_id,file_id:t},dataType:"json",success:function(e){"success"===e.status&&(media_player.srt_map[t]=e.content,i.subtitleChanged())},error:function(e){showToast("Sorry","Something error caused while downloading subtitles for current language, please try again later")}})}else{this.current_audio_track_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val();try{media_player.setSubtitleOrAudioTrack("AUDIO",parseInt(this.current_audio_track_index))}catch(e){}console.log(this.current_audio_track_index)}},subtitleChanged:function(){try{this.show_subtitle=!0,media_player.setSubtitleOrAudioTrack("TEXT",parseInt(this.current_subtitle_index))}catch(e){}},removeAllActiveClass:function(){$(this.video_control_doms).removeClass("active"),$(this.video_info_doms).removeClass("active"),$(this.video_control_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$("#vod-series-player-page .rangeslider").removeClass("active")},showSubtitleAdjustModal:function(){var e=this.keys;this.hideControlBar(),"subtitle_adjust_selection"!=e.focused_part&&(e.prev_focus=e.focused_part),$("#subtitle-adjust-time").val(this.subtitle_adjust_time),$("#subtitle-time-adjust-modal").show(),this.hoverSubtitleAdjustBtn(0)},saveSubtitleAdjustTime:function(){var e=(e=$("#subtitle-adjust-time").val())||0;this.subtitle_adjust_time!=e&&(this.subtitle_adjust_time=e,SrtOperation.srt)&&0<SrtOperation.srt.length&&(SrtOperation.setTimeDifference(e),SrtOperation.stopOperation(),SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1),this.goBack()},hoverSubtitleAdjustBtn:function(e){var t=this.keys;t.focused_part="subtitle_adjust_selection",t.subtitle_adjust_selection=e,$(this.subtitle_adjust_items).removeClass("active"),$(this.subtitle_adjust_items[e]).addClass("active")},hoverSubtitle:function(e){var t=this.keys;t.focused_part="subtitle_audio_selection_modal",$(this.subtitle_audio_menus).removeClass("active"),0<=e?(t.subtitle_audio_selection_modal=e,t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2&&moveScrollPosition($("#subtitle-selection-container"),this.subtitle_audio_menus[t.subtitle_audio_selection_modal],"vertical",!1)):t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length+e,$(this.subtitle_audio_menus[t.subtitle_audio_selection_modal]).addClass("active")},hoverSlider:function(){$("#player-seasons-container").removeClass("expanded"),this.removeAllActiveClass(),this.keys.focused_part="slider",$("#vod-series-player-page .rangeslider").addClass("active")},hoverVideoControlIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1),this.removeAllActiveClass();var t=this.keys;t.focused_part="control_bar",t.control_bar=e,$(this.video_control_doms[e]).addClass("active")},hoverVideoInfoIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="info_bar",t.info_bar=e,$(this.video_info_doms[e]).addClass("active")},hoverEpisode:function(e){$("#player-seasons-container").addClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="episode_selection",t.episode_selection=e,$(this.episode_doms[e]).addClass("active"),moveScrollPosition($("#player-seasons-container"),this.episode_doms[t.episode_selection],"horizontal",!1)},hoverAspectRatioItem:function(e){var t=this.keys;"aspect_ratio_modal"!=t.focused_part&&(t.prev_focus=t.focused_part,t.focused_part="aspect_ratio_modal"),t.aspect_ratio_selection=e,$(this.aspect_ratio_doms).removeClass("active"),$(this.aspect_ratio_doms[e]).addClass("active"),moveScrollPosition($("#aspect-ratio-modal-body"),$(this.aspect_ratio_doms[e]),"vertical",!1)},hoverResumeBtn:function(e){var t=this.keys;t.resume_bar=e,t.focused_part="resume_bar",$(this.resume_bar_doms).removeClass("active"),$(this.resume_bar_doms[e]).addClass("active"),clearTimeout(this.resume_timer),this.resume_timer=setTimeout(function(){$("#video-resume-modal").hide(),"resume_bar"==t.focused_part?"resume_bar"!=t.prev_focus?t.focused_part=t.prev_focus:t.focused_part="info_bar":"subtitle_audio_selection_modal"===t.focused_part&&(t.prev_focus="info_bar")},15e3)},changeAspectRatio:function(e){e=e||"16:9",setTimeout(function(){try{media_player.setDisplayArea(e)}catch(e){console.log(e)}},0)},showLeavePopup:function(){this.keys.focused_part="leave_popup_selection",$("#confirm-exit-movie-popup-container").css("display","flex"),this.hoverLeavePopupBtn(1)},hideLeavePopup:function(){this.keys.focused_part="control_bar",$("#confirm-exit-movie-popup-container").hide()},hoverLeavePopupBtn:function(e){this.keys.leave_popup_selection=e,this.keys.focused_part="leave_popup_selection",$(".confirm-exit-movie-btn").removeClass("active"),$($(".confirm-exit-movie-btn")[e]).addClass("active")},exitPlayer:function(){switch(this.hideLeavePopup(),this.Exit(),this.back_url){case"vod-series-page":current_route="vod-series-page",$("#vod-series-page").removeClass("hide"),moveScrollPosition($("#vod-series-menus-container"),vod_series_page.menu_doms[vod_series_page.keys.menu_selection],"vertical",!1);break;case"vod-summary-page":current_route="vod-summary-page",$("#vod-summary-page").removeClass("hide");break;case"home-page":current_route="home-page",$("#home-page").removeClass("hide"),home_page.hoverLatestMovie(home_page.keys.latest_movie_selection,"movie");break;case"episode-page":current_route="series-summary-page",$("#series-summary-page").removeClass("hide"),series_summary_page.hoverEpisode(series_summary_page.keys.episode_selection);break;case"channel-page":channel_page.reEnter(),channel_page.hoverEpgItem(channel_page.keys.channel_selection,!0);break;case"search-page":$("#search-page").show();var e="movie"===this.current_movie_type?1:2;search_page.keys.hor_keys[e]>=search_page.movie_doms[e].length&&(search_page.keys.hor_keys[e]=search_page.movie_doms[e].length-1),search_page.hoverMovie(search_page.keys.hor_keys[e],e);break;case"catch-up-detail":$("#catchup-detail-page").removeClass("hide"),epg_page.hoverProgramme(epg_page.keys.programme_selection)}},handleMenuClick:function(){var e=this.keys;if("resume_bar"===e.focused_part&&"none"===$("#video-resume-modal").css("display")&&(e.focused_part="control_bar"),this.show_control||"control_bar"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part&&"slider"!==e.focused_part)switch(e.focused_part){case"control_bar":this.showControlBar(!1),$(this.video_control_doms[e.control_bar]).trigger("click");break;case"info_bar":this.show_control&&(this.showControlBar(!1),$(this.video_info_doms[e.info_bar]).find(".video-info-icon").trigger("click"));break;case"episode_selection":this.showControlBar(!1),$(this.episode_doms[e.episode_selection]).trigger("click");break;case"resume_bar":if($("#video-resume-modal").hide(),e.focused_part=e.prev_focus,0==e.resume_bar)if("samsung"===platform)try{webapis.avplay.getCurrentTime()<this.resume_time&&(webapis.avplay.seekTo(this.resume_time),$(this.slider_element).val(this.resume_time/1e3).change())}catch(e){}else if("lg"===platform)try{media_player.videoObj.currentTime<this.resume_time&&(media_player.videoObj.currentTime=this.resume_time,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(this.resume_time)),0<media_player.videoObj.duration)&&$(this.slider_element).val(this.resume_time).change()}catch(e){}break;case"subtitle_audio_selection_modal":e.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).trigger("click"):($(this.subtitle_audio_menus).find("input").prop("checked",!1),$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).find("input").prop("checked",!0));break;case"subtitle_adjust_selection":0==e.subtitle_adjust_selection?$(this.subtitle_adjust_items[0]).focus():$(this.subtitle_adjust_items[e.subtitle_adjust_selection]).trigger("click");break;case"aspect_ratio_modal":$(this.aspect_ratio_doms[e.aspect_ratio_selection]).trigger("click");break;case"leave_popup_selection":1==e.leave_popup_selection&&this.exitPlayer(),0==e.leave_popup_selection&&this.hideLeavePopup()}else this.showControlBar(!0)},handleMenuLeftRight:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":this.seekTo(30*e),this.showControlBar(!1);break;case"control_bar":t.control_bar+=e,t.control_bar<0&&(t.control_bar=0),t.control_bar>=this.video_control_doms.length?(t.control_bar=this.video_control_doms.length-1,this.hoverVideoInfoIcon(0)):this.hoverVideoControlIcon(t.control_bar);break;case"info_bar":var i=3;this.is_catchup&&(i=2),t.info_bar+=e,2==t.info_bar&&"samsung"==platform&&(t.info_bar+=e),t.info_bar>i&&(t.info_bar=i),t.info_bar<0?(t.info_bar=0,this.hoverVideoControlIcon(t.control_bar)):this.hoverVideoInfoIcon(t.info_bar);break;case"episode_selection":$(this.episode_doms).removeClass("active"),t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length&&(t.episode_selection=this.episode_doms.length-1),this.hoverEpisode(t.episode_selection);break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2?0<e?this.hoverSubtitle(-1):this.hoverSubtitle(-2):(i=this.subtitle_audio_menus.length,t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<i-2&&(t.subtitle_audio_selection_modal=i-2),t.subtitle_audio_selection_modal>=i&&(t.subtitle_audio_selection_modal=i-1),this.hoverSubtitle(t.subtitle_audio_selection_modal));break;case"subtitle_adjust_selection":t.subtitle_adjust_selection=0<e?2:1,this.hoverSubtitleAdjustBtn(t.subtitle_adjust_selection);break;case"leave_popup_selection":t.leave_popup_selection+=e,1<t.leave_popup_selection&&(t.leave_popup_selection=1),t.leave_popup_selection<0&&(t.leave_popup_selection=0),this.hoverLeavePopupBtn(t.leave_popup_selection)}else this.seekTo(30*e)},handleMenuUpDown:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part&&"episode_selection"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":e<0&&this.hoverVideoControlIcon(2),this.has_episodes&&0<e&&this.hoverEpisode(t.episode_selection);break;case"control_bar":0<e&&this.hoverSlider();break;case"info_bar":0<e&&this.hoverSlider(2);break;case"episode_selection":e<0&&this.hoverSlider();break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?e<0&&(t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length-3):t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<0&&(t.subtitle_audio_selection_modal=0),this.hoverSubtitle(t.subtitle_audio_selection_modal);break;case"subtitle_adjust_selection":0<t.subtitle_adjust_selection?e<0&&this.hoverSubtitleAdjustBtn(0):0<e&&this.hoverSubtitleAdjustBtn(1);break;case"resume_bar":var i=this.resume_bar_doms;t.resume_bar+=e,t.resume_bar<0&&(t.resume_bar=0),t.resume_bar>=i.length&&(t.resume_bar=i.length-1),this.hoverResumeBtn(t.resume_bar);break;case"aspect_ratio_modal":t.aspect_ratio_selection+=e,t.aspect_ratio_selection<0&&(t.aspect_ratio_selection=0),t.aspect_ratio_selection>=this.aspect_ratio_doms.length&&(t.aspect_ratio_selection=this.aspect_ratio_doms.length-1),this.hoverAspectRatioItem(t.aspect_ratio_selection)}else this.showControlBar(!0)},HandleKey:function(e){switch(e.keyCode){case tvKey.MediaFastForward:this.seekTo(30);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.MediaRewind:this.seekTo(-30);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.MediaPause:this.playPauseVideo("pause");break;case tvKey.MediaPlay:this.playPauseVideo("play");break;case tvKey.MediaPlayPause:this.playPauseVideo("");break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:"movie"===this.current_movie_type?current_movie.is_favourite?(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),current_movie.is_favourite=!1):(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),current_movie.is_favourite=!0):current_series.is_favourite?(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),current_series.is_favourite=!1):(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),current_series.is_favourite=!0)}}},trailer_page={player:null,done:!1,back_url:"home-page",is_paused:!1,is_loading:!1,init:function(e,t){showLoader(!0),this.is_loading=!0,this.back_url=t,this.is_paused=!1,$("#vod-summary-page").addClass("hide"),$("#series-summary-page").addClass("hide"),$("#trailer-player-page").show(),current_route="trailer-page",trailer_page.player=new YT.Player("trailer-player",{height:"100%",width:"100%",videoId:e,events:{onReady:trailer_page.onPlayerReady,onStateChange:trailer_page.onPlayerStateChange}}),$("#trailer-player").on("load",function(){$("#trailer-player").contents().find(".ytp-chrome-top-buttons").hide(),$("#trailer-player").contents().find(".ytp-right-controls").hide(),showLoader(!1),trailer_page.is_loading=!1,$(document.getElementById("trailer-player").contentWindow.document).keydown(function(e){switch(e.keyCode){case tvKey.RETURN:trailer_page.goBack();break;case tvKey.RIGHT:trailer_page.seekTo(5);break;case tvKey.LEFT:trailer_page.seekTo(-5);break;case tvKey.ENTER:trailer_page.playOrPause()}})})},goBack:function(){current_route=this.back_url,this.player.stopVideo(),$("#trailer-player-page").hide(),$("#trailer-player").remove(),$("#trailer-player-page").html('<div id="trailer-player"></div>'),"vod-summary-page"===this.back_url&&$("#vod-summary-page").removeClass("hide"),"series-summary-page"===this.back_url&&$("#series-summary-page").removeClass("hide")},onPlayerReady:function(e){e.target.playVideo()},onPlayerStateChange:function(e){},seekTo:function(e){var e=this.player.getCurrentTime()+e,t=this.player.getDuration();this.player.seekTo(e=t<(e=e<0?0:e)?t:e)},playOrPause:function(){this.is_paused?this.player.playVideo():this.player.pauseVideo(),this.is_paused=!this.is_paused},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.RIGHT:this.seekTo(5);break;case tvKey.LEFT:this.seekTo(-5);break;case tvKey.ENTER:this.playOrPause()}}},series_summary_page={keys:{focused_part:"season_selection",season_selection:0,episode_selection:0},min_btn_index:0,season_doms:[],episode_doms:[],current_season_index:0,hover_season_timer:null,is_loading:!1,prev_route:"",series_video_times:{},current_series_backdrop_image:"",init:function(e){this.prev_route=e,this.current_season_index=-1,showLoader(!0),this.is_loading=!0,this.series_video_times={};for(var t=SeriesModel.saved_video_times,i=0;i<t.length;i++)if(t[i].stream_id==current_series.series_id){this.series_video_times=t[i].video_times;break}var s,r=this,e=(current_route="series-summary-page",$("#season-items-container").html(""),$("#series-summary-episode-items-container").html(""),$("#series-summary-image-wrapper img").attr("src",""),$("#series-summary-page .vod-series-background-img").attr("src",""),hideImg($("#series-summary-page .vod-series-background-img")),$("#series-summary-name").text(current_series.name),$("#series-summary-release-date").text(current_series.releasedate),$("#series-summary-release-genre").text(current_series.genre),$("#series-summary-release-length").text(current_series.duration),$("#series-summary-release-director").text(current_series.director),$("#series-summary-release-cast").text(current_series.cast),$("#series-summary-description").text(current_series.plot),$("#series-summary-image-wrapper img").attr("src",current_series.cover||HOST+"app_src_min/images/default_movie.png"),0),e=void 0===current_series.rating||""===current_series.rating?0:parseFloat(current_series.rating);isNaN(e)&&(e=0),$("#series-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#series-rating-mark").text(e.toFixed(1)),$("#vod-series-page").addClass("hide"),$("#series-summary-page").removeClass("hide"),$("#season-items-container").scrollTop(0),console.log("PLAYLIST TYPE",settings),"xc"===settings.playlist.playlist_type?$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_series_info&series_id="+current_series.series_id).done(function(e){current_series.info=e.info;var i=e.seasons;if(e.episodes&&(i&&0<i.length||0<Object.keys(e.episodes).length)){var s=e.episodes,t=(i&&0!=i.length?i.map(function(e){e.episodes=s[e.season_number.toString()]}):(i=[],Object.keys(s).map(function(e,t){i.push({name:"Season "+(t+1),cover:HOST+"app_src_min/images/series.png",episodes:s[e]})})),i.filter(function(e){return e.episodes&&0<e.episodes.length})),o=Object.keys(s);if(o.length>t.length){for(var a=0;a<t.length;a++)t[a].name="Season "+(a+1);for(a=t.length;a<o.length;a++)t.push({name:"Season "+(a+1),episodes:s[(a+1).toString()]})}current_series.seasons=t;var n="";current_series.seasons.map(function(e,t){n+='<div class="season-item-container" onmouseenter="series_summary_page.hoverSeason('+t+')">'+e.name+"</div>"}),$("#season-items-container").html(n),r.showSeriesInfo()}else showLoader(!1),r.is_loading=!1,showToast("Sorry","No seasons available"),r.goBack()}).fail(function(e){showLoader(!1),r.is_loading=!1,r.goBack()}):"general"===settings.playlist.playlist_type&&(current_series.seasons.map(function(e){e.episodes=current_series.episodes[e.name]}),s="",current_series.seasons.map(function(e,t){s+='<div class="season-item-container"   onmouseenter="series_summary_page.hoverSeason('+t+')">'+e.name+"</div>"}),$("#season-items-container").html(s),r.showSeriesInfo())},showSeriesInfo:function(){this.season_doms=$(".season-item-container");try{this.hoverSeason(0),$("#selected-season-name").text(current_series.seasons[0].name);try{try{(e=current_series.info.backdrop_path[0])&&(this.current_series_backdrop_image=e,$("#series-summary-page .vod-series-background-img").attr("src",e).show(),$("#series-summary-page .vod-series-background-img-overlay").show())}catch(e){}}catch(e){}this.showEpisodes()}catch(e){}var e;current_series.info&&(e=current_series.info).releaseDate&&""==$("#series-summary-release-date").text()&&$("#series-summary-release-date").text(e.releaseDate),void 0!==current_series.youtube_trailer&&null!=current_series.youtube_trailer&&""!==current_series.youtube_trailer.trim()?(this.min_btn_index=0,$("#vod-watch-trailer-button").show()):(this.min_btn_index=1,$("#vod-watch-trailer-button").hide()),showLoader(!1),this.is_loading=!1},showEpisodes:function(){var e,a,n,t=this.keys;this.current_season_index!==t.season_selection&&(e=(current_season=current_series.seasons[t.season_selection]).episodes,a=this.series_video_times[t.season_selection.toString()]?this.series_video_times[t.season_selection.toString()]:{},void 0!==e&&0<e.length?(n="",e.map(function(e,t){var i,s="",o=0;a[t.toString()]&&(s="has-progress",(i=a[t.toString()]).duration)&&(o=100*parseFloat(i.time)/parseFloat(i.duration)+"%"),n+='<div class="episode-item-wrapper"                        onmouseenter="series_summary_page.hoverEpisode('+t+')"                        onclick="series_summary_page.handleMenuClick()"                    >'+(e.title||"Episode "+(t+1))+'   <div class="episode-video-duration-container">                            <div class="episode-video-duration '+s+'">                                <span class="episode-video-progress" style="width: '+o+'"></span>                            </div>                         </div>                    </div>'}),$("#series-summary-episode-items-container").html(n),$("#series-summary-episode-items-container").scrollTop(0)):(showToast("Sorry","No episodes available"),$("#series-summary-episode-items-container").html("")),t.episode_selection=0,this.episode_doms=$(".episode-item-wrapper"),$("#selected-season-name").text(current_season.name),this.current_season_index=t.season_selection)},goBack:function(){var e=this.keys;switch(e.focused_part){case"season_selection":switch(current_route=this.prev_route,$("#series-summary-page").addClass("hide"),this.prev_route){case"vod-series-page":$("#vod-series-page").removeClass("hide");break;case"search-page":$("#search-page").show();break;case"home-page":home_page.reEnter()}break;case"episode_selection":e.focused_part="season_selection",e.episode_selection=0,$(this.episode_doms).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e.season_selection]).addClass("active")}},hoverSeason:function(e){var t=this.keys,i=(t.focused_part="season_selection",t.season_selection=e,$(this.episode_doms).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e]).addClass("active"),clearTimeout(this.hover_season_timer),moveScrollPosition($("#season-items-container"),this.season_doms[t.season_selection],"vertical",!1),this);this.hover_season_timer=setTimeout(function(){i.showEpisodes()},300)},hoverEpisode:function(e){var t=this.keys;t.episode_selection=e,t.focused_part="episode_selection",$(this.season_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$(this.episode_doms[t.episode_selection]).addClass("active"),moveScrollPosition($("#series-summary-episode-items-container"),this.episode_doms[t.episode_selection],"vertical",!1)},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":0<e&&0<this.episode_doms.length&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":e<0&&this.hoverSeason(t.season_selection)}},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":t.season_selection+=e,t.season_selection<0?t.season_selection=0:t.season_selection>=this.season_doms.length?t.season_selection=this.season_doms.length-1:this.hoverSeason(t.season_selection);break;case"episode_selection":t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length?t.episode_selection=this.episode_doms.length-1:this.hoverEpisode(t.episode_selection)}},handleMenuClick:function(){var e,t=this.keys;"episode_selection"===t.focused_part&&(e=(current_season=current_series.seasons[t.season_selection]).episodes,current_episode=e[t.episode_selection],vod_series_player.init(current_episode,"series","episode-page","",!0),vod_series_player.keys.episode_selection=t.episode_selection)},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},vod_series_page={player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],category_hover_timer:null,category_hover_timeout:300,keys:{focused_part:"category_selection",category_selection:0,menu_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,themes_modal_selection:0},category_doms:[],menu_doms:[],top_menu_doms:$("#vod-series-page .top-menu"),current_movie_type:"movie",sort_key:"vod_sort",search_key_timer:"",search_key_timout:400,current_render_count:0,render_count_increment:40,is_drawing:!1,prev_keyword:"",prev_dom:null,sort_doms:$(".sort-modal-item"),rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,rearrange_origin_position:0,is_categories_open:!0,current_category:"",movie_hover_timer:null,vod_theme:null,isTMDBAllowed:!1,init:function(e,t){this.getTMDBChoice(),this.prev_dom=null,this.is_drawing=!1;var i=this.keys,s=settings[e+"_sort"],o=($(this.top_menu_doms[0]).data("word_code",s),$(this.top_menu_doms[0]).text(current_words[s]||settings.sort_keys[s]),$(".vod-series-mark-wrapper").addClass("hide"),$("."+e+"-mark-wrapper").removeClass("hide"),home_page.exit(),$("#vod-series-page").removeClass("hide"),current_route="vod-series-page",s="vod"===(this.current_movie_type=e)?(this.sort_key="vod_sort",this.categories=VodModel.getCategories(!1,!0),current_words.movies||"Movies"):(this.sort_key="series_sort",this.categories=SeriesModel.getCategories(!1,!0),current_words.series||"Series"),$("#vod-series-page .page-title").text(s),this.setupTheme(),"");this.categories.map(function(e,t){o+='<div class="vod-series-category-item" data-index="'+t+'"                    onmouseenter="vod_series_page.hoverCategory(this)"                    onclick="vod_series_page.handleMenuClick()"                >                    <div class="floatTextWrapper">                        <div class="vod-series-category-name floatText">'+e.category_name+"</div>                    </div>                </div>"}),$("#vod-series-categories-container").html(o),this.category_doms=$(".vod-series-category-item"),i.focused_part="category_selection",i.category_selection=0,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.current_category_index=-1;for(var a=0;a<this.categories.length;a++)if(0<this.categories[a].movies.length){i.category_selection=a;break}this.showCategoryContent(),this.hoverCategory(this.category_doms[i.category_selection]),this.fetchHoverMovie(0)},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":e.focused_part="category_selection",this.hoverCategory(this.category_doms[e.category_selection]);break;case"category_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):($("#vod-series-page").addClass("hide"),home_page.reEnter());break;case"top_menu_selection":$("#vod-series-search-input").blur(),this.hoverCategory(this.category_doms[e.category_selection]);break;case"sort_selection":$("#sort-modal-container").removeClass("visible"),this.hoverTopMenu(0);break;case"theme_vod_modal":$("#vod-theme-modal").modal("hide"),this.hoverTopMenu(2)}},getTMDBChoice:function(){var e=localStorage.getItem(storage_id+"tmdb_choice");this.isTMDBAllowed="off"!=e},setupTheme:function(){this.theme=localStorage.getItem(storage_id+"vod_theme"),this.theme||(this.theme="modern"),"replay"!=this.current_movie_type&&this.isTMDBAllowed||(this.theme="normal"),"normal"==this.theme?(this.keys.themes_modal_selection=0,$("#vod-series-info-container").addClass("d-none"),$("#vod-series-info-container").removeClass("d-block"),$("#vod-series-menus-container").css("height","60rem"),$("#vod-series-menus-container").css("margin-top","0")):(this.keys.themes_modal_selection=1,$("#vod-series-info-container").addClass("d-block"),$("#vod-series-info-container").removeClass("d-none"),$("#vod-series-menus-container").css("height","29rem"),$("#vod-series-menus-container").css("margin-top","29rem"))},showCategoryContent:function(){var e,t,i,s=this.keys;this.current_category_index!==s.category_selection&&(e=this.categories[s.category_selection],this.current_category=e,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.prev_keyword="",$("#vod-series-search-input").val(""),t=e.movies.filter(function(e){return!0}),i=settings[this.current_movie_type+"_sort"],this.movies=getSortedMovies(t,i),this.renderCategoryContent(),$("#vod-series-menus-container").scrollTop(0),s.menu_selection=0,this.current_category_index=s.category_selection,$("#vod-series-current-category").text(e.category_name))},renderCategoryContent:function(){var n,r,l,c,d,h="",_=HOST+"app_src_min/images/default_movie.png",u="stream_icon";"vod"!==this.current_movie_type&&(u="cover"),this.current_render_count<this.movies.length&&(showLoader(this.is_drawing=!0),n=this,setTimeout(function(){showLoader(n.is_drawing=!1)},1e3),c={},"vod"===(d=this.current_movie_type)||"movie"===d?(l=VodModel.movie_key,r=VodModel.favourite_ids,VodModel.saved_video_times.map(function(e){c[e.stream_id.toString()]=e})):(l=SeriesModel.movie_key,r=SeriesModel.favourite_ids,SeriesModel.saved_video_times.map(function(e){c[e.stream_id.toString()]=e})),this.movies.slice(this.current_render_count,this.current_render_count+this.render_count_increment).map(function(e,t){var i=r.includes(e[l]),s="",o=0,a=e[l].toString();c[a]&&(s="has-progress",(a=c[a]).duration)&&"vod"==d&&(o=100*parseFloat(a.time)/parseFloat(a.duration)+"%"),a="movie"==e.stream_type?utilities.isNewlyAdded(e.added)?"vod-new-label ":"vod-new-label hidden":utilities.isRecentlyModifiedSeries(e.last_modified)?"vod-new-label ":"vod-new-label hidden","top_rated"==n.current_category.category_id?h+='<div class="vod-series-menu-item-container top-rated" data-stream_id="'+e.stream_id+'"                        data-index="'+(n.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                       <div class="vod-series-menu-item">                      <div class="vod-series-menu-top-order"> TOP #'+(t+1)+'</div>                      <div class="'+a+'">NEW</div>'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'       <img class="vod-series-icon" src="'+e[u]+'" onerror="this.src=\''+_+'\'">                            <div class="vod-series-menu-item-title-container">                                <div class="vod-series-menu-item-title-wrapper">                                   <div class="vod-series-menu-item-title max-line-2">'+e.name+'</div>                                </div>                            </div>                            <div class="vod-series-video-duration-container">                                <div class="vod-series-video-duration '+d+" "+s+'">                                    <span class="vod-series-video-progress" style="width: '+o+'"></span>                                </div>                             </div>                        </div>                    </div>':h+='<div class="vod-series-menu-item-container" data-stream_id="'+e.stream_id+'"                        data-index="'+(n.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                       <div class="vod-series-menu-item"><div class="'+a+'">NEW</div>'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'       <img class="vod-series-icon" src="'+e[u]+'" onerror="this.src=\''+_+'\'">                            <div class="vod-series-menu-item-title-container">                                <div class="vod-series-menu-item-title-wrapper">                                   <div class="vod-series-menu-item-title max-line-2">'+e.name+'</div>                                </div>                            </div>                            <div class="vod-series-video-duration-container">                                <div class="vod-series-video-duration '+d+" "+s+'">                                    <span class="vod-series-video-progress" style="width: '+o+'"></span>                                </div>                             </div>                        </div>                    </div>'}),this.current_render_count+=this.render_count_increment,$("#vod-series-menus-container").append(h),this.menu_doms=$("#vod-series-menus-container .vod-series-menu-item-container"))},addOrRemoveFav:function(){var e,t,i,s=this.keys;"menu_selection"===s.focused_part&&(i=this.menu_doms,e=this.movies,("vod"===this.current_movie_type||"movie"===this.current_movie_type?(t=VodModel.movie_key,VodModel):(t=SeriesModel.movie_key,SeriesModel)).favourite_ids.includes(e[s.menu_selection][t])?($($(i[s.menu_selection]).find(".favourite-badge")).remove(),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).removeRecentOrFavouriteMovie(e[s.menu_selection][t],"favourite"),"favourite"===this.categories[this.current_category_index].category_id&&($(i[s.menu_selection]).remove(),0<(i=$("#vod-series-menus-container .vod-series-menu-item-container")).length?(i.map(function(e,t){$(t).data("index",e)}),this.menu_doms=i,s.menu_selection>=this.menu_doms.length&&(s.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[s.menu_selection])):this.hoverCategory(this.category_doms[s.category_selection]))):($($(i[s.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>'),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).addRecentOrFavouriteMovie(e[s.menu_selection],"favourite")))},showSortModal:function(){var i=settings[this.current_movie_type+"_sort"],s=0;this.sort_doms.map(function(e,t){$(t).data("sort_key")==i&&(s=e)}),$("#sort-modal-container").addClass("visible"),this.hoverSortItem(s)},closeSortModal:function(){$("#sort-modal-container").removeClass("visible"),"sort_selection"===this.keys.focused_part&&this.hoverTopMenu(1)},updateFavouriteOrRecentCount:function(e){for(var t=this.categories,i=0;i<t.length;i++)if(t[i].category_id==e){$(this.category_doms[i]).find(".vod-series-category-item-count").text(t[i].movies.length);break}},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_dom).removeClass("rearrange");else if(e){var e=this.keys,t="vod"==this.current_movie_type?VodModel:SeriesModel;if("category_selection"===e.focused_part){this.rearrange_mode=!0;var i=0;if("channel_selection"===e.focused_part)i=e.channel_selection;else for(var s=this.categories[e.category_selection],o=0;o<t.categories.length;o++)if(t.categories[o].category_id==s.category_id){i=o;break}this.rearrange_origin_position=i,$(this.prev_dom).addClass("rearrange")}}},changeCategoryDomContent:function(e,t,i){$(e).find(".vod-series-category-name").text(t.category_name),$(e).data("index",i)},hoverTopMenu:function(e){var t;key_focused||(this.toggleCategoriesBar(!1),(t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e])},hoverSortItem:function(e){var t;key_focused||(this.toggleCategoriesBar(!1),(t=this.keys).focused_part="sort_selection",t.sort_selection=e,$(this.prev_dom).removeClass("active"),$(this.sort_doms[e]).addClass("active"),this.prev_dom=this.sort_doms[e])},hoverCategory:function(e){var t;key_focused||(this.toggleCategoriesBar(!0),t=this.keys,e=$(e).data("index"),t.focused_part="category_selection",t.category_selection=e,$(this.prev_dom).removeClass("active"),$(this.category_doms[e]).addClass("active"),this.rearrange_mode&&($(this.prev_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_dom=this.category_doms[e],moveScrollPosition($("#vod-series-categories-container"),this.category_doms[e],"vertical",!1),applyAnimation(this.category_doms[e]))},hoverMovieItem:function(e,t){clearTimeout(this.channel_hover_timer);var i=this.keys,s=this,e=$(e).data("index");i.focused_part="menu_selection",i.menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.menu_doms[e]).addClass("active"),this.prev_dom=this.menu_doms[e],moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[i.menu_selection],"vertical",!1),clearTimeout(this.movie_hover_timer),this.movie_hover_timer=setTimeout(function(){s.fetchHoverMovie()},1e3),this.toggleCategoriesBar(!1)},fetchHoverMovie:function(e){var t,i,s,o,a,n=this;this.resetMovieUI(),"replay"!==this.current_movie_type&&(e=null!=e&&"number"==typeof e?this.movies[e]:this.movies[this.keys.menu_selection],s=this.getMovieUrlKey(e),this.setTitleScrolling(e.name),i=e.series_id?(t="series",e.series_id):(t="vod",e.stream_id),this.isTMDBAllowed)&&((e=this.getCachedMovieInfo(t,i))?((e=e.info)&&0!==e.length||(n.fetchHoverMovie(),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png")),this.updateMovieUI(e),o=e.tmdb_id||e.tmdb,e.backdrop_path&&0<e.backdrop_path.length&&(a=e.backdrop_path[0]),this.fetchMovieImages(o,a||HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-image").fadeIn()):$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+s,function(e){n.handleMovieResponse(e,t,i),$("#movie-image").fadeIn()},function(e){n.handleFetchError(e)}),this.resetScrollPosition(),$("#vod-series-info-container").css("opacity",1))},resetMovieUI:function(){$("#movie-log-title").hide(),$("#vod-img-bg").css("opacity",0),$("#vod-series-info-container .movie-info").hide(),$("#vod-series-info-container").css("opacity",0);["#movie-title","#movie-synopsis","#movie-cast","#release-data","#director","#duration","#genre","#rate"].forEach(function(e){$(e).text("")}),$("#movie-title").text(this.movies[this.keys.menu_selection].name),$("#rate").text(this.movies[this.keys.menu_selection].rating),$("#movie-image").hide().attr("src","")},getMovieUrlKey:function(e){return"series"===this.current_movie_type?"&action=get_series_info&series_id="+e.series_id:"&action=get_vod_info&vod_id="+e.stream_id},setTitleScrolling:function(e){50<e.length?$("#movie-title").css({"padding-left":"100%",animation:"scroll-left 20s linear infinite"}):$("#movie-title").css({"padding-left":"",animation:""})},handleMovieResponse:function(e,t,i){var s,e=e.info;e&&0!==e.length&&(this.updateMovieUI(e),this.cacheMovieInfo(t,i,e),t=e.tmdb_id||e.tmdb,e.backdrop_path&&0<e.backdrop_path.length&&(s=e.backdrop_path[0]),this.fetchMovieImages(t,s||HOST+"app_src_min/images/default_movie_bg.png"))},updateMovieUI:function(e){$("#movie-title").text(e.name).show(),!e.backdrop_path&&e.movie_image&&(e.backdrop_path=e.movie_image),$("#movie-image").attr("src",e.backdrop_path).css("opacity",1),$("#movie-synopsis").text(e.description||e.plot),$("#movie-cast").text(e.cast),$("#release-data").text(e.releasedate||e.releaseDate),$("#director").text(e.director),$("#duration").text(e.duration),$("#genre").text(e.genre),$("#rate").text(Math.round(10*e.rating)/10),this.toggleCircle("#movie-cast",e.cast),this.toggleCircle("#release-data",e.releasedate||e.releaseDate),this.toggleCircle("#director",e.director),this.toggleCircle("#duration",e.duration),this.toggleCircle("#genre",e.genre),$("#vod-series-info-container .movie-info").show()},toggleCircle:function(e,t){$(e).siblings(".circle").toggle(!!t)},handleFetchError:function(e){console.error("fetchHoverMovie",e),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png").show()},resetScrollPosition:function(){},fetchMovieImages:function(e,t){var i,s=this,o=(e||t||$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-log-title").attr("src",""),"series"===this.current_movie_type?"/tv/"+e+"/images?api_key="+tmdb_api_key:"/movie/"+e+"/images?api_key="+tmdb_api_key);return e?(i="series"==this.current_movie_type?"series":"movies",$.ajax({url:"https://tmdb.iboplayer.com/api/"+i+"/images/show/"+e,type:"GET",headers:{Authorization:"Bearer sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB"}}).then(function(e){return e.data}).fail(function(e){return $.getJSON(tmdb_prefix_url+o).then(function(e){return console.log("Official TMDB API success:",e),e}).then(s.handleImageResponse.bind(s,t)).then(function(){$("#vod-series-info-container .movie-info").show()}).fail(function(e){return console.log("Official TMDB API failed:",e),null})}).then(this.handleImageResponse.bind(this,t)).then(function(){$("##vod-series-info-container .movie-info").show()})):$.Deferred().resolve().promise()},handleImageResponse:function(e,t){t.backdrops&&0<t.backdrops.length&&(e=tmdb_img_url+"w1280"+t.backdrops[0].file_path);var i,s=t.logos&&0<t.logos.length?tmdb_img_url+"w500"+t.logos[0].file_path:null;if(s?($(".title-container").css("margin-bottom","1rem"),$("#movie-log-title").attr("src",s).show(),$("#movie-title").hide()):($(".title-container").css("margin-bottom","0"),$("#movie-log-title").hide(),$("#movie-title").show()),$("#vod-series-info-container .movie-info").show(),$("#movie-image").attr("src",e).css("opacity",1),$(".vod-series-summary-section-img-darken").show(),$("#vod-img-bg").css("opacity",1),i=i||("series"==this.current_movie_type?"series":"movies"),!t.tmdbId)return $.ajax({url:"https://tmdb.iboplayer.com/api/"+i+"/images/store",type:"POST",headers:{Authorization:"Bearer sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB"},data:{tmdbId:t.tmdbId||t.id,backdrops:t.backdrops,logos:t.logos,posters:t.posters}}).then(function(e){return console.log("TMDB Images stored to server",e),e}).fail(function(e,t,i){console.log("Error storing TMDB Images to server:",i)})},cacheMovieInfo:function(e,t,i,s,o){var e=e+t,t=(i=utilities.pickProperties(i,["name","duration","cover","cover_big","movie_image","releasedate","releaseDate","director","actors","cast","description","plot","genre","rating","backdrop_path","tmdb","tmdb_id"]),Object.keys(storageMoviesInfo));t&&0!=t.length||(storageMoviesInfo.host_url=api_host_url),100<=t.length&&(t=t[1],delete storageMoviesInfo[t]),storageMoviesInfo[e]={info:i,logo:s,bg:o},localStorage.setItem(storage_id+"saved-movie-info",JSON.stringify(storageMoviesInfo))},getCachedMovieInfo:function(e,t){return storageMoviesInfo&&storageMoviesInfo!={}?storageMoviesInfo[e+t]:null},showThemeModal:function(){var e;this.isTMDBAllowed?(this.keys.focused_part="theme_vod_modal",$("#vod-theme-modal").modal("show"),e=this.keys.themes_modal_selection,this.modal_visible=!0,$("#vod-theme-modal .vod-theme").removeClass("current"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("current")}),this.updateModalFocus()):showToast("Sorry","Theme cannot be changed unless TMDB is allowed in settings.")},hideThemeModal:function(){this.keys.focused_part="menu_selection",$("#vod-theme-modal").modal("hide"),this.modal_visible=!1},updateModalFocus:function(){var e=this.keys.themes_modal_selection;$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")})},handleModalSelection:function(e){0==(this.keys.themes_modal_selection=e)?(localStorage.setItem(storage_id+"vod_theme","normal"),this.vod_theme="normal"):(localStorage.setItem(storage_id+"vod_theme","modern"),this.vod_theme="modern"),this.setupTheme(),this.hideThemeModal()},hoverThemeVod:function(e){$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")}),this.keys.themes_modal_selection=e},toggleCategoriesBar:function(e){void 0!==e&&(1==e?($("#vod-series-page").addClass("categories-open"),this.is_categories_open=!0):($("#vod-series-page").removeClass("categories-open"),this.is_categories_open=!1))},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":("vod"===this.current_movie_type?(current_movie=this.movies[e.menu_selection],vod_summary_page):(current_series=this.movies[e.menu_selection],series_summary_page)).init("vod-series-page");break;case"top_menu_selection":switch(e.top_menu_selection){case 0:this.showSortModal();break;case 1:search_page.init("vod-series-page",this.current_movie_type);break;case 2:this.showThemeModal()}break;case"category_selection":var t=this.categories[e.category_selection];this.current_category_index!=e.category_selection&&(checkForAdult(t,"category",[])?parent_confirm_page.init(current_route):(this.showCategoryContent(),this.toggleRearrangeMode(!1)));break;case"sort_selection":this.current_category_index=-1;t=$(this.sort_doms[e.sort_selection]).data("sort_key");settings.saveSettings(this.current_movie_type+"_sort",t,""),$(this.top_menu_doms[0]).data("word_code",t),$(this.top_menu_doms[0]).text(current_words[t]||settings.sort_keys[t]),this.showCategoryContent(),this.goBack();break;case"theme_vod_modal":this.handleModalSelection(e.themes_modal_selection)}},handleMenusUpDown:function(e){var t=this.keys,i=this.menu_doms;switch($("#vod-series-search-input").blur(),t.focused_part){case"category_selection":var s=t.category_selection;if(t.category_selection+=e,t.category_selection<0)t.category_selection=0,this.hoverCategorySearch();else if(t.category_selection>=this.category_doms.length)t.category_selection=this.category_doms.length-1;else{if(this.rearrange_mode&&s!=t.category_selection){for(var o=this.categories[s],a=this.categories[t.category_selection],n=(this.changeCategoryDomContent(this.category_doms[s],a,s),this.changeCategoryDomContent(this.category_doms[t.category_selection],o,t.category_selection),this.category_doms=$(".vod-series-category-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),0),r=null,r="vod"==this.current_movie_type?VodModel:SeriesModel,l=0;l<r.categories.length;l++)if(a.category_id==r.categories[l].category_id){n=l;break}r.categories=makeRearrangeArray(r.categories,this.rearrange_origin_position,n),this.rearrange_origin_position=n,this.categories=r.getCategories(!1,!0),this.rearrange_timer=setTimeout(function(){for(var e=r.category_orders,t=0;t<e.length;t++)if(e[t].id==o.category_id){e.splice(t,1);break}e.push({id:o.category_id,position:n}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_"+r.stream_type+"_category_orders",JSON.stringify(e)),r.category_orders=e,r.updateRecentAndFavouritePosition()},this.rearrange_timeout)}this.hoverCategory(this.category_doms[t.category_selection])}break;case"menu_selection":s=t.menu_selection;t.menu_selection<5&&e<0?(t.menu_selection=s,this.hoverTopMenu(0)):checkVerticalMovable(this.menu_doms.length,4,t.menu_selection,e)&&(t.menu_selection+=5*e,t.menu_selection>=i.length&&(t.menu_selection=i.length-1),t.menu_selection>=this.current_render_count-6&&this.renderCategoryContent(),this.hoverMovieItem(this.menu_doms[t.menu_selection]));break;case"top_menu_selection":if(0<e){if($("#vod-series-search-input").blur(),0==this.menu_doms.length)return;t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),4<t.menu_selection&&(t.menu_selection=0),this.hoverMovieItem(this.menu_doms[t.menu_selection])}break;case"sort_selection":t.sort_selection+=e,t.sort_selection<0&&(t.sort_selection=0),t.sort_selection>=this.sort_doms.length&&(t.sort_selection=this.sort_doms.length-1),this.hoverSortItem(t.sort_selection);case"theme_vod_modal":0<e?this.hoverThemeVod(1):this.hoverThemeVod(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&(0<this.movies.length?(this.toggleRearrangeMode(!1),this.hoverMovieItem(this.menu_doms[t.menu_selection])):$("#vod-series-search-input").val()&&(this.toggleRearrangeMode(!1),this.hoverTopMenu(0)));break;case"menu_selection":t.menu_selection%5==0&&e<0?this.hoverCategory(this.category_doms[t.category_selection]):(t.menu_selection+=e,t.menu_selection<0?(t.menu_selection=0,this.hoverCategory(this.category_doms[t.category_selection])):(t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[t.menu_selection]),0<e&&t.menu_selection>=this.current_render_count-6&&this.renderCategoryContent()));break;case"top_menu_selection":key_focused||(t.top_menu_selection+=e,t.top_menu_selection<0?this.hoverCategory(this.category_doms[t.category_selection]):(2<t.top_menu_selection&&(t.top_menu_selection=2),this.hoverTopMenu(t.top_menu_selection)))}},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case 65376:case 65385:$("input").blur();break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:this.showNextChannel(1);break;case tvKey.CH_DOWN:this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:this.playOrPause();break;case tvKey.RED:return void this.toggleRearrangeMode(!0);case tvKey.GREEN:this.showThemeModal();break;case tvKey.BLUE:search_page.init("vod-series-page",this.current_movie_type);break;default:console.log("No matching")}}},settings_page={keys:{focused_part:"settings_selection",settings_selection:0,parental_control_tabs_selection:0,current_parental_control_tab_selection:0,parental_control_selection:0,hide_categories_tabs_selection:0,current_hide_categories_tabs_selection:0,hide_categories_selection:0,change_language_selection:0,clear_cache_selection:0,clear_watch_lists_selection:0,subtitle_selection:0,stream_format_selection:0,toggle_tmdb_selection:0,toggle_home_favorites_selection:0,live_initialization_selection:0,live_layout_selection:0,load_on_demand_selection:0},transparency_mode:!1,subtitle_bg_options:{black:{color:"#fff",background:"#000"},white:{color:"#000",background:"#fff"},red:{color:"#fff",background:"#950606"},transparent:{color:"#fff",background:"transparent"}},doms_translated:[],tried_panel_indexes:[],settings_doms:$(".settings-page-option"),settings_options_doms:$(".setting-option-container"),parental_control_tab_items:$("#parental-control-settings .setting-tab"),hide_categories_tabs_items:$("#hide-categories-settings .setting-tab"),hide_categories_live_items:$("#hide_categories_live_container .setting-select-multi-option"),hide_categories_movies_items:$("#hide_categories_movies_container .setting-select-multi-option"),hide_categories_series_items:$("#hide_categories_series_container .setting-select-multi-option"),change_language_items:$("#stream-format-settings .setting-select-option"),clear_cache_items:$("#clear-cache-settings .setting-select-option"),clear_watch_lists_items:$("#clear-watch-lists-settings .setting-select-option"),subtitle_items:$("#subtitle-settings .settings-multi-value-option"),stream_format_items:$("#stream-format-settings .setting-select-option"),toggle_tmdb_items:$("#toggle-tmdb-settings .setting-select-option"),toggle_home_favorites_items:$("#toggle-home-favorites-settings .setting-select-option"),live_initialization_items:$("#live-initialization-settings .setting-select-option"),live_layout_items:$("#live-layout-settings .setting-select-option"),load_on_demand_items:$("#load-on-demand-settings .setting-select-option"),init:function(){$("#home-page").addClass("hide"),$("#settings-page").css("display","flex"),current_route="settings-page",$(this.settings_doms).removeClass("current"),$(this.settings_options_doms).hide(),this.createCategoriesDoms(),this.hoverSettingsItem(0)},goBack:function(){var e=this.keys;switch(e.focused_part){case"hide_categories":e.hide_categories_selection=0,this.hoverHideCategoriesTab(e.hide_categories_tabs_selection);break;case"subtitle_option":this.hoverSubtitleOption(e.subtitle_selection);break;default:this.keys.focused_part="settings_selection",$("#settings-page").css("display","none"),$("#home-page").removeClass("hide"),current_route="home-page"}},updateActiveClass:function(e,t){e.removeClass("active").eq(t).addClass("active")},handleScrolling:function(e,t,i,s){s=!s;moveScrollPosition($(e),$(t[i]),"vertical",s)},hoverOption:function(e,t,i,s){console.log("Hovering index",i),this.updateActiveClass(t,i),this.handleScrolling(e,t,i,s)},hoverSettingsItem:function(e,t){key_focused||(t&&t.removeClass("active"),(t=this.keys).focused_part="settings_selection",this.updateActiveClass(this.settings_doms,t.settings_selection=e),1==this.transparency_mode&&(this.transparency_mode=!1,$("#settings-page").css("opacity",1)))},clickSettingsItem:function(e){var t=this.keys;switch(e="number"==typeof e?e:t.settings_selection,$(this.settings_doms).removeClass("current").removeClass("active").eq(e).addClass("current"),$(this.settings_options_doms).hide().eq(e).show(),t.settings_selection){case 0:this.setupChangeLanguageOptions(),this.hoverChangeLanguageOption(t.change_language_selection);break;case 1:this.setupHideCategoriesOptions(),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);break;case 2:this.setupParentalControlOptions();break;case 3:this.hoverClearCacheOption(t.clear_cache_selection);break;case 4:this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case 5:this.setupSubtitleOptions(),this.hoverSubtitleOption(t.subtitle_selection);break;case 6:this.setupStreamFormatOptions(),this.hoverStreamFormatOption(t.stream_format_selection);break;case 7:this.setupToggleTMDBOptions(),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case 8:this.setupToggleHomeFavoritesOptions(),this.hoverToggleHomeFavoritesOption(t.toggle_home_favorites_selection);break;case 9:this.setupLiveInitializationOptions(),this.hoverLiveInitializationOption(t.live_initialization_selection);break;case 10:this.setupLiveLayoutOptions(),this.hoverLiveLayoutOption(t.live_layout_selection);break;case 11:this.setupLoadOnDemandOptions(),this.hoverLoadOnDemandOption(t.load_on_demand_selection)}},setupParentalControlOptions:function(){var e=this.keys;e.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("current"),$("#settings-parental-control-off").hide(),"off"==parent_account_password?($("#parental-control-settings .setting-tabs-container").hide(),$("#settings-parental-control-change").hide(),$("#settings-parental-control-on").show(),e.current_parental_control_tab_selection=-1,this.hoverParentalControlOption(0)):($("#parental-control-settings .setting-tabs-container").show(),$("#settings-parental-control-change").show(),$("#settings-parental-control-on").hide(),e.current_parental_control_tab_selection=0,e.parental_control_tabs_selection=0,this.hoverParentalControlTab(e.parental_control_tabs_selection),this.clickParentalControlTab(e.current_parental_control_tab_selection))},resetParentalControlStyles:function(){$("#parental-control-settings .settings-input").removeClass("active"),$("#settings-parental-control-off-button").removeClass("active"),$("#settings-parental-control-on-button").removeClass("active")},hoverParentalControlTab:function(e){var t;key_focused||((t=this.keys).focused_part="parental_control_tabs",this.resetParentalControlStyles(),this.updateActiveClass(this.parental_control_tab_items,e),t.parental_control_tabs_selection=e)},clickParentalControlTab:function(e){var t=this.keys;switch(t.parental_control_tabs_selection=e,t.current_parental_control_tab_selection=e,$(this.parental_control_tab_items).removeClass("current").eq(e).addClass("current"),$("#settings-parental-control-change").hide(),$("#settings-parental-control-off").hide(),$("#settings-parental-control-on").hide(),$("#change-parental-validation-error").text(""),$("#turn-off-parental-validation-error").text(""),$("#turn-on-parental-validation-error").text(""),e){case 0:$("#settings-parental-control-change").show();break;case 1:$("#settings-parental-control-off").show()}},hoverParentalControlOption:function(e){if(!key_focused){var t=this.keys;switch(t.focused_part="parental_control",t.parental_control_selection=e,$(this.parental_control_tab_items).removeClass("active"),this.resetParentalControlStyles(),t.current_parental_control_tab_selection){case 0:t.parental_control_selection<3?$($("#settings-parental-control-change .settings-input")[e]).addClass("active"):3==t.parental_control_selection&&$("#settings-parental-control-change-button").addClass("active");break;case 1:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password-off").addClass("active");break;case 1:$("#settings-parental-control-off-button").addClass("active")}break;case-1:switch(t.parental_control_selection){case 0:$("#settings-create-parental-password").addClass("active");break;case 1:$("#settings-parental-control-on-button").addClass("active")}}}},clickParentalControlOption:function(e){var t=this.keys;switch(t.parental_control_selection=e,$("#settings-current-parental-password").removeClass("active"),$("#settings-new-parental-password").removeClass("active"),$("#settings-confirm-parental-password").removeClass("active"),t.current_parental_control_tab_selection){case 0:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password").focus().addClass("active");break;case 1:$("#settings-new-parental-password").focus().addClass("active");break;case 2:$("#settings-confirm-parental-password").focus().addClass("active");break;case 3:this.submitParentalControlChangePassword()}break;case 1:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password-off").focus().addClass("active");break;case 1:this.submitParentalControlTurnOff()}break;case-1:switch(t.parental_control_selection){case 0:$("#settings-create-parental-password").focus().addClass("active");break;case 1:this.submitParentalControlTurnOn()}}},submitParentalControlChangePassword:function(){var e=$("#change-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password").val()),i=$("#settings-new-parental-password").val(),s=$("#settings-confirm-parental-password").val();""==t||""==i||""==s?e.text("Please fill all fields"):t!=parent_account_password?e.text("Current password is incorrect"):i!=s?e.text("New passwords do not match"):i.length<4?$("#change-parental-validation-error").text("Password must be 4 digits"):(parent_account_password=i,localStorage.setItem(storage_id+"parent_account_password",i),showToast("Successful","Parental control password changed successfully!"),this.clearParentChangePasswordInputs())},submitParentalControlTurnOff:function(){var e=$("#turn-off-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password-off").val());""==t?e.text("Please enter the current password"):t!=parent_account_password?e.text("Current password is incorrect"):(parent_account_password="off",localStorage.setItem(storage_id+"parent_account_password","off"),showToast("Successful","Parental control turned off."),this.clearParentChangePasswordInputs(),this.setupParentalControlOptions())},submitParentalControlTurnOn:function(){var e=$("#turn-on-parental-validation-error"),t=(e.text(""),$("#settings-create-parental-password").val());""==t?e.text("Please enter the new password"):t.length<4?e.text("Password must be 4 digits"):(parent_account_password=t,localStorage.setItem(storage_id+"parent_account_password",t),showToast("Successful","Parental control turned on"),this.clearParentChangePasswordInputs(),this.setupParentalControlOptions())},clearParentChangePasswordInputs:function(){$("#change-parental-validation-error").val(""),$("#settings-current-parental-password").val(""),$("#settings-new-parental-password").val(""),$("#settings-confirm-parental-password").val(""),$("#settings-current-parental-password-off").val(""),$("#settings-create-parental-password").val("")},createCategoriesDoms:function(){var e,t={live:LiveModel.getCategories(!0,!0),movies:VodModel.getCategories(!0,!0),series:SeriesModel.getCategories(!0,!0)},i={live:"",movies:"",series:""};for(e in t){var s=t[e];if(0!=s.length)for(var o=0;o<s.length;o++)i[e]+='        <div           class="setting-select-multi-option '+(s[o].is_hide?"":"checked")+'"          onmouseenter="settings_page.hoverHideCategoriesOption('+o+', true)"          onclick="settings_page.handleMenuClick()"        >          '+s[o].category_name+"        </div>"}var a=$("#hide-categories-settings .setting-select-multi-options");$(a[0]).html(i.live),$(a[1]).html(i.movies),$(a[2]).html(i.series),this.hide_categories_live_items=$("#hide_categories_live_container .setting-select-multi-option"),this.hide_categories_movies_items=$("#hide_categories_movies_container .setting-select-multi-option"),this.hide_categories_series_items=$("#hide_categories_series_container .setting-select-multi-option")},setupHideCategoriesOptions:function(){var e=this.keys;e.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("current"),$("#hide_categories_movies_container").hide(),$("#hide_categories_series_container").hide(),this.clickHideCategoriesTab(e.current_hide_categories_tabs_selection)},hoverHideCategoriesTab:function(e){var t=this.keys;t.focused_part="hide_categories_tabs",this.updateActiveClass(this.hide_categories_tabs_items,e),$(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),t.hide_categories_tabs_selection=e},clickHideCategoriesTab:function(e){var t=this.keys;switch(t.hide_categories_tabs_selection=e,t.current_hide_categories_tabs_selection=e,t.hide_categories_selection=0,$(this.hide_categories_tabs_items).removeClass("current").eq(e).addClass("current"),$("#hide_categories_live_container").hide(),$("#hide_categories_movies_container").hide(),$("#hide_categories_series_container").hide(),e){case 0:$("#hide_categories_live_container").show();break;case 1:$("#hide_categories_movies_container").show();break;case 2:$("#hide_categories_series_container").show()}},hoverHideCategoriesOption:function(e,t){var i=this.keys;switch(i.focused_part="hide_categories",$(this.hide_categories_tabs_items).removeClass("active"),i.hide_categories_selection=e,i.current_hide_categories_tabs_selection){case 0:this.hoverOption("#hide_categories_live_container",this.hide_categories_live_items,i.hide_categories_selection,t);break;case 1:this.hoverOption("#hide_categories_movies_container",this.hide_categories_movies_items,i.hide_categories_selection,t);break;case 2:this.hoverOption("#hide_categories_series_container",this.hide_categories_series_items,i.hide_categories_selection,t)}},clickHideCategoriesOption:function(e){var t=[];switch(this.keys.current_hide_categories_tabs_selection){case 0:t=LiveModel.getCategories(!0,!0),LiveModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_live_items[e]),t[e].is_hide);break;case 1:t=VodModel.getCategories(!0,!0),VodModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_movies_items[e]),t[e].is_hide);break;case 2:t=SeriesModel.getCategories(!0,!0),SeriesModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_series_items[e]),t[e].is_hide)}},toggleCategoryItem:function(e,t){t?e.removeClass("checked"):e.addClass("checked")},getSelectedLanguageWords:function(e){for(var t={},i=0;i<languages.length;i++)if(languages[i].code===e){t=languages[i].words;break}current_words=t},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language),this.doms_translated.map(function(e,t){var i=$(t).data("word_code");void 0!==current_words[i]&&$(t).text(current_words[i])})},setupChangeLanguageOptions:function(){for(var e=0,t=languages.length,i=0;i<t;i++)if(languages[i].code===settings.language){e=i;break}$(this.change_language_items).removeClass("current").eq(e).addClass("current")},hoverChangeLanguageOption:function(e,t){var i=this.keys;i.focused_part="change_language",i.change_language_selection=e,this.hoverOption("#settings-languages-options",this.change_language_items,i.change_language_selection,t)},clickChangeLanguageOption:function(e){void 0!==languages[e]&&(settings.saveSettings("language",languages[e].code,""),this.changeDomsLanguage(),$(this.change_language_items).removeClass("current").eq(e).addClass("current"))},hoverClearCacheOption:function(e){var t=this.keys;t.focused_part="clear_cache",this.updateActiveClass(this.clear_cache_items,e),t.clear_cache_selection=e},clickClearCacheOption:function(){clear_cache_page.handleMenuClick(!0)},hoverClearWatchListOption:function(e){var t=this.keys;t.focused_part="clear_watch_lists",this.updateActiveClass(this.clear_watch_lists_items,e),t.clear_watch_lists_selection=e},clickClearWatchListsOption:function(e){switch(this.keys.clear_watch_lists_selection){case 0:clear_recent_page.handleMenuClick("vod");break;case 1:clear_recent_page.handleMenuClick("series")}},setupSubtitleOptions:function(){$(this.subtitle_items).removeClass("current"),this.updateSubtitleSize(settings.subtitle_size),this.updateSubtitleBackground(settings.subtitle_bg)},updateSubtitleSize:function(e){$(".subtitle-container").css({"font-size":e/16+"rem"}),$("#subtitle-settings-preview-text").css("font-size",e/16+"rem"),$(this.subtitle_items[0]).find(".settings-multi-value-option-value").text(e+"px"),settings.subtitle_size=e,settings.saveSettings("subtitle_size",e,"")},updateSubtitleBackground:function(e){$(".subtitle-container").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$("#subtitle-settings-preview-text").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$(this.subtitle_items[1]).find(".settings-multi-value-option-value").text(e),settings.subtitle_bg=e,settings.saveSettings("subtitle_bg",e,"")},hoverSubtitleOption:function(e){$(this.subtitle_items).removeClass("current");var t=this.keys;t.focused_part="subtitle",this.updateActiveClass(this.subtitle_items,t.subtitle_selection=e)},clickSubtitleOption:function(e){this.keys.focused_part="subtitle_option",$(this.subtitle_items).removeClass("current").eq(e).addClass("current")},handleSubtitleSettingChange:function(e){var t=this.keys,i=Number(settings.subtitle_size),s=settings.subtitle_bg,o=Object.keys(this.subtitle_bg_options);switch(t.subtitle_selection){case 0:this.updateSubtitleSize(i=80<(i=(i+=5*e)<20?20:i)?80:i);break;case 1:var a=o.indexOf(s)+e,a=o[a=(a=a<0?o.length-1:a)>=o.length?0:a];this.updateSubtitleBackground(a)}},setupStreamFormatOptions:function(){var e={native:0,hls:1}[settings.stream_format]||0;$(this.stream_format_items).removeClass("current").eq(e).addClass("current")},hoverStreamFormatOption:function(e){var t=this.keys;t.focused_part="stream_format",this.updateActiveClass(this.stream_format_items,e),t.stream_format_selection=e},clickStreamFormatOption:function(e){settings.saveSettings("stream_format",["native","hls"][e],""),$(this.stream_format_items).removeClass("current").eq(e).addClass("current")},setupToggleTMDBOptions:function(){var e={off:0,on:1}[settings.tmdb_choice]||0;$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},hoverToggleTMDBOption:function(e){var t=this.keys;t.focused_part="toggle_tmdb",this.updateActiveClass(this.toggle_tmdb_items,e),t.toggle_tmdb_selection=e},clickToggleTMDBOption:function(e){settings.saveSettings("tmdb_choice",["off","on"][e],""),$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},setupToggleHomeFavoritesOptions:function(){var e={off:0,on:1}[settings.home_favorites_choice]||0;$(this.toggle_home_favorites_items).removeClass("current").eq(e).addClass("current")},hoverToggleHomeFavoritesOption:function(e){var t=this.keys;t.focused_part="toggle_home_favorites",this.updateActiveClass(this.toggle_home_favorites_items,e),t.toggle_home_favorites_selection=e},clickToggleHomeFavoritesOption:function(e){settings.saveSettings("home_favorites_choice",["off","on"][e],""),$(this.toggle_home_favorites_items).removeClass("current").eq(e).addClass("current"),home_page.setLiveFavoritesChoice()},setupLiveInitializationOptions:function(){var e={default:0,last:1,favorite:2}[settings.live_initialization_choice]||0;$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},hoverLiveInitializationOption:function(e){var t=this.keys;t.focused_part="live_initialization",this.updateActiveClass(this.live_initialization_items,e),t.live_initialization_selection=e},clickLiveInitializationOption:function(e){settings.saveSettings("live_initialization_choice",["default","last","favorite"][e],""),$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},setupLiveLayoutOptions:function(){var e=parseInt(localStorage.getItem(storage_id+"live_layout"));void 0===(e=(e=null==typeof e?1:e)||0==e?e:1)&&(e=1),(isNaN(e)?$(this.live_layout_items).removeClass("current").eq(0):$(this.live_layout_items).removeClass("current").eq(e)).addClass("current")},hoverLiveLayoutOption:function(e){var t=this.keys;t.focused_part="live_layout",this.updateActiveClass(this.live_layout_items,e),t.live_layout_selection=e},clickLiveLayoutOption:function(e){localStorage.setItem(storage_id+"live_layout",e),$(this.live_layout_items).removeClass("current").eq(e).addClass("current")},setupLoadOnDemandOptions:function(){var e=parseInt(localStorage.getItem(storage_id+"load_on_demand"));void 0===(e=(e=null==typeof e?1:e)||0==e?e:1)&&(e=1),(isNaN(e)?$(this.load_on_demand_items).removeClass("current").eq(1):$(this.load_on_demand_items).removeClass("current").eq(e)).addClass("current")},hoverLoadOnDemandOption:function(e){var t=this.keys;t.focused_part="load_on_demand",this.updateActiveClass(this.load_on_demand_items,e),t.load_on_demand_selection=e},clickLoadOnDemandOption:function(e){localStorage.setItem(storage_id+"load_on_demand",e),$(this.load_on_demand_items).removeClass("current").eq(e).addClass("current"),0==e&&window.location.reload()},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"settings_selection":this.clickSettingsItem(e.settings_selection);break;case"parental_control_tabs":this.clickParentalControlTab(e.parental_control_tabs_selection);break;case"parental_control":this.clickParentalControlOption(e.parental_control_selection);break;case"hide_categories_tabs":this.clickHideCategoriesTab(e.hide_categories_tabs_selection);break;case"hide_categories":this.clickHideCategoriesOption(e.hide_categories_selection);break;case"change_language":this.clickChangeLanguageOption(e.change_language_selection);break;case"clear_cache":this.clickClearCacheOption();break;case"clear_watch_lists":this.clickClearWatchListsOption();break;case"subtitle":this.clickSubtitleOption(e.subtitle_selection);break;case"stream_format":this.clickStreamFormatOption(e.stream_format_selection);break;case"toggle_tmdb":this.clickToggleTMDBOption(e.toggle_tmdb_selection);break;case"toggle_home_favorites":this.clickToggleHomeFavoritesOption(e.toggle_home_favorites_selection);break;case"live_initialization":this.clickLiveInitializationOption(e.live_initialization_selection);break;case"live_layout":this.clickLiveLayoutOption(e.live_layout_selection);break;case"load_on_demand":this.clickLoadOnDemandOption(e.load_on_demand_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":t.settings_selection=utilities.clampNumber(t.settings_selection+e,0,this.settings_doms.length-1),this.hoverSettingsItem(t.settings_selection);break;case"parental_control_tabs":0<e&&this.hoverParentalControlOption(0);break;case"parental_control":if(t.parental_control_selection+=e,-1==t.current_parental_control_tab_selection&&t.parental_control_selection<0)t.parental_control_selection=0;else if(t.parental_control_selection<0)t.parental_control_selection=0,this.hoverParentalControlTab(t.parental_control_tabs_selection);else{switch(t.current_parental_control_tab_selection){case 0:3<t.parental_control_selection&&(t.parental_control_selection=3);break;case 1:case-1:1<t.parental_control_selection&&(t.parental_control_selection=1)}this.hoverParentalControlOption(t.parental_control_selection)}break;case"hide_categories_tabs":0<e&&this.hoverHideCategoriesOption(0);break;case"hide_categories":if(t.hide_categories_selection+=e,t.hide_categories_selection<0)t.hide_categories_selection=0,this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);else{switch(t.current_hide_categories_tabs_selection){case 0:t.hide_categories_selection>=this.hide_categories_live_items.length&&(t.hide_categories_selection=this.hide_categories_live_items.length-1);break;case 1:t.hide_categories_selection>=this.hide_categories_movies_items.length&&(t.hide_categories_selection=this.hide_categories_movies_items.length-1);break;case 2:t.hide_categories_selection>=this.hide_categories_series_items.length&&(t.hide_categories_selection=this.hide_categories_series_items.length-1)}this.hoverHideCategoriesOption(t.hide_categories_selection)}break;case"change_language":t.change_language_selection=utilities.clampNumber(t.change_language_selection+e,0,this.change_language_items.length-1),this.hoverChangeLanguageOption(t.change_language_selection);break;case"clear_watch_lists":t.clear_watch_lists_selection=utilities.clampNumber(t.clear_watch_lists_selection+e,0,this.clear_watch_lists_items.length-1),this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case"subtitle":t.subtitle_selection=utilities.clampNumber(t.subtitle_selection+e,0,this.subtitle_items.length-1),this.hoverSubtitleOption(t.subtitle_selection);break;case"stream_format":t.stream_format_selection=utilities.clampNumber(t.stream_format_selection+e,0,this.stream_format_items.length-1),this.hoverStreamFormatOption(t.stream_format_selection);break;case"toggle_tmdb":t.toggle_tmdb_selection=utilities.clampNumber(t.toggle_tmdb_selection+e,0,this.toggle_tmdb_items.length-1),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case"toggle_home_favorites":t.toggle_home_favorites_selection=utilities.clampNumber(t.toggle_home_favorites_selection+e,0,this.toggle_home_favorites_items.length-1),this.hoverToggleHomeFavoritesOption(t.toggle_home_favorites_selection);break;case"live_initialization":t.live_initialization_selection=utilities.clampNumber(t.live_initialization_selection+e,0,this.live_initialization_items.length-1),this.hoverLiveInitializationOption(t.live_initialization_selection);break;case"live_layout":t.live_layout_selection=utilities.clampNumber(t.live_layout_selection+e,0,this.live_layout_items.length-1),this.hoverLiveLayoutOption(t.live_layout_selection);break;case"load_on_demand":t.load_on_demand_selection=utilities.clampNumber(t.load_on_demand_selection+e,0,this.load_on_demand_items.length-1),this.hoverLoadOnDemandOption(t.load_on_demand_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":0<e&&this.clickSettingsItem(t.settings_selection);break;case"parental_control_tabs":t.parental_control_tabs_selection+=e,t.parental_control_tabs_selection<0?(t.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.parental_control_tabs_selection>=this.parental_control_tab_items.length&&(t.parental_control_tabs_selection=this.parental_control_tab_items.length-1),this.hoverParentalControlTab(t.parental_control_tabs_selection));break;case"parental_control":e<0&&(this.resetParentalControlStyles(),this.hoverSettingsItem(t.settings_selection));break;case"hide_categories_tabs":t.hide_categories_tabs_selection+=e,t.hide_categories_tabs_selection<0?(t.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.hide_categories_tabs_selection>=this.hide_categories_tabs_items.length&&(t.hide_categories_tabs_selection=this.hide_categories_tabs_items.length-1),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection));break;case"hide_categories":e<0&&($(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection));break;case"change_language":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.change_language_items));case"clear_cache":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_cache_items));break;case"clear_watch_lists":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_watch_lists_items));break;case"subtitle":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.subtitle_items));break;case"subtitle_option":this.handleSubtitleSettingChange(e);break;case"stream_format":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.stream_format_items));break;case"toggle_tmdb":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_tmdb_items));break;case"toggle_home_favorites":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_home_favorites_items));break;case"live_initialization":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.live_initialization_items));break;case"live_layout":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.live_layout_items));break;case"load_on_demand":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.load_on_demand_items))}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},turn_off_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#turn-off-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="turn-off-page",this.hoverMenuItem(0),$("#turn-off-modal").modal("show")},goBack:function(){$("#turn-off-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close();break;case 1:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},parent_confirm_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".parent-confirm-item"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="parent-confirm-page",this.resetPasswordInput(),this.hoverMenuItem(0),$("#parent-confirm-password-error").hide(),$("#parent-confirm-modal").modal("show")},goBack:function(){$("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"vod-summary-page"!==this.prev_route&&"series-summary-page"!==this.prev_route||(current_route="vod-series-page"),"channel-category-page"===this.prev_route&&(current_route="channel-category-page")},resetPasswordInput:function(){var e=$("#parent-confirm-password"),t=e.clone().val("");e.replaceWith(t)},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:$(this.menu_doms[0]).find("input").focus();break;case 1:var t=$(this.menu_doms[0]).find("input").val();$("#parent-confirm-password-error").hide(),t!=parent_account_password?$("#parent-confirm-password-error").slideDown():($("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"channel-page"===this.prev_route?channel_page.showCategoryChannels():"vod-series-page"===this.prev_route?vod_series_page.showCategoryContent():"stream-category-page"===this.prev_route&&stream_category_page.showStreamPage());break;case 2:this.goBack()}},handleMenusUpDown:function(e){var t=this.keys;1<=t.menu_selection&&0<e||(1<=t.menu_selection&&e<0?t.menu_selection=0:0==t.menu_selection&&0<e&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&1<=t.menu_selection&&(t.menu_selection+=e,t.menu_selection<1&&(t.menu_selection=0),2<t.menu_selection&&(t.menu_selection=2),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},activation_page={keys:{focused_part:"input_selection",input_selection:0,btn_selection:0},prev_route:"",buttons:$(".activation-btn"),activation_input:$("#activation-input")[0],is_loading:!1,tried_panel_indexes:[],init:function(e){this.prev_route=e,$("#activation-modal").modal("show"),$(this.activation_input).val(""),current_route="activation-page",this.hoverInput(),this.tried_panel_indexes=[],$("#activation-code-message").hide()},goBack:function(){$("#activation-modal").modal("hide"),current_route=this.prev_route},showErrorMessage:function(e){$("#activation-code-message").text(e).slideDown(),setTimeout(function(){$("#activation-code-message").slideUp()},4e3)},confirmActivationCode:function(){var t,e,i,s;$("#activation-code-message").hide(),(activation_code=$(this.activation_input).val())?(showLoader(this.is_loading=!0),e=(s=pickPanelUrl((t=this).tried_panel_indexes))[1],i=s[0],s=encryptRequest({mac_address:mac_address,code:activation_code,app_type:platform,version:"samsung"===platform?samsung_version:lg_version}),$.ajax({method:"post",url:e+"/change-code",data:{data:s},success:function(e){t.is_loading&&(showLoader(t.is_loading=!1),"success"===e.status?($(".activation-code").text(activation_code),t.goBack(),"login-page"===t.prev_route&&login_page.reloadApp()):t.showErrorMessage(e.msg))},error:function(){t.tried_panel_indexes.length<panel_urls.length?(t.tried_panel_indexes.push(i),t.fetchPlaylistInformation()):(showLoader(t.is_loading=!1),t.showErrorMessage("Sorry, Code is not valid"))}})):this.showErrorMessage("Sorry, activation code is required")},hoverInput:function(){$(this.buttons).removeClass("active"),$(this.activation_input).addClass("active"),this.keys.focused_part="input_selection"},hoverBtn:function(e){var t=this.keys;t.btn_selection=e,t.focused_part="btn_selection",$(this.activation_input).removeClass("active"),$(this.buttons).removeClass("active"),$(this.buttons[e]).addClass("active")},handleMenuLeftRight:function(e){var t=this.keys;"btn_selection"===t.focused_part&&(t.btn_selection=0<e?1:0,this.hoverBtn(t.btn_selection))},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"input_selection":0<e&&($(this.activation_input).blur(),this.hoverBtn(t.btn_selection));break;case"btn_selection":e<0&&this.hoverInput()}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"input_selection":$(this.activation_input).focus(),setSelectionRange(this.activation_input);break;case"btn_selection":0==e.btn_selection?this.confirmActivationCode():this.goBack()}},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},playlist_edit_page={initiated:!1,keys:{focused_part:"playlist_edit_selection",playlist_edit_selection:0},playlist_edit_doms:$(".playlist-edit-item"),back_btn_dom:null,playlist:null,is_loading:!1,tried_panel_indexes:[],prev_route:"",init:function(e){this.prev_route=e,this.tried_panel_indexes=[],this.playlist=null,$("#home-page").addClass("hide"),$("#playlist-edit-page").removeClass("hide"),$("#playlist-edit-error-message").hide();$(this.playlist_edit_doms[0]).val(""),$(this.playlist_edit_doms[1]).val(""),$(this.playlist_edit_doms[2]).val(""),$(this.playlist_edit_doms[3]).val(""),this.hoverPlaylistEditItem(0),current_route="playlist-edit-page"},savePlaylist:function(){var e,t,i=$(this.playlist_edit_doms[0]).val(),s=$(this.playlist_edit_doms[1]).val(),o=$(this.playlist_edit_doms[2]).val(),a=$(this.playlist_edit_doms[3]).val();i?s?o?a?($("#playlist-edit-error-message").slideUp(),showLoader(!0),this.is_loading=!0,e=s+"/player_api.php?username="+o+"&password="+a,t=this,$.ajax({method:"get",url:e,success:function(e){!e||!e.user_info||0==(e=e.user_info).auth||e.status&&("Expired"===e.status||"Banned"===e.status)?t.showPlaylistErrorMessage():(e={url:s+="/get.php?username="+o+"&password="+a+"&type=m3u&output=hls",playlist_name:i,mac_address:mac_address,app_type:platform},t.updatePlaylistWithServer(e))},error:function(){t.showPlaylistErrorMessage()}})):$("#playlist-edit-error-message").text("Sorry, password is required").slideDown():$("#playlist-edit-error-message").text("Sorry, username is required").slideDown():$("#playlist-edit-error-message").text("Sorry, playlist url is required").slideDown():$("#playlist-edit-error-message").text("Sorry, playlist name is required").slideDown()},showPlaylistErrorMessage:function(){showLoader(!1),this.is_loading=!1,$("#playlist-edit-error-message").html("Sorry, Your playlist is not working<br>Please check your playlist and try again").slideDown()},updatePlaylistWithServer:function(e){var t=encryptRequest(e),i=pickPanelUrl(this.tried_panel_indexes),s=i[1],o=i[0],a=this;$.ajax({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+s+"/add_playlist",data:{data:t},success:function(e){a.tried_panel_indexes=[];e=decryptResponse(e);a.playListSaved(e,!0)},error:function(){a.tried_panel_indexes.push(o),a.tried_panel_indexes.length<panel_urls.length&&a.updatePlaylistWithServer(e)}})},playListSaved:function(e,t){console.log(e),playlist_urls.push(e),saveData("playlist_urls",playlist_urls),showLoader(!1),this.is_loading=!1;var i=playlist_urls.length-1,i='<div class="playlist-item-container"                onmouseenter="playlist_page.hoverPlayListItem('+i+')"                onclick="playlist_page.changePlaylist('+i+')"            >                <div class="playlist-item-wrapper">                    <img class="playlist-item-logo" src="'+HOST+'app_src_min/images/logo.png">                     <span class="playlist-name">'+e.playlist_name+'</span><div class="playlist-state"><i class="fa fa-play"></i></div></div>         </div>';$("#playlist-items-container").append(i),playlist_page.playlist_doms=$(".playlist-item-wrapper"),this.goBack()},hoverPlaylistEditItem:function(e){var t=this.keys;t.focused_part="playlist_edit_selection",$(this.playlist_edit_doms).removeClass("active"),t.playlist_edit_selection=e,$(this.playlist_edit_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;"playlist_edit_selection"===e.focused_part&&(e.playlist_edit_selection<4?($(this.playlist_edit_doms[e.playlist_edit_selection]).focus(),setSelectionRange(this.playlist_edit_doms[e.playlist_edit_selection])):4==e.playlist_edit_selection?this.savePlaylist():this.goBack())},handleMenuLeftRight:function(e){var t=this.keys;"playlist_edit_selection"===t.focused_part&&(t.playlist_edit_selection=0<e?5:4,this.hoverPlaylistEditItem(t.playlist_edit_selection))},handleMenusUpDown:function(e){var t=this.keys;if("playlist_edit_selection"===t.focused_part){if(4<=t.playlist_edit_selection){if(!(e<0))return;t.playlist_edit_selection=3}else t.playlist_edit_selection+=e;t.playlist_edit_selection<0&&(t.playlist_edit_selection=0),this.hoverPlaylistEditItem(t.playlist_edit_selection)}},goBack:function(){$("#playlist-edit-page").addClass("hide"),current_route="playlist-page"},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},category_selection_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:[],back_url:"",categories:[],init:function(e,t){this.back_url=e,this.categories=t,current_route="category-selection-page";var i="";t.map(function(e,t){i+='<div class="category-item-container">                    <div class="category-item-wrapper"                        onmouseenter="category_selection_page.hoverMenuItem('+t+')"                         onclick="category_selection_page.handleMenuClick()"                     >'+e.category_name+"                     </div>                 </div>                "}),$("#select-category-items-container").html(i),this.menu_doms=$("#select-category-items-container .category-item-wrapper"),$("#select-category-modal").modal("show"),this.hoverMenuItem(0)},goBack:function(){$("#select-category-modal").modal("hide"),current_route=this.back_url},hoverMenuItem:function(e){$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active"),this.keys.menu_selection=e,moveScrollPosition($("#select-category-items-container"),$(this.menu_doms[e]).closest(".category-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;"menu_selection"===e.focused_part&&(this.goBack(),"channel-page"===this.back_url)&&channel_page.goToSelectedCategory(e.menu_selection)},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMenuItem(t.menu_selection))},handleMenusUpDown:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(checkVerticalMovable(this.menu_doms.length,4,t.menu_selection,e)&&(t.menu_selection+=4*e),t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.BLUE:this.showPlayListEditPage();break;case tvKey.RED:this.removePlayList()}}},SrtParser={seperator:",",init:function(){this.seperator=","},timestampToSeconds:function(e){var e=e.split(","),t=e[0],e=parseInt(e[1]),t=t.split(":").map(function(e){return parseInt(e)}),i=t[0];return.001*e+t[2]+60*t[1]+3600*i},correctFormat:function(e){var e=e.replace(".",",").split(","),t=e[0],e=this.fixed_str_digit(3,e[1],!0),t=t.split(":"),i=t[0],s=t[1],t=t[2];return this.fixed_str_digit(2,i,!1)+":"+this.fixed_str_digit(2,s,!1)+":"+this.fixed_str_digit(2,t,!1)+","+e},fixed_str_digit:function(e,t,i){return t.length==e?t:e<t.length?t.slice(0,e):t.length<e?i?t.padEnd(e,"0"):t.padStart(e,"0"):void 0},tryComma:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g);return e.shift(),e},tryDot:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g);return e.shift(),this.seperator=".",e},fromSrt:function(e){if(""==e.trim())return[];for(var t=(new Date).getTime(),i=this.tryComma(e),s=(0==i.length&&(i=this.tryDot(e)),[]),o=0;o<i.length;o+=4){var a=this.correctFormat(i[o+1].trim()),n=this.correctFormat(i[o+2].trim()),a={id:i[o].trim(),startTime:a,startSeconds:this.timestampToSeconds(a),endTime:n,endSeconds:this.timestampToSeconds(n),text:i[o+3].trim()};s.push(a)}e=(new Date).getTime();return console.log(e-t,"ms take to parse"),s}},SrtOperation={current_srt_index:0,next_srt_time:0,srt:[],stopped:!1,subtitle_shown:!1,time_difference:0,init:function(t,e){this.time_difference=0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1;var i=[];if(t)try{SrtParser.init(),i=SrtParser.fromSrt(t)}catch(e){console.log("here subtitle parse issue",e,t)}0<(this.srt=i).length?(this.stopped=!1,this.current_srt_index=this.findIndex(e,0,i.length-1),console.log("here found srt index",this.current_srt_index,e,i),this.current_srt_index<0&&(this.current_srt_index=0),this.next_srt_time=0):this.stopped=!0},findIndex:function(e,t,i){var s,o;return 0==(e+=this.time_difference)?0:(s=this.srt,i<t?i:s[o=Math.floor((t+i)/2)].startSeconds<=e&&e<s[o].endTime?o:s[o].startSeconds>e?this.findIndex(e,t,o-1):this.findIndex(e,o+1,i))},timeChange:function(e){if(!this.stopped){e+=this.time_difference,.98<=Math.random()&&console.log("current_time=",e,media_player.videoObj.currentTime);var t=this.current_srt_index,i=this.srt[t];if(e>=i.startSeconds&&e<i.endSeconds)this.subtitle_shown||$("#"+media_player.parent_id).find(".subtitle-container").html(i.text);else if(e>i.endSeconds){t=this.srt[t+1];try{e<t.startSeconds?this.subtitle_shown&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1):t.endSeconds>e?($("#"+media_player.parent_id).find(".subtitle-container").html(t.text),this.subtitle_shown=!0,this.current_srt_index+=1):(console.log("here finding new srt index"),this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0))}catch(e){console.log("subtitle timer issue",e)}}else if(e<i.startSeconds)try{this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0)}catch(e){}}},stopOperation:function(){this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},setTimeDifference:function(e){this.time_difference=parseInt(e),$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},deStruct:function(){this.srt=[],this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html("")}},search_page={keys:{top_menu_selection:0,hor_keys:[0,0,0],v_selection:0,movie_selection:[],focused_part:""},prev_dom:null,is_loading:!1,filtered_movies:[],render_counts:[0,0,0],prev_keyword:"",search_timeout:null,prev_route:"",top_menu_doms:$(".search-page-top-menu"),movie_doms:[],render_count_increment:50,searching_for:[],parent_elements:[$("#filtered_channels_container")[0],$("#filtered_movies_container")[0],$("#filtered_series_container")[0]],init:function(e,t){switch(this.prev_route=e,$("#filtered_movies_container").html(""),$("#filtered_channels_container").html(""),$("#filtered_series_container").html(""),$(".search-page-stream-type-container.live").hide(),$(".search-page-stream-type-container.vod").hide(),$(".search-page-stream-type-container.series").hide(),this.searching_for=t||"all",this.searching_for){case"vod":$(".search-page-stream-type-container.vod").show();break;case"series":$(".search-page-stream-type-container.series").show();break;case"live":$(".search-page-stream-type-container.live").show();break;default:$(".search-page-stream-type-container.live").show(),$(".search-page-stream-type-container.vod").show(),$(".search-page-stream-type-container.series").show()}this.filtered_movies=[],this.keys.hor_keys=[0,0,0],this.prev_keyword="",$("#search-page-input").val(""),$("#home-page").addClass("hide"),$("#search-page").show(),current_route="search-page",this.hoverTopMenu(0),this.handleMenuClick()},goBack:function(){switch(clearTimeout(this.search_timeout),$("#search-page-input").blur(),$("#search-page").hide(),current_route=this.prev_route,this.prev_route){case"vod-series-page":$("#vod-series-page").removeClass("hide");break;case"channel-category-page":$("#channel-category-page").removeClass("hide");break;case"channel-page":current_route="home-page";case"home-page":$("#home-page").removeClass("hide")}},keywordChange:function(){clearTimeout(this.search_timeout);var a=this;this.search_timeout=setTimeout(function(){var e=a.prev_keyword,t=$("#search-page-input").val().toLowerCase();if(e!=t&&t){showLoader(!0),a.is_loading=!0;var i=VodModel.getCategories(!1,!1),s=SeriesModel.getCategories(!1,!1),o=LiveModel.getCategories(!1,!1);switch(a.filtered_movies=[],a.searching_for){case"vod":a.filtered_movies.push([]),a.filtered_movies.push(a.getFilteredMovies(i,t)),a.filtered_movies.push([]);break;case"series":a.filtered_movies.push([]),a.filtered_movies.push([]),a.filtered_movies.push(a.getFilteredMovies(s,t));break;case"live":a.filtered_movies.push(a.getFilteredMovies(o,t)),a.filtered_movies.push([]),a.filtered_movies.push([]);break;default:a.filtered_movies.push(a.getFilteredMovies(o,t)),a.filtered_movies.push(a.getFilteredMovies(i,t)),a.filtered_movies.push(a.getFilteredMovies(s,t))}switch(a.render_counts=[0,0,0],a.keys.hor_keys=[0,0,0],a.movie_doms=[[],[],[]],$(a.parent_elements[0]).html(""),$(a.parent_elements[1]).html(""),$(a.parent_elements[2]).html(""),a.searching_for){case"vod":a.renderFilteredMovies(1,!1,!1);break;case"series":a.renderFilteredMovies(2,!1,!1);break;case"live":a.renderFilteredMovies(0,!1,!1);break;default:a.renderFilteredMovies(0,!1,!0),a.renderFilteredMovies(1,!1,!0),a.renderFilteredMovies(2,!1,!0)}a.prev_keyword=t;e=2e3;a.filtered_movies[0].length+a.filtered_movies[1].length+a.filtered_movies[2].length<50&&(e=500),setTimeout(function(){showLoader(!1),a.is_loading=!1},e)}},400)},getFilteredMovies:function(e,t){var i=[];return e.map(function(e){checkForAdult(e,"category",[])||"resume"===e.category_id||(e=e.movies.filter(function(e){return e.name.toLowerCase().includes(t)}),i=i.concat(e))}),i},renderFilteredMovies:function(s,e,t){var i,o,a,n,r,l,c,d,h,_=this.parent_elements[s],u=this.render_counts[s];0==this.filtered_movies[s].length?$(_).append("<p class='search-no-results'>No results found!</p>"):u>=this.filtered_movies[s].length||(i=this.render_count_increment,e&&(showLoader(!0),this.is_loading=!0),o=this,a="",n=0==s?"channel":"vod",r="stream_icon",c="stream_id",d=HOST+"app_src_min/images/default_movie.png",0==s&&(d=HOST+"app_src_min/images/default_channel.png",l=LiveModel.favourite_ids),1==s&&(VodModel.saved_video_times,l=VodModel.favourite_ids),2==s&&(r="cover",l=SeriesModel.favourite_ids,c="series_id"),h=this.filtered_movies[s].slice(u,u+i),t?$(".search-page-stream-items-container").addClass("one-line"):$(".search-page-stream-items-container").removeClass("one-line"),t=1500,h.length<10&&(t=0),h.map(function(e,t){var i=l.includes(e[c]);a+='<div class="filtered-movie-container '+n+'">                    <div class="filtered-movie-wrapper"                        onmouseenter="search_page.hoverMovie('+(u+t)+","+s+')"                        onclick="search_page.handleMenuClick()"                     >'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'<div class="filtered-movie-img-wrapper">                            <img src="'+e[r]+'" onerror="this.src=\''+d+'\'">                        </div>                        <div class="filtered-movie-title-wrapper">                            <div class="filtered-movie-title">'+e.name+"</div>                         </div>                     </div>                </div>"}),this.render_counts[s]+=i,$(_).append(a),this.movie_doms[s]=$(_).find(".filtered-movie-wrapper"),e&&setTimeout(function(){showLoader(!1),o.is_loading=!1},t))},hoverTopMenu:function(e){var t;key_focused||((t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],t=this.parent_elements[0],moveScrollPosition($("#search-page-contents-wrapper"),$(t).closest(".search-page-stream-type-container"),"vertical",!1))},hoverMovie:function(e,t){if(!key_focused){var i=this.keys,i=(i.hor_keys[t]=e,i.v_selection=t,i.focused_part="movie_selection",this.parent_elements[t]);if($(this.prev_dom).removeClass("active"),$(this.movie_doms[t][e]).addClass("active"),this.prev_dom=this.movie_doms[t][e],moveScrollPosition(i,$(this.prev_dom).closest(".filtered-movie-container"),"horizontal",!1),"all"==this.searching_for)moveScrollPosition($("#search-page-contents-wrapper"),$(i).closest(".search-page-stream-type-container"),"vertical",!1);else{var s="";switch(this.searching_for){case"live":s="channels";break;case"vod":s="movies";break;case"series":s="series"}moveScrollPosition($("#filtered_"+s+"_container"),this.movie_doms[t][e],"vertical",!1)}}},handleMenuLeftRight:function(e){var t=this.keys;if(!key_focused)switch(t.focused_part){case"top_menu_selection":break;case"movie_selection":var i=t.hor_keys[t.v_selection]+e;(i=i<0?0:i)>=this.movie_doms[t.v_selection].length&&(i=this.movie_doms[t.v_selection].length-1),this.hoverMovie(i,t.v_selection),0<e&&i>=this.movie_doms[t.v_selection].length-9&&this.renderFilteredMovies(t.v_selection,!0)}},handleMenuUpDown:function(e){var t,i=this.keys;switch(i.focused_part){case"top_menu_selection":if(!key_focused&&0<e){if("vod"==this.searching_for)t=1;else if("series"==this.searching_for)t=2;else if("live"==this.searching_for)t=0;else for(var s=0;s<this.filtered_movies.length;s++)if(0<this.filtered_movies[s].length){t=s;break}null!=t&&0<this.filtered_movies[t].length&&(i.v_selection=t,this.hoverMovie(i.hor_keys[t],t));for(s=0;s<this.filtered_movies.length;s++)if(0<this.filtered_movies[s].length){i.v_selection=s,this.hoverMovie(i.hor_keys[s],s);break}}break;case"movie_selection":if("all"==this.searching_for){var o=-1;if(0<e){if(2<=i.v_selection)return;for(s=i.v_selection+1;s<3;s++)if(0<this.filtered_movies[s].length){o=s;break}}else for(s=i.v_selection-1;0<=s;s--)if(0<this.filtered_movies[s].length){o=s;break}if(e<0&&(i.v_selection<=0||-1===o)||-1===o)return void this.hoverTopMenu(0);-1!==o&&this.hoverMovie(i.hor_keys[o],o)}else{var o=-1,a=8;switch(this.searching_for){case"live":o=0,a=6;break;case"vod":o=1,a=8;break;case"series":o=2,a=8}i.hor_keys[o]+=a*e;var n=this.filtered_movies[o];if(i.hor_keys[o]>=n.length&&(i.hor_keys[o]=n.length-1),i.hor_keys[o]<0)return i.hor_keys[o]=0,void this.hoverTopMenu(0);-1!==o&&this.hoverMovie(i.hor_keys[o],o),0<e&&i.hor_keys[o]>=this.movie_doms[i.v_selection].length-9&&this.renderFilteredMovies(i.v_selection,!0)}}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"top_menu_selection":0==e.top_menu_selection&&(key_focused?$("#search-page-input").blur():($("#search-page-input").focus(),setSelectionRange($("#search-page-input"))));break;case"movie_selection":var t=this.filtered_movies[e.v_selection][e.hor_keys[e.v_selection]];switch($("#search-page").hide(),e.v_selection){case 0:channel_page.init("search-page",t);break;case 1:current_movie=this.filtered_movies[1][e.hor_keys[1]],vod_summary_page.init("search-page");break;case 2:current_series=this.filtered_movies[2][e.hor_keys[2]],series_summary_page.init("search-page")}}},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},catchup_page={keys:{focused_part:"category_selection",category_search_selection:0,channel_search_selection:0,category_selection:0,channel_selection:0},category_doms:[],channel_doms:[],category_search_dom:$("#catchup-page-category-search-bar"),channel_search_dom:$("#catchup-page-channel-search-bar"),all_categories:[],categories:[],movies:[],all_movies:[],prev_focus_dom:null,prev_keyword:"",prev_category_keyword:"",search_timer:null,is_loading:!1,category_shown:!1,init:function(){var e;this.is_loading=!1,this.category_shown=!1,"xc"===settings.playlist.playlist_type&&($("#catchup-page-category-items-container").html(""),$("#catchup-page").addClass("category-expanded"),this.prev_category_keyword="",$("#catchup-page-category-search-input").val(""),e=LiveModel.getCategories(!1,!1),this.all_categories=e.map(function(e){var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));return e.movies=t,e}).filter(function(e){return 0<e.movies.length}),this.categories=this.all_categories.filter(function(e){return!0}),0<this.all_categories.length)?($("#home-page").addClass("hide"),$("#catchup-page").removeClass("hide"),this.renderCategories(),current_route="catchup-page",this.hoverCategory(0),this.showCategoryChannels()):showToast(current_words.sorry||"Sorry",current_words.no_catchup_available||"No catch up available for current playlist")},goBack:function(){var e=this.keys;switch(e.focused_part){case"channel_search_selection":if(key_focused)break;case"channel_selection":$("#catchup-page").addClass("category-expanded"),this.category_shown=!0,this.hoverCategory(e.category_selection);break;default:$("#catchup-page").addClass("hide"),home_page.reEnter()}},renderCategories:function(){var i="";this.categories.map(function(e,t){i+='<div class="catchup-page-category-item-container">                    <div class="catchup-page-category-item bg-focus"                        onmouseenter="catchup_page.hoverCategory('+t+')"                        onclick="catchup_page.handleMenuClick()"                        data-index="'+t+'"                    >                        <span class="catchup-category-name-wrapper">'+e.category_name+'</span>                        <span class="catchup-category-stream-count-container">                            <span class="catchup-category-stream-count">'+e.movies.length+'</span>                            <span class="catchup-category-count-icon">                                <img src="'+HOST+'app_src_min/images/forward_arrow.png">                            </span>                        </span>                    </div>                </div>'}),$("#catchup-page-category-items-container").html(i),this.category_doms=$(".catchup-page-category-item"),this.keys.category_selection=0},showCategoryChannels:function(){var e,t=this.keys;t.category_selection!==this.current_category_index&&(this.prev_keyword="",$("#catchup-page-channel-search-input").val(""),e=this.categories[t.category_selection],$("#catchup-category-title").text(e.category_name),e=e.movies,this.all_movies=e,this.movies=e.filter(function(e){return!0}),this.renderCategoryChannels(),t.channel_selection=0,this.current_category_index=t.category_selection)},renderCategoryChannels:function(){var i="";this.movies.map(function(e,t){i+='<div class="catchup-channel-menu-item-container">                    <div class="catchup-channel-menu-item bg-focus" data-channel_id="'+e.stream_id+'"                       data-index="'+t+'"                       onmouseenter="catchup_page.hoverChannel(this)"                       onclick="catchup_page.handleMenuClick()"                    >                        <span class="catchup-channel-number">'+e.num+'</span>                        <span class="catchup-channel-icon-wrapper"><img class="catchup-channel-icon" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></span>                        <span class="catchup-channel-name">'+e.name+"</span>                    </div>                </div>"}),$("#catchup-page-channel-items-container").html(i),this.channel_doms=$("#catchup-page-channel-items-container .catchup-channel-menu-item")},getEpgProgrammes:function(){var t,i,e=this.movies[this.keys.channel_selection];this.epg_channel_id!==e.stream_id&&(i=[],(t=this).programmes=[],t.showNextProgrammes(),this.epg_channel_id=e.stream_id,"xc"===settings.playlist.playlist_type)&&$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+e.stream_id,success:function(e){e.epg_listings.map(function(e){i.push({start:e.start,stop:e.end,title:e.title,description:e.description})}),t.programmes=i,t.updateNextProgrammes()}})},channelKeywordChange:function(){clearTimeout(this.search_timer);var s=this;this.search_timer=setTimeout(function(){var e,t,i=$("#catchup-page-channel-search-input").val();s.prev_keyword!==i&&((e=s.all_movies).sort(function(e,t){return e.name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.name.toLowerCase().includes(i)})),s.movies=t,s.prev_keyword=i,s.renderCategoryChannels())},400)},categoryKeywordChange:function(){clearTimeout(this.search_timer);var s=this;this.search_timer=setTimeout(function(){var e,t,i=$("#catchup-page-category-search-input").val();s.prev_category_keyword!==i&&((e=s.all_categories).sort(function(e,t){return e.category_name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.category_name.toLowerCase().includes(i)})),s.categories=t,s.prev_category_keyword=i,s.renderCategories())},400)},hoverCategorySearchBar:function(){this.keys.focused_part="category_search_selection",$(this.prev_focus_dom).removeClass("active"),$(this.category_search_dom).addClass("active"),this.prev_focus_dom=this.category_search_dom,$("#catchup-page").addClass("category-expanded"),this.category_shown=!0},hoverChannelSearchBar:function(){this.keys.focused_part="channel_search_selection",$(this.prev_focus_dom).removeClass("active"),$(this.channel_search_dom).addClass("active"),this.prev_focus_dom=this.channel_search_dom,$("#catchup-page").removeClass("category-expanded"),this.category_shown=!1},hoverCategory:function(e){var t=this.keys;t.focused_part="category_selection",t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#catchup-page-category-items-container"),$(this.category_doms[t.category_selection]).closest(".catchup-page-category-item"),"vertical",!1)},hoverChannel:function(e){var t=this.keys;t.focused_part="channel_selection",t.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[t.channel_selection]).addClass("active"),this.prev_focus_dom=this.channel_doms[t.channel_selection],moveScrollPosition($("#catchup-page-channel-items-container"),$(this.channel_doms[t.channel_selection]).closest(".catchup-channel-menu-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":checkForAdult(this.categories[e.category_selection],"category",[])?parent_confirm_page.init(current_route):(this.showCategoryChannels(),$("#catchup-page").removeClass("category-expanded"),this.category_shown=!1,this.hoverChannel(0));break;case"channel_selection":epg_page.init(this.movies[e.channel_selection]);break;case"channel_search_selection":key_focused?$("#catchup-page-channel-search-input").blur():($("#catchup-page-channel-search-input").focus(),setSelectionRange($("#catchup-page-channel-search-input")));break;case"category_search_selection":key_focused?$("#catchup-page-category-search-input").blur():($("#catchup-page-category-search-input").focus(),setSelectionRange($("#catchup-page-category-search-input")))}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":t.category_selection<2&&e<0?this.hoverCategorySearchBar():checkVerticalMovable(this.category_doms.length,2,t.category_selection,e)&&(t.category_selection+=2*e,t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(t.category_selection));break;case"channel_selection":t.channel_selection<2&&e<0?this.hoverChannelSearchBar():checkVerticalMovable(this.channel_doms.length,2,t.channel_selection,e)&&(t.channel_selection+=2*e,t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),t.channel_selection<0&&(t.channel_selection=0),this.hoverChannel(t.channel_selection));break;case"category_search_selection":key_focused||0<e&&0<this.category_doms.length&&this.hoverCategory(0);break;case"channel_search_selection":key_focused||0<e&&0<this.channel_doms.length&&this.hoverChannel(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":t.category_selection+=e,t.category_selection<0&&(t.category_selection=0),t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(t.category_selection);break;case"channel_selection":t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this.hoverChannel(t.channel_selection);break;case"category_search_selection":key_focused||0<e&&0<this.channel_doms.length&&this.hoverChannelSearchBar();break;case"channel_search_selection":e<0&&this.hoverCategorySearchBar()}},HandleKey:function(e){if(!this.is_loading){this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}},epg_page={keys:{focused_part:"date_selection",date_selection:0,programme_selection:0},movie:{},sorted_programmes:[],date_doms:[],programme_doms:[],current_programmes:[],is_loading:!1,channel_id:"",init:function(l){showLoader(!0),this.is_loading=!0,this.movie=l;var c=this,d=this.keys;current_route="catch-up-detail",d.focused_part="date_selection",$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+l.stream_id,success:function(e){for(var i,t=[],s=e.epg_listings,o="Y-MM-DD HH:mm",a=(12==settings.time_format&&(o="Y-MM-DD hh:mm A"),moment().subtract(l.tv_archive_duration,"days").unix(),0);a<s.length;a++){var n=s[a],r=getLocalChannelTime(n.start);r.unix();0!=n.has_archive&&t.push({start:r.format(o),stop:getLocalChannelTime(n.end).format(o),title:n.title,has_archive:n.has_archive})}c.sorted_programmes=c.sortProgrammesByDate(t),0==t.length||0==Object.keys(c.sorted_programmes).length?(showLoader(!1),c.is_loading=!1,showToast(current_words.sorry||"Sorry",current_words.no_epg_avaliable||"No Epg Available"),c.goBack()):($("#catchup-page").addClass("hide"),$("#catchup-detail-page").removeClass("hide"),i="",c.sorted_programmes.map(function(e,t){i+='<div class="epg-date-item-container bg-focus"                            onmouseenter="epg_page.selectDate('+t+',true,false)"                            onclick="epg_page.handleMenuClick()"                        >                            <div class="epg-date-item-date">'+e.day_string+"</div>                        </div>"}),$("#epg-dates-wrapper").html(i),c.date_doms=$(".epg-date-item-container"),d.focused_part="programme_selection",d.date_selection=c.sorted_programmes.length-1,$(c.date_doms[d.date_selection]).addClass("active"),c.selectDate(d.date_selection,!1,!0),d.programme_selection=c.sorted_programmes[d.date_selection].programmes.length-1,setTimeout(function(){c.hoverProgramme(d.programme_selection),showLoader(!1),c.is_loading=!1},200))},error:function(){showLoader(!1),c.is_loading=!1,showToast(current_words.sorry||"Sorry",current_words.no_epg_avaliable||"No Epg Available"),c.goBack()}})},goBack:function(){var e=this.keys;switch(e.focused_part){case"date_selection":$("#catchup-detail-page").addClass("hide"),$("#catchup-page").removeClass("hide"),current_route="catchup-page";break;case"programme_selection":this.selectDate(e.date_selection,!0,!1)}},sortProgrammesByDate:function(e){for(var t={},i=moment().format("Y-MM-DD HH:mm:ss"),s=0;s<e.length;s++){var o=e[s];if(o.start>=i||o.stop>=i)break;var a,n=o.start,r=n.substr(0,10);void 0!==t[r]?t[r].programmes.push(o):(a=(n=moment(n,"Y-MM-DD HH:mm:ss")).format("DD MMM YYYY"),n=n.format("YYYY-MM-DD"),t[r]={day_string:a,date_string:n,programmes:[o]})}var l=[];return Object.keys(t).map(function(e){l.push(t[e])}),l},selectDate:function(e,t,i){var s=this.keys,o=(s.date_selection=e,"");this.current_programmes=this.sorted_programmes[e].programmes,this.sorted_programmes[e].programmes.map(function(e,t){o+='<div class="epg-programme-item-container">                    <div class="epg-programme-item-wrapper bg-focus"                        onmouseenter="epg_page.hoverProgramme('+t+')"                        onclick="epg_page.handleMenuClick()"                    >                        <div class="epg-programme-title">'+getAtob(e.title)+'</div>                        <div class="epg-time-icon-container">                            <span class="epg-programme-time">'+e.start.substr(11)+"-"+e.stop.substr(11)+"</span>                      </div>                   </div>                </div>"}),$("#epg-programmes-container").html(o),$("#epg-programmes-container").scrollLeft(0),i||(s.programme_selection=0),this.programme_doms=$(".epg-programme-item-wrapper "),$(this.date_doms).removeClass("active"),$(this.programme_doms).removeClass("active"),$(this.date_doms[e]).addClass("active"),t?(s.focused_part="date_selection",i||moveScrollPosition($("#epg-programmes-container"),$(this.programme_doms[0]).closest(".epg-programme-item-container"),"vertical",!1)):i||this.hoverProgramme(0),moveScrollPosition($("#epg-dates-wrapper"),this.date_doms[e],"horizontal",!1)},hoverProgramme:function(e){var t=this.keys;t.programme_selection=e,t.focused_part="programme_selection",$(this.date_doms).removeClass("active"),$(this.programme_doms).removeClass("active"),$(this.programme_doms[e]).addClass("active"),moveScrollPosition($("#epg-programmes-container"),$(this.programme_doms[e]).closest(".epg-programme-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;"programme_selection"===e.focused_part&&(e=this.sorted_programmes[e.date_selection].programmes[e.programme_selection],$("#catchup-detail-page").addClass("hide"),vod_series_player.init(e,"epg","catch-up-detail","",!0))},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"programme_selection":t.programme_selection+=e,t.programme_selection<0?(t.programme_selection=0,this.selectDate(t.date_selection,!0,!1)):(t.programme_selection>=this.current_programmes.length&&(t.programme_selection=this.current_programmes.length-1),this.hoverProgramme(t.programme_selection));break;case"date_selection":0<e&&0<this.programme_doms.length&&this.hoverProgramme(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"date_selection":case"programme_selection":t.date_selection+=e,t.date_selection<0&&(t.date_selection=0),t.date_selection>=this.sorted_programmes.length&&(t.date_selection=this.sorted_programmes.length-1),t.focused_part,this.selectDate(t.date_selection,!0,!1)}},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RIGHT:epg_page.handleMenuLeftRight(1);break;case tvKey.LEFT:epg_page.handleMenuLeftRight(-1);break;case tvKey.DOWN:epg_page.handleMenusUpDown(1);break;case tvKey.UP:epg_page.handleMenusUpDown(-1);break;case tvKey.ENTER:epg_page.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_recent_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-recent-modal button"),prev_route:"",movie:null,movie_kind:"",init:function(e,t){this.movie_kind=t,this.prev_route=e,current_route="clear_recent_page",this.hoverMenuItem(0),$("#clear-recent-modal").modal("show")},goBack:function(){$("#clear-recent-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t=this.keys;if("vod"==e)VodModel.removeAllWatchList(),showToast("Successful","Movies Watch lists cleared successfully!");else if("series"==e)SeriesModel.removeAllWatchList(),showToast("Successful","Series Watch lists cleared successfully!");else if("menu_selection"===t.focused_part)switch(this.keys.menu_selection){case 1:("vod"===this.movie_kind?VodModel:SeriesModel).removeAllWatchList(),this.goBack();break;case 0:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_cache_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-cache-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="clear_cache_page",this.hoverMenuItem(0),$("#clear-cache-modal").modal("show")},goBack:function(){$("#clear-cache-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){window.location.reload()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t;e=e||!1,"menu_selection"===this.keys.focused_part&&(1==this.keys.menu_selection||e?(current_route="login-page",$("#clear-cache-modal").modal("hide"),t=[],Object.keys(localStorage).map(function(e){e.includes(storage_id)&&t.push(e)}),t.map(function(e){localStorage.removeItem(e)}),settings.resetDefaultValues(),this.reloadPage()):this.goBack())},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},subtitle_setting_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".subtitle-setting-item"),prev_route:"",init:function(e){$("#current-subtitle-size").text(settings.subtitle_size+"px"),this.prev_route=e,current_route="subtitle-setting-page",this.hoverMenuItem(0),$("#subtitle-setting-modal").modal("show")},goBack:function(){$("#subtitle-setting-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){$("#app").hide(),$("#setting-page").addClass("hide"),$(home_page.prev_focus_dom).removeClass("active"),home_page.prev_focus_dom=null,current_route="login-page",$(".home-page-sub-container").removeClass("hide"),$("#home-page").addClass("is-home"),$(setting_page.menu_doms).removeClass("active"),setting_page.keys.menu_selection=0,login_page.login()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},increaseSubtitleSize:function(e){var t=settings.subtitle_size;100<(t=(t+=e)<20?20:t)&&(t=100),$("#current-subtitle-size").text(t+"px"),$(".subtitle-container").css({"font-size":t/16+"rem"}),settings.saveSettings("subtitle_size",t,"")},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){0<e?this.hoverMenuItem(1):this.hoverMenuItem(0)},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},layout_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".layout-setting-item"),prev_route:"",current_layout:1,init:function(e){this.current_layout=this.getLayoutChoice(),this.styleCurrentChoice(),this.prev_route=e,current_route="layout-page",this.current_layout&&0<=this.current_layout&&this.current_layout<this.menu_doms.length?this.hoverMenuItem(this.current_layout):this.hoverMenuItem(0),$("#layout-setting-modal").modal("show")},goBack:function(){$("#layout-setting-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},styleCurrentChoice:function(){$(this.menu_doms).removeClass("current"),$(this.menu_doms[this.current_layout]).addClass("current"),channel_page.setupCurrentLayout()},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},changeLiveLayoutSetting:function(e){e!=this.current_layout&&(this.current_layout=e,this.storeLayoutChoice(e),this.styleCurrentChoice(),this.goBack())},storeLayoutChoice:function(e){e?localStorage.setItem(storage_id+"live_layout",e):localStorage.setItem(storage_id+"live_layout",0)},getLayoutChoice:function(){return parseInt(localStorage.getItem(storage_id+"live_layout"))},handleMenusUpDown:function(e){var t=this.keys;t.menu_selection+=e,t.menu_selection<0?t.menu_selection=0:t.menu_selection>=this.menu_doms.length?t.menu_selection=this.menu_doms.length-1:this.hoverMenuItem(t.menu_selection)},handleMenuLeftRight:function(e){},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}};function keyboardVisibilityChange(e){e.detail.visibility?key_focused=!0:(key_focused=!1,$("input").blur())}$(document).ready(function(){try{window.navigator.userAgent.toLowerCase().includes("web0s")&&(platform="lg")}catch(e){}$("#app").addClass(platform),initKeys(),initPlayer(),settings.initFromLocal();var e=localStorage.getItem(storage_id+"parent_account_password");parent_account_password=null!=e?e:parent_account_password,"samsung"===platform?($("#vod-series-player-video-lg").hide(),$("#channel-page-video-lg").hide(),$("#home-page-player-lg").hide()):"lg"===platform&&($("#vod-series-player-video").hide(),$("#channel-page-video").hide(),$("#home-page-player").hide()),login_page.getPlayListDetail();try{var t=document.createElement("script"),i=(t.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("script")[0]);i.parentNode.insertBefore(t,i)}catch(e){}"samsung"===platform?document.addEventListener("visibilitychange",function(){document.hidden?webapis.avplay.suspend():webapis.avplay.restore()}):"lg"===platform&&document.addEventListener("keyboardStateChange",keyboardVisibilityChange,!1),document.addEventListener("keydown",function(e){var t=e;if("samsung"===platform)switch(t.keyCode==tvKey.EXIT&&tizen.application.getCurrentApplication().exit(),t.keyCode){case 65376:case 65385:return void $("input").blur()}if(!app_loading)switch(current_route){case"login-page":login_page.HandleKey(t);break;case"device_key_login_page":device_key_login_page.HandleKey(t);break;case"home-page":home_page.HandleKey(t);break;case"channel-page":channel_page.HandleKey(t);break;case"vod-series-page":vod_series_page.HandleKey(t);break;case"vod-summary-page":vod_summary_page.HandleKey(t);break;case"vod-series-player-video":vod_series_player.HandleKey(t);break;case"trailer-page":trailer_page.HandleKey(t);break;case"seasons-page":seasons_variable.HandleKey(t);break;case"episode-page":episode_variable.HandleKey(t);break;case"series-summary-page":series_summary_page.HandleKey(t);break;case"playlist-page":playlist_page.HandleKey(t);break;case"account-page":account_page.HandleKey(t);break;case"settings-page":settings_page.HandleKey(t);break;case"parent-confirm-page":parent_confirm_page.HandleKey(t);break;case"turn-off-page":turn_off_page.HandleKey(t);break;case"activation-page":activation_page.HandleKey(t);break;case"playlist-edit-page":playlist_edit_page.HandleKey(t);break;case"category-selection-page":category_selection_page.HandleKey(t);break;case"search-page":search_page.HandleKey(t);break;case"catchup-page":catchup_page.HandleKey(t);break;case"catch-up-detail":epg_page.HandleKey(t);break;case"clear_recent_page":clear_recent_page.HandleKey(t);break;case"clear_cache_page":clear_cache_page.HandleKey(t);break;case"subtitle-setting-page":subtitle_setting_page.HandleKey(t);break;case"layout-page":layout_page.HandleKey(t);break;case"color-theme-page":color_theme_page.HandleKey(t)}}),updateTimeStr(),setInterval(function(){updateTimeStr()},3e4),$(".subtitle-container").css({"font-size":settings.subtitle_size/16+"rem",color:settings_page.subtitle_bg_options[settings.subtitle_bg].color,"background-color":settings_page.subtitle_bg_options[settings.subtitle_bg].background})});