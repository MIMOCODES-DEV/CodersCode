var mac_address,user_name,password,api_host_url,device_key,is_trial,expire_date,current_movie,current_season,current_episode,current_series,VodModel={movies:[],category_name:"vod_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],saved_video_times:{},favourite_ids:[],stream_type:"vod",favourite_insert_position:"after",recent_insert_position:"before",category_orders:[],favourite_position:1,recent_position:0,init:function(){this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i){for(var s=this.stream_type,a=this.saved_video_times,o=-1,n=0;n<a.length;n++)if(a[n].stream_id==e){o=n;break}t={stream_id:e,time:t,duration:i};-1!=o?a[o]=t:a.push(t),this.saved_video_times=a,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+s+"_times",JSON.stringify(a))},removeVideoTime:function(e){for(var t=this.stream_type,i=this.saved_video_times,s=0;s<i.length;s++)if(i[s].stream_id==e){i.splice(s,1);break}this.saved_video_times=i,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+t+"_times",JSON.stringify(i))},addToWatchList:function(t){var e=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[e].movies,s=!1;i.map(function(e){e.stream_id==t.stream_id&&(s=!0)}),s||(i.unshift(t),i.splice(this.recent_movie_count),this.categories[e].movies=i)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s=0;s<i.length;s++)if(i[s].stream_id==e.stream_id){i.splice(s,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e){var t=this.stream_type,i=this.getCategories(!0,!1);i.map(function(e){e.is_hide=!1});for(var s=0;s<e.length;s++)for(var a=0;a<i.length;a++)if(e[s]==i[a].category_id){i[a].is_hide=!0;break}localStorage.setItem(storage_id+settings.playlist.id+t+"_hiddens",JSON.stringify(e))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=(e=localStorage.getItem(storage_id+settings.playlist.id+"_vod_category_orders"))?JSON.parse(e):[],t=(this.category_orders=e,this.stream_type),i=this.movies,s=this.categories,a={category_id:"recent",category_name:"Continue Watching",parent_id:0,movies:[],is_hide:!1},o={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},n=localStorage.getItem(storage_id+settings.playlist.id+"_saved_"+t+"_times"),n=n&&(n=JSON.parse(n),Array.isArray(n))?n:[],r=(this.saved_video_times=n,s.push({category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}),this.movie_key),c=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+t+"_favourite")),l=[],l="xtreme"===settings.playlist_type?n.map(function(e){return parseInt(e.stream_id)}):n.map(function(e){return e.stream_id}),c=null==c?[]:c;this.favourite_ids=c;for(var d=[],_=[],m=[],h={},u=0;u<i.length;u++){var g=i[u];void 0!==g.category_id&&"null"!=g.category_id&&null!=g.category_id||(g.category_id="undefined"),void 0===h[v=g.category_id.toString()]?h[v]=[g]:h[v].push(g),g.is_recent=!1,l.includes(g[r])&&(m.push(g),g.is_recent=!0),c.includes(g[r])&&("before"===this.favourite_insert_position?_.unshift(g):_.push(g))}for(u=0;u<l.length;u++)for(var p=0;p<m.length;p++)if(m[p].stream_id==l[u]){d.unshift(m[p]),m.splice(p,1);break}for(u=0;u<s.length;u++){var v=s[u].category_id.toString();s[u].movies=void 0===h[v]?[]:h[v]}a.movies=d,o.movies=_,s.unshift(o),s.unshift(a);for(u=0;u<s.length;u++)if("undefined"===s[u].category_id){0==s[u].movies.length&&s.splice(u,1);break}for(u=0;u<e.length;u++)for(p=0;p<s.length;p++)if(e[u].id==s[p].category_id){s=makeRearrangeArray(s,p,e[u].position);break}for(u=0;u<s.length;u++)"favourite"==s[u].category_id&&(this.favourite_position=u),"recent"==s[u].category_id&&(this.recent_position=u);this.categories=s,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}return a||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a}},LiveModel={movies:[],category_name:"live_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],programmes:{},movie_saved:!1,programme_saved:!1,favourite_ids:[],stream_type:"live",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveHiddenCategories:function(e){var t=this.stream_type,i=this.getCategories(!0,!1);i.map(function(e){e.is_hide=!1});for(var s=0;s<e.length;s++)for(var a=0;a<i.length;a++)if(e[s]==i[a].category_id){i[a].is_hide=!0;break}localStorage.setItem(storage_id+settings.playlist.id+t+"_hiddens",JSON.stringify(e))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=(e=localStorage.getItem(storage_id+settings.playlist.id+"_category_orders"))?JSON.parse(e):[];this.category_orders=e;var t=(t=localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders"))?JSON.parse(t):{},i=this.stream_type,s=this.movies,a=this.categories,o={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},n={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},r=(a.push({category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}),this.movie_key),c=null==(c=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_recent")))?[]:c,l=null==(l=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_favourite")))?[]:l;this.favourite_ids=l;for(var d=[],_=[],m={},h=0;h<s.length;h++){var u=s[h];void 0!==u.category_id&&"null"!=u.category_id&&null!=u.category_id||(u.category_id="undefined"),void 0===m[g=u.category_id.toString()]?m[g]=[u]:m[g].push(u),u.is_recent=!1,c.includes(u[r])&&("before"===this.recent_insert_position?d.unshift(u):d.push(u),u.is_recent=!0),l.includes(u[r])&&("before"===this.favourite_insert_position?_.unshift(u):_.push(u))}for(h=0;h<a.length;h++){var g,s=m[g=a[h].category_id.toString()]||[];a[h].movies=s}o.movies=d,n.movies=_,a.unshift(n),a.unshift(o);for(h=0;h<a.length;h++)if("undefined"===a[h].category_id){a[h].movies&&0==a[h].movies.length&&a.splice(h,1);break}for(h=0;h<e.length;h++)for(v=0;v<a.length;v++)if(e[h].id==a[v].category_id){a=makeRearrangeArray(a,v,e[h].position);break}for(h=0;h<a.length;h++)if("favourite"==a[h].category_id&&(this.favourite_position=h),"recent"==a[h].category_id&&(this.recent_position=h),t[a[h].category_id]){for(var p=t[a[h].category_id],s=a[h].movies,v=0;v<p.length;v++)for(var y=0;y<s.length;y++)if(p[v].id==s[y].stream_id&&p[v].name==s[y].name){s=makeRearrangeArray(s,y,p[v].position);break}a[h].movies=s}this.categories=a,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}return a||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a},getNextProgrammes:function(e){for(var t="Y-MM-DD HH:mm",i=("12"===settings.time_format&&(t="Y-MM-DD hh:mm A"),!1),s=[],a=moment(new Date).unix(),o=0,n=0;n<e.length;n++){var r=getLocalChannelTime(e[n].stop);if(a<=r.unix()){o++;var c=getLocalChannelTime(e[n].start);if(c.unix()<=a){i=!0,s.push({title:e[n].title,start:c.format(t),stop:r.format(t)});break}break}if(1<=o)break}return{current_program_exist:i,programmes:s}},getProgrammeVideoUrl:function(e,t,i){return"xtreme"===settings.playlist_type?(i=(i?moment(t.start).subtract(time_difference_with_server,"minute"):moment(t.start)).format("Y-MM-DD:HH-mm"),{duration:t=getMinute(t.stop)-getMinute(t.start),url:api_host_url+"/streaming/timeshift.php?username="+user_name+"&password="+password+"&stream="+e+"&start="+i+"&duration="+t}):{duration:"00:00",url:""}}},SeriesModel={movies:[],favourite_movie_count:200,recent_movie_count:30,movie_key:"series_id",categories:[],saved_video_times:{},favourite_ids:[],stream_type:"series",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i,s,a){for(var o=this.stream_type,n=this.saved_video_times,r=-1,c={},l=0;l<n.length;l++)if(n[l].stream_id==e){c=n[r=l].video_times;break}var d={},s={time:s,duration:a};if((d=c[t.toString()]?c[t.toString()]:d)[i.toString()]=s,c[t.toString()]=d,-1!=r){a=this.getRecentOrFavouriteCategoryPosition("recent");if(this.categories[a].movies.length>=this.recent_movie_count)return;n[r].video_times=c}else n.push({stream_id:e,video_times:c});return this.saved_video_times=n,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+o+"_times",JSON.stringify(n)),c},removeVideoTime:function(e,t,i){for(var s,a=this.stream_type,o=this.saved_video_times,n={},r=!1,c=0;c<o.length;c++)if(o[c].stream_id==e){(n=o[c].video_times)[t.toString()]&&(delete(s=n[t.toString()])[i.toString()],0==Object.keys(s).length&&delete n[t.toString()],0==Object.keys(n).length?(o.splice(c,1),r=!0,n={},this.removeFromWatchList(e)):o[c].video_times=n,this.saved_video_times=o,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+a+"_times",JSON.stringify(o)));break}return[r,n]},addToWatchList:function(t){var i,e=this.getRecentOrFavouriteCategoryPosition("recent"),s=this.categories[e].movies;s.length>=this.recent_movie_count||(i=!1,s.map(function(e){e.series_id==t.series_id&&(i=!0)}),i)||(s.unshift(t),s.splice(this.recent_movie_count),this.categories[e].movies=s)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s="object"==typeof e?e.series_id:e,a=0;a<i.length;a++)if(i[a].series_id==s){i.splice(a,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e){var t=this.stream_type,i=this.getCategories(!0,!1);i.map(function(e){e.is_hide=!1});for(var s=0;s<e.length;s++)for(var a=0;a<i.length;a++)if(e[s]==i[a].category_id){i[a].is_hide=!0;break}localStorage.setItem(storage_id+settings.playlist.id+t+"_hiddens",JSON.stringify(e))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=(e=localStorage.getItem(storage_id+settings.playlist.id+"_series_category_orders"))?JSON.parse(e):[],t=(this.category_orders=e,this.stream_type),i=localStorage.getItem(storage_id+settings.playlist.id+"_saved_"+t+"_times"),i=i&&(i=JSON.parse(i),Array.isArray(i))?i:[],s=(this.saved_video_times=i,this.movies),a=this.categories,o={category_id:"recent",category_name:"Continue Watching",parent_id:0,movies:[],is_hide:!1},n={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},r=(a.push({category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}),this.movie_key),c=null==(c=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+t+"_favourite")))?[]:c;this.favourite_ids=c;for(var l=[],l="xtreme"===settings.playlist_type?i.map(function(e){return parseInt(e.stream_id)}):i.map(function(e){return e.stream_id}),d=[],_=[],m=[],h={},u=0;u<s.length;u++){var g=s[u];void 0!==g.category_id&&"null"!=g.category_id&&null!=g.category_id||(g.category_id="undefined"),void 0===h[v=g.category_id.toString()]?h[v]=[g]:h[v].push(g),g.is_recent=!1,l.includes(g[r])&&(m.push(g),g.is_recent=!0),c.includes(g[r])&&("before"===this.favourite_insert_position?_.unshift(g):_.push(g))}for(u=0;u<l.length;u++)for(var p=0;p<m.length;p++)if(m[p].series_id==l[u]){d.unshift(m[p]),m.splice(p,1);break}for(u=0;u<a.length;u++){var v=a[u].category_id.toString();a[u].movies=void 0===h[v]?[]:h[v]}o.movies=d,n.movies=_,a.unshift(n),a.unshift(o);for(u=0;u<a.length;u++)if("undefined"===a[u].category_id){0==a[u].movies.length&&a.splice(u,1);break}for(u=0;u<e.length;u++)for(p=0;p<a.length;p++)if(e[u].id==a[p].category_id){a=makeRearrangeArray(a,p,e[u].position);break}for(u=0;u<a.length;u++)"favourite"==a[u].category_id&&(this.favourite_position=u),"recent"==a[u].category_id&&(this.recent_position=u);this.categories=a,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}return a||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a}},settings={playlist_id:0,playlist:{},vod_sort:"default",series_sort:"default",live_sort:"default",sort_keys:{added:"Added",number:"Number",rating:"Rating",a_z:"A-Z",z_a:"Z-A",name:"Name",default:"Default"},language:"en",time_format:"24",playlist_type:"",stream_format:"default",subtitle_size:50,initFromLocal:function(){var e,t=localStorage.getItem(storage_id+"playlist_id"),i=(this.playlist_id=t||0,this);["vod_sort","series_sort","live_sort","stream_format"].map(function(e){(t=localStorage.getItem(storage_id+e))&&(i[e]=t)}),(t=localStorage.getItem(storage_id+"language"))?this.language=t:void 0!==navigator.language&&(e=navigator.language.split("-"),this.language=e[0]),(t=localStorage.getItem(storage_id+"subtitle_size"))&&(this.subtitle_size=parseInt(t))},saveSettings:function(e,t,i){this[e]=t,"object"!==i&&"array"!==i||(t=JSON.stringify(t)),localStorage.setItem(storage_id+e,t)},resetDefaultValues:function(){this.playlist_type="",this.vod_sort="default",this.series_sort="default",this.live_sort="default",this.language="en",this.playlist_id="",this.time_format="24",this.stream_format="default"}},panel_urls=[],time_difference_with_server=0,app_loading=!1,current_route="login-page",default_movie_icon=HOST+"app_src_min/images/logo1.png",parent_account_password="0000",mac_valid=!0,playlist_urls=[],languages=[],current_words=[],notification={},client_offset=moment(new Date).utcOffset(),storage_id="FvrugCVUEh_",platform="samsung",samsung_version="1.0.0",lg_version="1.0.0",vidaa_version="1.0.0",show_keyboard=!1,tmdb_api_key="3fda7f45037f607d950d66381469dd70",tmdb_prefix_url="https://api.themoviedb.org/3",env="production",storage_environment="production",video_file_exts=(Array.prototype.includes||(Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(o,n,r){return function(e,t){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var i=o(this),s=i.length>>>0,a=r(0|t,s);if(a<0)a=n(0,s+a);else if(s<=a)return-1;if(void 0===e){for(;a!==s;++a)if(void 0===i[a]&&a in i)return a}else if(e!=e){for(;a!==s;++a)if(i[a]!=i[a])return a}else for(;a!==s;++a)if(i[a]===e)return a;return-1}}(Object,Math.max,Math.min)),String.prototype.includes||(String.prototype.includes=function(e){return!!~this.indexOf(e)}),["webm","mpg","mp2","mpeg","mpe","mpv","ogg","mp4","m4p","m4v","avi","wmv","mov","qt","flv","swf","avchd"]),image_file_exts=["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp","bmp","ico","cur","tif","tiff"],test_images=[{url:"https://loremflickr.com/cache/resized/65535_51991346236_96a3d70323_320_240_nofilter.jpg"},{url:"https://loremflickr.com/cache/resized/65535_51919515453_200d29dcae_300_240_nofilter.jpg"},{url:"https://loremflickr.com/cache/resized/65535_52452682321_71113b37d3_320_240_g.jpg"},{url:"https://loremflickr.com/cache/resized/65535_49259934717_84997737b1_n_320_240_g.jpg"},{url:"https://loremflickr.com/cache/resized/65535_51601360671_2ff7e1af50_z_620_340_g.jpg"},{url:"https://pixabay.com/photos/infant-feet-father-mother-2717347/"}],sport_api_url="https://anonymouspanel.com/api/",main_domain="ibostb.com",agent_urls=["https://stbplayers.com/api"];function showLoader(e){(e=void 0===e?!0:e)?$("#loader").show():$("#loader").hide()}function saveData(e,t){window[e]=t}function getMovieUrl(e,t,i){if("live"===t)if("default"!=settings.stream_format)i=settings.stream_format;else{var s=settings.playlist.url;try{var a=s.split("output="),o=a[1]||"";"mpegts"===o||"ts"===o?i="ts":"hls"!==o&&"m3u8"!==o||(i="m3u8"),console.log("here extension1="+o,i)}catch(e){console.log("here error",e)}}return api_host_url+"/"+t+"/"+user_name+"/"+password+"/"+e+"."+i}function moveScrollPosition(e,t,i,s){var a,o,n,r;return"vertical"===i?(i=parseInt($(e).css("height").replace("px","")),n=$(t).position(),o=parseInt($(t).css("height").replace("px","")),a=0,s?(r=n.top+o/2-i/2,$(e).animate({scrollTop:"+="+r},10)):(n.top+o>=i&&(a=n.top+o-i),n.top<0&&(a=n.top),$(e).animate({scrollTop:"+="+a},10)),a):(o=parseInt($(e).css("width").replace("px","")),i=parseInt($(t).css("width").replace("px","")),n=$(t).position(),r=0,s?r=n.left+i/2-o/2:(n.left+i>=o&&(r=n.left+i-o),n.left<0&&(r=n.left)),$(e).animate({scrollLeft:"+="+r},1),r)}function showToast(e,t){$("#toast-body").html("<h3>"+e+"<br>"+t+"</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")}function getMinute(e){e=moment(e).toDate().getTime();return parseInt(e/60/1e3)}function parseM3uResponse(e,t){var i=0;if("type1"===e){var s=[],a=[],o=[],n=[],r=[],c=[],l=(t=t.replace(/['"]+/g,"")).split(/#EXTINF:-{0,1}[0-9]{1,} {0,},{0,}/gm),d=(l.splice(0,1),[]);(new Date).getTime();if(t.includes("tvg-"))for(var _={},m={},h={},u=0;u<l.length;u++)try{var g,p,v,y,d=l[u].split("\n");i++,(f=1<d[1].length?d[1]:"").includes("http:")&&(e="live",(f.includes("/movie/")||f.includes("vod")||f.includes("=movie")||f.includes("==movie=="))&&(e="vod"),f.includes("/series/")&&(e="series"),g=d[0].trim().split(","),b=1<g.length?g[1]:"",p=splitStrings(g[0],["tvg-","channel-","group-"]),k={stream_id:"",name:b,stream_icon:"",title:""},v="All",p.map(function(e){var e=e.split("="),t=e[0],i=e[1];switch(t){case"id":k.stream_id=i;break;case"name":k.name=""!=i.trim()?i:b;break;case"logo":k.stream_icon=i;break;case"title":""==(v=i.split(",")[0])&&(v="Uncategorized")}}),""===k.stream_id.trim()&&(k.stream_id=k.name),k.url=f,k.num=i,"live"===e&&(void 0===_[v]&&(y={category_id:_[v]=v,category_name:v},s.push(y)),k.category_id=v,a.push(k)),"vod"===e&&(void 0===m[v]&&(y={category_id:m[v]=v,category_name:v},n.push(y)),k.category_id=v,o.push(k)),"series"===e)&&(void 0===h[v]&&(y={category_id:h[v]=v,category_name:v},r.push(y)),k.category_id=v,c.push(k))}catch(e){console.log("parsing m3u error "+u,e)}else for(s=[{category_id:"all",category_name:"All"}],n=[{category_id:"all",category_name:"All"}],r=[{category_id:"all",category_name:"All"}],u=0;u<l.length;u++){d=l[u].split("\n");try{var f,b=d[0],e="live",k=((f=d[1]).includes("/movie/")&&(e="movie"),f.includes("/series/")&&(e="series"),{});b=b.trim(),k.stream_id=b,k.name=b,k.stream_icon="",k.num=u+1,k.category_id="all",k.url=f,"live"===e&&a.push(k),"series"===e&&c.push(k),"movie"===e&&o.push(k)}catch(e){console.log(d[0]),console.log(e)}}1<s.length&&s.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<n.length&&n.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<r.length&&r.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),LiveModel.setCategories(s),LiveModel.setMovies(a),LiveModel.insertMoviesToCategories(),VodModel.setCategories(n),VodModel.setMovies(o),VodModel.insertMoviesToCategories(),SeriesModel.setCategories(r);t=parseSeries(c);SeriesModel.setMovies(t),SeriesModel.insertMoviesToCategories()}}function parseSeries(e){var s=[],o={},a=(e.map(function(e){try{var t=e.name.split(/ S[0-9]{2}/),i=e.name.match(/S[0-9]{2}/)[0],s=(i="Season "+(i=i.trim().replace("S","")),t[0].trim()),a=t[1].trim().replace("E","");o[s]?o[s].season_map[i]?o[s].episodes[i].push({name:a,url:e.url,id:a,info:{},title:"Episode "+a}):(o[s].season_map[i]={name:i,cover:HOST+"app_src_min/images/series-icon.png"},o[s].episodes[i]=[{name:a,url:e.url,id:a,info:{},title:"Episode "+a}]):o[s]={series_id:s,name:s,cover:e.stream_icon,youtube_trailer:"",category_id:e.category_id,rating:"",rating_5based:"",genre:"",director:"",cast:"",plot:"",season_map:{},episodes:{}}}catch(e){}}),0);return Object.keys(o).map(function(e){a++;var t=o[e],i=[];try{Object.keys(t.season_map).map(function(e){i.push(t.season_map[e])})}catch(e){}delete t.season_map,t.num=a,t.seasons=i,s.push(t)}),s}function splitStrings(e,t){for(var i=[],s=0;s<t.length;s++){var a=e.split(t[s]);if(s==t.length-1)for(var o=0;o<a.length;o++)""!=a[o].trim()&&i.push(a[o]);else for(o=0;o<a.length;o++)""!=a[o].trim()&&splitStrings(a[o],t.slice(s+1)).map(function(e){""!==e.trim()&&i.push(e)});return i}}function getAtob(e){var t=e;try{return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){}return t}function checkForAdult(e,t,i){var s,a=!1;if("movie"===t){for(var o=0;o<i.length;o++)if(e.category_id==i[o].category_id){s=i[o];break}}else s=e;for(var n=s.category_name.toLowerCase(),r=["xxx","sex","porn","adult","18+","+18","19+","+19","hot"],o=0;o<r.length;o++)if(n.includes(r[o])){a=!0;break}return a=s.parent_id&&0!=s.parent_id?!0:a}function pickPanelUrl(i){for(var e,t,s=[],a=(panel_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),o=1/s.length,n=0;n<s.length;n++)if(n*o<=a&&a<=o*(n+1)){e=s[n],t=n;break}return[t,e]}function getSortedMovies(e,t){var i=[],s="number"===t?"num":"a_z"!==t&&"z_a"!==t?t:"name";if(0==e.length)return e;if(void 0===e[0][s])return e;var a=1;switch(t){case"rating":case"number":case"added":case"last_modified":a=1,"number"===t&&(a=-1),i=e.sort(function(e,t){e=parseFloat(e[s]),isNaN(e)&&(e=0),t=parseFloat(t[s]);return isNaN(t)&&(t=0),a*(e<t?1:t<e?-1:0)});break;case"a_z":case"z_a":case"name":a="a_z"===t||"name"===t?1:-1,i=e.sort(function(e,t){return a*e[s].localeCompare(t[s])});break;case"default":return e}return i}function parseM3uUrl(){var e,t=settings.playlist.url;t.includes("username=")&&t.includes("password=")?settings.playlist_type="xtreme":settings.playlist_type="type1",api_host_url="xtreme"===settings.playlist_type?((e=settings.playlist.url.split("?"))[1].split("&").map(function(e){var e=e.split("="),t=e[0],e=e[1];"username"===t.toLowerCase()&&(user_name=e),"password"===t.toLowerCase()&&(password=e)}),e[0].replace("/get.php","")):t}function makeRearrangeArray(e,t,i){t=e.splice(t,1)[0];return e.splice(i,0,t),e}function setSelectionRange(t){setTimeout(function(){var e=$(t).val();$(t)[0].setSelectionRange(e.length,e.length)},200)}function exitApp(){"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close()}function getEncryptKey(e){for(var t="";t.length<e;t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(62*Math.random()|0));return t}function getEncryptKeyPosition(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i=0;i<t.length;i++)if(t[i]==e)return i}function getEncryptPositionChar(e){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(e)}function encryptRequest(e){var e=JSON.stringify(e),e=btoa(e),t=parseInt(30*Math.random()),i=(t<20&&(t=20),Math.floor(Math.random()*e.length)),s=(42<=i&&(i=42),getEncryptKey(t)),s=e.slice(0,i).concat(s).concat(e.slice(i));return getEncryptPositionChar(i)+getEncryptPositionChar(t)+s}function decryptResponse(e){var e=e.data,t=getEncryptKeyPosition(e[e.length-2]),i=getEncryptKeyPosition(e[e.length-1]),e=getAtob((e=e.slice(0,e.length-2)).slice(0,t).concat(e.slice(t+i)));return JSON.parse(e)}function changeCurrentTime(){var e=moment(),t=e.format("ddd, MMM DD"),e=e.format("HH:mm");$(".current-date").text(t),$(".current-time").text(e)}function hideImg(e){$(e).addClass("hide")}function checkVerticalMovable(e,t,i,s){var a=i<t&&s<0?!1:!0;return a=(Math.ceil(e/t)-1)*t<=i&&0<s?!1:a}function getRealMovieName(e){for(var e=e.split("-"),t=(1<e.length?e[1]:e[0]).split("("),e=t[0].trim(),i="",s="",a=1;a<t.length;a++){var o=t[a].replace(")","").trim();isNaN(o)?i=o:s=parseInt(o)}return{name:e,country:i,year:s}}function getExt(e){var e=e.split("."),t="";return t=0<e.length?e[e.length-1]:t}var storages=[{label:"internal0",state:"MOUNTED",type:"INTERNAL"},{label:"removable_sda",type:"EXTERNAL",state:"MOUNTED"}];function checkCorruptedRemovableDrives(e){for(var t=[],i=0;i<e.length;i++)"UNMOUNTABLE"==e[i].state||e[i].label.includes("wgt-")||"documents"===e[i].label||t.push(e[i]);storage_page.storages=t,storage_page.initPage()}function onResolveSuccess(e){e.listFiles(onsuccess)}function onsuccess(e){for(var t=[],i=0,s=0,a=[],o=0==storage_page.current_level?0:1,n=[],r=0,c=0;c<e.length;c++){var l=e[c];if(l.isFile){var d=getExt(l.name);if(video_file_exts.includes(d.toLowerCase()))t.push({index:c-r+o,file:l,video_index:i}),i++;else{if(!image_file_exts.includes(d.toLowerCase())){r++;continue}a.push({index:c-r+o,file:l,image_index:s}),s++}}n.push(l)}storage_page.storages=n,storage_page.video_files=t,storage_page.image_files=a,storage_page.renderDirectories()}function pickAgentUrl(i){for(var e,t,s=[],a=(agent_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),o=1/s.length,n=0;n<s.length;n++)if(n*o<=a&&a<=o*(n+1)){e=s[n],t=n;break}return[t,e]}var login_page={is_loading:!1,keys:{focused_part:"main_area",main_area:0,network_issue_btn:0,expired_issue_btn:0,no_playlist_btn:0},login_succeed:!1,tried_panel_indexes:[],network_issue_btns:$(".network-issue-btn"),expired_issue_btns:$(".expired-issue-btn"),no_playlist_btns:$(".no-playlist-btn"),tried_agent_url_indices:[],goBack:function(){turn_off_page.init("login-page")},showLoadImage:function(){$("#loading-issue-container").hide(),$("#loading-page").removeClass("hide")},showLoginError:function(){$(".loading-issue-item").addClass("hide"),$("#loading-issue-container").show()},showNetworkErrorModal:function(){this.showLoginError(),$("#network-issue-container").removeClass("hide"),this.hoverNetworkIssueBtn(0)},reloadApp:function(){var t=this;$("#loading-issue-container").hide(),$(".loading-issue-item").addClass("hide"),setTimeout(function(){var e=localStorage.getItem(storage_id+"domain_lists"),e=JSON.parse(e);t.fetchPlaylistInformation(e)},200)},continueDemoPlaylist:function(){var e=this;$("#loading-issue-container").hide(),$(".loading-issue-item").addClass("hide"),setTimeout(function(){e.login()},200)},exit:function(){exitApp()},enterActivationPage:function(){activation_page.init("login-page")},fetchPlaylistInformation:function(i){var s,e,a,t;this.is_loading||(t=i.domains,main_domain=i.main_domain,$(".main-domain").text(main_domain),panel_urls=[],t.map(function(e){panel_urls.push("https://"+e+"/api")}),this.showLoadImage(),(s=this).is_loading=!0,$("#mac-address").text(mac_address),$(".mac-address").text(mac_address),e=(t=pickPanelUrl(this.tried_panel_indexes))[1],a=t[0],t="samsung"===platform?samsung_version:"lg"===platform?lg_version:vidaa_version,"zeasn"!==platform&&"titanos"!==platform||(t=zeasn_version),"samsung"===platform&&host_smasung_version?t=host_smasung_version:"lg"===platform&&host_lg_version?t=host_lg_version:"vidaa"===platform&&host_vidaa_version?t=host_vidaa_version:"zeasn"===platform&&host_zeasn_version?t=host_zeasn_version:"titanos"===platform&&host_titanos_version&&(t=host_titanos_version),t=encryptRequest({mac_address:mac_address,app_type:platform,version:t}),$.ajax({url:e+"/playlist_info",type:"POST",data:{data:t},success:function(e){e=decryptResponse(e);localStorage.setItem(storage_id+"api_data",JSON.stringify(e)),s.loadApp(e)},error:function(e){var t;s.is_loading=!1,s.tried_panel_indexes.push(a),s.tried_panel_indexes.length<panel_urls.length?s.fetchPlaylistInformation(i):(t=localStorage.getItem(storage_id+"api_data"))?(t=JSON.parse(t),s.loadApp(t)):s.showNetworkErrorModal()}}))},loadApp:function(e){var t=moment().format("Y-MM-DD");saveData("playlist_urls",e.urls),saveData("notification",e.notification),$(".device-key").text(e.device_key),$(".loading-page-device-info-container").slideDown(),saveData("languages",e.languages),saveData("device_key",e.device_key),saveData("expire_date",e.expire_date),saveData("is_trial",e.is_trial),e.tmdb_api_key&&(tmdb_api_key=e.tmdb_api_key),0==is_trial?$(".app-status").text("Trial"):$(".app-status").text("Active"),this.is_loading=!1,$(".expire-date").text(expire_date),e.expire_date<t?(saveData("mac_valid",!1),this.showLoginError(),$("#expired-issue-container").removeClass("hide"),this.hoverExpiredIssueBtn(0)):e.has_own_playlist?this.login():(this.showLoginError(),$("#no-playlist-issue-container").removeClass("hide"),this.hoverNoPlaylistBtn(0))},getPlayListDetail:function(){var s=this;if(mac_address="52:54:00:12:34:58","samsung"===platform)try{tizen.systeminfo.getPropertyValue("ETHERNET_NETWORK",function(e){void 0!==e&&void 0!==e.macAddress&&(mac_address=e.macAddress),s.fetchDomains()})}catch(e){this.fetchDomains()}else if("lg"===platform)webOS.service.request("luna://com.webos.service.sm",{method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onSuccess:function(e){mac_address="";for(var t=e.idList[0].idValue.replace(/['-]+/g,""),i=0;i<=5;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":");s.fetchDomains()},onFailure:function(e){s.fetchDomains()}});else if("vidaa"===platform)try{if("function"==typeof Hisense_GetDeviceID){var e=Hisense_GetDeviceID();if(/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(e))mac_address=e;else{mac_address="";var t=e.slice(-12);try{for(var i=0;i<6;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":")}catch(e){}}console.log("VIDAA MAC Address: "+mac_address)}s.fetchDomains()}catch(e){s.fetchDomains()}else"windows"===platform&&console.log("Windows test mac address",mac_address),s.fetchDomains()},login:function(){this.showLoadImage();for(var e=settings.playlist_id,t=0,i=0;i<playlist_urls.length;i++)if(playlist_urls[i].id==e){t=i;break}settings.saveSettings("playlist",playlist_urls[t],"array"),settings.saveSettings("playlist_id",playlist_urls[t].id,""),parseM3uUrl(),this.proceed_login()},fetchDomains:function(){var i,e,s,t;this.is_loading||((i=this).is_loading=!0,e=(t=pickAgentUrl(this.tried_agent_url_indices))[1],s=t[0],t=encryptRequest({mac_address:mac_address,app_type:platform,version:"samsung"===platform?samsung_version:lg_version}),$.ajax({method:"post",url:e+"/playlist_info",data:{data:t},timeout:15e3,success:function(e){i.tried_agent_url_indices=[];e=decryptResponse(e);localStorage.setItem(storage_id+"domain_lists",JSON.stringify(e)),i.is_loading=!1,i.fetchPlaylistInformation(e)},error:function(e){var t;i.is_loading=!1,i.tried_agent_url_indices.push(s),i.tried_agent_url_indices.length<agent_urls.length?i.fetchDomains():(t=localStorage.getItem(storage_id+"domain_lists"))?(t=JSON.parse(t),i.fetchPlaylistInformation(t)):showToast("Sorry","Api not working")}}))},goToPlaylistPageWithError:function(){this.is_loading=!1,LiveModel.insertMoviesToCategories([]),VodModel.insertMoviesToCategories([]),SeriesModel.insertMoviesToCategories([]),$("#loading-page").addClass("hide"),$("#playlist-error").show(),home_page.init(!1);var i=0;home_page.menu_doms.map(function(e,t){t=$(t).closest(".home-section-item-wrapper").data("kind");console.log(t,e),"settings"===t&&(i=e)}),console.log("setting_menu_index",i),home_page.hoverMainMenu(home_page.menu_doms[i],!0),home_page.hoverSubMenu(home_page.sub_menu_doms[i][0],!0),home_page.handleMenuClick(),$("#home-expire-date").text("Unknown")},convertNormalM3u:function(){console.log("here convert to normal m3u"),settings.playlist_type="type1",api_host_url=settings.playlist.url,this.is_loading=!1,this.proceed_login()},proceed_login:function(){var t,i,e;this.is_loading||($("#playlist-error").hide(),LiveModel.init(),VodModel.init(),SeriesModel.init(),e=settings.playlist_type,(t=this).is_loading=!0,"xtreme"===e?(e=(i=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=").replace("&action=",""),$.ajax({method:"get",url:e,success:function(e){void 0!==e.server_info&&calculateTimeDifference(e.server_info.time_now,e.server_info.timestamp_now),void 0!==e.user_info&&(0==e.user_info.auth||void 0!==e.user_info.status&&("Expired"===e.user_info.status||"Banned"===e.user_info.status)?(t.is_loading=!1,t.goToPlaylistPageWithError()):(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(e=moment(1e3*e.user_info.exp_date),$(".expire-date").text(e.format("Y-MM-DD"))),$.when($.ajax({method:"get",url:i+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),$.ajax({method:"get",url:i+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),$.ajax({method:"get",url:i+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),$.ajax({method:"get",url:i+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),$.ajax({method:"get",url:i+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),$.ajax({method:"get",url:i+"get_series",success:function(e){SeriesModel.setMovies(e)}})).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),t.is_loading=!1,home_page.init(!0)}catch(e){t.convertNormalM3u()}}).fail(function(){t.convertNormalM3u()})))},error:function(e){t.convertNormalM3u()},timeout:25e3})):(api_host_url=settings.playlist.url,$.ajax({method:"get",url:api_host_url,timeout:24e4,success:function(e){parseM3uResponse("type1",e),$("#loading-page").addClass("hide"),home_page.init(!0),t.is_loading=!1},error:function(e){t.goToPlaylistPageWithError()}})))},hoverNetworkIssueBtn:function(e){var t=this.keys;t.focused_part="network_issue_btn",t.network_issue_btn=e,$(this.network_issue_btns).removeClass("active"),$(this.network_issue_btns[e]).addClass("active")},hoverExpiredIssueBtn:function(e){var t=this.keys;t.focused_part="expired_issue_btn",t.expired_issue_btn=e,$(this.expired_issue_btns).removeClass("active"),$(this.expired_issue_btns[e]).addClass("active")},hoverNoPlaylistBtn:function(e){var t=this.keys;t.focused_part="no_playlist_btn",t.no_playlist_btn=e,$(this.no_playlist_btns).removeClass("active"),$(this.no_playlist_btns[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"network_issue_btn":$(this.network_issue_btns[e.network_issue_btn]).trigger("click");break;case"no_playlist_btn":$(this.no_playlist_btns[e.no_playlist_btn]).trigger("click");break;case"expired_issue_btn":$(this.expired_issue_btns[e.expired_issue_btn]).trigger("click")}},handleMenuUpDown:function(e){var t=this.keys;"main_area"===t.focused_part&&(t.main_area+=e,(e=[$("#login-button")]).map(function(e){$(e).removeClass("active")}),t.main_area<0&&(t.main_area=e.length-1),t.main_area>=e.length&&(t.main_area=0),$(e[t.main_area]).addClass("active"))},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"network_issue_btn":t.network_issue_btn+=e,t.network_issue_btn<0&&(t.network_issue_btn=0),t.network_issue_btn>=this.network_issue_btns.length&&(t.network_issue_btn=this.network_issue_btns.length-1),this.hoverNetworkIssueBtn(t.network_issue_btn);break;case"expired_issue_btn":t.expired_issue_btn+=e,t.expired_issue_btn<0&&(t.expired_issue_btn=0),t.expired_issue_btn>=this.expired_issue_btns.length&&(t.expired_issue_btn=this.expired_issue_btns.length-1),this.hoverExpiredIssueBtn(t.expired_issue_btn);break;case"no_playlist_btn":t.no_playlist_btn+=e,t.no_playlist_btn<0&&(t.no_playlist_btn=0),1<t.no_playlist_btn&&(t.no_playlist_btn=1),this.hoverNoPlaylistBtn(t.no_playlist_btn)}},HandleKey:function(e){if(e.keyCode===tvKey.RETURN)this.goBack();else if(!this.is_loading)switch(e.keyCode){case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},temps=[{name:"Afar",iso6392B:"aar",iso6391:"aa"},{name:"Abkhazian",iso6392B:"abk",iso6391:"ab"},{name:"Achinese",iso6392B:"ace"},{name:"Acoli",iso6392B:"ach"},{name:"Adangme",iso6392B:"ada"},{name:"Adyghe; Adygei",iso6392B:"ady"},{name:"Afro-Asiatic languages",iso6392B:"afa"},{name:"Afrihili",iso6392B:"afh"},{name:"Afrikaans",iso6392B:"afr",iso6391:"af"},{name:"Ainu",iso6392B:"ain"},{name:"Akan",iso6392B:"aka",iso6391:"ak"},{name:"Akkadian",iso6392B:"akk"},{name:"Albanian",iso6392B:"alb",iso6392T:"sqi",iso6391:"sq"},{name:"Aleut",iso6392B:"ale"},{name:"Algonquian languages",iso6392B:"alg"},{name:"Southern Altai",iso6392B:"alt"},{name:"Amharic",iso6392B:"amh",iso6391:"am"},{name:"English, Old (ca.450-1100)",iso6392B:"ang"},{name:"Angika",iso6392B:"anp"},{name:"Apache languages",iso6392B:"apa"},{name:"Arabic",iso6392B:"ara",iso6391:"ar"},{name:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",iso6392B:"arc"},{name:"Aragonese",iso6392B:"arg",iso6391:"an"},{name:"Armenian",iso6392B:"arm",iso6392T:"hye",iso6391:"hy"},{name:"Mapudungun; Mapuche",iso6392B:"arn"},{name:"Arapaho",iso6392B:"arp"},{name:"Artificial languages",iso6392B:"art"},{name:"Arawak",iso6392B:"arw"},{name:"Assamese",iso6392B:"asm",iso6391:"as"},{name:"Asturian; Bable; Leonese; Asturleonese",iso6392B:"ast"},{name:"Athapascan languages",iso6392B:"ath"},{name:"Australian languages",iso6392B:"aus"},{name:"Avaric",iso6392B:"ava",iso6391:"av"},{name:"Avestan",iso6392B:"ave",iso6391:"ae"},{name:"Awadhi",iso6392B:"awa"},{name:"Aymara",iso6392B:"aym",iso6391:"ay"},{name:"Azerbaijani",iso6392B:"aze",iso6391:"az"},{name:"Banda languages",iso6392B:"bad"},{name:"Bamileke languages",iso6392B:"bai"},{name:"Bashkir",iso6392B:"bak",iso6391:"ba"},{name:"Baluchi",iso6392B:"bal"},{name:"Bambara",iso6392B:"bam",iso6391:"bm"},{name:"Balinese",iso6392B:"ban"},{name:"Basque",iso6392B:"baq",iso6392T:"eus",iso6391:"eu"},{name:"Basa",iso6392B:"bas"},{name:"Baltic languages",iso6392B:"bat"},{name:"Beja; Bedawiyet",iso6392B:"bej"},{name:"Belarusian",iso6392B:"bel",iso6391:"be"},{name:"Bemba",iso6392B:"bem"},{name:"Bengali",iso6392B:"ben",iso6391:"bn"},{name:"Berber languages",iso6392B:"ber"},{name:"Bhojpuri",iso6392B:"bho"},{name:"Bihari languages",iso6392B:"bih",iso6391:"bh"},{name:"Bikol",iso6392B:"bik"},{name:"Bini; Edo",iso6392B:"bin"},{name:"Bislama",iso6392B:"bis",iso6391:"bi"},{name:"Siksika",iso6392B:"bla"},{name:"Bantu languages",iso6392B:"bnt"},{name:"Bosnian",iso6392B:"bos",iso6391:"bs"},{name:"Braj",iso6392B:"bra"},{name:"Breton",iso6392B:"bre",iso6391:"br"},{name:"Batak languages",iso6392B:"btk"},{name:"Buriat",iso6392B:"bua"},{name:"Buginese",iso6392B:"bug"},{name:"Bulgarian",iso6392B:"bul",iso6391:"bg"},{name:"Burmese",iso6392B:"bur",iso6392T:"mya",iso6391:"my"},{name:"Blin; Bilin",iso6392B:"byn"},{name:"Caddo",iso6392B:"cad"},{name:"Central American Indian languages",iso6392B:"cai"},{name:"Galibi Carib",iso6392B:"car"},{name:"Catalan; Valencian",iso6392B:"cat",iso6391:"ca"},{name:"Caucasian languages",iso6392B:"cau"},{name:"Cebuano",iso6392B:"ceb"},{name:"Celtic languages",iso6392B:"cel"},{name:"Chamorro",iso6392B:"cha",iso6391:"ch"},{name:"Chibcha",iso6392B:"chb"},{name:"Chechen",iso6392B:"che",iso6391:"ce"},{name:"Chagatai",iso6392B:"chg"},{name:"Chinese",iso6392B:"chi",iso6392T:"zho",iso6391:"zh"},{name:"Chuukese",iso6392B:"chk"},{name:"Mari",iso6392B:"chm"},{name:"Chinook jargon",iso6392B:"chn"},{name:"Choctaw",iso6392B:"cho"},{name:"Chipewyan; Dene Suline",iso6392B:"chp"},{name:"Cherokee",iso6392B:"chr"},{name:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",iso6392B:"chu",iso6391:"cu"},{name:"Chuvash",iso6392B:"chv",iso6391:"cv"},{name:"Cheyenne",iso6392B:"chy"},{name:"Chamic languages",iso6392B:"cmc"},{name:"Montenegrin",iso6392B:"cnr"},{name:"Coptic",iso6392B:"cop"},{name:"Cornish",iso6392B:"cor",iso6391:"kw"},{name:"Corsican",iso6392B:"cos",iso6391:"co"},{name:"Creoles and pidgins, English based",iso6392B:"cpe"},{name:"Creoles and pidgins, French-based",iso6392B:"cpf"},{name:"Creoles and pidgins, Portuguese-based",iso6392B:"cpp"},{name:"Cree",iso6392B:"cre",iso6391:"cr"},{name:"Crimean Tatar; Crimean Turkish",iso6392B:"crh"},{name:"Creoles and pidgins",iso6392B:"crp"},{name:"Kashubian",iso6392B:"csb"},{name:"Cushitic languages",iso6392B:"cus"},{name:"Czech",iso6392B:"cze",iso6392T:"ces",iso6391:"cs"},{name:"Dakota",iso6392B:"dak"},{name:"Danish",iso6392B:"dan",iso6391:"da"},{name:"Dargwa",iso6392B:"dar"},{name:"Land Dayak languages",iso6392B:"day"},{name:"Delaware",iso6392B:"del"},{name:"Slave (Athapascan)",iso6392B:"den"},{name:"Dogrib",iso6392B:"dgr"},{name:"Dinka",iso6392B:"din"},{name:"Divehi; Dhivehi; Maldivian",iso6392B:"div",iso6391:"dv"},{name:"Dogri",iso6392B:"doi"},{name:"Dravidian languages",iso6392B:"dra"},{name:"Lower Sorbian",iso6392B:"dsb"},{name:"Duala",iso6392B:"dua"},{name:"Dutch, Middle (ca.1050-1350)",iso6392B:"dum"},{name:"Dutch; Flemish",iso6392B:"dut",iso6392T:"nld",iso6391:"nl"},{name:"Dyula",iso6392B:"dyu"},{name:"Dzongkha",iso6392B:"dzo",iso6391:"dz"},{name:"Efik",iso6392B:"efi"},{name:"Egyptian (Ancient)",iso6392B:"egy"},{name:"Ekajuk",iso6392B:"eka"},{name:"Elamite",iso6392B:"elx"},{name:"English",iso6392B:"eng",iso6391:"en"},{name:"English, Middle (1100-1500)",iso6392B:"enm"},{name:"Esperanto",iso6392B:"epo",iso6391:"eo"},{name:"Estonian",iso6392B:"est",iso6391:"et"},{name:"Ewe",iso6392B:"ewe",iso6391:"ee"},{name:"Ewondo",iso6392B:"ewo"},{name:"Fang",iso6392B:"fan"},{name:"Faroese",iso6392B:"fao",iso6391:"fo"},{name:"Fanti",iso6392B:"fat"},{name:"Fijian",iso6392B:"fij",iso6391:"fj"},{name:"Filipino; Pilipino",iso6392B:"fil"},{name:"Finnish",iso6392B:"fin",iso6391:"fi"},{name:"Finno-Ugrian languages",iso6392B:"fiu"},{name:"Fon",iso6392B:"fon"},{name:"French",iso6392B:"fre",iso6392T:"fra",iso6391:"fr"},{name:"French, Middle (ca.1400-1600)",iso6392B:"frm"},{name:"French, Old (842-ca.1400)",iso6392B:"fro"},{name:"Northern Frisian",iso6392B:"frr"},{name:"Eastern Frisian",iso6392B:"frs"},{name:"Western Frisian",iso6392B:"fry",iso6391:"fy"},{name:"Fulah",iso6392B:"ful",iso6391:"ff"},{name:"Friulian",iso6392B:"fur"},{name:"Ga",iso6392B:"gaa"},{name:"Gayo",iso6392B:"gay"},{name:"Gbaya",iso6392B:"gba"},{name:"Germanic languages",iso6392B:"gem"},{name:"Georgian",iso6392B:"geo",iso6392T:"kat",iso6391:"ka"},{name:"German",iso6392B:"ger",iso6392T:"deu",iso6391:"de"},{name:"Geez",iso6392B:"gez"},{name:"Gilbertese",iso6392B:"gil"},{name:"Gaelic; Scottish Gaelic",iso6392B:"gla",iso6391:"gd"},{name:"Irish",iso6392B:"gle",iso6391:"ga"},{name:"Galician",iso6392B:"glg",iso6391:"gl"},{name:"Manx",iso6392B:"glv",iso6391:"gv"},{name:"German, Middle High (ca.1050-1500)",iso6392B:"gmh"},{name:"German, Old High (ca.750-1050)",iso6392B:"goh"},{name:"Gondi",iso6392B:"gon"},{name:"Gorontalo",iso6392B:"gor"},{name:"Gothic",iso6392B:"got"},{name:"Grebo",iso6392B:"grb"},{name:"Greek, Ancient (to 1453)",iso6392B:"grc"},{name:"Greek, Modern (1453-)",iso6392B:"gre",iso6392T:"ell",iso6391:"el"},{name:"Guarani",iso6392B:"grn",iso6391:"gn"},{name:"Swiss German; Alemannic; Alsatian",iso6392B:"gsw"},{name:"Gujarati",iso6392B:"guj",iso6391:"gu"},{name:"Gwich'in",iso6392B:"gwi"},{name:"Haida",iso6392B:"hai"},{name:"Haitian; Haitian Creole",iso6392B:"hat",iso6391:"ht"},{name:"Hausa",iso6392B:"hau",iso6391:"ha"},{name:"Hawaiian",iso6392B:"haw"},{name:"Hebrew",iso6392B:"heb",iso6391:"he"},{name:"Herero",iso6392B:"her",iso6391:"hz"},{name:"Hiligaynon",iso6392B:"hil"},{name:"Himachali languages; Western Pahari languages",iso6392B:"him"},{name:"Hindi",iso6392B:"hin",iso6391:"hi"},{name:"Hittite",iso6392B:"hit"},{name:"Hmong; Mong",iso6392B:"hmn"},{name:"Hiri Motu",iso6392B:"hmo",iso6391:"ho"},{name:"Croatian",iso6392B:"hrv",iso6391:"hr"},{name:"Upper Sorbian",iso6392B:"hsb"},{name:"Hungarian",iso6392B:"hun",iso6391:"hu"},{name:"Hupa",iso6392B:"hup"},{name:"Iban",iso6392B:"iba"},{name:"Igbo",iso6392B:"ibo",iso6391:"ig"},{name:"Icelandic",iso6392B:"ice",iso6392T:"isl",iso6391:"is"},{name:"Ido",iso6392B:"ido",iso6391:"io"},{name:"Sichuan Yi; Nuosu",iso6392B:"iii",iso6391:"ii"},{name:"Ijo languages",iso6392B:"ijo"},{name:"Inuktitut",iso6392B:"iku",iso6391:"iu"},{name:"Interlingue; Occidental",iso6392B:"ile",iso6391:"ie"},{name:"Iloko",iso6392B:"ilo"},{name:"Interlingua (International Auxiliary Language Association)",iso6392B:"ina",iso6391:"ia"},{name:"Indic languages",iso6392B:"inc"},{name:"Indonesian",iso6392B:"ind",iso6391:"id"},{name:"Indo-European languages",iso6392B:"ine"},{name:"Ingush",iso6392B:"inh"},{name:"Inupiaq",iso6392B:"ipk",iso6391:"ik"},{name:"Iranian languages",iso6392B:"ira"},{name:"Iroquoian languages",iso6392B:"iro"},{name:"Italian",iso6392B:"ita",iso6391:"it"},{name:"Javanese",iso6392B:"jav",iso6391:"jv"},{name:"Lojban",iso6392B:"jbo"},{name:"Japanese",iso6392B:"jpn",iso6391:"ja"},{name:"Judeo-Persian",iso6392B:"jpr"},{name:"Judeo-Arabic",iso6392B:"jrb"},{name:"Kara-Kalpak",iso6392B:"kaa"},{name:"Kabyle",iso6392B:"kab"},{name:"Kachin; Jingpho",iso6392B:"kac"},{name:"Kalaallisut; Greenlandic",iso6392B:"kal",iso6391:"kl"},{name:"Kamba",iso6392B:"kam"},{name:"Kannada",iso6392B:"kan",iso6391:"kn"},{name:"Karen languages",iso6392B:"kar"},{name:"Kashmiri",iso6392B:"kas",iso6391:"ks"},{name:"Kanuri",iso6392B:"kau",iso6391:"kr"},{name:"Kawi",iso6392B:"kaw"},{name:"Kazakh",iso6392B:"kaz",iso6391:"kk"},{name:"Kabardian",iso6392B:"kbd"},{name:"Khasi",iso6392B:"kha"},{name:"Khoisan languages",iso6392B:"khi"},{name:"Central Khmer",iso6392B:"khm",iso6391:"km"},{name:"Khotanese; Sakan",iso6392B:"kho"},{name:"Kikuyu; Gikuyu",iso6392B:"kik",iso6391:"ki"},{name:"Kinyarwanda",iso6392B:"kin",iso6391:"rw"},{name:"Kirghiz; Kyrgyz",iso6392B:"kir",iso6391:"ky"},{name:"Kimbundu",iso6392B:"kmb"},{name:"Konkani",iso6392B:"kok"},{name:"Komi",iso6392B:"kom",iso6391:"kv"},{name:"Kongo",iso6392B:"kon",iso6391:"kg"},{name:"Korean",iso6392B:"kor",iso6391:"ko"},{name:"Kosraean",iso6392B:"kos"},{name:"Kpelle",iso6392B:"kpe"},{name:"Karachay-Balkar",iso6392B:"krc"},{name:"Karelian",iso6392B:"krl"},{name:"Kru languages",iso6392B:"kro"},{name:"Kurukh",iso6392B:"kru"},{name:"Kuanyama; Kwanyama",iso6392B:"kua",iso6391:"kj"},{name:"Kumyk",iso6392B:"kum"},{name:"Kurdish",iso6392B:"kur",iso6391:"ku"},{name:"Kutenai",iso6392B:"kut"},{name:"Ladino",iso6392B:"lad"},{name:"Lahnda",iso6392B:"lah"},{name:"Lamba",iso6392B:"lam"},{name:"Lao",iso6392B:"lao",iso6391:"lo"},{name:"Latin",iso6392B:"lat",iso6391:"la"},{name:"Latvian",iso6392B:"lav",iso6391:"lv"},{name:"Lezghian",iso6392B:"lez"},{name:"Limburgan; Limburger; Limburgish",iso6392B:"lim",iso6391:"li"},{name:"Lingala",iso6392B:"lin",iso6391:"ln"},{name:"Lithuanian",iso6392B:"lit",iso6391:"lt"},{name:"Mongo",iso6392B:"lol"},{name:"Lozi",iso6392B:"loz"},{name:"Luxembourgish; Letzeburgesch",iso6392B:"ltz",iso6391:"lb"},{name:"Luba-Lulua",iso6392B:"lua"},{name:"Luba-Katanga",iso6392B:"lub",iso6391:"lu"},{name:"Ganda",iso6392B:"lug",iso6391:"lg"},{name:"Luiseno",iso6392B:"lui"},{name:"Lunda",iso6392B:"lun"},{name:"Luo (Kenya and Tanzania)",iso6392B:"luo"},{name:"Lushai",iso6392B:"lus"},{name:"Macedonian",iso6392B:"mac",iso6392T:"mkd",iso6391:"mk"},{name:"Madurese",iso6392B:"mad"},{name:"Magahi",iso6392B:"mag"},{name:"Marshallese",iso6392B:"mah",iso6391:"mh"},{name:"Maithili",iso6392B:"mai"},{name:"Makasar",iso6392B:"mak"},{name:"Malayalam",iso6392B:"mal",iso6391:"ml"},{name:"Mandingo",iso6392B:"man"},{name:"Maori",iso6392B:"mao",iso6392T:"mri",iso6391:"mi"},{name:"Austronesian languages",iso6392B:"map"},{name:"Marathi",iso6392B:"mar",iso6391:"mr"},{name:"Masai",iso6392B:"mas"},{name:"Malay",iso6392B:"may",iso6392T:"msa",iso6391:"ms"},{name:"Moksha",iso6392B:"mdf"},{name:"Mandar",iso6392B:"mdr"},{name:"Mende",iso6392B:"men"},{name:"Irish, Middle (900-1200)",iso6392B:"mga"},{name:"Mi'kmaq; Micmac",iso6392B:"mic"},{name:"Minangkabau",iso6392B:"min"},{name:"Uncoded languages",iso6392B:"mis"},{name:"Mon-Khmer languages",iso6392B:"mkh"},{name:"Malagasy",iso6392B:"mlg",iso6391:"mg"},{name:"Maltese",iso6392B:"mlt",iso6391:"mt"},{name:"Manchu",iso6392B:"mnc"},{name:"Manipuri",iso6392B:"mni"},{name:"Manobo languages",iso6392B:"mno"},{name:"Mohawk",iso6392B:"moh"},{name:"Mongolian",iso6392B:"mon",iso6391:"mn"},{name:"Mossi",iso6392B:"mos"},{name:"Multiple languages",iso6392B:"mul"},{name:"Munda languages",iso6392B:"mun"},{name:"Creek",iso6392B:"mus"},{name:"Mirandese",iso6392B:"mwl"},{name:"Marwari",iso6392B:"mwr"},{name:"Mayan languages",iso6392B:"myn"},{name:"Erzya",iso6392B:"myv"},{name:"Nahuatl languages",iso6392B:"nah"},{name:"North American Indian languages",iso6392B:"nai"},{name:"Neapolitan",iso6392B:"nap"},{name:"Nauru",iso6392B:"nau",iso6391:"na"},{name:"Navajo; Navaho",iso6392B:"nav",iso6391:"nv"},{name:"Ndebele, South; South Ndebele",iso6392B:"nbl",iso6391:"nr"},{name:"Ndebele, North; North Ndebele",iso6392B:"nde",iso6391:"nd"},{name:"Ndonga",iso6392B:"ndo",iso6391:"ng"},{name:"Low German; Low Saxon; German, Low; Saxon, Low",iso6392B:"nds"},{name:"Nepali",iso6392B:"nep",iso6391:"ne"},{name:"Nepal Bhasa; Newari",iso6392B:"new"},{name:"Nias",iso6392B:"nia"},{name:"Niger-Kordofanian languages",iso6392B:"nic"},{name:"Niuean",iso6392B:"niu"},{name:"Norwegian Nynorsk; Nynorsk, Norwegian",iso6392B:"nno",iso6391:"nn"},{name:"Bokml, Norwegian; Norwegian Bokml",iso6392B:"nob",iso6391:"nb"},{name:"Nogai",iso6392B:"nog"},{name:"Norse, Old",iso6392B:"non"},{name:"Norwegian",iso6392B:"nor",iso6391:"no"},{name:"N'Ko",iso6392B:"nqo"},{name:"Pedi; Sepedi; Northern Sotho",iso6392B:"nso"},{name:"Nubian languages",iso6392B:"nub"},{name:"Classical Newari; Old Newari; Classical Nepal Bhasa",iso6392B:"nwc"},{name:"Chichewa; Chewa; Nyanja",iso6392B:"nya",iso6391:"ny"},{name:"Nyamwezi",iso6392B:"nym"},{name:"Nyankole",iso6392B:"nyn"},{name:"Nyoro",iso6392B:"nyo"},{name:"Nzima",iso6392B:"nzi"},{name:"Occitan (post 1500)",iso6392B:"oci",iso6391:"oc"},{name:"Ojibwa",iso6392B:"oji",iso6391:"oj"},{name:"Oriya",iso6392B:"ori",iso6391:"or"},{name:"Oromo",iso6392B:"orm",iso6391:"om"},{name:"Osage",iso6392B:"osa"},{name:"Ossetian; Ossetic",iso6392B:"oss",iso6391:"os"},{name:"Turkish, Ottoman (1500-1928)",iso6392B:"ota"},{name:"Otomian languages",iso6392B:"oto"},{name:"Papuan languages",iso6392B:"paa"},{name:"Pangasinan",iso6392B:"pag"},{name:"Pahlavi",iso6392B:"pal"},{name:"Pampanga; Kapampangan",iso6392B:"pam"},{name:"Panjabi; Punjabi",iso6392B:"pan",iso6391:"pa"},{name:"Papiamento",iso6392B:"pap"},{name:"Palauan",iso6392B:"pau"},{name:"Persian, Old (ca.600-400 B.C.)",iso6392B:"peo"},{name:"Persian",iso6392B:"per",iso6392T:"fas",iso6391:"fa"},{name:"Philippine languages",iso6392B:"phi"},{name:"Phoenician",iso6392B:"phn"},{name:"Pali",iso6392B:"pli",iso6391:"pi"},{name:"Polish",iso6392B:"pol",iso6391:"pl"},{name:"Pohnpeian",iso6392B:"pon"},{name:"Portuguese",iso6392B:"por",iso6391:"pt"},{name:"Prakrit languages",iso6392B:"pra"},{name:"Provenal, Old (to 1500); Occitan, Old (to 1500)",iso6392B:"pro"},{name:"Pushto; Pashto",iso6392B:"pus",iso6391:"ps"},{name:"Reserved for local use",iso6392B:"qaa-qtz"},{name:"Quechua",iso6392B:"que",iso6391:"qu"},{name:"Rajasthani",iso6392B:"raj"},{name:"Rapanui",iso6392B:"rap"},{name:"Rarotongan; Cook Islands Maori",iso6392B:"rar"},{name:"Romance languages",iso6392B:"roa"},{name:"Romansh",iso6392B:"roh",iso6391:"rm"},{name:"Romany",iso6392B:"rom"},{name:"Romanian; Moldavian; Moldovan",iso6392B:"rum",iso6392T:"ron",iso6391:"ro"},{name:"Rundi",iso6392B:"run",iso6391:"rn"},{name:"Aromanian; Arumanian; Macedo-Romanian",iso6392B:"rup"},{name:"Russian",iso6392B:"rus",iso6391:"ru"},{name:"Sandawe",iso6392B:"sad"},{name:"Sango",iso6392B:"sag",iso6391:"sg"},{name:"Yakut",iso6392B:"sah"},{name:"South American Indian languages",iso6392B:"sai"},{name:"Salishan languages",iso6392B:"sal"},{name:"Samaritan Aramaic",iso6392B:"sam"},{name:"Sanskrit",iso6392B:"san",iso6391:"sa"},{name:"Sasak",iso6392B:"sas"},{name:"Santali",iso6392B:"sat"},{name:"Sicilian",iso6392B:"scn"},{name:"Scots",iso6392B:"sco"},{name:"Selkup",iso6392B:"sel"},{name:"Semitic languages",iso6392B:"sem"},{name:"Irish, Old (to 900)",iso6392B:"sga"},{name:"Sign Languages",iso6392B:"sgn"},{name:"Shan",iso6392B:"shn"},{name:"Sidamo",iso6392B:"sid"},{name:"Sinhala; Sinhalese",iso6392B:"sin",iso6391:"si"},{name:"Siouan languages",iso6392B:"sio"},{name:"Sino-Tibetan languages",iso6392B:"sit"},{name:"Slavic languages",iso6392B:"sla"},{name:"Slovak",iso6392B:"slo",iso6392T:"slk",iso6391:"sk"},{name:"Slovenian",iso6392B:"slv",iso6391:"sl"},{name:"Southern Sami",iso6392B:"sma"},{name:"Northern Sami",iso6392B:"sme",iso6391:"se"},{name:"Sami languages",iso6392B:"smi"},{name:"Lule Sami",iso6392B:"smj"},{name:"Inari Sami",iso6392B:"smn"},{name:"Samoan",iso6392B:"smo",iso6391:"sm"},{name:"Skolt Sami",iso6392B:"sms"},{name:"Shona",iso6392B:"sna",iso6391:"sn"},{name:"Sindhi",iso6392B:"snd",iso6391:"sd"},{name:"Soninke",iso6392B:"snk"},{name:"Sogdian",iso6392B:"sog"},{name:"Somali",iso6392B:"som",iso6391:"so"},{name:"Songhai languages",iso6392B:"son"},{name:"Sotho, Southern",iso6392B:"sot",iso6391:"st"},{name:"Spanish; Castilian",iso6392B:"spa",iso6391:"es"},{name:"Sardinian",iso6392B:"srd",iso6391:"sc"},{name:"Sranan Tongo",iso6392B:"srn"},{name:"Serbian",iso6392B:"srp",iso6391:"sr"},{name:"Serer",iso6392B:"srr"},{name:"Nilo-Saharan languages",iso6392B:"ssa"},{name:"Swati",iso6392B:"ssw",iso6391:"ss"},{name:"Sukuma",iso6392B:"suk"},{name:"Sundanese",iso6392B:"sun",iso6391:"su"},{name:"Susu",iso6392B:"sus"},{name:"Sumerian",iso6392B:"sux"},{name:"Swahili",iso6392B:"swa",iso6391:"sw"},{name:"Swedish",iso6392B:"swe",iso6391:"sv"},{name:"Classical Syriac",iso6392B:"syc"},{name:"Syriac",iso6392B:"syr"},{name:"Tahitian",iso6392B:"tah",iso6391:"ty"},{name:"Tai languages",iso6392B:"tai"},{name:"Tamil",iso6392B:"tam",iso6391:"ta"},{name:"Tatar",iso6392B:"tat",iso6391:"tt"},{name:"Telugu",iso6392B:"tel",iso6391:"te"},{name:"Timne",iso6392B:"tem"},{name:"Tereno",iso6392B:"ter"},{name:"Tetum",iso6392B:"tet"},{name:"Tajik",iso6392B:"tgk",iso6391:"tg"},{name:"Tagalog",iso6392B:"tgl",iso6391:"tl"},{name:"Thai",iso6392B:"tha",iso6391:"th"},{name:"Tibetan",iso6392B:"tib",iso6392T:"bod",iso6391:"bo"},{name:"Tigre",iso6392B:"tig"},{name:"Tigrinya",iso6392B:"tir",iso6391:"ti"},{name:"Tiv",iso6392B:"tiv"},{name:"Tokelau",iso6392B:"tkl"},{name:"Klingon; tlhIngan-Hol",iso6392B:"tlh"},{name:"Tlingit",iso6392B:"tli"},{name:"Tamashek",iso6392B:"tmh"},{name:"Tonga (Nyasa)",iso6392B:"tog"},{name:"Tonga (Tonga Islands)",iso6392B:"ton",iso6391:"to"},{name:"Tok Pisin",iso6392B:"tpi"},{name:"Tsimshian",iso6392B:"tsi"},{name:"Tswana",iso6392B:"tsn",iso6391:"tn"},{name:"Tsonga",iso6392B:"tso",iso6391:"ts"},{name:"Turkmen",iso6392B:"tuk",iso6391:"tk"},{name:"Tumbuka",iso6392B:"tum"},{name:"Tupi languages",iso6392B:"tup"},{name:"Turkish",iso6392B:"tur",iso6391:"tr"},{name:"Altaic languages",iso6392B:"tut"},{name:"Tuvalu",iso6392B:"tvl"},{name:"Twi",iso6392B:"twi",iso6391:"tw"},{name:"Tuvinian",iso6392B:"tyv"},{name:"Udmurt",iso6392B:"udm"},{name:"Ugaritic",iso6392B:"uga"},{name:"Uighur; Uyghur",iso6392B:"uig",iso6391:"ug"},{name:"Ukrainian",iso6392B:"ukr",iso6391:"uk"},{name:"Umbundu",iso6392B:"umb"},{name:"Undetermined",iso6392B:"und"},{name:"Urdu",iso6392B:"urd",iso6391:"ur"},{name:"Uzbek",iso6392B:"uzb",iso6391:"uz"},{name:"Vai",iso6392B:"vai"},{name:"Venda",iso6392B:"ven",iso6391:"ve"},{name:"Vietnamese",iso6392B:"vie",iso6391:"vi"},{name:"Volapk",iso6392B:"vol",iso6391:"vo"},{name:"Votic",iso6392B:"vot"},{name:"Wakashan languages",iso6392B:"wak"},{name:"Wolaitta; Wolaytta",iso6392B:"wal"},{name:"Waray",iso6392B:"war"},{name:"Washo",iso6392B:"was"},{name:"Welsh",iso6392B:"wel",iso6392T:"cym",iso6391:"cy"},{name:"Sorbian languages",iso6392B:"wen"},{name:"Walloon",iso6392B:"wln",iso6391:"wa"},{name:"Wolof",iso6392B:"wol",iso6391:"wo"},{name:"Kalmyk; Oirat",iso6392B:"xal"},{name:"Xhosa",iso6392B:"xho",iso6391:"xh"},{name:"Yao",iso6392B:"yao"},{name:"Yapese",iso6392B:"yap"},{name:"Yiddish",iso6392B:"yid",iso6391:"yi"},{name:"Yoruba",iso6392B:"yor",iso6391:"yo"},{name:"Yupik languages",iso6392B:"ypk"},{name:"Zapotec",iso6392B:"zap"},{name:"Blissymbols; Blissymbolics; Bliss",iso6392B:"zbl"},{name:"Zenaga",iso6392B:"zen"},{name:"Standard Moroccan Tamazight",iso6392B:"zgh"},{name:"Zhuang; Chuang",iso6392B:"zha",iso6391:"za"},{name:"Zande languages",iso6392B:"znd"},{name:"Zulu",iso6392B:"zul",iso6391:"zu"},{name:"Zuni",iso6392B:"zun"},{name:"No linguistic content; Not applicable",iso6392B:"zxx"},{name:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",iso6392B:"zza"}],language_codes={},home_page=(temps.map(function(e){var t;void 0!==e.iso6391&&(t=e.iso6391,language_codes[t]=e.name),void 0!==e.iso6392B&&(t=e.iso6392B,language_codes[t]=e.name),void 0!==e.iso6392T&&(t=e.iso6392T,language_codes[t]=e.name)}),{initiated:!(language_codes.tu="Turkish"),keys:{focused_part:"menu_selection",menu_selection:0,v_keys:[0,0,0,0,0,0],parent_control_modal:0,user_account_modal:0,stream_format_selection:0,subtitle_setting_selection:0},prev_focus_dom:null,menu_doms:$("#home-page .menu-item-container"),notification_timer:null,vod_categories:[],series_categories:[],channel_categories:[],sub_menu_doms:[],time_out:null,parent_control_doms:$(".parent-control-item"),language_doms:[],doms_translated:[],stream_format_items:$(".stream-format-item"),subtitle_setting_doms:$(".subtitle-setting-item"),init:function(e){this.prev_focus_dom=null,turn_off_page.prev_route="home-page","turn-off-page"!==current_route&&(current_route="home-page"),$("#loading-page").addClass("hide"),$("#login-container").hide(),$("#app").show(),this.sub_menu_doms=[];var i="",t=VodModel.getCategories(!1,!0),t=(this.vod_categories=t,i=this.makeHomeCategoryDoms(t),$('.home-section-item-wrapper[data-kind="vod"] .home-section-sub-menus-container').html(i),SeriesModel.getCategories(!1,!0)),t=(this.series_categories=t,i=this.makeHomeCategoryDoms(t),$('.home-section-item-wrapper[data-kind="series"] .home-section-sub-menus-container').html(i),LiveModel.getCategories(!1,!0)),s=(this.channel_categories=t,i=this.makeHomeCategoryDoms(t),$('.home-section-item-wrapper[data-kind="channel"] .home-section-sub-menus-container').html(i),this.keys.v_keys=[0,0,0,0,0,0,0,0],[]);$(".home-section-item-wrapper").map(function(e,t){t=$(t).find(".home-section-sub-menu-item");s.push(t)}),this.sub_menu_doms=s,this.prev_focus_dom=null,$("#home-page").removeClass("hide"),i="",languages.map(function(e,t){e.words[e.code]||console.log(e.name),i+='<div class="modal-operation-menu-type-3 language-item"                   data-sort_key="default"                   onclick="home_page.selectLanguage(\''+e.code+"',"+t+')"                   onmouseenter="home_page.hoverLanguage('+t+')"                   data-language="'+e.code+'"                >'+e.words[e.code]+"</div>"}),$("#select-language-body").html(i),this.language_doms=$(".language-item"),this.doms_translated=$("*").filter(function(){return void 0!==$(this).data("word_code")}),this.changeDomsLanguage(),e&&this.hoverMainMenu(this.menu_doms[0],!0)},updateByCategoryHidden:function(e){var t,i=this.keys;switch(e){case"vod":t=VodModel.getCategories(!1,!0);break;case"live":t=LiveModel.getCategories(!1,!0);break;case"series":t=SeriesModel.getCategories(!1,!0)}var s="live"===e?"channel":e;this[s+"_categories"]=t;for(var e=this.makeHomeCategoryDoms(t),a=($('.home-section-item-wrapper[data-kind="'+s+'"] .home-section-sub-menus-container').html(e),$(".home-section-item-wrapper")),o=0;o<a.length;o++){var n=a[o];if($(n).data("kind")===s){n=$(n).find(".home-section-sub-menu-item");i.v_keys[o]>=n.length&&(i.v_keys[o]=n.length-1),this.sub_menu_doms[o]=n;break}}this.hoverSubMenu(this.sub_menu_doms[i.menu_selection][i.v_keys[i.menu_selection]])},makeHomeCategoryDoms:function(e){var i="";return e.map(function(e,t){i+='<div class="home-section-sub-menu-item"                    data-index="'+t+'"                    onmouseenter="home_page.hoverSubMenu(this)"                     onclick="home_page.handleMenuClick()"                 >'+e.category_name+"</div>"}),i},exit:function(){$("#home-page").addClass("hide")},reEnter:function(){$("#home-page").removeClass("hide"),current_route="home-page"},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":turn_off_page.init(current_route);break;case"parent_control_modal":this.cancelResetParentAccount();break;case"user_account_modal":case"language_selection":$(".modal").modal("hide"),e.focused_part="menu_selection";break;case"stream_format_selection":$("#stream-format-modal").modal("hide"),e.focused_part="menu_selection";break;case"subtitle_setting_selection":$("#subtitle-setting-modal").modal("hide"),e.focused_part="menu_selection"}},changeKeyOrder:function(e){var t,i,s,a=this.keys,o=this.sub_menu_doms;return 0==e?(i=this.menu_doms.length-1,t=$(this.menu_doms[i]).closest(".home-section-item-container"),$(t).remove(),$("#home-section-items-wrapper").prepend(t),s=a.v_keys[i],a.v_keys.splice(i),a.v_keys.unshift(s),s=this.sub_menu_doms[i],o.splice(i,1),o.unshift(s),e=1):e===this.menu_doms.length-1&&(t=$(this.menu_doms[0]).closest(".home-section-item-container"),$(t).remove(),$("#home-section-items-wrapper").append(t),i=a.v_keys[0],a.v_keys.splice(0,1),a.v_keys.push(i),s=this.sub_menu_doms[0],o.splice(0,1),o.push(s),e=this.menu_doms.length-2),this.sub_menu_doms=o,e},showParentControlModal:function(){$("#parent-account-valid-error").hide(),$("#settings-modal").modal("hide"),$(".parent-modal-input-wrapper input").val(""),$("#parent-control-modal").modal("show"),this.keys.focused_part="parent_control_modal",$(this.parent_control_doms).removeClass("active"),this.keys.parent_control_modal=0,$(this.parent_control_doms[0]).addClass("active"),$(this.parent_control_doms[0]).find("input").focus()},clickParentControl:function(t){var e=this.keys;switch(e.parent_control_modal=t,e.parent_control_modal){case 0:case 1:case 2:$(this.parent_control_doms[t]).find("input").focus();var i=this;setTimeout(function(){var e=$(i.parent_control_doms[t]).find("input").val();$(i.parent_control_doms[t]).find("input")[0].setSelectionRange(e.length,e.length)},200);break;case 3:this.resetParentAccount();break;case 4:this.cancelResetParentAccount()}},resetParentAccount:function(){$("#parent-account-valid-error").hide();var e=$("#current_parent_password").val(),t=$("#new_parent_password").val(),i=$("#new_parent_password_confirm").val();e!=parent_account_password?$("#parent-account-valid-error").text("Current password does not match").slideDown():t!=i?$("#parent-account-valid-error").text("Password does not match").slideDown():t?(parent_account_password=t,localStorage.setItem(storage_id+"parent_account_password",parent_account_password),$("#parent-control-modal").modal("hide"),this.keys.focused_part="menu_selection"):$("#parent-account-valid-error").text("Password is required").slideDown()},cancelResetParentAccount:function(){$("#parent-control-modal").modal("hide"),this.keys.focused_part="menu_selection"},showUserAccounts:function(){$("#settings-modal").modal("hide"),$("#user-account-mac-address").text(mac_address),2==is_trial||1==is_trial?$("#user-account-is_trial").text("Active"):$("#user-account-is_trial").text("Trial"),$("#user-account-modal").modal("show"),$("#user-account-expire-date").text(expire_date),this.keys.focused_part="user_account_modal"},getSelectedLanguageWords:function(e){for(var t={},i=0;i<languages.length;i++)if(languages[i].code===e){t=languages[i].words;break}current_words=t},showLanguages:function(){$("#settings-modal").modal("hide");var i=this.keys,e=this.language_doms;e.map(function(e,t){$(t).data("language")==settings.language&&(i.language_selection=e)}),$(e).removeClass("active"),$(e[i.language_selection]).addClass("active"),$("#language-select-modal").modal("show"),this.hoverLanguage(0)},selectLanguage:function(e,t){settings.saveSettings("language",e,"");e=this.keys;e.language_selection=t,$(this.language_doms).removeClass("active"),$(this.language_doms[t]).addClass("active"),$("#language-select-modal").modal("hide"),e.focused_part="menu_selection",this.changeDomsLanguage()},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language),this.doms_translated.map(function(e,t){var i=$(t).data("word_code");void 0!==current_words[i]&&$(t).text(current_words[i])})},showStreamFormatModal:function(){this.hoverStreamFormatItem(0),this.initiate_stream_format||($('input[name="stream-format"][value="'+settings.stream_format+'"]').prop("checked",!0),this.initiate_stream_format=!0),$("#stream-format-modal").modal("show")},saveStreamFormat:function(){var e=$("input[name='stream-format']:checked").val();void 0!==e&&settings.saveSettings("stream_format",e,""),this.goBack()},showSubtitleSetting:function(){$("#current-subtitle-size").text(settings.subtitle_size+"px"),$("#subtitle-setting-modal").modal("show"),this.hoverSubtitleSetting(0)},increaseSubtitleSize:function(e){var t=settings.subtitle_size;100<(t=(t+=e)<20?20:t)&&(t=100),$("#current-subtitle-size").text(t+"px"),$(".subtitle-container").css({"font-size":t/16+"rem"}),settings.saveSettings("subtitle_size",t,"")},hoverMainMenu:function(e,t){$(".home-section-item-wrapper").removeClass("active");var i=$(e).closest(".home-section-item-wrapper").data("index"),s=this.keys;s.focused_part="menu_selection",t?(i=this.changeKeyOrder(i),$(".home-section-item-wrapper").map(function(e,t){$(t).data("index",e)}),$("#home-subscription-section-container").removeClass("moved")):0<this.sub_menu_doms[i].length&&$(e).closest(".home-section-item-container").position().left<100?$("#home-subscription-section-container").addClass("moved"):$("#home-subscription-section-container").removeClass("moved"),s.menu_selection=i,this.menu_doms=$(".menu-item-container"),moveScrollPosition($("#home-section-items-wrapper"),$(e).closest(".home-section-item-container"),"horizontal",t),clearTimeout(this.time_out),this.time_out=setTimeout(function(){$(e).closest(".home-section-item-wrapper").addClass("active")},200),0<this.sub_menu_doms[i].length&&this.hoverSubMenu(this.sub_menu_doms[i][s.v_keys[i]])},hoverSubMenu:function(e){var t=$(e).data("index"),i=$(e).closest(".home-section-item-wrapper").data("index");this.keys.v_keys[i]=t,$(this.prev_focus_dom).removeClass("active"),this.prev_focus_dom=$(this.sub_menu_doms[i][t]),$(this.sub_menu_doms[i][t]).addClass("active"),moveScrollPosition($(e).closest(".home-section-sub-menus-container")[0],this.sub_menu_doms[i][t],"vertical",!1)},hoverParentControl:function(e){this.keys.parent_control_modal=e,$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[e]).addClass("active")},hoverLanguage:function(e){var t=this.keys,i=this.language_doms;t.language_selection=e,t.focused_part="language_selection",$(i).removeClass("active"),$(i[t.language_selection]).addClass("active"),moveScrollPosition($("#select-language-body"),i[t.language_selection],"vertical",!1)},hoverStreamFormatItem:function(e){var t=this.keys;t.focused_part="stream_format_selection",$(this.stream_format_items).removeClass("active"),$(this.stream_format_items[e]).addClass("active"),t.stream_format_selection=e},hoverSubtitleSetting:function(e){var t=this.keys;t.focused_part="subtitle_setting_selection",t.subtitle_setting_selection=e,$(this.subtitle_setting_doms).removeClass("active"),$(this.subtitle_setting_doms[e]).addClass("active")},handleMenuClick:function(){var t,i=this.keys;switch(i.focused_part){case"menu_selection":var e,s=$(this.menu_doms[i.menu_selection]).closest(".home-section-item-wrapper").data("kind"),a=i.v_keys[i.menu_selection];switch(s){case"channel":case"vod":case"series":if("channel"===s?o=this.channel_categories:"vod"===s?o=this.vod_categories:"series"===s&&(o=this.series_categories),checkForAdult(o=o[a],"category",[]))return void parent_confirm_page.init("home-page");"channel"===s?channel_page.init(o,null,"home-page"):vod_series_page.init(s,o);break;case"settings":switch(a){case 0:playlist_page.init();break;case 1:this.showParentControlModal();break;case 2:case 3:case 4:2==a?e="live":3==a?e="vod":4==a&&(e="series"),$("#home-page").addClass("hide"),hide_category_page.init(e);break;case 5:this.showUserAccounts();break;case 6:this.showLanguages();break;case 7:this.showStreamFormatModal();break;case 8:clear_cache_page.init("home-page");break;case 9:this.showSubtitleSetting();break;case 10:clear_recent_page.init("home-page","vod");break;case 11:clear_recent_page.init("home-page","series")}break;case"replay":catchup_page.init();break;case"search":var o=0==a?"channel":1==a?"vod":"series";search_page.init("home-page",o);break;case"storage":storage_page.init();break;case"sport":league_page.init()}break;case"parent_control_modal":i.parent_control_modal<3?($(this.parent_control_doms[i.parent_control_modal]).find("input").focus(),t=this,setTimeout(function(){var e=$(t.parent_control_doms[i.parent_control_modal]).find("input").val();console.log(e,i.parent_control_modal),$(t.parent_control_doms[i.parent_control_modal]).find("input")[0].setSelectionRange(e.length,e.length)},200)):$(this.parent_control_doms[i.parent_control_modal]).trigger("click");break;case"language_selection":$(this.language_doms[i.language_selection]).trigger("click");break;case"stream_format_selection":i.stream_format_selection<3?$(this.stream_format_items[i.stream_format_selection]).find("input").prop("checked",!0):3==i.stream_format_selection?this.saveStreamFormat():4==i.stream_format_selection&&this.goBack();break;case"subtitle_setting_selection":$(this.subtitle_setting_doms[i.subtitle_setting_selection]).trigger("click")}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":var i=t.v_keys[t.menu_selection];(i=(i+=e)<0?0:i)>=this.sub_menu_doms[t.menu_selection].length&&(i=this.sub_menu_doms[t.menu_selection].length-1),t.v_keys[t.menu_selection]=i,this.hoverSubMenu(this.sub_menu_doms[t.menu_selection][i]);break;case"parent_control_modal":0<e?t.parent_control_modal<3&&(t.parent_control_modal+=e):3<=t.parent_control_modal?t.parent_control_modal=2:(t.parent_control_modal+=e,t.parent_control_modal<0&&(t.parent_control_modal=0)),$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[t.parent_control_modal]).addClass("active");break;case"language_selection":i=this.language_doms;t.language_selection+=e,t.language_selection<0&&(t.language_selection=i.length-1),t.language_selection>=i.length&&(t.language_selection=0),this.hoverLanguage(t.language_selection);break;case"stream_format_selection":t.stream_format_selection<3?t.stream_format_selection+=e:3<=t.stream_format_selection&&e<0&&(t.stream_format_selection=2),t.stream_format_selection<0&&(t.stream_format_selection=0),this.hoverStreamFormatItem(t.stream_format_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=this.menu_doms.length-1),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=0),this.hoverMainMenu(this.menu_doms[t.menu_selection],!0);break;case"parent_control_modal":3<=t.parent_control_modal&&(t.parent_control_modal+=e,t.parent_control_modal<3&&(t.parent_control_modal=3),4<t.parent_control_modal&&(t.parent_control_modal=4),$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[t.parent_control_modal]).addClass("active"));break;case"stream_format_selection":0<e?this.hoverStreamFormatItem(this.stream_format_items.length-1):this.hoverStreamFormatItem(this.stream_format_items.length-2);break;case"subtitle_setting_selection":0<e?this.hoverSubtitleSetting(1):this.hoverSubtitleSetting(0)}},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}),playlist_page={initiated:!1,keys:{focused_part:"playlist_selection",playlist_selection:0},playlist_doms:[],back_btn_dom:null,tried_panel_indexes:[],init:function(){var s,a;this.tried_panel_indexes=[],this.initiated||(s="",a=settings.playlist_id,playlist_urls.map(function(e,t){var i=a===e.id;s+='<div class="playlist-item-container"                       onmouseenter="playlist_page.hoverPlayListItem('+t+')"                       onclick="playlist_page.changePlaylist('+t+')"                   >                       <div class="playlist-item-wrapper">                           <span class="playlist-name">'+e.playlist_name+"</span>"+('<div class="playlist-state '+(i?"playing":"")+'"><i class="fa fa-play"></i></div>')+"</div>                    </div>"}),this.initiated=!0,$("#playlist-items-container").html(s),this.playlist_doms=$(".playlist-item-container"),this.back_btn_dom=$("#playlist-back-icon"),$("#notification-title").text(notification.title),$("#notification-content").text(notification.content),$("#playlist-device-id").text(mac_address),$("#playlist-device-key").text(device_key)),this.hoverPlayListItem(this.keys.playlist_selection),home_page.exit(),$("#playlist-page").removeClass("hide"),current_route="playlist-page"},hoverPlayListItem:function(e){var t=this.keys;t.focused_part="playlist_selection",t.playlist_selection=e,$(this.back_btn_dom).removeClass("active"),$(this.playlist_doms).removeClass("active"),$(this.playlist_doms[e]).addClass("active"),moveScrollPosition($("#playlist-items-container"),this.playlist_doms[e],"vertical",!1)},changePlaylist:function(e){var t=playlist_urls[e];t.id===settings.playlist_id?this.goBack():($(home_page.prev_focus_dom).removeClass("active"),$(this.playlist_doms).find(".playlist-state").removeClass("playing"),$($(this.playlist_doms[e]).find(".playlist-state")).addClass("playing"),settings.saveSettings("playlist_id",t.id,""),settings.saveSettings("playlist",t,"array"),current_route="login-page",$("#playlist-page").addClass("hide"),$("#loading-page").removeClass("hide"),parseM3uUrl(),login_page.proceed_login())},showPlayListEditPage:function(){playlist_edit_page.init("playlist-page")},removePlayList:function(){0!=playlist_urls.length&&(1==playlist_urls.length?showToast("Sorry","You need to have 1 playlist at least"):0<playlist_urls.length&&(showLoader(!0),this.is_loading=!0,this.proceedRemovingWithServer()))},proceedRemovingWithServer:function(){var e,t,i,s,a=this.keys,a=playlist_urls[a.playlist_selection];a.id.includes("non_saved")?this.playlistRemoved(!0):(a={mac_address:mac_address,app_type:platform,id:a.id},t=(e=pickPanelUrl(this.tried_panel_indexes))[1],i=e[0],s=this,$.ajax({method:"post",url:t+"/remove_playlist",data:a,success:function(e){s.tried_panel_indexes=[],s.playlistRemoved()},error:function(){s.tried_panel_indexes.push(i),s.tried_panel_indexes.length<panel_urls.length?s.proceedRemovingWithServer():s.playlistRemoved()}}))},playlistRemoved:function(){var e=this.keys,t=playlist_urls[e.playlist_selection].id,i=(playlist_urls.splice(e.playlist_selection,1),showLoader(!1),this.is_loading=!1,this.initiated=!1,e.playlist_selection);$(this.playlist_doms[i]).remove(),settings.playlist_id===t?(settings.saveSettings("playlist_id","",""),settings.saveSettings("playlist",{},"array"),e.playlist_selection=0,this.changePlaylist(0)):(this.playlist_doms=$(".playlist-item-container"),console.log(this.playlist_doms,this.playlist_doms.length),i>=this.playlist_doms.length&&(i=this.playlist_doms.length-1),e.playlist_selection=i,this.init())},handleMenuClick:function(){var e=this.keys;"playlist_selection"===e.focused_part&&$(this.playlist_doms[e.playlist_selection]).trigger("click")},handleMenuLeftRight:function(e){var t=this.keys;"playlist_selection"===t.focused_part&&(t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection))},handleMenusUpDown:function(e){var t=this.keys;"playlist_selection"===t.focused_part&&(t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection))},goBack:function(){$("#playlist-page").addClass("hide"),home_page.reEnter()},HandleKey:function(e){switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-3);break;case tvKey.DOWN:this.handleMenusUpDown(3);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.BLUE:this.showPlayListEditPage();break;case tvKey.RED:this.removePlayList()}}};function initKeys(){var e;if("samsung"===platform){var t,i;try{for(i=tizen.tvinputdevice.getSupportedKeys(),t=0;t<i.length;t++)i[t].name,i[t].code,tizen.tvinputdevice.registerKey(i[t].name);tizen.tvinputdevice.unregisterKey("VolumeUp"),tizen.tvinputdevice.unregisterKey("VolumeDown"),tizen.tvinputdevice.unregisterKey("VolumeMute")}catch(e){}e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,RETURN:10009,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}}else"lg"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:461,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}:"vidaa"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072,RETURN:8,PLAY_PAUSE:463,MediaPlayPause:463}:"windows"===platform&&(e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:27,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072});window.tvKey=e}function confirmParentPassword(){"home-page"===current_route&&home_page.confirmParentPassword()}function cancelParentPassword(){"home-page"===current_route&&home_page.cancelParentPassword()}var media_player,channel_page={current_channel_id:0,full_screen_video:!1,full_screen_timer:null,progressbar_timer:null,player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],current_category_index:0,category_hover_timer:null,category_hover_timeout:300,channel_hover_timer:null,channel_hover_timeout:300,keys:{focused_part:"category_selection",category_selection:0,channel_selection:0,search_back_selection:0,search_selection:-1,prev_focus:"",video_control:0,catch_up_btn:0,epg_selection:0},category_doms:[],channel_doms:[],catch_up_btn_dom:$("#catch-up-btn"),video_control_doms:$("#channel-page .video-control-icon-wrapper"),play_icon_index:1,search_items:[],filtered_movies:[],next_programme_timer:null,programmes:[],short_epg_limit_count:30,prev_focus_dom:null,next_channel_timer:null,prev_keyword:"",search_timer:null,rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,epg_doms:[],archive_available:!1,current_channel:null,sort_changed:!1,rearrange_origin_position:0,prev_route:"",init:function(e,t,i){this.prev_route=i,this.sort_changed=!1,this.rearrange_mode=!1,this.prev_focus_dom=null,$("#catch-up-btn").removeClass("is-visible"),$("#current-channel-name").text("");var i=this.keys,s=(home_page.exit(),$("#channel-page").removeClass("hide"),current_route="channel-page",LiveModel.getCategories(!1,!0)),a=(this.categories=s,""),o=0;s.map(function(e,t){a+='<div class="channel-page-category-item"                    onmouseenter="channel_page.hoverCategory(this)"                    onclick="channel_page.handleMenuClick()"                    data-index="'+t+'"                >                    <span class="channel-category-name-wrapper">                        <span class="channel-category-number">'+(t+1)+'</span>                         <span class="channel-category-name">'+e.category_name+'</span>                    </span>                     <span class="channel-category-movie-counts-wrapper">                        <span class="channel-category-movie-counts">'+e.movies.length+'</span>                        <img src="'+HOST+'app_src_min/images/arrow-right.png">                    </span>                </div>'});for(var n=0;n<s.length;n++)if(s[n].category_id==e.category_id){o=n;break}if($("#channel-page-categories-wrapper").html(a),this.category_doms=$(".channel-page-category-item"),this.current_category_index=-1,i.category_selection=o,this.hoverCategory(o),this.showCategoryChannels(),0<s[o].movies.length){var r=0;if(t)for(n=0;n<e.movies.length;n++)if(t.stream_id==e.movies[n].stream_id){r=n;break}this.hoverChannel(r,!0),this.showMovie(this.movies[r])}this.full_screen_video=!1},goBack:function(){var e=this.keys;switch(e.focused_part){case"video_control":$("#full-screen-information").slideUp(),e.focused_part="full_screen";break;case"full_screen":"block"===$("#full-screen-information").css("display")?(clearTimeout(this.full_screen_timer),this.hideFullScreenInfo()):(this.full_screen_video=!1,this.zoomInOut());break;case"search_selection":this.removeSearchResult();break;case"category_selection":this.Exit();break;case"channel_selection":this.hoverCategory(e.category_selection);break;case"epg_selection":$("#channel-epg-container").hide(),this.hoverCatchUpBtn();break;case"catch_up_btn":this.hoverChannel(e.channel_selection,!0)}},Exit:function(){try{media_player.close()}catch(e){console.log(e)}this.keys.focused_part="channel_selection",this.full_screen_video=!1,this.zoomInOut(),$("#channel-page").addClass("hide"),clearInterval(this.progressbar_timer),clearTimeout(this.full_screen_timer),clearTimeout(this.next_channel_timer),current_route=this.prev_route,"home-page"===this.prev_route?(home_page.reEnter(),this.sort_changed&&home_page.updateByCategoryHidden("live")):$("#search-page").show();var e=LiveModel.category_orders;if(0<e.length){for(var t=this.categories,i=0;i<t.length;i++)for(var s=0;s<e.length;s++)if(t[i].category_id==e[s].id){e[s].position=i;break}e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(e)),LiveModel.category_orders=e}},reEnter:function(){$("#channel-page").removeClass("hide"),current_route="channel-page",this.showMovie(this.current_channel)},showCategoryChannels:function(){var e,i,t=this.keys;t.category_selection!==this.current_category_index&&(e=this.categories[t.category_selection],$("#current-channel-category").text(e.category_name),$("#current-channel-group-name").text(e.category_name),this.movies=e.movies,i="",this.movies.map(function(e,t){i+='<div class="channel-menu-item" data-channel_id="'+e.stream_id+'"                   data-index="'+t+'"                   onmouseenter="channel_page.hoverChannel(this, false)"                   onclick="channel_page.handleMenuClick()"                >                    <span class="channel-number">'+e.num+'</span>                    <img class="channel-icon" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></span><span class="channel-name">'+e.name+"</span>"+(LiveModel.favourite_ids.includes(e.stream_id)?'<i class="fa fa-star favourite-icon"></i>':"")+"</div>"}),$("#channel-page-menu-wrapper").html(i),t.channel_selection=0,this.channel_doms=$("#channel-page-menu-wrapper .channel-menu-item"),moveScrollPosition($("#channel-page-menu-wrapper"),this.channel_doms[0],"vertical",!0),this.current_category_index=t.category_selection,this.prev_keyword="",$("#search-value").val(""),$("#catch-up-btn").removeClass("is-visible"))},goChannelNum:function(e){var t,s;this.full_screen_video&&(0!=(t=this.channel_num)||0==t&&0!=e)&&(this.channel_num=t=10*t+e,clearTimeout(this.channel_number_timer),s=this,$("#typed-channel-number").text(t),this.channel_number_timer=setTimeout(function(){for(var e=s.movies,t=!1,i=0;i<e.length;i++)if(e[i].num===s.channel_num){t=!0,current_movie=e[i],s.showMovie(current_movie),s.current_channel_id=current_movie.stream_id,s.hoverChannel(s.channel_doms[i],!0),s.keys.focused_part="full_screen",s.showFullScreenInfo();break}t||showToast("Sorry","Channel does not exist"),s.channel_num=0,$("#typed-channel-number").text("")},2e3))},addOrRemoveFav:function(){var e=this.keys;if("channel_selection"===e.focused_part){var t=this.movies[e.channel_selection],i="add";"add"===(i=LiveModel.favourite_ids.includes(t.stream_id)?"remove":i)?(LiveModel.addRecentOrFavouriteMovie(t,"favourite"),$(this.channel_doms[e.channel_selection]).append('<i class="fa fa-star favourite-icon"></i>')):(i=this.categories[this.current_category_index],LiveModel.removeRecentOrFavouriteMovie(t.stream_id,"favourite"),$(this.channel_doms[e.channel_selection]).find(".favourite-icon").remove(),"favourite"===i.category_id&&($(this.channel_doms[e.channel_selection]).remove(),t=$("#channel-page-menu-wrapper .channel-menu-item"),0==(this.channel_doms=t).length?this.hoverCategory(e.category_selection):(e.channel_selection>=t.length&&(e.channel_selection=t.length-1),this.hoverChannel(e.channel_selection,!0))));try{for(var s=this.categories,a=0;a<s.length;a++)if("favourite"===s[a].category_id){var o=LiveModel.getRecentOrFavouriteCategory("favourite").movies.length;$(this.category_doms[a]).find(".channel-category-movie-counts").text(o);break}}catch(e){}}},showNextProgrammes:function(){var e,t,i=this.movies[this.keys.channel_selection],i=($("#channel-title").text(i.name),0<this.programmes.length&&$("#catch-up-btn").addClass("is-visible"),LiveModel.getNextProgrammes(this.programmes)),s=i.current_program_exist,i=i.programmes,a="No Info",o="--:--",n="--:--",r="",c='<div class="no-programme-information">No Information</div>';s?(a=getAtob((s=i[0]).title),o=s.start.substring(11),1<i.length&&(e=i[1]),c='<span class="program-time">'+i[0].start.substring(11)+" ~ "+i[0].stop.substring(11)+"</span>"+a,$("#channel-current-programme-description").text(getAtob(i[0].description)),$("#channel-current-programme-infos").show(),s=(parseInt((new Date).getTime()/60/1e3)-(t=getMinute(s.start)))/(getMinute(s.stop)-t)*100,$("#channel-page-progress-container .progress-amount").css({width:s+"%"})):($("#channel-current-programme-infos").hide(),0<i.length&&(e=i[0])),e&&(n=getAtob(e.title),r=e.start.substring(11)),$("#channel-page-current-programme").html(c),$(".full-screen-program-name-wrapper.current .full-screen-program-name").text(a),$(".full-screen-program-time.current").text(o),$(".full-screen-program-name-wrapper.next .full-screen-program-name").text(n),$(".full-screen-program-time.next").text(r)},updateNextProgrammes:function(){this.showNextProgrammes(),clearInterval(this.next_programme_timer);var e=this;this.next_programme_timer=setInterval(function(){e.showNextProgrammes()},6e4)},getEpgProgrammes:function(){var t=this,i=[],e=(this.programmes=[],t.showNextProgrammes(),this.movies[this.keys.channel_selection]);"xtreme"===settings.playlist_type&&$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+e.stream_id,success:function(e){(i=e.epg_listings).map(function(e){e.stop=e.end}),t.programmes=i,t.updateNextProgrammes()}})},showFullScreenInfo:function(){var e;this.full_screen_video&&(clearTimeout(this.full_screen_timer),$("#full-screen-information").slideDown(),(e=this).full_screen_timer=setTimeout(function(){e.hideFullScreenInfo()},5e3))},hideFullScreenInfo:function(){$("#full-screen-information").slideUp()},zoomInOut:function(){var e=this.keys;if(this.full_screen_video){$("#channel-page .player-container").addClass("expanded");try{media_player.setDisplayArea()}catch(e){}this.showFullScreenInfo(),e.focused_part="full_screen"}else{$("#channel-page .player-container").removeClass("expanded");try{media_player.setDisplayArea()}catch(e){}this.keys.focused_part="channel_selection",$("#full-screen-information").slideUp()}},showMovie:function(e){var t,i=e.stream_id;$("#current-channel-name").text(e.name),"xtreme"===settings.playlist_type?t=getMovieUrl(i,"live","ts"):"type1"===settings.playlist_type&&(t=e.url);try{media_player.close()}catch(e){}media_player.init("channel-page-video","channel-page");try{media_player.playAsync(t)}catch(e){}if(this.current_channel_id=i,this.current_channel=e,$("#full-screen-channel-title").text(e.name),$(".full-screen-channel-logo").attr("src",e.stream_icon),!checkForAdult(e,"movie",LiveModel.categories)){LiveModel.addRecentOrFavouriteMovie(e,"recent");for(var s=this.categories,a=0;a<s.length;a++)if("recent"===s[a].category_id){var o=LiveModel.getRecentOrFavouriteCategory("recent").movies.length;$(this.category_doms[a]).find(".channel-category-movie-counts").text(o);break}}},showNextChannel:function(e){var t=this.keys,i=t.focused_part,s=(t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this);setTimeout(function(){var e=s.movies[t.channel_selection];s.current_channel_id=e.stream_id,s.showMovie(s.movies[t.channel_selection])},400),this.hoverChannel(t.channel_selection,!0),"full_screen"===i&&(t.focused_part="full_screen"),this.showFullScreenInfo()},playOrPause:function(){if(media_player.state==media_player.STATES.PLAYING)try{media_player.pause(),this.video_control_doms[1]}catch(e){}else try{media_player.play()}catch(e){}},showSearchModal:function(){var e=this.keys;this.full_screen_video||"search_selection"===e.focused_part||(e.prev_focus=e.focused_part,$(".search-modal-container").show(),$("#search-value").val(""),$(".search-content-container").html(""),e.focused_part="search_selection",e.search_selection=-1,$("#search-value").focus()),this.toggleRearrangeMode(!1)},searchValueChange:function(){clearTimeout(this.search_timer);var e=this;this.search_timer=setTimeout(function(){$("#search-value").val().toLowerCase()!==e.prev_keyword&&e.renderSearchResults()},400)},renderSearchResults:function(){var t=$("#search-value").val(),e=LiveModel.getCategories(!1,!1),i=[];if(2<=t.length)for(var s=2;s<e.length;s++)var a=e[s].movies.filter(function(e){return e.name.toLowerCase().includes(t)}),i=i.concat(a);i.sort(function(e,t){return e.name.localeCompare(t.name)});var o="";i.map(function(e,t){o+='<div class="search-item-wrapper"                    onmouseenter="channel_page.hoverSearchItem('+t+')"                     onclick="channel_page.searchItemClick()"                >'+e.name+"</div>"}),$(".search-content-container").html(o),this.search_items=$(".search-item-wrapper"),this.filtered_movies=i},handleSearchItem:function(e){var t=this.keys;0!=$(".search-item-wrapper").length&&(t.search_selection+=e,t.search_selection<0?($("#search-value").focus(),setTimeout(function(){var e=$("#search-value").val();$("#search-value")[0].setSelectionRange(e.length,e.length)},200)):($("#search-value").blur(),t.search_selection>=this.search_items.length&&(t.search_selection=this.search_items.length-1),$(".search-item-wrapper").removeClass("active"),$(this.search_items[t.search_selection]).addClass("active"),moveScrollPosition($(".search-content-container")[0],this.search_items[t.search_selection],"vertical",!1)))},removeSearchResult:function(){$(".search-modal-container").hide(),$(".search-content-container").html(""),this.keys.focused_part=this.keys.prev_focus,this.search_selection=-1},searchItemClick:function(){var e=this.keys;this.removeSearchResult();for(var t=this.filtered_movies[e.search_selection],i=LiveModel.getCategories(!1,!0),s=0,a=0;a<i.length;a++)if(i[a].category_id==t.category_id){s=a;break}showLoader(!0),this.is_loading=!0;var o=this.categories[s].movies,n=(s!==this.current_category_index&&(this.hoverCategory(s),this.showCategoryChannels()),this);setTimeout(function(){for(var e=0;e<o.length;e++)if(o[e].stream_id==t.stream_id&&o[e].name===t.name){n.hoverChannel(e,!0),n.showMovie(o[e]);break}showLoader(!1),n.is_loading=!1},200)},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_focus_dom).removeClass("rearrange");else if(e){e=this.keys;if("category_selection"===e.focused_part){this.rearrange_mode=!0;for(var t=0,i=this.categories[e.category_selection],s=0;s<LiveModel.categories.length;s++)if(LiveModel.categories[s].category_id==i.category_id){t=s;break}this.rearrange_origin_position=t,$(this.prev_focus_dom).addClass("rearrange")}}},changeChannelDomContent:function(e,t,i){$(e).find(".channel-number").text(t.num),$(e).find(".channel-icon").attr("src",t.stream_icon),$(e).data("index",i),$(e).find(".channel-name").text(t.name),$(e).data("channel_id",t.stream_id)},changeCategoryDomContent:function(e,t,i){$(e).find(".channel-category-name").text(t.category_name),$(e).data("index",i),$(e).find(".channel-category-movie-counts").text(t.movies.length)},showCatchUpModal:function(){var r,c,l,d,_,m,e=this.keys,e=this.movies[e.channel_selection],h=1==e.tv_archive,t=(this.archive_available=h,settings.time_format),u="Y-MM-DD HH:mm";"12"===t&&(u="Y-MM-DD hh:mm A");0<this.programmes.length?(showLoader(!0),this.is_loading=!0,r=0,$("#epg-channel-name").text(e.name),c="",$("#channel-page-content-container").hide(),t=this.programmes,l="adfd",d=moment().unix(),_=moment().format("Y-MM-DD"),m=!1,t.map(function(e,t){var i=getLocalChannelTime(e.start),s=getLocalChannelTime(e.stop),a=i.format(u),o=s.format(u);a.includes(l)||(c+='<div class="epg-date-label">'+a.substr(0,10)+"</div>",l=a.substr(0,10));var n="";m||(l<=_?(s=s.unix(),i=i.unix(),s<=d&&h&&(n='<img class="channel-epg-available-icon" src="'+HOST+'app_src_min/images/r_btn.png">'),d<=s&&(i<=d&&(r=t),m=!0)):m=!0),c+='<div class="epg-item-wrapper"                        onmouseenter="channel_page.hoverEpgItem('+t+',false)"                         onclick="channel_page.handleMenuClick()"                     >                        <div class="epg-time-wrapper">'+a.substr(11)+" : "+o.substr(11)+"   </div>"+n+'<div class="epg-item-name">'+getAtob(e.title)+"</div>                    </div>"}),$("#channel-epg-wrapper").html(c),this.epg_doms=$(".epg-item-wrapper"),$("#channel-epg-container").show(),this.hoverEpgItem(r,!0),showLoader(!1),this.is_loading=!1):showToast("Sorry","No Epg Exists")},showEpgVideo:function(){var e=this.keys,t=this.movies[e.channel_selection],e=this.programmes[e.epg_selection],i=moment().unix(),s=getLocalChannelTime(e.start),a=getLocalChannelTime(e.stop);if(s.unix()>=i||a.unix()>=i)showToast("Sorry","Can't play current programme.<br>Try the previous programme");else{s=LiveModel.getProgrammeVideoUrl(t.stream_id,e,!1).url;try{media_player.close()}catch(e){}$("#channel-page").addClass("hide"),vod_series_player.init(null,"epg","channel-page",s,!0)}},bulkMove:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":var i=t.category_selection;(i+=14*e)>=this.categories.length||i<0||this.hoverCategory(i);break;case"channel_selection":i=t.channel_selection;(i+=14*e)>=this.channel_doms.length||i<0||this.hoverChannel(i,!0);break;case"full_screen":this.showNextChannel(-1*e)}},hoverCategory:function(e){var t;show_keyboard||((t=this.keys).focused_part="category_selection",t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#channel-page-categories-wrapper"),this.category_doms[t.category_selection],"vertical",!1),$("#channel-page-categories-container").removeClass("collapsed"))},hoverChannel:function(e,t){var i,s;show_keyboard||((i=this.keys).focused_part="channel_selection",i.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[i.channel_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.channel_doms[i.channel_selection]).addClass("rearrange")),this.prev_focus_dom=this.channel_doms[i.channel_selection],s=this,moveScrollPosition($("#channel-page-menu-wrapper"),this.channel_doms[i.channel_selection],"vertical",!1),clearTimeout(this.channel_hover_timer),this.channel_hover_timer=setTimeout(function(){s.getEpgProgrammes()},this.channel_hover_timeout),t&&$("#channel-page-categories-container").addClass("collapsed"),$("#catch-up-btn").removeClass("is-visible"))},hoverCatchUpBtn:function(){show_keyboard||($(this.prev_focus_dom).removeClass("active"),this.prev_focus_dom=$("#catch-up-btn"),$("#catch-up-btn").addClass("active"),this.keys.focused_part="catch_up_btn")},hoverEpgItem:function(e,t){var i;show_keyboard||((i=this.keys).focused_part="epg_selection",i.epg_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.epg_doms[e]).addClass("active"),this.prev_focus_dom=this.epg_doms[e],moveScrollPosition($("#channel-epg-wrapper"),this.epg_doms[e],"vertical",t))},hoverSearchItem:function(e){this.keys.search_selection=e,$(this.search_items).removeClass("active"),$(this.search_items[e]).addClass("active"),moveScrollPosition($(".search-content-container")[0],this.search_items[e],"vertical",!1)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":checkForAdult(this.categories[e.category_selection],"category",[])?parent_confirm_page.init(current_route):(this.showCategoryChannels(),this.toggleRearrangeMode(!1));break;case"video_control":$(this.video_control_doms[e.video_control]).trigger("click");break;case"full_screen":this.full_screen_video=!1,this.zoomInOut();break;case"channel_selection":var t=this.movies[e.channel_selection].stream_id;this.current_channel_id==t?(this.full_screen_video=!0,this.zoomInOut()):this.showMovie(this.movies[e.channel_selection]),this.toggleRearrangeMode(!1);break;case"search_selection":t=$(".search-item-wrapper")[e.search_selection];$(t).trigger("click");break;case"catch_up_btn":this.showCatchUpModal();break;case"epg_selection":this.showEpgVideo()}},handleMenusUpDown:function(e){var s=this.keys,t=this.channel_doms;switch(s.focused_part){case"category_selection":var i=s.category_selection;if(s.category_selection+=e,s.category_selection<0)s.category_selection=0;else if(s.category_selection>=this.category_doms.length)s.category_selection=this.category_doms.length-1;else{if(this.rearrange_mode){if(i==s.category_selection)return;for(var a=this.categories[i],o=this.categories[s.category_selection],n=(this.changeCategoryDomContent(this.category_doms[i],o,i),this.changeCategoryDomContent(this.category_doms[s.category_selection],a,s.category_selection),this.category_doms=$(".channel-page-category-item"),clearTimeout(this.rearrange_timer),this.rearrange_timer=null,0),r=0;r<LiveModel.categories.length;r++)if(o.category_id==LiveModel.categories[r].category_id){n=r;break}LiveModel.categories=makeRearrangeArray(LiveModel.categories,this.rearrange_origin_position,n),this.categories=LiveModel.getCategories(!1,!0),this.rearrange_origin_position=n,this.rearrange_timer=setTimeout(function(){for(var e=LiveModel.category_orders,t=0;t<e.length;t++)if(e[t].id==a.category_id){e.splice(t,1);break}e.push({id:a.category_id,position:n}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(e)),LiveModel.category_orders=e,LiveModel.updateRecentAndFavouritePosition()},this.rearrange_timeout),this.sort_changed=!0}this.hoverCategory(s.category_selection)}break;case"channel_selection":var c,l,i=s.channel_selection;if(s.channel_selection+=e,s.channel_selection>=t.length)s.channel_selection=t.length-1;else if(s.channel_selection<0)s.channel_selection=0;else{if(this.rearrange_mode){if(s.channel_selection===i)return;l=makeRearrangeArray(this.movies,i,s.channel_selection),this.movies=l;var d=this.categories[s.category_selection];d.movies=l,l=this.movies[i],c=this.movies[s.channel_selection],this.changeChannelDomContent(this.channel_doms[i],l,i),this.changeChannelDomContent(this.channel_doms[s.channel_selection],c,s.channel_selection),this.channel_doms=$("#channel-page-menu-wrapper .channel-menu-item"),clearTimeout(this.rearrange_timer),this.rearrange_timer=setTimeout(function(){var e=localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders"),t=[];(e=e?JSON.parse(e):{})[d.category_id]&&(t=e[d.category_id]);for(var i=0;i<t.length;i++)if(t[i].id==c.stream_id&&t[i].name==c.name){t.splice(i,1);break}t.push({id:c.stream_id,name:c.name,position:s.channel_selection}),e[d.category_id]=t,localStorage.setItem(storage_id+settings.playlist.id+"_channel_orders",JSON.stringify(e))},this.rearrange_timeout)}this.hoverChannel(s.channel_selection,!0)}break;case"full_screen":this.showNextChannel(-1*e);break;case"search_selection":this.handleSearchItem(e);break;case"epg_selection":s.epg_selection+=e,s.epg_selection<0&&(s.epg_selection=0),s.epg_selection>=this.epg_doms.length&&(s.epg_selection=this.epg_doms.length-1),this.hoverEpgItem(s.epg_selection,!0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&0<this.movies.length&&(t.focused_part="channel_selection",$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverChannel(t.channel_selection,!0));break;case"channel_selection":e<0?($(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverCategory(t.category_selection)):0<e&&0<this.programmes.length&&this.hoverCatchUpBtn();break;case"catch_up_btn":e<0&&(0<this.movies.length?this.hoverChannel(t.channel_selection,!0):this.hoverCategory(t.category_selection))}},HandleKey:function(e){if(!this.is_loading){this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:this.bulkMove(-1);break;case tvKey.CH_DOWN:this.bulkMove(1);break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:case tvKey.PLAY:case tvKey.PLAYPAUSE:this.playOrPause();break;case tvKey.BLUE:this.showSearchModal();break;case tvKey.RED:return void this.toggleRearrangeMode(!0)}}}};function initPlayer(){media_player="samsung"===platform?{videoObj:null,parent_id:"",STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},current_time:0,reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",init:function(e,t){this.videoObj=null,this.parent_id=t,this.state=this.STATES.STOPPED,this.parent_id=t,this.current_time=0,this.reconnect_count=0,this.url="",this.videoObj=document.getElementById(e),$("#"+t).find(".video-error").hide(),$(".video-resolution").text(""),$("#"+this.parent_id).find(".subtitle-container").html("").hide()},playAsync:function(e){if(this.url=e,$("#"+this.parent_id).find(".video-error").hide(),$(".video-loader").show(),!(this.state>this.STATES.STOPPED)){if(!this.videoObj)return 0;try{console.log(e),webapis.avplay.open(e),this.setupEventListeners(),this.setDisplayArea(),webapis.avplay.setBufferingParam("PLAYER_BUFFER_FOR_PLAY","PLAYER_BUFFER_SIZE_IN_SECOND",3);var o=this;webapis.avplay.prepareAsync(function(){$(".video-loader").hide(),o.reconnect_count=0,o.state=o.STATES.PLAYING,webapis.avplay.play(),$("#"+o.parent_id).find(".video-total-time").text(o.formatTime(webapis.avplay.getDuration()/1e3)),$("#"+o.parent_id).find(".video-error").hide();var e={min:0,max:webapis.avplay.getDuration()/1e3};$("#"+o.parent_id).find(".video-progress-bar-slider").attr(e),$("#"+o.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+o.parent_id).find(".video-current-time").text("00:00"),$("#"+o.parent_id).find(".video-reconnect-message").hide(),"vod-series-player-video"===current_route&&vod_series_player_page.showResumeBar();try{for(var t=webapis.avplay.getCurrentStreamInfo(),i=0;i<t.length;i++)if("VIDEO"===t[i].type){var s,a=JSON.parse(t[i].extra_info);a.Width&&a.Height&&(s=a.Width+" x "+a.Height,$(".video-resolution").text(s));break}}catch(e){console.log(e)}},function(){$(".video-loader").hide(),$("#"+o.parent_id).find(".video-error").show(),o.reconnect_count<o.reconnect_max_count&&o.tryReconnect()})}catch(e){$(".video-loader").hide(),$("#"+this.parent_id).find(".video-error").show(),this.reconnect_count<this.reconnect_max_count&&this.tryReconnect()}}},play:function(){this.state=this.STATES.PLAYING;try{webapis.avplay.play()}catch(e){}},pause:function(){this.state=this.STATES.PAUSED;try{webapis.avplay.pause()}catch(e){}},stop:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.stop()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},close:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.close()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_count+=1,this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{console.log("reconnect count=",this.reconnect_count),$("#"+this.parent_id).find(".video-reconnect-message").show(),this.state=this.STATES.STOPPED;var e=this;try{webapis.avplay.close()}catch(e){}this.reconnect_timer=setTimeout(function(){e.playAsync(e.url)},6e3)}},setDisplayArea:function(e,t){if(webapis&&webapis.avplay){var i=null,i="channel"==t?"#channel-page-video-lg":"#vod-series-player-video-lg";if(e)try{var s=$(this.videoObj).parent().width(),a=$(this.videoObj).parent().height();switch(e){case"1:1":$(i).css("object-fit","fill"),r=c=a;break;case"16:9":$(i).css("object-fit","fill"),c=a,r=Math.round(c*(16/9));break;case"4:3":$(i).css("object-fit","fill"),c=a,r=Math.round(c*(4/3));break;case"21:9":$(i).css("object-fit","fill"),r=window.innerWidth,c=Math.round(r*(9/21));break;case"stretch":$(i).css("object-fit","fill"),r=s,c=a;break;default:$(i).css("object-fit","contain"),r=s,c=a}var o=Math.round((s-r)/2),n=Math.round((a-c)/2);(s=$(this.videoObj).parent().width())<r&&(o-=(r-s)/2),webapis.avplay.setDisplayRect(Math.round(o),Math.round(n),Math.round(r),Math.round(c)),console.log("Samsung Display Rectangle:",{left:Math.round(o),top:Math.round(n),width:Math.round(r),height:Math.round(c)})}catch(e){console.log("Error in setDisplayRect",e)}else{var n=$(this.videoObj).offset().top,o=$(this.videoObj).offset().left,r=parseInt($(this.videoObj).width()),c=parseInt($(this.videoObj).height());webapis.avplay.setDisplayRect(o,n,r,c)}}else console.log("Samsung webapis.avplay is not available")},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},setupEventListeners:function(){var a=this;webapis.avplay.setListener({onbufferingstart:function(){$("#"+a.parent_id).find(".video-loader").show()},onbufferingprogress:function(e){},onbufferingcomplete:function(){$("#"+a.parent_id).find(".video-loader").hide()},onstreamcompleted:function(){$("#"+a.parent_id).find(".video-error").hide(),webapis.avplay.stop(),a.state=a.STATES.STOPPED,$("#"+a.parent_id).find(".progress-amount").css({width:"100%"}),"vod-series-player-video"===current_route&&vod_series_player_page.showNextVideo(1,!0)},oncurrentplaytime:function(e){a.current_time=e,$("#"+a.parent_id).find(".video-error").hide(),"vod-series-player-video"===current_route&&(vod_series_player_page.current_time=e/1e3),0<webapis.avplay.getDuration()&&($("#"+a.parent_id).find(".video-current-time").html(a.formatTime(e/1e3)),$("#"+a.parent_id).find(".video-progress-bar-slider").val(e/1e3).change())},ondrmevent:function(e,t){},onerror:function(e,t){$("#"+a.parent_id).find(".video-error").show()},onsubtitlechange:function(e,t,i,s){$("#"+a.parent_id).find(".subtitle-container").html(""),$("#"+a.parent_id).find(".subtitle-container").html(t)}})},onDeviceReady:function(){document.addEventListener("pause",this.onPause),document.addEventListener("resume",this.onResume)},onPause:function(){this.pause()},onResume:function(){this.play()},getSubtitleOrAudioTrack:function(t){var e=[];if("develop"==env)return e=[{extra_info:{fourCC:"un",subtitle_type:"0",track_lang:"un",index:3,type:"TEXT"}}];var i="",s="TEXT"===t?"track_lang":"language",a="TEXT"===t?"Subtitle ":"Track ";try{for(var o,n,r=webapis.avplay.getTotalTrackInfo(),c=0;c<r.length;c++)try{r[c].type==t&&(o=JSON.parse(r[c].extra_info),"TEXT"===t||"AUDIO"===t?(n=o[s].trim(),i.includes(n)||""===n?""===n&&(o[s]=a+(c+1),r[c].extra_info=o,e.push(r[c])):(i+=", "+n,o[s]=void 0!==language_codes[n]?language_codes[n]:n,r[c].extra_info=o,e.push(r[c]))):(r[c].extra_info=o,e.push(r[c])))}catch(e){console.log(t,e)}}catch(e){}return e},setSubtitleOrAudioTrack:function(e,t){try{webapis.avplay.setSelectTrack(e,t)}catch(e){}"TEXT"===e&&(-1==t?$("#"+this.parent_id+" .subtitle-container").hide():$("#"+this.parent_id+" .subtitle-container").show())}}:{id:"",videoObj:null,parent_id:"",current_time:0,STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},subtitles:[],tracks:[],reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",srt_map:{},movie_list_id:null,init:function(e,t){this.reconnect_count=0,this.url="",this.srt_map={},this.movie_list_id=null,e.includes("-lg")||(e+="-lg"),"lg"!=platform&&($("video").addClass("hide"),$("#"+e).removeClass("hide"),$("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden")),this.id=e,this.videoObj=null,this.parent_id=t,this.current_time=0,$("#"+t).find(".video-error").hide(),this.state=this.STATES.STOPPED,this.videoObj=document.getElementById(e),this.subtitles=[],this.tracks=[],$("#"+this.parent_id).find(".subtitle-container").html("").hide(),SrtOperation.deStruct();var s=this.videoObj,a=this,e=document.getElementById("channel-page-video"),i=document.getElementById("vod-series-player-video");e&&(e.onload=function(){$(this).css("visibility","visible")}),i&&(i.onload=function(){$(this).css("visibility","visible")}),this.videoObj.addEventListener("error",function(e){console.log("Error"),a.tryReconnect(),$("#"+a.parent_id).find(".video-error").show()}),this.videoObj.addEventListener("canplay",function(e){$("#"+a.parent_id).find(".video-error").hide(),"lg"!=platform&&($("#channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible"))}),this.videoObj.addEventListener("durationchange",function(e){}),this.videoObj.addEventListener("loadeddata",function(e){var t=parseInt(s.duration),i={min:0,max:t};$("#"+a.parent_id).find(".video-progress-bar-slider").attr(i),$("#"+a.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+a.parent_id).find(".video-total-time").text(a.formatTime(t)),"vod-series-player-video"===current_route&&vod_series_player_page.showResumeBar(),$("#"+a.parent_id).find(".video-reconnect-message").hide(),a.reconnect_count=0,clearTimeout(a.reconnect_timer)}),$("#"+t).find(".video-reconnect-message").hide(),this.videoObj.ontimeupdate=function(e){var t=a.videoObj.duration,i=a.videoObj.currentTime;0<t&&($("#"+a.parent_id).find(".video-progress-bar-slider").val(i).change(),$("#"+a.parent_id).find(".video-current-time").html(a.formatTime(i))),"vod-series-player-video"==current_route&&(vod_series_player_page.current_time=i,SrtOperation.timeChange(s.currentTime))},this.videoObj.addEventListener("loadedmetadata",function(){var e="No Information";try{var t=a.videoObj.videoWidth,i=a.videoObj.videoHeight;t&&i&&(e=t+" x "+i+"px")}catch(e){console.log(e)}console.log(e),$(".video-resolution").text(e)}),this.videoObj.addEventListener("waiting",function(e){}),this.videoObj.addEventListener("suspend",function(e){}),this.videoObj.addEventListener("stalled",function(e){console.log("Failed to fetch data, but trying.")}),this.videoObj.addEventListener("ended",function(e){"vod-series-player-video"===current_route&&vod_series_player_page.showNextVideo(1,!0)}),this.videoObj.addEventListener("emptied",function(e){})},playAsync:function(e){"lg"!=platform&&($("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden"));try{this.videoObj.pause()}catch(e){}console.log(e),this.url=e;var t=this;for($("#"+this.parent_id).find(".video-error").hide();this.videoObj.firstChild;)this.videoObj.removeChild(this.videoObj.firstChild);this.videoObj.load();var i=document.createElement("source");i.setAttribute("src",e),this.videoObj.appendChild(i),this.videoObj.addEventListener("playing",function e(){"lg"!=platform&&($("channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible")),this.removeEventListener("playing",e)}),this.videoObj.play(),$("#"+this.parent_id).find(".progress-amount").css({width:0}),i.addEventListener("error",function(e){$(".video-loader").hide(),$("#"+t.parent_id).find(".video-error").show(),t.tryReconnect()}),i.addEventListener("emptied",function(e){console.log("Empty"),$("#"+t.parent_id).find(".video-error").show()}),this.state=this.STATES.PLAYING},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_timer=null,this.reconnect_count+=1,console.log("here reconnecting",this.reconnect_count),this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{$("#"+this.parent_id).find(".video-reconnect-message").show();var e=this;try{this.videoObj.close()}catch(e){}this.reconnect_timer=setTimeout(function(){try{e.playAsync(e.url)}catch(e){console.log(e)}},6e3)}},play:function(){this.state=this.STATES.PLAYING,this.videoObj.play(),0<SrtOperation.srt.length&&(SrtOperation.stopped=!1)},setDisplayArea:function(e,t){if(e){$("video_element").css("object-fit","fill");var i,s=parseInt($(this.videoObj).height());switch(e){case"1:1":$("video_element").css("object-fit","fill"),i=s+"px";break;case"16:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(16/9))+"px";break;case"4:3":$("video_element").css("object-fit","fill"),i=Math.round(s*(4/3))+"px";break;case"21:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(21/9))+"px";break;case"stretch":$("video_element").css("object-fit","fill"),s=i="100%";break;default:$("video_element").css("object-fit","contain"),s=i="100%"}this.videoObj.style.width=i,this.videoObj.style.height=s,console.log("NEW height",s),console.log("NEW WIDTH",i)}},pause:function(){this.state=this.STATES.PAUSED;try{this.videoObj.pause()}catch(e){}},close:function(){try{this.videoObj.pause()}catch(e){}this.state=this.STATES.STOPPED,SrtOperation.deStruct(),this.subtitles=[],this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},seekTo:function(e){},getSubtitleOrAudioTrack:function(e){var i=[],s="TEXT"==e?0<media_player.videoObj.textTracks.length?media_player.videoObj.textTracks:{}:0<media_player.videoObj.audioTracks.length?media_player.videoObj.audioTracks:{};return console.log(s),0<Object.keys(s).length&&Object.keys(s).map(function(e,t){"object"==typeof s[e]&&null!=s[e]&&i.push(s[e])}),console.log(i),i},setSubtitleOrAudioTrack:function(e,t){if("TEXT"==e)-1==t?(SrtOperation.deStruct(),this.subtitles=[],$("#"+this.parent_id+" .subtitle-container").hide()):(this.subtitles[t]&&(e=this.subtitles[t].file_id.toString(),this.srt_map[e])&&SrtOperation.init(this.srt_map[e],media_player.videoObj.currentTime),$("#"+this.parent_id+" .subtitle-container").show());else{for(var i=0;i<this.videoObj.audioTracks.length;i++)this.videoObj.audioTracks[i].enabled=!1;this.videoObj.audioTracks[t].enabled=!0}}}}function convertProgrammeTimeToClientTime(e){e=moment(e,"YYYYMMDDHHmmss Z");return e.utc().add(client_offset,"minute"),e.format("Y-MM-DD HH:mm")}function getTodayDate(e){var t=new Date;return moment(t).format(e)}function calculateTimeDifference(e,t){e=new Date(e);time_difference_with_server=parseInt((1e3*t-e.getTime())/6e4)}function getLocalChannelTime(e){return moment(e).add(time_difference_with_server,"minute")}var vod_summary_page={keys:{index:0},min_btn_index:0,action_btns:$(".vod-action-btn"),is_favourite:!1,is_loading:!1,prev_route:"",init:function(e){this.prev_route=e;var t=this,e=($("#vod-summary-image-wrapper img").attr("src",""),$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#vod-summary-image-wrapper img").attr("src",current_movie.stream_icon||HOST+"app_src_min/images/logo1.png"),this.is_favourite=!VodModel.favourite_ids.includes(current_movie.stream_id),this.toggleFavourite(),$("#vod-summary-name").text(current_movie.name),$("#vod-watch-trailer-button").hide(),$("#vod-summary-release-date").text(""),$("#vod-summary-release-genre").text(""),$("#vod-summary-release-length").text(""),$("#vod-summary-release-age").text(""),$("#vod-summary-release-director").text(""),$("#vod-summary-release-cast").text(""),$("#vod-summary-description").text(""),current_movie.youtube_trailer="",this.hoverButton(1),0),e=void 0===current_movie.rating||""===current_movie.rating?0:parseFloat(current_movie.rating);isNaN(e)&&(e=0),$("#vod-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#vod-rating-mark").text(e.toFixed(1)),VodModel.favourite_ids.includes(current_movie.stream_id)?($(this.action_btns[2]).data("action","remove"),$(this.action_btns[2]).text(void 0!==current_words.remove_favorites?current_words.remove_favorites:"Remove Fav")):($(this.action_btns[2]).data("action","add"),$(this.action_btns[2]).text(void 0!==current_words.add_to_favorite?current_words.add_to_favorite:"Add Fav")),$("#vod-series-page").addClass("hide"),$("#vod-summary-page").removeClass("hide"),current_route="vod-summary-page",this.min_btn_index=1,current_movie.info?this.showVodSummaryContent():"xtreme"===settings.playlist_type&&(showLoader(!0),this.is_loading=!0,$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+current_movie.stream_id).done(function(e){e=e.info;(current_movie.info=e).tmdb_id&&(current_movie.tmdb_id=e.tmdb_id),current_movie.summary_downloaded=!0,t.showVodSummaryContent()}).fail(function(){showLoader(!(current_movie.info={})),t.is_loading=!1}))},showVodSummaryContent:function(){var e,t=current_movie.info;$("#vod-summary-release-date").text(t.releasedate),$("#vod-summary-release-genre").text(t.genre),$("#vod-summary-release-length").text(t.duration),$("#vod-summary-release-age").text(t.age),$("#vod-summary-release-director").text(t.director),$("#vod-summary-release-cast").text(t.cast),$("#vod-summary-description").text(t.description);try{e=t.backdrop_path[0],$(".vod-series-background-img").attr("src",e).removeClass("hide")}catch(e){}current_movie.youtube_trailer=t.youtube_trailer,void 0!==t.youtube_trailer&&null!=t.youtube_trailer&&""!==t.youtube_trailer.trim()&&(this.min_btn_index=0,$("#vod-watch-trailer-button").show()),showLoader(!1),this.is_loading=!1},goBack:function(){var e,t;$("#vod-summary-page").addClass("hide"),current_route=this.prev_route,"vod-series-page"===this.prev_route?($("#vod-series-page").removeClass("hide"),t=vod_series_page.keys,e=vod_series_page.menu_doms,this.is_favourite?0==$(e[t.menu_selection]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$($(e[t.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),vod_series_page.categories[t.category_selection],e=vod_series_page.menu_doms,$($(e[t.menu_selection]).find(".favourite-badge")).remove())):($("#search-page").show(),e=search_page.movie_doms,t=(t=search_page.keys).movie_selection,this.is_favourite?0==$(e[t]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$(e[t]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),$(e[t]).find(".favourite-badge").remove()))},showTrailerVideo:function(){""===current_movie.youtube_trailer||null==current_movie.youtube_trailer?($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")):trailer_page.init(current_movie.youtube_trailer,current_route)},showMovie:function(){$("#vod-summary-page").addClass("hide"),vod_series_player.init(current_movie,"movie","vod-summary-page","",!0)},toggleFavourite:function(){var e=this.action_btns[2];this.is_favourite=!this.is_favourite,this.is_favourite?$(e).text(void 0!==current_words.remove_favorites?current_words.remove_favorites:"Remove Fav"):$(e).text(void 0!==current_words.add_to_favorite?current_words.add_to_favorite:"Add Fav")},hoverButton:function(e){var t=this.keys;t.index=e,$(".vod-action-btn").removeClass("active"),$($(".vod-action-btn")[t.index]).addClass("active")},keyMove:function(e){var t=this.min_btn_index,i=this.keys;i.index+=e,i.index<t&&(i.index=2),2<i.index&&(i.index=t),this.hoverButton(i.index)},keyClick:function(){var e=this.keys,e=$(".vod-action-btn")[e.index];$(e).trigger("click")},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.keyMove(-1);break;case tvKey.RIGHT:this.keyMove(1);break;case tvKey.ENTER:this.keyClick();break;case tvKey.YELLOW:this.toggleFavourite()}}},vod_series_player={player:null,back_url:"vod-summary-page",show_control:!1,timeOut:null,has_episodes:!1,keys:{focused_part:"control_bar",control_bar:0,info_bar:0,operation_modal:0,subtitle_audio_selection_modal:0,audio_selection_modal:0,prev_focus:"",resume_bar:0,episode_selection:0},current_subtitle_index:-1,current_audio_track_index:-1,subtitle_audio_menus:[],forwardTimer:null,current_time:0,show_subtitle:!1,show_audio_track:!1,video_control_doms:$("#vod-series-video-controls-container .video-control-icon i"),video_info_doms:$("#vod-series-video-controls-container .video-info-btn"),vod_info_timer:null,current_movie:{},resume_time:0,resume_timer:null,episode_doms:[],resume_bar_doms:$("#video-resume-modal .resume-action-btn"),seek_timer:null,seek_interval_timer:null,current_movie_type:"",video_duration:0,last_key_time:0,slider_element:$("#vod-series-video-progressbar-container .video-progress-bar-slider")[0],subtitle_loading:!1,subtitle_loaded:!1,showNextVideo_debounce:!1,init:function(e,t,i,s,a){this.current_movie=e,this.current_time=0,this.video_duration=0,this.subtitle_loaded=!1,this.current_movie_type=t,$("#vod-series-player-page").removeClass("hide"),this.showControlBar(a);var o,n,r,a=$(this.video_control_doms[2]),c=($(a).removeClass("fa-play"),$(a).addClass("fa-pause"),$("#vod-series-player-page").find(".video-current-time").text("--:--"),$("#vod-series-player-page").find(".video-total-time").text("--:--"),this.makeEpisodeDoms(),this),a=this.slider_element;$(a).attr({min:0,max:100}),$(a).rangeslider({polyfill:!1,rangeClass:"rangeslider",onSlideEnd:function(e,t){c.sliderPositionChanged(t)}}),$(a).val(0).change(),$(a).rangeslider("update"),clearTimeout(this.resume_timer),"movie"===t?("xtreme"===settings.playlist_type?o=getMovieUrl(e.stream_id,"movie",e.container_extension):"type1"===settings.playlist_type&&(o=e.url),$("#vod-series-video-title").html(e.name)):"series"===t?("xtreme"===settings.playlist_type?o=getMovieUrl(e.id,"series",e.container_extension):"type1"===settings.playlist_type&&(o=e.url),$("#vod-series-video-title").html(e.title)):"epg"===t?(a="channel-page"===i?(o=s,getAtob((n=channel_page.programmes[channel_page.keys.epg_selection]).title)+"  <span class='player-epg-title-time'>"+n.start.substr(11)+"~"+n.stop.substr(11)+"</span>"):(n=this.current_movie,o=LiveModel.getProgrammeVideoUrl(epg_page.movie.stream_id,n,!0).url,getAtob(n.title)+"  <span class='player-epg-title-time'>"+n.start.substr(11)+"~"+n.stop.substr(11)+"</span>"),$("#vod-series-video-title").html(a)):"storage"==t&&(o=e.toURI(),$("#vod-series-video-title").html(e.name)),this.back_url=i;try{media_player.close()}catch(e){}try{media_player.init("vod-series-player-video","vod-series-player-page")}catch(e){}try{media_player.setDisplayArea()}catch(e){}try{media_player.playAsync(o)}catch(e){}if(r="movie"===t?"stream_id":"id",this.resume_time=0,"movie"===t||"series"===t)if(r=e[r].toString(),"movie"===t){for(var l=VodModel.saved_video_times,d=this.resume_time=0;d<l.length;d++)if(l[d].stream_id==r){this.resume_time=l[d].time;break}}else if("series"===t)for(l=SeriesModel.saved_video_times,d=0;d<l.length;d++)if(l[d].stream_id==current_series.series_id){var _=l[d].video_times,m=series_summary_page.keys.episode_selection.toString(),h=series_summary_page.current_season_index.toString();if(_[h]&&_[h][m]){this.resume_time=_[h][m].time;break}}current_route="vod-series-player-video",this.current_subtitle_index=-1,this.current_audio_track_index=-1,this.show_subtitle=!1},sliderPositionChanged:function(e){this.hoverSlider(),media_player.videoObj.currentTime=e,this.current_time=e,$(this.slider_element).val(e).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(e))},makeEpisodeDoms:function(){var e,i;this.keys.episode_selection=0,"series"===this.current_movie_type?(e=current_season.episodes,this.episodes=e,this.has_episodes=!0,i="",e.map(function(e,t){i+='<div class="player-season-item"                        onclick="vod_series_player.showSelectedEpisode()"                        onmouseenter="vod_series_player.hoverEpisode('+t+')"                    >                        <div class="player-episode-title-container">                            <div class="player-episode-number">'+(t+1)+'</div>                             <div class="player-episode-title max-line-2">'+e.title+"</div>                        </div>                    </div>"}),$("#player-seasons-container").html(i),this.episode_doms=$(".player-season-item"),$("#player-seasons-container").removeClass("expanded"),$("#player-seasons-container").show()):(this.has_episodes=!1,$("#player-seasons-container").html(""),this.episode_doms=$(".player-season-item"),this.episode_doms=[],$("#player-seasons-container").hide())},showResumeBar:function(){var e=this.keys;0<this.resume_time&&("resume_bar"!==e.focused_part&&(e.prev_focus=e.focused_part),e="lg"===platform?1:1e3,e=media_player.formatTime(this.resume_time/e),$("#vod-resume-time").text(e),$("#video-resume-modal").show(),this.hideControlBar(),clearTimeout(this.resume_timer),this.resume_timer=null,this.hoverResumeBtn(0))},Exit:function(){this.saveVideoTime(),current_route=this.back_url;try{media_player.close()}catch(e){console.log(e)}$("#"+media_player.parent_id).find(".video-error").hide(),$("#"+media_player.parent_id).find(".subtitle-container").text(""),$("#vod-series-player-page").addClass("hide")},saveVideoTime:function(){try{var e,t,i,s;if("samsung"===platform){s=i=1e4;try{e=webapis.avplay.getCurrentTime(),t=webapis.avplay.getDuration()}catch(e){}}else"lg"===platform&&(s=10,e=media_player.videoObj.currentTime,t=media_player.videoObj.duration,i=10);"develop"===env&&(t=(e=25e3)+5e4*Math.random());var a,o,n,r=this.current_movie;if(i<=t-e&&s<=e){if("movie"===this.current_movie_type){if(checkForAdult(r,"movie",a=VodModel.getCategories(!0,!1)))return;VodModel.saveVideoTime(r.stream_id,e,t),VodModel.addToWatchList(r),"vod-summary-page"===this.back_url&&(vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").addClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-progress").css({width:e/t*100+"%"})),vod_series_page.current_hover_id==this.current_movie.stream_id)&&$("#vod-series-page-summary-watch-status").addClass("has-progress")}"series"===this.current_movie_type&&(a=SeriesModel.getCategories(!0,!1),checkForAdult(current_series,"movie",a)||(o=SeriesModel.saveVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection,e,t),SeriesModel.addToWatchList(current_series),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-duration").addClass("has-progress"),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-progress").css({width:e/t*100+"%"}),$("#vod-series-page-summary-watch-status").addClass("has-progress"),series_summary_page.series_video_times=o))}else t-e<i&&("movie"===this.current_movie_type&&(VodModel.removeVideoTime(r.stream_id),"vod-summary-page"===this.back_url)&&(vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").removeClass("has-progress"),vod_series_page.current_hover_id==this.current_movie.stream_id)&&$("#vod-series-page-summary-watch-status").removeClass("has-progress"),"series"===this.current_movie_type)&&((n=SeriesModel.removeVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection))[0]&&"vod-series-page"===series_summary_page.prev_route&&$("#vod-series-page-summary-watch-status").removeClass("has-progress"),series_summary_page.series_video_times=n[1])}catch(e){console.log("here error",e)}},goBack:function(){$(".modal").modal("hide");var e=this.keys;if(console.log("here go back",e.focused_part),this.show_control)this.hideControlBar();else if("control_bar"===e.focused_part||"info_bar"===e.focused_part||"episode_selection"===e.focused_part||"slider"===e.focused_part)switch(this.Exit(),this.back_url){case"vod-summary-page":current_route="vod-series-page",$("#vod-series-page").removeClass("hide");var t=vod_series_page.keys.menu_selection;t>=vod_series_page.menu_doms.length?(vod_series_page.menu_doms.length,vod_series_page.hoverMovieItem(vod_series_page.menu_doms[t]),vod_series_page.renderCategoryContent()):vod_series_page.hoverMovieItem(vod_series_page.menu_doms[t]);break;case"episode-page":current_route="series-summary-page",$("#series-summary-page").removeClass("hide"),series_summary_page.hoverEpisode(series_summary_page.keys.episode_selection,!1);break;case"channel-page":channel_page.reEnter(),channel_page.hoverEpgItem(channel_page.keys.channel_selection,!0);break;case"catch-up-detail":$("#catchup-detail-page").removeClass("hide"),epg_page.hoverProgramme(epg_page.keys.programme_selection);break;case"search-page":$("#search-page").show(),search_page.keys.movie_selection>=search_page.movie_doms.length&&(search_page.keys.movie_selection=search_page.movie_doms.length-1),search_page.hoverMovie(search_page.keys.movie_selection);break;case"storage-page":$("#storage-page").show(),storage_page.hoverMenuItem(storage_page.keys.menu_selection)}"subtitle_audio_selection_modal"===e.focused_part&&(e.focused_part="control_bar",$("#subtitle-selection-modal").modal("hide")),"vod_info"===e.focused_part&&($("#vod-video-info-container").hide(),clearTimeout(this.vod_info_timer),e.focused_part=e.prev_focus),"resume_bar"===e.focused_part&&(console.log("here resume bar"),$("#video-resume-modal").hide(),e.focused_part=e.prev_focus,clearTimeout(this.resume_timer),this.resume_timer=null)},playPauseVideo:function(){this.showControlBar(!1);var e=this.video_control_doms,e=$(e[2]);if(media_player.state===media_player.STATES.PLAYING)try{media_player.pause(),$(e).removeClass("fa-pause"),$(e).addClass("fa-play")}catch(e){}else if(media_player.state===media_player.STATES.PAUSED)try{media_player.play(),$(e).removeClass("fa-play"),$(e).addClass("fa-pause")}catch(e){}},seekTo:function(e){if("samsung"===platform){var t=(new Date).getTime()/1e3;if(!(t-this.last_key_time<.1)){if(this.last_key_time=t,0===this.current_time&&(this.current_time=media_player.current_time/1e3),0!=this.video_duration)i=this.video_duration;else try{i=webapis.avplay.getDuration()/1e3,this.video_duration=i}catch(e){this.video_duration=i=0}if(i)if((s=this.current_time+e)<0)this.showNextVideo(-1);else if(i<=s)this.showNextVideo(1);else{if(this.current_time=s,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)),$(this.slider_element).val(s).change(),clearTimeout(this.seek_timer),media_player.state===media_player.STATES.PLAYING)try{media_player.pause()}catch(e){}$("#"+media_player.parent_id).find(".video-loader").show(),this.seek_timer=setTimeout(function(){webapis.avplay.seekTo(1e3*s),setTimeout(function(){try{media_player.play()}catch(e){}},200)},500)}}}else{var i,s;0===this.current_time&&(this.current_time=media_player.videoObj.currentTime),(i=media_player.videoObj.duration)<=(s=(s=this.current_time+e)<0?0:s)&&(s=i),this.current_time=s,media_player.videoObj.currentTime=s,0<i&&($(this.slider_element).val(s).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)))}},showSelectedEpisode:function(){var e=series_summary_page.keys,t=this.keys;if(e.episode_selection!=t.episode_selection){e.episode_selection=t.episode_selection;e=this.episodes[t.episode_selection];this.saveVideoTime(),this.resume_time=0;try{media_player.close()}catch(e){}current_episode=e,this.init(current_episode,"series","episode-page","",!1),this.hoverEpisode(t.episode_selection)}},showNextVideo:function(e){if(!this.showNextVideo_debounce)switch(this.showNextVideo_debounce=!0,setTimeout(()=>{this.showNextVideo_debounce=!1},1e3),this.saveVideoTime(),this.resume_time=0,this.back_url){case"vod-summary-page":(t=vod_series_page.keys).menu_selection+=e,t.menu_selection<0?t.menu_selection=0:t.menu_selection>=vod_series_page.movies.length?t.menu_selection=vod_series_page.movies.length-1:(current_movie=vod_series_page.movies[t.menu_selection],this.init(current_movie,"movie","vod-summary-page","",!1));break;case"episode-page":var t=series_summary_page.keys,i=series_summary_page.episode_doms[t.season_selection],s=t.episode_selection;(s+=e)<0?t.episode_selection=0:s>=i.length?t.episode_selection=i.length-1:(i=current_season.episodes,current_episode=i[s],t.episode_selection=s,this.init(current_episode,"series","episode-page","",!1));break;case"channel-page":i=channel_page.keys.epg_selection;(i+=e)<0||i>=channel_page.programmes.length||(channel_page.keys.epg_selection=i,channel_page.showEpgVideo());break;case"catch-up-detail":(t=epg_page.keys).programme_selection+=e,t.programme_selection<0?t.programme_selection=0:t.programme_selection>=epg_page.programme_doms.length?t.programme_selection=epg_page.programme_doms.length-1:this.init(epg_page.current_programmes[t.programme_selection],"epg","catch-up-detail",!1);break;case"search-page":(t=search_page.keys).movie_selection+=e,t.movie_selection<0?t.movie_selection=0:t.movie_selection>=search_page.filtered_movies.length?t.movie_selection=search_page.filtered_movies.length-1:(current_movie=search_page.filtered_movies[t.movie_selection],this.init(current_movie,"movie","search-page","",!1));break;case"storage-page":storage_page.video_index+=e,storage_page.video_index>=storage_page.video_files.length?storage_page.video_index=storage_page.video_files.length-1:storage_page.video_index<0?storage_page.video_index=0:(s=storage_page.video_files[storage_page.video_index],storage_page.keys.menu_selection=s.index,this.init(s.file,"storage","storage-page","",!1))}},showControlBar:function(e){$("#vod-series-video-controls-container").slideDown(),this.show_control=!0;var t=this;e&&(this.hoverVideoControlIcon(2),$("#player-seasons-container").removeClass("expanded")),clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){t.hideControlBar()},1e4)},hideControlBar:function(){$("#vod-series-video-controls-container").slideUp(),this.show_control=!1},makeMediaTrackElement:function(e,t){var s,i,a="",o=0;return"TEXT"===t&&(o=1,a='<div class="modal-operation-menu-type-2 subtitle-item"                    onmouseenter="vod_series_player.hoverSubtitle(0)"                     onclick="vod_series_player.handleMenuClick()"                 >                   <input class="magic-radio" type="radio" name="radio" value="-1">                   <label>Disabled</label>                </div>'),"samsung"===platform?(s="TEXT"!==t?"language":"track_lang",e.map(function(e,t){var i=e.extra_info;a+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player.hoverSubtitle('+(t+o)+')"                 onclick="vod_series_player.handleMenuClick()"             >                <input class="magic-radio" type="radio" name="radio"                    value="'+e.index+'"                >                <label>'+i[s]+"</label>            </div>"})):(i="TEXT"===t?"Subtitle ":"Track ",e.map(function(e,t){e=e.language;a+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player.hoverSubtitle('+(t+o)+')"                     onclick="vod_series_player.handleMenuClick()"                 >                    <input class="magic-radio" type="radio" name="radio"                        value="'+t+'">                    <label>'+(e=e||i+(t+1))+"</label>                </div>"})),a},showSubtitleAudioModal:function(e){this.hideControlBar();var t,i,s,a=this.keys;try{$("#subtitle-loader-container").hide(),this.subtitle_loading=!1,"samsung"!==platform&&"TEXT"===e?this.subtitle_loaded?0<media_player.subtitles.length?this.renderSubtitles(e,media_player.subtitles):this.showEmptySubtitleMessage(e):($("#subtitle-selection-container").html(""),"subtitle_audio_selection_modal"!==a.focused_part&&(a.prev_focus=a.focused_part),this.hoverSubtitle(-2),this.subtitle_loading=!0,$("#subtitle-selection-modal").modal("show"),$("#subtitle-loader-container").show(),i=settings.playlist_type,s=this.current_movie,"movie"===this.current_movie_type?s.tmdb_id?this.getSubtitlesForLG():s.tmdb?(s.tmdb_id=s.tmdb,this.getSubtitlesForLG()):"xtreme"!==i||s.summary_downloaded?this.getTmdbID(s,"movie"):this.getMovieDetail():current_series.tmdb||current_series.info&&current_series.info.tmdb||s.info&&s.info.tmdb_id?this.getSubtitlesForLG():this.getTmdbID(current_series,"series")):0<(t=media_player.getSubtitleOrAudioTrack(e)).length?this.renderSubtitles(e,t):showToast("Sorry","TEXT"===e?"No Subtitles exists":"No Audios exists")}catch(e){console.log(e),$("#vod-series-player-operation-modal").modal("hide"),showToast("Sorry","Video not loaded yet")}},getMovieDetail:function(){var t=this,i=this.current_movie;console.log("here getting tmdb id"),"xtreme"===settings.playlist_type&&$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+i.stream_id,function(e){e=e.info;t.current_movie.info=e,i.summary_downloaded=!0,e.tmdb_id?(t.current_movie.tmdb_id=e.tmdb_id,t.getSubtitlesForLG()):(console.log("sorry no tmdb id exist in summary api response"),t.getTmdbID(i,"movie"))},function(e){console.log(e),t.getTmdbID(i,"movie")})},getTmdbID:function(r,c){var e="movie"===c?r.info&&(r.info.o_name||r.info.name)||r.name:(r.info&&r.info.name?r.info:r).name,e=getRealMovieName(e),l=e.name.toLowerCase(),e=(e.year,e.country,tmdb_prefix_url+("movie"===c?"/search/movie":"/search/tv")+"?api_key="+tmdb_api_key+"&query="+l),d=this;$.ajax({method:"get",url:e,success:function(e){if(e.results&&0<e.results.length){var t=e.results;if(console.log(e),1==t.length)"movie"===c?d.current_movie.tmdb_id=t[0].id:current_series.tmdb=t[0].id,d.getSubtitlesForLG();else if("movie"===c){e=r.info;if(e&&e.releasedate){for(var i=e.releasedate,s=0;s<t.length;s++)if(t[s].release_date===i){d.current_movie.tmdb_id=t[s].id;break}}else{for(var a=0,s=0;s<t.length;s++)l.includes(t[s].title.toLowerCase())&&(a++,o=s);1==a&&(console.log(t[o]),d.current_movie.tmdb_id=t[o].id)}d.current_movie.tmdb_id?d.getSubtitlesForLG():d.showEmptySubtitleMessage("TEXT")}else{for(var o,a=0,n=current_series.plot?current_series.plot.toLowerCase().trim():"",s=0;s<t.length;s++)if((l.includes(t[s].name.toLowerCase())||l.includes(t[s].original_name.toLowerCase()))&&(a++,o=s,n)&&n==t[s].overview.toLowerCase().trim()){console.log("here same overview"),a=1;break}1==a?(console.log(t[o]),current_series.tmdb=t[o].id,d.getSubtitlesForLG()):d.showEmptySubtitleMessage("TEXT")}}else d.showEmptySubtitleMessage("TEXT")},error:function(e){d.showEmptySubtitleMessage("TEXT")}})},getSubtitlesForLG:function(){var e,t,i,s=this;"movie"===this.current_movie_type?e={tmdb_id:this.current_movie.tmdb_id}:(t=current_season.episodes[series_summary_page.keys.episode_selection],current_series.tmdb?i=current_series.tmdb:current_series.info&&current_series.info.tmdb&&(i=current_series.info.tmdb),i?(e={movie_type:"episode",season_number:current_season.season_number||series_summary_page.keys.season_selection+1,episode_number:t.episode_num||series_summary_page.keys.episode_selection+1,tmdb_id:i},t.info&&t.info.tmdb_id&&(e.episode_tmdb_id=t.info.tmdb_id)):t.info&&t.info.tmdb_id&&(e={movie_type:"episode",episode_tmdb_id:t.info.tmdb_id})),$.ajax({method:"post",url:"https://ibosub.com/api/get-subtitles-update",data:e,dataType:"json",success:function(e){s.subtitle_loading=!1,s.subtitle_loaded=!0,$("#subtitle-loader-container").hide(),console.log(e),"success"===e.status&&(0<e.subtitles.length?(media_player.subtitles=e.subtitles,media_player.srt_map=e.srt_map,media_player.movie_list_id=e.movie_list_id,s.renderSubtitles("TEXT",e.subtitles)):s.showEmptySubtitleMessage("TEXT"))},error:function(e){s.showEmptySubtitleMessage("TEXT")}})},renderSubtitles:function(e,t){console.log(media_player.subtitles,t);var i,s,a=this,o=this.keys;$("#vod-series-player-operation-modal").modal("hide"),0<t.length&&("subtitle_audio_selection_modal"!=o.focused_part&&(o.prev_focus=o.focused_part),"TEXT"==e?$("#subtitle-modal-title").text("Subtitle"):$("#subtitle-modal-title").text("Audio Track"),o.focused_part="subtitle_audio_selection_modal",$("#subtitle-selection-modal").find(".modal-operation-menu-type-2").removeClass("active"),o=this.makeMediaTrackElement(t,e),$("#subtitle-selection-container").html(o),$("#subtitle-selection-modal").modal("show"),i=$("#subtitle-selection-modal .subtitle-item"),this.subtitle_audio_menus=i,$(i[0]).find("input").prop("checked",!0),this.hoverSubtitle(0),s="TEXT"===e?this.current_subtitle_index:this.current_audio_track_index,this.subtitle_audio_menus.map(function(e,t){parseInt($(t).find("input").val())==s&&($(i).find("input").prop("checked",!1),$(i[e]).find("input").prop("checked",!0),a.hoverSubtitle(e))}),t=$("#subtitle-selection-modal").find(".modal-btn-2"),$(t).removeClass("active"))},showEmptySubtitleMessage:function(e){$("#subtitle-selection-modal").modal("hide"),"TEXT"===e?(this.subtitle_loaded=!1,this.subtitle_loading=!1,media_player.subtitles=[],showToast("Sorry","No Subtitles exists")):showToast("Sorry","No Audios exists");e=this.keys;"subtitle_audio_selection_modal"==e.focused_part&&(e.focused_part=e.prev_focus)},cancelSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},confirmSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus;var t,e=$("#subtitle-modal-title").text(),i=this;if(e.toLowerCase().includes("subtitle"))this.current_subtitle_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val(),-1==this.current_subtitle_index||"samsung"==platform||(t=media_player.subtitles[this.current_subtitle_index].file_id.toString(),media_player.srt_map[t])?this.subtitleChanged():$.ajax({method:"post",url:"https://ibosub.com/api/get-single-subtitle-content",data:{movie_list_id:media_player.movie_list_id,file_id:t},dataType:"json",success:function(e){"success"===e.status&&(media_player.srt_map[t]=e.content,i.subtitleChanged())},error:function(e){showToast("Sorry","Something error caused while downloading subtitles for current language, please try again later")}});else{this.current_audio_track_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val();try{media_player.setSubtitleOrAudioTrack("AUDIO",parseInt(this.current_audio_track_index))}catch(e){}console.log(this.current_audio_track_index)}},subtitleChanged:function(){try{this.show_subtitle=!0,media_player.setSubtitleOrAudioTrack("TEXT",parseInt(this.current_subtitle_index))}catch(e){}},removeAllActiveClass:function(){$(this.video_control_doms).removeClass("active"),$(this.video_info_doms).removeClass("active"),$(this.video_control_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$("#vod-series-player-page .rangeslider").removeClass("active")},videoFinishedCallBack:function(){switch(this.back_url){case"vod-summary-page":(e=vod_series_page.keys).menu_selection<vod_series_page.movies.length-1&&this.showNextVideo(1);break;case"episode-page":var e;(e=series_summary_page.keys).episode_selection<current_season.episodes.length-1||e.season_selection<current_series.seasons.length-1?this.showNextVideo(1):(this.hideControlBar(),this.goBack());break;case"channel-page":channel_page.keys.epg_selection<channel_page.programmes.length-1&&this.showNextVideo(1)}},changeScreenRatio:function(){try{media_player.toggleScreenRatio()}catch(e){}},hoverSubtitle:function(e){var t=this.keys;t.focused_part="subtitle_audio_selection_modal",$(this.subtitle_audio_menus).removeClass("active"),0<=e?(t.subtitle_audio_selection_modal=e,t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2&&moveScrollPosition($("#subtitle-selection-container"),this.subtitle_audio_menus[t.subtitle_audio_selection_modal],"vertical",!1)):t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length+e,$(this.subtitle_audio_menus[t.subtitle_audio_selection_modal]).addClass("active")},hoverSlider:function(){this.removeAllActiveClass(),this.keys.focused_part="slider",$("#vod-series-player-page .rangeslider").addClass("active")},hoverVideoControlIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1),this.removeAllActiveClass();var t=this.keys;t.focused_part="control_bar",t.control_bar=e,$(this.video_control_doms[e]).addClass("active")},hoverVideoInfoIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="info_bar",t.info_bar=e,$(this.video_info_doms[e]).addClass("active")},hoverEpisode:function(e){$("#player-seasons-container").addClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="episode_selection",t.episode_selection=e,$(this.episode_doms[e]).addClass("active"),moveScrollPosition($("#player-seasons-container"),this.episode_doms[t.episode_selection],"horizontal",!1)},hoverResumeBtn:function(e){var t=this.keys;t.resume_bar=e,t.focused_part="resume_bar",$(this.resume_bar_doms).removeClass("active"),$(this.resume_bar_doms[e]).addClass("active"),clearTimeout(this.resume_timer),this.resume_timer=setTimeout(function(){$("#video-resume-modal").hide(),t.focused_part=t.prev_focus},15e3)},handleMenuClick:function(){var e=this.keys;if("resume_bar"===e.focused_part&&"none"===$("#video-resume-modal").css("display")&&(e.focused_part="control_bar"),this.show_control||"control_bar"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part&&"slider"!==e.focused_part)switch(e.focused_part){case"control_bar":this.showControlBar(!1),$(this.video_control_doms[e.control_bar]).trigger("click");break;case"info_bar":this.show_control&&(this.showControlBar(!1),$(this.video_info_doms[e.info_bar]).find(".video-info-icon").trigger("click"));break;case"episode_selection":this.showControlBar(!1),$(this.episode_doms[e.episode_selection]).trigger("click");break;case"resume_bar":if($("#video-resume-modal").hide(),e.focused_part=e.prev_focus,0==e.resume_bar)if("samsung"===platform)try{webapis.avplay.getCurrentTime()<this.resume_time&&(webapis.avplay.seekTo(this.resume_time),$(this.slider_element).val(this.resume_time/1e3).change())}catch(e){}else if("lg"===platform)try{media_player.videoObj.currentTime<this.resume_time&&(media_player.videoObj.currentTime=this.resume_time,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(this.resume_time)),0<media_player.videoObj.duration)&&$(this.slider_element).val(this.resume_time).change()}catch(e){}break;case"subtitle_audio_selection_modal":e.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).trigger("click"):($(this.subtitle_audio_menus).find("input").prop("checked",!1),$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).find("input").prop("checked",!0))}else this.showControlBar(!0)},handleMenuLeftRight:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":this.seekTo(30*e),this.showControlBar(!1);break;case"control_bar":t.control_bar+=e,t.control_bar<0&&(t.control_bar=0),t.control_bar>=this.video_control_doms.length&&(t.control_bar=this.video_control_doms.length-1),this.hoverVideoControlIcon(t.control_bar);break;case"info_bar":t.info_bar+=e,t.info_bar<0&&(t.info_bar=0),t.info_bar>=this.video_info_doms.length&&(t.info_bar=this.video_info_doms.length-1),this.hoverVideoInfoIcon(t.info_bar);break;case"episode_selection":$(this.episode_doms).removeClass("active"),t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length&&(t.episode_selection=this.episode_doms.length-1),this.hoverEpisode(t.episode_selection);break;case"subtitle_audio_selection_modal":0<e?this.hoverSubtitle(-1):this.hoverSubtitle(-2)}else this.seekTo(30*e)},handleMenuUpDown:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part&&"episode_selection"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":0<e&&this.hoverVideoControlIcon(2);break;case"control_bar":0<e?(t.prev_focus="info_bar",this.hoverVideoInfoIcon(0)):this.hoverSlider();break;case"info_bar":e<0&&this.hoverVideoControlIcon(2),this.has_episodes&&0<e&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":e<0&&this.hoverVideoInfoIcon(t.info_bar);break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?e<0&&(t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length-3):t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<0&&(t.subtitle_audio_selection_modal=0),this.hoverSubtitle(t.subtitle_audio_selection_modal);break;case"resume_bar":var i=this.resume_bar_doms;t.resume_bar+=e,t.resume_bar<0&&(t.resume_bar=0),t.resume_bar>=i.length&&(t.resume_bar=i.length-1),this.hoverResumeBtn(t.resume_bar)}else this.showControlBar(!0)},HandleKey:function(e){switch(e.keyCode){case tvKey.MediaFastForward:this.seekTo(30);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.MediaRewind:this.seekTo(-30);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.MediaPause:this.playPauseVideo("pause");break;case tvKey.MediaPlay:this.playPauseVideo("play");break;case tvKey.MediaPlayPause:this.playPauseVideo("");break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},trailer_page={player:null,done:!1,back_url:"home-page",is_paused:!1,is_loading:!1,init:function(e,t){showLoader(!0),this.is_loading=!0,this.back_url=t,this.is_paused=!1,$("#vod-summary-page").addClass("hide"),$("#series-summary-page").addClass("hide"),$("#trailer-player-page").show(),current_route="trailer-page",trailer_page.player=new YT.Player("trailer-player",{height:"100%",width:"100%",videoId:e,events:{onReady:trailer_page.onPlayerReady,onStateChange:trailer_page.onPlayerStateChange}}),$("#trailer-player").on("load",function(){$("#trailer-player").contents().find(".ytp-chrome-top-buttons").hide(),$("#trailer-player").contents().find(".ytp-right-controls").hide(),showLoader(!1),trailer_page.is_loading=!1,$(document.getElementById("trailer-player").contentWindow.document).keydown(function(e){switch(e.keyCode){case tvKey.RETURN:trailer_page.goBack();break;case tvKey.RIGHT:trailer_page.seekTo(5);break;case tvKey.LEFT:trailer_page.seekTo(-5);break;case tvKey.ENTER:trailer_page.playOrPause()}})})},goBack:function(){current_route=this.back_url,this.player.stopVideo(),$("#trailer-player-page").hide(),$("#trailer-player").remove(),$("#trailer-player-page").html('<div id="trailer-player"></div>'),"vod-summary-page"===this.back_url&&$("#vod-summary-page").removeClass("hide"),"series-summary-page"===this.back_url&&$("#series-summary-page").removeClass("hide")},onPlayerReady:function(e){e.target.playVideo()},onPlayerStateChange:function(e){},seekTo:function(e){var e=this.player.getCurrentTime()+e,t=this.player.getDuration();this.player.seekTo(e=t<(e=e<0?0:e)?t:e)},playOrPause:function(){this.is_paused?this.player.playVideo():this.player.pauseVideo(),this.is_paused=!this.is_paused},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.RIGHT:this.seekTo(5);break;case tvKey.LEFT:this.seekTo(-5);break;case tvKey.ENTER:this.playOrPause()}}},series_summary_page={keys:{focused_part:"season_selection",season_selection:0,episode_selection:[],action_btn:0},min_btn_index:0,episode_doms:[],current_season_index:0,hover_season_timer:null,is_loading:!1,action_btns:$(".series-action-btn"),is_favourite:!1,prev_focus_dom:null,season_doms:[],prev_route:"",series_video_times:{},init:function(e){this.prev_route=e,this.prev_focus_dom=null,this.current_season_index=-1,showLoader(!0),this.is_loading=!0,this.is_favourite=!SeriesModel.favourite_ids.includes(current_series.series_id),this.toggleFavourite(),this.series_video_times={};for(var t=SeriesModel.saved_video_times,i=0;i<t.length;i++)if(t[i].stream_id==current_series.series_id){console.log("here",t[i]),this.series_video_times=t[i].video_times;break}var n=this,e=($(".vod-series-summary-contents-container").css({visibility:"visible"}),$("#season-episodes-container").removeClass("visible"),current_route="series-summary-page",$("#episode-items-wrapper").html(""),$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#series-summary-image-wrapper img").attr("src",""),$("#series-summary-image-wrapper img").attr("src",current_series.cover||HOST+"app_src_min/images/logo1.png"),$("#series-summary-name").text(current_series.name),$("#series-summary-release-date").text(current_series.releasedate),$("#series-summary-release-genre").text(current_series.genre),$("#series-summary-release-length").text(current_series.duration),$("#series-summary-release-director").text(current_series.director),$("#series-summary-release-cast").text(current_series.cast),$("#series-summary-description").text(current_series.plot),this.min_btn_index=1,this.hoverButton(1),$(this.action_btns[0]).hide(),0),e=void 0===current_series.rating||""===current_series.rating?0:parseFloat(current_series.rating);isNaN(e)&&(e=0),$("#series-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#series-rating-mark").text(e.toFixed(1)),$("#vod-series-page").addClass("hide"),$("#series-summary-page").removeClass("hide"),this.keys.focused_part="episode_selection","xtreme"===settings.playlist_type?$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_series_info&series_id="+current_series.series_id).done(function(e){current_series.info=e.info;var i=e.seasons;if(e.episodes&&(i&&0<i.length||0<Object.keys(e.episodes).length)){var s=e.episodes,t=(i&&0!=i.length?i.map(function(e){e.episodes=s[e.season_number.toString()]}):(i=[],Object.keys(s).map(function(e,t){i.push({name:"Season "+(t+1),cover:HOST+"app_src_min/images/series-icon.png",episodes:s[e]})})),i.filter(function(e){return e.episodes&&0<e.episodes.length})),a=Object.keys(s);if(a.length>t.length){for(var o=0;o<t.length;o++)t[o].name="Season "+(o+1);for(o=t.length;o<a.length;o++)t.push({name:"Season "+(o+1),episodes:s[(o+1).toString()]})}current_series.seasons=t,n.showSeriesInfo()}else showLoader(!1),n.is_loading=!1,showToast("Sorry","No seasons available"),n.goBack()}).fail(function(){showLoader(!1),n.is_loading=!1,showToast("Sorry","No seasons available"),n.goBack()}):"type1"===settings.playlist_type&&(current_series.seasons.map(function(e){e.episodes=current_series.episodes[e.name].sort(function(e,t){e=parseInt(e.name.replace("Episode ","")),t=parseInt(t.name.replace("Episode ",""));return console.log(e,t),e-t})}),this.showSeriesInfo())},showSeriesInfo:function(){var i="",s=current_words.episodes||"Episodes";current_series.seasons=current_series.seasons.sort(function(e,t){return e.name.localeCompare(t.name)}),current_series.seasons.map(function(e,t){i+='<div class="season-item-container"                    onmouseenter="series_summary_page.hoverSeason('+t+')"                     onclick="series_summary_page.handleMenuClick()"                 >                    <div class="season-item-name">'+e.name+'</div>                    <div class="season-item-episode-counts-wrapper">                        <span class="season-item-episode-count">'+e.episodes.length+'</span>                         <span class="season-item-episode-count-label">'+s+"</span>                     </div>                 </div>"}),$("#season-items-wrapper").html(i),this.season_doms=$(".season-item-container"),this.keys.season_selection=0;try{$("#selected-season-name").text(current_series.seasons[0].name);var e;try{(e=current_series.info.backdrop_path[0])&&$(".vod-series-background-img").attr("src",e).removeClass("hide")}catch(e){console.log(e)}}catch(e){console.log(e)}this.showEpisodes(),this.hoverButton(1),current_series.info&&current_series.info.youtube_trailer&&(this.min_btn_index=0,$(this.action_btns[0]).show()),showLoader(!1),this.is_loading=!1},showEpisodes:function(){var e=this.keys,t=current_series.seasons[e.season_selection],r=(this.current_season_index=e.season_selection,""),t=t.episodes,c=this.series_video_times[e.season_selection.toString()]?this.series_video_times[e.season_selection.toString()]:{};t&&0<t.length&&t.map(function(e,t){var i,s=HOST+"app_src_min/images/default_episode.png",a="No Info",o=(e.info&&(e.info.movie_image&&(s=e.info.movie_image),e.info.duration)&&(a=e.info.duration),""),n=0;c[t.toString()]&&(o="has-progress",(i=c[t.toString()]).duration)&&(n=100*parseFloat(i.time)/parseFloat(i.duration)+"%"),r+='<div class="episode-item-container">                        <div class="episode-item-wrapper"                            onmouseenter="series_summary_page.hoverEpisode('+t+',false)"                            onclick="series_summary_page.handleMenuClick()">                            <div class="episode-item-img-wrapper">                                <img class="episode-item-img" src="'+s+'" onerror="this.src=\''+HOST+'app_src_min/images/default_episode.png\'">                            </div>                             <div class="episode-item-info-container">                                <div class="episode-item-title">'+(e.title||"Episode "+(index+1))+'</div>                                <div class="episode-item-info">'+a+'</div>                             </div>                             <div class="episode-duration-container">                                <div class="episode-video-duration '+o+'">                                    <span class="episode-video-progress" style="width: '+n+'"></span>                                </div>                             </div>                         </div>                    </div>'}),$("#episode-items-wrapper").html(r),$("#episode-items-wrapper").scrollTop(0),e.episode_selection=0,this.episode_doms=$(".episode-item-wrapper")},goBack:function(){var e,t,i=this.keys;switch(i.focused_part){case"episode_selection":this.hoverSeason(i.season_selection);break;case"season_selection":$("#season-episodes-container").removeClass("visible"),$(".vod-series-summary-contents-container").css({visibility:"visible"}),this.hoverButton(i.action_btn);break;case"action_btn":current_route=this.prev_route,$("#series-summary-page").addClass("hide"),"vod-series-page"===this.prev_route?($("#vod-series-page").removeClass("hide"),i=vod_series_page.keys,e=vod_series_page.menu_doms,this.is_favourite?0==$(e[i.menu_selection]).find(".favourite-badge").length&&(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),$($(e[i.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),vod_series_page.categories[i.category_selection],e=vod_series_page.menu_doms,$($(e[i.menu_selection]).find(".favourite-badge")).remove())):($("#search-page").show(),e=search_page.movie_doms,t=(i=search_page.keys).movie_selection,this.is_favourite?0==$(e[t]).find(".favourite-badge").length&&(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),$(e[t]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),$(e[t]).find(".favourite-badge").remove()))}},toggleFavourite:function(){var e=this.action_btns[2];this.is_favourite=!this.is_favourite,this.is_favourite?$(e).text(void 0!==current_words.remove_favorites?current_words.remove_favorites:"Remove Fav"):$(e).text(void 0!==current_words.add_to_favorite?current_words.add_to_favorite:"Add Fav")},showTrailerVideo:function(){current_series.info&&current_series.info.youtube_trailer?trailer_page.init(current_series.info.youtube_trailer,current_route):($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show"))},showSeasons:function(){var e=this.keys;0<current_series.seasons.length?($(".vod-series-summary-contents-container").css({visibility:"hidden"}),$("#season-episodes-container").addClass("visible"),this.hoverSeason(e.season_selection)):showToast("Sorry","No seasons and episodes available<br>Please try again")},hoverSeason:function(e){var t=this.keys;t.focused_part="season_selection",t.season_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.season_doms[t.season_selection]).addClass("active"),this.prev_focus_dom=this.season_doms[t.season_selection],moveScrollPosition($("#season-items-wrapper"),this.season_doms[t.season_selection],"vertical",!1)},hoverEpisode:function(e,t){var i=this.keys,i=(i.episode_selection=e,i.focused_part="episode_selection",$(this.prev_focus_dom).removeClass("active"),this.episode_doms[e]);$(i).addClass("active"),moveScrollPosition($("#episode-items-wrapper"),$(i).closest(".episode-item-container"),"vertical",t),this.prev_focus_dom=i},hoverButton:function(e){var t=this.keys;t.focused_part="action_btn",t.action_btn=e,$("#select-season-btn").removeClass("active"),$(this.episode_doms).removeClass("active"),$(this.action_btns).removeClass("active"),$(this.action_btns[e]).addClass("active")},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":0<e&&0<this.episode_doms.length&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":t.episode_selection%3==0&&e<0?this.hoverSeason(t.season_selection):(t.episode_selection+=e,t.episode_selection<0?t.episode_selection=0:t.episode_selection>=this.episode_doms.length?t.episode_selection=this.episode_doms.length-1:this.hoverEpisode(t.episode_selection,!0));break;case"action_btn":t.action_btn+=e,2<t.action_btn&&(t.action_btn=2),t.action_btn<this.min_btn_index&&(t.action_btn=this.min_btn_index),this.hoverButton(t.action_btn)}},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":t.season_selection+=e,t.season_selection<0&&(t.season_selection=0),t.season_selection>=current_series.seasons.length&&(t.season_selection=current_series.seasons.length-1),this.hoverSeason(t.season_selection);break;case"episode_selection":checkVerticalMovable(this.episode_doms.length,3,t.episode_selection,e)&&(t.episode_selection+=3*e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length&&(t.episode_selection=this.episode_doms.length-1),this.hoverEpisode(t.episode_selection,!1))}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"season_selection":this.showEpisodes();break;case"episode_selection":$("#series-summary-page").addClass("hide");var t=e.episode_selection,i=(current_season=current_series.seasons[e.season_selection]).episodes;current_episode=i[t],vod_series_player.init(current_episode,"series","episode-page","",!0),vod_series_player.keys.episode_selection=t;break;case"action_btn":$(this.action_btns[e.action_btn]).trigger("click")}},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},vod_series_page={player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],category_hover_timer:null,category_hover_timeout:300,keys:{focused_part:"category_selection",category_selection:0,menu_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,year_filter_selection:0},category_doms:[],menu_doms:[],top_menu_doms:$("#vod-series-page .top-menu"),current_movie_type:"movie",sort_key:"vod_sort",search_key_timer:"",search_key_timout:400,current_render_count:0,render_count_increment:400,is_drawing:!1,prev_keyword:"",prev_dom:null,sort_doms:$("#sort-modal-container .sort-modal-item"),year_initiated:!1,year_filter_doms:[],current_hover_id:"",hover_movie_timer:null,hover_movie_timeout:300,rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,rearrange_origin_position:0,sort_changed:!1,init:function(e,t){this.prev_dom=null,this.is_drawing=!1,this.sort_changed=!1;var i=this.keys,s=($(".vod-series-type-txt").addClass("hide"),$(".vod-series-type-txt."+e).removeClass("hide"),settings[e+"_sort"]),a=("vod"===e?(this.sort_key="vod_sort",this.categories=VodModel.getCategories(!1,!0),$("#vod-series-video-type").text(current_words.movies||"Movies")):(this.sort_key="series_sort",this.categories=SeriesModel.getCategories(!1,!0),$("#vod-series-video-type").text(current_words.series||"Series")),this.categories),o="";a.map(function(e,t){o+='<div class="vod-series-category-item-container">                    <div class="vod-series-category-item"                        onmouseenter="vod_series_page.hoverCategory(this)"                         onclick="vod_series_page.handleMenuClick()"                         data-index="'+t+'"                    >'+e.category_name+"</div>                </div>"}),$("#vod-series-categories-container").html(o),this.category_doms=$(".vod-series-category-item"),home_page.exit(),$("#vod-series-page").removeClass("hide"),current_route="vod-series-page",this.current_movie_type=e,$("#vod-series-current-category").text(s),this.changeSoryKeyTitle(settings[this.sort_key]);for(var n=0;n<a.length;n++)if(a[n].category_id==t.category_id){i.category_selection=n;break}this.hoverCategory(this.category_doms[i.category_selection]),this.showCategoryContent(),clearTimeout(this.hover_movie_timer),this.hover_movie_timer=null,this.current_hover_id=""},goBack:function(){var e=this.keys;switch(e.focused_part){case"top_menu_selection":$("#vod-series-search-input").blur(),this.hoverCategory(this.category_doms[e.category_selection]);break;case"sort_selection":$("#sort-modal-container").removeClass("visible"),this.hoverTopMenu(1);break;case"year_filter_selection":$("#year-filter-modal-container").removeClass("visible"),this.hoverTopMenu(2);break;case"menu_selection":this.hoverCategory(this.category_doms[e.category_selection]);break;default:clearTimeout(this.hover_movie_timer),this.hover_movie_timer=null,$("#vod-series-page").addClass("hide"),home_page.reEnter(),this.sort_changed&&home_page.updateByCategoryHidden(this.current_movie_type),$("#vod-series-rating").text(""),$("#vod-series-age").text(""),$("#vod-series-genre").text(""),$("#vod-series-director").text(""),$("#vod-series-page-summary-img").attr("src",""),$(this.prev_dom).removeClass("active"),this.current_category_index=-1;var t="vod"==this.current_movie_type?VodModel:SeriesModel,i=t.category_orders;if(0<i.length){for(var s=this.categories,a=0;a<s.length;a++)for(var o=0;o<i.length;o++)if(s[a].category_id==i[o].id){i[o].position=a;break}i=i.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_"+this.current_movie_type+"_category_orders",JSON.stringify(i)),t.category_orders=i}}},showCategoryContent:function(){var e,t,i,s=this.keys;this.current_category_index!==s.category_selection&&(e=this.categories[s.category_selection],this.current_render_count=0,$("#vod-series-menus-container").html(""),this.menu_doms=[],this.prev_keyword="",$("#vod-series-search-input").val(""),t=e.movies.filter(function(e){return!0}),i=settings[this.current_movie_type+"_sort"],"series"===this.current_movie_type&&"added"===i&&(i="last_modified"),this.movies=getSortedMovies(t,i),this.renderCategoryContent(),$("#vod-series-menus-container").scrollTop(0),s.menu_selection=0,this.current_category_index=s.category_selection,$("#vod-series-current-category").text(e.category_name),$("#vod-series-current-movie-selection").text(0))},renderCategoryContent:function(){var r,c,l,d,_,m="",h=HOST+"app_src_min/images/movie-icon.png",u="stream_icon";"vod"!==this.current_movie_type&&(u="cover"),$("#vod-series-current-movie-count").text(this.movies.length),this.current_render_count<this.movies.length&&(showLoader(this.is_drawing=!0),r=this,setTimeout(function(){showLoader(r.is_drawing=!1)},1e3),d={},"vod"===this.current_movie_type?(l=VodModel.movie_key,c=VodModel.favourite_ids,VodModel.saved_video_times.map(function(e){d[e.stream_id.toString()]=e})):(l=SeriesModel.movie_key,c=SeriesModel.favourite_ids,SeriesModel.saved_video_times.map(function(e){d[e.stream_id.toString()]=e})),_="added","series"===this.current_movie_type&&(_="last_modified"),this.movies.slice(this.current_render_count,this.current_render_count+this.render_count_increment).map(function(e,t){var i=c.includes(e[l]),s="";if("xtreme"===settings.playlist_type)try{e[_]&&(s=moment(1e3*e[_]).format("Y-MM-DD"))}catch(e){}var a,o="",n=0;"vod"===r.current_movie_type&&(a=e.stream_id.toString(),d[a])&&(o="has-progress",(a=d[a]).duration)&&(n=100*parseFloat(a.time)/parseFloat(a.duration)+"%"),m+='<div class="vod-series-menu-item-container" data-stream_id="'+e.stream_id+'"                        data-has_progress="'+(o?1:0)+'"                        data-index="'+(r.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                        <div class="vod-series-menu-item">'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'<img class="vod-series-icon" src="'+e[u]+'" onerror="this.src=\''+h+'\'">                            <div class="vod-series-menu-item-title">'+e.name+'</div>                            <div class="vod-series-menu-item-added-time-container">                                <div class="vod-series-menu-item-added-time-wrapper">                                    <div class="vod-series-menu-item-added-time">'+s+'</div>                                </div>                             </div>                            <div class="vod-series-video-duration-container">                                <div class="vod-series-video-duration '+o+'">                                    <span class="vod-series-video-progress" style="width: '+n+'"></span>                                </div>                             </div>                         </div>                    </div>'}),this.current_render_count+=this.render_count_increment,$("#vod-series-menus-container").append(m),"xtreme"===settings.playlist_type?($("#vod-series-menus-container").removeClass("no-added-time"),$("#vod-series-menus-container").addClass("has-added-time")):($("#vod-series-menus-container").addClass("has-added-time"),$("#vod-series-menus-container").addClass("no-added-time")),this.menu_doms=$("#vod-series-menus-container .vod-series-menu-item-container"))},addOrRemoveFav:function(){var e,t,i,s=this.keys;"menu_selection"===s.focused_part&&(e=this.menu_doms,t=this.movies,("vod"===this.current_movie_type||"movie"===this.current_movie_type?(i=VodModel.movie_key,VodModel):(i=SeriesModel.movie_key,SeriesModel)).favourite_ids.includes(t[s.menu_selection][i])?($($(e[s.menu_selection]).find(".favourite-badge")).remove(),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).removeRecentOrFavouriteMovie(t[s.menu_selection][i],"favourite")):($($(e[s.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>'),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).addRecentOrFavouriteMovie(t[s.menu_selection],"favourite")))},searchMovie:function(){$("#vod-series-search-input").focus(),setTimeout(function(){var e=$("#vod-series-search-input").val();$("#vod-series-search-input")[0].setSelectionRange(e.length,e.length)},200)},searchValueChange:function(){clearTimeout(this.search_key_timer);var s=this;this.search_key_timer=setTimeout(function(){var e,t,i=$("#vod-series-search-input").val();s.prev_keyword!==i&&(e=s.categories[s.current_category_index],(e=JSON.parse(JSON.stringify(e.movies))).sort(function(e,t){return e.name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.name.toLowerCase().includes(i)})),s.movies=t,$("#vod-series-menus-container").html(""),s.current_render_count=0,s.renderCategoryContent(),s.prev_keyword=i)},this.search_key_timout)},showSortModal:function(){var i=settings[this.current_movie_type+"_sort"],s=0;this.sort_doms.map(function(e,t){$(t).data("sort_key")==i&&(s=e)}),$("#sort-modal-container").addClass("visible"),this.hoverSortItem(s)},showYearFilterModal:function(){if(!this.year_initiated){for(var e=parseInt(moment().format("Y")),t='<div class="sort-modal-item"                    data-year="all"                    onmouseenter="vod_series_page.hoverYearFilter(0)"                    onclick="vod_series_page.handleMenuClick()"                    data-word_code="all"                 >All</div>',i=0;i<30;i++){var s=e-i;t+='<div class="sort-modal-item"                        data-year="'+s+'"                        onmouseenter="vod_series_page.hoverYearFilter('+(i+1)+')"                        onclick="vod_series_page.handleMenuClick()"                    >'+s+"</div>"}$("#year-filter-modal-container .sort-modal-items-wrapper").html(t),this.year_filter_doms=$("#year-filter-modal-container .sort-modal-item")}$("#year-filter-modal-container").addClass("visible"),this.hoverYearFilter(0)},changeSoryKeyTitle:function(e){e=current_words[e]||settings.sort_keys[e];$("#vod-series-sort-key").text(e)},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_dom).removeClass("rearrange");else if(e){e=this.keys;if("category_selection"===e.focused_part){this.rearrange_mode=!0;for(var t=0,i=this.categories[e.category_selection],s="vod"===this.current_movie_type?VodModel:SeriesModel,a=0;a<s.categories.length;a++)if(s.categories[a].category_id==i.category_id){t=a;break}this.rearrange_origin_position=t,$(this.prev_dom).addClass("rearrange")}}},changeCategoryDomContent:function(e,t,i){$(e).text(t.category_name),$(e).data("index",i)},hoverYearFilter:function(e){var t;show_keyboard||((t=this.keys).focused_part="year_filter_selection",t.year_filter_selection=e,$(this.prev_dom).removeClass("active"),$(this.year_filter_doms[e]).addClass("active"),this.prev_dom=this.year_filter_doms[e],moveScrollPosition($("#year-filter-modal-container .sort-modal-items-wrapper"),this.year_filter_doms[e],"vertical",!1))},hoverSortItem:function(e){var t;show_keyboard||((t=this.keys).focused_part="sort_selection",t.sort_selection=e,$(this.prev_dom).removeClass("active"),$(this.sort_doms[e]).addClass("active"),this.prev_dom=this.sort_doms[e])},hoverCategory:function(e){var t;show_keyboard||(t=this.keys,e="object"==typeof e?$(e).data("index"):e,t.focused_part="category_selection",t.category_selection=e,$(this.prev_dom).removeClass("active"),$(this.category_doms[e]).addClass("active"),this.rearrange_mode&&($(this.prev_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_dom=this.category_doms[e],$("#vod-series-page-wrapper").addClass("expanded"),moveScrollPosition($("#vod-series-categories-container"),$(this.category_doms[e]).closest(".vod-series-category-item-container"),"vertical",!1))},hoverMovieItem:function(e){var a,o,n,r,c;show_keyboard||(a=$(e).data("index"),(o=this.keys).focused_part="menu_selection",o.menu_selection=a,$(this.prev_dom).removeClass("active"),$(this.menu_doms[a]).addClass("active"),this.prev_dom=this.menu_doms[a],clearTimeout(this.channel_hover_timer),$("#vod-series-page-wrapper").removeClass("expanded"),moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[o.menu_selection],"vertical",!1),$("#vod-series-current-movie-selection").text(a+1),clearTimeout(this.hover_movie_timer),this.hover_movie_timer=null,r=(n=this).movies[o.menu_selection],c=r.stream_id,"series"===this.current_movie_type&&(c=r.series_id),this.current_hover_id!=c&&(this.current_hover_id=c,this.hover_movie_timer=setTimeout(function(){if("vod"===n.current_movie_type)$("#vod-series-rating").text(""),$("#vod-series-age").text(""),$("#vod-series-genre").text(""),$("#vod-series-director").text(""),r.stream_icon?$("#vod-series-page-summary-img").attr("src",r.stream_icon):$("#vod-series-page-summary-img").attr("src",HOST+"app_src_min/images/logo.png"),$("#vod-series-page-summary-watch-status").removeClass("has-progress"),1==(i=$(n.menu_doms[a]).data("has_progress"))&&$("#vod-series-page-summary-watch-status").addClass("has-progress"),"xtreme"===settings.playlist_type&&$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+c).done(function(e){n.current_hover_id!=c?console.log("here",n.current_hover_id,c):(e=e.info,(r.info=e).rating&&$("#vod-series-rating").text(parseFloat(e.rating).toFixed(2)),$("#vod-series-age").text(e.age||""),$("#vod-series-genre").text(e.genre||""),$("#vod-series-director").text(e.director||""))}).fail(function(){});else{r.cover?$("#vod-series-page-summary-img").attr("src",r.cover):$("#vod-series-page-summary-img").attr("src",HOST+"app_src_min/images/logo.png"),r.rating?$("#vod-series-rating").text(parseFloat(r.rating).toFixed(2)):$("#vod-series-rating").text(""),$("#vod-series-age").text(r.age||""),$("#vod-series-genre").text(r.genre||""),$("#vod-series-director").text(r.director||""),$("#vod-series-page-summary-watch-status").removeClass("has-progress");for(var e=SeriesModel.saved_video_times,t=n.movies[o.menu_selection],i=0,s=0;s<e.length;s++)if(e[s].stream_id==t.series_id){i=1;break}1==i&&$("#vod-series-page-summary-watch-status").addClass("has-progress")}},this.hover_movie_timeout)))},hoverTopMenu:function(e){var t;show_keyboard||((t=this.keys).top_menu_selection=e,t.focused_part="top_menu_selection",$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],$("#vod-series-page-wrapper").removeClass("expanded"))},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":"vod"===this.current_movie_type?(current_movie=this.movies[e.menu_selection],vod_series_player.init(current_movie,"movie","vod-summary-page","",!0)):(current_series=this.movies[e.menu_selection],series_summary_page.init("vod-series-page"));break;case"top_menu_selection":0==e.top_menu_selection&&(show_keyboard?$("#vod-series-search-input").blur():this.searchMovie()),2==e.top_menu_selection&&this.showYearFilterModal(),1==e.top_menu_selection&&this.showSortModal();break;case"category_selection":this.toggleRearrangeMode(!1);var t=this.categories[e.category_selection];this.current_category_index!=e.category_selection&&(checkForAdult(t,"category",[])?parent_confirm_page.init(current_route):this.showCategoryContent());break;case"sort_selection":this.current_category_index=-1;t=$(this.sort_doms[e.sort_selection]).data("sort_key");settings.saveSettings(this.current_movie_type+"_sort",t,""),this.changeSoryKeyTitle(t),this.showCategoryContent(),this.goBack()}},handleMenusUpDown:function(e){var t=this.keys,i=this.menu_doms;switch(t.focused_part){case"menu_selection":var s=t.menu_selection;t.menu_selection+=e,t.menu_selection>=i.length&&(t.menu_selection=i.length-1),t.menu_selection<0?(t.menu_selection=s,this.hoverTopMenu(0)):(t.menu_selection>=this.current_render_count-7&&this.renderCategoryContent(),this.hoverMovieItem(this.menu_doms[t.menu_selection]));break;case"top_menu_selection":if(!show_keyboard&&0<e){if(0==this.menu_doms.length)return;this.hoverMovieItem(this.menu_doms[0])}break;case"sort_selection":t.sort_selection+=e,t.sort_selection<0&&(t.sort_selection=0),t.sort_selection>=this.sort_doms.length&&(t.sort_selection=this.sort_doms.length-1),this.hoverSortItem(t.sort_selection);break;case"year_filter_selection":t.year_filter_selection+=e,t.year_filter_selection<0&&(t.year_filter_selection=0),t.year_filter_selection>=this.year_filter_doms.length&&(t.year_filter_selection=this.year_filter_doms.length-1),this.hoverYearFilter(t.year_filter_selection);break;case"category_selection":s=t.category_selection;if(t.category_selection+=e,t.category_selection<0)return t.category_selection=0,void this.hoverTopMenu(t.top_menu_selection);if(t.category_selection>=this.category_doms.length)return void(t.category_selection=this.category_doms.length-1);if(this.rearrange_mode){if(s==t.category_selection)return;for(var a="vod"===this.current_movie_type?VodModel:SeriesModel,o=this.categories[s],n=this.categories[t.category_selection],r=(this.changeCategoryDomContent(this.category_doms[s],n,s),this.changeCategoryDomContent(this.category_doms[t.category_selection],o,t.category_selection),this.category_doms=$(".vod-series-category-item"),clearTimeout(this.rearrange_timer),this.rearrange_timer=null,this),c=0,l=0;l<a.categories.length;l++)if(n.category_id==a.categories[l].category_id){c=l;break}a.categories=makeRearrangeArray(a.categories,r.rearrange_origin_position,c),this.categories=a.getCategories(!1,!0),this.rearrange_origin_position=c,this.rearrange_timer=setTimeout(function(){for(var e=a.category_orders,t=0;t<e.length;t++)if(e[t].id==o.category_id){e.splice(t,1);break}e.push({id:o.category_id,position:c}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_"+r.current_movie_type+"_category_orders",JSON.stringify(e)),a.category_orders=e,a.updateRecentAndFavouritePosition()},this.rearrange_timeout),this.sort_changed=!0}this.hoverCategory(this.category_doms[t.category_selection])}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&(0<this.movies.length?this.hoverMovieItem(this.menu_doms[t.menu_selection]):$("#vod-series-search-input").val()&&this.hoverTopMenu(0));break;case"menu_selection":e<0?this.goBack():("vod"===this.current_movie_type?(current_movie=this.movies[t.menu_selection],vod_summary_page):(current_series=this.movies[t.menu_selection],series_summary_page)).init("vod-series-page");break;case"top_menu_selection":show_keyboard||(t.top_menu_selection+=e,t.top_menu_selection<0?this.hoverCategory(this.category_doms[t.category_selection]):(t.top_menu_selection>=this.top_menu_doms.length&&(t.top_menu_selection=this.top_menu_doms.length-1),this.hoverTopMenu(t.top_menu_selection)))}},HandleKey:function(e){var t=this.keys;if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:this.showNextChannel(1);break;case tvKey.CH_DOWN:this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.BLUE:"top_menu_selection"===t.focused_part&&0==t.top_menu_selection||this.hoverTopMenu(0);break;case tvKey.RED:"top_menu_selection"===t.focused_part&&1==t.top_menu_selection||this.hoverTopMenu(1);break;case tvKey.GREEN:return void this.toggleRearrangeMode(!0);default:console.log("No matching")}}},setting_page={player:null,keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".setting-menu-item-wrapper"),initiated:!1,hide_category_doms:[],theme_modal_options:[],hide_category_movie_type:"",language_doms:[],init:function(){var e=this.keys;e.focused_part="menu_selection",e.menu_selection=0,$(this.menu_doms).removeClass("active"),$(this.menu_doms[0]).addClass("active"),current_route="setting-page",$("#setting-page").removeClass("hide")},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$("#setting-page").addClass("hide"),home_page.reEnter();break;case"hide_category_modal":$("#hide-category-modal").modal("hide"),e.focused_part="menu_selection";break;case"theme_modal":$("#theme-modal").modal("hide"),e.focused_part="menu_selection"}},showHideCategoryModal:function(e){this.hide_category_movie_type=e,$("#settings-modal").modal("hide"),"live"===e&&(t=LiveModel.getCategories(!0,!1)),"movie"!==e&&"vod"!==e||(t=VodModel.getCategories(!0,!1)),"series"===e&&(t=SeriesModel.getCategories(!0,!1));var t,i="",e=(t.map(function(e,t){i+='<div class="hide-category-modal-option"   onclick="setting_page.clickHideCategory('+t+')"   onmouseenter="setting_page.hoverHideCategory('+t+')">   <input class="hide-category-checkbox" type="checkbox" name="checkbox"       id="hide-category-item-'+e.category_id+'" '+(e.is_hide?"":"checked")+' value="'+e.category_id+'">   <label for="hide-category-item-dfafdd'+e.category_id+'">'+e.category_name+"</label></div>"}),$("#hide-modal-categories-container").html(i),$("#hide-category-modal").modal("show"),$($(".hide-category-modal-option")).removeClass("active"),$($(".hide-category-modal-option")[0]).addClass("active"),$($(".hide-category-btn-wrapper")).removeClass("active"),$(".hide-category-modal-option"));this.hide_category_doms=e,this.keys.focused_part="hide_category_modal",this.keys.hide_category_modal=0,$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[0]).addClass("active"),$("#hide-modal-categories-container").scrollTop(0)},clickHideCategory:function(e){var t=this.hide_category_doms[e],i=!$($(t).find("input")[0]).prop("checked");$($(t).find("input")[0]).prop("checked",i),("live"===this.hide_category_movie_type?LiveModel:"movie"===this.hide_category_movie_type||"vod"===this.hide_category_movie_type?VodModel:SeriesModel).saveHiddenCategories(e,!i)},confirmParentPassword:function(){$("#parent-confirm-password-error").hide();var e=$("#parent-confirm-password").val();parent_account_password===e?($("#parent-confirm-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,this.showCategoryContent()):$("#parent-confirm-password-error").text("Password does not match").show()},cancelParentPassword:function(){$("#parent-confirm-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},hoverHideCategory:function(e){var t=this.keys;t.hide_category_modal=e<0?this.hide_category_doms.length+e:e,$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[t.hide_category_modal]).addClass("active"),moveScrollPosition($("#hide-modal-categories-container"),this.hide_category_doms[t.hide_category_modal],"vertical",!1)},hoverSettingMenu:function(e){this.keys.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":switch(e.menu_selection){case 0:this.showParentControlModal();break;case 1:this.showHideCategoryModal("live");break;case 2:this.showHideCategoryModal("movie");break;case 3:this.showHideCategoryModal("series");break;case 4:this.showUserAccounts();break;case 5:this.showLanguages()}break;case"hide_category_modal":$(this.hide_category_doms[e.hide_category_modal]).trigger("click");break;case"theme_modal":$(this.theme_modal_options[e.theme_modal]).trigger("click")}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":var i=t.menu_selection;if(t.menu_selection+=4*e,t.menu_selection>=this.menu_doms.length){if(3<i)return void(t.menu_selection=i);t.menu_selection=this.menu_doms.length-1}t.menu_selection<0?t.menu_selection=i:this.hoverSettingMenu(t.menu_selection);break;case"hide_category_modal":t.hide_category_modal+=e,t.hide_category_modal<0&&(t.hide_category_modal=0),t.hide_category_modal>=this.hide_category_doms.length&&(t.hide_category_modal=this.hide_category_doms.length-1),$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[t.hide_category_modal]).addClass("active"),t.hide_category_modal<this.hide_category_doms.length-3&&moveScrollPosition($("#hide-modal-categories-container"),this.hide_category_doms[t.hide_category_modal],"vertical");break;case"theme_modal":i=this.theme_modal_options;t.theme_modal+=e,t.theme_modal<0&&(t.theme_modal=i.length-1),t.theme_modal>=i.length&&(t.theme_modal=0),$(i).removeClass("active"),$(i[t.theme_modal]).addClass("active"),moveScrollPosition($("#theme-modal-body"),this.theme_modal_options[index],"vertical",!1)}},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverSettingMenu(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},turn_off_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#turn-off-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="turn-off-page",this.hoverMenuItem(0),$("#turn-off-modal").modal("show")},goBack:function(){$("#turn-off-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close();break;case 1:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},parent_confirm_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".parent-confirm-item"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="parent-confirm-page",$(this.menu_doms[0]).find("input").val(""),this.hoverMenuItem(0),$("#parent-confirm-password-error").hide(),$("#parent-confirm-modal").modal("show")},goBack:function(){$("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"vod-summary-page"!==this.prev_route&&"series-summary-page"!==this.prev_route||(current_route="vod-series-page")},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:$(this.menu_doms[0]).find("input").val(""),$(this.menu_doms[0]).find("input").focus();break;case 1:var t=$(this.menu_doms[0]).find("input").val();if($("#parent-confirm-password-error").hide(),t!=parent_account_password)$("#parent-confirm-password-error").slideDown();else if($("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"channel-page"===this.prev_route)channel_page.showCategoryChannels();else if("vod-series-page"===this.prev_route)vod_series_page.showCategoryContent();else if("home-page"===this.prev_route){var t=$(home_page.menu_doms[home_page.keys.menu_selection]).closest(".home-section-item-wrapper").data("kind"),i=("channel"===t?i=home_page.channel_categories:"vod"===t?i=home_page.vod_categories:"series"===t&&(i=home_page.series_categories),i[home_page.keys.v_keys[home_page.keys.menu_selection]]);"channel"===t?channel_page.init(i,null,"home-page"):vod_series_page.init(t,i);break}break;case 2:this.goBack()}},handleMenusUpDown:function(e){var t=this.keys;1<=t.menu_selection&&0<e||(1<=t.menu_selection&&e<0?t.menu_selection=0:0==t.menu_selection&&0<e&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&1<=t.menu_selection&&(t.menu_selection+=e,t.menu_selection<1&&(t.menu_selection=0),2<t.menu_selection&&(t.menu_selection=2),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},activation_page={keys:{focused_part:"input_selection",input_selection:0,btn_selection:0},prev_route:"",buttons:$(".activation-btn"),activation_input:$("#activation-input")[0],is_loading:!1,tried_panel_indexes:[],is_extended:!1,init:function(e){this.is_extended=!1,this.prev_route=e,$("#activation-modal").modal("show"),$(this.activation_input).val(""),current_route="activation-page",this.hoverInput(),this.tried_panel_indexes=[],$("#activation-code-message").hide()},goBack:function(){$("#activation-modal").modal("hide"),current_route=this.prev_route,"playlist-page"===this.prev_route?2==is_trial&&(playlist_page.hoverPlayListItem(playlist_page.keys.playlist_selection),$("#activation-code-container").hide()):"login"===this.prev_route&&this.is_extended&&login_page.login()},showErrorMessage:function(e){$("#activation-code-message").text(e).slideDown(),setTimeout(function(){$("#activation-code-message").slideUp()},4e3)},confirmActivationCode:function(){$("#activation-code-message").hide();var i,e,t,s,a=$(this.activation_input).val();a?(showLoader(this.is_loading=!0),e=(s=pickPanelUrl((i=this).tried_panel_indexes))[1],t=s[0],s=encryptRequest({mac_address:mac_address,code:a}),$.ajax({method:"post",url:e+"/check-activation-code",data:{data:s},success:function(e){var t;i.is_loading&&(showLoader(i.is_loading=!1),"success"===(e=decryptResponse(e)).status?(expire_date=e.expire_date,$(".expire-date").text(expire_date),i.is_extended=!0,saveData("is_trial",e.is_trial),t=localStorage.getItem(storage_id+"api_data"),(t=JSON.parse(t)).is_trial=e.is_trial,t.expire_date=e.expire_date,localStorage.setItem(storage_id+"api_data",JSON.stringify(t)),i.goBack()):i.showErrorMessage(e.msg))},error:function(){i.tried_panel_indexes.length<panel_urls.length?(i.tried_panel_indexes.push(t),i.confirmActivationCode()):(showLoader(i.is_loading=!1),i.showErrorMessage("Sorry, Code is not valid"))}})):this.showErrorMessage("Sorry, activation code is required")},hoverInput:function(){$(this.buttons).removeClass("active"),$(this.activation_input).addClass("active"),this.keys.focused_part="input_selection"},hoverBtn:function(e){var t=this.keys;t.btn_selection=e,t.focused_part="btn_selection",$(this.activation_input).removeClass("active"),$(this.buttons).removeClass("active"),$(this.buttons[e]).addClass("active")},handleMenuLeftRight:function(e){var t=this.keys;"btn_selection"===t.focused_part&&(t.btn_selection=0<e?1:0,this.hoverBtn(t.btn_selection))},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"input_selection":0<e&&($(this.activation_input).blur(),this.hoverBtn(t.btn_selection));break;case"btn_selection":e<0&&this.hoverInput()}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"input_selection":$(this.activation_input).focus(),setSelectionRange(this.activation_input);break;case"btn_selection":0==e.btn_selection?this.confirmActivationCode():this.goBack()}},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},hide_category_page={player:null,keys:{focused_part:"hide_category_selection",action_selection:0,hide_category_selection:0},action_doms:$(".hide-category-action-btn"),hide_category_doms:[],stream_type:"",categories:[],prev_focus_dom:null,action_changed:!1,init:function(e){this.action_changed=!1,this.stream_type=e,this.keys.action_selection=0,current_route="hide-category-page",$("#settings-modal").modal("hide"),$("#hide-category-categories-wrapper").html(""),console.log(e),"live"===e&&(t=LiveModel.getCategories(!0,!1)),"movie"!==e&&"vod"!==e||(t=VodModel.getCategories(!0,!1)),"series"===e&&(t=SeriesModel.getCategories(!0,!1));var t,i="",e=(t.map(function(e,t){i+='<div class="hide-category-modal-option"   onclick="hide_category_page.clickHideCategory('+t+')"   onmouseenter="hide_category_page.hoverHideCategory('+t+')">   <input class="hide-category-checkbox" type="checkbox" name="hide_category"       id="hide-category-item-'+e.category_id+'" '+(e.is_hide?"":"checked")+' value="'+e.category_id+'">   <label for="hide-category-item-dfafdd'+e.category_id+'">'+e.category_name+"</label></div>"}),$("#hide-category-categories-wrapper").html(i),$(".hide-category-modal-option"));this.hide_category_doms=e,this.hoverHideCategory(0),$("#hide-category-page").removeClass("hide")},goBack:function(){switch(this.keys.focused_part){case"hide_category_selection":case"action_selection":$("#hide-category-page").addClass("hide"),$("#home-page").removeClass("hide"),current_route="home-page",this.action_changed&&home_page.updateByCategoryHidden(this.stream_type)}},clickHideCategory:function(e){var e=this.hide_category_doms[e],t=!$($(e).find("input")[0]).prop("checked");$($(e).find("input")[0]).prop("checked",t)},selectAll:function(){$(".hide-category-modal-option input").prop("checked",!0)},saveHiddenCategories:function(){var e=$("input[name='hide_category']:not(:checked)"),i=[];switch(e.map(function(e,t){i.push($(t).val())}),this.stream_type){case"live":LiveModel.saveHiddenCategories(i);break;case"vod":VodModel.saveHiddenCategories(i);break;case"series":SeriesModel.saveHiddenCategories(i)}this.action_changed=!0,this.goBack()},cancel:function(){this.goBack()},hoverHideCategory:function(e){var t=this.keys;t.hide_category_selection=e<0?this.hide_category_doms.length+e:e,t.focused_part="hide_category_selection",$(this.prev_focus_dom).removeClass("active"),$(this.hide_category_doms[t.hide_category_selection]).addClass("active"),this.prev_focus_dom=this.hide_category_doms[t.hide_category_selection],moveScrollPosition($("#hide-category-categories-wrapper"),this.hide_category_doms[t.hide_category_selection],"vertical",!1)},hoverActionBtn:function(e){var t=this.keys;t.focused_part="action_selection",t.action_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.action_doms[e]).addClass("active"),this.prev_focus_dom=this.action_doms[e]},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"hide_category_selection":$(this.hide_category_doms[e.hide_category_selection]).trigger("click");break;case"action_selection":$(this.action_doms[e.action_selection]).trigger("click")}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"hide_category_selection":t.hide_category_selection+=e,t.hide_category_selection<0&&(t.hide_category_selection=0),t.hide_category_selection>=this.hide_category_doms.length&&(t.hide_category_selection=this.hide_category_doms.length-1),this.hoverHideCategory(t.hide_category_selection);break;case"action_selection":t.action_selection+=e,t.action_selection<0&&(t.action_selection=0),t.action_selection>=this.action_doms.length&&(t.action_selection=this.action_doms.length-1),this.hoverActionBtn(t.action_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"hide_category_selection":0<e&&this.hoverActionBtn(t.action_selection);break;case"action_selection":e<0&&this.hoverHideCategory(t.hide_category_selection)}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},catchup_page={keys:{focused_part:"category_selection",category_search_selection:0,channel_search_selection:0,category_selection:0,channel_selection:0},category_doms:[],channel_doms:[],category_search_dom:$("#catchup-page-category-search-bar"),channel_search_dom:$("#catchup-page-channel-search-bar"),all_categories:[],categories:[],movies:[],all_movies:[],prev_focus_dom:null,prev_keyword:"",prev_category_keyword:"",search_timer:null,is_loading:!1,category_shown:!1,init:function(){var e;this.is_loading=!1,this.category_shown=!1,"xtreme"===settings.playlist_type&&($("#catchup-page-category-items-container").html(""),$("#catchup-page").addClass("category-expanded"),this.prev_category_keyword="",$("#catchup-page-category-search-input").val(""),e=LiveModel.getCategories(!1,!1),this.all_categories=e.map(function(e){var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));return e.movies=t,e}).filter(function(e){return 0<e.movies.length}),this.categories=this.all_categories.filter(function(e){return!0}),0<this.all_categories.length)?($("#home-page").addClass("hide"),$("#catchup-page").removeClass("hide"),this.renderCategories(),current_route="catchup-page",this.hoverCategory(0),this.showCategoryChannels()):showToast(current_words.sorry||"Sorry",current_words.no_catchup_available||"No catch up available for current playlist")},goBack:function(){var e=this.keys;switch(e.focused_part){case"channel_search_selection":if(show_keyboard)break;case"channel_selection":$("#catchup-page").addClass("category-expanded"),this.category_shown=!0,this.hoverCategory(e.category_selection);break;default:$("#catchup-page").addClass("hide"),$("#home-page").removeClass("hide"),current_route="home-page"}},renderCategories:function(){var i="";this.categories.map(function(e,t){i+='<div class="catchup-page-category-item-container">                    <div class="catchup-page-category-item"                        onmouseenter="catchup_page.hoverCategory('+t+')"                        onclick="catchup_page.handleMenuClick()"                        data-index="'+t+'"                    >                        <span class="catchup-category-name-wrapper">'+e.category_name+'</span>                        <span class="catchup-category-stream-count-container">                            <span class="catchup-category-stream-count">'+e.movies.length+'</span>                            <span class="catchup-category-count-icon">                                <img src="'+HOST+'app_src_min/images/forward_arrow.png">                            </span>                        </span>                    </div>                </div>'}),$("#catchup-page-category-items-container").html(i),this.category_doms=$(".catchup-page-category-item"),this.keys.category_selection=0},showCategoryChannels:function(){var e,t=this.keys;t.category_selection!==this.current_category_index&&(this.prev_keyword="",$("#catchup-page-channel-search-input").val(""),e=this.categories[t.category_selection],$("#catchup-category-title").text(e.category_name),e=e.movies,this.all_movies=e,this.movies=e.filter(function(e){return!0}),this.renderCategoryChannels(),t.channel_selection=0,this.current_category_index=t.category_selection)},renderCategoryChannels:function(){var i="";this.movies.map(function(e,t){i+='<div class="catchup-channel-menu-item-container">                    <div class="catchup-channel-menu-item" data-channel_id="'+e.stream_id+'"                       data-index="'+t+'"                       onmouseenter="catchup_page.hoverChannel(this)"                       onclick="catchup_page.handleMenuClick()"                    >                        <span class="catchup-channel-number">'+e.num+'</span>                        <span class="catchup-channel-icon-wrapper"><img class="catchup-channel-icon" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></span>                        <span class="catchup-channel-name">'+e.name+"</span>                    </div>                </div>"}),$("#catchup-page-channel-items-container").html(i),this.channel_doms=$("#catchup-page-channel-items-container .catchup-channel-menu-item")},getEpgProgrammes:function(){var t,i,e=this.movies[this.keys.channel_selection];this.epg_channel_id!==e.stream_id&&(i=[],(t=this).programmes=[],t.showNextProgrammes(),this.epg_channel_id=e.stream_id,"xtreme"===settings.playlist_type)&&$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+e.stream_id,success:function(e){e.epg_listings.map(function(e){i.push({start:e.start,stop:e.end,title:e.title,description:e.description})}),t.programmes=i,t.updateNextProgrammes()}})},channelKeywordChange:function(){clearTimeout(this.search_timer);var s=this;this.search_timer=setTimeout(function(){var e,t,i=$("#catchup-page-channel-search-input").val();s.prev_keyword!==i&&((e=s.all_movies).sort(function(e,t){return e.name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.name.toLowerCase().includes(i)})),s.movies=t,s.prev_keyword=i,s.renderCategoryChannels())},400)},categoryKeywordChange:function(){clearTimeout(this.search_timer);var s=this;this.search_timer=setTimeout(function(){var e,t,i=$("#catchup-page-category-search-input").val();s.prev_category_keyword!==i&&((e=s.all_categories).sort(function(e,t){return e.category_name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.category_name.toLowerCase().includes(i)})),s.categories=t,s.prev_category_keyword=i,s.renderCategories())},400)},hoverCategorySearchBar:function(){this.keys.focused_part="category_search_selection",$(this.prev_focus_dom).removeClass("active"),$(this.category_search_dom).addClass("active"),this.prev_focus_dom=this.category_search_dom,$("#catchup-page").addClass("category-expanded"),this.category_shown=!0},hoverChannelSearchBar:function(){this.keys.focused_part="channel_search_selection",$(this.prev_focus_dom).removeClass("active"),$(this.channel_search_dom).addClass("active"),this.prev_focus_dom=this.channel_search_dom,$("#catchup-page").removeClass("category-expanded"),this.category_shown=!1},hoverCategory:function(e){var t=this.keys;t.focused_part="category_selection",t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#catchup-page-category-items-container"),this.category_doms[t.category_selection],"vertical",!1)},hoverChannel:function(e){var t=this.keys;t.focused_part="channel_selection",t.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[t.channel_selection]).addClass("active"),this.prev_focus_dom=this.channel_doms[t.channel_selection],moveScrollPosition($("#catchup-page-channel-items-container"),this.channel_doms[t.channel_selection],"vertical",!1)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":checkForAdult(this.categories[e.category_selection],"category",[])?parent_confirm_page.init(current_route):(this.showCategoryChannels(),$("#catchup-page").removeClass("category-expanded"),this.category_shown=!1,this.hoverChannel(0));break;case"channel_selection":epg_page.init(this.movies[e.channel_selection]);break;case"channel_search_selection":show_keyboard?$("#catchup-page-channel-search-input").blur():($("#catchup-page-channel-search-input").focus(),setSelectionRange($("#catchup-page-channel-search-input")));break;case"category_search_selection":show_keyboard?$("#catchup-page-category-search-input").blur():($("#catchup-page-category-search-input").focus(),setSelectionRange($("#catchup-page-category-search-input")))}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":t.category_selection<2&&e<0?this.hoverCategorySearchBar():checkVerticalMovable(this.category_doms.length,2,t.category_selection,e)&&(t.category_selection+=2*e,t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(t.category_selection));break;case"channel_selection":t.channel_selection<2&&e<0?this.hoverChannelSearchBar():checkVerticalMovable(this.channel_doms.length,2,t.channel_selection,e)&&(t.channel_selection+=2*e,t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),t.channel_selection<0&&(t.channel_selection=0),this.hoverChannel(t.channel_selection));break;case"category_search_selection":show_keyboard||0<e&&0<this.category_doms.length&&this.hoverCategory(0);break;case"channel_search_selection":show_keyboard||0<e&&0<this.channel_doms.length&&this.hoverChannel(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":t.category_selection+=e,t.category_selection<0&&(t.category_selection=0),t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(t.category_selection);break;case"channel_selection":t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this.hoverChannel(t.channel_selection);break;case"category_search_selection":show_keyboard||0<e&&0<this.channel_doms.length&&this.hoverChannelSearchBar();break;case"channel_search_selection":e<0&&this.hoverCategorySearchBar()}},HandleKey:function(e){if(!this.is_loading){this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}},epg_page={keys:{focused_part:"date_selection",date_selection:0,programme_selection:0},movie:{},sorted_programmes:[],date_doms:[],programme_doms:[],current_programmes:[],is_loading:!1,channel_id:"",init:function(c){showLoader(!0),this.is_loading=!0,this.movie=c;var l=this,d=this.keys;current_route="catch-up-detail",d.focused_part="date_selection",$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+c.stream_id,success:function(e){for(var i,t=[],s=e.epg_listings,a="Y-MM-DD HH:mm",o=(12==settings.time_format&&(a="Y-MM-DD hh:mm A"),moment().subtract(c.tv_archive_duration,"days").unix(),0);o<s.length;o++){var n=s[o],r=getLocalChannelTime(n.start);r.unix();0!=n.has_archive&&t.push({start:r.format(a),stop:getLocalChannelTime(n.end).format(a),title:n.title,has_archive:n.has_archive})}l.sorted_programmes=l.sortProgrammesByDate(t),0==t.length||0==Object.keys(l.sorted_programmes).length?(showLoader(!1),l.is_loading=!1,showToast(current_words.sorry||"Sorry",current_words.no_epg_avaliable||"No Epg Available"),l.goBack()):($("#catchup-page").addClass("hide"),$("#catchup-detail-page").removeClass("hide"),i="",l.sorted_programmes.map(function(e,t){i+='<div class="epg-date-item-container"                            onmouseenter="epg_page.selectDate('+t+',true,false)"                            onclick="epg_page.handleMenuClick()"                        >                            <div class="epg-date-item-date">'+e.day_string+"</div>                        </div>"}),$("#epg-dates-wrapper").html(i),l.date_doms=$(".epg-date-item-container"),d.focused_part="programme_selection",d.date_selection=l.sorted_programmes.length-1,$(l.date_doms[d.date_selection]).addClass("active"),l.selectDate(d.date_selection,!1,!0),d.programme_selection=l.sorted_programmes[d.date_selection].programmes.length-1,setTimeout(function(){l.hoverProgramme(d.programme_selection),showLoader(!1),l.is_loading=!1},200))},error:function(){showLoader(!1),l.is_loading=!1,showToast(current_words.sorry||"Sorry",current_words.no_epg_avaliable||"No Epg Available"),l.goBack()}})},goBack:function(){var e=this.keys;switch(e.focused_part){case"date_selection":$("#catchup-detail-page").addClass("hide"),$("#catchup-page").removeClass("hide"),current_route="catchup-page";break;case"programme_selection":this.selectDate(e.date_selection,!0,!1)}},sortProgrammesByDate:function(e){for(var t={},i=moment().format("Y-MM-DD HH:mm:ss"),s=0;s<e.length;s++){var a=e[s];if(a.start>=i||a.stop>=i)break;var o,n=a.start,r=n.substr(0,10);void 0!==t[r]?t[r].programmes.push(a):(o=(n=moment(n,"Y-MM-DD HH:mm:ss")).format("DD MMM YYYY"),n=n.format("YYYY-MM-DD"),t[r]={day_string:o,date_string:n,programmes:[a]})}var c=[];return Object.keys(t).map(function(e){c.push(t[e])}),c},selectDate:function(e,t,i){var s=this.keys,a=(s.date_selection=e,"");this.current_programmes=this.sorted_programmes[e].programmes,this.sorted_programmes[e].programmes.map(function(e,t){a+='<div class="epg-programme-item-container">                    <div class="epg-programme-item-wrapper"                        onmouseenter="epg_page.hoverProgramme('+t+')"                        onclick="epg_page.handleMenuClick()"                    >                        <div class="epg-programme-title">'+getAtob(e.title)+'</div>                        <div class="epg-time-icon-container">                            <span class="epg-programme-time">'+e.start.substr(11)+"-"+e.stop.substr(11)+"</span>                      </div>                   </div>                </div>"}),$("#epg-programmes-container").html(a),$("#epg-programmes-container").scrollLeft(0),i||(s.programme_selection=0),this.programme_doms=$(".epg-programme-item-wrapper "),$(this.date_doms).removeClass("active"),$(this.programme_doms).removeClass("active"),$(this.date_doms[e]).addClass("active"),t?(s.focused_part="date_selection",i||moveScrollPosition($("#epg-programmes-container"),$(this.programme_doms[0]).closest(".epg-programme-item-container"),"vertical",!1)):i||this.hoverProgramme(0),moveScrollPosition($("#epg-dates-wrapper"),this.date_doms[e],"horizontal",!1)},hoverProgramme:function(e){var t=this.keys;t.programme_selection=e,t.focused_part="programme_selection",$(this.date_doms).removeClass("active"),$(this.programme_doms).removeClass("active"),$(this.programme_doms[e]).addClass("active"),moveScrollPosition($("#epg-programmes-container"),$(this.programme_doms[e]).closest(".epg-programme-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;"programme_selection"===e.focused_part&&(e=this.sorted_programmes[e.date_selection].programmes[e.programme_selection],$("#catchup-detail-page").addClass("hide"),vod_series_player.init(e,"epg","catch-up-detail","",!0))},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"programme_selection":t.programme_selection+=e,t.programme_selection<0?(t.programme_selection=0,this.selectDate(t.date_selection,!0,!1)):(t.programme_selection>=this.current_programmes.length&&(t.programme_selection=this.current_programmes.length-1),this.hoverProgramme(t.programme_selection));break;case"date_selection":0<e&&0<this.programme_doms.length&&this.hoverProgramme(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"date_selection":case"programme_selection":t.date_selection+=e,t.date_selection<0&&(t.date_selection=0),t.date_selection>=this.sorted_programmes.length&&(t.date_selection=this.sorted_programmes.length-1),"date_selection"==t.focused_part?this.selectDate(t.date_selection,!0,!1):this.selectDate(t.date_selection,!1,!1)}},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RIGHT:epg_page.handleMenuLeftRight(1);break;case tvKey.LEFT:epg_page.handleMenuLeftRight(-1);break;case tvKey.DOWN:epg_page.handleMenusUpDown(1);break;case tvKey.UP:epg_page.handleMenusUpDown(-1);break;case tvKey.ENTER:epg_page.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_cache_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-cache-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="clear_cache_page",this.hoverMenuItem(0),$("#clear-cache-modal").modal("show")},goBack:function(){$("#clear-cache-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){$("#app").hide();try{media_player.close()}catch(e){}current_route="login-page",login_page.login()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 1:current_route="login-page",$("#clear-cache-modal").modal("hide");var t=[];Object.keys(localStorage).map(function(e){e.includes(storage_id)&&t.push(e)}),t.map(function(e){localStorage.removeItem(e)}),settings.resetDefaultValues(),this.reloadPage();break;case 0:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},search_page={keys:{top_menu_selection:0,movie_selection:0,focused_part:""},prev_dom:null,is_loading:!1,filtered_movies:[],render_counts:0,prev_keyword:"",search_timeout:null,prev_route:"",top_menu_doms:$(".search-page-top-menu"),movie_doms:[],render_count_increment:50,movie_type:"",categories:[],init:function(e,t){var i;this.prev_route=e,this.movie_type=t,e="vod"===this.movie_type?(i=VodModel.getCategories(!1,!1),current_words.movie_search||"Movie Search"):"series"===this.movie_type?(i=SeriesModel.getCategories(!1,!1),current_words.series_search||"Search Search"):(i=LiveModel.getCategories(!1,!1),current_words.channel_search||"Channel Search"),$("#search-page-title").text(e),this.categories=i,$("#home-page").addClass("hide"),$("#search-page-contents-wrapper").html(""),this.filtered_movies=[],this.prev_keyword="",$("#search-page-input").val(""),$("#search-page").show(),current_route="search-page",this.hoverTopMenu(0),this.handleMenuClick()},goBack:function(){switch(clearTimeout(this.search_timeout),$("#search-page-input").blur(),$("#search-page").hide(),current_route=this.prev_route,this.prev_route){case"home-page":home_page.reEnter("search-page");break;case"vod-series-page":$("#vod-series-page").removeClass("hide");break;case"channel-category-page":$("#channel-category-page").removeClass("hide")}},keywordChange:function(){clearTimeout(this.search_timeout);var i=this;this.search_timeout=setTimeout(function(){var e=i.prev_keyword,t=$("#search-page-input").val().toLowerCase();e!=t&&t&&(showLoader(!0),i.is_loading=!0,i.filtered_movies=i.getFilteredMovies(t),i.render_counts=0,i.movie_doms=[],$("#search-page-contents-wrapper").html(""),i.renderFilteredMovies(!1),i.prev_keyword=t,e=2e3,i.filtered_movies.length<50&&(e=500),setTimeout(function(){showLoader(!1),i.is_loading=!1},e))},400)},getFilteredMovies:function(t){var i=[];return this.categories.map(function(e){checkForAdult(e,"category",[])||"resume"===e.category_id||(e=e.movies.filter(function(e){return e.name.toLowerCase().includes(t)}),i=i.concat(e))}),i=i.slice(0,500)},renderFilteredMovies:function(e){var t,i,s,a,o,n,r,c,l,d,_=$("#search-page-contents-wrapper"),m=this.render_counts;m>=this.filtered_movies.length||(t=this.render_count_increment,e&&(showLoader(!0),this.is_loading=!0),s="",d=(i=this).movie_type,a=this.movie_type,o="stream_icon",r="stream_id",c=HOST+"app_src_min/images/logo.png","channel"==d?(c=HOST+"app_src_min/images/logo.png",n=LiveModel.favourite_ids):"vod"==d?(VodModel.saved_video_times,n=VodModel.favourite_ids):(o="cover",n=SeriesModel.favourite_ids,r="series_id"),d=1500,(l=this.filtered_movies.slice(m,m+t)).length<10&&(d=0),l.map(function(e,t){var i=n.includes(e[r]);s+='<div class="filtered-movie-container '+a+'">                    <div class="filtered-movie-wrapper"                        onmouseenter="search_page.hoverMovie('+(m+t)+')"                        onclick="search_page.handleMenuClick()"                     >'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'<div class="filtered-movie-img-wrapper">                            <img src="'+e[o]+'" onerror="this.src=\''+c+'\'">                        </div>                        <div class="filtered-movie-title-wrapper">                            <div class="filtered-movie-title">'+e.name+"</div>                         </div>                     </div>                </div>"}),this.render_counts+=t,$(_).append(s),this.movie_doms=$(_).find(".filtered-movie-wrapper"),e&&setTimeout(function(){showLoader(!1),i.is_loading=!1},d))},hoverTopMenu:function(e){var t;show_keyboard||((t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e])},hoverMovie:function(e){var t;show_keyboard||((t=this.keys).movie_selection=e,t.focused_part="movie_selection",t=$("#search-page-contents-wrapper"),$(this.prev_dom).removeClass("active"),$(this.movie_doms[e]).addClass("active"),this.prev_dom=this.movie_doms[e],moveScrollPosition(t,$(this.prev_dom).closest(".filtered-movie-container"),"vertical",!1))},handleMenuLeftRight:function(e){var t=this.keys;if(!show_keyboard)switch(t.focused_part){case"top_menu_selection":t.top_menu_selection=e<0?0:1,this.hoverTopMenu(t.top_menu_selection);break;case"movie_selection":var i=t.movie_selection+e;(i=i<0?0:i)>=this.movie_doms.length&&(i=this.movie_doms.length-1),this.hoverMovie(i),0<e&&i>=this.movie_doms.length-5&&this.renderFilteredMovies(!0)}},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"top_menu_selection":show_keyboard||e<0||0<this.filtered_movies.length&&(t.movie_selection>=this.movie_doms.length&&(t.movie_selection=this.movie_doms.length-1),6<t.movie_selection&&(t.movie_selection=6),this.hoverMovie(t.movie_selection));break;case"movie_selection":t.movie_selection<=6&&e<0?this.hoverTopMenu(0):checkVerticalMovable(this.movie_doms.length,7,t.movie_selection,e)?(t.movie_selection+=7*e,t.movie_selection>=this.movie_doms.length&&(t.movie_selection=this.movie_doms.length-1),this.hoverMovie(t.movie_selection),0<e&&t.movie_selection>=this.movie_doms.length-6&&this.renderFilteredMovies(!0)):t.movie_selection<this.filtered_movies.length-1&&this.renderFilteredMovies(!0)}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"top_menu_selection":0==e.top_menu_selection&&(show_keyboard?$("#search-page-input").blur():($("#search-page-input").focus(),setSelectionRange($("#search-page-input"))));break;case"movie_selection":var t=this.filtered_movies[e.movie_selection],i=($("#search-page").hide(),this.categories);switch(this.movie_type){case"channel":for(var s=0;s<i.length;s++)if(i[s].category_id==t.category_id){channel_page.init(i[s],t,"search-page");break}break;case"vod":current_movie=t,vod_summary_page.init("search-page");break;case"series":current_series=t,series_summary_page.init("search-page")}}},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},storage_page={keys:{focused_part:"menu_selection",menu_selection:0},video_files:[],image_files:[],dirs:[],current_level:0,current_path:"",parent_dir:null,menu_items:[],storages:[],video_index:0,image_index:0,init:function(){if(this.current_level=0,this.video_index=0,this.image_index=0,this.video_files=[],this.image_files=[],current_route="storage-page",this.current_path="root/",this.parent_dir=null,"samsung"===platform)if("develop"===storage_environment)this.storages=[{label:"internal0",state:"MOUNTED",type:"INTERNAL",isFile:!0},{label:"removable_sda",type:"EXTERNAL",state:"MOUNTED",isFile:!0},{label:"downloads",type:"INTERNAL",state:"MOUNTED"},{label:"documents",type:"INTERNAL",state:"MOUNTED"},{label:"videos",type:"INTERNAL",state:"MOUNTED"},{label:"music",type:"INTERNAL",state:"MOUNTED"},{label:"ringtones",type:"INTERNAL",state:"MOUNTED"}],this.initPage();else try{tizen.filesystem.listStorages(checkCorruptedRemovableDrives)}catch(e){console.log("storage operation issue",e)}},goBack:function(){var e=this.keys;"menu_selection"===e.focused_part&&(0==this.current_level?($("#storage-page").hide(),home_page.reEnter()):(e.menu_selection=0,this.handleMenuClick()))},initPage:function(){this.renderDirectories(),$("#home-page").addClass("hide"),$("#storage-page").show()},renderDirectories:function(){var o="",n=0,e=this.current_level,r=0==e?"label":"name";$("#storage-page-path-container").text(this.current_path),0<e&&(n=1,o='<div class="storage-page-menu-item-container">                    <div class="storage-page-menu-item-wrapper back" data-back="1"                        onmouseenter="storage_page.hoverMenuItem(0)"                        onclick="storage_page.handleMenuClick()"                     >                        <div class="storage-page-menu-item-img-wrapper">                            <img class="storage-page-menu-item-icon folder-icon" src="'+HOST+'app_src_min/images/folder_back.png">                        </div>                        <div class="storage-page-menu-item-title-wrapper">                            <div class="storage-page-menu-item-title">Upper Folder</div>                             <div class="storage-page-menu-item-time"></div>                        </div>                     </div>                </div>'),this.storages.map(function(e,t){var i,s=e.isFile?"file":"directory",a=HOST+"app_src_min/images/folder.png";"file"==s&&(i=getExt(e.name||e.label),a=image_file_exts.includes(i)?e.toURI():HOST+"app_src_min/images/video_icon.png"),e.created&&moment(e.created).format("DD.MMM.Y"),o+='<div class="storage-page-menu-item-container">                    <div class="storage-page-menu-item-wrapper '+s+'"                        onmouseenter="storage_page.hoverMenuItem('+(t+n)+')"                        onclick="storage_page.handleMenuClick()"                     >                        <div class="storage-page-menu-item-img-wrapper">                            <img class="storage-page-menu-item-icon" src="'+a+'">                        </div>                        <div class="storage-page-menu-item-title-wrapper">                            <div class="storage-page-menu-item-title max-line-2">'+e[r]+"</div>                         </div>                     </div>                </div>"}),$("#directories-wrapper").html(o),this.menu_items=$(".storage-page-menu-item-wrapper"),this.hoverMenuItem(0)},showSubDirectories:function(){var e=this.keys,t=$(this.menu_items[e.menu_selection]).data("back"),i=0==this.current_level?0:1,s=this.storages[e.menu_selection-i];1==t?(--this.current_level,this.current_path=0<this.current_level?this.parent_dir.path:this.parent_dir.label):s.isFile||(this.current_level+=1,this.parent_dir=s,this.current_path=s.fullPath),console.log(t,e.menu_selection,i,s,this.current_level),e=this.current_path,1==this.current_level&&(e=s.label),1!=t&&s.isFile?this.playVideo():"develop"===storage_environment?(this.storages=[{created:"Mon Feb 20 2023 02:41:03 GMT+0100 (CET)",fileSize:224609179,fullPath:"/opt/media/USBDriveA/System Volume Information",isDirectory:!0,isFile:!1,name:"System Volume Information",parent:{parent:null,readOnly:!1,isFile:!1,isDirectory:!0,fullPath:"/opt/media/USBDriveA/",name:"USBDriveA"},path:"/opt/media/USBDriveA/",readOnly:!1,modified:"Mon Feb 20 2023 02:41:04 GMT+0100 (CET)"},{fullPath:"/opt/media/USBDriveA/demo4.mp4",isDirectory:!1,isFile:!0,name:"demo4.mp4",fileSize:224609179,path:"/opt/media/USBDriveA/",parent:{parent:null,isFile:!1,isDirectory:!0}}],this.renderDirectories()):0<this.current_level?tizen.filesystem.resolve(e,onResolveSuccess,null,"r"):tizen.filesystem.listStorages(checkCorruptedRemovableDrives)},playVideo:function(){var e=this.keys,t=this.current_level,t=this.storages[e.menu_selection-(0==t?0:1)],i=getExt(t.name);if(video_file_exts.includes(i)){for(var s=0,a=0;a<this.video_files.length;a++)if((o=this.video_files[a]).index==e.menu_selection){s=o.video_index;break}this.video_index=s,vod_series_player.init(t,"storage","storage-page","")}else if(image_file_exts.includes(i)){for(var o,n=0,a=0;a<this.image_files.length;a++)if((o=this.image_files[a]).index==e.menu_selection){n=o.image_index;break}this.image_index=n,image_page.init(this.image_index)}},hoverMenuItem:function(e){var t=this.keys;$(this.menu_items).removeClass("active"),$(this.menu_items[e]).addClass("active"),t.menu_selection=e,t.focused_part="menu_selection",moveScrollPosition($("#directories-wrapper"),this.menu_items[e],"vertical",!1)},handleMenusUpDown:function(e){var t=this.keys;"menu_selection"===t.focused_part&&checkVerticalMovable(this.menu_items.length,5,t.menu_selection,e)&&(t.menu_selection+=5*e,t.menu_selection>=this.menu_items.length&&(t.menu_selection=this.menu_items.length-1),this.hoverMenuItem(t.menu_selection))},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_items.length&&(t.menu_selection=this.menu_items.length-1),this.hoverMenuItem(t.menu_selection))},handleMenuClick:function(){"menu_selection"===this.keys.focused_part&&this.showSubDirectories()},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},image_page={keys:{menu_selection:0,focused_part:""},init:function(e){var t=storage_page.image_files,i=(console.log(e,t),current_route="image-page","");t.map(function(e,t){e=e.file.toURI();i+='<li class="loaded"><a href="'+e+'"><img src="'+e+'" title=""></a></li>'}),$("#image-gallery").html(i),$("#image-gallery").photobox("a",{thumbs:!0,time:2e4,autoplay:!0,rotatable:!1},function(){console.log("callback for loaded content:")}),window._photobox.history.load,$($("#image-gallery").find("li a")[e]).trigger("click"),$("#storage-page").hide(),$("#image-page").show(),current_route="image-page"},goBack:function(){$("#image-gallery").photobox("destroy"),$("#image-page").hide(),$("#storage-page").show(),current_route="storage-page"},handleMenuLeftRight:function(e){this.keys.focused_part},handleMenuUpDown:function(e){this.keys.focused_part},handleMenuClick:function(){this.keys.focused_part},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},league_page={player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,category_hover_timer:null,category_hover_timeout:300,keys:{focused_part:"sport_selection",sport_selection:0,league_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,year_filter_selection:0,season_selection:0},sport_doms:[],league_doms:[],top_menu_doms:$("#league-page .top-menu"),current_movie_type:"movie",sort_key:"vod_sort",search_key_timer:"",search_key_timout:400,current_render_count:0,render_count_increment:100,is_drawing:!1,prev_keyword:"",prev_dom:null,sort_doms:$("#sort-modal-container .sort-modal-item"),year_initiated:!1,year_filter_doms:[],current_hover_id:"",hover_league_timer:null,hover_movie_timeout:300,sort_changed:!1,sports:[],leagues:[],total_leagues:[],all_leagues:[],is_api_loading:!1,seasons:[],season_doms:[],init:function(){var t;this.initiated?($("#home-page").addClass("hide"),$("#league-page").removeClass("hide"),current_route="league-page"):(showLoader(!0),this.is_api_loading=!0,this.keys,t=this,$.ajax({method:"post",url:sport_api_url+"/get-league",success:function(e){e.sports&&0<e.sports.length&&e.leagues&&0<e.leagues.length?(t.sports=e.sports,t.total_leagues=e.leagues,showLoader(!1),t.is_api_loading=!1,$("#home-page").addClass("hide"),$("#league-page").removeClass("hide"),t.renderSports(),t.hoverSportItem(0),t.current_sport_index=-1,t.showSportLeagues(),current_route="league-page",t.initiated=!0):t.showErrorMessage()},error:function(){t.showErrorMessage()}}))},goBack:function(){var e=this.keys;switch(e.focused_part){case"top_menu_selection":$("#league-page-search-input").blur(),this.hoverSportItem(e.sport_selection);break;case"league_selection":this.hoverSportItem(e.sport_selection);break;case"season_selection":this.hoverLeagueItem(this.league_doms[e.league_selection]);break;default:$("#league-page-season-items-container").html(""),this.season_doms=[],$("#league-page").addClass("hide"),home_page.reEnter()}},renderSports:function(){var e=this.sports,i="";e.map(function(e,t){i+='<div class="sport-item-container">                    <div class="sport-item-wrapper"                        onmouseenter="league_page.hoverSportItem('+t+')"                         onclick="league_page.handleMenuClick()"                     >'+e.name+"</div>                </div>"}),$("#sport-items-container").html(i),this.sport_doms=$(".sport-item-wrapper")},showErrorMessage:function(){showLoader(this.is_api_loading=!1),showToast("Sorry","Currently have no data to show or has some error.")},showSportLeagues:function(){var t,e=this.keys;this.current_sport_index!==e.sport_selection&&($("#league-page-season-items-container").html(""),this.season_doms=[],t=this.sports[e.sport_selection],this.current_render_count=0,$("#league-items-container").html(""),this.prev_keyword="",$("#league-page-search-input").val(""),this.all_leagues=this.total_leagues.filter(function(e){return e.sport_id==t._id}),this.leagues=this.all_leagues,this.renderCategoryContent(),$("#league-items-container").scrollTop(0),e.league_selection=0,this.current_sport_index=e.sport_selection)},renderCategoryContent:function(){var i,s="",a=HOST+"app_src_min/images/movie-icon.png";this.current_render_count<this.leagues.length&&(showLoader(this.is_drawing=!0),i=this,setTimeout(function(){showLoader(i.is_drawing=!1)},1e3),this.leagues.slice(this.current_render_count,this.current_render_count+this.render_count_increment).map(function(e,t){s+='<div class="league-item-container"                    >                        <div class="league-item"                            data-index="'+(i.current_render_count+t)+'"                            onmouseenter="league_page.hoverLeagueItem(this)"                            onclick="league_page.handleMenuClick()"                        >                            <img class="league-icon" src="'+e.logo+'" onerror="this.src=\''+a+'\'">                            <div class="league-item-title">'+e.name+"</div>                        </div>                    </div>"}),this.current_render_count+=this.render_count_increment,$("#league-items-container").append(s),this.league_doms=$("#league-items-container .league-item"))},searchValueChange:function(){clearTimeout(this.search_key_timer);var s=this;this.search_key_timer=setTimeout(function(){var e,t,i=$("#league-page-search-input").val();s.prev_keyword!==i&&((e=s.all_leagues.filter(function(e){return!0})).sort(function(e,t){return e.name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.name.toLowerCase().includes(i)})),s.leagues=t,$("#league-items-container").html(""),s.current_render_count=0,s.renderCategoryContent(),s.prev_keyword=i)},this.search_key_timout)},renderSeasons:function(){var i="";this.seasons.map(function(e,t){i+='<div class="league-season-item-container">                    <div class="league-season-item-wrapper"                        onmouseenter="league_page.hoverSeason('+t+')"                        onclick="league_page.handleMenuClick()"                     >                        <div class="league-season-item-duration">'+e.start+" ~ "+e.end+"</div>                    </div>                </div>"}),$("#league-page-season-items-container").html(i),this.season_doms=$(".league-season-item-wrapper")},hoverSportItem:function(e){var t=this.keys;"object"==typeof e&&(e=$(e).data("index")),t.focused_part="sport_selection",t.sport_selection=e,$(this.prev_dom).removeClass("active"),$(this.sport_doms[e]).addClass("active"),this.prev_dom=this.sport_doms[e],$("#vod-series-left-part").removeClass("collapsed"),moveScrollPosition($("#sport-items-container"),this.sport_doms[e],"vertical",!1)},hoverLeagueItem:function(e){var e=$(e).data("index"),t=this.keys,i=(t.focused_part="league_selection",t.league_selection=e,$(this.prev_dom).removeClass("active"),$(this.league_doms[e]).addClass("active"),this.prev_dom=this.league_doms[e],clearTimeout(this.channel_hover_timer),$("#vod-series-left-part").addClass("collapsed"),moveScrollPosition($("#league-items-container"),this.league_doms[t.league_selection],"vertical",!1),$("#vod-series-current-movie-selection").text(e+1),clearTimeout(this.hover_league_timer),this.hover_league_timer=null,this),s=this.leagues[t.league_selection];this.current_hover_id!=s._id&&(this.current_hover_id=s._id,this.hover_league_timer=setTimeout(function(){i.seasons=s.seasons.sort(function(e,t){return-1*e.start.localeCompare(t.start)}),i.renderSeasons(),t.season_selection=0},this.hover_movie_timeout))},hoverSeason:function(e){var t=this.keys;t.focused_part="season_selection",t.season_selection=e,$(this.prev_dom).removeClass("active"),$(this.season_doms[e]).addClass("active"),this.prev_dom=this.season_doms[e],moveScrollPosition($("#league-page-season-items-container"),this.season_doms[e],"vertical",!1)},hoverTopMenu:function(e){var t=this.keys;t.top_menu_selection=e,t.focused_part="top_menu_selection",$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],$("#vod-series-left-part").addClass("collapsed")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"league_selection":this.current_movie_type;break;case"top_menu_selection":0==e.top_menu_selection&&(show_keyboard?$("#league-page-search-input").blur():($("#league-page-search-input").focus(),setSelectionRange($("#league-page-search-input")))),2==e.top_menu_selection&&this.showYearFilterModal(),1==e.top_menu_selection&&this.showSortModal();break;case"sport_selection":this.current_sport_index!=e.sport_selection&&this.showSportLeagues();break;case"sort_selection":this.current_sport_index=-1;var t=$(this.sort_doms[e.sort_selection]).data("sort_key");settings.saveSettings(this.current_movie_type+"_sort",t,""),this.changeSoryKeyTitle(t),this.showSportLeagues(),this.goBack();break;case"season_selection":sport_season_page.init(this.leagues[e.league_selection],this.seasons[e.season_selection])}},handleMenusUpDown:function(e){var t=this.keys,i=this.league_doms;switch(t.focused_part){case"league_selection":var s=t.league_selection;t.league_selection+=e,t.league_selection>=i.length&&(t.league_selection=i.length-1),t.league_selection<0?(t.league_selection=s,this.hoverTopMenu(0)):(t.league_selection>=this.current_render_count-7&&this.renderCategoryContent(),this.hoverLeagueItem(this.league_doms[t.league_selection]));break;case"sport_selection":t.sport_selection+=e,t.sport_selection>this.sport_doms.length&&(t.sport_selection=this.sport_doms.length-1),t.sport_selection<0?(t.sport_selection=0,this.hoverTopMenu(0)):this.hoverSportItem(t.sport_selection);break;case"top_menu_selection":if(!show_keyboard&&0<e){if(0==this.leagues.length)return;this.hoverLeagueItem(this.league_doms[0])}break;case"season_selection":t.season_selection+=e,t.season_selection<0?(t.season_selection=0,this.hoverTopMenu(0)):(t.season_selection>=this.season_doms.length&&(t.season_selection=this.season_doms.length-1),this.hoverSeason(t.season_selection))}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"sport_selection":0<e&&0<this.leagues.length&&this.hoverLeagueItem(this.league_doms[t.league_selection]);break;case"league_selection":e<0?this.goBack():0<this.season_doms.length&&this.hoverSeason(t.season_selection);break;case"top_menu_selection":show_keyboard||(t.top_menu_selection+=e,t.top_menu_selection<0?this.hoverSportItem(t.sport_selection):(t.top_menu_selection>=this.top_menu_doms.length&&(t.top_menu_selection=this.top_menu_doms.length-1),this.hoverTopMenu(t.top_menu_selection)));break;case"season_selection":e<0&&this.hoverLeagueItem(this.league_doms[t.league_selection])}},HandleKey:function(e){this.keys;if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack();break;default:console.log("No matching")}}},sport_season_page={player:null,channel_num:0,movies:[],initiated:!1,category_hover_timer:null,category_hover_timeout:300,keys:{focused_part:"team_selection",team_selection:0,standing_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,year_filter_selection:0,season_selection:0,standing_v_selection:0,standing_h_selection:[]},team_doms:[],standing_doms:[],top_menu_doms:$("#sport-season-page .top-menu"),search_key_timer:"",search_key_timout:400,current_render_count:0,render_count_increment:100,is_drawing:!1,prev_keyword:"",prev_dom:null,sort_doms:$("#sort-modal-container .sort-modal-item"),year_initiated:!1,year_filter_doms:[],current_hover_id:"",hover_league_timer:null,hover_movie_timeout:300,sort_changed:!1,teams:[],stages:[],total_standings:[],all_standings:[],is_api_loading:!1,seasons:[],season_doms:[],stage_doms:[],init:function(e,t){this.stage_doms=[],$("#sport-season-league-name").text(e.name+" (Season "+t.start+" ~ "+t.end+")"),$("#sport-season-page").addClass("shown"),current_route="sport-season-page",showLoader(!0),this.is_api_loading=!0;var i,s=this.keys,a=(s.standing_selection=0,s.standing_h_selection=[],s.standing_v_selection=0,this),s=($.ajax({method:"post",url:sport_api_url+"/get-season-teams",data:{sport_id:e.sport_id,league_id:e.league_id,season_year:t.year},success:function(e){"success"==e.status?(e=e.data,a.teams=e.teams,showLoader(!1),a.is_api_loading=!1,a.renderteams(),current_route="sport-season-page",a.hoverSeasonTeamItem(0)):a.showErrorMessage()},error:function(){a.showErrorMessage()}}),t.standings);(s=void 0===s&&(i=moment().format("Y-MM-DD"),t.end<i)?!0:s)?$.ajax({method:"post",url:sport_api_url+"/get-season-standings",data:{sport_id:e.sport_id,league_id:e.league_id,season_year:t.year},success:function(e){"success"==e.status?(e=e.data,a.stages=e,a.renderStandings()):a.showEmptyStandings()},error:function(){a.showEmptyStandings()}}):this.showEmptyStandings()},goBack:function(){this.keys.focused_part,$("#sport-season-page").removeClass("shown"),$(this.prev_dom).removeClass("active"),$("#season-teams-container").html(""),$("#standing-items-container").html(""),this.standing_doms=[],this.standings=[],this.teams=[],current_route="league-page"},renderteams:function(){var e=this.teams,i="";e.map(function(e,t){i+='<div class="sport-season-team-container">                    <div class="sport-season-team-wrapper"                        onmouseenter="sport_season_page.hoverSeasonTeamItem('+t+')"                         onclick="sport_season_page.handleMenuClick()"                     >                        <div class="sport-season-team-logo-wrapper">                            <img class="sport-season-team-logo" src="'+e.logo+'">                        </div>                         <div class="sport-season-team-info-container">                            <div class="sport-season-team-name">'+e.name+'</div>                             <div class="sport-season-team-country">'+e.country+"</div>                         </div>                     </div>                </div>"}),$("#season-teams-container").html(i),this.team_doms=$(".sport-season-team-wrapper")},showEmptyStandings:function(){$("#standing-items-container").html('<div class="no-standing-available-msg">Sorry, no standings available for current season</div>'),this.standing_doms=[]},showErrorMessage:function(){showLoader(this.is_api_loading=!1),showToast("Sorry","Currently have no data to show or has some error.")},renderStandings:function(){var s="",t=this.keys,i=($("#standing-items-container").html(""),this.stages.map(function(e,i){s+='<div class="standing-stage-item-container">                    <div class="standing-stage-item-title">'+e.stage+'</div>                    <div class="standing-stage-items-wrapper">',e.standings.map(function(e,t){s+='<div class="standing-item-container"                    >                        <div class="standing-item-wrapper"                            data-index="'+t+'"                        onmouseenter="sport_season_page.hoverStandingItem('+i+","+t+')"                        onclick="sport_season_page.handleMenuClick"                    >                        <div class="standing-item-team-container">                            <div class="standing-item-rank">#'+e.rank+'</div>                            <div class="standing-item-team-logo-container">                                <img class="standing-item-team-logo" src="'+e.team.logo+'">                             </div>                             <div class="standing-item-team-name-container">                                <div class="standing-item-team-name">'+e.team.name+'</div>                             </div>                             <div class="standing-item-team-summary-container">                                <div class="standing-item-team-summary-item">                                    <div class="standing-item-team-summary-label">Points:</div>                                     <div class="standing-item-team-summary-value">'+e.points+'</div>                                 </div>                                 <div class="standing-item-team-summary-item">                                    <div class="standing-item-team-summary-label">Goals Diff:</div>                                     <div class="standing-item-team-summary-value">'+e.goalsDiff+'</div>                                 </div>                             </div>                         </div>                         <div class="standing-item-score-container">                            <div class="standing-item-score-detail-section">                                <div class="standing-item-score-detail-label">All</div>                                 <div class="standing-item-score-detail-items-container">                                    <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Played:</div>                                         <div class="standing-item-score-detail-item-value">'+e.all.played+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Win:</div>                                         <div class="standing-item-score-detail-item-value">'+e.all.win+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Draw:</div>                                         <div class="standing-item-score-detail-item-value">'+e.all.draw+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Lose:</div>                                         <div class="standing-item-score-detail-item-value">'+e.all.lose+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Goals For:</div>                                         <div class="standing-item-score-detail-item-value">'+e.all.goal_for+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Goals Against:</div>                                         <div class="standing-item-score-detail-item-value">'+e.all.goal_against+'</div>                                     </div>                                 </div>                             </div>                             <div class="standing-item-score-detail-section">                                <div class="standing-item-score-detail-label">Home</div>                                 <div class="standing-item-score-detail-items-container">                                    <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Played:</div>                                         <div class="standing-item-score-detail-item-value">'+e.home.played+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Win:</div>                                         <div class="standing-item-score-detail-item-value">'+e.home.win+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Draw:</div>                                         <div class="standing-item-score-detail-item-value">'+e.home.draw+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Lose:</div>                                         <div class="standing-item-score-detail-item-value">'+e.home.lose+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Goals For:</div>                                         <div class="standing-item-score-detail-item-value">'+e.home.goal_for+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Goals Against:</div>                                         <div class="standing-item-score-detail-item-value">'+e.home.goal_against+'</div>                                     </div>                                 </div>                             </div>                             <div class="standing-item-score-detail-section">                                <div class="standing-item-score-detail-label">Away</div>                                 <div class="standing-item-score-detail-items-container">                                    <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Played:</div>                                         <div class="standing-item-score-detail-item-value">'+e.away.played+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Win:</div>                                         <div class="standing-item-score-detail-item-value">'+e.away.win+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Draw:</div>                                         <div class="standing-item-score-detail-item-value">'+e.away.draw+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Lose:</div>                                         <div class="standing-item-score-detail-item-value">'+e.away.lose+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Goals For:</div>                                         <div class="standing-item-score-detail-item-value">'+e.away.goal_for+'</div>                                     </div>                                     <div class="standing-item-score-detail-item">                                        <div class="standing-item-score-detail-item-label">Goals Against:</div>                                         <div class="standing-item-score-detail-item-value">'+e.away.goal_against+"</div>                                     </div>                                 </div>                             </div>                         </div>                    </div>                </div>"}),s+="</div></div>",t.standing_h_selection.push(0)}),$("#standing-items-container").append(s),[]);$(".standing-stage-item-container").map(function(e,t){i.push($(t).find(".standing-item-wrapper"))}),this.stage_doms=$(".standing-stage-item-container"),this.standing_doms=i},renderSeasons:function(){var i="";this.seasons.map(function(e,t){i+='<div class="league-season-item-container">                    <div class="league-season-item-wrapper"                        onmouseenter="sport_season_page.hoverSeason('+t+')"                        onclick="sport_season_page.handleMenuClick()"                     >                        <div class="league-season-item-duration">'+e.start+" ~ "+e.end+"</div>                    </div>                </div>"}),$("#sport-season-page-season-items-container").html(i),this.season_doms=$(".league-season-item-wrapper")},showCurrentTeamRank:function(e,t){$(this.standing_doms[e][t]).addClass("current-team-rank");var i=this;setTimeout(function(){$(i.standing_doms[e][t]).removeClass("current-team-rank")},2e3)},hoverSeasonTeamItem:function(e){var t=this.keys;"object"==typeof e&&(e=$(e).data("index")),t.focused_part="team_selection",t.team_selection=e,$(this.prev_dom).removeClass("active"),$(this.team_doms[e]).addClass("active"),this.prev_dom=this.team_doms[e],moveScrollPosition($("#season-teams-container"),this.team_doms[e],"vertical",!1)},hoverStandingItem:function(e,t){var i=this.keys;i.focused_part="standing_selection",i.standing_v_selection=e,i.standing_h_selection[e]=t,$(this.prev_dom).removeClass("active"),$(this.standing_doms[e][t]).addClass("active"),this.prev_dom=this.standing_doms[e][t],moveScrollPosition($(this.stage_doms[e]).find(".standing-stage-items-wrapper")[0],this.standing_doms[e][t],"horizontal",!1),moveScrollPosition($("#standing-items-container"),this.stage_doms[e],"vertical",!1)},hoverTopMenu:function(e){var t=this.keys;t.top_menu_selection=e,t.focused_part="top_menu_selection",$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],$("#vod-series-left-part").addClass("collapsed")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"standing_selection":this.current_movie_type;break;case"team_selection":for(var t=this.teams[e.team_selection],i=this.stages,s=0;s<i.length;s++)for(var a=0;a<i[s].standings.length;a++)if(i[s].standings[a].team.team_id==t.team_id){this.showCurrentTeamRank(s,a),e.standing_h_selection[s]=a,moveScrollPosition($(this.stage_doms[s]).find(".standing-stage-items-wrapper")[0],this.standing_doms[s][a],"horizontal",!1),moveScrollPosition($("#standing-items-container"),this.stage_doms[s],"vertical",!1),console.log("here same",s,t,i[s].standings[a].team);break}}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"standing_selection":t.standing_v_selection+=e,t.standing_v_selection>=this.stage_doms.length?t.standing_v_selection=this.stage_doms.length-1:t.standing_v_selection<0?t.standing_v_selection=0:this.hoverStandingItem(t.standing_v_selection,t.standing_h_selection[t.standing_v_selection]);break;case"team_selection":checkVerticalMovable(this.team_doms.length,2,t.team_selection,e)&&(t.team_selection+=2*e,t.team_selection>=this.team_doms.length&&(t.team_selection=this.team_doms.length-1),t.team_selection<0&&(t.team_selection=0),this.hoverSeasonTeamItem(t.team_selection))}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"team_selection":t.team_selection%2==1&&0<this.standing_doms.length&&0<e?this.hoverStandingItem(t.standing_v_selection,t.standing_h_selection[t.standing_v_selection]):(t.team_selection+=e,t.team_selection<0&&(t.team_selection=0),t.team_selection>=this.team_doms.length&&(t.team_selection=this.team_doms.length-1),this.hoverSeasonTeamItem(t.team_selection));break;case"standing_selection":var i=t.standing_h_selection[t.standing_v_selection];(i+=e)<0&&e<0?this.hoverSeasonTeamItem(t.team_selection):(i>=this.standing_doms[t.standing_v_selection].length&&(i=this.standing_doms[t.standing_v_selection].length-1),console.log(i),this.hoverStandingItem(t.standing_v_selection,i))}},HandleKey:function(e){this.keys;if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack();break;default:console.log("No matching")}}},clear_recent_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-recent-modal button"),prev_route:"",movie:null,movie_kind:"",init:function(e,t){this.movie_kind=t,this.prev_route=e,current_route="clear_recent_page",this.hoverMenuItem(0),$("#clear-recent-modal").modal("show")},goBack:function(){$("#clear-recent-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 1:("vod"===this.movie_kind?VodModel:SeriesModel).removeAllWatchList(),this.goBack();break;case 0:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},playlist_edit_page={initiated:!1,keys:{focused_part:"playlist_edit_selection",playlist_edit_selection:0},playlist_edit_doms:$(".playlist-edit-item"),playlist_type:"general",back_btn_dom:null,playlist:null,is_loading:!1,tried_panel_indexes:[],prev_route:"",init:function(e){this.prev_route=e,this.tried_panel_indexes=[],this.playlist=null,$("#playlists-page").addClass("hide"),$("#playlist-edit-page").removeClass("hide"),$("#playlist-edit-error-message").hide();$(this.playlist_edit_doms[0]).val(""),$(this.playlist_edit_doms[1]).val(""),$(this.playlist_edit_doms[2]).val(""),$(this.playlist_edit_doms[3]).val(""),this.hoverPlaylistEditItem(0),current_route="playlist-edit-page"},savePlaylist:function(){var e,t,i=$(this.playlist_edit_doms[0]).val(),s=$(this.playlist_edit_doms[1]).val(),a=$(this.playlist_edit_doms[2]).val(),o=$(this.playlist_edit_doms[3]).val();i?s?a?o?($("#playlist-edit-error-message").slideUp(),showLoader(!0),this.is_loading=!0,moment().unix(),e=s+"/player_api.php?username="+a+"&password="+o,t=this,$.ajax({method:"get",url:e,success:function(e){!e||!e.user_info||0==(e=e.user_info).auth||e.status&&("Expired"===e.status||"Banned"===e.status)?t.showPlaylistErrorMessage():(e={url:s+="/get.php?username="+a+"&password="+o+"&type=m3u&output=hls",mac_address:mac_address,app_type:platform,playlist_name:i},t.updatePlaylistWithServer(e))},error:function(){t.showPlaylistErrorMessage()}})):$("#playlist-edit-error-message").text("Sorry, password is required").slideDown():$("#playlist-edit-error-message").text("Sorry, username is required").slideDown():$("#playlist-edit-error-message").text("Sorry, playlist url is required").slideDown():$("#playlist-edit-error-message").text("Sorry, playlist name is required").slideDown()},showPlaylistErrorMessage:function(){showLoader(!1),this.is_loading=!1,$("#playlist-edit-error-message").html("Sorry, Your playlist is not working<br>Please check your playlist and try again").slideDown()},updatePlaylistWithServer:function(t){var e=pickPanelUrl(this.tried_panel_indexes),i=e[1],s=e[0],a=this;$.ajax({method:"post",url:i+"/add_playlist",data:t,success:function(e){a.tried_panel_indexes=[],t.id=e.id,a.playListSaved(t)},error:function(){a.tried_panel_indexes.push(s),a.tried_panel_indexes.length<panel_urls.length?a.updatePlaylistWithServer(t):(t.id=(new Date).getTime(),a.playListSaved(t))}})},playListSaved:function(e){playlist_urls.push(e),saveData("playlist_urls",playlist_urls),showLoader(!1),this.is_loading=!1;var t=playlist_urls.length-1,t='<div class="playlist-item-container"               onmouseenter="playlist_page.hoverPlayListItem('+t+')"               onclick="playlist_page.changePlaylist('+t+')"            >                <div class="playlist-item-wrapper">                   <span class="playlist-name">'+e.playlist_name+'</span><div class="playlist-state"><i class="fa fa-play"></i></div></div>            </div>';$("#playlist-items-container").append(t),playlist_page.playlist_doms=$(".playlist-item-container"),this.goBack()},hoverPlaylistEditItem:function(e){var t=this.keys;t.focused_part="playlist_edit_selection",t.playlist_edit_selection=e,current_route="playlist-edit-page",$(this.prev_focus_dom).removeClass("active"),$(this.playlist_edit_doms[e]).addClass("active"),this.prev_focus_dom=this.playlist_edit_doms[e]},goBack:function(){switch($("#playlist-edit-page").addClass("hide"),current_route=this.prev_route,this.prev_route){case"setting-page":setting_page.hoverMenuItem(setting_page.keys.menu_selection);break;case"playlist-page":playlist_page.hoverPlayListItem(playlist_page.keys.playlist_selection)}},handleMenuClick:function(){var e=this.keys;"playlist_edit_selection"===e.focused_part&&(e.playlist_edit_selection<4?($(this.playlist_edit_doms[e.playlist_edit_selection]).focus(),setSelectionRange(this.playlist_edit_doms[e.playlist_edit_selection])):4==e.playlist_edit_selection?this.savePlaylist():this.goBack())},handleMenuLeftRight:function(e){var t=this.keys;"playlist_edit_selection"===t.focused_part&&(t.playlist_edit_selection=0<e?5:4,this.hoverPlaylistEditItem(t.playlist_edit_selection))},handleMenusUpDown:function(e){var t=this.keys;if("playlist_edit_selection"===t.focused_part){if(4<=t.playlist_edit_selection){if(!(e<0))return;t.playlist_edit_selection=3}else t.playlist_edit_selection+=e;t.playlist_edit_selection<0&&(t.playlist_edit_selection=0),this.hoverPlaylistEditItem(t.playlist_edit_selection)}},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},SrtParser={seperator:",",init:function(){this.seperator=","},timestampToSeconds:function(e){var e=e.split(","),t=e[0],e=parseInt(e[1]),t=t.split(":").map(function(e){return parseInt(e)}),i=t[0];return.001*e+t[2]+60*t[1]+3600*i},correctFormat:function(e){var e=e.replace(".",",").split(","),t=e[0],e=this.fixed_str_digit(3,e[1],!0),t=t.split(":"),i=t[0],s=t[1],t=t[2];return this.fixed_str_digit(2,i,!1)+":"+this.fixed_str_digit(2,s,!1)+":"+this.fixed_str_digit(2,t,!1)+","+e},fixed_str_digit:function(e,t,i){return t.length==e?t:e<t.length?t.slice(0,e):t.length<e?i?t.padEnd(e,"0"):t.padStart(e,"0"):void 0},tryComma:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g);return e.shift(),e},tryDot:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g);return e.shift(),this.seperator=".",e},fromSrt:function(e){if(""==e.trim())return[];for(var t=(new Date).getTime(),i=this.tryComma(e),s=(0==i.length&&(i=this.tryDot(e)),[]),a=0;a<i.length;a+=4){var o=this.correctFormat(i[a+1].trim()),n=this.correctFormat(i[a+2].trim()),o={id:i[a].trim(),startTime:o,startSeconds:this.timestampToSeconds(o),endTime:n,endSeconds:this.timestampToSeconds(n),text:i[a+3].trim()};s.push(o)}e=(new Date).getTime();return console.log(e-t,"ms take to parse"),s}},SrtOperation={current_srt_index:0,next_srt_time:0,srt:[],stopped:!1,subtitle_shown:!1,time_difference:0,init:function(t,e){this.time_difference=0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1;var i=[];if(t)try{SrtParser.init(),i=SrtParser.fromSrt(t)}catch(e){console.log("here subtitle parse issue",e,t)}0<(this.srt=i).length?(this.stopped=!1,this.current_srt_index=this.findIndex(e,0,i.length-1),console.log("here found srt index",this.current_srt_index,e,i),this.current_srt_index<0&&(this.current_srt_index=0),this.next_srt_time=0):this.stopped=!0},findIndex:function(e,t,i){var s,a;return 0==(e+=this.time_difference)?0:(s=this.srt,i<t?i:s[a=Math.floor((t+i)/2)].startSeconds<=e&&e<s[a].endTime?a:s[a].startSeconds>e?this.findIndex(e,t,a-1):this.findIndex(e,a+1,i))},timeChange:function(e){if(!this.stopped){e+=this.time_difference,.98<=Math.random()&&console.log("current_time=",e,media_player.videoObj.currentTime);var t=this.current_srt_index,i=this.srt[t];if(e>=i.startSeconds&&e<i.endSeconds)this.subtitle_shown||$("#"+media_player.parent_id).find(".subtitle-container").html(i.text);else if(e>i.endSeconds){t=this.srt[t+1];try{e<t.startSeconds?this.subtitle_shown&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1):t.endSeconds>e?($("#"+media_player.parent_id).find(".subtitle-container").html(t.text),this.subtitle_shown=!0,this.current_srt_index+=1):(console.log("here finding new srt index"),this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0))}catch(e){console.log("subtitle timer issue",e)}}else if(e<i.startSeconds)try{this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0)}catch(e){}}},stopOperation:function(){this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},setTimeDifference:function(e){this.time_difference=parseInt(e),$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},deStruct:function(){this.srt=[],this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html("")}};function keyboardVisibilityChange(e){e.detail.visibility?show_keyboard=!0:(show_keyboard=!1,$("input").blur())}$(document).ready(function(){try{window.navigator.userAgent.toLowerCase().includes("web0s")?platform="lg":window.navigator.userAgent.toLowerCase().includes("hisense")||window.navigator.userAgent.toLowerCase().includes("vidaa")?platform="vidaa":window.navigator.userAgent.toLowerCase().includes("windows")&&(platform="windows")}catch(e){}$("#app").addClass(platform),"lg"==platform&&($(home_page.menu_doms[7]).closest(".home-section-item-container").remove(),home_page.menu_doms=$("#home-page .menu-item-container")),initKeys(),initPlayer(),settings.initFromLocal();for(var e=localStorage.getItem(storage_id+"parent_account_password"),t=(parent_account_password=null!=e?e:parent_account_password,"samsung"===platform?($("#vod-series-player-video-lg").hide(),$("#channel-page-video-lg").hide()):"lg"===platform&&($("#vod-series-player-video").hide(),$("#channel-page-video").hide()),login_page.getPlayListDetail(),changeCurrentTime(),setInterval(function(){changeCurrentTime()},3e4),document.getElementsByTagName("input")),i=0;i<t.length;i++){var s=t[i];s.addEventListener("focus",function(){show_keyboard=!0}),s.addEventListener("blur",function(){show_keyboard=!1})}"samsung"===platform?document.addEventListener("visibilitychange",function(){document.hidden?webapis.avplay.suspend():webapis.avplay.restore()}):"lg"===platform&&document.addEventListener("keyboardStateChange",keyboardVisibilityChange,!1),document.addEventListener("keydown",function(e){if("samsung"===platform)switch(e.keyCode==tvKey.EXIT&&tizen.application.getCurrentApplication().exit(),e.keyCode){case 65376:case 65385:return void $("input").blur()}if(!app_loading)switch(current_route){case"login-page":login_page.HandleKey(e);break;case"home-page":home_page.HandleKey(e);break;case"channel-page":channel_page.HandleKey(e);break;case"vod-series-page":vod_series_page.HandleKey(e);break;case"vod-summary-page":vod_summary_page.HandleKey(e);break;case"vod-series-player-video":vod_series_player.HandleKey(e);break;case"trailer-page":trailer_page.HandleKey(e);break;case"seasons-page":seasons_variable.HandleKey(e);break;case"episode-page":episode_variable.HandleKey(e);break;case"series-summary-page":series_summary_page.HandleKey(e);break;case"playlist-page":playlist_page.HandleKey(e);break;case"setting-page":setting_page.HandleKey(e);break;case"parent-confirm-page":parent_confirm_page.HandleKey(e);break;case"turn-off-page":turn_off_page.HandleKey(e);break;case"activation-page":activation_page.HandleKey(e);break;case"hide-category-page":hide_category_page.HandleKey(e);break;case"catchup-page":catchup_page.HandleKey(e);break;case"catch-up-detail":epg_page.HandleKey(e);break;case"clear_cache_page":clear_cache_page.HandleKey(e);break;case"search-page":search_page.HandleKey(e);break;case"storage-page":storage_page.HandleKey(e);break;case"image-page":image_page.HandleKey(e);break;case"league-page":league_page.HandleKey(e);break;case"sport-season-page":sport_season_page.HandleKey(e);break;case"playlist-edit-page":playlist_edit_page.HandleKey(e);break;case"clear_recent_page":clear_recent_page.HandleKey(e)}}),$(".subtitle-container").css({"font-size":settings.subtitle_size/16+"rem"})});