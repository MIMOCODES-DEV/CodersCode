!function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}(this,function(){c=Math,N=Object.create||function(e){return xe.prototype=e,e=new xe,xe.prototype=null,e},p=(g={}).lib={},t=p.Base={extend:function(e){var t=N(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=p.WordArray=t.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||A).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,a=e.sigBytes;if(this.clamp(),s%4)for(var o=0;o<a;o++){var n=i[o>>>2]>>>24-o%4*8&255;t[s+o>>>2]|=n<<24-(s+o)%4*8}else for(o=0;o<a;o+=4)t[s+o>>>2]=i[o>>>2];return this.sigBytes+=a,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=t.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4){var s=function(t){var i=987654321,s=4294967295;return function(){var e=((i=36969*(65535&i)+(i>>16)&s)<<16)+(t=18e3*(65535&t)+(t>>16)&s)&s;return(e/4294967296+.5)*(.5<c.random()?1:-1)}}(4294967296*(a||c.random())),a=987654071*s();t.push(4294967296*s()|0)}return new d.init(t,e)}}),v=g.enc={},A=v.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a++){var o=t[a>>>2]>>>24-a%4*8&255;s.push((o>>>4).toString(16)),s.push((15&o).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new d.init(i,t/2)}},D=v.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a++){var o=t[a>>>2]>>>24-a%4*8&255;s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new d.init(i,t)}},F=v.Utf8={stringify:function(e){try{return decodeURIComponent(escape(D.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return D.parse(unescape(encodeURIComponent(e)))}},K=p.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=F.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,s=t.sigBytes,a=this.blockSize,o=s/(4*a),n=(e?c.ceil(o):c.max((0|o)-this._minBufferSize,0))*a,e=c.min(4*n,s);if(n){for(var r=0;r<n;r+=a)this._doProcessBlock(i,r);var l=i.splice(0,n);t.sigBytes-=e}return new d.init(l,e)},clone:function(){var e=t.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p.Hasher=K.extend({cfg:t.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){K.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new z.HMAC.init(i,t).finalize(e)}}}),z=g.algo={};var c,N,t,d,A,D,F,K,z,a,n,r,o,l,h,H,U,j,V,W,G,J,Y,q,X,_,Z,Q,ee,te,e,ie,se,ae,i,oe,ne,re,le,ce,de,he,_e,ue,me,pe,ge,s,ve,fe,ye,be,ke,we,Ce,$e,Se,Me,Be,u,Te,m=g;function xe(){}Te=(v=m).lib.WordArray,v.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var a=[],o=0;o<i;o+=3)for(var n=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,r=0;r<4&&o+.75*r<i;r++)a.push(s.charAt(n>>>6*(3-r)&63));var l=s.charAt(64);if(l)for(;a.length%4;)a.push(l);return a.join("")},parse:function(e){var t=e.length,i=this._map;if(!(s=this._reverseMap))for(var s=this._reverseMap=[],a=0;a<i.length;a++)s[i.charCodeAt(a)]=a;for(var o,n,r=i.charAt(64),l=(r&&-1!==(r=e.indexOf(r))&&(t=r),e),c=t,d=s,h=[],_=0,u=0;u<c;u++)u%4&&(o=d[l.charCodeAt(u-1)]<<u%4*2,n=d[l.charCodeAt(u)]>>>6-u%4*2,h[_>>>2]|=(o|n)<<24-_%4*8,_++);return Te.create(h,_)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};var Le=Math;function M(e,t,i,s,a,o,n){e=e+(t&i|~t&s)+a+n;return(e<<o|e>>>32-o)+t}function B(e,t,i,s,a,o,n){e=e+(t&s|i&~s)+a+n;return(e<<o|e>>>32-o)+t}function T(e,t,i,s,a,o,n){e=e+(t^i^s)+a+n;return(e<<o|e>>>32-o)+t}function x(e,t,i,s,a,o,n){e=e+(i^(t|~s))+a+n;return(e<<o|e>>>32-o)+t}for(var p=m,Ee=(g=p.lib).WordArray,Oe=g.Hasher,g=p.algo,L=[],Pe=0;Pe<64;Pe++)L[Pe]=4294967296*Le.abs(Le.sin(Pe+1))|0;g=g.MD5=Oe.extend({_doReset:function(){this._hash=new Ee.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,a=e[s];e[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,n=e[t+0],r=e[t+1],l=e[t+2],c=e[t+3],d=e[t+4],h=e[t+5],_=e[t+6],u=e[t+7],m=e[t+8],p=e[t+9],g=e[t+10],v=e[t+11],f=e[t+12],y=e[t+13],b=e[t+14],k=e[t+15],w=M(o[0],S=o[1],$=o[2],C=o[3],n,7,L[0]),C=M(C,w,S,$,r,12,L[1]),$=M($,C,w,S,l,17,L[2]),S=M(S,$,C,w,c,22,L[3]);w=M(w,S,$,C,d,7,L[4]),C=M(C,w,S,$,h,12,L[5]),$=M($,C,w,S,_,17,L[6]),S=M(S,$,C,w,u,22,L[7]),w=M(w,S,$,C,m,7,L[8]),C=M(C,w,S,$,p,12,L[9]),$=M($,C,w,S,g,17,L[10]),S=M(S,$,C,w,v,22,L[11]),w=M(w,S,$,C,f,7,L[12]),C=M(C,w,S,$,y,12,L[13]),$=M($,C,w,S,b,17,L[14]),w=B(w,S=M(S,$,C,w,k,22,L[15]),$,C,r,5,L[16]),C=B(C,w,S,$,_,9,L[17]),$=B($,C,w,S,v,14,L[18]),S=B(S,$,C,w,n,20,L[19]),w=B(w,S,$,C,h,5,L[20]),C=B(C,w,S,$,g,9,L[21]),$=B($,C,w,S,k,14,L[22]),S=B(S,$,C,w,d,20,L[23]),w=B(w,S,$,C,p,5,L[24]),C=B(C,w,S,$,b,9,L[25]),$=B($,C,w,S,c,14,L[26]),S=B(S,$,C,w,m,20,L[27]),w=B(w,S,$,C,y,5,L[28]),C=B(C,w,S,$,l,9,L[29]),$=B($,C,w,S,u,14,L[30]),w=T(w,S=B(S,$,C,w,f,20,L[31]),$,C,h,4,L[32]),C=T(C,w,S,$,m,11,L[33]),$=T($,C,w,S,v,16,L[34]),S=T(S,$,C,w,b,23,L[35]),w=T(w,S,$,C,r,4,L[36]),C=T(C,w,S,$,d,11,L[37]),$=T($,C,w,S,u,16,L[38]),S=T(S,$,C,w,g,23,L[39]),w=T(w,S,$,C,y,4,L[40]),C=T(C,w,S,$,n,11,L[41]),$=T($,C,w,S,c,16,L[42]),S=T(S,$,C,w,_,23,L[43]),w=T(w,S,$,C,p,4,L[44]),C=T(C,w,S,$,f,11,L[45]),$=T($,C,w,S,k,16,L[46]),w=x(w,S=T(S,$,C,w,l,23,L[47]),$,C,n,6,L[48]),C=x(C,w,S,$,u,10,L[49]),$=x($,C,w,S,b,15,L[50]),S=x(S,$,C,w,h,21,L[51]),w=x(w,S,$,C,f,6,L[52]),C=x(C,w,S,$,c,10,L[53]),$=x($,C,w,S,g,15,L[54]),S=x(S,$,C,w,r,21,L[55]),w=x(w,S,$,C,m,6,L[56]),C=x(C,w,S,$,k,10,L[57]),$=x($,C,w,S,_,15,L[58]),S=x(S,$,C,w,y,21,L[59]),w=x(w,S,$,C,d,6,L[60]),C=x(C,w,S,$,v,10,L[61]),$=x($,C,w,S,l,15,L[62]),S=x(S,$,C,w,p,21,L[63]),o[0]=o[0]+w|0,o[1]=o[1]+S|0,o[2]=o[2]+$|0,o[3]=o[3]+C|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes,a=(t[s>>>5]|=128<<24-s%32,Le.floor(i/4294967296));t[15+(64+s>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t[14+(64+s>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,o=a.words,n=0;n<4;n++){var r=o[n];o[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}return a},clone:function(){var e=Oe.clone.call(this);return e._hash=this._hash.clone(),e}}),p.MD5=Oe._createHelper(g),p.HmacMD5=Oe._createHmacHelper(g),p=(v=m).lib,Me=p.WordArray,Be=p.Hasher,u=[],p=v.algo.SHA1=Be.extend({_doReset:function(){this._hash=new Me.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],a=i[1],o=i[2],n=i[3],r=i[4],l=0;l<80;l++){u[l]=l<16?0|e[t+l]:(c=u[l-3]^u[l-8]^u[l-14]^u[l-16])<<1|c>>>31;var c=(s<<5|s>>>27)+r+u[l];c+=l<20?1518500249+(a&o|~a&n):l<40?1859775393+(a^o^n):l<60?(a&o|a&n|o&n)-1894007588:(a^o^n)-899497514,r=n,n=o,o=a<<30|a>>>2,a=s,s=c}i[0]=i[0]+s|0,i[1]=i[1]+a|0,i[2]=i[2]+o|0,i[3]=i[3]+n|0,i[4]=i[4]+r|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=Math.floor(i/4294967296),t[15+(64+s>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=Be.clone.call(this);return e._hash=this._hash.clone(),e}}),v.SHA1=Be._createHelper(p),v.HmacSHA1=Be._createHmacHelper(p);var Ie=Math,g=m,Re=(v=g.lib).WordArray,Ne=v.Hasher,v=g.algo,Ae=[],De=[];function Fe(e){return 4294967296*(e-(0|e))|0}for(var Ke=2,ze=0;ze<64;)!function(e){for(var t=Ie.sqrt(e),i=2;i<=t;i++)if(!(e%i))return;return 1}(Ke)||(ze<8&&(Ae[ze]=Fe(Ie.pow(Ke,.5))),De[ze]=Fe(Ie.pow(Ke,1/3)),ze++),Ke++;for(var He=[],v=v.SHA256=Ne.extend({_doReset:function(){this._hash=new Re.init(Ae.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],a=i[1],o=i[2],n=i[3],r=i[4],l=i[5],c=i[6],d=i[7],h=0;h<64;h++){He[h]=h<16?0|e[t+h]:(((_=He[h-15])<<25|_>>>7)^(_<<14|_>>>18)^_>>>3)+He[h-7]+(((_=He[h-2])<<15|_>>>17)^(_<<13|_>>>19)^_>>>10)+He[h-16];var _=s&a^s&o^a&o,u=d+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&l^~r&c)+De[h]+He[h],d=c,c=l,l=r,r=n+u|0,n=o,o=a,a=s,s=u+(((s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22))+_)|0}i[0]=i[0]+s|0,i[1]=i[1]+a|0,i[2]=i[2]+o|0,i[3]=i[3]+n|0,i[4]=i[4]+r|0,i[5]=i[5]+l|0,i[6]=i[6]+c|0,i[7]=i[7]+d|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=Ie.floor(i/4294967296),t[15+(64+s>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=Ne.clone.call(this);return e._hash=this._hash.clone(),e}}),Ue=(g.SHA256=Ne._createHelper(v),g.HmacSHA256=Ne._createHmacHelper(v),Se=(p=m).lib.WordArray,(p=p.enc).Utf16=p.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a+=2){var o=t[a>>>2]>>>16-a%4*8&65535;s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>1]|=e.charCodeAt(s)<<16-s%2*16;return Se.create(i,2*t)}},p.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a+=2){var o=Rt(t[a>>>2]>>>16-a%4*8&65535);s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>1]|=Rt(e.charCodeAt(s)<<16-s%2*16);return Se.create(i,2*t)}},"function"==typeof ArrayBuffer&&(g=m.lib.WordArray,$e=g.init,(g.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var t=e.byteLength,i=[],s=0;s<t;s++)i[s>>>2]|=e[s]<<24-s%4*8;$e.call(this,i,t)}else $e.apply(this,arguments)}).prototype=g),Math,p=(v=m).lib,s=p.WordArray,ve=p.Hasher,p=v.algo,fe=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),ye=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),be=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),ke=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),we=s.create([0,1518500249,1859775393,2400959708,2840853838]),Ce=s.create([1352829926,1548603684,1836072691,2053994217,0]),p=p.RIPEMD160=ve.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,a=e[s];e[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}for(var o,n,r,l,c,d,h=this._hash.words,_=we.words,u=Ce.words,m=fe.words,p=ye.words,g=be.words,v=ke.words,f=o=h[0],y=n=h[1],b=r=h[2],k=l=h[3],w=c=h[4],i=0;i<80;i+=1)d=(d=It(d=(d=o+e[t+m[i]]|0)+(i<16?(n^r^l)+_[0]:i<32?Ot(n,r,l)+_[1]:i<48?((n|~r)^l)+_[2]:i<64?Pt(n,r,l)+_[3]:(n^(r|~l))+_[4])|0,g[i]))+c|0,o=c,c=l,l=It(r,10),r=n,n=d,d=(d=It(d=(d=f+e[t+p[i]]|0)+(i<16?(y^(b|~k))+u[0]:i<32?Pt(y,b,k)+u[1]:i<48?((y|~b)^k)+u[2]:i<64?Ot(y,b,k)+u[3]:(y^b^k)+u[4])|0,v[i]))+w|0,f=w,w=k,k=It(b,10),b=y,y=d;d=h[1]+r+k|0,h[1]=h[2]+l+w|0,h[2]=h[3]+c+f|0,h[3]=h[4]+o+y|0,h[4]=h[0]+n+b|0,h[0]=d},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,a=s.words,o=0;o<5;o++){var n=a[o];a[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}return s},clone:function(){var e=ve.clone.call(this);return e._hash=this._hash.clone(),e}}),v.RIPEMD160=ve._createHelper(p),v.HmacRIPEMD160=ve._createHmacHelper(p),v=(g=m).lib.Base,ge=g.enc.Utf8,g.algo.HMAC=v.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=ge.parse(t));var i=e.blockSize,s=4*i;(t=t.sigBytes>s?e.finalize(t):t).clamp();for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),a=e.words,o=t.words,n=0;n<i;n++)a[n]^=1549556828,o[n]^=909522486;e.sigBytes=t.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}}),g=(p=m).lib,v=g.Base,ue=g.WordArray,f=(g=p.algo).SHA1,me=g.HMAC,pe=g.PBKDF2=v.extend({cfg:v.extend({keySize:4,hasher:f,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=me.create(i.hasher,e),a=ue.create(),o=ue.create([1]),n=a.words,r=o.words,l=i.keySize,c=i.iterations;n.length<l;){var d=s.update(t).finalize(o);s.reset();for(var h=d.words,_=h.length,u=d,m=1;m<c;m++){u=s.finalize(u),s.reset();for(var p=u.words,g=0;g<_;g++)h[g]^=p[g]}a.concat(d),r[0]++}return a.sigBytes=4*l,a}}),p.PBKDF2=function(e,t,i){return pe.create(i).compute(e,t)},v=(g=m).lib,f=v.Base,he=v.WordArray,p=(v=g.algo).MD5,_e=v.EvpKDF=f.extend({cfg:f.extend({keySize:4,hasher:p,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=i.hasher.create(),a=he.create(),o=a.words,n=i.keySize,r=i.iterations;o.length<n;){l&&s.update(l);var l=s.update(e).finalize(t);s.reset();for(var c=1;c<r;c++)l=s.finalize(l),s.reset();a.concat(l)}return a.sigBytes=4*n,a}}),g.EvpKDF=function(e,t,i){return _e.create(i).compute(e,t)},ce=(v=m).lib.WordArray,de=(f=v.algo).SHA256,f=f.SHA224=de.extend({_doReset:function(){this._hash=new ce.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=de._doFinalize.call(this);return e.sigBytes-=4,e}}),v.SHA224=de._createHelper(f),v.HmacSHA224=de._createHmacHelper(f),g=(p=m).lib,re=g.Base,le=g.WordArray,(g=p.x64={}).Word=re.extend({init:function(e,t){this.high=e,this.low=t}}),g.WordArray=re.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],s=0;s<t;s++){var a=e[s];i.push(a.high),i.push(a.low)}return le.create(i,this.sigBytes)},clone:function(){for(var e=re.clone.call(this),t=e.words=this.words.slice(0),i=t.length,s=0;s<i;s++)t[s]=t[s].clone();return e}}),Math),v=m,je=(f=v.lib).WordArray,Ve=f.Hasher,We=v.x64.Word,f=v.algo,Ge=[],Je=[],Ye=[],y=1,b=0,qe=0;qe<24;qe++){Ge[y+5*b]=(qe+1)*(qe+2)/2%64;var Xe=(2*y+3*b)%5;y=b%5,b=Xe}for(y=0;y<5;y++)for(b=0;b<5;b++)Je[y+5*b]=b+(2*y+3*b)%5*5;for(var Ze=1,Qe=0;Qe<24;Qe++){for(var et,tt=0,it=0,st=0;st<7;st++)1&Ze&&((et=(1<<st)-1)<32?it^=1<<et:tt^=1<<et-32),128&Ze?Ze=Ze<<1^113:Ze<<=1;Ye[Qe]=We.create(tt,it)}for(var E=[],at=0;at<25;at++)E[at]=We.create();function k(){return w.create.apply(w,arguments)}f=f.SHA3=Ve.extend({cfg:Ve.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new We.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,s=this.blockSize/2,a=0;a<s;a++){var o=e[t+2*a],n=e[t+2*a+1],o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);(w=i[a]).high^=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),w.low^=o}for(var r=0;r<24;r++){for(var l=0;l<5;l++){for(var c=0,d=0,h=0;h<5;h++)c^=(w=i[l+5*h]).high,d^=w.low;var _=E[l];_.high=c,_.low=d}for(l=0;l<5;l++)for(var u=E[(l+4)%5],m=E[(l+1)%5],p=m.high,m=m.low,c=u.high^(p<<1|m>>>31),d=u.low^(m<<1|p>>>31),h=0;h<5;h++)(w=i[l+5*h]).high^=c,w.low^=d;for(var g=1;g<25;g++){var v=(w=i[g]).high,f=w.low,y=Ge[g],v=(d=y<32?(c=v<<y|f>>>32-y,f<<y|v>>>32-y):(c=f<<y-32|v>>>64-y,v<<y-32|f>>>64-y),E[Je[g]]);v.high=c,v.low=d}var b=E[0],k=i[0];b.high=k.high,b.low=k.low;for(l=0;l<5;l++)for(h=0;h<5;h++){var w=i[g=l+5*h],C=E[g],$=E[(l+1)%5+5*h],S=E[(l+2)%5+5*h];w.high=C.high^~$.high&S.high,w.low=C.low^~$.low&S.low}w=i[0],b=Ye[r];w.high^=b.high,w.low^=b.low}},_doFinalize:function(){var e=this._data,t=e.words,i=(this._nDataBytes,8*e.sigBytes),s=32*this.blockSize;t[i>>>5]|=1<<24-i%32,t[(Ue.ceil((1+i)/s)*s>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var a=this._state,i=this.cfg.outputLength/8,o=i/8,n=[],r=0;r<o;r++){var l=a[r],c=l.high,l=l.low,c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);n.push(16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)),n.push(c)}return new je.init(n,i)},clone:function(){for(var e=Ve.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}}),v.SHA3=Ve._createHelper(f),v.HmacSHA3=Ve._createHmacHelper(f);for(var p=m,ot=p.lib.Hasher,w=(g=p.x64).Word,nt=g.WordArray,g=p.algo,rt=[k(1116352408,3609767458),k(1899447441,602891725),k(3049323471,3964484399),k(3921009573,2173295548),k(961987163,4081628472),k(1508970993,3053834265),k(2453635748,2937671579),k(2870763221,3664609560),k(3624381080,2734883394),k(310598401,1164996542),k(607225278,1323610764),k(1426881987,3590304994),k(1925078388,4068182383),k(2162078206,991336113),k(2614888103,633803317),k(3248222580,3479774868),k(3835390401,2666613458),k(4022224774,944711139),k(264347078,2341262773),k(604807628,2007800933),k(770255983,1495990901),k(1249150122,1856431235),k(1555081692,3175218132),k(1996064986,2198950837),k(2554220882,3999719339),k(2821834349,766784016),k(2952996808,2566594879),k(3210313671,3203337956),k(3336571891,1034457026),k(3584528711,2466948901),k(113926993,3758326383),k(338241895,168717936),k(666307205,1188179964),k(773529912,1546045734),k(1294757372,1522805485),k(1396182291,2643833823),k(1695183700,2343527390),k(1986661051,1014477480),k(2177026350,1206759142),k(2456956037,344077627),k(2730485921,1290863460),k(2820302411,3158454273),k(3259730800,3505952657),k(3345764771,106217008),k(3516065817,3606008344),k(3600352804,1432725776),k(4094571909,1467031594),k(275423344,851169720),k(430227734,3100823752),k(506948616,1363258195),k(659060556,3750685593),k(883997877,3785050280),k(958139571,3318307427),k(1322822218,3812723403),k(1537002063,2003034995),k(1747873779,3602036899),k(1955562222,1575990012),k(2024104815,1125592928),k(2227730452,2716904306),k(2361852424,442776044),k(2428436474,593698344),k(2756734187,3733110249),k(3204031479,2999351573),k(3329325298,3815920427),k(3391569614,3928383900),k(3515267271,566280711),k(3940187606,3454069534),k(4118630271,4000239992),k(116418474,1914138554),k(174292421,2731055270),k(289380356,3203993006),k(460393269,320620315),k(685471733,587496836),k(852142971,1086792851),k(1017036298,365543100),k(1126000580,2618297676),k(1288033470,3409855158),k(1501505948,4234509866),k(1607167915,987167468),k(1816402316,1246189591)],lt=[],ct=0;ct<80;ct++)lt[ct]=k();g=g.SHA512=ot.extend({_doReset:function(){this._hash=new nt.init([new w.init(1779033703,4089235720),new w.init(3144134277,2227873595),new w.init(1013904242,4271175723),new w.init(2773480762,1595750129),new w.init(1359893119,2917565137),new w.init(2600822924,725511199),new w.init(528734635,4215389547),new w.init(1541459225,327033209)])},_doProcessBlock:function(N,A){for(var e=this._hash.words,t=e[0],i=e[1],s=e[2],a=e[3],o=e[4],n=e[5],r=e[6],e=e[7],D=t.high,l=t.low,F=i.high,c=i.low,K=s.high,d=s.low,z=a.high,h=a.low,H=o.high,_=o.low,U=n.high,u=n.low,j=r.high,m=r.low,V=e.high,p=e.low,g=D,v=l,f=F,y=c,b=K,k=d,W=z,w=h,C=H,$=_,G=U,S=u,J=j,M=m,Y=V,q=p,B=0;B<80;B++)var T,x,L=lt[B],E=(B<16?(x=L.high=0|N[A+2*B],T=L.low=0|N[A+2*B+1]):(I=(O=lt[B-15]).high,P=(X=lt[B-2]).high,E=(R=lt[B-7]).high,Z=(Q=lt[B-16]).high,x=(x=(x=((I>>>1|(O=O.low)<<31)^(I>>>8|O<<24)^I>>>7)+E+((T=(E=(O>>>1|I<<31)^(O>>>8|I<<24)^(O>>>7|I<<25))+R.low)>>>0<E>>>0?1:0))+((P>>>19|(O=X.low)<<13)^(P<<3|O>>>29)^P>>>6)+((T=T+(I=(O>>>19|P<<13)^(O<<3|P>>>29)^(O>>>6|P<<26)))>>>0<I>>>0?1:0))+Z+((T=T+(R=Q.low))>>>0<R>>>0?1:0),L.high=x,L.low=T),C&G^~C&J),X=$&S^~$&M,O=g&f^g&b^f&b,P=(v>>>28|g<<4)^(v<<30|g>>>2)^(v<<25|g>>>7),I=rt[B],Z=I.high,Q=I.low,R=q+(($>>>14|C<<18)^($>>>18|C<<14)^($<<23|C>>>9)),L=Y+((C>>>14|$<<18)^(C>>>18|$<<14)^(C<<23|$>>>9))+(R>>>0<q>>>0?1:0),ee=P+(v&y^v&k^y&k),Y=J,q=M,J=G,M=S,G=C,S=$,C=W+(L=L+E+((R=R+X)>>>0<X>>>0?1:0)+Z+((R=R+Q)>>>0<Q>>>0?1:0)+x+((R=R+T)>>>0<T>>>0?1:0))+(($=w+R|0)>>>0<w>>>0?1:0)|0,W=b,w=k,b=f,k=y,f=g,y=v,g=L+(((g>>>28|v<<4)^(g<<30|v>>>2)^(g<<25|v>>>7))+O+(ee>>>0<P>>>0?1:0))+((v=R+ee|0)>>>0<R>>>0?1:0)|0;l=t.low=l+v,t.high=D+g+(l>>>0<v>>>0?1:0),c=i.low=c+y,i.high=F+f+(c>>>0<y>>>0?1:0),d=s.low=d+k,s.high=K+b+(d>>>0<k>>>0?1:0),h=a.low=h+w,a.high=z+W+(h>>>0<w>>>0?1:0),_=o.low=_+$,o.high=H+C+(_>>>0<$>>>0?1:0),u=n.low=u+S,n.high=U+G+(u>>>0<S>>>0?1:0),m=r.low=m+M,r.high=j+J+(m>>>0<M>>>0?1:0),p=e.low=p+q,e.high=V+Y+(p>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[30+(128+s>>>10<<5)]=Math.floor(i/4294967296),t[31+(128+s>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=ot.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),p.SHA512=ot._createHelper(g),p.HmacSHA512=ot._createHmacHelper(g),f=(v=m).x64,i=f.Word,oe=f.WordArray,ne=(f=v.algo).SHA512,f=f.SHA384=ne.extend({_doReset:function(){this._hash=new oe.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=ne._doFinalize.call(this);return e.sigBytes-=16,e}}),v.SHA384=ne._createHelper(f),v.HmacSHA384=ne._createHmacHelper(f),m.lib.Cipher||(g=(p=m).lib,v=g.Base,_=g.WordArray,Z=g.BufferedBlockAlgorithm,(f=p.enc).Utf8,Q=f.Base64,ee=p.algo.EvpKDF,te=g.Cipher=Z.extend({cfg:v.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){Z.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(s){return{encrypt:function(e,t,i){return Et(t).encrypt(s,e,t,i)},decrypt:function(e,t,i){return Et(t).decrypt(s,e,t,i)}}}}),g.StreamCipher=te.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=p.mode={},e=g.BlockCipherMode=v.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),e=f.CBC=((f=e.extend()).Encryptor=f.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize;Lt.call(this,e,t,s),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),f.Decryptor=f.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=e.slice(t,t+s);i.decryptBlock(e,t),Lt.call(this,e,t,s),this._prevBlock=a}}),f),f=(p.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,i=t-e.sigBytes%t,s=i<<24|i<<16|i<<8|i,a=[],o=0;o<i;o+=4)a.push(s);t=_.create(a,i);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g.BlockCipher=te.extend({cfg:te.cfg.extend({mode:e,padding:f}),reset:function(){te.reset.call(this);var e,t=this.cfg,i=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,i&&i.words):(this._mode=e.call(t,this,i&&i.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),ie=g.CipherParams=v.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),e=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt;return(e?_.create([1398893684,1701076831]).concat(e).concat(t):t).toString(Q)},parse:function(e){var t,e=Q.parse(e),i=e.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=_.create(i.slice(2,4)),i.splice(0,4),e.sigBytes-=16),ie.create({ciphertext:e,salt:t})}},se=g.SerializableCipher=v.extend({cfg:v.extend({format:e}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var a=e.createEncryptor(i,s),t=a.finalize(t),a=a.cfg;return ie.create({ciphertext:t,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(i,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),f=(p.kdf={}).OpenSSL={execute:function(e,t,i,s){s=s||_.random(8);e=ee.create({keySize:t+i}).compute(e,s),i=_.create(e.words.slice(t),4*i);return e.sigBytes=4*t,ie.create({key:e,iv:i,salt:s})}},ae=g.PasswordBasedCipher=se.extend({cfg:se.cfg.extend({kdf:f}),encrypt:function(e,t,i,s){i=(s=this.cfg.extend(s)).kdf.execute(i,e.keySize,e.ivSize),s.iv=i.iv,e=se.encrypt.call(this,e,t,i.key,s);return e.mixIn(i),e},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);i=s.kdf.execute(i,e.keySize,e.ivSize,t.salt);return s.iv=i.iv,se.decrypt.call(this,e,t,i.key,s)}})),m.mode.CFB=((v=m.lib.BlockCipherMode.extend()).Encryptor=v.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize;xt.call(this,e,t,s,i),this._prevBlock=e.slice(t,t+s)}}),v.Decryptor=v.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=e.slice(t,t+s);xt.call(this,e,t,s,i),this._prevBlock=a}}),v),m.mode.ECB=((e=m.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e),m.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,t=4*t,t=t-i%t,i=i+t-1;e.clamp(),e.words[i>>>2]|=t<<24-i%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m.pad.Iso10126={pad:function(e,t){t*=4,t-=e.sigBytes%t;e.concat(m.lib.WordArray.random(t-1)).concat(m.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m.pad.Iso97971={pad:function(e,t){e.concat(m.lib.WordArray.create([2147483648],1)),m.pad.ZeroPadding.pad(e,t)},unpad:function(e){m.pad.ZeroPadding.unpad(e),e.sigBytes--}},m.mode.OFB=(p=m.lib.BlockCipherMode.extend(),g=p.Encryptor=p.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=this._iv,o=this._keystream;a&&(o=this._keystream=a.slice(0),this._iv=void 0),i.encryptBlock(o,0);for(var n=0;n<s;n++)e[t+n]^=o[n]}}),p.Decryptor=g,p),m.pad.NoPadding={pad:function(){},unpad:function(){}},q=(f=m).lib.CipherParams,X=f.enc.Hex,f.format.Hex={stringify:function(e){return e.ciphertext.toString(X)},parse:function(e){e=X.parse(e);return q.create({ciphertext:e})}};for(var v=m,g=v.lib.BlockCipher,p=v.algo,C=[],dt=[],ht=[],_t=[],ut=[],mt=[],pt=[],gt=[],vt=[],ft=[],$=[],S=0;S<256;S++)$[S]=S<128?S<<1:S<<1^283;for(var O=0,P=0,S=0;S<256;S++){var I=P^P<<1^P<<2^P<<3^P<<4,yt=$[dt[C[O]=I=I>>>8^255&I^99]=O],bt=$[yt],kt=$[bt],R=257*$[I]^16843008*I;ht[O]=R<<24|R>>>8,_t[O]=R<<16|R>>>16,ut[O]=R<<8|R>>>24,mt[O]=R,pt[I]=(R=16843009*kt^65537*bt^257*yt^16843008*O)<<24|R>>>8,gt[I]=R<<16|R>>>16,vt[I]=R<<8|R>>>24,ft[I]=R,O?(O=yt^$[$[$[kt^yt]]],P^=$[$[P]]):O=P=1}var wt=[0,1,2,4,8,16,32,64,128,27,54],p=p.AES=g.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,s=4*(1+(this._nRounds=6+i)),a=this._keySchedule=[],o=0;o<s;o++)o<i?a[o]=t[o]:(l=a[o-1],o%i?6<i&&o%i==4&&(l=C[l>>>24]<<24|C[l>>>16&255]<<16|C[l>>>8&255]<<8|C[255&l]):(l=C[(l=l<<8|l>>>24)>>>24]<<24|C[l>>>16&255]<<16|C[l>>>8&255]<<8|C[255&l],l^=wt[o/i|0]<<24),a[o]=a[o-i]^l);for(var n=this._invKeySchedule=[],r=0;r<s;r++){var l,o=s-r;l=r%4?a[o]:a[o-4],n[r]=r<4||o<=4?l:pt[C[l>>>24]]^gt[C[l>>>16&255]]^vt[C[l>>>8&255]]^ft[C[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,ht,_t,ut,mt,C)},decryptBlock:function(e,t){var i=e[t+1],i=(e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,pt,gt,vt,ft,dt),e[t+1]);e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,a,o,n,r){for(var l=this._nRounds,c=e[t]^i[0],d=e[t+1]^i[1],h=e[t+2]^i[2],_=e[t+3]^i[3],u=4,m=1;m<l;m++)var p=s[c>>>24]^a[d>>>16&255]^o[h>>>8&255]^n[255&_]^i[u++],g=s[d>>>24]^a[h>>>16&255]^o[_>>>8&255]^n[255&c]^i[u++],v=s[h>>>24]^a[_>>>16&255]^o[c>>>8&255]^n[255&d]^i[u++],f=s[_>>>24]^a[c>>>16&255]^o[d>>>8&255]^n[255&h]^i[u++],c=p,d=g,h=v,_=f;p=(r[c>>>24]<<24|r[d>>>16&255]<<16|r[h>>>8&255]<<8|r[255&_])^i[u++],g=(r[d>>>24]<<24|r[h>>>16&255]<<16|r[_>>>8&255]<<8|r[255&c])^i[u++],v=(r[h>>>24]<<24|r[_>>>16&255]<<16|r[c>>>8&255]<<8|r[255&d])^i[u++],f=(r[_>>>24]<<24|r[c>>>16&255]<<16|r[d>>>8&255]<<8|r[255&h])^i[u++];e[t]=p,e[t+1]=g,e[t+2]=v,e[t+3]=f},keySize:8});return v.AES=g._createHelper(p),v=(f=m).lib,U=v.WordArray,v=v.BlockCipher,j=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],V=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],W=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],G=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],J=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],Y=(g=f.algo).DES=v.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var s=j[i]-1;t[i]=e[s>>>5]>>>31-s%32&1}for(var a=this._subKeys=[],o=0;o<16;o++){for(var n=a[o]=[],r=W[o],i=0;i<24;i++)n[i/6|0]|=t[(V[i]-1+r)%28]<<31-i%6,n[4+(i/6|0)]|=t[28+(V[i+24]-1+r)%28]<<31-i%6;n[0]=n[0]<<1|n[0]>>>31;for(i=1;i<7;i++)n[i]=n[i]>>>4*(i-1)+3;n[7]=n[7]<<5|n[7]>>>27}for(var l=this._invSubKeys=[],i=0;i<16;i++)l[i]=a[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],Bt.call(this,4,252645135),Bt.call(this,16,65535),Tt.call(this,2,858993459),Tt.call(this,8,16711935),Bt.call(this,1,1431655765);for(var s=0;s<16;s++){for(var a=i[s],o=this._lBlock,n=this._rBlock,r=0,l=0;l<8;l++)r|=G[l][((n^a[l])&J[l])>>>0];this._lBlock=n,this._rBlock=o^r}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,Bt.call(this,1,1431655765),Tt.call(this,8,16711935),Tt.call(this,2,858993459),Bt.call(this,16,65535),Bt.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2}),f.DES=v._createHelper(Y),g=g.TripleDES=v.extend({_doReset:function(){var e=this._key.words;this._des1=Y.createEncryptor(U.create(e.slice(0,2))),this._des2=Y.createEncryptor(U.create(e.slice(2,4))),this._des3=Y.createEncryptor(U.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),f.TripleDES=v._createHelper(g),f=(p=m).lib.StreamCipher,H=(v=p.algo).RC4=f.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,s=this._S=[],a=0;a<256;a++)s[a]=a;for(var a=0,o=0;a<256;a++){var n=a%i,n=t[n>>>2]>>>24-n%4*8&255,o=(o+s[a]+n)%256,n=s[a];s[a]=s[o],s[o]=n}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=Mt.call(this)},keySize:8,ivSize:0}),p.RC4=f._createHelper(H),v=v.RC4Drop=H.extend({cfg:H.cfg.extend({drop:192}),_doReset:function(){H._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)Mt.call(this)}}),p.RC4Drop=f._createHelper(v),m.mode.CTRGladman=(g=m.lib.BlockCipherMode.extend(),p=g.Encryptor=g.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=this._iv,o=this._counter,n=(a&&(o=this._counter=a.slice(0),this._iv=void 0),0===((a=o)[0]=St(a[0]))&&(a[1]=St(a[1])),o.slice(0));i.encryptBlock(n,0);for(var r=0;r<s;r++)e[t+r]^=n[r]}}),g.Decryptor=p,g),v=(f=m).lib.StreamCipher,o=[],l=[],h=[],p=f.algo.Rabbit=v.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);for(var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],i=this._b=0;i<4;i++)$t.call(this);for(i=0;i<8;i++)a[i]^=s[i+4&7];if(t){var t=t.words,o=t[0],t=t[1],o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),n=o>>>16|4294901760&t,r=t<<16|65535&o;a[0]^=o,a[1]^=n,a[2]^=t,a[3]^=r,a[4]^=o,a[5]^=n,a[6]^=t,a[7]^=r;for(i=0;i<4;i++)$t.call(this)}},_doProcessBlock:function(e,t){var i=this._X;$t.call(this),o[0]=i[0]^i[5]>>>16^i[3]<<16,o[1]=i[2]^i[7]>>>16^i[5]<<16,o[2]=i[4]^i[1]>>>16^i[7]<<16,o[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)o[s]=16711935&(o[s]<<8|o[s]>>>24)|4278255360&(o[s]<<24|o[s]>>>8),e[t+s]^=o[s]},blockSize:4,ivSize:2}),f.Rabbit=v._createHelper(p),m.mode.CTR=(g=m.lib.BlockCipherMode.extend(),f=g.Encryptor=g.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=this._iv,o=this._counter,n=(a&&(o=this._counter=a.slice(0),this._iv=void 0),o.slice(0));i.encryptBlock(n,0),o[s-1]=o[s-1]+1|0;for(var r=0;r<s;r++)e[t+r]^=n[r]}}),g.Decryptor=f,g),p=(v=m).lib.StreamCipher,a=[],n=[],r=[],f=v.algo.RabbitLegacy=p.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],a=this._b=0;a<4;a++)Ct.call(this);for(a=0;a<8;a++)s[a]^=i[a+4&7];if(t){var e=t.words,t=e[0],e=e[1],t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),o=t>>>16|4294901760&e,n=e<<16|65535&t;s[0]^=t,s[1]^=o,s[2]^=e,s[3]^=n,s[4]^=t,s[5]^=o,s[6]^=e,s[7]^=n;for(a=0;a<4;a++)Ct.call(this)}},_doProcessBlock:function(e,t){var i=this._X;Ct.call(this),a[0]=i[0]^i[5]>>>16^i[3]<<16,a[1]=i[2]^i[7]>>>16^i[5]<<16,a[2]=i[4]^i[1]>>>16^i[7]<<16,a[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)a[s]=16711935&(a[s]<<8|a[s]>>>24)|4278255360&(a[s]<<24|a[s]>>>8),e[t+s]^=a[s]},blockSize:4,ivSize:2}),v.RabbitLegacy=p._createHelper(f),m.pad.ZeroPadding={pad:function(e,t){t*=4;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},m;function Ct(){for(var e=this._X,t=this._C,i=0;i<8;i++)n[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<n[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<n[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<n[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<n[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<n[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<n[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<n[6]>>>0?1:0)|0,this._b=t[7]>>>0<n[7]>>>0?1:0;for(i=0;i<8;i++){var s=e[i]+t[i],a=65535&s,o=s>>>16;r[i]=((a*a>>>17)+a*o>>>15)+o*o^((4294901760&s)*s|0)+((65535&s)*s|0)}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}function $t(){for(var e=this._X,t=this._C,i=0;i<8;i++)l[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(i=0;i<8;i++){var s=e[i]+t[i],a=65535&s,o=s>>>16;h[i]=((a*a>>>17)+a*o>>>15)+o*o^((4294901760&s)*s|0)+((65535&s)*s|0)}e[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,e[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,e[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,e[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,e[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,e[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,e[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,e[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}function St(e){var t,i,s;return 255==(e>>24&255)?(i=e>>8&255,s=255&e,255===(t=e>>16&255)?(t=0,255===i?(i=0,255===s?s=0:++s):++i):++t,e=0,e=(e+=t<<16)+(i<<8)+s):e+=1<<24,e}function Mt(){for(var e=this._S,t=this._i,i=this._j,s=0,a=0;a<4;a++){var i=(i+e[t=(t+1)%256])%256,o=e[t];e[t]=e[i],e[i]=o,s|=e[(e[t]+e[i])%256]<<24-8*a}return this._i=t,this._j=i,s}function Bt(e,t){t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function Tt(e,t){t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}function xt(e,t,i,s){var a,o=this._iv;o?(a=o.slice(0),this._iv=void 0):a=this._prevBlock,s.encryptBlock(a,0);for(var n=0;n<i;n++)e[t+n]^=a[n]}function Lt(e,t,i){var s,a=this._iv;a?(s=a,this._iv=void 0):s=this._prevBlock;for(var o=0;o<i;o++)e[t+o]^=s[o]}function Et(e){return"string"==typeof e?ae:se}function Ot(e,t,i){return e&t|~e&i}function Pt(e,t,i){return e&i|t&~i}function It(e,t){return e<<t|e>>>32-t}function Rt(e){return e<<8&4278255360|e>>>8&16711935}});var mac_address,ip_address,user_name,playlist_status,password,api_host_url,device_key,is_trial,weatherCountry,weatherCity,weatherForecast,weatherToday,weatherNow,expire_date,playlist_expire_date,current_movie,current_season,current_episode,current_series,custom_keyboard={isShown:!1,currentLanguage:"english",isUpperCase:!1,currentInput:null,lastFocusedKey:null,cursorPosition:0,inputValue:"",layouts:{english:{lowercase:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],uppercase:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]],numbers:["1","2","3","4","5","6","7","8","9","0"],special:[".",",","/",":",";","@","#","%","&","?","!","-","_","=","+","(",")","'",'"']},arabic:{lowercase:[["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج"],["ش","س","ي","ب","ل","ا","ت","ن","م","ك","ط"],["ذ","ئ","ء","ؤ","ر","لا","ى","ة","و","ز","ظ","د"]],uppercase:[["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج"],["ش","س","ي","ب","ل","ا","ت","ن","م","ك","ط"],["ذ","ئ","ء","ؤ","ر","لا","ى","ة","و","ز","ظ","د"]],numbers:["1","2","3","4","5","6","7","8","9","0"],special:[".","،","/",":","؛","@","#","%","&","؟","!","-","_","=","+",")","(","'",'"']}},init:function(){this.render(),this.attachEventHandlers(),this.updateSpecialCharacters()},show:function(e){this.isShown||(this.currentInput=e,this.cursorPosition=e.selectionStart||0,this.inputValue=e.value||"",this._languageDetected||(("rtl"===(e=this.detectTextDirection(e.value))&&"english"===this.currentLanguage||"ltr"===e&&"arabic"===this.currentLanguage)&&this.toggleLanguage(),this._languageDetected=!0),$("#custom-keyboard").show(),this.isShown=!0,setTimeout(function(){this.setFocusToFirstKey()}.bind(this),50))},hide:function(){this.isShown&&(this.lastFocusedKey=document.activeElement,$(".keyboard-key").blur(),$("#custom-keyboard").hide(),this.isShown=!1,this.currentInput&&(this.currentInput.blur(),this.currentInput=null),this.cursorPosition=0,this.inputValue="",key_focused=!1,"search-page"===current_route)&&search_page&&"function"==typeof search_page.focusFirstResult&&setTimeout(function(){search_page.focusFirstResult()},100)},addCharacter:function(e){var t,i;this.currentInput&&(t=this.cursorPosition,e=(i=this.currentInput.value).substring(0,t)+e+i.substring(t),this.currentInput.value=e,this.cursorPosition=t+1,this.inputValue=e,(i=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(i))},handleSpace:function(){this.addCharacter(" ")},handleBackspace:function(){var e,t,i;this.currentInput&&(t=this.cursorPosition,i=this.currentInput.value,t=0<t?(e=i.substring(0,t-1)+i.substring(t),t-1):(e=i,0),this.currentInput.value=e,this.cursorPosition=t,this.inputValue=e,this.currentInput.setSelectionRange(t,t),(i=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(i))},handleEnter:function(){this.currentInput&&(key_focused=!1,"search-page-input"===this.currentInput.id&&(search_page.keywordChange(),setTimeout(function(){search_page&&"function"==typeof search_page.focusFirstResult&&search_page.focusFirstResult()},200)),this.currentInput.blur(),this.hide())},clearAll:function(){var e;this.currentInput&&(this.currentInput.value="",this.currentInput.setSelectionRange(0,0),this.cursorPosition=0,this.inputValue="",(e=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(e))},detectTextDirection:function(e){return e&&/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/.test(e)?"rtl":"ltr"},setFocusToFirstKey:function(){(this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey):($("#keyboard-row-1 .keyboard-key").length?$("#keyboard-row-1 .keyboard-key"):$("#keyboard-row-0 .keyboard-key")).first()).focus()},toggleCase:function(){"arabic"!==this.currentLanguage&&(this.lastFocusedKey=document.activeElement,this.isUpperCase=!this.isUpperCase,this.updateKeys(),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50))},toggleLanguage:function(){this.lastFocusedKey=document.activeElement,this.currentLanguage="english"===this.currentLanguage?"arabic":"english","arabic"===this.currentLanguage&&(this.isUpperCase=!1),this.updateKeys(),this.updateSpecialCharacters(),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50)},toggleSymbols:function(){this.lastFocusedKey=document.activeElement;var e=$("#keyboard-row-special");e.is(":visible")?(e.hide(),$("#keyboard-symbols").text("$%^")):(e.show(),$("#keyboard-symbols").text("abc"),this.updateSpecialCharacters()),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50)},updateKeys:function(){this.createLetterRows();var t=this.layouts[this.currentLanguage].numbers;$("#keyboard-row-0 .keyboard-number").each(function(e){e<t.length&&(e=t[e],$(this).text(e).attr("data-key-value",e))}),$("#keyboard-lang").text("english"===this.currentLanguage?"EN":"AR"),"arabic"===this.currentLanguage?$("#keyboard-shift").hide():$("#keyboard-shift").show()},createLetterRows:function(){var e=this.layouts[this.currentLanguage],e=this.isUpperCase?e.uppercase:e.lowercase;$("#keyboard-row-1 .keyboard-letter-container").empty(),$("#keyboard-row-2 .keyboard-letter-container").empty(),$("#keyboard-row-3 .keyboard-letter-container").empty(),this.createLetterRow(e[0],"#keyboard-row-1 .keyboard-letter-container"),this.createLetterRow(e[1],"#keyboard-row-2 .keyboard-letter-container"),this.createLetterRow(e[2],"#keyboard-row-3 .keyboard-letter-container")},createLetterRow:function(e,t){for(var i=$(t),s=0;s<e.length;s++)i.append('<button class="keyboard-key" tabindex="0" data-key-value="'+e[s]+'">'+e[s]+"</button>")},updateSpecialCharacters:function(){var e=this.layouts[this.currentLanguage].special,t=$("#keyboard-row-special");t.empty();for(var i=0;i<e.length;i++){var s=e[i];t.append('<button class="keyboard-key keyboard-special" tabindex="0" data-key-value="'+s+'">'+s+"</button>")}},render:function(){for(var e=(e='<div id="custom-keyboard" class="keyboard-container" style="display:none;">')+'<div id="keyboard-row-0" class="keyboard-row">'+'<button id="keyboard-lang" class="keyboard-key keyboard-action" tabindex="0">EN</button>',t=0;t<this.layouts.english.numbers.length;t++)e+='<button class="keyboard-key keyboard-number" tabindex="0" data-key-value="'+this.layouts.english.numbers[t]+'">'+this.layouts.english.numbers[t]+"</button>";e+='<button id="keyboard-backspace" class="keyboard-key keyboard-action" tabindex="0"><i class="fas fa-backspace"></i></button></div><div id="keyboard-row-1" class="keyboard-row"><button id="keyboard-symbols" class="keyboard-key keyboard-action" tabindex="0">$%^</button><div class="keyboard-letter-container"></div><button id="keyboard-enter" class="keyboard-key keyboard-action" tabindex="0">Enter</button></div><div id="keyboard-row-2" class="keyboard-row"><div class="keyboard-letter-container"></div><button class="keyboard-key" tabindex="0" data-key-value=":">:</button></div><div id="keyboard-row-3" class="keyboard-row"><button id="keyboard-shift" class="keyboard-key keyboard-action" tabindex="0">⇧</button><button class="keyboard-key" tabindex="0" data-key-value="@">@</button><div class="keyboard-letter-container"></div><button class="keyboard-key" tabindex="0" data-key-value=".">.</button><button class="keyboard-key" tabindex="0" data-key-value="/">/</button><button id="keyboard-clear" class="keyboard-key keyboard-action" tabindex="0">Clear</button></div><div id="keyboard-row-special" class="keyboard-row keyboard-special-row" style="display:none;"></div><div class="keyboard-row"><button id="keyboard-space" class="keyboard-key keyboard-space" tabindex="0" data-key-value=" ">Space</button></div></div>',$("body").append(e),this.createLetterRows()},navigateLeft:function(e){var t=this.getParentRow(e).find(".keyboard-key:visible"),e=t.index(e);(0<e?t.eq(e-1):t.last()).focus()},navigateRight:function(e){var t=this.getParentRow(e).find(".keyboard-key:visible"),e=t.index(e);(e<t.length-1?t.eq(e+1):t.first()).focus()},navigateUp:function(e){var t,i;"keyboard-space"===e.attr("id")?(t=$("#keyboard-row-special").is(":visible")?$("#keyboard-row-special"):$("#keyboard-row-3"),this.focusMiddleKey(t)):(t=this.getParentRow(e),0<(t=(i=$(".keyboard-row:visible")).index(t))?(i=i.eq(t-1),this.focusNearestKey(e,i)):$("#keyboard-space").focus())},navigateDown:function(e){var t=this.getParentRow(e),i=$(".keyboard-row:visible"),t=i.index(t);if(t===i.length-1||"keyboard-space"===e.attr("id"))s=i.first(),this.focusMiddleKey(s);else{var s=t+1,t=i.eq(s);if("keyboard-row-special"===t.attr("id")&&!t.is(":visible")){if(!(s+1<i.length))return void $("#keyboard-space").focus();t=i.eq(s+1)}0<t.find("#keyboard-space").length?$("#keyboard-space").focus():this.focusNearestKey(e,t)}},getParentRow:function(e){e=e.parent();return e=e.hasClass("keyboard-letter-container")?e.parent():e},focusMiddleKey:function(e){var e=e.find(".keyboard-key:visible"),t=Math.floor(e.length/2);e.eq(t).focus()},focusNearestKey:function(e,t){var i=this.getParentRow(e),s=i.find(".keyboard-key:visible").index(e),i=i.width(),e=(e.position().left+e.width()/2)/i,i=t.find(".keyboard-key:visible"),a=t.width()*e,o=null,n=Number.MAX_VALUE;i.each(function(){var e=$(this),t=e.position().left+e.width()/2,t=Math.abs(t-a);t<n&&(n=t,o=e)}),(o||(t=Math.min(s,i.length-1),i.eq(t))).focus()},handleRemoteKeys:function(e){if(this.isShown)switch(e.keyCode){case 13:if(document.activeElement&&"keyboard-enter"===document.activeElement.id)return this.handleEnter(),!0;if(document.activeElement&&$(document.activeElement).hasClass("keyboard-key"))return $(document.activeElement).click(),!0;break;case 27:return this.hide(),!0;case 37:case 38:case 39:case 40:return document.activeElement&&$(document.activeElement).hasClass("keyboard-key")||this.setFocusToFirstKey(),!0}return!1},attachEventHandlers:function(){var i=this,s=!1;function e(t){return function(e){s||(s=!0,t.call(i,e,$(this)),setTimeout(function(){s=!1},100))}}$(document).on("click",".keyboard-key:not(.keyboard-action)",e(function(e,t){t=t.attr("data-key-value")||t.text();this.addCharacter(t)})),$(document).on("click","#keyboard-shift",e(function(){this.toggleCase()})),$(document).on("click","#keyboard-lang",e(function(){this.toggleLanguage()})),$(document).on("click","#keyboard-space",e(function(){this.handleSpace()})),$(document).on("click","#keyboard-backspace",e(function(){this.handleBackspace()})),$(document).on("click","#keyboard-enter",e(function(){this.handleEnter()})),$(document).on("click","#keyboard-clear",e(function(){this.clearAll()})),$(document).on("click","#keyboard-symbols",e(function(){this.toggleSymbols()})),$(document).on("focus",".keyboard-key",function(){i.isShown&&(i.lastFocusedKey=this)}),$(document).on("keydown",".keyboard-key",function(e){if(i.isShown){var t=$(this);switch(e.keyCode){case 37:i.navigateLeft(t),e.preventDefault();break;case 39:i.navigateRight(t),e.preventDefault();break;case 38:i.navigateUp(t),e.preventDefault();break;case 40:i.navigateDown(t),e.preventDefault();break;case 13:"keyboard-enter"===t.attr("id")?i.handleEnter():t.click(),e.preventDefault();break;case 27:i.hide(),e.preventDefault()}}})}},utilities={formatTimeStringToSeconds:function(e){var t;return"string"!=typeof e?(console.error("Invalid input: duration must be a string"),0):(t=0,3===(e=e.split(":").map(Number)).length?t=(t=(t+=3600*e[0])+60*e[1])+e[2]:2===e.length?t=(t+=60*e[0])+e[1]:1===e.length&&(t+=e[0]),t)},getPercentage:function(e,t){return Math.floor(e/t*100)},isNewlyAdded:function(e){return Math.floor(Date.now()/1e3)-e<=1296e3},isRecentlyModifiedSeries:function(e){return Math.floor(Date.now()/1e3)-parseInt(e,10)<=1296e3},compareTimestamps:function(e){var t=new Date;if(isNaN(String(e)))try{var i=e.split(" "),s=i[0].split("-"),a=i[1].split(":"),o=[s[0],s[1].padStart(2,"0"),s[2].padStart(2,"0")].join("-"),n=[a[0].padStart(2,"0"),a[1].padStart(2,"0")].join(":");if(r=new Date(o+"T"+n+":00"),isNaN(r.getTime()))throw new Error("Invalid date format")}catch(e){throw new Error("Invalid timestamp or date format. Expected Unix timestamp or 'YYYY-MM-DD HH:MM' format")}else{var i=String(e),r=i.length<=10?new Date(1e3*parseInt(i)):new Date(parseInt(i));if(isNaN(r.getTime()))throw new Error("Invalid timestamp value")}s=t.getTime(),a=r.getTime();return Math.round((a-s)/864e5)},convertToTimestamp:function(e){var t,i;if(e.match(/^\d{4}-\d{2}-\d{2}$/))t=e.split("-"),i=new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10));else{if(!e.match(/^\d{2}-\d{2}-\d{4}$/))throw new Error("Invalid date format. Please use either 'YYYY-MM-DD' or 'MM-DD-YYYY'");t=e.split("-"),i=new Date(parseInt(t[2],10),parseInt(t[0],10)-1,parseInt(t[1],10))}if((e=i)instanceof Date&&!isNaN(e))return i.getTime();throw new Error("Invalid date. Please check if the date exists.")},timestampDiffInDays:function(e){return Math.ceil((e-(new Date).getTime())/864e5)},getCurrentDate:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")},getCurrentDateTimeFormatted:function(){var e=new Date,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],i=e.getDate();return t+". "+(i<10?"0":"")+i+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()},pickProperties:function(e,t){for(var i={},s=0;s<t.length;s++){var a=t[s];e.hasOwnProperty(a)&&(i[a]=e[a])}return i},shuffleArray:function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[--s],e[s]=e[i],e[i]=t;return e},getTopRatedMovies:function(e){if(e&&0!=e.length){for(var t=e.sort(function(e,t){e=parseFloat(e.rating)||0;return(parseFloat(t.rating)||0)-e}),i=parseFloat(t[0].rating),s=[],a=0;a<t.length&&parseFloat(t[a].rating)==i;a++)s.push(t[a]);if(10<s.length)for(a=s.length-1;0<a;a--){var o=Math.floor(Math.random()*(a+1)),n=s[a];s[a]=s[o],s[o]=n}else if(s.length<10){var r=10;s.length<10&&(r=s.length+1);for(a=s.length;a<r;a++)s.push(e[a])}return(10<=s.length?s:t).slice(0,10)}},clampNumber:function(e,t,i){return Math.max(t,Math.min(e,i))}},settings={bg_img_url:"",bg_img_name:"",playlist_id:0,playlist:{},vod_sort:"default",series_sort:"default",live_sort:"default",sort_keys:{added:"Added",number:"Number",rating:"Rating",a_z:"A-Z",z_a:"Z-A",name:"Name",default:"Default"},language:"en",time_format:"24",playlist_type:"",stream_format:"default",font_size:"normal",tmdb_choice:"on",live_initialization_choice:"default",subtitle_size:50,subtitle_bg:"transparent",initFromLocal:function(){var t=localStorage.getItem(storage_id+"bg_img_url");if(t){if(t.includes("http"))for(var e=t.split("/"),i=e[e.length-1].trim(),s=0;s<themes.length;s++){var a=themes[s];if(a.url==i){t=a.url;break}}this.bg_img_url=t}this.bg_img_name=localStorage.getItem(storage_id+"bg_img_name"),t=localStorage.getItem(storage_id+"playlist_id"),this.playlist_id=t||0;var o=this;["vod_sort","series_sort","live_sort","stream_format","font_size","tmdb_choice","live_initialization_choice"].map(function(e){(t=localStorage.getItem(storage_id+e))&&(o[e]=t)}),(t=localStorage.getItem(storage_id+"language"))?this.language=t:void 0!==navigator.language&&(e=navigator.language.split("-"),this.language=e[0]),(t=localStorage.getItem(storage_id+"subtitle_size"))&&(this.subtitle_size=parseInt(t)),(t=localStorage.getItem(storage_id+"subtitle_bg"))&&(this.subtitle_bg=t)},saveSettings:function(e,t,i){this[e]=t,"object"!==i&&"array"!==i||(t=JSON.stringify(t)),localStorage.setItem(storage_id+e,t)},resetDefaultValues:function(){this.vod_sort="default",this.series_sort="default",this.live_sort="default",this.language="en",this.playlist_id="",this.time_format="24",this.stream_format="default",this.font_size="normal",this.tmdb_choice="on",this.live_initialization_choice="default",this.playlist={},this.subtitle_size=50,this.subtitle_bg="transparent"}},panel_urls=["https://bobapi.ibo-dev.com/api","https://bobapp.ibo-dev.com/api","https://api.bobplayers.com/api","https://bobplayer.com/api","https://bobplayers.com/api"],time_difference_with_server=0,is_device_low=!1,app_loading=!1,current_route="login",default_movie_icon=HOST+"app_src_min/images/logo.png",parent_account_password="0000",mac_valid=!0,playlist_urls=[],themes=[{name:"Movies Area",url:"521487.jpg"},{name:"Future",url:"125984.png"},{name:"Honor Wallpaper",url:"166531.jpg"},{name:"Red Bubbles",url:"453684.png"},{name:"Red Strings",url:"654236.png"},{name:"BOB Classic",url:"698079.png"},{name:"Modern Look",url:"753215.png"},{name:"Red Lines",url:"765321.png"},{name:"Main Background",url:"784319.jpg"},{name:"Sharp Lines",url:"951354.png"},{name:"Cinema",url:"953645.png"}],languages=[],current_words=[],notification={},client_offset=moment(new Date).utcOffset(),storage_id="bz3rYzUIC7_",platform="samsung",samsung_version="1.1.4",lg_version="1.0.6",vidaa_version="1.0.6",api_succeed=!0,current_timer=null,key_focused=!1,tmdb_api_key="a2890097ef30d3503c5ba374ca0a00f9",tmdb_prefix_url="https://api.themoviedb.org/3",tmdb_img_url="https://image.tmdb.org/t/p/",storageMoviesInfo=JSON.parse(localStorage.getItem(storage_id+"saved-movie-info"))||{},agent_urls=["https://babyeducate.com/api","https://babyeducationonline.com/api"],main_domain="iboiptv.com",env="production",fontSize=localStorage.getItem(storage_id+"font_size");function showLoader(e){(e=void 0===e?!0:e)?$("#loader").show():$("#loader").hide()}function saveData(e,t){window[e]=t}function getMovieUrl(e,t,i){if("live"===t)if("default"!=settings.stream_format)i=settings.stream_format;else{var s=settings.playlist.origin_url;try{var a=s.split("output="),o=a[1]||"";"mpegts"===o||"ts"===o?i="ts":"hls"!==o&&"m3u8"!==o||(i="m3u8"),console.log("here extension1="+o,i)}catch(e){}}return api_host_url+"/"+t+"/"+user_name+"/"+password+"/"+e+"."+i}function moveScrollPosition(e,t,i,s,a,o){function n(e,t){return parseInt($(e).css(t).replace("px",""))}o=o||!1;var r,l,c,d=$(t).position();return"vertical"===i?(i=n(e,"height"),l=n(t,"height"),r=0,!s||a?(d.top+l>=i&&(r=d.top+l-i),d.top<0&&(r=d.top),$(e).animate({scrollTop:"+="+r},10,"swing")):(c=d.top+l/2-i/2,$(e).animate({scrollTop:"+="+c},100,"linear")),r):(l=n(e,"width"),i=n(t,"width"),c=0,!s||a?(d.left+i>=l&&(c=d.left+i-l),d.left<0&&!o?c=d.left:d.left<50&&o&&(c=d.left-100)):c=d.left+i/2-l/2,$(e).animate({scrollLeft:"+="+c},100,"linear"),c)}function showToast(e,t){$("#toast-body").html("<h3>"+e+"<br>"+t+"</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")}function getMinute(e){e=new Date(e);return parseInt(e.getTime()/60/1e3)}function goHomePageWithMovieType(e){try{var t=$("#menu-wrapper").find("*[data-type="+e+"]")[0];$(t).trigger("click"),"live-tv"===e?($("#home-page-movie-logo").hide(),$("#home-page-movie-logo").closest(".player-container").css({background:"#111"}),$("#search-button-wrapper").hide(),$("#home-page-video-preview").show(),home_page.reEnter()):(home_page.player=new AVPlayer("home-page-video-preview"),home_page.preview_url&&home_page.player.playAsync(home_page.preview_url)),current_route="home-page",$("#home-page-right-part-content-2").hide(""),$("#home-page-slider-container").css({opacity:0}),$("#home-page-slider-container").slick("unslick"),setTimeout(function(){$("#home-page-slider-container").css({opacity:1}),$("#home-page-slider-container").slick({autoplay:!0,arrows:!1,dots:!0,variableWidth:!1,autoplaySpeed:5e3})},1500),$("#home-page-right-part-content-1").css({height:"100vh"}),$("#home-page").css({height:"100vh"})}catch(e){showToast("Sorry","Some Error occured")}}function changeBackgroundImage(){var e=settings.bg_img_url;e.includes("http")?api_succeed&&$("#app").css({"background-image":"url("+e+")"}):(e=HOST+"app_src_min/images/backgrounds/"+e,$("#app").css({"background-image":"url("+e+")"}))}function parseM3uResponse(e,t){var i=0;if("general"===e){var s=[],a=[],o=[],n=[],r=[],l=[],c=((v=(t=t.replace(/['"]+/g,"")).split(/#EXTINF:-{0,1}[0-9]{1,} {0,},{0,}/gm)).splice(0,1),[]);(new Date).getTime();if(t.includes("tvg-"))for(var d={},h={},_={},u=0;u<v.length;u++)try{c=v[u].split("\n"),i++,(w=1<c[1].length?c[1]:"").includes("http:")&&(e="live",(w.includes("/movie/")||w.includes("vod")||w.includes("=movie")||w.includes("==movie=="))&&(e="vod"),w.includes("/series/")&&(e="series"),m=1<(f=c[0].trim().split(",")).length?f[1]:"",y=splitStrings(f[0],["tvg-","channel-","group-"]),p={stream_id:"",name:m,stream_icon:"",title:""},b="All",y.map(function(e){var e=e.split("="),t=e[0],i=e[1];switch(t){case"id":p.stream_id=i;break;case"name":p.name=""!=i.trim()?i:m;break;case"logo":p.stream_icon=i;break;case"title":""==(b=i.split(",")[0])&&(b="Uncategorized")}}),""===p.stream_id.trim()&&(p.stream_id=p.name),p.url=w,p.num=i,"live"===e&&(void 0===d[b]&&(k={category_id:d[b]=b,category_name:b},s.push(k)),p.category_id=b,a.push(p)),"vod"===e&&(void 0===h[b]&&(k={category_id:h[b]=b,category_name:b},n.push(k)),p.category_id=b,o.push(p)),"series"===e)&&(void 0===_[b]&&(k={category_id:_[b]=b,category_name:b},r.push(k)),p.category_id=b,l.push(p))}catch(e){console.log("parsing m3u error "+u,e)}else{s=[{category_id:"all",category_name:"All"}],n=[{category_id:"all",category_name:"All"}],r=[{category_id:"all",category_name:"All"}];for(u=0;u<v.length;u++){c=v[u].split("\n");try{var m=c[0],e="live",p=((w=c[1]).includes("/movie/")&&(e="movie"),w.includes("/series/")&&(e="series"),{});m=m.trim(),p.stream_id=m,p.name=m,p.stream_icon="",p.num=u+1,p.category_id="all",p.url=w,"live"===e&&a.push(p),"series"===e&&l.push(p),"movie"===e&&o.push(p)}catch(e){console.log(c[0]),console.log(e)}}}1<s.length&&s.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<n.length&&n.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<r.length&&r.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),LiveModel.setCategories(s),LiveModel.setMovies(a),LiveModel.insertMoviesToCategories(),VodModel.setCategories(n),VodModel.setMovies(o),VodModel.insertMoviesToCategories(),SeriesModel.setCategories(r);var g=parseSeries(l);SeriesModel.setMovies(g),SeriesModel.insertMoviesToCategories()}if("type1"===e){var v,s=[],a=[],o=[],n=[],r=[],l=[],c=((v=(t=t.replace(/['"]+/g,"")).split(/#EXTINF:-{0,1}[0-9]{1,} {0,},{0,}/gm)).splice(0,1),[]);(new Date).getTime();if(t.includes("tvg-"))for(var f,y,b,k,d={},h={},_={},u=0;u<v.length;u++)try{c=v[u].split("\n"),i++,(w=1<c[1].length?c[1]:"").includes("http:")&&(e="live",(w.includes("/movie/")||w.includes("vod")||w.includes("=movie")||w.includes("==movie=="))&&(e="vod"),w.includes("/series/")&&(e="series"),m=1<(f=c[0].trim().split(",")).length?f[1]:"",y=splitStrings(f[0],["tvg-","channel-","group-"]),p={stream_id:"",name:m,stream_icon:"",title:""},b="All",y.map(function(e){var e=e.split("="),t=e[0],i=e[1];switch(t){case"id":p.stream_id=i;break;case"name":p.name=""!=i.trim()?i:m;break;case"logo":p.stream_icon=i;break;case"title":""==(b=i.split(",")[0])&&(b="Uncategorized")}}),""===p.stream_id.trim()&&(p.stream_id=p.name),p.url=w,p.num=i,"live"===e&&(void 0===d[b]&&(k={category_id:d[b]=b,category_name:b},s.push(k)),p.category_id=b,a.push(p)),"vod"===e&&(void 0===h[b]&&(k={category_id:h[b]=b,category_name:b},n.push(k)),p.category_id=b,o.push(p)),"series"===e)&&(void 0===_[b]&&(k={category_id:_[b]=b,category_name:b},r.push(k)),p.category_id=b,l.push(p))}catch(e){console.log("parsing m3u error "+u,e)}else{s=[{category_id:"all",category_name:"All"}],n=[{category_id:"all",category_name:"All"}],r=[{category_id:"all",category_name:"All"}];for(u=0;u<v.length;u++){c=v[u].split("\n");try{var w,m=c[0],e="live",p=((w=c[1]).includes("/movie/")&&(e="movie"),w.includes("/series/")&&(e="series"),{});m=m.trim(),p.stream_id=m,p.name=m,p.stream_icon="",p.num=u+1,p.category_id="all",p.url=w,"live"===e&&a.push(p),"series"===e&&l.push(p),"movie"===e&&o.push(p)}catch(e){console.log(c[0]),console.log(e)}}}1<s.length&&s.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<n.length&&n.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<r.length&&r.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),LiveModel.setCategories(s),LiveModel.setMovies(a),LiveModel.insertMoviesToCategories(),VodModel.setCategories(n),VodModel.setMovies(o),VodModel.insertMoviesToCategories(),SeriesModel.setCategories(r);g=parseSeries(l);SeriesModel.setMovies(g),SeriesModel.insertMoviesToCategories()}}function parseSeries(e){var s=[],o={},n={},r={},a=(e.map(function(e){try{var t=e.name.split(/ S[0-9]{2}/),i=e.name.match(/S[0-9]{2}/)[0],s=(i="Season "+(i=i.trim().replace("S","")),t[0].trim()),a=t[1].trim().replace("E","");void 0===o[s]?(n={},(r={})[i]=[{name:a,url:e.url,id:a,info:{},title:"Episode "+a}],n[i]={name:i,cover:HOST+"app_src_min/images/series.png"},o[s]={series_id:s,name:s,cover:e.stream_icon,youtube_trailer:"",category_id:e.category_id,rating:"",rating_5based:"",genre:"",director:"",cast:"",plot:"",season_map:n,episodes:r}):(void 0===n[i]?(r[i]=[{name:a,url:e.url,id:a,info:{},title:"Episode "+a}],n[i]={name:i,cover:HOST+"app_src_min/images/series.png"},o[s].season_map=n):r[i].push({name:i,url:e.url,id:i,info:{},title:"Episode "+a}),o[s].episodes=r)}catch(e){}}),console.log("Here Series Map",o),0);return Object.keys(o).map(function(e){a++;var t=o[e],i=[];try{Object.keys(t.season_map).map(function(e){i.push(t.season_map[e])})}catch(e){}delete t.season_map,t.num=a,t.seasons=i,s.push(t)}),s}function splitStrings(e,t){for(var i=[],s=0;s<t.length;s++){var a=e.split(t[s]);if(s==t.length-1)for(var o=0;o<a.length;o++)""!=a[o].trim()&&i.push(a[o]);else for(o=0;o<a.length;o++)""!=a[o].trim()&&splitStrings(a[o],t.slice(s+1)).map(function(e){""!==e.trim()&&i.push(e)});return i}}function getAtob(e){var t=e;try{return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){console.log(e)}return t}function checkForAdult(e,t,i,s){if("off"==parent_account_password&&s)return!1;var a,s=!1;if("movie"===t){for(var o=0;o<i.length;o++)if(e.category_id==i[o].category_id){a=i[o];break}}else a=e;t=a.category_name.toLowerCase();return s=t.includes("xxx")||t.includes("adult")||t.includes("porn")?!0:s}function pickPanelUrl(i){for(var e,t,s=[],a=(panel_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),o=1/s.length,n=0;n<s.length;n++)if(n*o<=a&&a<=o*(n+1)){e=s[n],t=n;break}return[t,e]}function pickAgentUrl(i){for(var e,t,s=[],a=(agent_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),o=1/s.length,n=0;n<s.length;n++)if(n*o<=a&&a<=o*(n+1)){e=s[n],t=n;break}return[t,e]}function setSelectionRange(t){setTimeout(function(){var e=$(t).val();$(t)[0].setSelectionRange(e.length,e.length)},200)}function getSortedMovies(e,t){var i=[],s="number"===t?"num":"a_z"!==t&&"z_a"!==t?t:"name";if(0==e.length)return e;if(void 0===e[0][s])return e;var a=1;switch(t){case"rating":case"number":case"added":case"last_modified":a=1,"number"===t&&(a=-1),i=e.sort(function(e,t){e=parseFloat(e[s]),isNaN(e)&&(e=0),t=parseFloat(t[s]);return isNaN(t)&&(t=0),a*(e<t?1:t<e?-1:0)});break;case"a_z":case"z_a":case"name":a="a_z"===t||"name"===t?1:-1,i=e.sort(function(e,t){return a*e[s].localeCompare(t[s])});break;case"default":return e}return i}function updateCurrentTime(){var e=moment().format("hh:mm A");$(".current-time").text(e)}function parseM3uUrl(e){var i,s,t=e.includes("username=")&&e.includes("password=")?"xc":"general",a="xc"===t?((a=e.split("?"))[1].split("&").map(function(e){var e=e.split("="),t=e[0],e=e[1];"username"===t.toLowerCase()&&(i=e),"password"===t.toLowerCase()&&(s=e)}),a[0].replace("/get.php","")):e;return{playlist_type:t,url:a,username:i,password:s}}function getEncryptKey(e){for(var t="";t.length<e;t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(62*Math.random()|0));return t}function getEncryptKeyPosition(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i=0;i<t.length;i++)if(t[i]==e)return i}function getEncryptPositionChar(e){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(e)}function encryptRequest(e){var e=JSON.stringify(e),e=btoa(e),t=parseInt(30*Math.random()),i=(t<20&&(t=20),Math.floor(Math.random()*e.length)),s=(42<=i&&(i=42),getEncryptKey(t)),s=e.slice(0,i).concat(s).concat(e.slice(i));return getEncryptPositionChar(i)+getEncryptPositionChar(t)+s}function decryptResponse(e){var e=e.data,t=getEncryptKeyPosition(e[e.length-2]),i=getEncryptKeyPosition(e[e.length-1]),e=getAtob((e=e.slice(0,e.length-2)).slice(0,t).concat(e.slice(t+i)));return JSON.parse(e)}function newEncryptRequest(e,t){return CryptoJS.AES.encrypt(JSON.stringify(e),t).toString()}function newDecryptResponse(e,t){return JSON.parse(CryptoJS.AES.decrypt(e,t).toString(CryptoJS.enc.Utf8))}function changeLocalStorageKeysForPlaylist(e,s){for(var a=[],t=localStorage.length-1;0<=t;t--){var o=localStorage.key(t);e.map(function(e,t){var i;o.includes(e)&&o.includes(storage_id)&&(i=localStorage.getItem(o),e=o.replace(e,s[t]),localStorage.setItem(e,i),a.push(o))})}a.map(function(e){localStorage.removeItem(e)})}function removeLocalStorageKeysForPlaylist(e){for(var t=[],i=localStorage.length-1;0<=i;i--){var s=localStorage.key(i);e.map(function(e){s.includes(storage_id)&&s.includes(e)&&t.push(s)})}t.map(function(e){localStorage.removeItem(e)})}function checkActivePlaylist(){return!(!settings.playlist_id||0==Object.keys(settings.playlist).length)||(showToast("Sorry","No active playlist now<br>Please select one playlist in change playlist page"),!1)}function makeRearrangeArray(e,t,i){t=e.splice(t,1)[0];return e.splice(i,0,t),e}function getRealMovieName(e){for(var e=e.split("-"),t=(1<e.length?e[1]:e[0]).split("("),e=t[0].trim(),i="",s="",a=1;a<t.length;a++){var o=t[a].replace(")","").trim();isNaN(o)?i=o:s=parseInt(o)}return{name:e,country:i,year:s}}function hideImg(e){$(e).hide(),$(".vod-series-background-img-overlay").hide()}function checkVerticalMovable(e,t,i,s){var a=i<t&&s<0?!1:!0;return a=(Math.ceil(e/t)-1)*t<=i&&0<s?!1:a}function handleWeatherFetchAndStore(){var e=JSON.parse(localStorage.getItem(storage_id+"weather-forecast")),t=(console.log("Stored Weather Data:",e),-20);if(e&&e.date&&(console.log("Date detected"),t=utilities.compareTimestamps(e.date)),e&&e.timestamp&&(console.log("Timestamp detected"),t=utilities.compareTimestamps(e.timestamp)),!e||t<=-13)try{$.getJSON("http://api.weatherapi.com/v1/forecast.json?key=0c1f9db9b99649f3a2b124503241310&q="+ip_address+"&days=14").done(function(e){console.log("Weather response",e);e={date:e.location.localtime,country:e.location.country,city:e.location.name,forecast:e.forecast.forecastday};localStorage.setItem(storage_id+"weather-forecast",JSON.stringify(e)),handleWeatherFetchAndStore()}).catch(function(e){console.log("Weather API Error",e)})}catch(e){console.log("Error getting weather data from api",e)}else weatherCountry=e.country,weatherCity=e.city,weatherForecast=e.forecast,weatherToday=binarySearchForecastDays(weatherForecast),weatherNow=binarySearchForecastHours(weatherToday.hour)}function binarySearchForecastDays(e){for(var t=new Date,i=(t.setUTCHours(0,0,0,0),Math.floor(t.getTime()/1e3)),s=0,a=e.length-1;s<=a;){var o=Math.floor((s+a)/2);if(e[o].date_epoch===i)return e[o];e[o].date_epoch<i?s=o+1:a=o-1}return 0<=a&&e[a].date_epoch<=i?e[a]:s<e.length?e[s]:null}function binarySearchForecastHours(e){for(var t=new Date,i=Math.floor(t.getTime()/1e3),s=0,a=e.length-1;s<=a;){var o=Math.floor((s+a)/2);if(e[o].time_epoch<=i&&(o===e.length-1||e[o+1].time_epoch>i))return e[o];e[o].time_epoch>i?a=o-1:s=o+1}return s<e.length?e[s]:null}fontSize&&"large"===fontSize&&document.body.classList.add("large-font"),String.prototype.endsWith||(String.prototype.endsWith=function(e){return e=String(e),this.slice(-e.length)===e}),Array.prototype.map||(Array.prototype.map=function(e,t){if(null==this)throw new TypeError("this is null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var i=Object(this),s=i.length>>>0,a=new Array(s),o=0;o<s;o++)o in i&&(a[o]=e.call(t,i[o],o,i));return a}),Array.prototype.includes||(Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(o,n,r){return function(e,t){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var i=o(this),s=i.length>>>0,a=r(0|t,s);if(a<0)a=n(0,s+a);else if(s<=a)return-1;if(void 0===e){for(;a!==s;++a)if(void 0===i[a]&&a in i)return a}else if(e!=e){for(;a!==s;++a)if(i[a]!=i[a])return a}else for(;a!==s;++a)if(i[a]===e)return a;return-1}}(Object,Math.max,Math.min)),String.prototype.includes||(String.prototype.includes=function(e){return!!~this.indexOf(e)}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))});var isOnline=!0,checkInterval=null,isOnline=!0,checkInterval=null;function checkConnection(){var o,n;o=["https://vidaa.bobplayers.com","https://vidaa.bobplayers.com"],n=0,function e(){var t,i,s,a;n<o.length?(t=o[n],i=function(){},s=function(){n++,e()},(a=new XMLHttpRequest).open("GET",t,!0),a.onreadystatechange=function(){4===a.readyState&&(200<=a.status&&a.status<300?(handleUIOnlineStatus(!0),i):s)()},a.send()):handleUIOnlineStatus(!1)}()}function handleUIOnlineStatus(e){!0===e?($("#connection-status").removeClass("offline"),$("#connection-status").addClass("online"),isOnline||(isOnline=!0,clearInterval(checkInterval),checkInterval=setInterval(checkConnection,3e4))):($("#connection-status").removeClass("online"),$("#connection-status").addClass("offline"),isOnline&&(isOnline=!1,clearInterval(checkInterval),checkInterval=setInterval(checkConnection,5e3)))}function checkDevicePerformance(s){var e,t={frameThreshold:30,testDuration:500,iterations:1e3};for(e in s=s||{},t)s.hasOwnProperty(e)||(s[e]=t[e]);function a(e){if(r){n++;for(var t=0;t<s.iterations;t++)l.style.transform="rotate("+t+"deg)",Math.sqrt(1e4*Math.random());if(e-o<s.testDuration)requestAnimationFrame(a);else{r=!1;var e=performance.now()-o,i=n/(e/1e3),e=(document.body.removeChild(l),console.log("Performance Test Results:"),console.log("- Frames rendered:",n),console.log("- Time elapsed:",e.toFixed(2)+"ms"),console.log("- Average FPS:",i.toFixed(2)),console.log("- Target FPS:",s.frameThreshold),i>=s.frameThreshold);if(e){is_device_low=false;document.body.classList.add("allow-transition")}else{is_device_low=true;document.body.classList.remove("allow-transition")}console.log("Test passed:",e)}}}var o=performance.now(),n=0,r=!0,l=document.createElement("div");l.style.position="absolute",l.style.left="-9999px",document.body.appendChild(l);requestAnimationFrame(a)}checkConnection(),checkInterval=setInterval(checkConnection,3e4);var media_player,clearCachedMoviesInfo=function(){storageMoviesInfo&&(storageMoviesInfo={},localStorage.removeItem(storage_id+"saved-movie-info"))};function initKeys(){var e;if("samsung"===platform){var t,i;try{for(i=tizen.tvinputdevice.getSupportedKeys(),t=0;t<i.length;t++)i[t].name,i[t].code,tizen.tvinputdevice.registerKey(i[t].name);tizen.tvinputdevice.unregisterKey("VolumeUp"),tizen.tvinputdevice.unregisterKey("VolumeDown"),tizen.tvinputdevice.unregisterKey("VolumeMute")}catch(e){}e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,RETURN:10009,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}}else"lg"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:461,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}:"vidaa"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072,RETURN:8,PLAY_PAUSE:463,MediaPlayPause:463}:"windows"===platform&&(e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:27,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072});window.tvKey=e}function initPlayer(){media_player="samsung"===platform?{videoObj:null,parent_id:"",STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},current_time:0,reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",init:function(e,t){this.videoObj=null,this.parent_id=t,this.state=this.STATES.STOPPED,this.parent_id=t,this.current_time=0,this.reconnect_count=0,this.url="",this.videoObj=document.getElementById(e),$("#"+t).find(".video-error").hide(),$(".video-resolution").text(""),$("#"+this.parent_id).find(".subtitle-container").html("").hide()},playAsync:function(e){if(this.url=e,$("#"+this.parent_id).find(".video-error").hide(),$(".video-loader").show(),!(this.state>this.STATES.STOPPED)){if(!this.videoObj)return 0;try{console.log(e),webapis.avplay.open(e),this.setupEventListeners(),this.setDisplayArea(),webapis.avplay.setBufferingParam("PLAYER_BUFFER_FOR_PLAY","PLAYER_BUFFER_SIZE_IN_SECOND",3);var o=this;webapis.avplay.prepareAsync(function(){$(".video-loader").hide(),o.reconnect_count=0,o.state=o.STATES.PLAYING,webapis.avplay.play(),$("#"+o.parent_id).find(".video-total-time").text(o.formatTime(webapis.avplay.getDuration()/1e3)),$("#"+o.parent_id).find(".video-error").hide();var e={min:0,max:webapis.avplay.getDuration()/1e3};$("#"+o.parent_id).find(".video-progress-bar-slider").attr(e),$("#"+o.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+o.parent_id).find(".video-current-time").text("00:00"),$("#"+o.parent_id).find(".video-reconnect-message").hide(),"vod-series-player-video"===current_route&&vod_series_player_page.showResumeBar();try{for(var t=webapis.avplay.getCurrentStreamInfo(),i=0;i<t.length;i++)if("VIDEO"===t[i].type){var s,a=JSON.parse(t[i].extra_info);a.Width&&a.Height&&(s=a.Width+" x "+a.Height,$(".video-resolution").text(s));break}}catch(e){console.log(e)}},function(){$(".video-loader").hide(),$("#"+o.parent_id).find(".video-error").show(),o.reconnect_count<o.reconnect_max_count&&o.tryReconnect()})}catch(e){$(".video-loader").hide(),$("#"+this.parent_id).find(".video-error").show(),this.reconnect_count<this.reconnect_max_count&&this.tryReconnect()}}},play:function(){this.state=this.STATES.PLAYING;try{webapis.avplay.play()}catch(e){}},pause:function(){this.state=this.STATES.PAUSED;try{webapis.avplay.pause()}catch(e){}},stop:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.stop()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},close:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.close()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_count+=1,this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{console.log("reconnect count=",this.reconnect_count),$("#"+this.parent_id).find(".video-reconnect-message").show(),this.state=this.STATES.STOPPED;var e=this;try{webapis.avplay.close()}catch(e){}this.reconnect_timer=setTimeout(function(){e.playAsync(e.url)},6e3)}},setDisplayArea:function(e,t){if(webapis&&webapis.avplay){var i=null,i="channel"==t?"#channel-page-video-lg":"#vod-series-player-video-lg";if(e)try{var s=$(this.videoObj).parent().width(),a=$(this.videoObj).parent().height();switch(e){case"1:1":$(i).css("object-fit","fill"),r=l=a;break;case"16:9":$(i).css("object-fit","fill"),l=a,r=Math.round(l*(16/9));break;case"4:3":$(i).css("object-fit","fill"),l=a,r=Math.round(l*(4/3));break;case"21:9":$(i).css("object-fit","fill"),r=window.innerWidth,l=Math.round(r*(9/21));break;case"stretch":$(i).css("object-fit","fill"),r=s,l=a;break;default:$(i).css("object-fit","contain"),r=s,l=a}var o=Math.round((s-r)/2),n=Math.round((a-l)/2);(s=$(this.videoObj).parent().width())<r&&(o-=(r-s)/2),webapis.avplay.setDisplayRect(Math.round(o),Math.round(n),Math.round(r),Math.round(l)),console.log("Samsung Display Rectangle:",{left:Math.round(o),top:Math.round(n),width:Math.round(r),height:Math.round(l)})}catch(e){console.log("Error in setDisplayRect",e)}else{var n=$(this.videoObj).offset().top,o=$(this.videoObj).offset().left,r=parseInt($(this.videoObj).width()),l=parseInt($(this.videoObj).height());webapis.avplay.setDisplayRect(o,n,r,l)}}else console.log("Samsung webapis.avplay is not available")},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},setupEventListeners:function(){var a=this;webapis.avplay.setListener({onbufferingstart:function(){$("#"+a.parent_id).find(".video-loader").show()},onbufferingprogress:function(e){},onbufferingcomplete:function(){$("#"+a.parent_id).find(".video-loader").hide()},onstreamcompleted:function(){$("#"+a.parent_id).find(".video-error").hide(),webapis.avplay.stop(),a.state=a.STATES.STOPPED,$("#"+a.parent_id).find(".progress-amount").css({width:"100%"}),"vod-series-player-video"===current_route&&vod_series_player_page.showNextVideo(1,!0)},oncurrentplaytime:function(e){a.current_time=e,$("#"+a.parent_id).find(".video-error").hide(),"vod-series-player-video"===current_route&&(vod_series_player_page.current_time=e/1e3),0<webapis.avplay.getDuration()&&($("#"+a.parent_id).find(".video-current-time").html(a.formatTime(e/1e3)),$("#"+a.parent_id).find(".video-progress-bar-slider").val(e/1e3).change())},ondrmevent:function(e,t){},onerror:function(e,t){$("#"+a.parent_id).find(".video-error").show()},onsubtitlechange:function(e,t,i,s){$("#"+a.parent_id).find(".subtitle-container").html(""),$("#"+a.parent_id).find(".subtitle-container").html(t)}})},onDeviceReady:function(){document.addEventListener("pause",this.onPause),document.addEventListener("resume",this.onResume)},onPause:function(){this.pause()},onResume:function(){this.play()},getSubtitleOrAudioTrack:function(t){var e=[];if("develop"==env)return e=[{extra_info:{fourCC:"un",subtitle_type:"0",track_lang:"un",index:3,type:"TEXT"}}];var i="",s="TEXT"===t?"track_lang":"language",a="TEXT"===t?"Subtitle ":"Track ";try{for(var o,n,r=webapis.avplay.getTotalTrackInfo(),l=0;l<r.length;l++)try{r[l].type==t&&(o=JSON.parse(r[l].extra_info),"TEXT"===t||"AUDIO"===t?(n=o[s].trim(),i.includes(n)||""===n?""===n&&(o[s]=a+(l+1),r[l].extra_info=o,e.push(r[l])):(i+=", "+n,o[s]=void 0!==language_codes[n]?language_codes[n]:n,r[l].extra_info=o,e.push(r[l]))):(r[l].extra_info=o,e.push(r[l])))}catch(e){console.log(t,e)}}catch(e){}return e},setSubtitleOrAudioTrack:function(e,t){try{webapis.avplay.setSelectTrack(e,t)}catch(e){}"TEXT"===e&&(-1==t?$("#"+this.parent_id+" .subtitle-container").hide():$("#"+this.parent_id+" .subtitle-container").show())}}:{id:"",videoObj:null,parent_id:"",current_time:0,STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},subtitles:[],tracks:[],reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",srt_map:{},movie_list_id:null,init:function(e,t){this.reconnect_count=0,this.url="",this.srt_map={},this.movie_list_id=null,e.includes("-lg")||(e+="-lg"),"lg"!=platform&&($("video").addClass("hide"),$("#"+e).removeClass("hide"),$("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden")),this.id=e,this.videoObj=null,this.parent_id=t,this.current_time=0,$("#"+t).find(".video-error").hide(),this.state=this.STATES.STOPPED,this.videoObj=document.getElementById(e),this.subtitles=[],this.tracks=[],$("#"+this.parent_id).find(".subtitle-container").html("").hide(),SrtOperation.deStruct();var s=this.videoObj,a=this,e=document.getElementById("channel-page-video"),i=document.getElementById("vod-series-player-video");e&&(e.onload=function(){$(this).css("visibility","visible")}),i&&(i.onload=function(){$(this).css("visibility","visible")}),this.videoObj.addEventListener("error",function(e){console.log("Error"),a.tryReconnect(),$("#"+a.parent_id).find(".video-error").show()}),this.videoObj.addEventListener("canplay",function(e){$("#"+a.parent_id).find(".video-error").hide(),"lg"!=platform&&($("#channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible"))}),this.videoObj.addEventListener("durationchange",function(e){}),this.videoObj.addEventListener("loadeddata",function(e){var t=parseInt(s.duration),i={min:0,max:t};$("#"+a.parent_id).find(".video-progress-bar-slider").attr(i),$("#"+a.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+a.parent_id).find(".video-total-time").text(a.formatTime(t)),"vod-series-player-video"===current_route&&vod_series_player_page.showResumeBar(),$("#"+a.parent_id).find(".video-reconnect-message").hide(),a.reconnect_count=0,clearTimeout(a.reconnect_timer)}),$("#"+t).find(".video-reconnect-message").hide(),this.videoObj.ontimeupdate=function(e){var t=a.videoObj.duration,i=a.videoObj.currentTime;0<t&&($("#"+a.parent_id).find(".video-progress-bar-slider").val(i).change(),$("#"+a.parent_id).find(".video-current-time").html(a.formatTime(i))),"vod-series-player-video"==current_route&&(vod_series_player_page.current_time=i,SrtOperation.timeChange(s.currentTime))},this.videoObj.addEventListener("loadedmetadata",function(){var e="No Information";try{var t=a.videoObj.videoWidth,i=a.videoObj.videoHeight;t&&i&&(e=t+" x "+i+"px")}catch(e){console.log(e)}console.log(e),$(".video-resolution").text(e)}),this.videoObj.addEventListener("waiting",function(e){}),this.videoObj.addEventListener("suspend",function(e){}),this.videoObj.addEventListener("stalled",function(e){console.log("Failed to fetch data, but trying.")}),this.videoObj.addEventListener("ended",function(e){"vod-series-player-video"===current_route&&vod_series_player_page.showNextVideo(1,!0)}),this.videoObj.addEventListener("emptied",function(e){})},playAsync:function(e){"lg"!=platform&&($("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden"));try{this.videoObj.pause()}catch(e){}console.log(e),this.url=e;var t=this;for($("#"+this.parent_id).find(".video-error").hide();this.videoObj.firstChild;)this.videoObj.removeChild(this.videoObj.firstChild);this.videoObj.load();var i=document.createElement("source");i.setAttribute("src",e),this.videoObj.appendChild(i),this.videoObj.addEventListener("playing",function e(){"lg"!=platform&&($("channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible")),this.removeEventListener("playing",e)}),this.videoObj.play(),$("#"+this.parent_id).find(".progress-amount").css({width:0}),i.addEventListener("error",function(e){$(".video-loader").hide(),$("#"+t.parent_id).find(".video-error").show(),t.tryReconnect()}),i.addEventListener("emptied",function(e){console.log("Empty"),$("#"+t.parent_id).find(".video-error").show()}),this.state=this.STATES.PLAYING},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_timer=null,this.reconnect_count+=1,console.log("here reconnecting",this.reconnect_count),this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{$("#"+this.parent_id).find(".video-reconnect-message").show();var e=this;try{this.videoObj.close()}catch(e){}this.reconnect_timer=setTimeout(function(){try{e.playAsync(e.url)}catch(e){console.log(e)}},6e3)}},play:function(){this.state=this.STATES.PLAYING,this.videoObj.play(),0<SrtOperation.srt.length&&(SrtOperation.stopped=!1)},setDisplayArea:function(e,t){if(e){$("video_element").css("object-fit","fill");var i,s=parseInt($(this.videoObj).height());switch(e){case"1:1":$("video_element").css("object-fit","fill"),i=s+"px";break;case"16:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(16/9))+"px";break;case"4:3":$("video_element").css("object-fit","fill"),i=Math.round(s*(4/3))+"px";break;case"21:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(21/9))+"px";break;case"stretch":$("video_element").css("object-fit","fill"),s=i="100%";break;default:$("video_element").css("object-fit","contain"),s=i="100%"}this.videoObj.style.width=i,this.videoObj.style.height=s,console.log("NEW height",s),console.log("NEW WIDTH",i)}},pause:function(){this.state=this.STATES.PAUSED;try{this.videoObj.pause()}catch(e){}},close:function(){try{this.videoObj.pause()}catch(e){}this.state=this.STATES.STOPPED,SrtOperation.deStruct(),this.subtitles=[],this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},seekTo:function(e){},getSubtitleOrAudioTrack:function(e){var i=[],s="TEXT"==e?0<media_player.videoObj.textTracks.length?media_player.videoObj.textTracks:{}:0<media_player.videoObj.audioTracks.length?media_player.videoObj.audioTracks:{};return console.log(s),0<Object.keys(s).length&&Object.keys(s).map(function(e,t){"object"==typeof s[e]&&null!=s[e]&&i.push(s[e])}),console.log(i),i},setSubtitleOrAudioTrack:function(e,t){if("TEXT"==e)-1==t?(SrtOperation.deStruct(),this.subtitles=[],$("#"+this.parent_id+" .subtitle-container").hide()):(this.subtitles[t]&&(e=this.subtitles[t].file_id.toString(),this.srt_map[e])&&SrtOperation.init(this.srt_map[e],media_player.videoObj.currentTime),$("#"+this.parent_id+" .subtitle-container").show());else{for(var i=0;i<this.videoObj.audioTracks.length;i++)this.videoObj.audioTracks[i].enabled=!1;this.videoObj.audioTracks[t].enabled=!0}}}}var VodModel={movies:[],category_name:"vod_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],saved_video_times:{},favourite_ids:[],stream_type:"vod",favourite_insert_position:"after",recent_insert_position:"before",init:function(){this.movies=[],this.categories=[]},isProtected:function(e){return!!checkForAdult(e,"category",[])},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i){for(var s=this.stream_type,a=this.saved_video_times,o=-1,n=0;n<a.length;n++)if(a[n].stream_id==e){o=n;break}t={stream_id:e,time:t,duration:i};-1!=o?a[o]=t:a.push(t),this.saved_video_times=a,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+s+"_times",JSON.stringify(a))},removeVideoTime:function(e){for(var t=this.stream_type,i=this.saved_video_times,s=0;s<i.length;s++)if(i[s].stream_id==e){i.splice(s,1);break}this.saved_video_times=i,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+t+"_times",JSON.stringify(i))},addToWatchList:function(t){var e=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[e].movies,s=!1;i.map(function(e){e.stream_id==t.stream_id&&(s=!0)}),s||(i.unshift(t),i.splice(this.recent_movie_count),this.categories[e].movies=i)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s=0;s<i.length;s++)if(i[s].stream_id==e.stream_id){i.splice(s,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),a=(s[e].is_hide=t,s[e].category_id),o=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==o&&(o=[]),t&&!o.includes(a))o.push(a);else if(o.includes(a))for(var n=0;n<o.length;n++)if(o[n]==a){o.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(o))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){for(var i,s,a,e=this,t=this.stream_type,o=this.movies,n=this.categories,r={recent:{category_id:"recent",category_name:"Continue Watching",parent_id:0,movies:[],is_hide:!1},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:!1},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},newlyAdded:{category_id:"newly_added",category_name:"Newly Added",parent_id:0,movies:[],is_hide:!1},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}},l=(n.push(r.undefined),l=storage_id+settings.playlist.id+"_saved_"+t+"_times",(l=localStorage.getItem(l))?JSON.parse(l):[]),c=(this.saved_video_times=l,this.movie_key),d=(t=storage_id+settings.playlist.id+t+"_favourite",JSON.parse(localStorage.getItem(t))||[]),h=(this.favourite_ids=d,t=l,"xc"!==settings.playlist.playlist_type?t.map(function(e){return e.stream_id}):t.map(function(e){return parseInt(e.stream_id,10)})),_=[],u=[],m=[],p=[],g={},v=Math.floor(Date.now()/1e3),f=0;f<o.length;f++){T=B=M=S=$=C=w=k=b=y=void 0;var y=o[f],b=g,k=h,w=d,C=_,$=u,S=m,M=p,B=v,T=(void 0!==y.category_id&&"null"!==y.category_id&&null!==y.category_id||(y.category_id="undefined"),y.category_id.toString());b[T]||(b[T]=[]),b[T].push(y),y.is_recent=!1,-1!==k.indexOf(y[c])&&C.push(y),-1!==w.indexOf(y[c])&&("before"===e.favourite_insert_position?$.unshift(y):$.push(y)),y.rating&&!isNaN(parseFloat(y.rating))&&M.push(y),y.added&&function(e,t){return t-e<=1296e3}(y.added,B)&&S.push(y)}i=_,s=[],h.forEach(function(e){for(var t=0;t<i.length;t++)if(i[t].stream_id==e){s.unshift(i[t]),i.splice(t,1);break}}),_=s,a=g,n.forEach(function(e){var t=e.category_id.toString();e.movies=a[t]||[]}),r.recent.movies=_,r.favourite.movies=u,r.newlyAdded.movies=m,r.topRated.movies=utilities.getTopRatedMovies(p)||[],null==r.topRated.movies&&(r.topRated.movies=[]),n.unshift(r.newlyAdded),n.unshift(r.topRated),n.unshift(r.favourite),n.unshift(r.recent);for(var x=n,L=0;L<x.length;L++)if("undefined"===x[L].category_id&&0===x[L].movies.length){x.splice(L,1);break}this.categories=n,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return"favourite"===e?1:0},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}return a||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a}},LiveModel={movies:[],category_name:"live_categories",favourite_movie_count:500,recent_movie_count:15,movie_key:"stream_id",categories:[],programmes:{},movie_saved:!1,programme_saved:!1,favourite_ids:[],stream_type:"live",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],channel_orders:{},init:function(){this.channel_orders={},this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),a=(s[e].is_hide=t,s[e].category_id),o=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==o&&(o=[]),t&&!o.includes(a))o.push(a);else if(o.includes(a))for(var n=0;n<o.length;n++)if(o[n]==a){o.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(o))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=(e=localStorage.getItem(storage_id+settings.playlist.id+"_category_orders"))?JSON.parse(e):[];this.category_orders=e;var t=(t=localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders"))?JSON.parse(t):{},i=(this.channel_orders=t,this.stream_type),s=this.movies,a=this.categories,o={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},n={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},r=(a.push({category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}),this.movie_key),l=null==(l=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_recent")))?[]:l,c=null==(c=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_favourite")))?[]:c;this.favourite_ids=c;for(var d=[],h=[],_={},u=0;u<s.length;u++){var m=s[u];void 0!==m.category_id&&"null"!=m.category_id&&null!=m.category_id||(m.category_id="undefined"),void 0===_[p=m.category_id.toString()]?_[p]=[m]:_[p].push(m),m.is_recent=!1,l.includes(m[r])&&("before"===this.recent_insert_position?d.unshift(m):d.push(m),m.is_recent=!0),c.includes(m[r])&&("before"===this.favourite_insert_position?h.unshift(m):h.push(m))}for(u=0;u<a.length;u++){var p=a[u].category_id.toString();a[u].movies=void 0===_[p]?[]:_[p]}o.movies=d,n.movies=h,a.unshift(n),a.unshift(o);for(u=0;u<a.length;u++)if("undefined"===a[u].category_id){0==a[u].movies.length&&a.splice(u,1);break}for(u=0;u<a.length;u++)if("undefined"===a[u].category_id){a[u].movies&&0==a[u].movies.length&&a.splice(u,1);break}for(u=0;u<e.length;u++)for(v=0;v<a.length;v++)if(e[u].id==a[v].category_id){a=makeRearrangeArray(a,v,e[u].position);break}for(u=0;u<a.length;u++)if("favourite"==a[u].category_id&&(this.favourite_position=u),"recent"==a[u].category_id&&(this.recent_position=u),t[a[u].category_id]){for(var g=t[a[u].category_id],s=a[u].movies,v=0;v<g.length;v++)for(var f=0;f<s.length;f++)if(g[v].id==s[f].stream_id&&g[v].name==s[f].name){s=makeRearrangeArray(s,f,g[v].position);break}a[u].movies=s}this.categories=a,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}return a||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a},getProgrammeVideoUrl:function(e,t){var i;return"xc"===settings.playlist.playlist_type?(i="Y-MM-DD HH:mm",12==settings.time_format&&(i="Y-MM-DD hh:mm A"),i=moment(t.start,i).subtract(time_difference_with_server,"minute").format("Y-MM-DD:HH-mm"),{duration:t=getMinute(t.stop)-getMinute(t.start),url:(api_host_url=api_host_url.endsWith("/")?api_host_url.slice(0,-1):api_host_url)+"/streaming/timeshift.php?username="+user_name+"&password="+password+"&stream="+e+"&start="+i+"&duration="+t}):{duration:"00:00",url:""}},getNextProgrammes:function(e){for(var t=!1,i=[],s=moment(new Date).unix(),a=0,o=0;o<e.length;o++){var n=e[o];if(s<=moment(n.stop).unix()&&(a++,moment(n.start).unix()<=s&&(t=!0),i.push(e[o])),4<=a)break}return{current_program_exist:t,programmes:i}}},SeriesModel={movies:[],favourite_movie_count:200,recent_movie_count:15,movie_key:"series_id",categories:[],saved_video_times:{},favourite_ids:[],stream_type:"series",favourite_insert_position:"after",recent_insert_position:"before",init:function(){this.movies=[],this.categories=[]},isProtected:function(e){return!!checkForAdult(e,"category",[])},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i,s,a){for(var o=this.stream_type,n=this.saved_video_times,r=-1,l={},c=0;c<n.length;c++)if(n[c].stream_id==e){l=n[r=c].video_times;break}var d={},s={time:s,duration:a},a=((d=l[t.toString()]?l[t.toString()]:d)[i.toString()]=s,l[t.toString()]=d,{ep:i+1,s:t+1});if(-1!=r){s=this.getRecentOrFavouriteCategoryPosition("recent");if(this.categories[s].movies.length>=this.recent_movie_count)return;n[r].video_times=l,n[r].video_times.recent=a}else n.push({stream_id:e,video_times:Object.assign({},l,{recent:a})});return this.saved_video_times=n,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+o+"_times",JSON.stringify(n)),l},removeVideoTime:function(e,t,i){for(var s,a=this.stream_type,o=this.saved_video_times,n={},r=!1,l=0;l<o.length;l++)if(o[l].stream_id==e){(n=o[l].video_times)[t.toString()]&&(delete(s=n[t.toString()])[i.toString()],0==Object.keys(s).length&&delete n[t.toString()],0==Object.keys(n).length?(o.splice(l,1),r=!0,n={},this.removeFromWatchList(e)):o[l].video_times=n,this.saved_video_times=o,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+a+"_times",JSON.stringify(o)));break}return[r,n]},addToWatchList:function(t){var i,e=this.getRecentOrFavouriteCategoryPosition("recent"),s=this.categories[e].movies;s.length>=this.recent_movie_count||(i=!1,s.map(function(e){e.series_id==t.series_id&&(i=!0)}),i)||(s.unshift(t),s.splice(this.recent_movie_count),this.categories[e].movies=s)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s="object"==typeof e?e.series_id:e,a=0;a<i.length;a++)if(i[a].series_id==s){i.splice(a,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),a=(s[e].is_hide=t,s[e].category_id),o=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==o&&(o=[]),t&&!o.includes(a))o.push(a);else if(o.includes(a))for(var n=0;n<o.length;n++)if(o[n]==a){o.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(o))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){for(var e,t=this,i=this.stream_type,s=this.movies,a=this.categories,o={recent:{category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:!1},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},recentlyModified:{category_id:"recently_modified",category_name:"Recently Added/Updated",parent_id:0,movies:[],is_hide:!1},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}},n=(a.push(o.undefined),this.movie_key),r=(e=storage_id+settings.playlist.id+i+"_favourite",JSON.parse(localStorage.getItem(e))||[]),i=(this.favourite_ids=r,e=storage_id+settings.playlist.id+"_saved_"+i+"_times",(e=localStorage.getItem(e))?JSON.parse(e):[]),l=(this.saved_video_times=i,e=i,"xc"!==settings.playlist.playlist_type?e.map(function(e){return e.stream_id}):e.map(function(e){return parseInt(e.stream_id,10)})),c=[],d=[],h=[],_=[],u={},m=Math.floor(Date.now()/1e3),p=0;p<s.length;p++){S=$=C=w=k=b=y=f=v=g=void 0;var g=s[p],v=u,f=l,y=r,b=h,k=c,w=d,C=_,$=m,S=(void 0!==g.category_id&&"null"!=g.category_id&&null!=g.category_id||(g.category_id="undefined"),g.category_id.toString());v[S]||(v[S]=[]),v[S].push(g),g.is_recent=!1,-1!==f.indexOf(g[n])&&b.push(g),-1!==y.indexOf(g[n])&&("before"===t.favourite_insert_position?k.unshift(g):k.push(g)),g.rating&&!isNaN(parseFloat(g.rating))&&C.push(g),g.last_modified&&function(e,t){return t-parseInt(e,10)<=1296e3}(g.last_modified,$)&&w.push(g)}for(var i=function(e,t){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<t.length;a++)if(t[a].series_id==e[s]){i.unshift(t[a]),t.splice(a,1);break}return i}(l,h),M=a,B=u,T=0;T<M.length;T++){var x=M[T].category_id.toString();M[T].movies=B[x]||[]}o.recent.movies=i,o.favourite.movies=c,o.recentlyModified.movies=d,o.topRated.movies=utilities.getTopRatedMovies(_)||[],null==o.topRated.movies&&(o.topRated.movies=[]),a.unshift(o.recentlyModified),a.unshift(o.topRated),a.unshift(o.favourite),a.unshift(o.recent);for(var L=a,E=0;E<L.length;E++)if("undefined"===L[E].category_id&&0==L[E].movies.length){L.splice(E,1);break}this.categories=a,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return"favourite"===e?1:0},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}return a||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a}},playlist_page={initiated:!1,keys:{focused_part:"playlist_selection",playlist_selection:0},playlist_doms:[],back_btn_dom:null,is_loading:!1,tried_panel_indexes:[],init:function(){var s,a,o;this.tried_panel_indexes=[],this.initiated||(this.keys.playlist_selection=0,s="",a=settings.playlist_id,o=this,playlist_urls.map(function(e,t){var i=a===e.id;i&&(o.keys.playlist_selection=t),s+='<div class="playlist-item-container"        onmouseenter="playlist_page.hoverPlayListItem('+t+')"        onclick="playlist_page.changePlaylist('+t+')"    >        <div class="playlist-item-wrapper '+(i?"active-current-play":"")+'">    <div class="playlist-name">'+e.playlist_name+"</div>    </div></div>"}),this.initiated=!0,$("#playlist-items-container").html(s),this.playlist_doms=$(".playlist-item-container"),this.back_btn_dom=$("#playlist-back-icon"),$("#notification-title").text(notification.title),$("#notification-content").text(notification.content),$("#playlist-device-id").text(mac_address),$("#playlist-device-key").text(device_key),this.hoverPlayListItem(this.keys.playlist_selection)),$("#home-page").addClass("hide"),$("#playlist-page").removeClass("hide"),current_route="playlist-page"},hoverPlayListItem:function(e){var t=this.keys;t.focused_part="playlist_selection",t.playlist_selection=e,$(this.back_btn_dom).removeClass("active"),$(this.playlist_doms).removeClass("active"),$(this.playlist_doms[e]).addClass("active"),moveScrollPosition($("#playlist-items-container"),this.playlist_doms[e],"vertical",!1)},changePlaylist:function(e){playlist_expire_date=null;var t=playlist_urls[e];t.id===settings.playlist.id?this.goBack():($(home_page.menu_doms).removeClass("active"),$(this.playlist_doms).find(".playlist-item-wrapper").removeClass("active-current-play"),$($(this.playlist_doms[e]).find(".playlist-item-wrapper")).addClass("active-current-play"),settings.saveSettings("playlist_id",t.id,""),settings.saveSettings("playlist",t,"array"),current_route="login",$("#playlist-page").addClass("hide"),$("#login-container").removeClass("hide"),login_page.proceed_login())},showPlayListEditPage:function(e){e?playlist_edit_page.init(null):(e=this.keys,"demo"===(e=playlist_urls[e.playlist_selection]).id?showToast("Sorry","You cannot edit demo playlist"):playlist_edit_page.init(e))},removePlayList:function(){0!=playlist_urls.length&&(1==playlist_urls.length?showToast("Sorry","You need to have 1 playlist at least"):0<playlist_urls.length&&(showLoader(!0),this.is_loading=!0,this.proceedRemovingWithServer()))},proceedRemovingWithServer:function(){var e=this.keys,e=playlist_urls[e.playlist_selection],e=encryptRequest({mac_address:mac_address,app_type:platform,remove_ids:[e.id]}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],a=this;$.ajax({method:"post",url:i+"/update_playlist",data:{data:e},success:function(e){a.tried_panel_indexes=[],a.playlistRemoved(!0)},error:function(){a.tried_panel_indexes.push(s),a.tried_panel_indexes.length<panel_urls.length?a.proceedRemovingWithServer():a.playlistRemoved(!1)}})},playlistRemoved:function(e){var t=this.keys,i=playlist_urls[t.playlist_selection].id,s=(playlist_urls.splice(t.playlist_selection,1),settings.playlist_id===i&&(settings.saveSettings("playlist_id","",""),settings.saveSettings("playlist",{},"array")),removeLocalStorageKeysForPlaylist([i]),localStorage.getItem(storage_id+"local_data"));(s=s?JSON.parse(s):{}).playlist_urls||(s.playlist_urls=[]),s.remove_ids||(s.remove_ids=[]);for(var a=localStorage.getItem(storage_id+"api_data"),o=(a&&((a=JSON.parse(a)).urls=playlist_urls,localStorage.setItem(storage_id+"api_data",JSON.stringify(a))),s.playlist_urls),n=0;n<o.length;n++)if(o[n].id==i){o.splice(n,1);break}s.playlist_urls=o,e||(a=s.remove_ids).includes(i)||a.push(i),localStorage.setItem(storage_id+"local_data",JSON.stringify(s)),showLoader(!1),this.is_loading=!1,$(this.playlist_doms[t.playlist_selection]).remove();e=t.playlist_selection;this.initiated=!1,this.init(),e>=this.playlist_doms.length&&(e=this.playlist_doms.length-1),this.hoverPlayListItem(e)},handleRefreshPlaylists:function(){window.location.reload()},handleMenuClick:function(){var e=this.keys;"playlist_selection"===e.focused_part&&$(this.playlist_doms[e.playlist_selection]).trigger("click")},handleMenuLeftRight:function(e){var t=this.keys;"playlist_selection"===t.focused_part&&(t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection))},handleMenusUpDown:function(e){var t=this.keys;"playlist_selection"===t.focused_part&&checkVerticalMovable(this.playlist_doms.length,1,t.playlist_selection,e)&&(t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection))},goBack:function(){current_route="home-page",$("#playlist-page").addClass("hide"),$("#home-page").removeClass("hide")},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-4);break;case tvKey.DOWN:this.handleMenusUpDown(4);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.YELLOW:this.showPlayListEditPage(!0);break;case tvKey.GREEN:this.handleRefreshPlaylists();break;case tvKey.BLUE:break;case tvKey.RED:this.removePlayList()}}},account_page={initiated:!1,is_loading:!1,init:function(){this.fillAccountDetails(),$("#home-page").addClass("hide"),$("#account-page").removeClass("hide"),current_route="account-page"},fillAccountDetails:function(){$("#user-account-mac-address").text(mac_address.toUpperCase()),$("#platform").text(platform.toUpperCase()||"Unknown"),2==is_trial||3==is_trial?$("#user-account-is_trial").text("Active"):$("#user-account-is_trial").text("Trial"),$("#playlist-username").text(user_name),$(".user-account-expire-date").text(expire_date),"lg"==platform?$(".app-version").text(lg_version):$(".app-version").text(samsung_version),$("#playlist-status").text(playlist_status)},handleMenuClick:function(){},handleMenuLeftRight:function(e){},handleMenusUpDown:function(e){},goBack:function(){current_route="home-page",$("#account-page").addClass("hide"),$("#home-page").removeClass("hide")},HandleKey:function(e){this.is_loading?e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack()):e.keyCode===tvKey.RETURN&&this.goBack()}};function confirmParentPassword(){"home-page"===current_route&&home_page.confirmParentPassword()}function cancelParentPassword(){"home-page"===current_route&&home_page.cancelParentPassword()}var channel_page={current_channel_id:0,full_screen_video:!1,full_screen_info_timer:null,full_nav_timer:null,progressbar_timer:null,player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],current_category_index:0,category_hover_timer:null,category_hover_timeout:300,channel_hover_timer:null,channel_hover_timeout:300,sidebarVisible:!1,keys:{focused_part:"category_selection",category_selection:0,channel_selection:0,color_buttons_selection:0,current_channel:0,search_back_selection:0,search_selection:-1,switch_modal_selection:0,prev_focus:"",video_control:0,live_control_selection:0},channel_theme:"",modal_visible:!1,category_doms:[],channel_doms:[],channel_nav_doms:[],live_control_doms:$(".full-screen-buttons-wrapper .full-screen-button"),switch_modal_doms:$("#switch-page-modal .switch-modal-item"),play_icon_index:1,search_items:[],filtered_movies:[],next_programme_timer:null,idleOnChannelTimer:null,programmes:[],short_epg_limit_count:30,prev_focus_dom:null,prev_focus_nav_dom:null,next_channel_timer:null,rearrange_origin_position:0,rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,prev_keyword:"",search_timer:null,prev_route:"",current_category:null,is_no_categories:!1,init:function(e,t,i){t=t||null,this.closeChannelNav(),this.current_category=null,this.prev_route=e,this.prev_focus_dom=null,this.rearrange_mode=!1;var e=this.keys,s=($("#home-page").addClass("hide"),$("#channel-page").removeClass("hide"),current_route="channel-page",LiveModel.getCategories(!1,!0)),a=(this.categories=s,""),o=(s.map(function(e,t){a+='<div class="channel-page-category-item"                    onmouseenter="channel_page.hoverCategory(this)"                    onclick="channel_page.handleMenuClick()"                    data-index="'+t+'"                >                    <span class="channel-page-category-item-name">'+e.category_name+'</span>                    <span class="channel-page-category-item-count">'+e.movies.length+"</span>                 </div>"}),$("#channel-page-categories-container").html(a),this.category_doms=$(".channel-page-category-item"),0);if(t){for(n=0;n<s.length;n++)if(s[n].category_id==t.category_id){o=n;break}}else for(var n=0;n<s.length;n++)if(0<s[n].movies.length){o=n;break}this.current_category_index=-1,e.category_selection=o,this.showCategoryChannels(t),t||this.showInitialChannel(s,i),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){console.log(e)}},0),this.resetSidebarStyle()},goBack:function(){var e=this.keys;switch(e.focused_part){case"live_controls":clearTimeout(this.full_screen_info_timer),this.hideFullScreenInfo();break;case"full_screen":this.full_screen_video=!1,this.zoomInOut(),this.setupZoomOnIdleTimer(),this.hoverChannel(this.keys.current_channel);break;case"search_selection":this.setupZoomOnIdleTimer(),this.removeSearchResult();break;case"category_selection":case"channel_selection":case"color_buttons_selection":clearTimeout(this.idleOnChannelTimer),this.Exit();break;case"channel_nav":this.closeChannelNav(),e.focused_part="full_screen";break;case"switch-modal":this.hideSwitchPageModal()}},Exit:function(e){e=e||"home-page";try{media_player.close()}catch(e){console.error("Error Closing Channel: ",e)}this.keys.focused_part="channel_selection",this.full_screen_video=!1,this.zoomInOut(),$("#channel-page").addClass("hide"),clearInterval(this.progressbar_timer),clearTimeout(this.full_screen_info_timer),clearTimeout(this.next_channel_timer),clearTimeout(this.full_nav_timer),"home-page"==e?home_page.reEnter():($("#search-page").show(),current_route="search-page",search_page.init("channel-page","live"));var t=LiveModel.category_orders;if(0<t.length){for(var i=this.categories,s=0;s<i.length;s++)for(var a=0;a<t.length;a++)if(i[s].category_id==t[a].id){t[a].position=s;break}t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(t)),LiveModel.category_orders=t}},showInitialChannel:function(e,t){if(t=t||!1){$("#channel-page-categories-container").hide();for(var i=-1,s=0;s<e.length;s++)if("favourite"===e[s].category_id){i=s;break}return-1===i||(this.hoverCategory($(this.category_doms[i])),this.handleMenuClick(),this.hoverChannel(0),this.movies&&0!=this.movies.length)?void(this.is_no_categories=!0):(this.Exit(),void showToast("Sorry","You have no favorite channels."))}$("#channel-page-categories-container").show(),this.is_no_categories=!1;t=localStorage.getItem(storage_id+"live_initialization_choice");"last"==(t=t||"default")?this.initializeByLast(e):"favorite"==t?this.initializeByFavorite(e):this.initializeByDefault(e)},initializeByDefault:function(e){var t=2;if(!e[t]||0==e[t].movies.length||!e[t].movies)for(var i=0;i<e.length;i++)if(0<e[i].movies.length){t=i;break}e[t]&&0<e[t].movies.length&&(this.hoverCategory(t),this.handleMenuClick(),this.hoverChannel(0),this.showMovie(e[t].movies[0]),this.keys.focused_part="channel_selection")},initializeByFavorite:function(e){for(var t=null,i=-1,s=0;s<e.length;s++)if("favourite"==e[s].category_id){t=e[s],i=s;break}t&&0<t.movies.length?(this.hoverCategory(i),this.handleMenuClick(),this.hoverChannel(0),this.showMovie(t.movies[0])):this.initializeByDefault(e)},initializeByLast:function(e){var t=localStorage.getItem(storage_id+settings.playlist.id+"live_recent");if(t){t=JSON.parse(t);if(t&&0<t.length){for(var i=t[0],s=null,a=-1,o=-1,n=2;n<e.length;n++){for(var r=e[n],l=0;l<r.movies.length;l++)if(r.movies[l].stream_id==i){s=r,a=n,o=l;break}if(s)break}if(s)return this.hoverCategory(a),this.handleMenuClick(),this.hoverChannel(o),void this.showMovie(s.movies[o])}}this.initializeByDefault(e)},showChannelNav:function(){$("#full-screen-navigation").css("bottom",0),clearTimeout(this.full_screen_info_timer);var e=this.keys;this.resetChannelNavTimer(),e.focused_part="channel_nav"},closeChannelNav:function(){$("#full-screen-navigation").css("bottom","-100%"),clearTimeout(this.full_nav_timer)},hoverNav:function(e){var t=this,i=this.keys,e="number"==typeof e?e:$(e).data("index");i.channel_selection=e,$(this.prev_focus_nav_dom).removeClass("active"),$(this.channel_nav_doms[e]).addClass("active"),this.prev_focus_nav_dom=this.channel_nav_doms[e],moveScrollPosition($("#full-screen-navigation-channels"),$(this.channel_nav_doms[e]),"horizontal",!1,!1,!1),this.resetChannelNavTimer(),this.channel_hover_timer=setTimeout(function(){t.getEpgProgrammes()},this.channel_hover_timeout)},resetChannelNavTimer:function(){this.full_nav_timer&&clearTimeout(this.full_nav_timer),"channel_nav"==this.keys.focused_part&&(this.full_nav_timer=setTimeout(function(){channel_page.goBack()},5e3))},showCategoryChannels:function(e){var t=this.keys;if(t.category_selection!==this.current_category_index){var i=this.categories[t.category_selection],s=($(this.category_doms).removeClass("current"),$(this.category_doms[t.category_selection]).addClass("current"),this.current_category=i,this.movies=i.movies,""),a="";if(this.movies.map(function(e,t){var i=LiveModel.favourite_ids.includes(e.stream_id)?"favourite":"";s+='<div class="channel-menu-item" data-channel_id="'+e.stream_id+'"                    data-index="'+t+'"                    onmouseenter="channel_page.hoverChannel(this)"                    onclick="channel_page.handleMenuClick()"                >                    <span class="channel-number">'+e.num+'</span>                    <div class="channel-icon-container"><img class="channel-icon" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></div>                    <span class="channel-name">'+e.name+'</span>                    <i class="fa fa-star favourite-icon '+i+'"></i>                </div>'}),this.movies.map(function(e,t){a+='<div class="channel-nav-item" data-channel_id="'+e.stream_id+'"                    data-index="'+t+'"                    onmouseenter="channel_page.hoverNav(this)"                    onclick="channel_page.handleMenuClick()"                >                    <div class="channel-icon-container-nav"><img class="channel-icon-nav" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></div>                    <span class="channel-name-nav">'+e.name+"</span>        </div>"}),$("#channel-page-menu-container").html(s),$("#full-screen-navigation-channels").html(a),this.prev_keyword="",$("#search-value").val(""),t.channel_selection=0,this.current_category_index=t.category_selection,0<this.movies.length){if(this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),this.channel_nav_doms=$("#full-screen-navigation .channel-nav-item"),moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[0],"vertical",!0),this.hoverChannel(0),e){for(var o=0;o<this.movies.length;o++)if(this.movies[o].stream_id==e.stream_id){t.channel_selection=o,this.showMovie(this.movies[o]),this.hoverChannel(o);break}}else this.showMovie(this.movies[0]);t.focused_part="channel_selection"}}},goChannelNum:function(e){var t,s;this.full_screen_video&&(0!=(t=this.channel_num)||0==t&&0!=e)&&(this.channel_num=t=10*t+e,clearTimeout(this.channel_number_timer),s=this,$("#typed-channel-number").text(t),this.channel_number_timer=setTimeout(function(){for(var e=s.movies,t=!1,i=0;i<e.length;i++)if(e[i].num===s.channel_num){t=!0,current_movie=e[i],s.showMovie(current_movie),s.current_channel_id=current_movie.stream_id,s.hoverChannel(i),s.keys.focused_part="full_screen",s.showFullScreenInfo();break}t||showToast("Sorry","Channel does not exist"),s.channel_num=0,$("#typed-channel-number").text("")},2e3))},goToPlaylistPage:function(){clearTimeout(this.idleOnChannelTimer),this.Exit(),home_page.hoverControlsMenu(1),home_page.handleMenuClick()},addOrRemoveFav:function(){var e=this.keys;if("channel_selection"===e.focused_part){var t=this.movies[e.channel_selection],i="add";if("add"===(i=LiveModel.favourite_ids.includes(t.stream_id)?"remove":i)){if(checkForAdult(t,"movie",LiveModel.categories))return void showToast("Parental safety","Adding protected content to favourites is not allowed.");LiveModel.addRecentOrFavouriteMovie(t,"favourite"),$(this.channel_doms[e.channel_selection]).find(".favourite-icon").addClass("favourite")}else{i=this.categories[this.current_category_index];LiveModel.removeRecentOrFavouriteMovie(t.stream_id,"favourite"),$(this.channel_doms[e.channel_selection]).find(".favourite-icon").removeClass("favourite"),"favourite"===i.category_id&&($(this.channel_doms[e.channel_selection]).remove(),t=$("#channel-page-menu-container .channel-menu-item"),0==(this.channel_doms=t).length?this.hoverCategory(e.category_selection):(e.channel_selection>=t.length&&(e.channel_selection=t.length-1),this.hoverChannel(e.channel_selection)))}this.updateFavouriteChannelCount()}},updateFavouriteChannelCount:function(){for(var e=this.categories,t=0;t<e.length;t++)if("favourite"==e[t].category_id){$(this.category_doms[t]).find(".channel-page-category-item-count").text(e[t].movies.length);break}},showNextProgrammes:function(){for(var e="next-program-container",t=this.movies[this.keys.channel_selection],t=($("#channel-title").text(t.name),LiveModel.getNextProgrammes(this.programmes)),i=t.current_program_exist,s=t.programmes,a=0,o="",n=0;n<s.length&&(o+='<div class="next-program-item '+(0==a&&i?"current":"")+'"><span class="program-time">'+s[n].start.substring(11)+" ~ "+s[n].stop.substring(11)+"</span>"+s[n].title+"</div>",!(4<=++a));n++);0<a?$("#"+e).html(o).show():$("#"+e).hide().html("");var r,l,t="No Info",e="",c="No Info",d="";i?(r=s[0],1<s.length&&(l=s[1])):0<s.length&&(l=s[0]),r&&(t=r.title,e=r.start.substring(11)+" ~ "+r.stop.substring(11)),l&&(c=l.title,d=l.start.substring(11)+" ~ "+l.stop.substring(11)),$(".full-screen-program-name.current").text(t),$(".full-screen-program-time.current").text(e),$(".full-screen-program-name.next").text(c),$(".full-screen-program-time.next").text(d)},updateNextProgrammes:function(){this.showNextProgrammes(),clearInterval(this.next_programme_timer);var e=this;this.next_programme_timer=setInterval(function(){e.showNextProgrammes()},6e4)},getEpgProgrammes:function(){this.keys;var t,e,i,s=this,a=[],o=(this.programmes=[],s.showNextProgrammes(),this.movies[this.keys.channel_selection]);"xc"===settings.playlist.playlist_type&&(t="Y-MM-DD HH:mm",i=(e=settings.playlist).url.endsWith("/")?e.url.slice(0,-1):e.url,$.ajax({method:"get",url:i+"/player_api.php?username="+e.username+"&password="+e.password+"&action=get_short_epg&stream_id="+o.stream_id+"&limit="+this.short_epg_limit_count,success:function(e){e.epg_listings&&(e.epg_listings.map(function(e){a.push({start:getLocalChannelTime(e.start).format(t),stop:getLocalChannelTime(e.end).format(t),title:getAtob(e.title),description:getAtob(e.description)})}),s.programmes=a,s.updateNextProgrammes()),s.fillNavEpgProgrammes(s.programmes)},error:function(e){console.log("Error getting epg programmes",e),s.programmes=a,s.updateNextProgrammes(),s.fillNavEpgProgrammes(s.programmes)}}))},showFullScreenInfo:function(){this.keys.focused_part="live_controls",this.hoverLiveControlButton(this.keys.live_control_selection),this.full_screen_video&&$("#full-screen-information").slideDown(),this.resetFullScreenInfoTimer()},resetFullScreenInfoTimer:function(){var e;this.full_screen_video&&(clearTimeout(this.full_screen_info_timer),(e=this).full_screen_info_timer=setTimeout(function(){e.hideFullScreenInfo()},7500))},hideFullScreenInfo:function(){this.keys.focused_part="full_screen",$("#full-screen-information").slideUp()},zoomInOut:function(){var e=this.keys,t=this;this.full_screen_video?($("#channel-page .player-container").addClass("expanded"),clearTimeout(this.idleOnChannelTimer),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){console.log(e)}e.focused_part="full_screen",t.showFullScreenInfo()},0)):($("#channel-page .player-container").removeClass("expanded"),clearTimeout(this.full_screen_info_timer),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){console.log(e)}t.keys.focused_part="channel_selection",$("#full-screen-information").slideUp()},0))},showMovie:function(e){var t=this.keys;if(e.stream_id!=this.current_channel_id||"channel_nav"!=t.focused_part){var i,s=e.stream_id;t.current_channel=t.channel_selection,$(this.channel_doms).removeClass("current"),$(this.channel_nav_doms).removeClass("current"),$(this.channel_doms[t.channel_selection]).addClass("current"),$(this.channel_nav_doms[t.channel_selection]).addClass("current"),this.hoverNav(t.channel_selection),"xc"===settings.playlist.playlist_type?i=getMovieUrl(s,"live","ts"):"general"===settings.playlist.playlist_type&&(i=e.url);try{media_player.close()}catch(e){console.log("Exception in Close Player => "+e)}try{media_player.init("channel-page-video","channel-page")}catch(e){console.log("Exception in init Player => "+e)}try{media_player.playAsync(i)}catch(e){console.log("Exception in PlayAsync function => "+e)}if(this.current_channel_id=s,$(".full-screen-channel-name").text(e.name),$(".full-screen-channel-logo").attr("src",e.stream_icon),!checkForAdult(e,"movie",LiveModel.categories)){LiveModel.addRecentOrFavouriteMovie(e,"recent");for(var a=this.categories,o=0;o<a.length;o++)if("recent"==a[o].category_id){$(this.category_doms[o]).find(".channel-page-category-item-count").text(a[o].movies.length);break}}}},showNextChannel:function(e){var t=this.keys,i=t.focused_part,s=(t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this);setTimeout(function(){var e=s.movies[t.channel_selection];s.current_channel_id=e.stream_id,s.showMovie(s.movies[t.channel_selection])},400),this.hoverChannel(t.channel_selection),"full_screen"===i&&(t.focused_part="full_screen"),this.showFullScreenInfo()},showSearchModal:function(){clearTimeout(this.idleOnChannelTimer);var e=this.keys;this.full_screen_video||"search_selection"===e.focused_part||(e.prev_focus=e.focused_part,$(".search-modal-container").show(),$("#search-value").val(""),$(".search-content-container").html(""),this.keys.focused_part="search_selection",this.keys.search_selection=-1,$("#search-value").focus(),this.searchValueChange()),this.toggleRearrangeMode(!1)},searchValueChange:function(){clearTimeout(this.search_timer),this.search_timer=null;var e=this;this.search_timer=setTimeout(function(){$("#search-value").val().toLowerCase()!==e.prev_keyword&&e.renderSearchResults()},400)},renderSearchResults:function(){var t=$("#search-value").val(),e=LiveModel.getCategories(!1,!1),i=[];if(2<=t.length)for(var s=0;s<e.length;s++)var a=e[s].movies.filter(function(e){return e.name.toLowerCase().includes(t)}),i=i.concat(a);i.sort(function(e,t){return e.name.localeCompare(t.name)});var o="";i.map(function(e,t){o+='<div class="search-item-wrapper"                    onmouseenter="channel_page.hoverSearchItem('+t+')"                     onclick="channel_page.searchItemClick()"                >'+e.name+"</div>"}),0<i.length?$(".search-content-container").html(o):$(".search-content-container").html("<p class='search-no-results'>No results found!</p>"),this.search_items=$(".search-item-wrapper"),this.filtered_movies=i},handleSearchItem:function(e){var t=this.keys;0!=$(".search-item-wrapper").length&&(t.search_selection+=e,$(".search-item-wrapper").removeClass("active"),t.search_selection<0?($("#search-value").focus(),setTimeout(function(){var e=$("#search-value").val();$("#search-value")[0].setSelectionRange(e.length,e.length)},200)):($("#search-value").blur(),t.search_selection>=$(".search-item-wrapper").length&&(t.search_selection=$(".search-item-wrapper").length-1),$($(".search-item-wrapper")[t.search_selection]).addClass("active"),moveScrollPosition($(".search-content-container")[0],$(".search-item-wrapper")[t.search_selection],"vertical",!1)))},removeSearchResult:function(){$(".search-modal-container").hide(),$(".search-content-container").html(""),this.keys.focused_part=this.keys.prev_focus,this.search_selection=-1},searchItemClick:function(){var e=this.keys;this.removeSearchResult();for(var t=this.filtered_movies[e.search_selection],i=LiveModel.getCategories(!1,!0),s=0,a=0;a<i.length;a++)if(i[a].category_id==t.category_id){s=a;break}showLoader(!0),this.is_loading=!0;var o=this.categories[s].movies,n=(s!==this.current_category_index&&(e.category_selection=s,this.showCategoryChannels()),this);setTimeout(function(){for(var e=0;e<o.length;e++)if(o[e].stream_id==t.stream_id&&o[e].name===t.name){n.hoverChannel(e),n.showMovie(o[e]);break}showLoader(!1),n.is_loading=!1},200)},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_focus_dom).removeClass("rearrange"),"channel_selection"==this.focused_part&&this.showMovie(this.movies[t.channel_selection]);else if(e){$(".channel-menu-item.current").removeClass("current");var t=this.keys;if("category_selection"===t.focused_part||"channel_selection"===t.focused_part){this.rearrange_mode=!0;var i=0;if("channel_selection"===t.focused_part)i=t.channel_selection;else for(var s=this.categories[t.category_selection],a=0;a<LiveModel.categories.length;a++)if(LiveModel.categories[a].category_id==s.category_id){i=a;break}this.rearrange_origin_position=i,$(this.prev_focus_dom).addClass("rearrange")}}},changeChannelDomContent:function(e,t,i){$(e).find(".channel-number").text(t.num),$(e).find(".channel-icon").attr("src",t.stream_icon),$(e).data("index",i),$(e).find(".channel-name").text(t.name),$(e).data("channel_id",t.stream_id),LiveModel.favourite_ids.includes(t.stream_id)?$(e).find(".favourite-icon").addClass("favourite"):$(e).find(".favourite-icon").removeClass("favourite")},changeCategoryDomContent:function(e,t,i){$(e).find(".channel-page-category-item-name").text(t.category_name),$(e).data("index",i),$(e).find(".channel-page-category-item-count").text(t.movies.length)},hoverColorButton:function(e){this.setupZoomOnIdleTimer();var t=this.keys,i=(t.color_buttons_selection=e,$("#channel-page .bottom-label-item"));t.focused_part="color_buttons_selection",$(this.prev_focus_dom).removeClass("active"),$(i).removeClass("active"),$(i[e]).addClass("active"),this.prev_focus_dom=$(i[e])},clickColorButton:function(e){var t=this.keys;switch(e){case 0:this.hoverChannel(t.channel_selection),this.toggleRearrangeMode(!0);break;case 1:clearTimeout(this.idleOnChannelTimer),this.Exit("search-page");break;case 2:this.hoverChannel(t.channel_selection),this.addOrRemoveFav();break;case 3:"full_screen"!=t.focused_part&&this.showSwitchPageModal()}},hoverCategory:function(e){$("#channel-page .bottom-label-item").removeClass("active"),this.showCategoriesMenu(),this.setupZoomOnIdleTimer();var t=this.keys;t.focused_part="category_selection",t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#channel-page-categories-container"),this.category_doms[t.category_selection],"vertical",!1,!0)},zoomInWhenIdle:function(){var e=this.movies[keys.channel_selection].stream_id;this.current_channel_id==e?(this.full_screen_video=!0,this.zoomInOut()):this.showMovie(this.movies[keys.channel_selection]),this.toggleRearrangeMode(!1)},hoverChannel:function(e){$("#channel-page .bottom-label-item").removeClass("active"),this.hideCategoriesMenu();var t=this.keys,i=(t.focused_part="channel_selection",e="number"==typeof e?e:$(e).data("index"),t.channel_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[e]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.channel_doms[e]).addClass("rearrange")),this.prev_focus_dom=this.channel_doms[e],clearTimeout(this.channel_hover_timer),this);moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[e],"vertical",!1,!1,!1,!0),this.channel_hover_timer=setTimeout(function(){i.getEpgProgrammes()},this.channel_hover_timeout),this.setupZoomOnIdleTimer()},fillNavEpgProgrammes:function(){for(var e=["full-screen-navigation-now","full-screen-navigation-next","full-screen-navigation-later"],t=0;t<e.length;t++)$("."+e[t]).hide(),t<e.length-1&&$("."+e[t]+" + .horizontal-separator").hide();if(this.programmes.length)for(var i,s,a=0;a<Math.min(this.programmes.length,3);a++){var o=e[a];i=this.programmes[a],s=o,(s=$("."+s)).show(),s.find(".full-screen-navigation-epg-name").text(i.title),s.find(".full-screen-navigation-epg-time").text((s=i).start.split(" ")[1]+" - "+s.stop.split(" ")[1]),a<2&&this.programmes[a+1]&&$("."+o+" + .horizontal-separator").show()}},hoverSearchItem:function(e){key_focused||(this.keys.search_selection=e,$(this.search_items).removeClass("active"),$(this.search_items[e]).addClass("active"),moveScrollPosition($(".search-content-container")[0],this.search_items[e],"vertical",!1))},setupZoomOnIdleTimer:function(){clearTimeout(this.idleOnChannelTimer),this.idleOnChannelTimer=setTimeout(function(){this.current_channel_id&&(this.full_screen_video=!0,this.zoomInOut())}.bind(this),15e3)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":checkForAdult(this.categories[e.category_selection],"category",[])?parent_confirm_page.init(current_route):(this.showCategoryChannels(),this.toggleRearrangeMode(!1));break;case"full_screen":this.full_screen_video=!1,this.zoomInOut(),this.setupZoomOnIdleTimer();break;case"channel_selection":var t=this.movies[e.channel_selection].stream_id;this.current_channel_id==t?(this.full_screen_video=!0,this.zoomInOut()):(this.showMovie(this.movies[e.channel_selection]),this.setupZoomOnIdleTimer()),this.toggleRearrangeMode(!1);break;case"search_selection":t=$(".search-item-wrapper")[e.search_selection];$(t).trigger("click");break;case"channel_nav":this.showMovie(this.movies[e.channel_selection]);break;case"live_controls":this.full_screen_video=!1,this.zoomInOut(),this.setupZoomOnIdleTimer();break;case"switch-modal":this.clickSwitchModalItem(this.keys.switch_modal_selection);break;case"color_buttons_selection":this.clickColorButton(this.keys.color_buttons_selection)}},showSubtitleAudioModal:function(e){this.hideFullScreenInfo();this.keys;try{0<media_player.getSubtitleOrAudioTrack(e).length?console.log("There are subtitles"):showToast("Sorry","No Audios exist")}catch(e){console.log(e)}},hideCategoriesMenu:function(){this.channel_theme&&($("#channel-page-categories-container").css("-webkit-transform","translateX(-100%)"),$("#channel-page-categories-container").css("transform","translateX(-100%)"),$("#channel-page-title").css("background-color","transparent"))},showCategoriesMenu:function(){this.channel_theme&&($("#channel-page-categories-container").css("transform","translateX(0%)"),$("#channel-page-title").css("background-color","rgba(0, 0, 0, 0.831)"))},resetSidebarStyle:function(){"normal"==this.channel_theme||"modern"==this.channel_theme?($("#channel-page-categories-container").css("transform","translateX(-100%)"),$("#channel-page-title").css("background-color","transparent")):($("#channel-page-title").css("background-color","transparent"),$("#channel-page-categories-container").css("transform","translateX(0%)"),this.is_no_categories?$("#channel-page-right-part,#channel-page-left-part").addClass("normal"):$("#channel-page-right-part,#channel-page-left-part").removeClass("normal"))},hoverLiveControlButton:function(e){this.keys.live_control_selection=e,this.resetFullScreenInfoTimer(),$(this.live_control_doms).removeClass("active"),$(this.live_control_doms[e]).addClass("active")},showSwitchPageModal:function(){clearTimeout(this.idleOnChannelTimer);var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="switch-modal",$("#switch-page-modal").css("display","flex"),$(this.switch_modal_doms[e.switch_modal_selection]).addClass("active")},hideSwitchPageModal:function(){this.setupZoomOnIdleTimer(),$("#switch-page-modal").css("display","none"),this.keys.focused_part=this.keys.prev_focus},hoverSwitchPageModalItem:function(e){this.keys.switch_modal_selection!=e&&(this.keys.switch_modal_selection=e),$(this.switch_modal_doms).removeClass("active"),$(this.switch_modal_doms[e]).addClass("active")},clickSwitchModalItem:function(e){switch(e=e||this.keys.switch_modal_selection,this.hideSwitchPageModal(),this.Exit("home-page"),e){case 0:home_page.hoverMainMenu(1),home_page.handleMenuClick();break;case 1:home_page.hoverMainMenu(2),home_page.handleMenuClick();break;case 2:home_page.hoverMainMenu(3),home_page.handleMenuClick();break;case 3:home_page.hoverControlsMenu(3),home_page.handleMenuClick();break;case 4:home_page.hoverControlsMenu(2),home_page.handleMenuClick()}},handleMenusUpDown:function(e){var s=this.keys,t=this.channel_doms;switch(s.focused_part){case"category_selection":var i=s.category_selection;if(s.category_selection+=e,s.category_selection<0)s.category_selection=this.category_doms.length;else if(s.category_selection>=this.category_doms.length)s.category_selection=-1;else{if(this.rearrange_mode){if(i==s.category_selection)return;for(var a=this.categories[i],o=this.categories[s.category_selection],n=(this.changeCategoryDomContent(this.category_doms[i],o,i),this.changeCategoryDomContent(this.category_doms[s.category_selection],a,s.category_selection),this.category_doms=$(".channel-page-category-item"),clearTimeout(this.rearrange_timer),this.rearrange_timer=null,0),r=0;r<LiveModel.categories.length;r++)if(o.category_id==LiveModel.categories[r].category_id){n=r;break}LiveModel.categories=makeRearrangeArray(LiveModel.categories,this.rearrange_origin_position,n),this.rearrange_origin_position=n,this.categories=LiveModel.getCategories(!1,!0),this.rearrange_timer=setTimeout(function(){for(var e=LiveModel.category_orders,t=0;t<e.length;t++)if(e[t].id==a.category_id){e.splice(t,1);break}e.push({id:a.category_id,position:n}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(e)),LiveModel.category_orders=e,LiveModel.updateRecentAndFavouritePosition()},this.rearrange_timeout)}this.hoverCategory(s.category_selection)}break;case"channel_selection":var l,c,i=s.channel_selection;if(s.channel_selection+=e,s.channel_selection>=t.length)s.channel_selection=t.length-1;else if(s.channel_selection<0)s.channel_selection=0;else{if(this.rearrange_mode){if(s.channel_selection===i)return;c=makeRearrangeArray(this.movies,i,s.channel_selection),this.movies=c;var d=this.current_category;d.movies=c,c=this.movies[i],l=this.movies[s.channel_selection],this.changeChannelDomContent(this.channel_doms[i],c,i),this.changeChannelDomContent(this.channel_doms[s.channel_selection],l,s.channel_selection),this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),clearTimeout(this.rearrange_timer),this.rearrange_timer=setTimeout(function(){var e=LiveModel.channel_orders,t=[];e[d.category_id]&&(t=e[d.category_id]);for(var i=0;i<t.length;i++)if(t[i].id==l.stream_id&&t[i].name==l.name){t.splice(i,1);break}t.push({id:l.stream_id,name:l.name,position:s.channel_selection}),t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),e[d.category_id]=t,LiveModel.channel_orders=e,localStorage.setItem(storage_id+settings.playlist.id+"_channel_orders",JSON.stringify(e))},this.rearrange_timeout)}this.hoverChannel(s.channel_selection)}break;case"full_screen":case"live_controls":0<e?this.showNextChannel(1):this.showNextChannel(-1);break;case"search_selection":this.handleSearchItem(e);break;case"theme_channel_modal":break;case"switch-modal":s.switch_modal_selection+=e,s.switch_modal_selection<0&&(s.switch_modal_selection=0),s.switch_modal_selection>=this.switch_modal_doms.length&&(s.switch_modal_selection=this.switch_modal_doms.length-1),this.hoverSwitchPageModalItem(s.switch_modal_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&0<this.movies.length?(t.focused_part="channel_selection",$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverChannel(t.channel_selection)):this.hoverCategory(0);break;case"channel_selection":if(e<0){if(this.is_no_categories)break;$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverCategory(t.category_selection)}0<e&&this.hoverColorButton(0);break;case"full_screen":case"live_controls":$("#full-screen-information").slideUp(),this.showChannelNav();break;case"channel_nav":0<e?t.channel_selection==this.movies.length-1?this.hoverNav(0):this.hoverNav(t.channel_selection+1):e<0&&(0==t.channel_selection?this.hoverNav(this.movies.length-1):this.hoverNav(t.channel_selection-1));break;case"color_buttons_selection":t.color_buttons_selection+=e,3<t.color_buttons_selection&&(t.color_buttons_selection=3),t.color_buttons_selection<0?(t.color_buttons_selection=0,this.hoverChannel(t.channel_selection)):this.hoverColorButton(t.color_buttons_selection)}},HandleKey:function(e){var t=this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:"full_screen"!==t.focused_part&&"live_controls"!==t.focused_part||this.showNextChannel(1);break;case tvKey.CH_DOWN:"full_screen"!==t.focused_part&&"live_controls"!==t.focused_part||this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:case tvKey.PLAY:case tvKey.PLAYPAUSE:this.playOrPause();break;case tvKey.BLUE:clearTimeout(this.idleOnChannelTimer),this.Exit("search-page");break;case tvKey.RED:return void this.toggleRearrangeMode(!0);case tvKey.GREEN:return void("full_screen"!=t.focused_part&&this.showSwitchPageModal());case tvKey.YELLOW:this.addOrRemoveFav()}}};function convertProgrammeTimeToClientTime(e){e=moment(e,"YYYYMMDDHHmmss Z");return e.utc().add(client_offset,"minute"),e.format("Y-MM-DD HH:mm")}function getTodayDate(e){var t=new Date;return moment(t).format(e)}function calculateTimeDifference(e,t){e=new Date(e);time_difference_with_server=parseInt((1e3*t-e.getTime())/6e4)}function getLocalChannelTime(e){return moment(e).add(time_difference_with_server,"minute")}var vod_summary_page={keys:{focused_part:"action_selection",index:0,cast_selection:0},min_btn_index:0,favourite_action:0,action_btns:$(".vod-action-btn"),is_favourite:!1,is_protected:!1,is_loading:!1,is_trailer_exist:!0,prev_route:"",init:function(e){this.prev_route=e,this.favourite_action=0;var t,i=this,e=(showLoader(!0),this.is_loading=!0,$("#vod-summary-release-cast").siblings(".circle").hide(),$("#vod-summary-release-date").siblings(".circle").hide(),$("#vod-summary-release-director").siblings(".circle").hide(),$("#vod-summary-release-length").siblings(".circle").hide(),$("#vod-summary-release-genre").siblings(".circle").hide(),$("#vod-watch-trailer-button").hide(),$("#vod-watch-trailer-button-container").hide(),$("#vod-summary-release-date").text(""),$("#vod-summary-release-genre").text(""),$("#vod-summary-release-length").text(""),$("#vod-summary-release-age").text(""),$("#vod-summary-release-director").text(""),$("#vod-summary-release-cast").text(""),$("#vod-summary-description").text(""),this.hoverButton(0),$("#vod-summary-image-wrapper img").attr("src",""),$("#vod-summary-name").text(current_movie.name),$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#vod-summary-image-wrapper img").attr("src",current_movie.stream_icon||HOST+"app_src_min/images/default_movie.png"),this.is_favourite=!VodModel.favourite_ids.includes(current_movie.stream_id),this.toggleFavourite(),VodModel.favourite_ids.includes(current_movie.stream_id)?($($(".vod-action-btn")[2]).data("action","remove"),$($(".vod-action-btn")[2]).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')):($($(".vod-action-btn")[2]).data("action","add"),$($(".vod-action-btn")[2]).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')),0),e=void 0===current_movie.rating||""===current_movie.rating?0:parseFloat(current_movie.rating),e=(isNaN(e)&&(e=0),$("#vod-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#vod-rating-mark").text(e.toFixed(1)),current_movie.youtube_trailer="",current_route="vod-summary-page",$("#vod-series-page").addClass("hide"),$("#vod-series-player-page").addClass("hide"),$("#player-movies-modal").modal("hide"),$("#search-page").hide(),$("#vod-summary-page").removeClass("hide"),this.min_btn_index=0,current_movie.info={},current_movie.summary_downloaded=!1,"xc"===settings.playlist.playlist_type?$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+current_movie.stream_id,function(e){t=e.info,i.fillVodSummaryData(e,t);e=t.tmdb_id||t.tmdb;t.backdrop_path&&0<t.backdrop_path.length?i.fetchMovieImages(e,t.backdrop_path[0]):i.fetchMovieImages(e,HOST+"app_src_min/images/default_movie_bg.png"),i.fetchCast(e),showLoader(!1),i.is_loading=!1},function(e){showLoader(!1),i.is_loading=!1}):(showLoader(!1),this.is_loading=!1),vod_series_page.categories[vod_series_page.keys.category_selection]);this.is_protected=VodModel.isProtected(e),console.log("This movie is protected?",this.is_protected)},goBack:function(){var e,t,i;$("#vod-summary-page").addClass("hide"),current_route=this.prev_route,"vod-series-page"===this.prev_route?($("#vod-series-page").removeClass("hide"),t=vod_series_page.keys,e=vod_series_page.menu_doms,this.is_favourite?0==$(e[t.menu_selection]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$($(e[t.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),i=vod_series_page.categories[t.category_selection],e=vod_series_page.menu_doms,"favourite"===i.category_id?(this.is_favourite||(vod_series_page.menu_selection=0,vod_series_page.keys.focused_part="category_selection",vod_series_page.hiddenAndShowSidebar(),vod_series_page.hoverCategory(vod_series_page.category_doms[vod_series_page.keys.category_selection]),vod_series_page.showCategoryContent(!0),$(e[t.menu_selection]).remove()),t.focused_part="category_selection",$(vod_series_page.category_doms[t.category_selection]).addClass("active")):$($(e[t.menu_selection]).find(".favourite-badge")).remove()),vod_series_page.updateFavouriteOrRecentCount("favourite")):"search-page"===this.prev_route&&($("#search-page").show(),current_route="search-page",e=search_page.movie_doms[1],i=(t=search_page.keys).hor_keys[1],this.is_favourite?0==$(e[i]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$(e[i]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),$($(e[i]).find(".favourite-badge")).remove()))},fetchMovieImages:function(e,t,i){var s,a="/movie/"+e+"/images?api_key="+tmdb_api_key;e&&0!=e&&null!=e&&vod_series_page.isTMDBAllowed?$.getJSON(tmdb_prefix_url+a,function(e){0<e.backdrops.length&&(t=tmdb_img_url+"w1280"+e.backdrops[0].file_path),(s=0<e.logos.length?tmdb_img_url+"w500"+e.logos[0].file_path:s)?($("#vod-summary-log-title").attr("src",s).show(),$("#vod-summary-name").hide()):($("#vod-summary-log-title").hide(),$("#vod-summary-name").show());try{$("#movie-image").attr("src",t).show(),$(".vod-series-summary-section-img-darken").show()}catch(e){showImg($(".vod-series-background-img"))}i&&i()}):i&&i()},fetchCast:function(e,i){vod_series_page.isTMDBAllowed&&e&&0!=e&&null!=e&&(e="/movie/"+e+"/credits?api_key="+tmdb_api_key,$.getJSON(tmdb_prefix_url+e,function(e){var t;0<e.cast.length&&(t="",e.cast.forEach(function(e){t+='<div class="cast-member" onmouseenter="vod_summary_page.hoverCastMember('+e.order+')"><img src="'+(e.profile_path?tmdb_img_url+"w500"+e.profile_path:HOST+"app_src_min/images/avater.svg")+'" alt="'+e.name+'" class="cast-image"><span class="cast-name">'+e.name+"</span></div>"}),$("#vod-summary-cast #cast-container").html(t),$("#vod-summary-cast").show()),i&&i()}))},fillVodSummaryData:function(e,t){$("#vod-summary-release-date").text(t.releasedate),t.releasedate&&$("#vod-summary-release-date").siblings(".circle").show(),$("#vod-summary-release-genre").text(t.genre),t.genre&&$("#vod-summary-release-genre").siblings(".circle").show(),$("#vod-summary-release-length").text(t.duration),t.duration&&$("#vod-summary-release-length").siblings(".circle").show();var i={},s=(VodModel.saved_video_times.forEach(function(e){i[e.stream_id.toString()]=e}),i[current_movie.stream_id]),s=s?utilities.getPercentage(s.time,s.duration):0,s=(0<s?($("#vod-watch-movie-button").addClass("continue"),$("#vod-summary-watched-bar").css("width",s+"%"),$("#vod-summary-progress-percentage").text(s+"%"),$("#vod-watch-movie-btn-text").attr("data-word_code","continue_watching"),null!=typeof current_words.continue_watching?$("#vod-watch-movie-btn-text").text(current_words.continue_watching):$("#vod-watch-movie-btn-text").text("Continue Watching.")):($("#vod-watch-movie-button").removeClass("continue"),$("#vod-watch-movie-btn-text").attr("data-word_code","start_watching"),null!=typeof current_words.start_watching?$("#vod-watch-movie-btn-text").text(current_words.start_watching):$("#vod-watch-movie-btn-text").text("Start Watching.")),$("#vod-summary-release-age").text(t.age),$("#vod-summary-release-director").text(t.director),t.director&&$("#vod-summary-release-director").siblings(".circle").show(),$("#vod-summary-release-cast").text(t.cast),t.cast&&$("#vod-summary-release-cast").siblings(".circle").show(),$("#vod-summary-description").text(t.plot),(current_movie.info=t).tmdb_id&&(current_movie.tmdb_id=t.tmdb_id),current_movie.summary_downloaded=!0,"");try{((s=vod_series_page.current_backdrop||t.backdrop_path[0]||t.backdrop||HOST+"app_src_min/images/default_movie_bg.png")?$(".vod-series-background-img").attr("src",s):$(".vod-series-background-img").attr("src",HOST+"app_src_min/images/default_movie_bg.png")).show()}catch(e){console.error("ERROR SETTINGS BACKDROP IMAGE",e)}$(".vod-series-background-img-overlay").show(),current_movie.youtube_trailer=e.info.youtube_trailer,void 0!==t.youtube_trailer&&null!=t.youtube_trailer&&""!==t.youtube_trailer.trim()?(this.is_trailer_exist=!0,this.min_btn_index=0,$("#vod-watch-trailer-button").show(),$("#vod-watch-trailer-button-container").show(),vod_summary_page.playTrailerVideo(e.info.youtube_trailer)):(this.is_trailer_exist=!1,$("#vod-watch-trailer-button").hide(),$("#vod-watch-trailer-button-container").hide())},showTrailerVideo:function(){""===current_movie.youtube_trailer||null==current_movie.youtube_trailer?($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")):trailer_page.init(current_movie.youtube_trailer,current_route)},showMovie:function(){$("#vod-summary-page").addClass("hide"),vod_series_player_page.makeEpisodeDoms("vod-summary-page"),vod_series_player_page.init(current_movie,"movie",this.prev_route,"",!0)},toggleFavourite:function(){var e;this.is_protected&&!this.is_favourite?showToast("Parental Safety","Adding protected content to favourites is not allowed."):(e=this.action_btns[2],this.is_favourite=!this.is_favourite,this.is_favourite?$(e).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'):$(e).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'))},hoverButton:function(e){var t=this.keys;t.index=e,t.focused_part="action_selection",$(".cast-member").removeClass("active"),$(".vod-action-btn").removeClass("active"),$($(".vod-action-btn")[t.index]).addClass("active")},hoverCastMember:function(e){var t=this.keys;t.focused_part="cast_selection",t.cast_selection=e,$(".vod-action-btn").removeClass("active"),$(".cast-member").removeClass("active"),$($(".cast-member")[t.cast_selection]).addClass("active"),moveScrollPosition($("#cast-container"),$($(".cast-member")[t.cast_selection])[0],"horizontal",!1,!1,!0)},keyClick:function(){var e=this.keys,e=$(".vod-action-btn")[e.index];$(e).trigger("click")},handleMenuLeftRight:function(e){var t,i=this.keys;switch(i.focused_part){case"action_selection":var s=this.min_btn_index;i.index+=e,this.is_trailer_exist||(i.index+=e),i.index<s&&(i.index=2),2<i.index&&(i.index=s),this.hoverButton(i.index);break;case"cast_selection":i.cast_selection+=e,$(".cast-member")&&(t=$(".cast-member").length),i.cast_selection<0&&(i.cast_selection=0),i.cast_selection>=t&&(i.cast_selection=t-1),this.hoverCastMember(i.cast_selection);break;default:this.hoverButton(1)}},HandleKey:function(e){var t=this.keys;if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.hoverButton(t.index);break;case tvKey.DOWN:this.hoverCastMember(t.cast_selection);break;case tvKey.ENTER:this.keyClick();break;case tvKey.YELLOW:this.toggleFavourite()}},playTrailerVideo:function(e){}},vod_series_player_page={player:null,back_url:"",show_control:!1,timeOut:null,has_episodes:!1,keys:{focused_part:"control_bar",control_bar:0,info_bar:0,operation_modal:0,subtitle_audio_selection_modal:0,audio_selection_modal:0,movies_menu_selection:0,aspect_ratio_selection:0,prev_focus:"",resume_bar:0,episode_selection:0,subtitle_adjust_selection:0,selected_exit_button:0},current_subtitle_index:-1,current_audio_track_index:-1,subtitle_audio_menus:[],forwardTimer:null,current_time:0,show_subtitle:!1,show_audio_track:!1,video_control_doms:$("#vod-series-video-controls-container .video-control-icon i"),video_info_doms:$("#vod-series-video-controls-container .video-info-btn"),vod_info_timer:null,current_movie:{},resume_time:0,resume_timer:null,episode_doms:[],resume_bar_doms:$("#video-resume-modal .resume-action-btn"),slider_element:$("#vod-series-video-progressbar-container .video-progress-bar-slider")[0],seek_timer:null,seek_interval_timer:null,current_movie_type:"",video_duration:0,last_key_time:0,subtitle_loading:!1,subtitle_loaded:!1,fw_timer:null,subtitle_adjust_items:$(".subtitle-adjust-item"),subtitle_adjust_time:0,is_drawing:!1,current_render_count:0,render_count_increment:40,movies_menu_doms:[],aspect_ratio_doms:$("#aspect-ratio-modal-body div"),is_catchup:!1,showNextVideo_debounce:!1,init:function(e,t,i,s,a){console.log("Movie",t),"epg"==t||"catchup"==t||"catch-up"==t?(this.is_catchup=!0,$(".no-catchup").hide()):(this.is_catchup=!1,$(".no-catchup").show());this.keys.movies_menu_selection=0,this.subtitle_adjust_time=0,this.current_movie=e,this.current_time=0,this.video_duration=0,this.subtitle_loaded=!1,this.fw_timer=null,$("#vod-series-player-page").removeClass("hide"),this.show_control=!0,this.showControlBar(a),$("#vod-series-progress-container .rangeslider").removeClass("active");var o,n,r,l,a=$(this.video_control_doms[2]),c=($(a).removeClass("fa-play"),$(a).addClass("fa-pause"),this),a=this.slider_element,c=($(a).attr({min:0,max:100}),$(a).rangeslider({polyfill:!1,rangeClass:"rangeslider",onSlideEnd:function(e,t){c.sliderPositionChanged(t)}}),$(a).val(0).change(),$(a).rangeslider("update"),$("#vod-series-player-page").find(".video-current-time").text("--:--"),$("#vod-series-player-page").find(".video-total-time").text("--:--"),clearTimeout(this.resume_timer),"movie"===t?("xc"===settings.playlist.playlist_type?o=getMovieUrl(e.stream_id,"movie",e.container_extension):"general"===settings.playlist.playlist_type&&(o=e.url),$("#vod-series-video-title").html(e.name)):"series"===t?("xc"===settings.playlist.playlist_type?o=getMovieUrl(e.id,"series",e.container_extension):"general"===settings.playlist.playlist_type&&(o=e.url),$("#vod-series-video-title").html(e.title)):"epg"===t&&"catch-up"===i&&(a=catchup_page.sorted_programmes[catchup_page.keys.date_selection].programmes[catchup_page.keys.programme_selection],o=LiveModel.getProgrammeVideoUrl(e.stream_id,a).url,n=a.start,r=a.stop,n=n.substr(11),r=r.substr(11),a=getAtob(a.title)+"  <span class='player-epg-title-time'>"+n+"~"+r+"</span>",$("#vod-series-video-title").html(a)),this.back_url=i,this);try{media_player.close()}catch(e){console.log("Exception in Close Player => "+e)}try{media_player.init("vod-series-player-video","vod-series-player-page")}catch(e){console.log("Exception in init Player => "+e)}try{media_player.playAsync(o)}catch(e){console.log("Exception in PlayAsync function => "+e)}if(this.timeOut=setTimeout(function(){c.hideControlBar()},1e4),l="movie"===t?"stream_id":"id",this.resume_time=0,"movie"===t||"series"===t)if(l=e[l].toString(),"movie"===t){for(var d=VodModel.saved_video_times,h=this.resume_time=0;h<d.length;h++)if(d[h].stream_id==l){this.resume_time=d[h].time;break}}else if("series"===t)for(d=SeriesModel.saved_video_times,h=0;h<d.length;h++)if(d[h].stream_id==current_series.series_id){var _=d[h].video_times,u=series_summary_page.keys.episode_selection.toString(),m=series_summary_page.current_season_index.toString();if(_[m]&&_[m][u]){this.resume_time=_[m][u].time;break}}current_route="vod-series-player-video",this.current_subtitle_index=-1,this.current_audio_track_index=-1,this.show_subtitle=!1,this.current_movie_type=t},hoverExitButton:function(e){0==e?($(".confirtm-exit-palyer").addClass("active"),$(".cancel-exit-palyer").removeClass("active")):($(".confirtm-exit-palyer").removeClass("active"),$(".cancel-exit-palyer").addClass("active")),this.keys.selected_exit_button=e},clearMoviesList:function(){$("#player-movies-modal-body").html(""),this.current_render_count=0},exitPlayer:function(){switch(this.clearMoviesList(),$("#player-exit-confirm-modal").hide(),$("#video-resume-modal").hide(),this.Exit(),this.back_url){case"vod-series-page":current_route="vod-series-page",$("#vod-summary-page").removeClass("hide"),vod_summary_page.init("vod-series-page"),vod_series_page.updateFavouriteOrRecentCount("recent");break;case"episode-page":current_route="series-summary-page",$("#series-summary-page").removeClass("hide"),series_summary_page.hoverEpisode(series_summary_page.keys.episode_selection);break;case"catch-up":$("#epg-page").removeClass("hide"),catchup_page.selectProgramme(catchup_page.keys.programme_selection,!1);break;case"search-page":$("#search-page").show();var e="movie"===this.current_movie_type?1:2;search_page.keys.hor_keys[e]>=search_page.movie_doms[e].length&&(search_page.keys.hor_keys[e]=search_page.movie_doms[e].length-1),search_page.hoverMovie(search_page.keys.hor_keys[e],e)}},cancelExit:function(){$("#player-exit-confirm-modal").hide(),$("#video-resume-modal").hide(),this.keys.focused_part="control_bar"},sliderPositionChanged:function(e){this.hoverSlider(),media_player.videoObj.currentTime=e,this.current_time=e,$(this.slider_element).val(e).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(e))},makeEpisodeDoms:function(e){var s;this.keys.episode_selection=0,"episode-page"===e?(e=current_season.episodes,this.episodes=e,this.has_episodes=!0,s="",e.map(function(e,t){var i=e.info.movie_image||series_summary_page.current_series_backdrop_image||current_series.cover;s+='<div class="player-season-item"              onclick="vod_series_player.showSelectedEpisode()"              onmouseenter="vod_series_player.hoverEpisode('+t+')"          >              <div class="player-episodes-image-container">                  <img src="'+i+'" />              </div>              <div class="player-episode-title-container">                  <div class="player-episode-number">'+(t+1)+'</div>                   <div class="player-episode-title max-line-2">'+e.title+"</div>              </div>          </div>"}),$("#player-seasons-container").html(s),this.episode_doms=$(".player-season-item"),$("#player-seasons-container").removeClass("expanded"),$("#player-seasons-container").show()):(this.has_episodes=!1,$("#player-seasons-container").html(""),this.episode_doms=$(".player-season-item"),this.episode_doms=[],$("#player-seasons-container").hide())},showResumeBar:function(){var e,t=this.keys;0<this.resume_time&&(e="lg"!==platform&&"vidaa"!==platform?1e3:1,e=media_player.formatTime(this.resume_time/e),$("#vod-resume-time").text(e),$("#video-resume-modal").show(),this.hideControlBar(),clearTimeout(this.resume_timer),"resume_bar"!=t.focused_part&&(t.prev_focus=t.focused_part),"subtitle_audio_selection_modal"!=t.focused_part&&"movies_menu_modal"!=t.focused_part&&"aspect_ratio_modal"!=t.focused_part||(t.prev_focus="resume_bar"),this.hoverResumeBtn(0))},Exit:function(){this.saveVideoTime(),current_route=this.back_url;try{media_player.close(),console.log("Closing Media Player")}catch(e){console.error("Error Closing Movie or Series",e)}$("#"+media_player.parent_id).find(".video-error").hide(),$("#"+media_player.parent_id).find(".subtitle-container").text(""),$("#vod-series-player-page").addClass("hide")},saveVideoTime:function(){console.log("Saving Video Time "+platform);try{var e,t,i,s;if("samsung"===platform){s=i=1e4;try{e=webapis.avplay.getCurrentTime(),t=webapis.avplay.getDuration()}catch(e){}}else"lg"!==platform&&"vidaa"!==platform||(s=10,e=media_player.videoObj.currentTime,t=media_player.videoObj.duration,i=10);"develop"===env&&(t=(e=25e3)+5e4*Math.random());var a,o,n,r=this.current_movie;if(i<=t-e&&s<=e){if("movie"===this.current_movie_type){if(checkForAdult(r,"movie",a=VodModel.getCategories(!0,!1)))return;VodModel.saveVideoTime(r.stream_id,e,t),VodModel.addToWatchList(r),"vod-series-page"===this.back_url&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").addClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-progress").css({width:e/t*100+"%"}),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress"))}"series"===this.current_movie_type&&(a=SeriesModel.getCategories(!0,!1),checkForAdult(current_series,"movie",a)||(o=SeriesModel.saveVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection,e,t),SeriesModel.addToWatchList(current_series),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-duration").addClass("has-progress"),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-progress").css({width:e/t*100+"%"}),series_summary_page.series_video_times=o,"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress")))}else t-e<i&&("movie"===this.current_movie_type&&(VodModel.removeVideoTime(r.stream_id),"vod-series-page"===this.back_url)&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").removeClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress")),"series"===this.current_movie_type)&&((n=SeriesModel.removeVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection))[0]&&"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress"),series_summary_page.series_video_times=n[1])}catch(e){console.log(e)}},goBack:function(){$(".modal").modal("hide");var e=this.keys;this.show_control?this.hideControlBar():"exit_confirm"===e.focused_part?this.cancelExit():"control_bar"!=e.focused_part&&"info_bar"!=e.focused_part&&"slider"!=e.focused_part&&"episode_selection"!=e.focused_part||($("#player-exit-confirm-modal").show(),this.hoverExitButton(0),this.keys.focused_part="exit_confirm"),"subtitle_audio_selection_modal"===e.focused_part&&(e.focused_part=e.prev_focus,$("#subtitle-selection-modal").modal("hide")),"vod_info"===e.focused_part&&($("#vod-video-info-container").hide(),clearTimeout(this.vod_info_timer),e.focused_part=e.prev_focus),"resume_bar"===e.focused_part&&($("#video-resume-modal").hide(),"resume_bar"!=e.prev_focus?e.focused_part=e.prev_focus:e.focused_part="info_bar",clearTimeout(this.resume_timer)),"subtitle_adjust_selection"===e.focused_part&&($("#subtitle-time-adjust-modal").hide(),e.focused_part="control_bar"),"movies_menu_modal"===e.focused_part&&($("player-movies-modal").modal("hide"),e.focused_part=e.prev_focus),"aspect_ratio_modal"===e.focused_part&&($("aspect-ratio-modal").modal("hide"),e.focused_part=e.prev_focus)},playPauseVideo:function(e){this.showControlBar(!1);var t=this.video_control_doms,i=$(t[2]);switch(e){case"pause":if(media_player.state===media_player.STATES.PLAYING)try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}break;case"play":if(media_player.state===media_player.STATES.PAUSED)try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}break;default:if(media_player.state===media_player.STATES.PAUSED){console.log("We are in pause state, will play");try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}}else if(media_player.state===media_player.STATES.PLAYING){console.log("We are in playing state, will pause");try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}}}},seekTo:function(e){if("samsung"===platform){var t=(new Date).getTime()/1e3;if(!(t-this.last_key_time<.1)){if(this.last_key_time=t,0===this.current_time&&(this.current_time=media_player.current_time/1e3),0!=this.video_duration)i=this.video_duration;else try{i=webapis.avplay.getDuration()/1e3,this.video_duration=i}catch(e){}if(0!=i)if((s=this.current_time+e)<0)this.showNextVideo(-1,!1);else if(i<=s)this.showNextVideo(1,!1);else{if(this.current_time=s,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)),$(this.slider_element).val(s).change(),clearTimeout(this.seek_timer),media_player.state===media_player.STATES.PLAYING)try{media_player.pause()}catch(e){}$("#"+media_player.parent_id).find(".video-loader").show(),this.seek_timer=setTimeout(function(){webapis.avplay.seekTo(1e3*s),setTimeout(function(){try{media_player.play()}catch(e){}},200)},500)}}}else{var i,s;0===this.current_time&&(this.current_time=media_player.videoObj.currentTime),(i=media_player.videoObj.duration)<=(s=(s=this.current_time+e)<0?0:s)&&(s=i),this.current_time=s,media_player.videoObj.currentTime=s,0<i&&(SrtOperation.srt&&0<SrtOperation.srt.length&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),SrtOperation.stopOperation(),this.fw_timer&&(clearTimeout(this.fw_timer),this.fw_timer=null),this.fw_timer=setTimeout(function(){SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1},200)),$(this.slider_element).val(s).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)))}},showSelectedEpisode:function(){var e=series_summary_page.keys,t=this.keys,i=series_summary_page.episode_doms;if(e.episode_selection!=t.episode_selection){this.saveVideoTime(),$(i).removeClass("active"),e.episode_selection=t.episode_selection,$(i[e.episode_selection]).addClass("active");i=this.episodes[t.episode_selection];this.resume_time=0;try{media_player.close()}catch(e){console.error("Error Closing Movie or Series",e)}current_episode=i,this.init(current_episode,"series","episode-page","",!1),this.hoverEpisode(t.episode_selection)}},showNextVideo:function(e,t){if(!this.showNextVideo_debounce){this.showNextVideo_debounce=!0;var i=this;switch(setTimeout(function(){i.showNextVideo_debounce=!1},1e3),this.saveVideoTime(),this.resume_time=0,this.back_url){case"vod-series-page":vod_series_page.menu_doms;if((s=vod_series_page.keys).menu_selection+=e,s.menu_selection<0)s.menu_selection=0;else{if(s.menu_selection>=vod_series_page.movies.length)return t?(this.hideControlBar(),void this.goBack()):void(s.menu_selection=vod_series_page.movies.length-1);current_movie=vod_series_page.movies[s.menu_selection],this.init(current_movie,"movie","vod-series-page","",!1)}break;case"episode-page":var s=series_summary_page.keys,a=series_summary_page.episode_doms;if(s.episode_selection+=e,s.episode_selection<0)s.episode_selection=0;else{if(s.episode_selection>=a.length)return t?(this.hideControlBar(),void this.goBack()):void(s.episode_selection=a.length-1);var a=current_season.episodes;current_episode=a[s.episode_selection],this.init(current_episode,"series","episode-page","",!1)}break;case"catch-up":(s=catchup_page.keys).programme_selection+=e;a=catchup_page.sorted_programmes[s.date_selection].programmes[s.programme_selection];s.programme_selection<0?s.programme_selection=0:s.programme_selection>=a.length?s.programme_selection=a.length-1:this.init(catchup_page.channel,"epg","catch-up","",!1);break;case"search-page":(s=search_page.keys).hor_keys[1]+=e,s.hor_keys[1]<0?s.hor_keys[1]=0:(a=search_page.filtered_movies[1],s.hor_keys[1]>=a.length?s.hor_keys[1]=a.length-1:(this.saveVideoTime(),current_movie=a[s.hor_keys[1]],this.init(current_movie,"movie","search-page",!1)))}}},showControlBar:function(e){$("#vod-series-video-controls-container").slideDown(),$("#vod-series-video-title").slideDown(),this.show_control=!0;var t=this;e&&this.hoverVideoControlIcon(2),clearTimeout(this.timeOut),this.timeOut=null,this.timeOut=setTimeout(function(){t.hideControlBar()},1e4)},hideControlBar:function(){$("#vod-series-video-controls-container").slideUp(),$("#vod-series-video-title").slideUp(),this.show_control=!1},makeMediaTrackElement:function(e,t){var s,a,o="",n=0;return"TEXT"===t&&(n=1,o='<div class="modal-operation-menu-type-2 subtitle-item"                    onmouseenter="vod_series_player_page.hoverSubtitle(0)"                     onclick="vod_series_player_page.handleMenuClick()"                 >                   <input class="magic-radio" type="radio" name="radio" value="-1">                   <label>Disabled</label>                </div>'),"samsung"===platform?(s="TEXT"!==t?"language":"track_lang",e.map(function(e,t){var i=e.extra_info;console.log(e),o+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player_page.hoverSubtitle('+(t+n)+')"                     onclick="vod_series_player_page.handleMenuClick()"                 >                    <input class="magic-radio" type="radio" name="radio"                        value="'+e.index+'"                    >                    <label>'+i[s]+"</label>                </div>"})):(a="TEXT"===t?"Subtitle ":"Track ",e.map(function(e,t){var i=e.language;i?language_codes[i]&&(i=language_codes[i]):i=a+(t+1),console.log("Language",i),console.log("Item",e),o+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player_page.hoverSubtitle('+(t+n)+')"                         onclick="vod_series_player_page.handleMenuClick()"                     >                        <input class="magic-radio" type="radio" name="radio"                            value="'+t+'">                        <label>'+i+"</label>                    </div>"})),o},showSubtitleAudioModal:function(e){this.hideControlBar();var t,i,s,a=this.keys;try{$("#subtitle-loader-container").hide(),this.subtitle_loading=!1,"samsung"!==platform&&"TEXT"===e?this.subtitle_loaded?0<media_player.subtitles.length?this.renderSubtitles(e,media_player.subtitles):this.showEmptySubtitleMessage(e):($("#subtitle-selection-container").html(""),"subtitle_audio_selection_modal"!==a.focused_part&&(a.prev_focus=a.focused_part),this.hoverSubtitle(-2),this.subtitle_loading=!0,$("#subtitle-selection-modal").modal("show"),$("#subtitle-loader-container").show(),i=settings.playlist.playlist_type,s=this.current_movie,"movie"===this.current_movie_type?s.tmdb_id?this.getSubtitlesForLG():s.tmdb?(s.tmdb_id=s.tmdb,this.getSubtitlesForLG()):"xc"!==i||s.summary_downloaded?this.getTmdbID(s,"movie"):this.getMovieDetail():current_series.tmdb||current_series.info&&current_series.info.tmdb||s.info&&s.info.tmdb_id?this.getSubtitlesForLG():this.getTmdbID(current_series,"series")):0<(t=media_player.getSubtitleOrAudioTrack(e)).length?this.renderSubtitles(e,t):showToast("Sorry","TEXT"===e?"No Subtitles exists":"No Audios exists")}catch(e){console.log(e),$("#vod-series-player-operation-modal").modal("hide"),showToast("Sorry","Video not loaded yet")}},showMoviesMenu:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="movies_menu_modal",this.hideControlBar(),$("#player-movies-modal").modal("show"),this.renderCategoryContent()},showAspectRatioMenu:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="aspect_ratio_modal",this.hideControlBar(),$("#aspect-ratio-modal").modal("show")},renderCategoryContent:function(){var s,a,o="",n=HOST+"app_src_min/images/default_movie_bg.png",r="stream_icon",e=(this.current_movie_type=vod_series_player_page.current_movie_type,this.current_movie_type);"series"===e&&(r="cover"),"replay"===e&&(n=default_movie_icon),this.current_render_count<vod_series_page.movies.length&&(showLoader(this.is_drawing=!0),s=this,setTimeout(function(){showLoader(s.is_drawing=!1)},1e3),a="stream_id","vod"==this.current_movie_type||"movie"==this.current_movie_type?a="stream_id":"series"==this.current_movie_type&&(a="series_id"),vod_series_page.movies.slice(this.current_render_count,this.current_render_count+this.render_count_increment).map(function(e,t){var i=e[a].toString();console.log(e),o+='<div class="player-vod-series-menu-item-container"              data-stream_id ="'+i+'"              data-index="'+(s.current_render_count+t)+'"              onmouseenter="vod_series_player_page.hoverMovieItem('+t+')"              onclick="vod_series_player_page.handleMenuClick()"            >              <div class="player-vod-series-poster-wrapper">                <img class="vod-series-icon" src="'+e[r]+'" onerror="this.src=\''+n+'\'">              </div>              <div class="player-vod-series-menu-item-info-wrapper">                <div class="player-vod-series-menu-item-info-title">'+e.name+"</div>              </div>            </div>            "}),this.current_render_count+=this.render_count_increment,$("#player-movies-modal-body").append(o),this.movies_menu_doms=$("#player-movies-modal-body .player-vod-series-menu-item-container"),this.hoverMovieItem(this.keys.movies_menu_selection))},getMovieDetail:function(){var t=this,i=this.current_movie;"xc"===settings.playlist.playlist_type&&$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+i.stream_id,function(e){e=e.info;t.current_movie.info=e,i.summary_downloaded=!0,e.tmdb_id?(t.current_movie.tmdb_id=e.tmdb_id,t.getSubtitlesForLG()):t.getTmdbID(i,"movie")},function(e){console.log(e),t.getTmdbID(i,"movie")})},getTmdbID:function(r,l){var e="movie"===l?r.info&&(r.info.o_name||r.info.name)||r.name:(r.info&&r.info.name?r.info:r).name,e=getRealMovieName(e),c=e.name.toLowerCase(),e=(e.year,e.country,tmdb_prefix_url+("movie"===l?"/search/movie":"/search/tv")+"?api_key="+tmdb_api_key+"&query="+c),d=this;$.ajax({method:"get",url:e,success:function(e){if(e.results&&0<e.results.length){var t=e.results;if(console.log(e),1==t.length)"movie"===l?d.current_movie.tmdb_id=t[0].id:current_series.tmdb=t[0].id,d.getSubtitlesForLG();else if("movie"===l){e=r.info;if(e&&e.releasedate){for(var i=e.releasedate,s=0;s<t.length;s++)if(t[s].release_date===i){d.current_movie.tmdb_id=t[s].id;break}}else{for(var a=0,s=0;s<t.length;s++)c.includes(t[s].title.toLowerCase())&&(a++,o=s);1==a&&(console.log(t[o]),d.current_movie.tmdb_id=t[o].id)}d.current_movie.tmdb_id?d.getSubtitlesForLG():d.showEmptySubtitleMessage("TEXT")}else{for(var o,a=0,n=current_series.plot?current_series.plot.toLowerCase().trim():"",s=0;s<t.length;s++)if((c.includes(t[s].name.toLowerCase())||c.includes(t[s].original_name.toLowerCase()))&&(a++,o=s,n)&&n==t[s].overview.toLowerCase().trim()){console.log("here same overview"),a=1;break}1==a?(console.log(t[o]),current_series.tmdb=t[o].id,d.getSubtitlesForLG()):d.showEmptySubtitleMessage("TEXT")}}else d.showEmptySubtitleMessage("TEXT")},error:function(e){d.showEmptySubtitleMessage("TEXT")}})},getSubtitlesForLG:function(){var e,t,i,s=this;"movie"===this.current_movie_type?e={tmdb_id:this.current_movie.tmdb_id}:(t=current_season.episodes[series_summary_page.keys.episode_selection],current_series.tmdb?i=current_series.tmdb:current_series.info&&current_series.info.tmdb&&(i=current_series.info.tmdb),i?(e={movie_type:"episode",season_number:current_season.season_number||series_summary_page.keys.season_selection+1,episode_number:t.episode_num||series_summary_page.keys.episode_selection+1,tmdb_id:i},t.info&&t.info.tmdb_id&&(e.episode_tmdb_id=t.info.tmdb_id)):t.info&&t.info.tmdb_id&&(e={movie_type:"episode",episode_tmdb_id:t.info.tmdb_id})),$.ajax({method:"post",url:"https://ibosub.com/api/get-subtitles-update",data:e,dataType:"json",success:function(e){s.subtitle_loading=!1,s.subtitle_loaded=!0,$("#subtitle-loader-container").hide(),"success"===e.status&&0<e.subtitles.length?(media_player.subtitles=e.subtitles,media_player.srt_map=e.srt_map,media_player.movie_list_id=e.movie_list_id,s.renderSubtitles("TEXT",e.subtitles)):s.showEmptySubtitleMessage("TEXT")},error:function(e){s.showEmptySubtitleMessage("TEXT")}})},renderSubtitles:function(e,t){var i,s,a=this,o=this.keys;$("#vod-series-player-operation-modal").modal("hide"),0<t.length&&("subtitle_audio_selection_modal"!=o.focused_part&&(o.prev_focus=o.focused_part),"TEXT"==e?$("#subtitle-modal-title").text("Subtitle"):$("#subtitle-modal-title").text("Audio Track"),o.focused_part="subtitle_audio_selection_modal",$("#subtitle-selection-modal").find(".modal-operation-menu-type-2").removeClass("active"),o=this.makeMediaTrackElement(t,e),$("#subtitle-selection-container").html(o),$("#subtitle-selection-modal").modal("show"),i=$("#subtitle-selection-modal .subtitle-item"),this.subtitle_audio_menus=i,$(i[0]).find("input").prop("checked",!0),this.hoverSubtitle(0),s="TEXT"===e?this.current_subtitle_index:this.current_audio_track_index,this.subtitle_audio_menus.map(function(e,t){t=parseInt($(t).find("input").val());console.log(t),t==s&&(console.log("here"+s),$(i).find("input").prop("checked",!1),$(i[e]).find("input").prop("checked",!0),a.hoverSubtitle(e))}),t=$("#subtitle-selection-modal").find(".modal-btn-2"),$(t).removeClass("active"))},showEmptySubtitleMessage:function(e){$("#subtitle-selection-modal").modal("hide"),"TEXT"===e?(this.subtitle_loaded=!1,this.subtitle_loading=!1,media_player.subtitles=[],showToast("Sorry","No Subtitles exists")):showToast("Sorry","No Audios exists");e=this.keys;"subtitle_audio_selection_modal"==e.focused_part&&(e.focused_part=e.prev_focus)},cancelSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},confirmSubtitle:function(){if($("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,$("#subtitle-modal-title").text().toLowerCase().includes("subtitle")){var t,i=this;this.current_subtitle_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val(),-1==this.current_subtitle_index||"samsung"==platform||(t=media_player.subtitles[this.current_subtitle_index].file_id.toString(),media_player.srt_map[t])?this.subtitleChanged():$.ajax({method:"post",url:"https://ibosub.com/api/get-single-subtitle-content",data:{movie_list_id:media_player.movie_list_id,file_id:t},dataType:"json",success:function(e){"success"===e.status&&(media_player.srt_map[t]=e.content,i.subtitleChanged())},error:function(e){showToast("Sorry","Something error caused while downloading subtitles for current language, please try again later")}})}else{this.current_audio_track_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val();try{media_player.setSubtitleOrAudioTrack("AUDIO",parseInt(this.current_audio_track_index))}catch(e){}console.log(this.current_audio_track_index)}},subtitleChanged:function(){try{this.show_subtitle=!0,media_player.setSubtitleOrAudioTrack("TEXT",parseInt(this.current_subtitle_index))}catch(e){}},removeAllActiveClass:function(){$(this.video_info_doms).removeClass("active"),$(this.video_control_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$("#vod-series-player-page .rangeslider").removeClass("active")},showSubtitleAdjustModal:function(){var e=this.keys;this.hideControlBar(),"subtitle_adjust_selection"!=e.focused_part&&(e.prev_focus=e.focused_part),$("#subtitle-adjust-time").val(this.subtitle_adjust_time),$("#subtitle-time-adjust-modal").show(),this.hoverSubtitleAdjustBtn(0)},saveSubtitleAdjustTime:function(){var e=(e=$("#subtitle-adjust-time").val())||0;this.subtitle_adjust_time!=e&&(this.subtitle_adjust_time=e,SrtOperation.srt)&&0<SrtOperation.srt.length&&(SrtOperation.setTimeDifference(e),SrtOperation.stopOperation(),SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1),this.goBack()},hoverSubtitleAdjustBtn:function(e){var t=this.keys;t.focused_part="subtitle_adjust_selection",t.subtitle_adjust_selection=e,$(this.subtitle_adjust_items).removeClass("active"),$(this.subtitle_adjust_items[e]).addClass("active")},hoverSubtitle:function(e){var t=this.keys;t.focused_part="subtitle_audio_selection_modal",$(this.subtitle_audio_menus).removeClass("active"),0<=e?(t.subtitle_audio_selection_modal=e,t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2&&moveScrollPosition($("#subtitle-selection-container"),this.subtitle_audio_menus[t.subtitle_audio_selection_modal],"vertical",!1)):t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length+e,$(this.subtitle_audio_menus[t.subtitle_audio_selection_modal]).addClass("active")},hoverSlider:function(){$("#player-seasons-container").removeClass("expanded"),this.removeAllActiveClass(),this.keys.focused_part="slider",$("#vod-series-player-page .rangeslider").addClass("active"),this.showControlBar(!1)},hoverVideoControlIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1),this.removeAllActiveClass();var t=this.keys;t.focused_part="control_bar",t.control_bar=e,$(this.video_control_doms[e]).addClass("active")},hoverVideoInfoIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="info_bar",t.info_bar=e,$(this.video_info_doms[e]).addClass("active")},hoverEpisode:function(e){$("#player-seasons-container").addClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="episode_selection",t.episode_selection=e,$(this.episode_doms[e]).addClass("active"),moveScrollPosition($("#player-seasons-container"),this.episode_doms[t.episode_selection],"horizontal",!1)},hoverMovieItem:function(e){var t=this.keys;"movies_menu_modal"!=t.focused_part&&(t.prev_focus=t.focused_part,t.focused_part="movies_menu_modal"),t.movies_menu_selection=e,$(this.movies_menu_doms).removeClass("active"),$(this.movies_menu_doms[e]).addClass("active"),moveScrollPosition($("#player-movies-modal-body"),$(this.movies_menu_doms[e]),"vertical",!1)},hoverAspectRatioItem:function(e){var t=this.keys;"aspect_ratio_modal"!=t.focused_part&&(t.prev_focus=t.focused_part,t.focused_part="aspect_ratio_modal"),t.aspect_ratio_selection=e,$(this.aspect_ratio_doms).removeClass("active"),$(this.aspect_ratio_doms[e]).addClass("active"),moveScrollPosition($("#aspect-ratio-modal-body"),$(this.aspect_ratio_doms[e]),"vertical",!1)},hoverResumeBtn:function(e){var t=this.keys;t.resume_bar=e,t.focused_part="resume_bar",$(this.resume_bar_doms).removeClass("active"),$(this.resume_bar_doms[e]).addClass("active"),clearTimeout(this.resume_timer),this.resume_timer=null,this.resume_timer=setTimeout(function(){$("#video-resume-modal").hide(),"resume_bar"==t.focused_part?"resume_bar"!=t.prev_focus?t.focused_part=t.prev_focus:t.focused_part="info_bar":"subtitle_audio_selection_modal"===t.focused_part&&(t.prev_focus="info_bar")},15e3)},changeAspectRatio:function(e){e=e||"16:9",setTimeout(function(){try{media_player.setDisplayArea(e)}catch(e){console.log(e)}},0)},handleMenuClick:function(){var e=this.keys;if("movies_menu_modal"!=e.focused_part||this.is_drawing)if(this.show_control||"control_bar"!==e.focused_part&&"slider"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part){switch(e.focused_part){case"subtitle_audio_selection_modal":return void(e.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).trigger("click"):($(this.subtitle_audio_menus).find("input").prop("checked",!1),$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).find("input").prop("checked",!0)));case"aspect_ratio_modal":$(this.aspect_ratio_doms[e.aspect_ratio_selection]).trigger("click");break;case"resume_bar":if($("#video-resume-modal").hide(),e.focused_part=e.prev_focus,0==e.resume_bar)if("samsung"===platform)try{webapis.avplay.getCurrentTime()<this.resume_time&&(webapis.avplay.seekTo(this.resume_time),$(this.slider_element).val(this.resume_time/1e3).change())}catch(e){}else if("lg"===platform||"vidaa"===platform)try{media_player.videoObj.currentTime<this.resume_time&&(media_player.videoObj.currentTime=this.resume_time,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(this.resume_time)),0<media_player.videoObj.duration)&&$(this.slider_element).val(this.resume_time).change()}catch(e){}break;case"subtitle_adjust_selection":return void(0==e.subtitle_adjust_selection?$(this.subtitle_adjust_items[0]).focus():$(this.subtitle_adjust_items[e.subtitle_adjust_selection]).trigger("click"));case"exit_confirm":0==e.selected_exit_button?this.exitPlayer():1==e.selected_exit_button&&this.cancelExit()}if(this.show_control)switch(e.focused_part){case"control_bar":this.showControlBar(!1),$(this.video_control_doms[e.control_bar]).trigger("click");break;case"slider":this.showControlBar(!1);break;case"info_bar":$(this.video_info_doms[e.info_bar]).find(".video-info-icon").trigger("click"),this.showControlBar(!1);break;case"episode_selection":this.showControlBar(!1),$(this.episode_doms[e.episode_selection]).trigger("click")}}else this.showControlBar(!0);else if("vod"===this.current_movie_type||"movie"==this.current_movie_type){current_movie=vod_series_page.movies[e.movies_menu_selection];try{media_player.close()}catch(e){console.error("Error Media Player: ",e)}vod_summary_page.init("vod-series-page")}else if("series"===this.current_movie_type){current_series=vod_series_page.movies[e.movies_menu_selection];try{media_player.close()}catch(e){console.error("Error Media Player: ",e)}series_summary_page.init("vod-series-page")}},handleMenuLeftRight:function(e){var t,i=this.keys;if(this.show_control)switch(i.focused_part){case"control_bar":i.control_bar+=e,i.control_bar<0&&(i.control_bar=0),i.control_bar>=this.video_control_doms.length?(i.control_bar=this.video_control_doms.length-1,this.hoverVideoInfoIcon(0)):this.hoverVideoControlIcon(i.control_bar);break;case"info_bar":var s=4;this.is_catchup&&(s=3),i.info_bar+=e,2==i.info_bar&&"samsung"==platform&&(i.info_bar+=e),i.info_bar>s&&(i.info_bar=s),i.info_bar<0?(i.info_bar=0,this.hoverVideoControlIcon(i.control_bar)):this.hoverVideoInfoIcon(i.info_bar);break;case"slider":this.seekTo(30*e);break;case"episode_selection":i.episode_selection+=e,i.episode_selection<0&&(i.episode_selection=this.episode_doms.length-1),i.episode_selection>=this.episode_doms.length&&(i.episode_selection=0),this.hoverEpisode(i.episode_selection)}else"control_bar"!==i.focused_part&&"info_bar"!==i.focused_part&&"slider"!==i.focused_part||(this.showControlBar(!1),this.hoverSlider());"subtitle_audio_selection_modal"===i.focused_part&&(i.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2?0<e?this.hoverSubtitle(-1):this.hoverSubtitle(-2):(t=this.subtitle_audio_menus.length,i.subtitle_audio_selection_modal+=e,i.subtitle_audio_selection_modal<t-2&&(i.subtitle_audio_selection_modal=t-2),i.subtitle_audio_selection_modal>=t&&(i.subtitle_audio_selection_modal=t-1),this.hoverSubtitle(i.subtitle_audio_selection_modal))),"subtitle_adjust_selection"===i.focused_part&&(i.subtitle_adjust_selection=0<e?2:1,this.hoverSubtitleAdjustBtn(i.subtitle_adjust_selection)),"exit_confirm"===i.focused_part&&(0<e?this.hoverExitButton(1):this.hoverExitButton(0))},handleMenuUpDown:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part&&"episode_selection"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":e<0&&this.hoverVideoControlIcon(2),this.has_episodes&&0<e&&this.hoverEpisode(t.episode_selection);break;case"control_bar":0<e&&this.hoverSlider();break;case"info_bar":0<e&&this.hoverSlider(2),this.has_episodes&&0<e&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":e<0&&this.hoverSlider();break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?e<0&&(t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length-3):t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<0&&(t.subtitle_audio_selection_modal=0),this.hoverSubtitle(t.subtitle_audio_selection_modal);break;case"resume_bar":var i=this.resume_bar_doms;t.resume_bar+=e,t.resume_bar<0&&(t.resume_bar=i.length-1),t.resume_bar>=i.length&&(t.resume_bar=0),this.hoverResumeBtn(t.resume_bar);break;case"subtitle_adjust_selection":0<t.subtitle_adjust_selection?e<0&&this.hoverSubtitleAdjustBtn(0):0<e&&this.hoverSubtitleAdjustBtn(1);break;case"movies_menu_modal":t.movies_menu_selection+=e,t.movies_menu_selection<0&&(t.movies_menu_selection=0),t.movies_menu_selection>=this.movies_menu_doms.length&&(t.movies_menu_selection=this.movies_menu_doms.length-1),this.hoverMovieItem(t.movies_menu_selection),0<e&&t.movies_menu_selection>=this.current_render_count-5&&this.renderCategoryContent();break;case"aspect_ratio_modal":t.aspect_ratio_selection+=e,t.aspect_ratio_selection<0&&(t.aspect_ratio_selection=0),t.aspect_ratio_selection>=this.aspect_ratio_doms.length&&(t.aspect_ratio_selection=this.aspect_ratio_doms.length-1),this.hoverAspectRatioItem(t.aspect_ratio_selection)}else this.showControlBar(!0)},HandleKey:function(e){switch(e.keyCode){case tvKey.MediaFastForward:this.seekTo(30);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.MediaRewind:this.seekTo(-30);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.MediaPause:this.playPauseVideo("pause");break;case tvKey.MediaPlay:this.playPauseVideo("play");break;case tvKey.MediaPlayPause:this.playPauseVideo("");break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.STOP:case tvKey.RETURN:this.goBack()}}},trailer_page={player:null,done:!1,back_url:"home-page",is_paused:!1,is_loading:!1,init:function(e,t){showLoader(!0),this.is_loading=!0,this.back_url=t,this.is_paused=!1,$("#vod-summary-page").addClass("hide"),$("#trailer-player-page").show(),current_route="trailer-page",trailer_page.player=new YT.Player("trailer-player",{height:"100%",width:"100%",videoId:e,events:{onReady:trailer_page.onPlayerReady,onStateChange:trailer_page.onPlayerStateChange}}),$("#trailer-player").on("load",function(){$("#trailer-player").contents().find(".ytp-chrome-top-buttons").hide(),$("#trailer-player").contents().find(".ytp-right-controls").hide(),showLoader(!1),trailer_page.is_loading=!1,$(document.getElementById("trailer-player").contentWindow.document).keydown(function(e){switch(e.keyCode){case tvKey.RETURN:trailer_page.goBack();break;case tvKey.RIGHT:trailer_page.seekTo(5);break;case tvKey.LEFT:trailer_page.seekTo(-5);break;case tvKey.ENTER:trailer_page.playOrPause()}})})},goBack:function(){current_route=this.back_url,this.player.stopVideo(),$("#trailer-player-page").hide(),$("#trailer-player").remove(),$("#trailer-player-page").html('<div id="trailer-player"></div>'),"vod-summary-page"===this.back_url&&$("#vod-summary-page").removeClass("hide"),"series-summary-page"===this.back_url&&$("#series-summary-page").removeClass("hide")},onPlayerReady:function(e){e.target.playVideo()},onPlayerStateChange:function(e){},seekTo:function(e){var e=this.player.getCurrentTime()+e,t=this.player.getDuration();this.player.seekTo(e=t<(e=e<0?0:e)?t:e)},playOrPause:function(){this.is_paused?this.player.playVideo():this.player.pauseVideo(),this.is_paused=!this.is_paused},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.RIGHT:this.seekTo(5);break;case tvKey.LEFT:this.seekTo(-5);break;case tvKey.ENTER:this.playOrPause()}}},series_summary_page={keys:{focused_part:"season_selection",season_selection:0,episode_selection:0},min_btn_index:0,season_doms:[],episode_doms:[],current_season_index:0,hover_season_timer:null,is_loading:!1,prev_route:"",series_video_times:{},init:function(e){this.prev_route=e,this.current_season_index=-1,showLoader(!0),this.is_loading=!0,current_route="series-summary-page",$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#series-summary-release-cast").siblings(".circle").hide(),$("#series-summary-release-date").siblings(".circle").hide(),$("#series-summary-release-genre").siblings(".circle").hide(),$("#season-items-container").html(""),$("#series-summary-episode-items-container").html(""),$("#series-summary-image-wrapper img").attr("src",""),$("#series-summary-name").text(current_series.name),25<current_series.name.length?$("#series-summary-name").css({animation:"scroll-left 10s linear infinite"," padding-left":"100%"}):$("#series-summary-name").css({animation:""," padding-left":""}),$("#series-summary-release-date").text(current_series.releaseDate),current_series.releaseDate&&$("#series-summary-release-date").siblings(".circle").hide(),$("#series-summary-release-genre").text(current_series.genre),current_series.genre&&$("#series-summary-release-genre").siblings(".circle").show(),$("#series-summary-release-cast").text(current_series.cast),current_series.cast&&$("#series-summary-release-cast").siblings(".circle").show(),$("#series-summary-description").text(current_series.plot),$("#series-summary-image-wrapper img").attr("src",current_series.cover||HOST+"app_src_min/images/default_movie.png");e=0,e=void 0===current_series.rating||""===current_series.rating?0:parseFloat(current_series.rating);isNaN(e)&&(e=0),$("#series-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#series-rating-mark").text(e.toFixed(1)),$("#vod-series-page").addClass("hide"),$("#vod-series-player-page").addClass("hide"),$("#player-movies-modal").modal("hide"),$("#series-summary-page").removeClass("hide"),$("#season-items-container").scrollTop(0),this.series_video_times={};for(var t=SeriesModel.saved_video_times,i=0;i<t.length;i++)if(t[i].stream_id==current_series.series_id){console.log("here",t[i]),this.series_video_times=t[i].video_times;break}this.getSeriesInfo()},getSeriesInfo:function(){var i,l=this;"xc"===settings.playlist.playlist_type?$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_series_info&series_id="+current_series.series_id).done(function(e){current_series.info=e.info;var i=e.seasons;if(e.episodes&&(i&&0<i.length||("[object Array]"===Object.prototype.toString.call(e.episodes)?0<e.episodes.length:0<Object.keys(e.episodes).length))){var s=e.episodes;if("[object Array]"===Object.prototype.toString.call(s)){for(var t={},a=0;a<s.length;a++)"[object Array]"===Object.prototype.toString.call(s[a])&&(t[(a+1).toString()]=s[a]);s=t}i&&0!==i.length?i.map(function(e){var t=(e.season_number||1).toString();e.episodes=s[t]||[]}):(i=[],Object.keys(s).map(function(e,t){i.push({name:"Season "+(t+1),cover:HOST+"app_src_min/images/series.png",episodes:s[e]})}));var o=i.filter(function(e){return e.episodes&&0<e.episodes.length}),n=Object.keys(s);if(n.length>o.length){for(a=0;a<o.length;a++)o[a].name="Season "+(a+1);for(a=o.length;a<n.length;a++)o.push({name:"Season "+(a+1),episodes:s[(a+1).toString()]||[]})}current_series.seasons=o;var r="";current_series.seasons.map(function(e,t){r+='<div class="season-item-container" onmouseenter="series_summary_page.hoverSeason('+t+')"><span><svg width="3rem" height="3rem" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg" fill="#ddd" stroke="#ddd"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g fill="none" fill-rule="evenodd" stroke="#ddd" stroke-linecap="round" stroke-linejoin="round" transform="translate(1 4)"> <path d="m13.5 12.5v-6c0-1.1045695-.8954305-2-2-2h-9c-1.1045695 0-2 .8954305-2 2v6c0 1.1045695.8954305 2 2 2h9c1.1045695 0 2-.8954305 2-2z"></path> <path d="m15.5 12.5v-6.99481259c0-1.65685425-1.3431458-3-3-3-.0017276 0-.0034553 0-.0051829 0l-8.9948171.01554432"></path> <path d="m17.5 10.5v-5.99308345c0-2.209139-1.790861-4-4-4-.0023035 0-.004607 0-.0069106 0l-7.9930894.01381519"></path> </g> </g></svg></span>'+e.name+'<span class="num-of-episodes">'+(e.episodes?e.episodes.length:0)+"</span></div>"}),$("#season-items-container").html(r),$("#series-summary-release-date").text(current_series.info.releaseDate),l.showSeriesInfo()}else showLoader(!1),l.is_loading=!1,showToast("Sorry","No seasons available"),l.goBack()}).fail(function(e){showLoader(!1),l.is_loading=!1,l.goBack()}):"general"===settings.playlist.playlist_type&&(current_series.seasons.map(function(e){e.episodes=current_series.episodes[e.name]}),i="",current_series.seasons.map(function(e,t){i+='<div class="season-item-container"   onmouseenter="series_summary_page.hoverSeason('+t+')"><span><svg width="3rem" height="3rem" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg" fill="#ddd" stroke="#ddd"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g fill="none" fill-rule="evenodd" stroke="#ddd" stroke-linecap="round" stroke-linejoin="round" transform="translate(1 4)"> <path d="m13.5 12.5v-6c0-1.1045695-.8954305-2-2-2h-9c-1.1045695 0-2 .8954305-2 2v6c0 1.1045695.8954305 2 2 2h9c1.1045695 0 2-.8954305 2-2z"></path> <path d="m15.5 12.5v-6.99481259c0-1.65685425-1.3431458-3-3-3-.0017276 0-.0034553 0-.0051829 0l-8.9948171.01554432"></path> <path d="m17.5 10.5v-5.99308345c0-2.209139-1.790861-4-4-4-.0023035 0-.004607 0-.0069106 0l-7.9930894.01381519"></path> </g> </g></svg></span>'+e.name+'<span class="num-of-episodes">'+e.episodes.length+"</span></div>"}),$("#season-items-container").html(i),l.showSeriesInfo())},showSeriesInfo:function(){this.season_doms=$(".season-item-container");var e=current_series.tmdb_id||current_series.tmdb;this.fetchMovieImages(e,current_series.backdrop_path?current_series.backdrop_path[0]:HOST+"app_src_min/images/default_movie_bg.png");try{this.hoverSeason(0),$("#selected-season-name").text(current_series.seasons[0].name),this.showEpisodes()}catch(e){}void 0!==current_series.youtube_trailer&&null!=current_series.youtube_trailer&&""!==current_series.youtube_trailer.trim()?(this.min_btn_index=0,$("#vod-watch-trailer-button").show()):(this.min_btn_index=1,$("#vod-watch-trailer-button").hide()),showLoader(!1),this.is_loading=!1},showEpisodes:function(){var e,o,n,t=this.keys;this.current_season_index!==t.season_selection&&(e=(current_season=current_series.seasons[t.season_selection]).episodes,o=this.series_video_times[t.season_selection.toString()]?this.series_video_times[t.season_selection.toString()]:{},void 0!==e&&0<e.length?(n="",e.map(function(e,t){var i="",s=0,a=(o[t.toString()]&&(i="has-progress",(a=o[t.toString()]).duration)&&(s=100*parseFloat(a.time)/parseFloat(a.duration)+"%"),"");0<Math.floor(parseFloat(s))&&(a=Math.floor(parseFloat(s))+"%"),n+='<div class="episode-item-wrapper"                        onmouseenter="series_summary_page.hoverEpisode('+t+')"                        onclick="series_summary_page.handleMenuClick()"                    ><div class="img-box"><img src="'+(current_series.cover||HOST+"app_src_min/images/default_movie.png")+'" /></div><span>'+(e.title||"Episode "+(t+1))+"</span> <span>"+(e.info.duration_secs?Math.floor(e.info.duration_secs/60)+"min":"")+'</span>   <div class="episode-video-duration-container">                            <div class="episode-video-duration '+i+'">                                <span class="episode-video-progress" style="width: '+s+'"></span>                            </div>                         </div>                         <div class="episode-video-progress-percentage">'+a+"</div>                    </div>"}),$("#series-summary-episode-items-container").html(n),$("#series-summary-episode-items-container").scrollTop(0)):(showToast("Sorry","No episodes available"),$("#series-summary-episode-items-container").html("")),t.episode_selection=0,this.current_season_index=t.season_selection,this.episode_doms=$(".episode-item-wrapper"),$("#selected-season-name").text(current_season.name))},goBack:function(){var e,t,i=this.keys;switch(i.focused_part){case"season_selection":current_route=this.prev_route,$("#series-summary-page").addClass("hide"),"vod-series-page"===this.prev_route?($("#vod-series-page").removeClass("hide"),vod_series_page.updateFavouriteOrRecentCount("recent")):"search-page"===this.prev_route&&($("#search-page").show(),e=search_page.movie_doms[2],t=(i=search_page.keys).hor_keys[2],this.is_favourite?0==$(e[t]).find(".favourite-badge").length&&(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),$(e[t]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),$($(e[t]).find(".favourite-badge")).remove()));break;case"episode_selection":this.hoverSeason(i.season_selection),i.episode_selection=0}},hoverSeason:function(e){var t=this.keys,i=(t.focused_part="season_selection",t.season_selection=e,$(this.episode_doms).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e]).addClass("active"),clearTimeout(this.hover_season_timer),moveScrollPosition($("#season-items-container"),this.season_doms[t.season_selection],"vertical",!1),this);this.hover_season_timer=setTimeout(function(){i.showEpisodes()},300)},hoverEpisode:function(e){var t=this.keys;t.episode_selection=e,t.focused_part="episode_selection",$(this.season_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$(this.episode_doms[t.episode_selection]).addClass("active"),moveScrollPosition($("#series-summary-episode-items-container"),this.episode_doms[t.episode_selection],"vertical",!1)},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":0<e&&0<this.episode_doms.length&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":e<0&&this.hoverSeason(t.season_selection)}},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":t.season_selection+=e,t.season_selection<0?t.season_selection=0:t.season_selection>=this.season_doms.length?t.season_selection=this.season_doms.length-1:this.hoverSeason(t.season_selection);break;case"episode_selection":t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length?t.episode_selection=this.episode_doms.length-1:this.hoverEpisode(t.episode_selection)}},handleMenuClick:function(){var e,t=this.keys;"episode_selection"===t.focused_part&&(e=(current_season=current_series.seasons[t.season_selection]).episodes,current_episode=e[t.episode_selection],vod_series_player_page.makeEpisodeDoms("episode-page"),vod_series_player_page.init(current_episode,"series","episode-page","",!0),vod_series_player_page.keys.episode_selection=t.episode_selection)},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}},fetchMovieImages:function(e,t){var i,s="/tv/"+e+"/images?api_key="+tmdb_api_key;e&&0!=e&&null!=e&&vod_series_page.isTMDBAllowed&&$.getJSON(tmdb_prefix_url+s,function(e){0<e.backdrops.length&&(t=tmdb_img_url+"w1280"+e.backdrops[0].file_path),(i=0<e.logos.length?tmdb_img_url+"w500"+e.logos[0].file_path:i)?($("#series-summary-log-title").attr("src",i).show(),$("#series-summary-name").hide()):($("#series-summary-log-title").hide(),$("#series-summary-name").show());try{$(".vod-series-background-img").attr("src",t).show()}catch(e){$(".vod-series-background-img").attr("src",HOST+"app_src_min/images/default_movie_bg.png").show(),showImg($(".vod-series-background-img"))}$(".vod-series-background-img-overlay").show()})}},vod_series_page={player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,all_categories:[],categories:[],category_hover_timer:null,category_hover_timeout:300,current_backdrop:"",keys:{focused_part:"category_selection",prev_focused_part:"category_selection",category_selection:0,menu_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,category_search_selection:"",modal_focus_index:0},vod_theme:"",modal_visible:!1,category_doms:[],menu_doms:[],top_menu_doms:$(".vod-series-top-menu-item"),current_movie_type:"movie",sort_key:"vod_sort",search_key_timer:"",search_key_timout:400,category_search_timer:null,movie_hover_timer:null,category_search_timeout:400,current_render_count:0,render_count_increment:40,is_drawing:!1,prev_keyword:"",prev_categorY_keyword:"",prev_dom:null,prev_selected_category:null,sort_doms:$(".sort-modal-item"),category_search_dom:$("#vod-series-category-search"),current_category:"",currentlyActiveRequest:null,requestAborted:!1,page_theme:"n",isTMDBAllowed:!1,showTrailerTimeout:null,preventShowingTrailer:!1,init:function(e,t){console.log("Init replay page on target",t),this.getTMDBChoice(),$(".vod-series-summary-section-img-darken").show(),this.prev_dom=null,this.is_drawing=!1;var i=this.keys,s=(this.prev_categorY_keyword="",$(this.category_search_dom).val(""),this.current_movie_type=e,[]);if($("#movie-image").css("transition","0.3s ease-in-out"),$("#movie-image").css("opacity",0),$("#vod-series-top-menu-themes").show(),$("#vod-series-top-menu-favorite").show(),"vod"===e)this.insertSidebarTitle("Movies"),this.sort_key="vod_sort",s=VodModel.getCategories(!1,!0);else if("series"===e)this.insertSidebarTitle("Series"),this.sort_key="series_sort",s=SeriesModel.getCategories(!1,!0);else if("replay"===e){if(this.insertSidebarTitle("Replay"),$("#vod-series-top-menu-themes").hide(),$("#vod-series-top-menu-favorite").hide(),$("#movie-image").hide(),"xc"!=settings.playlist.playlist_type)return void showToast("Sorry","Replay not available for current playlist");if(this.setIsLoading(!0),this.sort_key="live_sort",0==(s=LiveModel.getCategories(!1,!1).map(function(e){var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));return e.movies=t,e}).filter(function(e){return 0<e.movies.length})).length)return showToast("Sorry","Replay not available for current playlist"),void this.setIsLoading(!1);this.setIsLoading(!1)}$("#vod-series-categories-container").html(""),$("#home-page").addClass("hide"),$("#vod-series-page").removeClass("hide"),current_route="vod-series-page",this.categories=s.filter(function(e){return!0}),this.all_categories=s,this.renderCategories(),$("#vod-series-cover .movie-info").hide(),i.focused_part="category_selection",i.category_selection=0,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.current_category_index=-1;for(var a,o=0;o<this.categories.length;o++)if(0<this.categories[o].movies.length){i.category_selection=o;break}this.showCategoryContent(),this.hoverCategory(this.category_doms[i.category_selection],t),t&&(this.handleMenuClick(),a=null,this.menu_doms.each(function(){var e=$(this).find(".vod-series-menu-item-title").text().trim();if(console.log(e),console.log(t),e===t.name)return a=$(this),!1}),a?(console.log("Found matching element:",a),this.hoverMovieItem(a)):console.log("No matching element found for title:",t.title)),this.fetchHoverMovie(0),$(this.category_doms[i.category_selection]).addClass("current"),this.prev_selected_category=this.category_doms[i.category_selection],this.setPageTheme()},goBack:function(){var e=this.keys;switch(console.log(e.focused_part),e.focused_part){case"menu_selection":e.focused_part="category_selection",this.hoverCategory(this.category_doms[e.category_selection]);break;case"category_selection":$(this.category_search_dom).removeClass("active");case"category_search_selection":current_route="home-page",this.cleanupTrailerPlayer(),$("#vod-series-page").addClass("hide"),$("#home-page").removeClass("hide");break;case"top_menu_selection":$("#vod-series-search-input").blur(),e.focused_part="category_selection",this.hoverCategory(this.category_doms[e.category_selection]);break;case"sort_selection":$("#sort-modal-container").removeClass("visible"),this.hoverTopMenu(1);break;case"theme_vod_modal":this.hideThemeModal();break;case"loading":this.setIsLoading(!1)}this.hiddenAndShowSidebar()},setIsLoading:function(e){var t=this.keys;showLoader(this.is_drawing=e=e||!1),1==e?(t.prev_focused_part=t.focused_part,t.focused_part="loading"):(t.focused_part=t.prev_focused_part,null!=this.currentlyActiveRequest&&(this.requestAborted=!0,this.currentlyActiveRequest.abort(),this.currentlyActiveRequest=null))},getTMDBChoice:function(){var e=localStorage.getItem(storage_id+"tmdb_choice");this.isTMDBAllowed="off"!=e,console.log("Is TMDB Allowed:",this.isTMDBAllowed)},setPageTheme:function(){this.page_theme=localStorage.getItem(storage_id+"vod_theme"),"replay"!=this.current_movie_type&&this.isTMDBAllowed||(this.page_theme="n"),"n"==this.page_theme?(this.keys.modal_focus_index=0,$("#vod-series-cover").addClass("d-none"),$("#vod-series-cover").removeClass("d-block"),$("#vod-series-menus-container").css("height","62rem"),$("#vod-series-current-category").css("margin-top","-3rem")):(this.keys.modal_focus_index=1,$("#vod-series-cover").addClass("d-block"),$("#vod-series-cover").removeClass("d-none"),$("#vod-series-menus-container").css("height","30rem"),$("#vod-series-current-category").css("margin-top","0"))},getCategoryIcon:function(e){switch(e){case"recent":return'<svg fill="#eee" width="3rem" height="3rem" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke="#eee"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M19.2928932,7 L17.1464466,4.85355339 C16.9511845,4.65829124 16.9511845,4.34170876 17.1464466,4.14644661 C17.3417088,3.95118446 17.6582912,3.95118446 17.8535534,4.14644661 L20.8535534,7.14644661 C21.0488155,7.34170876 21.0488155,7.65829124 20.8535534,7.85355339 L17.8535534,10.8535534 C17.6582912,11.0488155 17.3417088,11.0488155 17.1464466,10.8535534 C16.9511845,10.6582912 16.9511845,10.3417088 17.1464466,10.1464466 L19.2928932,8 L5.5,8 C4.67157288,8 4,8.67157288 4,9.5 L4,15.5 C4,16.3284271 4.67157288,17 5.5,17 L10.5,17 C10.7761424,17 11,17.2238576 11,17.5 C11,17.7761424 10.7761424,18 10.5,18 L5.5,18 C4.11928813,18 3,16.8807119 3,15.5 L3,9.5 C3,8.11928813 4.11928813,7 5.5,7 L19.2928932,7 Z"></path> </g></svg>';case"favourite":return'<svg fill="#eee" width="3rem" height="3rem" viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg" stroke="#eee"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M476 801l-181 95q-18 10-36.5 4.5T229 879t-7-36l34-202q2-12-1.5-24T242 596L95 453q-15-14-15.5-33.5T91 385t32-18l203-30q12-2 22-9t16-18l90-184q10-18 28-25t36 0 28 25l90 184q6 11 16 18t22 9l203 30q20 3 32 18t11.5 34.5T905 453L758 596q-8 9-12 21t-2 24l34 202q4 20-7 36t-29.5 21.5T705 896l-181-95q-11-6-24-6t-24 6z"></path></g></svg>';case"newly_added":case"recently_modified":return'<svg width="3rem" height="3rem" viewBox="0 0 801 565" fill="none" xmlns="http://www.w3.org/2000/svg"><rect y="6" width="800" height="551" rx="77" fill="black"/><path d="M60.4735 564.375H739.541C772.949 564.375 800.014 537.295 800.014 503.902V60.4735C800.014 27.0803 772.949 0 739.541 0H60.4735C27.0803 0 0 27.0803 0 60.4735V503.902C0 537.295 27.0803 564.375 60.4735 564.375ZM446.563 521.927H353.422V464.385H446.563V521.927ZM668.517 43.8277H761.658V101.37H668.517V43.8277ZM665.76 464.385H758.915V521.927H665.76V464.385ZM512.334 43.8277H605.489V101.37H512.334V43.8277ZM509.591 464.385H602.746V521.927H509.591V464.385ZM356.18 43.8277H449.321V101.37H356.18V43.8277ZM420.5 381.547L512.334 359.672C544.798 375.912 502.407 295.358 469.943 311.583L330.057 381.547C297.593 397.772 401.527 417.872 401.527 381.547H469.943C469.928 345.237 388.021 365.322 420.5 381.547ZM200.011 43.8277H293.166V101.37H200.011V43.8277ZM197.268 464.385H290.409V521.927H197.268V464.385ZM43.8422 43.8277H136.998V101.37H43.8422V43.8277ZM41.0993 464.385H134.255V521.927H41.0993V464.385Z" fill="white"/><path d="M401.5 395C387.56 395 376 383.178 376 368.923V195.077C376 180.822 387.56 169 401.5 169C415.44 169 427 180.822 427 195.077V368.923C427 383.178 415.44 395 401.5 395Z" fill="black"/><path d="M486.923 308H313.077C298.822 308 287 296.213 287 282C287 267.787 298.822 256 313.077 256H486.923C501.178 256 513 267.787 513 282C513 296.213 501.178 308 486.923 308Z" fill="black"/></svg>';case"top_rated":return'<svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>icon/24/icon-top10</title> <desc>Created with Sketch.</desc> <defs> </defs> <g id="Output-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="out" transform="translate(-677.000000, -105.000000)" fill="#ffffff"> <path d="M692.707766,121.63582 C692.667766,121.97982 692.603766,122.27682 692.516766,122.52382 C692.427766,122.77182 692.308766,122.96382 692.155766,123.09982 C692.003766,123.23682 691.815766,123.30382 691.592766,123.30382 C691.367766,123.30382 691.182766,123.23682 691.033766,123.09982 C690.885766,122.96382 690.766766,122.77182 690.674766,122.52382 C690.581766,122.27682 690.516766,121.97982 690.476766,121.63582 C690.436766,121.29182 690.415766,120.91182 690.415766,120.49582 C690.415766,120.07982 690.436766,119.70182 690.476766,119.36182 C690.516766,119.02182 690.581766,118.72782 690.674766,118.47982 C690.766766,118.23182 690.885766,118.03982 691.033766,117.90382 C691.182766,117.76782 691.367766,117.69882 691.592766,117.69882 C691.815766,117.69882 692.003766,117.76782 692.155766,117.90382 C692.308766,118.03982 692.427766,118.23182 692.516766,118.47982 C692.603766,118.72782 692.667766,119.02182 692.707766,119.36182 C692.747766,119.70182 692.768766,120.07982 692.768766,120.49582 C692.768766,120.91182 692.747766,121.29182 692.707766,121.63582 L692.707766,121.63582 Z M693.793766,117.28482 C693.261766,116.53782 692.527766,116.16382 691.592766,116.16382 C691.136766,116.16382 690.724766,116.25982 690.355766,116.45082 C689.987766,116.64382 689.671766,116.92382 689.407766,117.29182 C689.144766,117.65982 688.941766,118.11182 688.801766,118.64782 C688.661766,119.18382 688.591766,119.79982 688.591766,120.49582 C688.591766,121.89582 688.857766,122.96982 689.390766,123.71782 C689.921766,124.46582 690.655766,124.83982 691.592766,124.83982 C692.527766,124.83982 693.261766,124.46582 693.793766,123.71782 C694.325766,122.96982 694.592766,121.89582 694.592766,120.49582 C694.592766,119.10382 694.325766,118.03382 693.793766,117.28482 L693.793766,117.28482 Z M683.947766,119.46382 C684.228766,119.36682 684.515766,119.25382 684.811766,119.12182 C685.107766,118.98982 685.375766,118.84382 685.615766,118.68382 L685.615766,124.67182 L687.403766,124.67182 L687.403766,116.35582 L686.155766,116.35582 C685.979766,116.53982 685.781766,116.71382 685.561766,116.87782 C685.341766,117.04182 685.111766,117.19782 684.872766,117.34582 C684.631766,117.49382 684.385766,117.62982 684.133766,117.75382 C683.881766,117.87782 683.639766,117.98782 683.407766,118.08382 L683.947766,119.46382 Z M693.703766,111.57882 C693.850766,111.60582 693.977766,111.64882 694.085766,111.70882 C694.192766,111.76982 694.276766,111.85382 694.337766,111.96082 C694.397766,112.06882 694.427766,112.20082 694.427766,112.36082 C694.427766,112.69182 694.313766,112.91582 694.085766,113.03482 C693.856766,113.15482 693.529766,113.21382 693.105766,113.21382 L692.677766,113.21382 L692.677766,111.56182 C692.822766,111.54782 693.007766,111.54082 693.231766,111.54082 C693.399766,111.54082 693.556766,111.55382 693.703766,111.57882 L693.703766,111.57882 Z M692.478766,110.80282 C692.228766,110.81982 692.001766,110.85082 691.796766,110.89782 L691.796766,115.67782 L692.677766,115.67782 L692.677766,113.96982 L693.119766,113.96982 C693.473766,113.96982 693.789766,113.93982 694.064766,113.87882 C694.340766,113.81882 694.573766,113.72382 694.764766,113.59582 C694.956766,113.46682 695.101766,113.30182 695.202766,113.09882 C695.301766,112.89582 695.352766,112.65182 695.352766,112.36682 C695.352766,111.82182 695.165766,111.41982 694.789766,111.16282 C694.413766,110.90682 693.873766,110.77882 693.168766,110.77882 C692.958766,110.77882 692.728766,110.78582 692.478766,110.80282 L692.478766,110.80282 Z M687.491766,112.52882 C687.556766,112.31382 687.651766,112.12882 687.775766,111.97482 C687.898766,111.82182 688.049766,111.70182 688.226766,111.61782 C688.404766,111.53382 688.604766,111.49182 688.828766,111.49182 C689.047766,111.49182 689.246766,111.53382 689.423766,111.61782 C689.600766,111.70182 689.751766,111.82082 689.875766,111.97182 C689.998766,112.12282 690.092766,112.30782 690.158766,112.52482 C690.223766,112.74082 690.256766,112.98382 690.256766,113.24882 C690.256766,113.51482 690.223766,113.75682 690.158766,113.97382 C690.092766,114.19082 689.998766,114.37482 689.875766,114.52682 C689.751766,114.67782 689.600766,114.79582 689.423766,114.87982 C689.246766,114.96382 689.047766,115.00582 688.828766,115.00582 C688.604766,115.00582 688.404766,114.96382 688.226766,114.87982 C688.049766,114.79582 687.898766,114.67782 687.775766,114.52682 C687.651766,114.37482 687.556766,114.19082 687.491766,113.97382 C687.426766,113.75682 687.393766,113.51482 687.393766,113.24882 C687.393766,112.98382 687.426766,112.74282 687.491766,112.52882 L687.491766,112.52882 Z M690.991766,112.15382 C690.865766,111.83882 690.696766,111.57282 690.483766,111.35982 C690.271766,111.14482 690.022766,110.98382 689.738766,110.87582 C689.453766,110.76882 689.153766,110.71482 688.835766,110.71482 C688.518766,110.71482 688.217766,110.76882 687.932766,110.87582 C687.647766,110.98382 687.397766,111.14482 687.179766,111.35982 C686.963766,111.57282 686.791766,111.83882 686.665766,112.15382 C686.539766,112.46882 686.476766,112.83382 686.476766,113.24882 C686.476766,113.66382 686.539766,114.03082 686.665766,114.34782 C686.791766,114.66482 686.960766,114.93082 687.173766,115.14282 C687.385766,115.35482 687.634766,115.51482 687.922766,115.62182 C688.209766,115.72982 688.513766,115.78282 688.835766,115.78282 C689.157766,115.78282 689.460766,115.72982 689.745766,115.62182 C690.029766,115.51482 690.278766,115.35482 690.490766,115.14282 C690.703766,114.93082 690.871766,114.66482 690.994766,114.34782 C691.118766,114.03082 691.179766,113.66382 691.179766,113.24882 C691.179766,112.83382 691.117766,112.46882 690.991766,112.15382 L690.991766,112.15382 Z M682.647766,110.82682 L682.647766,111.58982 L684.138766,111.58982 L684.138766,115.67782 L685.027766,115.67782 L685.027766,111.58982 L686.518766,111.58982 L686.518766,110.82682 L682.647766,110.82682 Z M689.613766,107.62982 L690.173766,107.20582 C690.659766,106.83882 691.355766,106.97782 691.663766,107.50182 L692.019766,108.10782 C692.249766,108.50082 692.712766,108.69182 693.152766,108.57782 L693.832766,108.40082 C694.421766,108.24782 695.011766,108.64182 695.095766,109.24482 L695.192766,109.94082 C695.255766,110.39082 695.609766,110.74482 696.059766,110.80782 L696.755766,110.90482 C697.358766,110.98782 697.752766,111.57882 697.599766,112.16782 L697.422766,112.84782 C697.308766,113.28782 697.499766,113.75082 697.891766,113.98082 L698.497766,114.33682 C699.022766,114.64482 699.161766,115.34082 698.794766,115.82682 L698.370766,116.38682 C698.096766,116.74982 698.096766,117.25082 698.370766,117.61282 L698.794766,118.17382 C699.161766,118.65882 699.022766,119.35582 698.497766,119.66382 L697.891766,120.01982 C697.499766,120.24982 697.308766,120.71282 697.422766,121.15282 L697.599766,121.83282 C697.752766,122.42082 697.358766,123.01182 696.755766,123.09582 L696.059766,123.19282 C695.609766,123.25482 695.255766,123.60882 695.192766,124.05982 L695.095766,124.75582 C695.011766,125.35782 694.421766,125.75282 693.832766,125.59982 L693.152766,125.42282 C692.712766,125.30782 692.249766,125.49982 692.019766,125.89182 L691.663766,126.49782 C691.355766,127.02282 690.659766,127.16082 690.173766,126.79382 L689.613766,126.37082 C689.250766,126.09682 688.749766,126.09682 688.386766,126.37082 L687.826766,126.79382 C687.340766,127.16082 686.644766,127.02282 686.336766,126.49782 L685.980766,125.89182 C685.750766,125.49982 685.287766,125.30782 684.847766,125.42282 L684.167766,125.59982 C683.578766,125.75282 682.988766,125.35782 682.904766,124.75582 L682.807766,124.05982 C682.744766,123.60882 682.390766,123.25482 681.940766,123.19282 L681.244766,123.09582 C680.641766,123.01182 680.247766,122.42082 680.400766,121.83282 L680.577766,121.15282 C680.691766,120.71282 680.500766,120.24982 680.108766,120.01982 L679.502766,119.66382 C678.977766,119.35582 678.838766,118.65882 679.205766,118.17382 L679.629766,117.61282 C679.903766,117.25082 679.903766,116.74982 679.629766,116.38682 L679.205766,115.82682 C678.838766,115.34082 678.977766,114.64482 679.502766,114.33682 L680.108766,113.98082 C680.500766,113.75082 680.691766,113.28782 680.577766,112.84782 L680.400766,112.16782 C680.247766,111.57882 680.641766,110.98782 681.244766,110.90482 L681.940766,110.80782 C682.390766,110.74482 682.744766,110.39082 682.807766,109.94082 L682.904766,109.24482 C682.988766,108.64182 683.578766,108.24782 684.167766,108.40082 L684.847766,108.57782 C685.287766,108.69182 685.750766,108.50082 685.980766,108.10782 L686.336766,107.50182 C686.644766,106.97782 687.340766,106.83882 687.826766,107.20582 L688.386766,107.62982 C688.749766,107.90382 689.250766,107.90382 689.613766,107.62982 L689.613766,107.62982 Z" id="path"> </path> </g> </g> </g></svg>';default:return""}},createCategoryItemHTML:function(e,t,i){var s="",a="vod-series-category-item"+(i?" has-icon":"");switch(e.category_id){case"recent":s="continue-watching";break;case"favourite":s="favourites";break;case"newly_added":s="newly-added";break;case"top_rated":s="top-rated"}return s?'<div class="'+a+'"data-index="'+t+'" onmouseenter="vod_series_page.hoverCategory(this)" onclick="vod_series_page.handleMenuClick('+t+')"><span class="vod-series-category-item-name">'+i+'<span style="margin-left:.7rem" data-word_code="'+s+'">'+e.category_name+'</span></span><span class="vod-series-category-item-count">'+e.movies.length+"</span></div>":'<div class="'+a+'"data-index="'+t+'" onmouseenter="vod_series_page.hoverCategory(this)" onclick="vod_series_page.handleMenuClick('+t+')"><span class="vod-series-category-item-name">'+i+'<span style="margin-left:.7rem">'+e.category_name+'</span></span><span class="vod-series-category-item-count">'+e.movies.length+"</span></div>"},renderCategories:function(){var s=this,e=this.categories.map(function(e,t){var i=s.getCategoryIcon(e.category_id);return s.createCategoryItemHTML(e,t,i)}).join("");$("#vod-series-categories-container").html(e),this.category_doms=$(".vod-series-category-item")},showCategoryContent:function(e){e=e||!1;var t,i,s=this.keys;this.current_category_index===s.category_selection&&!e||(e=this.categories[s.category_selection],this.current_category=e,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.prev_keyword="",$("#vod-series-search-input").val(""),t=e.movies,i=settings[this.current_movie_type+"_sort"],"added"===(i="replay"===this.current_movie_type?settings.live_sort:i)&&"series"===this.current_movie_type&&(i="last_modified"),this.movies=getSortedMovies(t,i),this.renderCategoryContent(),$("#vod-series-menus-container").scrollTop(0),s.menu_selection=0,this.current_category_index=s.category_selection,$("#vod-series-current-category").text(e.category_name))},renderCategoryContent:function(){var u,m,p,g,v=this,f="",y=HOST+"app_src_min/images/default_movie.png",b="stream_icon",k=("series"===this.current_movie_type&&(b="cover"),"replay"===this.current_movie_type&&(y=default_movie_icon),this.current_movie_type);this.current_render_count<this.movies.length&&(this.setIsLoading(!0),v=this,setTimeout(function(){v.setIsLoading(!1)},1e3),u=[],m="stream_id",p={},"vod"===(g=this.current_movie_type)||"movie"===g?(u=VodModel.favourite_ids,VodModel.saved_video_times.map(function(e){p[e.stream_id.toString()]=e})):"series"===g&&(m=SeriesModel.movie_key,u=SeriesModel.favourite_ids,SeriesModel.saved_video_times.map(function(e){p[e.stream_id.toString()]=e})),this.movies.slice(this.current_render_count,this.current_render_count+this.render_count_increment).map(function(e,t){var i,s,a,o,n,r=u.includes(e[m]),l="",c=0,d=e[m].toString();if(p[d]&&(l="has-progress",(d=p[d]).duration)&&"vod"==g&&(c=100*parseFloat(d.time)/parseFloat(d.duration)+"%"),h=localStorage.getItem(storage_id+settings.playlist.id+"_saved_series_times"))for(var h=JSON.parse(h),_=0;_<h.length;_++)h[_].stream_id==e.series_id&&(i=h[_].video_times.recent.ep,s=h[_].video_times.recent.s,a="");s&&i||(a="hidden"),"movie"==e.stream_type?o=utilities.isNewlyAdded(e.added)?"vod-new-label ":"vod-new-label hidden":utilities.isRecentlyModifiedSeries(e.last_modified)?(o="vod-new-label ",n="shift-label-to-bottom"):o="vod-new-label hidden","top_rated"==v.current_category.category_id?($("#vod-series-menus-container").addClass("one-line"),f+='<div class="vod-series-menu-item-container '+k+'" data-stream_id="'+e.series_id+'"                        data-index="'+(v.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this, true)"                        onclick="vod_series_page.handleMenuClick()"                    >                    <img src="'+HOST+"app_src_min/images/numbers/"+(t+1)+'.png" class="vod_series_rate_number_image" />\n                        <div class="vod-series-menu-item"><div class="'+o+'">NEW</div><div class="series-latest-watched '+a+" "+n+'">S'+s+"EP"+i+"</div>"+(r?'<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>':"")+'<div class="vod-series-icon-wrapper">                                <img class="vod-series-icon" src="'+e[b]+'" onerror="this.src=\''+y+'\'">                            </div>                            <div class="vod-series-menu-item-title-wrapper">                                <div class="vod-series-menu-item-title max-line-2">'+e.name+'</div>             <div class="vod-series-video-duration-container">                            <div class="vod-series-video-duration '+g+" "+l+'">                                <span class="vod-series-video-progress" style="width: '+c+'"></span>                            </div>                             </div>                             </div>                                                   </div>                    </div>'):($("#vod-series-menus-container").removeClass("one-line"),f+='<div class="vod-series-menu-item-container '+k+'" data-stream_id="'+e.series_id+'"                        data-index="'+(v.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                        <div class="vod-series-menu-item"><div class="'+o+'">NEW</div><div class="series-latest-watched '+a+" "+n+'">S'+s+"EP"+i+"</div>"+(r?'<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>':"")+'<div class="vod-series-icon-wrapper">                                <img class="vod-series-icon" src="'+e[b]+'" onerror="this.src=\''+y+'\'">                            </div>                            <div class="vod-series-menu-item-title-wrapper">                                <div class="vod-series-menu-item-title max-line-2">'+e.name+'       </div>             <div class="vod-series-video-duration-container">                            <div class="vod-series-video-duration '+g+" "+l+'">                                <span class="vod-series-video-progress" style="width: '+c+'"></span>                            </div>                             </div>                             </div>                                                   </div>                    </div>')}),this.current_render_count+=this.render_count_increment,$("#vod-series-menus-container").append(f),this.menu_doms=$("#vod-series-menus-container .vod-series-menu-item-container"))},addOrRemoveFav:function(){var e=this.keys;if("menu_selection"===e.focused_part){var t,i=this.menu_doms,s=this.movies,a=("vod"===this.current_movie_type||"movie"===this.current_movie_type?(t=VodModel.movie_key,VodModel):(t=SeriesModel.movie_key,SeriesModel)).favourite_ids;if(a.includes(s[e.menu_selection][t]))$($(i[e.menu_selection]).find(".favourite-badge")).remove(),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).removeRecentOrFavouriteMovie(s[e.menu_selection][t],"favourite"),"favourite"===(o=this.categories[this.current_category_index]).category_id&&($(i[e.menu_selection]).remove(),0<(i=$("#vod-series-menus-container .vod-series-menu-item-container")).length?(i.map(function(e,t){$(t).data("index",e)}),this.menu_doms=i,e.menu_selection>=this.menu_doms.length&&(e.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[e.menu_selection])):this.hoverCategory(this.category_doms[e.category_selection]));else{var o=this.categories[e.category_selection];if(VodModel.isProtected(o))return void showToast("Parental safety","Adding protected content to favourites is not allowed.");$($(i[e.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>'),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).addRecentOrFavouriteMovie(s[e.menu_selection],"favourite")}this.updateFavouriteOrRecentCount("favourite")}},goToSearchPage:function(){var e=this.current_movie_type;search_page.init("vod-series-page",e)},categoryKeywordChange:function(){clearTimeout(this.category_search_timer);var s=this;this.category_search_timer=setTimeout(function(){var e,t,i=$(s.category_search_dom).val();s.prev_category_keyword!==i&&((e=s.all_categories.filter(function(e){return!0})).sort(function(e,t){return e.category_name.localeCompare(t.category_name)}),t=[],t=""===i?s.all_categories:(i=i.toLowerCase(),e.filter(function(e){return e.category_name.toLowerCase().includes(i)})),s.categories=t,s.prev_category_keyword=i,$("#vod-series-categories-container").html(""),s.renderCategories())},this.category_search_timeout)},showSortModal:function(){var i=settings[this.current_movie_type+"_sort"],s=0;this.sort_doms.map(function(e,t){$(t).data("sort_key")==i&&(s=e)}),$("#sort-modal-container").addClass("visible"),this.hoverSortItem(s)},updateFavouriteOrRecentCount:function(e){},hoverSortItem:function(e){var t=this.keys;t.focused_part="sort_selection",t.sort_selection=e,$(this.prev_dom).removeClass("active"),$(this.sort_doms[e]).addClass("active"),this.prev_dom=this.sort_doms[e],this.hiddenAndShowSidebar()},hoverCategorySearch:function(){$(this.prev_dom).removeClass("active"),$(this.category_search_dom).addClass("active"),this.prev_dom=this.category_search_dom,this.keys.focused_part="category_search_selection",this.hiddenAndShowSidebar()},hoverCategory:function(e,t){var i=this.keys;if(t){i.focused_part="category_selection";for(var s=0,a=0;a<this.categories.length;a++)if(t.category_id==this.categories[a].category_id){s=a;break}}else var s=$(e).data("index");i.focused_part="category_selection",i.category_selection=s,$(this.prev_dom).removeClass("active"),$(this.category_doms[s]).addClass("active"),this.prev_dom=this.category_doms[s],moveScrollPosition($("#vod-series-categories-container"),this.category_doms[s],"vertical",!1),this.hiddenAndShowSidebar()},hoverMovieItem:function(e,t){this.current_backdrop="";var t=t||!1,i=(clearTimeout(this.channel_hover_timer),this.cleanupTrailerPlayer(),this.keys),s=this,e=$(e).data("index");i.focused_part="menu_selection",i.menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.menu_doms[e]).addClass("active"),this.prev_dom=this.menu_doms[e],"top_rated"!=s.current_category.category_id?moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[i.menu_selection],"vertical",!1):moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[i.menu_selection],"horizontal",!0,t),clearTimeout(this.movie_hover_timer),this.preventShowingTrailer=!1,this.movie_hover_timer=setTimeout(function(){s.fetchHoverMovie(),s.showTrailerTimeout=setTimeout(function(){s.runMovieTrailer(s.movies[s.keys.menu_selection])},5e3)},1e3),this.hiddenAndShowSidebar()},fetchHoverMovie:function(e){var t,i,s,a,o,n=this;this.resetMovieUI(),"replay"!==this.current_movie_type&&(e=null!=e&&"number"==typeof e?this.movies[e]:this.movies[this.keys.menu_selection],s=this.getMovieUrlKey(e),this.setTitleScrolling(e.name),i=e.series_id?(t="series",e.series_id):(t="vod",e.stream_id),this.isTMDBAllowed)&&((e=this.getCachedMovieInfo(t,i))?((e=e.info)&&0!==e.length||(n.fetchHoverMovie(),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png")),this.updateMovieUI(e),a=e.tmdb_id||e.tmdb,e.backdrop_path&&0<e.backdrop_path.length&&(o=e.backdrop_path[0]),this.fetchMovieImages(a,o||HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-image").fadeIn()):$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+s,function(e){n.handleMovieResponse(e,t,i),$("#movie-image").fadeIn()},function(e){n.handleFetchError(e)}),this.resetScrollPosition(),$("#vod-series-cover").css("opacity",1))},resetMovieUI:function(){$("#movie-log-title").hide(),$("#vod-img-bg").css("opacity",0),$("#vod-series-cover .movie-info").hide(),$("#vod-series-cover").css("opacity",0);["#movie-title","#movie-synopsis","#movie-cast","#release-data","#director","#duration","#genre","#rate"].forEach(function(e){$(e).text("")}),$("#movie-title").text(this.movies[this.keys.menu_selection].name),$("#rate").text(this.movies[this.keys.menu_selection].rating),$("#movie-image").hide().attr("src","")},getMovieUrlKey:function(e){return"series"===this.current_movie_type?"&action=get_series_info&series_id="+e.series_id:"&action=get_vod_info&vod_id="+e.stream_id},setTitleScrolling:function(e){50<e.length?$("#movie-title").css({"padding-left":"100%",animation:"scroll-left 20s linear infinite"}):$("#movie-title").css({"padding-left":"",animation:""})},handleMovieResponse:function(e,t,i){var s,a=e.info,o=e.movie_data;a&&0!==a.length&&(this.updateMovieUI(a),this.cacheMovieInfo(t,i,a),e="",o&&((t=this.categories.filter(function(e){return e.category_id===o.category_id})[0].category_name.toLowerCase()).includes("xxx")||t.includes("adult")||t.includes("porn"))?(e=a.tmdb_id||a.tmdb,console.log("Adult movie detected, fetching images for tmdbId:",e)):e=a.tmdb_id||a.tmdb,a.backdrop_path&&0<a.backdrop_path.length&&(s=a.backdrop_path[0]||a.movie_image),this.fetchMovieImages(e,s||HOST+"app_src_min/images/default_movie_bg.png"),$("#vod-series-cover .movie-info").show())},updateMovieUI:function(e){$("#movie-title").text(e.name).show(),!e.backdrop_path&&e.movie_image&&(e.backdrop_path=e.movie_image),$("#movie-image").attr("src",e.backdrop_path).css("opacity",1),$("#movie-synopsis").text(e.description||e.plot),$("#movie-cast").text(e.cast),$("#release-data").text(e.releasedate||e.releaseDate),$("#director").text(e.director),$("#duration").text(e.duration),$("#genre").text(e.genre),$("#rate").text(Math.round(10*e.rating)/10),this.toggleCircle("#movie-cast",e.cast),this.toggleCircle("#release-data",e.releasedate||e.releaseDate),this.toggleCircle("#director",e.director),this.toggleCircle("#duration",e.duration),this.toggleCircle("#genre",e.genre),$("#vod-series-cover .movie-info").show()},toggleCircle:function(e,t){$(e).siblings(".circle").toggle(!!t)},handleFetchError:function(e){console.error("fetchHoverMovie",e),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png").show()},resetScrollPosition:function(){moveScrollPosition($("#vod-series-cover .movie-section"),$("#movie-info"),"vertical",!1)},fetchMovieImages:function(e,t){var i,s=this,a=(console.log("Backdrop images",t),e||t||$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-log-title").attr("src",""),"series"===this.current_movie_type?"/tv/"+e+"/images?api_key="+tmdb_api_key:"/movie/"+e+"/images?api_key="+tmdb_api_key);return e?(i="series"==this.current_movie_type?"series":"movies",$.ajax({url:"https://tmdb.iboplayer.com/api/"+i+"/images/show/"+e,type:"GET",headers:{Authorization:"Bearer sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB"}}).then(function(e){return e.data}).fail(function(e){return $.getJSON(tmdb_prefix_url+a).then(function(e){return console.log("Official TMDB API success:",e),e}).then(s.handleImageResponse.bind(s,t)).then(function(){$("#vod-series-cover .movie-info").show()}).fail(function(e){return console.log("Official TMDB API failed:",e),null})}).then(this.handleImageResponse.bind(this,t)).then(function(){$("#vod-series-cover .movie-info").show()})):$.Deferred().resolve().promise()},handleImageResponse:function(e,t){t.backdrops&&0<t.backdrops.length&&(e=tmdb_img_url+"w1280"+t.backdrops[0].file_path,this.current_backdrop=e);var i,s=t.logos&&0<t.logos.length?tmdb_img_url+"w500"+t.logos[0].file_path:null;if(s?($(".title-container").css("margin-bottom","1rem"),$("#movie-log-title").attr("src",s).show(),$("#movie-title").hide()):($(".title-container").css("margin-bottom","0"),$("#movie-log-title").hide(),$("#movie-title").show()),$("#vod-series-cover .movie-info").show(),$("#movie-image").attr("src",e).css("opacity",1),$(".vod-series-summary-section-img-darken").show(),$("#vod-img-bg").css("opacity",1),i=i||("series"==this.current_movie_type?"series":"movies"),!t.tmdbId)return $.ajax({url:"https://tmdb.iboplayer.com/api/"+i+"/images/store",type:"POST",headers:{Authorization:"Bearer sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB"},data:{tmdbId:t.tmdbId||t.id,backdrops:t.backdrops,logos:t.logos,posters:t.posters}}).then(function(e){return console.log("TMDB Images stored to server",e),e}).fail(function(e,t,i){console.log("Error storing TMDB Images to server:",i)})},cacheMovieInfo:function(e,t,i,s,a){var e=e+t,t=(i=utilities.pickProperties(i,["name","duration","cover","cover_big","movie_image","releasedate","releaseDate","director","actors","cast","description","plot","genre","rating","backdrop_path","tmdb","tmdb_id"]),Object.keys(storageMoviesInfo));t&&0!=t.length||(storageMoviesInfo.host_url=api_host_url),100<=t.length&&(t=t[1],delete storageMoviesInfo[t]),storageMoviesInfo[e]={info:i,logo:s,bg:a},localStorage.setItem(storage_id+"saved-movie-info",JSON.stringify(storageMoviesInfo))},getCachedMovieInfo:function(e,t){return storageMoviesInfo&&storageMoviesInfo!={}?storageMoviesInfo[e+t]:null},runMovieTrailer:function(e){this.preventShowingTrailer?console.log("Preventing showing trailer"):(console.log("Running movie trailer in the background",e),e=e.youtube_trailer||e.trailer,this.showTrailerTimeout=null,""!==e&&null!=e&&(window.trailerPlayer&&this.cleanupTrailerPlayer(),$("#vod-series-trailer-player").show(),window.trailerPlayer=new YT.Player("vod-series-trailer-player",{height:"100%",width:"100%",videoId:e,playerVars:{autoplay:1,controls:0,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1,fs:0,disablekb:1,playsinline:1,origin:window.location.origin},events:{onReady:function(e){e.target.playVideo();try{var t=e.target.getIframe();t&&t.style&&(t.style.pointerEvents="none")}catch(e){console.log("Error applying styles:",e)}},onStateChange:function(e){0===e.data&&(console.log("Video ended, cleaning up player"),vod_series_page.cleanupTrailerPlayer())}}}),$("#vod-series-trailer-player").on("load",function(){try{var e=$(this).contents(),t=(e.find(".ytp-chrome-top").hide(),e.find(".ytp-chrome-bottom").hide(),e.find(".ytp-chrome-top-buttons").hide(),e.find(".ytp-right-controls").hide(),e.find(".ytp-gradient-top").hide(),e.find(".ytp-gradient-bottom").hide(),e[0].createElement("style"));t.type="text/css",t.innerHTML=".ytp-chrome-top, .ytp-chrome-bottom, .ytp-gradient-top, .ytp-gradient-bottom {display: none !important}",e.find("head").append(t)}catch(e){console.log("Error modifying iframe contents:",e)}})))},cleanupTrailerPlayer:function(){this.showTrailerTimeout=null,this.preventShowingTrailer=!0,window.trailerPlayer&&(window.trailerPlayer.destroy(),window.trailerPlayer=null),$("#vod-series-trailer-player").hide(),$("#movie-image").show()},showThemeModal:function(){var e;this.isTMDBAllowed?(this.keys.focused_part="theme_vod_modal",$("#vod-theme-modal").modal("show"),e=this.keys.modal_focus_index,this.modal_visible=!0,$("#vod-theme-modal .vod-theme").removeClass("current"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("current")}),this.updateModalFocus()):showToast("Sorry","Theme cannot be changed unless TMDB is allowed in settings.")},hideThemeModal:function(){this.keys.focused_part="top_menu_selection",$("#vod-theme-modal").modal("hide"),this.modal_visible=!1},updateModalFocus:function(){var e=this.keys.modal_focus_index;$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")})},handleModalSelection:function(e){0==(this.keys.modal_focus_index=e)?(localStorage.setItem(storage_id+"vod_theme","n"),this.vod_theme="n",$("#vod-series-cover").addClass("d-none"),$("#vod-series-cover").removeClass("d-block"),$("#vod-series-menus-container").css("height","62rem"),$("#vod-series-current-category").css("margin-top","-3rem"),$("#vod-series-page .bottom-label-items-container").css("background","transparent")):(localStorage.setItem(storage_id+"vod_theme","m"),this.vod_theme="m",$("#vod-series-cover").addClass("d-block"),$("#vod-series-cover").removeClass("d-none"),$("#vod-series-current-category").css("margin-top","0"),$("#vod-series-menus-container").css("height","30rem")),this.hideThemeModal()},hoverThemeVod:function(e){$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")}),this.keys.modal_focus_index=e},hoverTopMenu:function(e){var t=this.keys;t.menu_selection=0,t.focused_part="top_menu_selection",$(this.prev_dom).removeClass("active"),2==e&&"replay"==this.current_movie_type&&(e=1),t.top_menu_selection=e,$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],this.hiddenAndShowSidebar()},hiddenAndShowSidebar:function(){"category_search_selection"==this.keys.focused_part||"category_selection"==this.keys.focused_part?($("#vod-series-left-part").css({"-webkit-transform":"translateX(0)",transform:"translateX(0)"}),$("#vod-series-cover .movie-info").css({"-webkit-transform":"translateX(35rem)",transform:"translateX(35rem)"}),$("#vod-series-menus-container").css({"-webkit-transform":"translateX(35rem)",transform:"translateX(35rem)"}),$("#vod-series-current-category").css({"-webkit-transform":"translateX(35rem)",transform:"translateX(35rem)"})):($("#vod-series-left-part").css({"-webkit-transform":"translateX(-100%)",transform:"translateX(-100%)"}),$("#vod-series-current-category").css({"-webkit-transform":"translateX(0)",transform:"translateX(0)"}),$("#vod-series-cover .movie-info").css("transform","translateX(0)"),$("#vod-series-menus-container").css("transform","translateX(0)"))},insertSidebarTitle:function(e){$("#vod-series-icon-container > div").html("<span>"+e+"</span>")},handleMenuClick:function(e){var t,i,s,a,o=this.keys;switch(o.focused_part){case"menu_selection":this.cleanupTrailerPlayer(),"vod"===this.current_movie_type?(current_movie=this.movies[o.menu_selection],vod_summary_page.init("vod-series-page")):"series"===this.current_movie_type?(current_series=this.movies[o.menu_selection],series_summary_page.init("vod-series-page")):(this.setIsLoading(!0),t=[],a=this,n=settings.time_format,i=12==n?"Y-MM-DD hh:mm A":"Y-MM-DD HH:mm",s=this.movies[o.menu_selection],this.currentlyActiveRequest=$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+s.stream_id,success:function(e){e.epg_listings?e.epg_listings.map(function(e){0!=e.has_archive&&t.push({start:getLocalChannelTime(e.start).format(i),stop:getLocalChannelTime(e.end).format(i),title:e.title,description:e.description})}):e.error?showToast("Error",e.error):showToast("Sorry","Something went wrong"),a.setIsLoading(!1),0<t.length?catchup_page.init(s,t,"vod-series-page"):(a.setIsLoading(!1),showToast("Sorry","No Epg Available for current channel"))},error:function(){a.requestAborted?a.requestAborted=!1:(showToast("Sorry","Something went wrong or no EPG available for this channel"),a.setIsLoading(!1))}}));break;case"top_menu_selection":if(0==o.top_menu_selection)this.cleanupTrailerPlayer(),this.goToSearchPage();else if(1==o.top_menu_selection)this.showSortModal();else{if("replay"===this.current_movie_type)return;this.showThemeModal()}break;case"category_selection":$(this.prev_selected_category).removeClass("current"),$(this.category_doms[e]).addClass("current"),this.prev_selected_category=this.category_doms[e];var n=this.categories[o.category_selection];this.current_category_index!=o.category_selection&&(checkForAdult(n,"category",[],!0)?parent_confirm_page.init(current_route):(this.showCategoryContent(),this.fetchHoverMovie(0),this.cleanupTrailerPlayer()));break;case"sort_selection":this.current_category_index=-1;n=$(this.sort_doms[o.sort_selection]).data("sort_key");"replay"!=this.current_movie_type?settings.saveSettings(this.current_movie_type+"_sort",n,""):settings.saveSettings("live_sort",n,""),$(this.top_menu_doms[1]).data("word_code",n),this.showCategoryContent(),this.goBack();break;case"category_search_selection":return key_focused?void $(this.category_search_dom).blur():($(this.category_search_dom).focus(),a=this,void setTimeout(function(){var e=$(a.category_search_dom).val();$(a.category_search_dom)[0].setSelectionRange(e.length,e.length)},200));case"theme_vod_modal":this.handleModalSelection(this.keys.modal_focus_index)}},handleMenusUpDown:function(e){var t=this.keys,i=this.menu_doms;switch(t.focused_part){case"category_search_selection":if(key_focused)return;if(e<0)return;0<this.category_doms.length&&(t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(this.category_doms[t.category_selection]));break;case"category_selection":if(t.category_selection+=e,t.category_selection<0)return t.category_selection=0,void this.hoverCategorySearch();if(t.category_selection>=this.category_doms.length)return void(t.category_selection=this.category_doms.length-1);this.hoverCategory(this.category_doms[t.category_selection]);break;case"menu_selection":var s=t.menu_selection;if("top_rated"!=this.current_category.category_id){if(t.menu_selection+=7*e,t.menu_selection>=i.length&&(t.menu_selection=i.length-1),t.menu_selection<0)return t.menu_selection=s,void this.hoverTopMenu(0);t.menu_selection>=this.current_render_count-7&&this.renderCategoryContent(),this.hoverMovieItem(this.menu_doms[t.menu_selection])}else if(e<0)return void this.hoverTopMenu(0);break;case"top_menu_selection":if(key_focused)return;if(0<e){if(0==this.menu_doms.length)return;t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[t.menu_selection])}break;case"sort_selection":t.sort_selection+=e,t.sort_selection<0&&(t.sort_selection=0),t.sort_selection>=this.sort_doms.length&&(t.sort_selection=this.sort_doms.length-1),this.hoverSortItem(t.sort_selection);case"theme_vod_modal":0<e?this.hoverThemeVod(1):this.hoverThemeVod(0)}this.hiddenAndShowSidebar()},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_search_selection":case"category_selection":0<e?0<this.movies.length?this.hoverMovieItem(this.menu_doms[t.menu_selection]):$("#vod-series-search-input").val()&&this.hoverTopMenu():this.hoverCategory(this.category_doms[0]);break;case"menu_selection":if("top_rated"!=this.current_category.category_id){if(t.menu_selection%7==0&&e<0)return void(0<this.category_doms.length?(t.category_search_selection>this.category_doms.length&&(t.category_search_selection=this.category_doms.length-1),this.hoverCategory(this.category_doms[t.category_selection])):this.hoverCategorySearch())}else if(0==t.menu_selection&&e<0)return void(0<this.category_doms.length?(t.category_search_selection>this.category_doms.length&&(t.category_search_selection=this.category_doms.length-1),this.hoverCategory(this.category_doms[t.category_selection])):this.hoverCategorySearch());t.menu_selection+=e,t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[t.menu_selection]),0<e&&t.menu_selection>=this.current_render_count-5&&this.renderCategoryContent();break;case"top_menu_selection":if(key_focused)return;if(t.top_menu_selection+=e,t.top_menu_selection<0)return t.top_menu_selection=0,void this.hoverCategory(this.category_doms[t.category_selection]);t.top_menu_selection>=this.top_menu_doms.length-1&&(t.top_menu_selection=this.top_menu_doms.length-2),this.hoverTopMenu(t.top_menu_selection)}this.hiddenAndShowSidebar()},HandleKey:function(e){if(this.is_drawing&&e.keyCode==tvKey.RETURN)this.goBack();else if(!this.is_drawing)switch(console.log("Key pressed in VOD Series Page: "+e.keyCode),e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick($(this.prev_dom).data("index"));break;case tvKey.RETURN:this.goBack();break;case tvKey.CH_UP:this.showNextChannel(1);break;case tvKey.CH_DOWN:this.showNextChannel(-1);break;case tvKey.RETURN:case tvKey.YELLOW:"replay"!==this.current_movie_type&&this.addOrRemoveFav();break;case tvKey.BLUE:"theme_vod_modal"==this.keys.focused_part||"top_menu_selection"==this.keys.focused_part&&-1==this.keys.search_selection||(this.hoverTopMenu(1),this.showSortModal());break;case tvKey.GREEN:"replay"===this.current_movie_type||"sort_selection"==this.keys.focused_part||"top_menu_selection"==this.keys.focused_part&&-1==this.keys.search_selection||(this.hoverTopMenu(2),this.showThemeModal());break;case tvKey.RED:"sort_selection"!=this.keys.focused_part&&"theme_vod_modal"!=this.keys.focused_part&&(this.hoverTopMenu(0),this.goToSearchPage());break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:this.playOrPause();break;default:console.log("No matching")}}},settings_page={keys:{focused_part:"settings_selection",settings_selection:0,parental_control_tabs_selection:0,current_parental_control_tab_selection:0,parental_control_selection:0,hide_categories_tabs_selection:0,current_hide_categories_tabs_selection:0,hide_categories_selection:0,themes_selection:0,change_language_selection:0,stream_format_selection:0,clear_cache_selection:0,clear_watch_lists_selection:0,subtitle_selection:0,font_size_selection:0,toggle_tmdb_selection:0,toggle_home_favorites_selection:0,live_initialization_selection:0},transparency_mode:!1,subtitle_bg_options:{black:{color:"#fff",background:"#000"},white:{color:"#000",background:"#fff"},red:{color:"#fff",background:"#950606"},transparent:{color:"#fff",background:"transparent"}},doms_translated:[],tried_panel_indexes:[],settings_doms:$(".settings-page-option"),settings_options_doms:$(".setting-option-container"),parental_control_tab_items:$("#parental-control-settings .setting-tab"),hide_categories_tabs_items:$("#hide-categories-settings .setting-tab"),hide_categories_live_items:$("#hide_categories_live_container .setting-select-multi-option"),hide_categories_movies_items:$("#hide_categories_movies_container .setting-select-multi-option"),hide_categories_series_items:$("#hide_categories_series_container .setting-select-multi-option"),themes_items:$("#theme-settings .setting-select-option"),change_language_items:$("#stream-format-settings .setting-select-option"),stream_format_items:$("#stream-format-settings .setting-select-option"),clear_cache_items:$("#clear-cache-settings .setting-select-option"),clear_watch_lists_items:$("#clear-watch-lists-settings .setting-select-option"),subtitle_items:$("#subtitle-settings .settings-multi-value-option"),font_size_items:$("#font-size-settings .setting-select-option"),toggle_tmdb_items:$("#toggle-tmdb-settings .setting-select-option"),toggle_home_favorites_items:$("#toggle-home-favorites-settings .setting-select-option"),live_initialization_items:$("#live-initialization-settings .setting-select-option"),init:function(){$("#home-page").addClass("hide"),$("#settings-page").css("display","flex"),current_route="settings-page",$(this.settings_doms).removeClass("current"),$(this.settings_options_doms).hide(),this.createThemesDoms(),this.createCategoriesDoms(),this.hoverSettingsItem(0)},goBack:function(){var e=this.keys;switch(e.focused_part){case"hide_categories":e.hide_categories_selection=0,this.hoverHideCategoriesTab(e.hide_categories_tabs_selection);break;case"subtitle_option":this.hoverSubtitleOption(e.subtitle_selection);break;default:this.keys.focused_part="settings_selection",$("#settings-page").css("display","none"),$("#home-page").removeClass("hide"),current_route="home-page"}},updateActiveClass:function(e,t){e.removeClass("active").eq(t).addClass("active")},handleScrolling:function(e,t,i,s){s=!s;moveScrollPosition($(e),$(t[i]),"vertical",s)},hoverOption:function(e,t,i,s){this.updateActiveClass(t,i),this.handleScrolling(e,t,i,s)},hoverSettingsItem:function(e,t){key_focused||(t&&t.removeClass("active"),(t=this.keys).focused_part="settings_selection",this.updateActiveClass(this.settings_doms,t.settings_selection=e),1==this.transparency_mode&&(this.transparency_mode=!1,$("#settings-page").css("opacity",1)))},clickSettingsItem:function(e){var t=this.keys;switch(e="number"==typeof e?e:t.settings_selection,$(this.settings_doms).removeClass("current").removeClass("active").eq(e).addClass("current"),$(this.settings_options_doms).hide().eq(e).show(),t.settings_selection){case 0:this.setupChangeLanguageOptions(),this.hoverChangeLanguageOption(t.change_language_selection);break;case 1:this.setupHideCategoriesOptions(),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);break;case 2:this.setupThemesOptions(),this.hoverThemesOption(t.themes_selection);break;case 3:this.setupParentalControlOptions();break;case 4:this.setupStreamFormatOptions(),this.hoverStreamFormatOption(t.stream_format_selection);break;case 5:this.hoverClearCacheOption(t.clear_cache_selection);break;case 6:this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case 7:this.setupSubtitleOptions(),this.hoverSubtitleOption(t.subtitle_selection);break;case 8:this.setupFontSizeOptions(),this.hoverFontSizeOption(t.font_size_selection);break;case 9:this.setupToggleTMDBOptions(),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case 10:this.setupLiveInitializationOptions(),this.hoverLiveInitializationOption(t.live_initialization_selection)}},setupParentalControlOptions:function(){var e=this.keys;e.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("current"),$("#settings-parental-control-off").hide(),"off"==parent_account_password?($("#parental-control-settings .setting-tabs-container").hide(),$("#settings-parental-control-change").hide(),$("#settings-parental-control-on").show(),e.current_parental_control_tab_selection=-1,this.hoverParentalControlOption(0)):($("#parental-control-settings .setting-tabs-container").show(),$("#settings-parental-control-change").show(),$("#settings-parental-control-on").hide(),e.current_parental_control_tab_selection=0,e.parental_control_tabs_selection=0,this.hoverParentalControlTab(e.parental_control_tabs_selection),this.clickParentalControlTab(e.current_parental_control_tab_selection))},resetParentalControlStyles:function(){$("#parental-control-settings .settings-input").removeClass("active"),$("#settings-parental-control-off-button").removeClass("active"),$("#settings-parental-control-on-button").removeClass("active")},hoverParentalControlTab:function(e){var t;key_focused||((t=this.keys).focused_part="parental_control_tabs",this.resetParentalControlStyles(),this.updateActiveClass(this.parental_control_tab_items,e),t.parental_control_tabs_selection=e)},clickParentalControlTab:function(e){var t=this.keys;switch(t.parental_control_tabs_selection=e,t.current_parental_control_tab_selection=e,$(this.parental_control_tab_items).removeClass("current").eq(e).addClass("current"),$("#settings-parental-control-change").hide(),$("#settings-parental-control-off").hide(),$("#settings-parental-control-on").hide(),$("#change-parental-validation-error").text(""),$("#turn-off-parental-validation-error").text(""),$("#turn-on-parental-validation-error").text(""),e){case 0:$("#settings-parental-control-change").show();break;case 1:$("#settings-parental-control-off").show()}},hoverParentalControlOption:function(e){if(!key_focused){var t=this.keys;switch(t.focused_part="parental_control",t.parental_control_selection=e,$(this.parental_control_tab_items).removeClass("active"),this.resetParentalControlStyles(),t.current_parental_control_tab_selection){case 0:t.parental_control_selection<3?$($("#settings-parental-control-change .settings-input")[e]).addClass("active"):3==t.parental_control_selection&&$("#settings-parental-control-change-button").addClass("active");break;case 1:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password-off").addClass("active");break;case 1:$("#settings-parental-control-off-button").addClass("active")}break;case-1:switch(t.parental_control_selection){case 0:$("#settings-create-parental-password").addClass("active");break;case 1:$("#settings-parental-control-on-button").addClass("active")}}}},clickParentalControlOption:function(e){var t=this.keys;switch(t.parental_control_selection=e,$("#settings-current-parental-password").removeClass("active"),$("#settings-new-parental-password").removeClass("active"),$("#settings-confirm-parental-password").removeClass("active"),t.current_parental_control_tab_selection){case 0:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password").focus().addClass("active");break;case 1:$("#settings-new-parental-password").focus().addClass("active");break;case 2:$("#settings-confirm-parental-password").focus().addClass("active");break;case 3:this.submitParentalControlChangePassword()}break;case 1:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password-off").focus().addClass("active");break;case 1:this.submitParentalControlTurnOff()}break;case-1:switch(t.parental_control_selection){case 0:$("#settings-create-parental-password").focus().addClass("active");break;case 1:this.submitParentalControlTurnOn()}}},submitParentalControlChangePassword:function(){var e=$("#change-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password").val()),i=$("#settings-new-parental-password").val(),s=$("#settings-confirm-parental-password").val();""==t||""==i||""==s?e.text("Please fill all fields"):t!=parent_account_password?e.text("Current password is incorrect"):i!=s?e.text("New passwords do not match"):i.length<4?$("#change-parental-validation-error").text("Password must be 4 digits"):(parent_account_password=i,localStorage.setItem(storage_id+"parent_account_password",i),this.saveParentPinToServer())},submitParentalControlTurnOff:function(){var e=$("#turn-off-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password-off").val());""==t?e.text("Please enter the current password"):t!=parent_account_password?e.text("Current password is incorrect"):(parent_account_password="off",localStorage.setItem(storage_id+"parent_account_password","off"),this.saveParentPinToServer(),this.setupParentalControlOptions())},submitParentalControlTurnOn:function(){var e=$("#turn-on-parental-validation-error"),t=(e.text(""),$("#settings-create-parental-password").val());""==t?e.text("Please enter the new password"):t.length<4?e.text("Password must be 4 digits"):(parent_account_password=t,localStorage.setItem(storage_id+"parent_account_password",t),this.saveParentPinToServer(),this.setupParentalControlOptions())},saveParentPinToServer:function(){var e=encryptRequest({mac_address:mac_address,pin_code:parent_account_password}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],a=this;$.ajax({method:"post",url:i+"/changeParentPin",data:{data:e},success:function(e){a.tried_panel_indexes=[];e=decryptResponse(e);console.log(e),showToast("Successful","Parental control password changed successfully!"),$("#change-parental-validation-error").val(""),$("#settings-current-parental-password").val(""),$("#settings-new-parental-password").val(""),$("#settings-confirm-parental-password").val(""),$("#settings-current-parental-password-off").val(""),$("#settings-create-parental-password").val("")},error:function(){a.tried_panel_indexes.push(s),a.tried_panel_indexes.length<panel_urls.length&&a.saveParentPinToServer()}})},createCategoriesDoms:function(){var e,t={live:LiveModel.getCategories(!0,!1),movies:VodModel.getCategories(!0,!1),series:SeriesModel.getCategories(!0,!1)},i={live:"",movies:"",series:""};for(e in t){var s=t[e];if(0!=s.length)for(var a=0;a<s.length;a++)i[e]+='        <div           class="setting-select-multi-option '+(s[a].is_hide?"":"checked")+'"          onmouseenter="settings_page.hoverHideCategoriesOption('+a+', true)"          onclick="settings_page.handleMenuClick()"        >          '+s[a].category_name+"        </div>"}var o=$("#hide-categories-settings .setting-select-multi-options");$(o[0]).html(i.live),$(o[1]).html(i.movies),$(o[2]).html(i.series),this.hide_categories_live_items=$("#hide_categories_live_container .setting-select-multi-option"),this.hide_categories_movies_items=$("#hide_categories_movies_container .setting-select-multi-option"),this.hide_categories_series_items=$("#hide_categories_series_container .setting-select-multi-option")},setupHideCategoriesOptions:function(){var e=this.keys;e.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("current"),$("#hide_categories_movies_container").hide(),$("#hide_categories_series_container").hide(),this.clickHideCategoriesTab(e.current_hide_categories_tabs_selection)},hoverHideCategoriesTab:function(e){var t=this.keys;t.focused_part="hide_categories_tabs",this.updateActiveClass(this.hide_categories_tabs_items,e),$(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),t.hide_categories_tabs_selection=e},clickHideCategoriesTab:function(e){var t=this.keys;switch(t.hide_categories_tabs_selection=e,t.current_hide_categories_tabs_selection=e,t.hide_categories_selection=0,$(this.hide_categories_tabs_items).removeClass("current").eq(e).addClass("current"),$("#hide_categories_live_container").hide(),$("#hide_categories_movies_container").hide(),$("#hide_categories_series_container").hide(),e){case 0:$("#hide_categories_live_container").show();break;case 1:$("#hide_categories_movies_container").show();break;case 2:$("#hide_categories_series_container").show()}},hoverHideCategoriesOption:function(e,t){var i=this.keys;switch(i.focused_part="hide_categories",$(this.hide_categories_tabs_items).removeClass("active"),i.current_hide_categories_tabs_selection){case 0:this.hoverOption("#hide_categories_live_container",this.hide_categories_live_items,i.hide_categories_selection,t);break;case 1:this.hoverOption("#hide_categories_movies_container",this.hide_categories_movies_items,i.hide_categories_selection,t);break;case 2:this.hoverOption("#hide_categories_series_container",this.hide_categories_series_items,i.hide_categories_selection,t)}i.hide_categories_selection=e},clickHideCategoriesOption:function(e){var t=[];switch(this.keys.current_hide_categories_tabs_selection){case 0:t=LiveModel.getCategories(!0,!1),LiveModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_live_items[e]),t[e].is_hide);break;case 1:t=VodModel.getCategories(!0,!1),VodModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_movies_items[e]),t[e].is_hide);break;case 2:t=SeriesModel.getCategories(!0,!1),SeriesModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_series_items[e]),t[e].is_hide)}},toggleCategoryItem:function(e,t){t?e.removeClass("checked"):e.addClass("checked")},createThemesDoms:function(){var i="";themes.map(function(e,t){i+='      <div         class="setting-select-option"        onmouseenter="settings_page.hoverThemesOption('+t+', true)"        onclick="settings_page.handleMenuClick()"      >        '+e.name+"      </div>"}),$("#settings-themes-options").html(i),this.themes_items=$("#theme-settings .setting-select-option")},setupThemesOptions:function(){for(var e=0,t=themes.length,i=0;i<t;i++)if(themes[i].name==settings.bg_img_name){e=i;break}$(this.themes_items).removeClass("current").eq(e).addClass("current")},hoverThemesOption:function(e,t){var i=this.keys;i.focused_part="themes",i.themes_selection=e,this.hoverOption("#settings-themes-options",this.themes_items,i.themes_selection,t),1==this.transparency_mode&&(this.transparency_mode=!1,$("#settings-page").css("opacity",1))},clickThemesOption:function(e){void 0!==themes[e]&&(settings.saveSettings("bg_img_url",themes[e].url,""),settings.saveSettings("bg_img_name",themes[e].name,""),changeBackgroundImage(),$(this.themes_items).removeClass("current").eq(e).addClass("current"),0==this.transparency_mode)&&(this.transparency_mode=!0,$("#settings-page").css("opacity",.25))},getSelectedLanguageWords:function(e){for(var t={},i=0;i<languages.length;i++)if(languages[i].code===e){t=languages[i].words;break}current_words=t},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language),this.doms_translated.map(function(e,t){var i=$(t).data("word_code");void 0!==current_words[i]&&$(t).text(current_words[i])})},setupChangeLanguageOptions:function(){for(var e=0,t=languages.length,i=0;i<t;i++)if(languages[i].code===settings.language){e=i;break}$(this.change_language_items).removeClass("current").eq(e).addClass("current")},hoverChangeLanguageOption:function(e,t){var i=this.keys;i.focused_part="change_language",i.change_language_selection=e,this.hoverOption("#settings-languages-options",this.change_language_items,i.change_language_selection,t)},clickChangeLanguageOption:function(e){void 0!==languages[e]&&(settings.saveSettings("language",languages[e].code,""),this.changeDomsLanguage(),$(this.change_language_items).removeClass("current").eq(e).addClass("current"))},setupStreamFormatOptions:function(){var e={default:0,ts:1,m3u8:2}[settings.stream_format]||0;$(this.stream_format_items).removeClass("current").eq(e).addClass("current")},hoverStreamFormatOption:function(e){var t=this.keys;t.focused_part="stream_format",this.updateActiveClass(this.stream_format_items,e),t.stream_format_selection=e},clickStreamFormatOption:function(e){settings.saveSettings("stream_format",["default","ts","m3u8"][e],""),$(this.stream_format_items).removeClass("current").eq(e).addClass("current")},hoverClearCacheOption:function(e){var t=this.keys;t.focused_part="clear_cache",this.updateActiveClass(this.clear_cache_items,e),t.clear_cache_selection=e},clickClearCacheOption:function(){clear_cache_page.handleMenuClick(!0)},hoverClearWatchListOption:function(e){var t=this.keys;t.focused_part="clear_watch_lists",this.updateActiveClass(this.clear_watch_lists_items,e),t.clear_watch_lists_selection=e},clickClearWatchListsOption:function(e){switch(this.keys.clear_watch_lists_selection){case 0:clear_recent_page.handleMenuClick("vod");break;case 1:clear_recent_page.handleMenuClick("series")}},setupSubtitleOptions:function(){$(this.subtitle_items).removeClass("current"),this.updateSubtitleSize(settings.subtitle_size),this.updateSubtitleBackground(settings.subtitle_bg)},updateSubtitleSize:function(e){$(".subtitle-container").css({"font-size":e/16+"rem"}),$("#subtitle-settings-preview-text").css("font-size",e/16+"rem"),$(this.subtitle_items[0]).find(".settings-multi-value-option-value").text(e+"px"),settings.subtitle_size=e,settings.saveSettings("subtitle_size",e,"")},updateSubtitleBackground:function(e){$(".subtitle-container").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$("#subtitle-settings-preview-text").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$(this.subtitle_items[1]).find(".settings-multi-value-option-value").text(e),settings.subtitle_bg=e,settings.saveSettings("subtitle_bg",e,"")},hoverSubtitleOption:function(e){$(this.subtitle_items).removeClass("current");var t=this.keys;t.focused_part="subtitle",this.updateActiveClass(this.subtitle_items,t.subtitle_selection=e)},clickSubtitleOption:function(e){this.keys.focused_part="subtitle_option",$(this.subtitle_items).removeClass("current").eq(e).addClass("current")},handleSubtitleSettingChange:function(e){var t=this.keys,i=Number(settings.subtitle_size),s=settings.subtitle_bg,a=Object.keys(this.subtitle_bg_options);switch(t.subtitle_selection){case 0:this.updateSubtitleSize(i=80<(i=(i+=5*e)<20?20:i)?80:i);break;case 1:var o=a.indexOf(s)+e,o=a[o=(o=o<0?a.length-1:o)>=a.length?0:o];this.updateSubtitleBackground(o)}},setupFontSizeOptions:function(){var e={normal:0,large:1}[settings.font_size]||0;$(this.font_size_items).removeClass("current").eq(e).addClass("current")},hoverFontSizeOption:function(e){var t=this.keys;t.focused_part="font_size",this.updateActiveClass(this.font_size_items,e),t.font_size_selection=e},clickFontSizeOption:function(e){switch(settings.saveSettings("font_size",["normal","large"][e],""),$(this.font_size_items).removeClass("current").eq(e).addClass("current"),e){case 0:document.body.classList.remove("large-font");break;case 1:document.body.classList.add("large-font")}},setupToggleTMDBOptions:function(){var e={off:0,on:1}[settings.tmdb_choice]||0;$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},hoverToggleTMDBOption:function(e){var t=this.keys;t.focused_part="toggle_tmdb",this.updateActiveClass(this.toggle_tmdb_items,e),t.toggle_tmdb_selection=e},clickToggleTMDBOption:function(e){settings.saveSettings("tmdb_choice",["off","on"][e],""),$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},setupLiveInitializationOptions:function(){var e={default:0,last:1,favorite:2}[settings.live_initialization_choice]||0;$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},hoverLiveInitializationOption:function(e){var t=this.keys;t.focused_part="live_initialization",this.updateActiveClass(this.live_initialization_items,e),t.live_initialization_selection=e},clickLiveInitializationOption:function(e){settings.saveSettings("live_initialization_choice",["default","last","favorite"][e],""),$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"settings_selection":this.clickSettingsItem(e.settings_selection);break;case"parental_control_tabs":this.clickParentalControlTab(e.parental_control_tabs_selection);break;case"parental_control":this.clickParentalControlOption(e.parental_control_selection);break;case"hide_categories_tabs":this.clickHideCategoriesTab(e.hide_categories_tabs_selection);break;case"hide_categories":this.clickHideCategoriesOption(e.hide_categories_selection);break;case"themes":this.clickThemesOption(e.themes_selection);break;case"change_language":this.clickChangeLanguageOption(e.change_language_selection);break;case"stream_format":this.clickStreamFormatOption(e.stream_format_selection);break;case"clear_cache":this.clickClearCacheOption();break;case"clear_watch_lists":this.clickClearWatchListsOption();break;case"subtitle":this.clickSubtitleOption(e.subtitle_selection);break;case"font_size":this.clickFontSizeOption(e.font_size_selection);break;case"toggle_tmdb":this.clickToggleTMDBOption(e.toggle_tmdb_selection);break;case"live_initialization":this.clickLiveInitializationOption(e.live_initialization_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":t.settings_selection=utilities.clampNumber(t.settings_selection+e,0,this.settings_doms.length-1),this.hoverSettingsItem(t.settings_selection);break;case"parental_control_tabs":0<e&&this.hoverParentalControlOption(0);break;case"parental_control":if(t.parental_control_selection+=e,-1==t.current_parental_control_tab_selection&&t.parental_control_selection<0)t.parental_control_selection=0;else if(t.parental_control_selection<0)t.parental_control_selection=0,this.hoverParentalControlTab(t.parental_control_tabs_selection);else{switch(t.current_parental_control_tab_selection){case 0:3<t.parental_control_selection&&(t.parental_control_selection=3);break;case 1:case-1:1<t.parental_control_selection&&(t.parental_control_selection=1)}this.hoverParentalControlOption(t.parental_control_selection)}break;case"hide_categories_tabs":0<e&&this.hoverHideCategoriesOption(0);break;case"hide_categories":if(t.hide_categories_selection+=e,t.hide_categories_selection<0)t.hide_categories_selection=0,this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);else{switch(t.current_hide_categories_tabs_selection){case 0:t.hide_categories_selection>=this.hide_categories_live_items.length&&(t.hide_categories_selection=this.hide_categories_live_items.length-1);break;case 1:t.hide_categories_selection>=this.hide_categories_movies_items.length&&(t.hide_categories_selection=this.hide_categories_movies_items.length-1);break;case 2:t.hide_categories_selection>=this.hide_categories_series_items.length&&(t.hide_categories_selection=this.hide_categories_series_items.length-1)}this.hoverHideCategoriesOption(t.hide_categories_selection)}break;case"themes":t.themes_selection=utilities.clampNumber(t.themes_selection+e,0,this.themes_items.length-1),this.hoverThemesOption(t.themes_selection);break;case"change_language":t.change_language_selection=utilities.clampNumber(t.change_language_selection+e,0,this.change_language_items.length-1),this.hoverChangeLanguageOption(t.change_language_selection);break;case"stream_format":t.stream_format_selection=utilities.clampNumber(t.stream_format_selection+e,0,this.stream_format_items.length-1),this.hoverStreamFormatOption(t.stream_format_selection);break;case"clear_watch_lists":t.clear_watch_lists_selection=utilities.clampNumber(t.clear_watch_lists_selection+e,0,this.clear_watch_lists_items.length-1),this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case"subtitle":t.subtitle_selection=utilities.clampNumber(t.subtitle_selection+e,0,this.subtitle_items.length-1),this.hoverSubtitleOption(t.subtitle_selection);break;case"font_size":t.font_size_selection=utilities.clampNumber(t.font_size_selection+e,0,this.font_size_items.length-1),this.hoverFontSizeOption(t.font_size_selection);break;case"toggle_tmdb":t.toggle_tmdb_selection=utilities.clampNumber(t.toggle_tmdb_selection+e,0,this.toggle_tmdb_items.length-1),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case"live_initialization":t.live_initialization_selection=utilities.clampNumber(t.live_initialization_selection+e,0,this.live_initialization_items.length-1),this.hoverLiveInitializationOption(t.live_initialization_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":0<e&&this.clickSettingsItem(t.settings_selection);break;case"parental_control_tabs":t.parental_control_tabs_selection+=e,t.parental_control_tabs_selection<0?(t.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.parental_control_tabs_selection>=this.parental_control_tab_items.length&&(t.parental_control_tabs_selection=this.parental_control_tab_items.length-1),this.hoverParentalControlTab(t.parental_control_tabs_selection));break;case"parental_control":e<0&&(this.resetParentalControlStyles(),this.hoverSettingsItem(t.settings_selection));break;case"hide_categories_tabs":t.hide_categories_tabs_selection+=e,t.hide_categories_tabs_selection<0?(t.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.hide_categories_tabs_selection>=this.hide_categories_tabs_items.length&&(t.hide_categories_tabs_selection=this.hide_categories_tabs_items.length-1),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection));break;case"hide_categories":e<0&&($(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection));break;case"themes":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.themes_items));case"change_language":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.change_language_items));case"stream_format":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.stream_format_items));break;case"clear_cache":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_cache_items));break;case"clear_watch_lists":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_watch_lists_items));break;case"subtitle":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.subtitle_items));break;case"subtitle_option":this.handleSubtitleSettingChange(e);break;case"font_size":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.font_size_items));break;case"toggle_tmdb":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_tmdb_items));break;case"toggle_home_favorites":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_home_favorites_items));break;case"live_initialization":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.live_initialization_items))}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},setting_page={player:null,keys:{focused_part:"menu_selection",menu_selection:0,stream_format_selection:0,font_size_selection:0,tmdb_selection:0,live_initialization_selection:0},menu_doms:$(".setting-menu-item-wrapper"),initiated:!1,parent_control_doms:[],hide_category_doms:[],theme_modal_options:[],hide_category_movie_type:"",doms_translated:[],language_doms:[],stream_format_items:$(".stream-format-item"),font_size_items:$(".font-size-item"),tmdb_items:$(".tmdb-option"),live_initialization_items:$(".live-initialization-option"),tried_panel_indexes:[],subtitle_setting_doms:$(".subtitle-setting-item"),init:function(){this.hoverSettingMenu(0),current_route="setting-page",$("#setting-page").removeClass("hide");var i=$("#parent-control-modal .parent-modal-input-item-container");$("#parent-control-modal .parent-control-modal-button").map(function(e,t){i.push(t)}),this.parent_control_doms=i,this.tried_panel_indexes=[]},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$("#setting-page").addClass("hide"),$("#home-page").removeClass("hide"),current_route="home-page";break;case"parent_control_modal":this.cancelResetParentAccount();break;case"hide_category_modal":$("#hide-category-modal").modal("hide"),e.focused_part="menu_selection";break;case"theme_modal":$("#theme-modal").modal("hide"),e.focused_part="menu_selection";break;case"language_selection":$("#language-select-modal").modal("hide"),e.focused_part="menu_selection";break;case"stream_format_selection":$("#stream-format-modal").modal("hide"),e.focused_part="menu_selection";break;case"subtitle_setting_selection":$("#subtitle-setting-modal").modal("hide"),e.focused_part="menu_selection";break;case"font_size_modal":$("#font-size-modal").modal("hide"),e.focused_part="menu_selection";break;case"tmdb_modal":$("#toggle_tmdb_modal").modal("hide"),e.focused_part="menu_selection";break;case"live_initialization_modal":$("#live_initialization_modal").modal("hide"),e.focused_part="menu_selection"}},showParentControlModal:function(){$("#parent-account-valid-error").hide(),$("#settings-modal").modal("hide"),$(".parent-modal-input-wrapper input").val(""),$("#parent-control-modal").modal("show"),this.keys.focused_part="parent_control_modal",$(this.parent_control_doms).removeClass("active"),this.keys.parent_control_modal=0,$(this.parent_control_doms[0]).addClass("active"),$(this.parent_control_doms[0]).find("input").focus()},clickParentControl:function(t){var e=this.keys;switch(e.parent_control_modal=t,e.parent_control_modal){case 0:case 1:case 2:$(this.parent_control_doms[t]).find("input").focus();var i=this;setTimeout(function(){var e=$(i.parent_control_doms[t]).find("input").val();$(i.parent_control_doms[t]).find("input")[0].setSelectionRange(e.length,e.length)},200);break;case 3:this.resetParentAccount();break;case 4:this.cancelResetParentAccount()}},resetParentAccount:function(){$("#parent-account-valid-error").hide();var e=$("#current_parent_password").val(),t=$("#new_parent_password").val(),i=$("#new_parent_password_confirm").val();e!=parent_account_password?$("#parent-account-valid-error").text("Current password does not match").slideDown():t!=i?$("#parent-account-valid-error").text("Password does not match").slideDown():(parent_account_password=t,localStorage.setItem(storage_id+"parent_account_password",parent_account_password),$("#parent-control-modal").modal("hide"),this.keys.focused_part="menu_selection",this.saveParentPinToServer())},saveParentPinToServer:function(){var e=encryptRequest({mac_address:mac_address,pin_code:parent_account_password}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],a=this;$.ajax({method:"post",url:i+"/changeParentPin",data:{data:e},success:function(e){a.tried_panel_indexes=[];e=decryptResponse(e);console.log(e)},error:function(){a.tried_panel_indexes.push(s),a.tried_panel_indexes.length<panel_urls.length&&a.saveParentPinToServer()}})},cancelResetParentAccount:function(){$("#parent-control-modal").modal("hide"),this.keys.focused_part="menu_selection"},getSelectedLanguageWords:function(e){for(var t={},i=0;i<languages.length;i++)if(languages[i].code===e){t=languages[i].words;break}current_words=t},showHideCategoryModal:function(e){this.hide_category_movie_type=e,$("#settings-modal").modal("hide"),"live"===e&&(t=LiveModel.getCategories(!0,!1)),"movie"!==e&&"vod"!==e||(t=VodModel.getCategories(!0,!1)),"series"===e&&(t=SeriesModel.getCategories(!0,!1));var t,i="",e=(t.map(function(e,t){i+='<div class="hide-category-modal-option"   onclick="setting_page.clickHideCategory('+t+')"   onmouseenter="setting_page.hoverHideCategory('+t+')">   <input class="hide-category-checkbox" type="checkbox" name="checkbox"       id="hide-category-item-'+e.category_id+'" '+(e.is_hide?"":"checked")+' value="'+e.category_id+'">   <label for="hide-category-item-dfafdd'+e.category_id+'">'+e.category_name+"</label></div>"}),$("#hide-modal-categories-container").html(i),$("#hide-category-modal").modal("show"),$($(".hide-category-modal-option")).removeClass("active"),$($(".hide-category-modal-option")[0]).addClass("active"),$($(".hide-category-btn-wrapper")).removeClass("active"),$(".hide-category-modal-option"));this.hide_category_doms=e,this.keys.focused_part="hide_category_modal",this.keys.hide_category_modal=0,$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[0]).addClass("active"),$("#hide-modal-categories-container").scrollTop(0)},clickHideCategory:function(e){var t=this.hide_category_doms[e],i=!$($(t).find("input")[0]).prop("checked");$($(t).find("input")[0]).prop("checked",i),("live"===this.hide_category_movie_type?LiveModel:"movie"===this.hide_category_movie_type||"vod"===this.hide_category_movie_type?VodModel:SeriesModel).saveHiddenCategories(e,!i)},showThemeModal:function(){var i="";themes.map(function(e,t){i+='<div class="modal-operation-menu-type-3 theme-modal-option"    onclick="setting_page.pickTheme('+t+')"   onmouseenter="setting_page.hoverThemeModal('+t+')">'+e.name+"</div>"}),$("#theme-modal-body").html(i),this.theme_modal_options=$(".theme-modal-option"),this.keys.focused_part="theme_modal",this.keys.theme_modal=0,$(this.theme_modal_options).removeClass("active"),$(this.theme_modal_options[0]).addClass("active"),$("#settings-modal").modal("hide"),$("#theme-modal").modal("show")},pickTheme:function(e){e=themes[e].url;settings.saveSettings("bg_img_url",e,""),changeBackgroundImage(),this.keys.focused_part="menu_selection",$("#theme-modal").modal("hide")},showLanguages:function(){$("#settings-modal").modal("hide");var i=this.keys,e=(i.focused_part="language_selection",i.language_selection=0,this.language_doms);e.map(function(e,t){$(t).data("language")==settings.language&&(i.language_selection=e)}),$(e).removeClass("active"),$(e[i.language_selection]).addClass("active"),$("#language-select-modal").modal("show"),moveScrollPosition($("#select-language-body"),e[i.language_selection],"vertical",!1)},selectLanguage:function(e,t){settings.saveSettings("language",e,"");e=this.keys;e.language_selection=t,$(this.language_doms).removeClass("active"),$(this.language_doms[t]).addClass("active"),$("#language-select-modal").modal("hide"),e.focused_part="menu_selection",this.changeDomsLanguage()},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language),this.doms_translated.map(function(e,t){var i=$(t).data("word_code");void 0!==current_words[i]&&$(t).text(current_words[i])})},confirmParentPassword:function(){$("#parent-confirm-password-error").hide();var e=$("#parent-confirm-password").val();parent_account_password===e?($("#parent-confirm-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,this.showCategoryContent()):$("#parent-confirm-password-error").text("Password does not match").show()},cancelParentPassword:function(){$("#parent-confirm-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},showStreamFormatModal:function(){this.hoverStreamFormatItem(0),this.initiate_stream_format||($('input[name="stream-format"][value="'+settings.stream_format+'"]').prop("checked",!0),this.initiate_stream_format=!0),$("#stream-format-modal").modal("show")},saveStreamFormat:function(){var e=$("input[name='stream-format']:checked").val();void 0!==e&&settings.saveSettings("stream_format",e,""),this.goBack()},saveFontSize:function(){var e=$(this.font_size_items[this.keys.font_size_selection]).children(".font-size-radio").val();void 0!==e&&settings.saveSettings("font_size",e,""),"large"==e?document.body.classList.add("large-font"):document.body.classList.remove("large-font"),this.goBack()},saveTMDBChoice:function(){var e=$(this.tmdb_items[this.keys.tmdb_selection]).children(".tmdb-choice-radio").val();void 0!==e&&settings.saveSettings("tmdb_choice",e,"")},saveLiveInitializationChoice:function(){var e=$(this.live_initialization_items[this.keys.live_initialization_selection]).children(".live-initialization-choice-radio").val();void 0!==e&&settings.saveSettings("live_initialization_choice",e,"")},showSubtitleSetting:function(){$("#current-subtitle-size").text(settings.subtitle_size+"px"),$("#subtitle-setting-modal").modal("show"),this.hoverSubtitleSetting(0)},increaseSubtitleSize:function(e){var t=settings.subtitle_size;100<(t=(t+=e)<20?20:t)&&(t=100),$("#current-subtitle-size").text(t+"px"),$(".subtitle-container").css({"font-size":t+"px"}),settings.saveSettings("subtitle_size",t,"")},showFontSetting:function(){this.hoverFontSizeItem(0),this.initiate_font_size||($('input[name="font-size"][value="'+settings.font_size+'"]').prop("checked",!0),this.initiate_font_size=!0),$("#font-size-modal").modal("show")},showTMDBApiSettings:function(){this.hoverTMDBChoice(this.keys.tmdb_selection),$('input[name="tmdb-choice"][value="'+settings.tmdb_choice+'"]').prop("checked",!0),$("#toggle_tmdb_modal").modal("show")},showLiveInitializationOptions:function(){this.hoverLiveInitializationChoice(this.keys.live_initialization_selection),$('input[name="live-initialization-choice"][value="'+settings.live_initialization_choice+'"]').prop("checked",!0),$("#live_initialization_modal").modal("show")},hoverThemeModal:function(e){this.keys.theme_modal=e,$(this.theme_modal_options).removeClass("active"),$(this.theme_modal_options[e]).addClass("active"),moveScrollPosition($("#theme-modal-body"),this.theme_modal_options[e],"vertical",!1)},hoverHideCategory:function(e){var t=this.keys;t.hide_category_modal=e<0?this.hide_category_doms.length+e:e,$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[t.hide_category_modal]).addClass("active"),moveScrollPosition($("#hide-modal-categories-container"),this.hide_category_doms[t.hide_category_modal],"vertical",!1)},hoverParentControl:function(e){this.keys.parent_control_modal=e,$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[e]).addClass("active")},hoverSettingMenu:function(e){this.keys.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},hoverLanguage:function(e){var t=this.keys,i=this.language_doms;t.language_selection=e,$(i).removeClass("active"),$(i[t.language_selection]).addClass("active"),moveScrollPosition($("#select-language-body"),i[t.language_selection],"vertical",!1)},hoverStreamFormatItem:function(e){var t=this.keys;t.focused_part="stream_format_selection",$(this.stream_format_items).removeClass("active"),$(this.stream_format_items[e]).addClass("active"),t.stream_format_selection=e},hoverFontSizeItem:function(e){var t=this.keys;t.focused_part="font_size_modal",$(this.font_size_items).removeClass("active"),$(this.font_size_items[e]).addClass("active"),t.font_size_selection=e},hoverSubtitleSetting:function(e){var t=this.keys;t.focused_part="subtitle_setting_selection",t.subtitle_setting_selection=e,$(this.subtitle_setting_doms).removeClass("active"),$(this.subtitle_setting_doms[e]).addClass("active")},hoverTMDBChoice:function(e){var t=this.keys;t.focused_part="tmdb_modal",$(this.tmdb_items).removeClass("active"),$(this.tmdb_items[e]).addClass("active"),t.tmdb_selection=e},hoverLiveInitializationChoice:function(e){var t=this.keys;t.focused_part="live_initialization_modal",$(this.live_initialization_items).removeClass("active"),$(this.live_initialization_items[e]).addClass("active"),t.live_initialization_selection=e},handleMenuClick:function(){var t,i=this.keys;switch(i.focused_part){case"menu_selection":switch(i.menu_selection){case 0:this.showParentControlModal();break;case 1:checkActivePlaylist()&&this.showHideCategoryModal("live");break;case 2:checkActivePlaylist()&&this.showHideCategoryModal("movie");break;case 3:checkActivePlaylist()&&this.showHideCategoryModal("series");break;case 4:this.showThemeModal();break;case 5:this.showLanguages();break;case 6:this.showStreamFormatModal();break;case 7:clear_cache_page.init("setting-page");break;case 8:clear_recent_page.init("setting-page","vod");break;case 9:clear_recent_page.init("setting-page","series");break;case 10:this.showSubtitleSetting();break;case 11:this.showFontSetting();break;case 12:this.showTMDBApiSettings();break;case 13:this.showLiveInitializationOptions()}break;case"parent_control_modal":i.parent_control_modal<3?($(this.parent_control_doms[i.parent_control_modal]).find("input").focus(),t=this,setTimeout(function(){var e=$(t.parent_control_doms[i.parent_control_modal]).find("input").val();console.log(e,i.parent_control_modal),$(t.parent_control_doms[i.parent_control_modal]).find("input")[0].setSelectionRange(e.length,e.length)},200)):$(this.parent_control_doms[i.parent_control_modal]).trigger("click");break;case"hide_category_modal":$(this.hide_category_doms[i.hide_category_modal]).trigger("click");break;case"theme_modal":$(this.theme_modal_options[i.theme_modal]).trigger("click");break;case"language_selection":$(this.language_doms[i.language_selection]).trigger("click");break;case"stream_format_selection":i.stream_format_selection<3?$(this.stream_format_items[i.stream_format_selection]).find("input").prop("checked",!0):3==i.stream_format_selection?this.saveStreamFormat():4==i.stream_format_selection&&this.goBack();break;case"subtitle_setting_selection":$(this.subtitle_setting_doms[i.subtitle_setting_selection]).trigger("click");break;case"font_size_modal":i.font_size_selection<2?(this.saveFontSize(),$(this.font_size_items[i.font_size_selection]).find("input").prop("checked",!0)):2==i.font_size_selection&&this.goBack();break;case"tmdb_modal":i.tmdb_selection<2&&(this.saveTMDBChoice(),$(this.tmdb_items[i.tmdb_selection]).find("input").prop("checked",!0)),this.goBack();break;case"live_initialization_modal":i.live_initialization_selection<3&&(this.saveLiveInitializationChoice(),$(this.live_initialization_items[i.live_initialization_selection]).find("input").prop("checked",!0)),this.goBack()}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":var i=t.menu_selection;if(t.menu_selection+=4*e,t.menu_selection>=this.menu_doms.length){if(3<i)return void(t.menu_selection=i);t.menu_selection=this.menu_doms.length-1}t.menu_selection<0?t.menu_selection=i:this.hoverSettingMenu(t.menu_selection);break;case"hide_category_modal":t.hide_category_modal+=e,t.hide_category_modal<0&&(t.hide_category_modal=0),t.hide_category_modal>=this.hide_category_doms.length&&(t.hide_category_modal=this.hide_category_doms.length-1),$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[t.hide_category_modal]).addClass("active"),t.hide_category_modal<this.hide_category_doms.length&&moveScrollPosition($("#hide-modal-categories-container"),this.hide_category_doms[t.hide_category_modal],"vertical");break;case"parent_control_modal":0<e?t.parent_control_modal<3&&(t.parent_control_modal+=e):3<=t.parent_control_modal?t.parent_control_modal=2:(t.parent_control_modal+=e,t.parent_control_modal<0&&(t.parent_control_modal=0)),$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[t.parent_control_modal]).addClass("active");break;case"theme_modal":i=this.theme_modal_options;t.theme_modal+=e,t.theme_modal<0&&(t.theme_modal=i.length-1),t.theme_modal>=i.length&&(t.theme_modal=0),$(i).removeClass("active"),$(i[t.theme_modal]).addClass("active"),moveScrollPosition($("#theme-modal-body"),this.theme_modal_options[t.theme_modal],"vertical",!1);break;case"language_selection":i=this.language_doms;t.language_selection+=e,t.language_selection<0&&(t.language_selection=i.length-1),t.language_selection>=i.length&&(t.language_selection=0),this.hoverLanguage(t.language_selection);break;case"stream_format_selection":t.stream_format_selection<3?t.stream_format_selection+=e:3<=t.stream_format_selection&&e<0&&(t.stream_format_selection=2),t.stream_format_selection<0&&(t.stream_format_selection=0),this.hoverStreamFormatItem(t.stream_format_selection);break;case"font_size_modal":t.font_size_selection+=e,2<t.font_size_selection?t.font_size_selection=0:t.font_size_selection<0&&(t.font_size_selection=2),this.hoverFontSizeItem(t.font_size_selection),console.log(t.font_size_selection);break;case"tmdb_modal":t.tmdb_selection+=e,2<t.tmdb_selection?t.tmdb_selection=0:t.tmdb_selection<0&&(t.tmdb_selection=2),this.hoverTMDBChoice(t.tmdb_selection);break;case"live_initialization_modal":t.live_initialization_selection+=e,3<t.live_initialization_selection?t.live_initialization_selection=0:t.live_initialization_selection<0&&(t.live_initialization_selection=3),this.hoverLiveInitializationChoice(t.live_initialization_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverSettingMenu(t.menu_selection);break;case"parent_control_modal":3<=t.parent_control_modal&&(t.parent_control_modal+=e,t.parent_control_modal<3&&(t.parent_control_modal=3),4<t.parent_control_modal&&(t.parent_control_modal=4),$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[t.parent_control_modal]).addClass("active"));break;case"stream_format_selection":0<e?this.hoverStreamFormatItem(this.stream_format_items.length-1):this.hoverStreamFormatItem(this.stream_format_items.length-2);break;case"font_size_modal":t.font_size_selection=0<e?2:0,this.hoverFontSizeItem(t.font_size_selection);break;case"subtitle_setting_selection":0<e?this.hoverSubtitleSetting(1):this.hoverSubtitleSetting(0)}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},turn_off_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#turn-off-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="turn-off-page",this.hoverMenuItem(0),$("#turn-off-modal").modal("show")},goBack:function(){$("#turn-off-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close();break;case 1:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},parent_confirm_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".parent-confirm-item"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="parent-confirm-page",this.resetPasswordInput(),this.hoverMenuItem(0),$("#parent-confirm-password-error").hide(),$("#parent-confirm-modal").modal("show")},goBack:function(){$("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"vod-summary-page"!==this.prev_route&&"series-summary-page"!==this.prev_route||(current_route="vod-series-page"),"channel-category-page"===this.prev_route&&(current_route="channel-category-page")},resetPasswordInput:function(){var e=$("#parent-confirm-password"),t=e.clone().val("");e.replaceWith(t)},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:$(this.menu_doms[0]).find("input").focus();break;case 1:var t=$(this.menu_doms[0]).find("input").val();$("#parent-confirm-password-error").hide(),t!=parent_account_password?$("#parent-confirm-password-error").slideDown():($("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"channel-page"===this.prev_route?channel_page.showCategoryChannels():"vod-series-page"===this.prev_route?vod_series_page.showCategoryContent():"stream-category-page"===this.prev_route&&stream_category_page.showStreamPage());break;case 2:this.goBack()}},handleMenusUpDown:function(e){var t=this.keys;1<=t.menu_selection&&0<e||(1<=t.menu_selection&&e<0?t.menu_selection=0:0==t.menu_selection&&0<e&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&1<=t.menu_selection&&(t.menu_selection+=e,t.menu_selection<1&&(t.menu_selection=0),2<t.menu_selection&&(t.menu_selection=2),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},playlist_edit_page={initiated:!1,keys:{focused_part:"kind_selection",kind_selection:0,playlist_edit_selection:0},playlist_edit_doms:$(".playlist-edit-item"),kind_doms:$(".playlist-kind-item"),playlist_type:"general",back_btn_dom:null,playlist:null,is_loading:!1,tried_panel_indexes:[],init:function(e){this.tried_panel_indexes=[],this.playlist=e,$("#playlist-page").addClass("hide"),$("#playlist-edit-page").removeClass("hide"),$("#playlist-edit-error-message").hide();var t="",i="",s="",a="";this.playlist_type="general",e&&(a=e.playlist_name,s=e.origin_url,"xc"===e.origin_type)&&(t=e.username,i=e.password,this.playlist_type="xc"),$(this.playlist_edit_doms[0]).val(a),$(this.playlist_edit_doms[1]).val(s),$(this.playlist_edit_doms[2]).val(t),$(this.playlist_edit_doms[3]).val(i),"general"===this.playlist_type?this.keys.playlist_edit_selection=0:this.keys.playlist_edit_selection=1,this.playListTypeChanged(),this.hoverKindItem(this.keys.playlist_edit_selection),current_route="playlist-edit-page"},playListTypeChanged:function(){var e=this.playlist_type;$(this.kind_doms).removeClass("current"),("general"===e?($(".xc-case").removeClass("visible"),$(this.kind_doms[0])):($(".xc-case").addClass("visible"),$(this.kind_doms[1]))).addClass("current")},savePlaylist:function(){var t=this.playlist_type,i=$(this.playlist_edit_doms[0]).val(),s=$(this.playlist_edit_doms[1]).val(),a=$(this.playlist_edit_doms[2]).val(),o=$(this.playlist_edit_doms[3]).val();if(i)if(s){if("xc"===t){if(!a)return void $("#playlist-edit-error-message").text("Sorry, username is required").slideDown();if(!o)return void $("#playlist-edit-error-message").text("Sorry, password is required").slideDown()}$("#playlist-edit-error-message").slideUp(),showLoader(!0),this.is_loading=!0;var e=moment().unix(),n=this.playlist,r="non_saved_"+e,l=!0,e=(n&&(r=n.id,l=!1),s),c=("xc"===t&&(e+="/player_api.php?username="+a+"&password="+o),this);$.ajax({method:"get",url:e,success:function(e){if("xc"===t){if(!e||!e.user_info)return void c.showPlaylistErrorMessage();e=e.user_info;if(0==e.auth||e.status&&("Expired"===e.status||"Banned"===e.status))return void c.showPlaylistErrorMessage()}e={id:r,is_created:l,playlist_type:c.playlist_type,url:s,origin_type:t,origin_url:s,password:o,username:a,playlist_name:i};c.updatePlaylistWithServer(e)},error:function(){c.showPlaylistErrorMessage()}})}else $("#playlist-edit-error-message").text("Sorry, playlist url is required").slideDown();else $("#playlist-edit-error-message").text("Sorry, playlist name is required").slideDown()},showPlaylistErrorMessage:function(){showLoader(!1),this.is_loading=!1,$("#playlist-edit-error-message").html("Sorry, Your playlist is not working<br>Please check your playlist and try again").slideDown()},updatePlaylistWithServer:function(e){var t=e.is_created,i=encryptRequest({mac_address:mac_address,app_type:platform,playlists:[e]}),s=pickPanelUrl(this.tried_panel_indexes),a=s[1],o=s[0],n=this;$.ajax({method:"post",url:a+"/update_playlist",data:{data:i},success:function(e){n.tried_panel_indexes=[];e=decryptResponse(e);e[0].is_created=t,n.playListSaved(e[0],!0)},error:function(){n.tried_panel_indexes.push(o),n.tried_panel_indexes.length<panel_urls.length?n.updatePlaylistWithServer(e):n.playListSaved(e,!1)}})},playListSaved:function(e,t){console.log(e),e.origin_type=e.playlist_type,e.origin_url=e.url,"general"===e.playlist_type&&"xc"===(i=parseM3uUrl(e.url)).playlist_type&&(e.playlist_type="xc",e.url=i.url,console.log(e.url),e.username=i.username,e.password=i.password);var i=localStorage.getItem(storage_id+"local_data"),s=((i=i?JSON.parse(i):{}).playlist_urls||(i.playlist_urls=[]),i.playlist_urls),a=-1;if(t)-1!=a&&s.splice(a,1);else{for(var o=0;o<s.length;o++)if(s[o].id==e.id){a=o;break}-1==a?s.push(e):s[a]=e}i.playlist_urls=s,localStorage.setItem(storage_id+"local_data",JSON.stringify(i));e.is_created?playlist_urls.push(e):(i=(playlist_urls[playlist_page.keys.playlist_selection]=e).id,t&&changeLocalStorageKeysForPlaylist([i=e.origin_id],[e.id]),settings.playlist.id==i&&(settings.saveSettings("playlist",e,"array"),settings.saveSettings("playlist_id",e.id,""))),saveData("playlist_urls",playlist_urls);t=localStorage.getItem(storage_id+"api_data");t&&((t=JSON.parse(t)).urls=playlist_urls,localStorage.setItem(storage_id+"api_data",JSON.stringify(t))),showLoader(!1),this.is_loading=!1,playlist_page.initiated=!1,this.goBack()},hoverKindItem:function(e){var t=this.keys;t.focused_part="kind_selection",t.kind_selection=e,$(this.playlist_edit_doms).removeClass("active"),$(this.kind_doms).removeClass("active"),$(this.kind_doms[e]).addClass("active")},hoverPlaylistEditItem:function(e){var t=this.keys;t.focused_part="playlist_edit_selection",$(this.playlist_edit_doms).removeClass("active"),$(this.kind_doms).removeClass("active"),t.playlist_edit_selection=e,$(this.playlist_edit_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"kind_selection":0==e.kind_selection?this.playlist_type="general":this.playlist_type="xc",this.playListTypeChanged();break;case"playlist_edit_selection":e.playlist_edit_selection<4?($(this.playlist_edit_doms[e.playlist_edit_selection]).focus(),setSelectionRange(this.playlist_edit_doms[e.playlist_edit_selection])):4==e.playlist_edit_selection?this.savePlaylist():this.goBack()}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"kind_selection":t.kind_selection=0<e?1:0,this.hoverKindItem(t.kind_selection);break;case"playlist_edit_selection":4<=t.playlist_edit_selection&&(t.playlist_edit_selection=0<e?5:4,this.hoverPlaylistEditItem(t.playlist_edit_selection))}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"kind_selection":0<e&&this.hoverPlaylistEditItem(0);break;case"playlist_edit_selection":if(4<=t.playlist_edit_selection){if(!(e<0))return;"xc"===this.playlist_type?t.playlist_edit_selection=3:t.playlist_edit_selection=1}else t.playlist_edit_selection+=e,"general"===this.playlist_type&&2==t.playlist_edit_selection&&0<e&&(t.playlist_edit_selection=4);t.playlist_edit_selection<0?this.hoverKindItem(t.kind_selection):this.hoverPlaylistEditItem(t.playlist_edit_selection)}},goBack:function(){$("#playlist-edit-page").addClass("hide"),playlist_page.init()},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},SrtParser={seperator:",",init:function(){this.seperator=","},timestampToSeconds:function(e){var e=e.split(","),t=e[0],e=parseInt(e[1]),t=t.split(":").map(function(e){return parseInt(e)}),i=t[0];return.001*e+t[2]+60*t[1]+3600*i},correctFormat:function(e){var e=e.replace(".",",").split(","),t=e[0],e=this.fixed_str_digit(3,e[1],!0),t=t.split(":"),i=t[0],s=t[1],t=t[2];return this.fixed_str_digit(2,i,!1)+":"+this.fixed_str_digit(2,s,!1)+":"+this.fixed_str_digit(2,t,!1)+","+e},fixed_str_digit:function(e,t,i){return t.length==e?t:e<t.length?t.slice(0,e):t.length<e?i?t.padEnd(e,"0"):t.padStart(e,"0"):void 0},tryComma:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g);return e.shift(),e},tryDot:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g);return e.shift(),this.seperator=".",e},fromSrt:function(e){if(""==e.trim())return[];for(var t=(new Date).getTime(),i=this.tryComma(e),s=(0==i.length&&(i=this.tryDot(e)),[]),a=0;a<i.length;a+=4){var o=this.correctFormat(i[a+1].trim()),n=this.correctFormat(i[a+2].trim()),o={id:i[a].trim(),startTime:o,startSeconds:this.timestampToSeconds(o),endTime:n,endSeconds:this.timestampToSeconds(n),text:i[a+3].trim()};s.push(o)}e=(new Date).getTime();return console.log(e-t,"ms take to parse"),s}},SrtOperation={current_srt_index:0,next_srt_time:0,srt:[],stopped:!1,subtitle_shown:!1,time_difference:0,init:function(e,t){this.time_difference=0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1;var i=[];if(e)try{SrtParser.init(),i=SrtParser.fromSrt(e)}catch(e){}0<(this.srt=i).length?(this.stopped=!1,this.current_srt_index=this.findIndex(t,0,i.length-1),console.log("here found srt index",this.current_srt_index,t,i),this.current_srt_index<0&&(this.current_srt_index=0),this.next_srt_time=0):this.stopped=!0},findIndex:function(e,t,i){var s,a;return 0==(e+=this.time_difference)?0:(s=this.srt,i<t?i:s[a=Math.floor((t+i)/2)].startSeconds<=e&&e<s[a].endTime?a:s[a].startSeconds>e?this.findIndex(e,t,a-1):this.findIndex(e,a+1,i))},timeChange:function(e){if(!this.stopped){e+=this.time_difference,.98<=Math.random()&&console.log("current_time=",e,media_player.videoObj.currentTime);var t=this.current_srt_index,i=this.srt[t];if(e>=i.startSeconds&&e<i.endSeconds)this.subtitle_shown||$("#"+media_player.parent_id).find(".subtitle-container").html(i.text);else if(e>i.endSeconds){t=this.srt[t+1];try{e<t.startSeconds?this.subtitle_shown&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1):t.endSeconds>e?($("#"+media_player.parent_id).find(".subtitle-container").html(t.text),this.subtitle_shown=!0,this.current_srt_index+=1):(console.log("here finding new srt index"),this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0))}catch(e){console.log("subtitle timer issue",e)}}else if(e<i.startSeconds)try{this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0)}catch(e){}}},stopOperation:function(){this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},setTimeDifference:function(e){this.time_difference=parseInt(e),$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},deStruct:function(){this.srt=[],this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html("")}},catchup_page={player:null,sorted_programmes:[],date_doms:[],programme_doms:[],current_programmes:[],stream_id:"",keys:{focused_part:"date_selection",date_selection:0,programme_selection:0},channel:null,is_loading:!1,prev_focus_dom:null,init:function(e,t){this.channel=e,this.stream_id=e.stream_id,current_route="catch-up",showLoader(!0),this.is_loading=!0,$("#vod-series-page").addClass("hide"),$("#epg-page").removeClass("hide"),$("#epg-title-logo").attr("src",e.stream_icon),$("#epg-channel-title").text(e.name),this.sorted_programmes=this.sortProgrammesByDate(t);var i="";this.sorted_programmes.map(function(e,t){i+='<div class="epg-date-item-container bg-focus1"   onmouseenter="catchup_page.selectDate('+t+')"   onclick="catchup_page.handleMenuClick()">\n   <div class="epg-date-item-day">'+e.day_string+'</div>\n   <div class="epg-date-item-date">'+e.date_string+"</div>\n</div>"}),$("#epg-date-parts").html(i),this.date_doms=$(".epg-date-item-container"),this.keys.focused_part="date_selection",(this.keys.date_selection=0)<this.date_doms.length&&$(this.date_doms[0]).addClass("active"),this.selectDate(0),showLoader(this.is_loading=!1)},goBack:function(){var e=this.keys;switch(e.focused_part){case"programme_selection":this.selectDate(e.date_selection);break;case"date_selection":$("#epg-page").addClass("hide"),current_route="vod-series-page",$("#vod-series-page").removeClass("hide"),vod_series_page.hoverMovieItem(vod_series_page.menu_doms[vod_series_page.keys.menu_selection])}},sortProgrammesByDate:function(e){for(var t={},i=moment().format("Y-MM-DD HH:mm:ss"),s=0;s<e.length;s++){if(e[s].start>=i||e[s].stop>=i){console.log("here break",e[s].start,e[s].stop,i);break}var a,o,n=e[s].start.substr(0,10);t[n]?t[n].programmes.push(e[s]):(a=(o=moment(e[s].start)).format("dddd"),o=o.format("MMM D"),t[n]={day_string:a,date_string:o,programmes:[e[s]]})}var r=[];return Object.keys(t).map(function(e){r.push(t[e])}),r},selectDate:function(e){var a,t;this.keys;0<this.sorted_programmes.length&&(this.keys.focused_part="date_selection",this.keys.date_selection=e,a="",this.current_programmes=this.sorted_programmes[e].programmes,this.sorted_programmes[e].programmes.map(function(e,t){var i=e.start,i=i.substr(11),s='<img class="epg-clock-icon" src="'+HOST+'app_src_min/images/clock.png">';a+='<div class="epg-programme-item-container bg-focus1" data-can_play="1"                        onmouseenter="catchup_page.selectProgramme('+t+',false)"                        onclick="catchup_page.selectProgramme('+t+',true)"                    >                       <span class="epg-programme-time">'+i+"</span>"+s+'                       <span class="epg-programme-title">'+getAtob(e.title)+"</span>                    </div>"}),$("#epg-programmes-container").html(a),this.keys.programme_selection=0,this.programme_doms=$(".epg-programme-item-container"),$("#epg-channel-date").text(this.sorted_programmes[e].date_string),t="No Description","string"==typeof this.current_programmes[0].desc&&(t=getAtob(this.current_programmes[0].desc)),$("#epg-programme-desc").text(t),current_route="catch-up",$(this.prev_focus_dom).removeClass("active"),$(this.date_doms[e]).addClass("active"),this.prev_focus_dom=this.date_doms[e],moveScrollPosition($("#epg-date-parts"),this.date_doms[e],"vertical",!1))},selectProgramme:function(e,t){this.keys.focused_part="programme_selection",this.keys.programme_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.programme_doms[e]).addClass("active"),this.prev_focus_dom=this.programme_doms[e],current_route="catch-up";var i="";"string"==typeof this.current_programmes[e].desc&&(i=getAtob(this.current_programmes[e].desc)),$("#epg-programme-desc").text(i),moveScrollPosition($("#epg-programmes-container"),this.programme_doms[e],"vertical",!1),t&&this.playVideo()},playVideo:function(){var e=this.keys,e=this.programme_doms[e.programme_selection];0==$(e).data("can_play")?showToast("Sorry","No archive video available for this programme"):($("#epg-page").addClass("hide"),vod_series_player_page.init(this.channel,"epg","catch-up","",!0))},handleMenuClick:function(){"programme_selection"===this.keys.focused_part&&this.playVideo()},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"date_selection":t.date_selection+=e,t.date_selection<0?t.date_selection=0:(t.date_selection>=this.date_doms.length&&(t.date_selection=this.date_doms.length-1),this.selectDate(t.date_selection),t.programme_selection=0);break;case"programme_selection":t.programme_selection+=e,t.programme_selection<0?t.programme_selection=0:(t.programme_selection>=this.programme_doms.length&&(t.programme_selection=this.programme_doms.length-1),this.selectProgramme(t.programme_selection,!1))}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"date_selection":0<this.programme_doms.length&&this.selectProgramme(t.programme_selection,!1);break;case"programme_selection":this.selectDate(t.date_selection)}},HandleKey:function(e){if(this.is_loading){if(e.keyCode!=tvKey.RETURN)return;this.goBack(),showLoader(!1)}switch(e.keyCode){case tvKey.RIGHT:catchup_page.handleMenuLeftRight(1);break;case tvKey.LEFT:catchup_page.handleMenuLeftRight(-1);break;case tvKey.DOWN:catchup_page.handleMenusUpDown(1);break;case tvKey.UP:catchup_page.handleMenusUpDown(-1);break;case tvKey.ENTER:catchup_page.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},search_page={keys:{top_menu_selection:0,hor_keys:[0,0,0],v_selection:0,movie_selection:[],focused_part:""},prev_dom:null,is_loading:!1,filtered_movies:[],render_counts:[0,0,0],prev_keyword:"",search_timeout:null,prev_route:"",top_menu_doms:$(".search-page-top-menu"),movie_doms:[],render_count_increment:50,searching_for:[],parent_elements:[$("#filtered_channels_container")[0],$("#filtered_movies_container")[0],$("#filtered_series_container")[0]],init:function(e,t){switch(this.prev_route=e,$("#filtered_replay_container").html(""),$("#filtered_channels_container").html(""),$("#filtered_movies_container").html(""),$("#filtered_series_container").html(""),$(".search-page-stream-type-container.replay").hide(),$(".search-page-stream-type-container.live").hide(),$(".search-page-stream-type-container.vod").hide(),$(".search-page-stream-type-container.series").hide(),this.searching_for=t||"all",this.searching_for){case"vod":$(".search-page-stream-type-container.vod").show();break;case"series":$(".search-page-stream-type-container.series").show();break;case"live":$(".search-page-stream-type-container.live").show();break;case"replay":$(".search-page-stream-type-container.replay").show();break;default:$(".search-page-stream-type-container.live").show(),$(".search-page-stream-type-container.vod").show(),$(".search-page-stream-type-container.series").show()}this.filtered_movies=[],this.keys.hor_keys=[0,0,0],this.prev_keyword="",$("#search-page-input").val(""),$("#home-page").addClass("hide"),$("#channel-page").addClass("hide"),$("#search-page").show(),current_route="search-page",this.hoverTopMenu(0),this.handleMenuClick()},goBack:function(){clearTimeout(this.search_timeout),$("#search-page-input").blur(),$("#search-page").hide();var e="#"+this.prev_route;current_route="channel-page"==this.prev_route?($("#channel-page").removeClass("hide"),"channel-page"):($(e).removeClass("hide"),this.prev_route)},keywordChange:function(){clearTimeout(this.search_timeout);var n=this;this.search_timeout=setTimeout(function(){var e=n.prev_keyword,t=$("#search-page-input").val().toLowerCase();if(e!=t&&t){showLoader(!0),n.is_loading=!0;var i=VodModel.getCategories(!1,!1),s=SeriesModel.getCategories(!1,!1),a=LiveModel.getCategories(!1,!1),o=n.getReplayCategories();switch(n.filtered_movies=[],n.searching_for){case"vod":n.filtered_movies.push([]),n.filtered_movies.push(n.getFilteredMovies(i,t)),n.filtered_movies.push([]);break;case"series":n.filtered_movies.push([]),n.filtered_movies.push([]),n.filtered_movies.push(n.getFilteredMovies(s,t));break;case"live":n.filtered_movies.push(n.getFilteredMovies(a,t)),n.filtered_movies.push([]),n.filtered_movies.push([]),console.log("Filtered movies",n.filtered_movies);break;case"replay":n.filtered_movies.push(n.getFilteredMovies(o,t)),n.filtered_movies.push([]),n.filtered_movies.push([]);break;default:n.filtered_movies.push(n.getFilteredMovies(a,t)),n.filtered_movies.push(n.getFilteredMovies(i,t)),n.filtered_movies.push(n.getFilteredMovies(s,t))}switch(n.render_counts=[0,0,0],n.keys.hor_keys=[0,0,0],n.movie_doms=[[],[],[]],$(n.parent_elements[0]).html(""),$(n.parent_elements[1]).html(""),$(n.parent_elements[2]).html(""),n.searching_for){case"vod":n.renderFilteredMovies(1,!1,!1);break;case"series":n.renderFilteredMovies(2,!1,!1);break;case"live":n.renderFilteredMovies(0,!1,!1);break;case"replay":n.renderFilteredMovies(0,!1,!1,!0);break;default:n.renderFilteredMovies(0,!1,!0),n.renderFilteredMovies(1,!1,!0),n.renderFilteredMovies(2,!1,!0)}n.prev_keyword=t;e=2e3;n.filtered_movies[0].length+n.filtered_movies[1].length+n.filtered_movies[2].length<50&&(e=500),setTimeout(function(){showLoader(!1),n.is_loading=!1},e)}},400)},getReplayCategories:function(){return LiveModel.getCategories(!1,!1).map(function(e){var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));return e.movies=t,e}).filter(function(e){return 0<e.movies.length})},getFilteredMovies:function(e,t){var i=[];return e.map(function(e){checkForAdult(e,"category",[])||"resume"===e.category_id||(e=e.movies.filter(function(e){return e.name.toLowerCase().includes(t)}),i=i.concat(e))}),i},renderFilteredMovies:function(s,e,t,i){var a,o,n,r,l,c,d,h,_=this.parent_elements[s],u=((i=i||!1)&&(_=$("#filtered_replay_container")[0]),this.render_counts[s]);0==this.filtered_movies[s].length?$(_).append("<p class='search-no-results'>No results found!</p>"):u>=this.filtered_movies[s].length||(i=this.render_count_increment,e&&(showLoader(!0),this.is_loading=!0),a=this,o="",n=0==s?"channel":"vod",r="stream_icon",c="stream_id",d=HOST+"app_src_min/images/default_movie.png",0==s&&(d=HOST+"app_src_min/images/logo.png",l=LiveModel.favourite_ids),1==s&&(VodModel.saved_video_times,l=VodModel.favourite_ids),2==s&&(r="cover",l=SeriesModel.favourite_ids,c="series_id"),h=this.filtered_movies[s].slice(u,u+i),t?$(".search-page-stream-items-container").addClass("one-line"):$(".search-page-stream-items-container").removeClass("one-line"),t=1500,h.length<10&&(t=0),h.map(function(e,t){var i=l.includes(e[c]);o+='<div class="filtered-movie-container '+n+'">                      <div class="filtered-movie-wrapper"                          onmouseenter="search_page.hoverMovie('+(u+t)+","+s+')"                          onclick="search_page.handleMenuClick()"                       >'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'<div class="filtered-movie-img-wrapper">                              <img src="'+e[r]+'" onerror="this.src=\''+d+'\'">                          </div>                          <div class="filtered-movie-title-wrapper">                              <div class="filtered-movie-title">'+e.name+"</div>                           </div>                       </div>                  </div>"}),this.render_counts[s]+=i,$(_).append(o),this.movie_doms[s]=$(_).find(".filtered-movie-wrapper"),e&&setTimeout(function(){showLoader(!1),a.is_loading=!1},t))},hoverTopMenu:function(e){var t;key_focused||((t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],t=this.parent_elements[0],moveScrollPosition($("#search-page-contents-wrapper"),$(t).closest(".search-page-stream-type-container"),"vertical",!1))},hoverMovie:function(e,t){if(!key_focused){var i=this.keys,i=(i.hor_keys[t]=e,i.v_selection=t,i.focused_part="movie_selection",this.parent_elements[t]);if($(this.prev_dom).removeClass("active"),$(this.movie_doms[t][e]).addClass("active"),this.prev_dom=this.movie_doms[t][e],moveScrollPosition(i,$(this.prev_dom).closest(".filtered-movie-container"),"horizontal",!1),"all"==this.searching_for)moveScrollPosition($("#search-page-contents-wrapper"),$(i).closest(".search-page-stream-type-container"),"vertical",!1);else{var s="";switch(this.searching_for){case"replay":s="replay";break;case"live":s="channels";break;case"vod":s="movies";break;case"series":s="series"}moveScrollPosition($("#filtered_"+s+"_container"),this.movie_doms[t][e],"vertical",!1)}}},handleMenuLeftRight:function(e){var t=this.keys;if(!key_focused)switch(t.focused_part){case"top_menu_selection":break;case"movie_selection":var i=t.hor_keys[t.v_selection]+e;(i=i<0?0:i)>=this.movie_doms[t.v_selection].length&&(i=this.movie_doms[t.v_selection].length-1),this.hoverMovie(i,t.v_selection),0<e&&i>=this.movie_doms[t.v_selection].length-9&&this.renderFilteredMovies(t.v_selection,!0)}},handleMenuUpDown:function(e){var t,i=this.keys;switch(i.focused_part){case"top_menu_selection":if(!key_focused&&0<e){if("vod"==this.searching_for)t=1;else if("series"==this.searching_for)t=2;else if("live"==this.searching_for)t=0;else for(var s=0;s<this.filtered_movies.length;s++)if(0<this.filtered_movies[s].length){t=s;break}null!=t&&0<this.filtered_movies[t].length&&(i.v_selection=t,this.hoverMovie(i.hor_keys[t],t));for(s=0;s<this.filtered_movies.length;s++)if(0<this.filtered_movies[s].length){i.v_selection=s,this.hoverMovie(i.hor_keys[s],s);break}}break;case"movie_selection":if("all"==this.searching_for){var a=-1;if(0<e){if(2<=i.v_selection)return;for(s=i.v_selection+1;s<3;s++)if(0<this.filtered_movies[s].length){a=s;break}}else for(s=i.v_selection-1;0<=s;s--)if(0<this.filtered_movies[s].length){a=s;break}if(e<0&&(i.v_selection<=0||-1===a)||-1===a)return void this.hoverTopMenu(0);-1!==a&&this.hoverMovie(i.hor_keys[a],a)}else{a=-1;switch(this.searching_for){case"replay":case"live":a=0;break;case"vod":a=1;break;case"series":a=2}"live"==this.searching_for||"replay"==this.searching_for?i.hor_keys[a]+=6*e:i.hor_keys[a]+=8*e;var o=this.filtered_movies[a];if(i.hor_keys[a]>=o.length&&(i.hor_keys[a]=o.length-1),i.hor_keys[a]<0)return i.hor_keys[a]=0,void this.hoverTopMenu(0);-1!==a&&this.hoverMovie(i.hor_keys[a],a),0<e&&i.hor_keys[a]>=this.movie_doms[i.v_selection].length-9&&this.renderFilteredMovies(i.v_selection,!0)}}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"top_menu_selection":0==e.top_menu_selection&&(key_focused?$("#search-page-input").blur():($("#search-page-input").focus(),setSelectionRange($("#search-page-input"))));break;case"movie_selection":var t=this.filtered_movies[e.v_selection][e.hor_keys[e.v_selection]];switch($("#search-page").hide(),e.v_selection){case 0:"replay"==this.searching_for?vod_series_page.init("replay",t):channel_page.init("search-page",t);break;case 1:current_movie=this.filtered_movies[1][e.hor_keys[1]],vod_summary_page.init("search-page");break;case 2:current_series=this.filtered_movies[2][e.hor_keys[2]],series_summary_page.init("search-page")}}},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},clear_recent_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-recent-modal button"),prev_route:"",movie:null,movie_kind:"",init:function(e,t){this.movie_kind=t,this.prev_route=e,current_route="clear_recent_page",this.hoverMenuItem(0),$("#clear-recent-modal").modal("show")},goBack:function(){$("#clear-recent-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t=this.keys;if("vod"==e)VodModel.removeAllWatchList(),showToast("Successful","Movies Watch lists cleared successfully!");else if("series"==e)SeriesModel.removeAllWatchList(),showToast("Successful","Series Watch lists cleared successfully!");else if("menu_selection"===t.focused_part)switch(this.keys.menu_selection){case 1:("vod"===this.movie_kind?VodModel:SeriesModel).removeAllWatchList(),this.goBack();break;case 0:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_cache_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-cache-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="clear_cache_page",this.hoverMenuItem(0),$("#clear-cache-modal").modal("show")},goBack:function(){$("#clear-cache-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){window.location.reload()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t;e=e||!1,"menu_selection"===this.keys.focused_part&&(1==this.keys.menu_selection||e?(current_route="login-page",$("#clear-cache-modal").modal("hide"),t=[],Object.keys(localStorage).map(function(e){e.includes(storage_id)&&t.push(e)}),t.map(function(e){localStorage.removeItem(e)}),settings.resetDefaultValues(),this.reloadPage()):this.goBack())},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},login_page={is_loading:!1,keys:{focused_part:"main_area",main_area:0},login_succeed:!1,tried_panel_indexes:[],tried_agent_url_indices:[],showLoadImage:function(){$("#login-container").addClass("hide"),$("#loading-page").removeClass("hide")},fetchPlaylistInformation:function(i){var s,e,a,t,o,n;api_succeed=!0,this.is_loading||(o=i.domains,main_domain=i.main_domain,$(".main-domain").text(main_domain),panel_urls=[],o&&o.map(function(e){panel_urls.push("https://"+e+"/api")}),(s=this).is_loading=!0,$("#mac-address").text(mac_address),$(".mac-address").text(mac_address),e=(o=pickPanelUrl(this.tried_panel_indexes))[1],a=o[0],o=newEncryptRequest({mac_address:mac_address,app_type:platform,version:"samsung"===platform?samsung_version:"lg"===platform?lg_version:vidaa_version,force_xc:!0},t="3R%6R2FJ*b5)Vmt84$^eWf0r@r?szdw*fwf*ewd&VXmne$%"),console.log("encrypted_data",o),n=(n=CryptoJS.HmacSHA256(o,"sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB").toString(CryptoJS.enc.Base64).trim()).trim(),console.log("signature",n),$.ajax({method:"post",url:e+"/Mxcvfghytrhjsjj/tv/playlist_information",data:{data:o,signature:n},timeout:15e3,success:function(e){s.tried_panel_indexes=[];e=newDecryptResponse(e.data,t);ip_address=e.ip_address,console.log("here playlist information api decrypted response",e),localStorage.setItem(storage_id+"api_data",JSON.stringify(e)),e.themes&&(themes=e.themes),s.syncWithServer(e),handleWeatherFetchAndStore()},error:function(e){var t;s.is_loading=!1,s.tried_panel_indexes.push(a),s.tried_panel_indexes.length<panel_urls.length?s.fetchPlaylistInformation(i):(t=localStorage.getItem(storage_id+"api_data"),saveData("api_succeed",!1),t?(t=JSON.parse(t),s.syncWithServer(t)):(console.log("Api request failed",e),showToast("Sorry","Api not working")))}}))},fetchDomains:function(){var i,e,s,t;this.is_loading||((i=this).is_loading=!0,e=(t=pickAgentUrl(this.tried_agent_url_indices))[1],s=t[0],t=encryptRequest({mac_address:mac_address,app_type:platform,version:"samsung"===platform?samsung_version:lg_version}),$.ajax({method:"post",url:e+"/playlist_info",data:{data:t},timeout:15e3,success:function(e){i.tried_agent_url_indices=[];var t=JSON.stringify({domains:["bobapi.ibo-dev.com","bobapp.ibo-dev.com","api.bobplayers.com","bobplayer.com","bobplayers.com"],main_domain:"bobplayer.com"}),t=JSON.parse(t);localStorage.setItem(storage_id+"domain_lists",JSON.stringify(t)),console.log("here agent server api decrypted response",t),i.is_loading=!1,i.fetchPlaylistInformation(t)},error:function(e){var t;i.is_loading=!1,i.tried_agent_url_indices.push(s),i.tried_agent_url_indices.length<agent_urls.length?i.fetchDomains():(t=localStorage.getItem(storage_id+"domain_lists"))?(t=JSON.parse(t),i.fetchPlaylistInformation(t)):(t=JSON.stringify({domains:["bobapi.ibo-dev.com","bobapp.ibo-dev.com","api.bobplayers.com","bobplayer.com","bobplayers.com"],main_domain:"bobplayer.com"}),t=JSON.parse(t),i.fetchPlaylistInformation(t),console.log("Api request failed, falling back to static domain list"))}}))},fetchPlaylistList:function(){var c;return this.is_loading?Promise.reject("Already loading"):((c=this).is_loading=!0,new Promise(function(r,l){!function t(i){null==typeof i&&(i=0);var e=pickPanelUrl(c.tried_panel_indexes),s=e[1],a=e[0],o="3R%6R2FJ*b5)Vmt84$^eWf0r@r?szdw*fwf*ewd&VXmne$%",e=newEncryptRequest({mac_address:mac_address,app_type:platform,version:"samsung"===platform?samsung_version:lg_version},o),n=(n=CryptoJS.HmacSHA256(e,"sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB").toString(CryptoJS.enc.Base64).trim()).trim();console.log("signature",n),$.ajax({method:"post",url:s+"/Mxcvfghytrhjsjj/tv/playlist_information",data:{data:e,signature:n},timeout:15e3,success:function(e){c.tried_panel_indexes=[],c.is_loading=!1,e=newDecryptResponse(e.data,o),console.log("Playlist list api decrypted response",e),playlist_urls=e.urls,r(e.urls||[])},error:function(e){c.tried_panel_indexes.push(a),c.tried_panel_indexes.length<panel_urls.length?t(i+1):(c.is_loading=!1,console.log("Playlist list api request failed",e),l("Failed to fetch playlist list after "+(i+1)+" attempts"))}})}()}))},loadApp:function(e){var t=moment().format("Y-MM-DD"),i=($("#loading-page").addClass("hide"),1<e.urls.length&&"demo"===e.urls[0].id&&e.urls.splice(0,1),e.urls);console.log("Playlist URLs",i),i.map(function(e,t){var i,s,a,o,n;e.url.includes("playlist")&&(i=(s=e.url.match(/(.*?)\/playlist\/(.*?)\/(.*?)\/(.*?)(?:\/(.*?))?\/?$/))[1],a=s[3],o=s[4],n=s[5],e.username=s=s[2],e.password=a,e.playlist_type="xc",e.url=i,e.origin_type="xc",e.origin_url=i+"/get.php?username="+s+"&password="+a+"&type="+o+"&output="+n)}),saveData("playlist_urls",i),saveData("notification",e.notification),$(".device-key").text(e.device_key),console.log("Data",e),e.parent_pin&&(parent_account_password=e.parent_pin,localStorage.setItem(storage_id+"parent_account_password",parent_account_password)),saveData("languages",e.languages),saveData("device_key",e.device_key),saveData("expire_date",e.expire_date),e.tmdb_api_key&&(tmdb_api_key=e.tmdb_api_key),!api_succeed&&e.expire_date<t&&saveData("expire_date","2438-01-02"),saveData("is_trial",e.is_trial),this.is_loading=!1,""!==settings.bg_img_url?changeBackgroundImage():void 0!==themes[0]&&(settings.saveSettings("bg_img_url",themes[0].url),changeBackgroundImage()),$(".expire-date").text(expire_date),e.mac_registered?e.expire_date<t?(saveData("mac_valid",!1),$("#login-note-1-1").text("Notice: Trial Period Expired!"),$("#login-note-1-1").css("color","#bf222f"),$("#login-note-1-2").text(""),$("#login-note-2-1").html("Thank you for choosing our app. If you have any questions or need assistance. please contact our support team."),$("#login-note-2-2").text(""),$("#login-note-3").text("Your trial period has ended. To continue enjoying uninterrupted access to our app, please follow the instructions below to purchase and activate yor license."),$("#last-login-instruction img").attr("src",HOST+"app_src_min/images/icons/instruction5.png"),$("#last-login-instruction span").text("Activate your device and subscribe with a variety of payment methods."),$("#login-button").removeClass("hide"),$("#login-container").removeClass("hide")):this.login():($("#login-note-1-1").text("Experience Entertainment, Redefinedss"),$("#login-note-1-2").text("Stream an extensive collection of movies, series, and live TV on any device, designed for your ultimate viewing pleasure. Elevate your experience with customizable playlists and secure parental controls."),$("#login-note-2-1").html('Trial period notice your complimentary trial ends in <span class="highlight">'+e.trial_days+" days.</span>"),$("#login-note-2-2").text("Thank you for choosing us to bring your entertainment to life."),$("#login-container").removeClass("hide"))},syncWithServer:function(r){var e,t,i,s,l,c,d=localStorage.getItem(storage_id+"local_data");d&&((d=JSON.parse(d)).playlist_urls&&0<d.playlist_urls.length||d.remove_ids&&0<d.remove_ids.length)?(e=(e=d.playlist_urls)||[],c=(c=d.remove_ids)||[],api_succeed?(t=(s=pickPanelUrl(this.tried_panel_indexes))[1],i=s[0],s=encryptRequest({mac_address:mac_address,app_type:platform,playlists:e,remove_ids:c}),l=this,$.ajax({method:"post",url:t+"/update_playlist",data:{data:s},success:function(e){l.tried_panel_indexes=[];for(var t=decryptResponse(e),i=[],s=[],a=0;a<t.length;a++)t[a].id!=t[a].origin_id&&(i.push(t[a].id),s.push(t[a].origin_id),settings.playlist_id===t[a].origin_id)&&settings.saveSettings("playlist_id",t[a].id,"");0<i.length&&changeLocalStorageKeysForPlaylist(s,i);for(var o=r.urls,a=o.length-1;0<=a;a--)for(var n=0;n<t.length;n++)if(o[a].id==t[n].id){o.splice(a,1);break}for(a=(o=o.concat(t)).length-1;0<=a;a--)c.includes(o[a].id)&&o.splice(a,1);r.urls=o,localStorage.setItem(storage_id+"api_data",JSON.stringify(r)),d.playlist_urls=[],d.remove_ids=[],localStorage.setItem(storage_id+"local_data",JSON.stringify(d)),l.loadApp(r)},error:function(){l.is_loading=!1,l.tried_panel_indexes.push(i),l.tried_panel_indexes.length<panel_urls.length?l.syncWithServer(r):l.syncFailedWithServer(r,d)}})):this.syncFailedWithServer(r,d)):this.loadApp(r)},syncFailedWithServer:function(e,t){for(var i=(i=t.playlist_urls)||[],s=(s=t.remove_ids)||[],a=e.urls,o=a.length-1;0<=o;o--)for(var n=0;n<i.length;n++)if(a[o].id==i[n].id){a.splice(o,1);break}for(o=(a=a.concat(i)).length-1;0<=o;o--)s.includes(a[o].id)&&a.splice(o,1);t.remove_ids=s=[],localStorage.setItem("local_data",JSON.stringify(t)),e.urls=a,this.loadApp(e)},getPlayListDetail:function(){var s=this;if(mac_address="52:54:00:12:34:57","samsung"===platform)try{tizen.systeminfo.getPropertyValue("ETHERNET_NETWORK",function(e){void 0!==e&&void 0!==e.macAddress&&(mac_address=e.macAddress),s.fetchDomains()})}catch(e){this.fetchDomains()}else if("lg"===platform)webOS.service.request("luna://com.webos.service.sm",{method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onSuccess:function(e){mac_address="";for(var t=e.idList[0].idValue.replace(/['-]+/g,""),i=0;i<=5;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":");s.fetchDomains()},onFailure:function(e){s.fetchDomains()}});else if("vidaa"===platform)try{if("function"==typeof Hisense_GetDeviceID){var e=Hisense_GetDeviceID();if(/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/i.test(e))mac_address=e;else{mac_address="";var t=e.slice(-12);try{for(var i=0;i<6;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":")}catch(e){}}console.log("VIDAA MAC Address: "+mac_address)}s.fetchDomains()}catch(e){s.fetchDomains()}else"windows"===platform&&console.log("Windows test mac address",mac_address),s.fetchDomains()},login:function(){if(checkDevicePerformance(),mac_valid){for(var e=settings.playlist_id,t=0;t<playlist_urls.length;t++)if(playlist_urls[t].id==e)return settings.saveSettings("playlist",playlist_urls[t],"array"),void this.proceed_login();settings.saveSettings("playlist_id",playlist_urls[0].id,""),settings.saveSettings("playlist",playlist_urls[0],"array"),this.proceed_login()}else window.location.reload()},goToPlaylistPageWithError:function(){console.log("Playlist Error"),this.is_loading=!1,LiveModel.insertMoviesToCategories([]),VodModel.insertMoviesToCategories([]),SeriesModel.insertMoviesToCategories([]),$("#loading-page").addClass("hide"),$("#playlist-error").show(),home_page.init(),home_page.hoverControlsMenu(2),home_page.handleMenuClick(),$("#home-expire-date").text("Unknown"),$(".playlist-will-expire-in").text("Unknown")},convertToGeneralM3u:function(){console.log("Converting to general M3U"),this.is_loading=!1,settings.playlist.playlist_type="general",settings.playlist.url=settings.playlist.origin_url,this.proceed_login()},proceed_login:function(){var i,t,e,s,a;this.is_loading||($("#playlist-error").hide(),LiveModel.init(),VodModel.init(),SeriesModel.init(),(i=this).showLoadImage(),e=(t=settings.playlist).playlist_type,api_host_url=settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url,storageMoviesInfo.host_url!=api_host_url&&clearCachedMoviesInfo(),this.is_loading=!0,"xc"===e?(console.log("XC Playlist"),user_name=t.username,password=t.password,a=(s=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=").replace("&action=",""),$.ajax({method:"get",url:a,success:function(e){var t;void 0!==e.server_info&&calculateTimeDifference(e.server_info.time_now,e.server_info.timestamp_now),void 0!==e.user_info&&(0==e.user_info.auth||void 0!==e.user_info.status&&("Expired"===e.user_info.status||"Banned"===e.user_info.status||"Disabled"===e.user_info.status)?(i.is_loading=!1,i.goToPlaylistPageWithError(),e.user_info.exp_date&&(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD"))))):(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD"))),$.when($.ajax({method:"get",url:s+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),$.ajax({method:"get",url:s+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),$.ajax({method:"get",url:s+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),$.ajax({method:"get",url:s+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),$.ajax({method:"get",url:s+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),$.ajax({method:"get",url:s+"get_series",success:function(e){SeriesModel.setMovies(e)}})).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),i.is_loading=!1,home_page.init()}catch(e){i.convertToGeneralM3u()}}).fail(function(){i.convertToGeneralM3u()}))),playlist_status=e.user_info.status||"Unknown"},error:function(e){"general"===t.origin_type?i.convertToGeneralM3u():i.goToPlaylistPageWithError()},timeout:15e3})):"general"===e?(console.log("General Playlist"),api_host_url=settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url,$.ajax({method:"get",url:api_host_url,success:function(e){parseM3uResponse("general",e),$("#loading-page").addClass("hide"),home_page.init(),i.is_loading=!1},error:function(e){i.goToPlaylistPageWithError()}})):(api_host_url=settings.playlist.url,$.ajax({method:"get",url:api_host_url,timeout:24e4,success:function(e){parseM3uResponse("type1",e),$("#loading-page").addClass("hide"),home_page.init(),i.is_loading=!1,$(".current-playlist-expire-date").text("Unlimited")},error:function(e){i.goToPlaylistPageWithError()}})))},handleMenuClick:function(){var e=this.keys;"main_area"===e.focused_part&&(e=[$("#login-button")][e.main_area],$(e).trigger("click"))},handleMenuUpDown:function(e){var t=this.keys;"main_area"===t.focused_part&&(t.main_area+=e,(e=[$("#login-button")]).map(function(e){$(e).removeClass("active")}),t.main_area<0&&(t.main_area=e.length-1),t.main_area>=e.length&&(t.main_area=0),$(e[t.main_area]).addClass("active"))},handleMenuLeftRight:function(e){},HandleKey:function(e){switch(e.keyCode){case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:"main_area"===this.keys.focused_part&&turn_off_page.init(current_route)}}},temps=[{name:"Afar",iso6392B:"aar",iso6391:"aa"},{name:"Abkhazian",iso6392B:"abk",iso6391:"ab"},{name:"Achinese",iso6392B:"ace"},{name:"Acoli",iso6392B:"ach"},{name:"Adangme",iso6392B:"ada"},{name:"Adyghe; Adygei",iso6392B:"ady"},{name:"Afro-Asiatic languages",iso6392B:"afa"},{name:"Afrihili",iso6392B:"afh"},{name:"Afrikaans",iso6392B:"afr",iso6391:"af"},{name:"Ainu",iso6392B:"ain"},{name:"Akan",iso6392B:"aka",iso6391:"ak"},{name:"Akkadian",iso6392B:"akk"},{name:"Albanian",iso6392B:"alb",iso6392T:"sqi",iso6391:"sq"},{name:"Aleut",iso6392B:"ale"},{name:"Algonquian languages",iso6392B:"alg"},{name:"Southern Altai",iso6392B:"alt"},{name:"Amharic",iso6392B:"amh",iso6391:"am"},{name:"English, Old (ca.450-1100)",iso6392B:"ang"},{name:"Angika",iso6392B:"anp"},{name:"Apache languages",iso6392B:"apa"},{name:"Arabic",iso6392B:"ara",iso6391:"ar"},{name:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",iso6392B:"arc"},{name:"Aragonese",iso6392B:"arg",iso6391:"an"},{name:"Armenian",iso6392B:"arm",iso6392T:"hye",iso6391:"hy"},{name:"Mapudungun; Mapuche",iso6392B:"arn"},{name:"Arapaho",iso6392B:"arp"},{name:"Artificial languages",iso6392B:"art"},{name:"Arawak",iso6392B:"arw"},{name:"Assamese",iso6392B:"asm",iso6391:"as"},{name:"Asturian; Bable; Leonese; Asturleonese",iso6392B:"ast"},{name:"Athapascan languages",iso6392B:"ath"},{name:"Australian languages",iso6392B:"aus"},{name:"Avaric",iso6392B:"ava",iso6391:"av"},{name:"Avestan",iso6392B:"ave",iso6391:"ae"},{name:"Awadhi",iso6392B:"awa"},{name:"Aymara",iso6392B:"aym",iso6391:"ay"},{name:"Azerbaijani",iso6392B:"aze",iso6391:"az"},{name:"Banda languages",iso6392B:"bad"},{name:"Bamileke languages",iso6392B:"bai"},{name:"Bashkir",iso6392B:"bak",iso6391:"ba"},{name:"Baluchi",iso6392B:"bal"},{name:"Bambara",iso6392B:"bam",iso6391:"bm"},{name:"Balinese",iso6392B:"ban"},{name:"Basque",iso6392B:"baq",iso6392T:"eus",iso6391:"eu"},{name:"Basa",iso6392B:"bas"},{name:"Baltic languages",iso6392B:"bat"},{name:"Beja; Bedawiyet",iso6392B:"bej"},{name:"Belarusian",iso6392B:"bel",iso6391:"be"},{name:"Bemba",iso6392B:"bem"},{name:"Bengali",iso6392B:"ben",iso6391:"bn"},{name:"Berber languages",iso6392B:"ber"},{name:"Bhojpuri",iso6392B:"bho"},{name:"Bihari languages",iso6392B:"bih",iso6391:"bh"},{name:"Bikol",iso6392B:"bik"},{name:"Bini; Edo",iso6392B:"bin"},{name:"Bislama",iso6392B:"bis",iso6391:"bi"},{name:"Siksika",iso6392B:"bla"},{name:"Bantu languages",iso6392B:"bnt"},{name:"Bosnian",iso6392B:"bos",iso6391:"bs"},{name:"Braj",iso6392B:"bra"},{name:"Breton",iso6392B:"bre",iso6391:"br"},{name:"Batak languages",iso6392B:"btk"},{name:"Buriat",iso6392B:"bua"},{name:"Buginese",iso6392B:"bug"},{name:"Bulgarian",iso6392B:"bul",iso6391:"bg"},{name:"Burmese",iso6392B:"bur",iso6392T:"mya",iso6391:"my"},{name:"Blin; Bilin",iso6392B:"byn"},{name:"Caddo",iso6392B:"cad"},{name:"Central American Indian languages",iso6392B:"cai"},{name:"Galibi Carib",iso6392B:"car"},{name:"Catalan; Valencian",iso6392B:"cat",iso6391:"ca"},{name:"Caucasian languages",iso6392B:"cau"},{name:"Cebuano",iso6392B:"ceb"},{name:"Celtic languages",iso6392B:"cel"},{name:"Chamorro",iso6392B:"cha",iso6391:"ch"},{name:"Chibcha",iso6392B:"chb"},{name:"Chechen",iso6392B:"che",iso6391:"ce"},{name:"Chagatai",iso6392B:"chg"},{name:"Chinese",iso6392B:"chi",iso6392T:"zho",iso6391:"zh"},{name:"Chuukese",iso6392B:"chk"},{name:"Mari",iso6392B:"chm"},{name:"Chinook jargon",iso6392B:"chn"},{name:"Choctaw",iso6392B:"cho"},{name:"Chipewyan; Dene Suline",iso6392B:"chp"},{name:"Cherokee",iso6392B:"chr"},{name:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",iso6392B:"chu",iso6391:"cu"},{name:"Chuvash",iso6392B:"chv",iso6391:"cv"},{name:"Cheyenne",iso6392B:"chy"},{name:"Chamic languages",iso6392B:"cmc"},{name:"Montenegrin",iso6392B:"cnr"},{name:"Coptic",iso6392B:"cop"},{name:"Cornish",iso6392B:"cor",iso6391:"kw"},{name:"Corsican",iso6392B:"cos",iso6391:"co"},{name:"Creoles and pidgins, English based",iso6392B:"cpe"},{name:"Creoles and pidgins, French-based",iso6392B:"cpf"},{name:"Creoles and pidgins, Portuguese-based",iso6392B:"cpp"},{name:"Cree",iso6392B:"cre",iso6391:"cr"},{name:"Crimean Tatar; Crimean Turkish",iso6392B:"crh"},{name:"Creoles and pidgins",iso6392B:"crp"},{name:"Kashubian",iso6392B:"csb"},{name:"Cushitic languages",iso6392B:"cus"},{name:"Czech",iso6392B:"cze",iso6392T:"ces",iso6391:"cs"},{name:"Dakota",iso6392B:"dak"},{name:"Danish",iso6392B:"dan",iso6391:"da"},{name:"Dargwa",iso6392B:"dar"},{name:"Land Dayak languages",iso6392B:"day"},{name:"Delaware",iso6392B:"del"},{name:"Slave (Athapascan)",iso6392B:"den"},{name:"Dogrib",iso6392B:"dgr"},{name:"Dinka",iso6392B:"din"},{name:"Divehi; Dhivehi; Maldivian",iso6392B:"div",iso6391:"dv"},{name:"Dogri",iso6392B:"doi"},{name:"Dravidian languages",iso6392B:"dra"},{name:"Lower Sorbian",iso6392B:"dsb"},{name:"Duala",iso6392B:"dua"},{name:"Dutch, Middle (ca.1050-1350)",iso6392B:"dum"},{name:"Dutch; Flemish",iso6392B:"dut",iso6392T:"nld",iso6391:"nl"},{name:"Dyula",iso6392B:"dyu"},{name:"Dzongkha",iso6392B:"dzo",iso6391:"dz"},{name:"Efik",iso6392B:"efi"},{name:"Egyptian (Ancient)",iso6392B:"egy"},{name:"Ekajuk",iso6392B:"eka"},{name:"Elamite",iso6392B:"elx"},{name:"English",iso6392B:"eng",iso6391:"en"},{name:"English, Middle (1100-1500)",iso6392B:"enm"},{name:"Esperanto",iso6392B:"epo",iso6391:"eo"},{name:"Estonian",iso6392B:"est",iso6391:"et"},{name:"Ewe",iso6392B:"ewe",iso6391:"ee"},{name:"Ewondo",iso6392B:"ewo"},{name:"Fang",iso6392B:"fan"},{name:"Faroese",iso6392B:"fao",iso6391:"fo"},{name:"Fanti",iso6392B:"fat"},{name:"Fijian",iso6392B:"fij",iso6391:"fj"},{name:"Filipino; Pilipino",iso6392B:"fil"},{name:"Finnish",iso6392B:"fin",iso6391:"fi"},{name:"Finno-Ugrian languages",iso6392B:"fiu"},{name:"Fon",iso6392B:"fon"},{name:"French",iso6392B:"fre",iso6392T:"fra",iso6391:"fr"},{name:"French, Middle (ca.1400-1600)",iso6392B:"frm"},{name:"French, Old (842-ca.1400)",iso6392B:"fro"},{name:"Northern Frisian",iso6392B:"frr"},{name:"Eastern Frisian",iso6392B:"frs"},{name:"Western Frisian",iso6392B:"fry",iso6391:"fy"},{name:"Fulah",iso6392B:"ful",iso6391:"ff"},{name:"Friulian",iso6392B:"fur"},{name:"Ga",iso6392B:"gaa"},{name:"Gayo",iso6392B:"gay"},{name:"Gbaya",iso6392B:"gba"},{name:"Germanic languages",iso6392B:"gem"},{name:"Georgian",iso6392B:"geo",iso6392T:"kat",iso6391:"ka"},{name:"German",iso6392B:"ger",iso6392T:"deu",iso6391:"de"},{name:"Geez",iso6392B:"gez"},{name:"Gilbertese",iso6392B:"gil"},{name:"Gaelic; Scottish Gaelic",iso6392B:"gla",iso6391:"gd"},{name:"Irish",iso6392B:"gle",iso6391:"ga"},{name:"Galician",iso6392B:"glg",iso6391:"gl"},{name:"Manx",iso6392B:"glv",iso6391:"gv"},{name:"German, Middle High (ca.1050-1500)",iso6392B:"gmh"},{name:"German, Old High (ca.750-1050)",iso6392B:"goh"},{name:"Gondi",iso6392B:"gon"},{name:"Gorontalo",iso6392B:"gor"},{name:"Gothic",iso6392B:"got"},{name:"Grebo",iso6392B:"grb"},{name:"Greek, Ancient (to 1453)",iso6392B:"grc"},{name:"Greek, Modern (1453-)",iso6392B:"gre",iso6392T:"ell",iso6391:"el"},{name:"Guarani",iso6392B:"grn",iso6391:"gn"},{name:"Swiss German; Alemannic; Alsatian",iso6392B:"gsw"},{name:"Gujarati",iso6392B:"guj",iso6391:"gu"},{name:"Gwich'in",iso6392B:"gwi"},{name:"Haida",iso6392B:"hai"},{name:"Haitian; Haitian Creole",iso6392B:"hat",iso6391:"ht"},{name:"Hausa",iso6392B:"hau",iso6391:"ha"},{name:"Hawaiian",iso6392B:"haw"},{name:"Hebrew",iso6392B:"heb",iso6391:"he"},{name:"Herero",iso6392B:"her",iso6391:"hz"},{name:"Hiligaynon",iso6392B:"hil"},{name:"Himachali languages; Western Pahari languages",iso6392B:"him"},{name:"Hindi",iso6392B:"hin",iso6391:"hi"},{name:"Hittite",iso6392B:"hit"},{name:"Hmong; Mong",iso6392B:"hmn"},{name:"Hiri Motu",iso6392B:"hmo",iso6391:"ho"},{name:"Croatian",iso6392B:"hrv",iso6391:"hr"},{name:"Upper Sorbian",iso6392B:"hsb"},{name:"Hungarian",iso6392B:"hun",iso6391:"hu"},{name:"Hupa",iso6392B:"hup"},{name:"Iban",iso6392B:"iba"},{name:"Igbo",iso6392B:"ibo",iso6391:"ig"},{name:"Icelandic",iso6392B:"ice",iso6392T:"isl",iso6391:"is"},{name:"Ido",iso6392B:"ido",iso6391:"io"},{name:"Sichuan Yi; Nuosu",iso6392B:"iii",iso6391:"ii"},{name:"Ijo languages",iso6392B:"ijo"},{name:"Inuktitut",iso6392B:"iku",iso6391:"iu"},{name:"Interlingue; Occidental",iso6392B:"ile",iso6391:"ie"},{name:"Iloko",iso6392B:"ilo"},{name:"Interlingua (International Auxiliary Language Association)",iso6392B:"ina",iso6391:"ia"},{name:"Indic languages",iso6392B:"inc"},{name:"Indonesian",iso6392B:"ind",iso6391:"id"},{name:"Indo-European languages",iso6392B:"ine"},{name:"Ingush",iso6392B:"inh"},{name:"Inupiaq",iso6392B:"ipk",iso6391:"ik"},{name:"Iranian languages",iso6392B:"ira"},{name:"Iroquoian languages",iso6392B:"iro"},{name:"Italian",iso6392B:"ita",iso6391:"it"},{name:"Javanese",iso6392B:"jav",iso6391:"jv"},{name:"Lojban",iso6392B:"jbo"},{name:"Japanese",iso6392B:"jpn",iso6391:"ja"},{name:"Judeo-Persian",iso6392B:"jpr"},{name:"Judeo-Arabic",iso6392B:"jrb"},{name:"Kara-Kalpak",iso6392B:"kaa"},{name:"Kabyle",iso6392B:"kab"},{name:"Kachin; Jingpho",iso6392B:"kac"},{name:"Kalaallisut; Greenlandic",iso6392B:"kal",iso6391:"kl"},{name:"Kamba",iso6392B:"kam"},{name:"Kannada",iso6392B:"kan",iso6391:"kn"},{name:"Karen languages",iso6392B:"kar"},{name:"Kashmiri",iso6392B:"kas",iso6391:"ks"},{name:"Kanuri",iso6392B:"kau",iso6391:"kr"},{name:"Kawi",iso6392B:"kaw"},{name:"Kazakh",iso6392B:"kaz",iso6391:"kk"},{name:"Kabardian",iso6392B:"kbd"},{name:"Khasi",iso6392B:"kha"},{name:"Khoisan languages",iso6392B:"khi"},{name:"Central Khmer",iso6392B:"khm",iso6391:"km"},{name:"Khotanese; Sakan",iso6392B:"kho"},{name:"Kikuyu; Gikuyu",iso6392B:"kik",iso6391:"ki"},{name:"Kinyarwanda",iso6392B:"kin",iso6391:"rw"},{name:"Kirghiz; Kyrgyz",iso6392B:"kir",iso6391:"ky"},{name:"Kimbundu",iso6392B:"kmb"},{name:"Konkani",iso6392B:"kok"},{name:"Komi",iso6392B:"kom",iso6391:"kv"},{name:"Kongo",iso6392B:"kon",iso6391:"kg"},{name:"Korean",iso6392B:"kor",iso6391:"ko"},{name:"Kosraean",iso6392B:"kos"},{name:"Kpelle",iso6392B:"kpe"},{name:"Karachay-Balkar",iso6392B:"krc"},{name:"Karelian",iso6392B:"krl"},{name:"Kru languages",iso6392B:"kro"},{name:"Kurukh",iso6392B:"kru"},{name:"Kuanyama; Kwanyama",iso6392B:"kua",iso6391:"kj"},{name:"Kumyk",iso6392B:"kum"},{name:"Kurdish",iso6392B:"kur",iso6391:"ku"},{name:"Kutenai",iso6392B:"kut"},{name:"Ladino",iso6392B:"lad"},{name:"Lahnda",iso6392B:"lah"},{name:"Lamba",iso6392B:"lam"},{name:"Lao",iso6392B:"lao",iso6391:"lo"},{name:"Latin",iso6392B:"lat",iso6391:"la"},{name:"Latvian",iso6392B:"lav",iso6391:"lv"},{name:"Lezghian",iso6392B:"lez"},{name:"Limburgan; Limburger; Limburgish",iso6392B:"lim",iso6391:"li"},{name:"Lingala",iso6392B:"lin",iso6391:"ln"},{name:"Lithuanian",iso6392B:"lit",iso6391:"lt"},{name:"Mongo",iso6392B:"lol"},{name:"Lozi",iso6392B:"loz"},{name:"Luxembourgish; Letzeburgesch",iso6392B:"ltz",iso6391:"lb"},{name:"Luba-Lulua",iso6392B:"lua"},{name:"Luba-Katanga",iso6392B:"lub",iso6391:"lu"},{name:"Ganda",iso6392B:"lug",iso6391:"lg"},{name:"Luiseno",iso6392B:"lui"},{name:"Lunda",iso6392B:"lun"},{name:"Luo (Kenya and Tanzania)",iso6392B:"luo"},{name:"Lushai",iso6392B:"lus"},{name:"Macedonian",iso6392B:"mac",iso6392T:"mkd",iso6391:"mk"},{name:"Madurese",iso6392B:"mad"},{name:"Magahi",iso6392B:"mag"},{name:"Marshallese",iso6392B:"mah",iso6391:"mh"},{name:"Maithili",iso6392B:"mai"},{name:"Makasar",iso6392B:"mak"},{name:"Malayalam",iso6392B:"mal",iso6391:"ml"},{name:"Mandingo",iso6392B:"man"},{name:"Maori",iso6392B:"mao",iso6392T:"mri",iso6391:"mi"},{name:"Austronesian languages",iso6392B:"map"},{name:"Marathi",iso6392B:"mar",iso6391:"mr"},{name:"Masai",iso6392B:"mas"},{name:"Malay",iso6392B:"may",iso6392T:"msa",iso6391:"ms"},{name:"Moksha",iso6392B:"mdf"},{name:"Mandar",iso6392B:"mdr"},{name:"Mende",iso6392B:"men"},{name:"Irish, Middle (900-1200)",iso6392B:"mga"},{name:"Mi'kmaq; Micmac",iso6392B:"mic"},{name:"Minangkabau",iso6392B:"min"},{name:"Uncoded languages",iso6392B:"mis"},{name:"Mon-Khmer languages",iso6392B:"mkh"},{name:"Malagasy",iso6392B:"mlg",iso6391:"mg"},{name:"Maltese",iso6392B:"mlt",iso6391:"mt"},{name:"Manchu",iso6392B:"mnc"},{name:"Manipuri",iso6392B:"mni"},{name:"Manobo languages",iso6392B:"mno"},{name:"Mohawk",iso6392B:"moh"},{name:"Mongolian",iso6392B:"mon",iso6391:"mn"},{name:"Mossi",iso6392B:"mos"},{name:"Multiple languages",iso6392B:"mul"},{name:"Munda languages",iso6392B:"mun"},{name:"Creek",iso6392B:"mus"},{name:"Mirandese",iso6392B:"mwl"},{name:"Marwari",iso6392B:"mwr"},{name:"Mayan languages",iso6392B:"myn"},{name:"Erzya",iso6392B:"myv"},{name:"Nahuatl languages",iso6392B:"nah"},{name:"North American Indian languages",iso6392B:"nai"},{name:"Neapolitan",iso6392B:"nap"},{name:"Nauru",iso6392B:"nau",iso6391:"na"},{name:"Navajo; Navaho",iso6392B:"nav",iso6391:"nv"},{name:"Ndebele, South; South Ndebele",iso6392B:"nbl",iso6391:"nr"},{name:"Ndebele, North; North Ndebele",iso6392B:"nde",iso6391:"nd"},{name:"Ndonga",iso6392B:"ndo",iso6391:"ng"},{name:"Low German; Low Saxon; German, Low; Saxon, Low",iso6392B:"nds"},{name:"Nepali",iso6392B:"nep",iso6391:"ne"},{name:"Nepal Bhasa; Newari",iso6392B:"new"},{name:"Nias",iso6392B:"nia"},{name:"Niger-Kordofanian languages",iso6392B:"nic"},{name:"Niuean",iso6392B:"niu"},{name:"Norwegian Nynorsk; Nynorsk, Norwegian",iso6392B:"nno",iso6391:"nn"},{name:"Bokmål, Norwegian; Norwegian Bokmål",iso6392B:"nob",iso6391:"nb"},{name:"Nogai",iso6392B:"nog"},{name:"Norse, Old",iso6392B:"non"},{name:"Norwegian",iso6392B:"nor",iso6391:"no"},{name:"N'Ko",iso6392B:"nqo"},{name:"Pedi; Sepedi; Northern Sotho",iso6392B:"nso"},{name:"Nubian languages",iso6392B:"nub"},{name:"Classical Newari; Old Newari; Classical Nepal Bhasa",iso6392B:"nwc"},{name:"Chichewa; Chewa; Nyanja",iso6392B:"nya",iso6391:"ny"},{name:"Nyamwezi",iso6392B:"nym"},{name:"Nyankole",iso6392B:"nyn"},{name:"Nyoro",iso6392B:"nyo"},{name:"Nzima",iso6392B:"nzi"},{name:"Occitan (post 1500)",iso6392B:"oci",iso6391:"oc"},{name:"Ojibwa",iso6392B:"oji",iso6391:"oj"},{name:"Oriya",iso6392B:"ori",iso6391:"or"},{name:"Oromo",iso6392B:"orm",iso6391:"om"},{name:"Osage",iso6392B:"osa"},{name:"Ossetian; Ossetic",iso6392B:"oss",iso6391:"os"},{name:"Turkish, Ottoman (1500-1928)",iso6392B:"ota"},{name:"Otomian languages",iso6392B:"oto"},{name:"Papuan languages",iso6392B:"paa"},{name:"Pangasinan",iso6392B:"pag"},{name:"Pahlavi",iso6392B:"pal"},{name:"Pampanga; Kapampangan",iso6392B:"pam"},{name:"Panjabi; Punjabi",iso6392B:"pan",iso6391:"pa"},{name:"Papiamento",iso6392B:"pap"},{name:"Palauan",iso6392B:"pau"},{name:"Persian, Old (ca.600-400 B.C.)",iso6392B:"peo"},{name:"Persian",iso6392B:"per",iso6392T:"fas",iso6391:"fa"},{name:"Philippine languages",iso6392B:"phi"},{name:"Phoenician",iso6392B:"phn"},{name:"Pali",iso6392B:"pli",iso6391:"pi"},{name:"Polish",iso6392B:"pol",iso6391:"pl"},{name:"Pohnpeian",iso6392B:"pon"},{name:"Portuguese",iso6392B:"por",iso6391:"pt"},{name:"Prakrit languages",iso6392B:"pra"},{name:"Provençal, Old (to 1500); Occitan, Old (to 1500)",iso6392B:"pro"},{name:"Pushto; Pashto",iso6392B:"pus",iso6391:"ps"},{name:"Reserved for local use",iso6392B:"qaa-qtz"},{name:"Quechua",iso6392B:"que",iso6391:"qu"},{name:"Rajasthani",iso6392B:"raj"},{name:"Rapanui",iso6392B:"rap"},{name:"Rarotongan; Cook Islands Maori",iso6392B:"rar"},{name:"Romance languages",iso6392B:"roa"},{name:"Romansh",iso6392B:"roh",iso6391:"rm"},{name:"Romany",iso6392B:"rom"},{name:"Romanian; Moldavian; Moldovan",iso6392B:"rum",iso6392T:"ron",iso6391:"ro"},{name:"Rundi",iso6392B:"run",iso6391:"rn"},{name:"Aromanian; Arumanian; Macedo-Romanian",iso6392B:"rup"},{name:"Russian",iso6392B:"rus",iso6391:"ru"},{name:"Sandawe",iso6392B:"sad"},{name:"Sango",iso6392B:"sag",iso6391:"sg"},{name:"Yakut",iso6392B:"sah"},{name:"South American Indian languages",iso6392B:"sai"},{name:"Salishan languages",iso6392B:"sal"},{name:"Samaritan Aramaic",iso6392B:"sam"},{name:"Sanskrit",iso6392B:"san",iso6391:"sa"},{name:"Sasak",iso6392B:"sas"},{name:"Santali",iso6392B:"sat"},{name:"Sicilian",iso6392B:"scn"},{name:"Scots",iso6392B:"sco"},{name:"Selkup",iso6392B:"sel"},{name:"Semitic languages",iso6392B:"sem"},{name:"Irish, Old (to 900)",iso6392B:"sga"},{name:"Sign Languages",iso6392B:"sgn"},{name:"Shan",iso6392B:"shn"},{name:"Sidamo",iso6392B:"sid"},{name:"Sinhala; Sinhalese",iso6392B:"sin",iso6391:"si"},{name:"Siouan languages",iso6392B:"sio"},{name:"Sino-Tibetan languages",iso6392B:"sit"},{name:"Slavic languages",iso6392B:"sla"},{name:"Slovak",iso6392B:"slo",iso6392T:"slk",iso6391:"sk"},{name:"Slovenian",iso6392B:"slv",iso6391:"sl"},{name:"Southern Sami",iso6392B:"sma"},{name:"Northern Sami",iso6392B:"sme",iso6391:"se"},{name:"Sami languages",iso6392B:"smi"},{name:"Lule Sami",iso6392B:"smj"},{name:"Inari Sami",iso6392B:"smn"},{name:"Samoan",iso6392B:"smo",iso6391:"sm"},{name:"Skolt Sami",iso6392B:"sms"},{name:"Shona",iso6392B:"sna",iso6391:"sn"},{name:"Sindhi",iso6392B:"snd",iso6391:"sd"},{name:"Soninke",iso6392B:"snk"},{name:"Sogdian",iso6392B:"sog"},{name:"Somali",iso6392B:"som",iso6391:"so"},{name:"Songhai languages",iso6392B:"son"},{name:"Sotho, Southern",iso6392B:"sot",iso6391:"st"},{name:"Spanish; Castilian",iso6392B:"spa",iso6391:"es"},{name:"Sardinian",iso6392B:"srd",iso6391:"sc"},{name:"Sranan Tongo",iso6392B:"srn"},{name:"Serbian",iso6392B:"srp",iso6391:"sr"},{name:"Serer",iso6392B:"srr"},{name:"Nilo-Saharan languages",iso6392B:"ssa"},{name:"Swati",iso6392B:"ssw",iso6391:"ss"},{name:"Sukuma",iso6392B:"suk"},{name:"Sundanese",iso6392B:"sun",iso6391:"su"},{name:"Susu",iso6392B:"sus"},{name:"Sumerian",iso6392B:"sux"},{name:"Swahili",iso6392B:"swa",iso6391:"sw"},{name:"Swedish",iso6392B:"swe",iso6391:"sv"},{name:"Classical Syriac",iso6392B:"syc"},{name:"Syriac",iso6392B:"syr"},{name:"Tahitian",iso6392B:"tah",iso6391:"ty"},{name:"Tai languages",iso6392B:"tai"},{name:"Tamil",iso6392B:"tam",iso6391:"ta"},{name:"Tatar",iso6392B:"tat",iso6391:"tt"},{name:"Telugu",iso6392B:"tel",iso6391:"te"},{name:"Timne",iso6392B:"tem"},{name:"Tereno",iso6392B:"ter"},{name:"Tetum",iso6392B:"tet"},{name:"Tajik",iso6392B:"tgk",iso6391:"tg"},{name:"Tagalog",iso6392B:"tgl",iso6391:"tl"},{name:"normal",iso6392B:"tha",iso6391:"th"},{name:"Tibetan",iso6392B:"tib",iso6392T:"bod",iso6391:"bo"},{name:"Tigre",iso6392B:"tig"},{name:"Tigrinya",iso6392B:"tir",iso6391:"ti"},{name:"Tiv",iso6392B:"tiv"},{name:"Tokelau",iso6392B:"tkl"},{name:"Klingon; tlhIngan-Hol",iso6392B:"tlh"},{name:"Tlingit",iso6392B:"tli"},{name:"Tamashek",iso6392B:"tmh"},{name:"Tonga (Nyasa)",iso6392B:"tog"},{name:"Tonga (Tonga Islands)",iso6392B:"ton",iso6391:"to"},{name:"Tok Pisin",iso6392B:"tpi"},{name:"Tsimshian",iso6392B:"tsi"},{name:"Tswana",iso6392B:"tsn",iso6391:"tn"},{name:"Tsonga",iso6392B:"tso",iso6391:"ts"},{name:"Turkmen",iso6392B:"tuk",iso6391:"tk"},{name:"Tumbuka",iso6392B:"tum"},{name:"Tupi languages",iso6392B:"tup"},{name:"Turkish",iso6392B:"tur",iso6391:"tr"},{name:"Altaic languages",iso6392B:"tut"},{name:"Tuvalu",iso6392B:"tvl"},{name:"Twi",iso6392B:"twi",iso6391:"tw"},{name:"Tuvinian",iso6392B:"tyv"},{name:"Udmurt",iso6392B:"udm"},{name:"Ugaritic",iso6392B:"uga"},{name:"Uighur; Uyghur",iso6392B:"uig",iso6391:"ug"},{name:"Ukrainian",iso6392B:"ukr",iso6391:"uk"},{name:"Umbundu",iso6392B:"umb"},{name:"Undetermined",iso6392B:"und"},{name:"Urdu",iso6392B:"urd",iso6391:"ur"},{name:"Uzbek",iso6392B:"uzb",iso6391:"uz"},{name:"Vai",iso6392B:"vai"},{name:"Venda",iso6392B:"ven",iso6391:"ve"},{name:"Vietnamese",iso6392B:"vie",iso6391:"vi"},{name:"Volapük",iso6392B:"vol",iso6391:"vo"},{name:"Votic",iso6392B:"vot"},{name:"Wakashan languages",iso6392B:"wak"},{name:"Wolaitta; Wolaytta",iso6392B:"wal"},{name:"Waray",iso6392B:"war"},{name:"Washo",iso6392B:"was"},{name:"Welsh",iso6392B:"wel",iso6392T:"cym",iso6391:"cy"},{name:"Sorbian languages",iso6392B:"wen"},{name:"Walloon",iso6392B:"wln",iso6391:"wa"},{name:"Wolof",iso6392B:"wol",iso6391:"wo"},{name:"Kalmyk; Oirat",iso6392B:"xal"},{name:"Xhosa",iso6392B:"xho",iso6391:"xh"},{name:"Yao",iso6392B:"yao"},{name:"Yapese",iso6392B:"yap"},{name:"Yiddish",iso6392B:"yid",iso6391:"yi"},{name:"Yoruba",iso6392B:"yor",iso6391:"yo"},{name:"Yupik languages",iso6392B:"ypk"},{name:"Zapotec",iso6392B:"zap"},{name:"Blissymbols; Blissymbolics; Bliss",iso6392B:"zbl"},{name:"Zenaga",iso6392B:"zen"},{name:"Standard Moroccan Tamazight",iso6392B:"zgh"},{name:"Zhuang; Chuang",iso6392B:"zha",iso6391:"za"},{name:"Zande languages",iso6392B:"znd"},{name:"Zulu",iso6392B:"zul",iso6391:"zu"},{name:"Zuni",iso6392B:"zun"},{name:"No linguistic content; Not applicable",iso6392B:"zxx"},{name:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",iso6392B:"zza"}],language_codes={},home_page=(temps.map(function(e){var t;void 0!==e.iso6391&&(t=e.iso6391,language_codes[t]=e.name),void 0!==e.iso6392B&&(t=e.iso6392B,language_codes[t]=e.name),void 0!==e.iso6392T&&(t=e.iso6392T,language_codes[t]=e.name)}),{initiated:!(language_codes.tu="Turkish"),keys:{focused_part:"menu_selection",menu_selection:0,controls_menu_selection:0,modal_focus_index:0},prev_focus_dom:null,menu_doms:$("#home-page .menu-item-container"),top_menu_doms:$("#home-page .home-top-control-wrapper"),init:function(){account_page.fillAccountDetails(),this.showCurrentWeather(),"lg"==platform&&$(".app-version").text(lg_version),"vidaa"==platform?$(".app-version").text(vidaa_version):$(".app-version").text(samsung_version),turn_off_page.prev_route="home-page","turn-off-page"!==current_route&&(current_route="home-page"),$("#loading-page").addClass("hide"),$("#login-container").hide(),$("#app").show(),$("#home-page").removeClass("hide");var i="";languages?languages.map(function(e,t){i+='        <div           class="setting-select-option"          data-word_code="'+e.code+'"          data-language="'+e.code+'"          onmouseenter="settings_page.hoverChangeLanguageOption('+t+', true)"          onclick="settings_page.handleMenuClick()"        >          '+e.name+"        </div>"}):console.error("Languages not found"),$("#settings-languages-options").html(i),settings_page.change_language_items=$("#change-language-settings .setting-select-option"),settings_page.doms_translated=$("*").filter(function(){return void 0!==$(this).data("word_code")}),settings_page.changeDomsLanguage(),this.hoverMainMenu(0),this.applyChannelTheme(),this.checkForPlaylistExpirationDate()},reEnter:function(){$("#home-page").removeClass("hide"),current_route="home-page"},clickMainMenu:function(){switch(this.keys.menu_selection){case 0:checkActivePlaylist()&&channel_page.init("home-page",null);break;case 1:checkActivePlaylist()&&vod_series_page.init("vod");break;case 2:checkActivePlaylist()&&vod_series_page.init("series");break;case 3:checkActivePlaylist()&&vod_series_page.init("replay");break;case 4:playlist_page.init();break;case 6:$("#home-page").addClass("hide"),settings_page.init();break;case 7:this.goBack()}},applyChannelTheme:function(){switch(channel_page.channel_theme=localStorage.getItem(storage_id+"channel_theme"),channel_page.channel_theme){case"classic":this.keys.modal_focus_index=0;break;case"normal":this.keys.modal_focus_index=1,$("#channel-page-right-part,#channel-page-left-part").addClass("normal");break;case"modern":this.keys.modal_focus_index=2,$("#channel-page").addClass("modern"),$("#channel-page-right-part,#channel-page-left-part").addClass("normal");break;default:this.keys.modal_focus_index=0}},showCurrentWeather:function(){weatherNow&&(e=Math.floor(parseInt(weatherNow.temp_c))+"°",t="https:"+weatherNow.condition.icon);var e,t,i=utilities.getCurrentDateTimeFormatted();weatherCountry&&weatherCity&&$("#weather-country").text(weatherCity+", "+weatherCountry+"."),$("#current-date").text(i),$("#current-weather-icon").attr("src",t),$("#current-weather-degree").text(e)},clickControlsMenu:function(){switch(this.keys.controls_menu_selection){case 0:channel_page.init("home-page",null,!0);break;case 1:this.showThemeModal();break;case 2:playlist_page.init();break;case 3:settings_page.init(),settings_page.clickSettingsItem(0)}},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":case"controls_menu_selection":case"search_button":turn_off_page.init(current_route);break;case"user_account_modal":$("#user-account-modal").modal("hide"),e.focused_part="controls_menu_selection";break;case"theme_channel_modal":this.hideThemeModal();break;case"playlist_notification_modal":this.closePlaylistExpiryNotification()}},showThemeModal:function(){clearTimeout(this.idleOnChannelTimer),this.keys.focused_part="theme_channel_modal",$("#channel-theme-control-modal").modal("show");var e=this.keys.modal_focus_index;$(".image-radio").removeClass("current"),$(".image-radio").each(function(){$(this).data("index")==e&&$(this).addClass("current")}),this.updateModalFocus()},hideThemeModal:function(){this.keys.focused_part="controls_menu_selection",$("#channel-theme-control-modal").modal("hide"),this.modal_visible=!1},updateModalFocus:function(){var e=this.keys.modal_focus_index;$(".image-radio").removeClass("active"),$(".image-radio").each(function(){$(this).data("index")==e&&$(this).addClass("active").find("input").prop("checked",!0)})},handleModalSelection:function(e){switch(this.keys.modal_focus_index=e,$("#channel-page").removeClass("modern"),$("#channel-page-right-part,#channel-page-left-part").removeClass("normal"),e){case 0:localStorage.setItem(storage_id+"channel_theme",""),channel_page.channel_theme="";break;case 1:localStorage.setItem(storage_id+"channel_theme","normal"),channel_page.channel_theme="normal",$("#channel-page-right-part,#channel-page-left-part").addClass("normal");break;case 2:localStorage.setItem(storage_id+"channel_theme","modern"),channel_page.channel_theme="modern",$("#channel-page").addClass("modern"),$("#channel-page-right-part,#channel-page-left-part").addClass("normal")}channel_page.resetSidebarStyle(),this.hideThemeModal()},hoverThemeChannel:function(e){$(".image-radio").removeClass("active"),$(".image-radio").each(function(){$(this).data("index")==e&&$(this).addClass("active").find("input").prop("checked",!0)}),this.keys.modal_focus_index=e},hoverMainMenu:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.prev_focus_dom).removeClass("active"),this.prev_focus_dom=this.menu_doms[e],$(this.menu_doms[e]).addClass("active")},hoverControlsMenu:function(e){var t=this.keys;t.focused_part="controls_menu_selection",t.controls_menu_selection=e,$(this.prev_focus_dom).removeClass("active"),this.prev_focus_dom=this.top_menu_doms[e],$(this.top_menu_doms[e]).addClass("active")},hoverSearchButton:function(){this.keys.focused_part="search_button",$(this.prev_focus_dom).removeClass("active"),$("#home-search-container").addClass("active"),this.prev_focus_dom=$("#home-search-container")[0]},hoverRefreshButton:function(){this.keys.focused_part="refresh_button",$(this.prev_focus_dom).removeClass("active"),$("#home-refresh-container").addClass("active"),this.prev_focus_dom=$("#home-refresh-container")[0]},hoverAccountButton:function(){this.keys.focused_part="account_button",$(this.prev_focus_dom).removeClass("active"),$("#home-account-container").addClass("active"),this.prev_focus_dom=$("#home-account-container")[0]},updatePlaylistExpiryDays:function(e){switch(e){case 0:$(".playlist-will-expire-in").text("a few hours");break;case 1:$(".playlist-will-expire-in").text(e+" day");break;case null:$(".playlist-will-expire-in").text("Unknown");break;default:$(".playlist-will-expire-in").text(e+" days")}},showPlaylistExpiryNotification:function(e){switch(e){case 0:$("#playlist-will-expire-in").text("a few hours");break;case 1:$("#playlist-will-expire-in").text(e+" day");break;default:$("#playlist-will-expire-in").text(e+" days")}$("#home-page .notification-container").show(),this.keys.focused_part="playlist_notification_modal"},closePlaylistExpiryNotification:function(){$("#home-page .notification-container").hide(),this.keys.focused_part="menu_selection"},checkForPlaylistExpirationDate:function(){if(playlist_expire_date)try{console.log("####### Playlist expiry date",playlist_expire_date);var e=utilities.convertToTimestamp(playlist_expire_date),t=utilities.timestampDiffInDays(e);console.log("Playlist will expire in",t),this.updatePlaylistExpiryDays(t),t<=5&&0<=t&&this.showPlaylistExpiryNotification()}catch(e){console.log("Error checking for playlist expiration date",e),this.updatePlaylistExpiryDays(null)}else console.log("This playlist is unlimited")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$(this.menu_doms[e.menu_selection]).trigger("click");break;case"controls_menu_selection":$(this.top_menu_doms[e.controls_menu_selection]).trigger("click");break;case"search_button":search_page.init("home-page","all");break;case"refresh_button":window.location.reload();break;case"account_button":account_page.init();break;case"theme_channel_modal":this.handleModalSelection(this.keys.modal_focus_index);break;case"playlist_notification_modal":this.closePlaylistExpiryNotification()}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":0<e&&this.hoverControlsMenu(t.controls_menu_selection),e<0&&this.hoverSearchButton();break;case"controls_menu_selection":e<0&&this.hoverMainMenu(t.menu_selection);break;case"search_button":case"refresh_button":case"account_button":0<e&&this.hoverMainMenu(t.menu_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMainMenu(t.menu_selection);break;case"controls_menu_selection":t.controls_menu_selection+=e,t.controls_menu_selection<0&&(t.controls_menu_selection=0),t.controls_menu_selection>=this.top_menu_doms.length&&(t.controls_menu_selection=this.top_menu_doms.length-1),this.hoverControlsMenu(t.controls_menu_selection);break;case"theme_channel_modal":t.modal_focus_index+=e,2<t.modal_focus_index&&(t.modal_focus_index=2),t.modal_focus_index<0&&(t.modal_focus_index=0),this.hoverThemeChannel(t.modal_focus_index);break;case"search_button":e<0&&this.hoverRefreshButton(),0<e&&this.hoverAccountButton();break;case"refresh_button":0<e&&this.hoverSearchButton();break;case"account_button":e<0&&this.hoverSearchButton()}},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}),USE_CUSTOM_KEYBOARD=!1,processingInputFocus=!1;function isBackButtonPressed(e){if(27===e.keyCode)return!0;if(window.tvKey){if(e.keyCode===tvKey.RETURN)return!0;if("samsung"===platform&&10009===e.keyCode)return!0;if("lg"===platform&&461===e.keyCode)return!0;if("vidaa"===platform&&8===e.keyCode)return!0}return!1}function initPlatformKeyboard(){if("samsung"===platform){document.addEventListener("visibilitychange",function(){document.hidden?webapis.avplay.suspend():webapis.avplay.restore()});for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var i=e[t];i.addEventListener("focus",function(){console.log("input element is focused and ready to get user input."),key_focused=!0}),i.addEventListener("blur",function(){console.log("input element loses focus."),key_focused=!1})}}else if("lg"===platform)document.addEventListener("keyboardStateChange",keyboardVisibilityChange,!1);else if("vidaa"===platform){window.lastFocusedInput=null;for(var s=document.getElementsByTagName("input"),t=0;t<s.length;t++)s[t].addEventListener("click",function(e){e.preventDefault(),e.stopPropagation()})}document.addEventListener("keydown",function(e){var t=document.activeElement;if(13===e.keyCode&&t&&"INPUT"===t.tagName&&(!USE_CUSTOM_KEYBOARD||!custom_keyboard.isShown))return e.preventDefault(),e.stopPropagation(),t.blur(),!1})}function initCustomKeyboard(){custom_keyboard.init();for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var i=e[t];i.removeEventListener("focus",inputFocusHandler),i.removeEventListener("blur",inputBlurHandler),i.addEventListener("focus",inputFocusHandler),i.addEventListener("blur",inputBlurHandler),i.addEventListener("click",function(e){USE_CUSTOM_KEYBOARD&&(e.preventDefault(),e.stopPropagation(),custom_keyboard.isShown||this.focus())})}"lg"===platform&&document.addEventListener("keyboardStateChange",function(e){var t;USE_CUSTOM_KEYBOARD&&e.detail.visibility&&(console.log("Native keyboard trying to show - suppressing"),t=document.activeElement)&&"INPUT"===t.tagName&&(t.blur(),setTimeout(function(){custom_keyboard.show(t)},50))},!1),document.addEventListener("keydown",function(e){if(isBackButtonPressed(e)&&custom_keyboard.isShown)return custom_keyboard.hide(),e.preventDefault(),e.stopPropagation(),!1},!0)}function inputFocusHandler(){processingInputFocus||(processingInputFocus=!0,console.log("input element is focused and ready to show custom keyboard."),key_focused=!0,custom_keyboard.isShown||custom_keyboard.show(this),setTimeout(function(){processingInputFocus=!1},50))}function inputBlurHandler(){processingInputFocus||(console.log("input element loses focus."),key_focused=!1,setTimeout(function(){processingInputFocus||document.activeElement&&$(document.activeElement).hasClass("keyboard-key")||custom_keyboard.hide()},100))}function keyboardVisibilityChange(e){e.detail.visibility?key_focused=!0:(key_focused=!1,$("input").blur())}function getOSPlatform(){var e;try{window.navigator.userAgent.toLowerCase().includes("web0s")?e="lg":window.navigator.userAgent.toLowerCase().includes("tizen")?e="samsung":window.navigator.userAgent.toLowerCase().includes("hisense")||window.navigator.userAgent.toLowerCase().includes("vidaa")?e="vidaa":(window.navigator.userAgent.toLowerCase().includes("windows")||window.navigator.userAgent.toLowerCase().includes("mac")||window.navigator.userAgent.toLowerCase().includes("linux"))&&(e="windows")}catch(e){}return e}$(document).ready(function(){setTimeout(function(){if("vidaa"==(platform=getOSPlatform())){USE_CUSTOM_KEYBOARD=!0;for(var e=document.querySelectorAll("div, span, p, img, section"),t=0;t<e.length;t++)e[t].setAttribute("tabindex","-1")}$("#app").addClass(platform),initKeys(),initPlayer(),settings.initFromLocal();var i=localStorage.getItem(storage_id+"parent_account_password");parent_account_password=null!=i?i:parent_account_password,"samsung"===platform?($("#vod-series-player-video-lg").hide(),$("#channel-page-video-lg").hide()):"lg"!==platform&&"vidaa"!==platform||($("#vod-series-player-video").hide(),$("#channel-page-video").hide()),login_page.getPlayListDetail(),(USE_CUSTOM_KEYBOARD?initCustomKeyboard:initPlatformKeyboard)(),document.addEventListener("keydown",function(e){if(isBackButtonPressed(e)&&USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown)custom_keyboard.hide(),e.preventDefault(),e.stopPropagation();else if(!(USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown&&custom_keyboard.handleRemoteKeys(e))){if("samsung"===platform)switch(e.keyCode==tvKey.EXIT&&tizen.application.getCurrentApplication().exit(),e.keyCode){case 65376:case 65385:return void $("input").blur()}else if("vidaa"==platform){var t=document.activeElement,i=t&&"INPUT"===t.tagName;switch(e.keyCode){case 13:if(i){if(key_focused)key_focused=!1,"search-page-input"===t.id&&search_page.keywordChange(),t.blur(),document.activeElement&&document.activeElement.blur(),window.lastFocusedInput=null;else if(window.lastFocusedInput=t,key_focused=!0,USE_CUSTOM_KEYBOARD)return custom_keyboard.show(t),e.preventDefault(),void e.stopPropagation();return e.preventDefault(),void e.stopPropagation()}break;case tvKey.RETURN:case 27:if(USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown)return custom_keyboard.hide(),key_focused=!1,e.preventDefault(),void e.stopPropagation();if(key_focused)return key_focused=!1,t&&t.blur(),document.activeElement&&document.activeElement.blur(),window.lastFocusedInput=null,e.preventDefault(),void e.stopPropagation();break;case 37:case 38:case 39:case 40:if(key_focused)return e.preventDefault(),void e.stopPropagation();i&&(t.blur(),document.activeElement)&&document.activeElement.blur()}}if(!app_loading)switch(current_route){case"login":login_page.HandleKey(e);break;case"home-page":home_page.HandleKey(e);break;case"channel-page":channel_page.HandleKey(e);break;case"vod-series-page":vod_series_page.HandleKey(e);break;case"vod-summary-page":vod_summary_page.HandleKey(e);break;case"vod-series-player-video":vod_series_player_page.HandleKey(e);break;case"trailer-page":trailer_page.HandleKey(e);break;case"seasons-page":seasons_variable.HandleKey(e);break;case"episode-page":episode_variable.HandleKey(e);break;case"series-summary-page":series_summary_page.HandleKey(e);break;case"playlist-page":playlist_page.HandleKey(e);break;case"account-page":account_page.HandleKey(e);break;case"settings-page":settings_page.HandleKey(e);break;case"setting-page":setting_page.HandleKey(e);break;case"parent-confirm-page":parent_confirm_page.HandleKey(e);break;case"turn-off-page":turn_off_page.HandleKey(e);break;case"playlist-edit-page":playlist_edit_page.HandleKey(e);break;case"catch-up":catchup_page.HandleKey(e);break;case"search-page":search_page.HandleKey(e);break;case"clear_recent_page":clear_recent_page.HandleKey(e);break;case"clear_cache_page":clear_cache_page.HandleKey(e)}}}),$(".subtitle-container").css({"font-size":settings.subtitle_size/16+"rem",color:settings_page.subtitle_bg_options[settings.subtitle_bg].color,"background-color":settings_page.subtitle_bg_options[settings.subtitle_bg].background}),updateCurrentTime(),current_timer=setInterval(function(){updateCurrentTime()},3e4)},2e3)}),document.addEventListener("keydown",function(e){if(custom_keyboard&&custom_keyboard.isShown&&13===e.keyCode){var t=document.activeElement;if(t&&"keyboard-enter"===t.id)return console.log("Enter key pressed on Enter button via remote, hiding keyboard"),custom_keyboard.currentInput&&"search-page-input"===custom_keyboard.currentInput.id&&search_page.keywordChange(),custom_keyboard.hide(),key_focused=!1,e.preventDefault(),e.stopPropagation(),!1}},!0);