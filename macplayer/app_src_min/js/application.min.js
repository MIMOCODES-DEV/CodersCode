"use strict";function showLoader(e){void 0===e&&(e=!0),e?$("#loader").show():$("#loader").hide()}function saveData(e,i){window[e]=i}function getMovieUrl(e,i,t){return api_host_url+"/"+i+"/"+user_name+"/"+password+"/"+e+"."+t}function moveScrollPosition(e,i,t,s){if("vertical"===t){var a=parseInt($(e).css("height").replace("px","")),o=$(i).position(),n=parseInt($(i).css("height").replace("px","")),r=0;if(s){var c=o.top+n/2-a/2;$(e).animate({scrollTop:"+="+c},10)}else o.top+n>=a&&(r=o.top+n-a),o.top<0&&(r=o.top),$(e).animate({scrollTop:"+="+r},10);return r}var l=parseInt($(e).css("width").replace("px","")),d=parseInt($(i).css("width").replace("px","")),o=$(i).position(),c=0;return s?c=o.left+d/2-l/2:(o.left+d>=l&&(c=o.left+d-l),o.left<0&&(c=o.left)),$(e).animate({scrollLeft:"+="+c},1),c}function showToast(e,i){$("#toast-body").html("<h3>"+e+"<br>"+i+"</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")}function getMinute(e){var i=moment(e).toDate().getTime();return parseInt(i/60/1e3)}function parseM3uResponse(e,i){var t=0;if("type1"===e){var s=[],a=[],o=[],n=[],r=[],c=[];i=i.replace(/['"]+/g,"");var l=i.split(/#EXTINF:-{0,1}[0-9]{1,} {0,},{0,}/gm);l.splice(0,1);var d=[];(new Date).getTime();if(i.includes("tvg-"))for(var _={},m={},h={},u=0;u<l.length;u++)try{d=l[u].split("\n"),t++;var v=d[1].length>1?d[1]:"";if(!v.includes("http:"))continue;var e="live";(v.includes("/movie/")||v.includes("vod")||v.includes("=movie")||v.includes("==movie=="))&&(e="vod"),v.includes("/series/")&&(e="series");var g=d[0].trim().split(","),p=g.length>1?g[1]:"",y=splitStrings(g[0],["tvg-","channel-","group-"]),f={stream_id:"",name:p,stream_icon:"",title:""},b="All";if(y.map(function(e){var i=e.split("="),t=i[0],s=i[1];switch(t){case"id":f.stream_id=s;break;case"name":f.name=""!=s.trim()?s:p;break;case"logo":f.stream_icon=s;break;case"title":b=s.split(",")[0],""==b&&(b="Uncategorized")}}),""===f.stream_id.trim()&&(f.stream_id=f.name),f.url=v,f.num=t,"live"===e){if(void 0===_[b]){_[b]=b;var k={category_id:b,category_name:b};s.push(k)}f.category_id=b,a.push(f)}if("vod"===e){if(void 0===m[b]){m[b]=b;var k={category_id:b,category_name:b};n.push(k)}f.category_id=b,o.push(f)}if("series"===e){if(void 0===h[b]){h[b]=b;var k={category_id:b,category_name:b};r.push(k)}f.category_id=b,c.push(f)}}catch(e){console.log("parsing m3u error "+u,e)}else{s=[{category_id:"all",category_name:"All"}],n=[{category_id:"all",category_name:"All"}],r=[{category_id:"all",category_name:"All"}];for(var u=0;u<l.length;u++){d=l[u].split("\n");try{var p=d[0],v=d[1],e="live";v.includes("/movie/")&&(e="movie"),v.includes("/series/")&&(e="series");var f={};p=p.trim(),f.stream_id=p,f.name=p,f.stream_icon="",f.num=u+1,f.category_id="all",f.url=v,"live"===e&&a.push(f),"series"===e&&c.push(f),"movie"===e&&o.push(f)}catch(e){console.log(d[0]),console.log(e)}}}s.length>1&&s.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),n.length>1&&n.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),r.length>1&&r.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),LiveModel.setCategories(s),LiveModel.setMovies(a),LiveModel.insertMoviesToCategories(),VodModel.setCategories(n),VodModel.setMovies(o),VodModel.insertMoviesToCategories(),SeriesModel.setCategories(r);var $=parseSeries(c);SeriesModel.setMovies($),SeriesModel.insertMoviesToCategories()}}function parseSeries(e){var i=[],t={},s={},a={};e.map(function(e){try{var i=e.name.split(/ S[0-9]{2}/),o=e.name.match(/S[0-9]{2}/)[0];o=o.trim().replace("S",""),o="Season "+o;var n=i[0].trim(),r=i[1].trim().replace("E","");void 0===t[n]?(s={},a={},a[o]=[{name:r,url:e.url,id:r,info:{},title:"Episode "+r}],s[o]={name:o,cover:HOST+"app_src_min/images/series-icon.png"},t[n]={series_id:n,name:n,cover:e.stream_icon,youtube_trailer:"",category_id:e.category_id,rating:"",rating_5based:"",genre:"",director:"",cast:"",plot:"",season_map:s,episodes:a}):(void 0===s[o]?(a[o]=[{name:r,url:e.url,id:r,info:{},title:"Episode "+r}],s[o]={name:o,cover:HOST+"app_src_min/images/series-icon.png"},t[n].season_map=s):a[o].push({name:o,url:e.url,id:o,info:{},title:"Episode "+r}),t[n].episodes=a)}catch(e){}}),console.log("Here Series Map",t);var o=0;return Object.keys(t).map(function(e){o++;var s=t[e],a=[];try{Object.keys(s.season_map).map(function(e){a.push(s.season_map[e])})}catch(e){}delete s.season_map,s.num=o,s.seasons=a,i.push(s)}),i}function splitStrings(e,i){for(var t=[],s=0;s<i.length;s++){var a=e.split(i[s]);if(s==i.length-1){for(var o=0;o<a.length;o++)""!=a[o].trim()&&t.push(a[o]);return t}for(var o=0;o<a.length;o++)if(""!=a[o].trim()){var n=splitStrings(a[o],i.slice(s+1));n.map(function(e){""!==e.trim()&&t.push(e)})}return t}}function getAtob(e){var i=e;try{return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){}return i}function checkForAdult(e,i,t){var s,a=!1;if("movie"===i){for(var o=0;o<t.length;o++)if(e.category_id==t[o].category_id){s=t[o];break}}else s=e;for(var n=s.category_name.toLowerCase(),r=["xxx","sex","porn","adult","18+","+18","19+","+19","hot"],o=0;o<r.length;o++)if(n.includes(r[o])){a=!0;break}return s.parent_id&&0!=s.parent_id&&(a=!0),a}function pickPanelUrl(e){var i,t,s=[];console.log("prototype string includes=",String.prototype.indexOf),panel_urls.map(function(i,t){e.includes(t)||s.push(i)});for(var a=Math.random(),o=1/s.length,n=0;n<s.length;n++)if(a>=n*o&&a<=o*(n+1)){i=s[n],t=n;break}return[t,i]}function getSortedMovies(e,i){var t=[],s=i;if("a_z"!==i&&"z_a"!==i||(s="name"),"number"===i&&(s="num"),0==e.length)return e;if(void 0===e[0][s])return e;var a=1;switch(i){case"rating":case"number":case"added":a=1,"number"===i&&(a=-1),t=e.sort(function(e,i){var t=parseFloat(e[s]);isNaN(t)&&(t=0);var o=parseFloat(i[s]);return isNaN(o)&&(o=0),a*(t<o?1:t>o?-1:0)});break;case"a_z":case"z_a":case"name":a="a_z"===i||"name"===i?1:-1,t=e.sort(function(e,i){return a*e[s].localeCompare(i[s])});break;case"default":return e}return t}function parseM3uUrl(){var e=settings.playlist.url;if(e.includes("username=")&&e.includes("password=")?settings.playlist_type="xtreme":settings.playlist_type="type1","xtreme"===settings.playlist_type){var i=settings.playlist.url.split("?");i[1].split("&").map(function(e){var i=e.split("="),t=i[0],s=i[1];"username"===t.toLowerCase()&&(user_name=s),"password"===t.toLowerCase()&&(password=s)}),api_host_url=i[0].replace("/get.php","")}else api_host_url=e}function makeRearrangeArray(e,i,t){var s=[];return i>t?(s=e.slice(0,t),s=s.concat(e[i]),s=s.concat(e.slice(t,i)),s=s.concat(e.slice(i+1))):(s=e.slice(0,i),s=s.concat(e.slice(i+1,t+1)),s=s.concat(e[i]),s=s.concat(e.slice(t+1))),s}function setSelectionRange(e){setTimeout(function(){var i=$(e).val();$(e)[0].setSelectionRange(i.length,i.length)},200)}function exitApp(){"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close()}function getEncryptKey(e){for(var i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",t="";t.length<e;t+=i.charAt(62*Math.random()|0));return t}function getEncryptKeyPosition(e){for(var i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",t=0;t<i.length;t++)if(i[t]==e)return t}function getEncryptPositionChar(e){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(e)}function encryptRequest(e){var i=JSON.stringify(e);i=btoa(i);var t=parseInt(30*Math.random());t<20&&(t=20);var s=Math.floor(Math.random()*i.length);s>=42&&(s=42);var a=getEncryptKey(t),o=i.slice(0,s).concat(a).concat(i.slice(s));return o=getEncryptPositionChar(s)+getEncryptPositionChar(t)+o}function decryptResponse(e){var i=e.data,t=getEncryptKeyPosition(i[i.length-2]),s=getEncryptKeyPosition(i[i.length-1]);i=i.slice(0,i.length-2);var a=i.slice(0,t).concat(i.slice(t+s));return a=getAtob(a),JSON.parse(a)}function changeCurrentTime(){var e=moment(),i=e.format("ddd, MMM DD"),t=e.format("HH:mm");$(".current-date").text(i),$(".current-time").text(t)}function hideImg(e){$(e).addClass("hide")}function initKeys(){var e;if("samsung"===platform){var i,t,s={};try{for(t=tizen.tvinputdevice.getSupportedKeys(),i=0;i<t.length;i++)s[t[i].name]=t[i].code,tizen.tvinputdevice.registerKey(t[i].name);tizen.tvinputdevice.unregisterKey("VolumeUp"),tizen.tvinputdevice.unregisterKey("VolumeDown"),tizen.tvinputdevice.unregisterKey("VolumeMute")}catch(e){}e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,RETURN:10009,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}}else"lg"===platform&&(e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:461,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072});window.tvKey=e}function confirmParentPassword(){switch(current_route){case"home-page":home_page.confirmParentPassword()}}function cancelParentPassword(){switch(current_route){case"home-page":home_page.cancelParentPassword()}}function initPlayer(){"samsung"===platform?media_player={videoObj:null,parent_id:"",STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},current_time:0,reconnect_timer:null,reconnect_count:0,reconnect_max_count:20,url:"",init:function(e,i){this.videoObj=null,this.parent_id=i,this.state=this.STATES.STOPPED,this.parent_id=i,this.current_time=0,this.videoObj=document.getElementById(e),$(".video-resolution").text(""),$("#"+this.parent_id).find(".subtitle-container").html(""),$("#"+this.parent_id).find(".subtitle-container").show(),$("#"+this.parent_id).find(".video-reconnect-message").hide(),this.reconnect_count=0},playAsync:function(e){if($("#"+this.parent_id).find(".video-error").hide(),$(".video-loader").show(),!(this.state>this.STATES.STOPPED)){if(!this.videoObj)return 0;try{console.log(e),this.url=e,webapis.avplay.open(e),this.setupEventListeners(),this.setDisplayArea(),webapis.avplay.setBufferingParam("PLAYER_BUFFER_FOR_PLAY","PLAYER_BUFFER_SIZE_IN_SECOND",4);var i=this;webapis.avplay.prepareAsync(function(){i.reconnect_count=0,$("#"+i.parent_id).find(".video-reconnect-message").hide(),$(".video-loader").hide(),i.state=i.STATES.PLAYING,webapis.avplay.play(),$("#"+i.parent_id).find(".video-total-time").text(i.formatTime(webapis.avplay.getDuration()/1e3)),$("#"+i.parent_id).find(".video-error").hide();var e={min:0,max:webapis.avplay.getDuration()/1e3};$("#"+i.parent_id).find(".video-progress-bar-slider").attr(e),$("#"+i.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+i.parent_id).find(".video-current-time").text("00:00"),"vod-series-player-video"===current_route&&vod_series_player_page.showResumeBar();try{var t=webapis.avplay.getCurrentStreamInfo(),s=JSON.parse(t[0].extra_info),a=s.Width+" x "+s.Height;$(".video-resolution").text(a)}catch(e){console.log(e)}},function(){$(".video-loader").hide(),$("#"+i.parent_id).find(".video-error").show(),i.reconnect_count<i.reconnect_max_count&&i.tryReconnect()})}catch(e){$(".video-loader").hide(),$("#"+this.parent_id).find(".video-error").show(),this.reconnect_count<this.reconnect_max_count&&this.tryReconnect()}}},play:function(){this.state=this.STATES.PLAYING;try{webapis.avplay.play()}catch(e){}},pause:function(){this.state=this.STATES.PAUSED;try{webapis.avplay.pause()}catch(e){}},stop:function(){this.state=this.STATES.STOPPED,webapis.avplay.stop(),this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},close:function(){this.state=this.STATES.STOPPED,webapis.avplay.close(),this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},tryReconnect:function(){if("channel-page"===current_route){if(clearTimeout(this.reconnect_timer),this.reconnect_count+=1,console.log("here reconnecting",this.reconnect_count),this.reconnect_count>=this.reconnect_max_count)return void $("#"+this.parent_id).find(".video-reconnect-message").hide();$("#"+this.parent_id).find(".video-reconnect-message").show(),this.state=this.STATES.STOPPED;var e=this;try{webapis.avplay.close()}catch(e){}this.reconnect_timer=setTimeout(function(){e.playAsync(e.url)},4e3)}},setDisplayArea:function(){var e=$(this.videoObj).offset().top,i=$(this.videoObj).offset().left,t=parseInt($(this.videoObj).width()),s=parseInt($(this.videoObj).height());webapis.avplay.setDisplayRect(i,e,t,s)},formatTime:function(e){var i=Math.floor(e/3600),t=Math.floor(e/60)%60,s=Math.floor(e)%60;return(i?(i<10?"0":"")+i+":":"")+(t<10?"0":"")+t+":"+(s<10?"0":"")+s},setupEventListeners:function(){var e=this,i={onbufferingstart:function(){$("#"+e.parent_id).find(".video-loader").show()},onbufferingprogress:function(e){},onbufferingcomplete:function(){$("#"+e.parent_id).find(".video-loader").hide()},onstreamcompleted:function(){$("#"+e.parent_id).find(".video-error").hide(),webapis.avplay.stop(),e.state=e.STATES.STOPPED,$("#"+e.parent_id).find(".progress-amount").css({width:"100%"}),"vod-series-player-video"===current_route&&vod_series_player_page.videoFinishedCallBack()},oncurrentplaytime:function(i){e.current_time=i,$("#"+e.parent_id).find(".video-error").hide(),"vod-series-player-video"===current_route&&(vod_series_player_page.current_time=i/1e3),webapis.avplay.getDuration()>0&&($("#"+e.parent_id).find(".video-progress-bar-slider").val(i/1e3).change(),$("#"+e.parent_id).find(".video-current-time").html(e.formatTime(i/1e3)),$("#"+e.parent_id).find(".video-progress-bar-slider").val(i/1e3).change())},ondrmevent:function(e,i){},onerror:function(i,t){$("#"+e.parent_id).find(".video-error").show(),e.reconnect_count<e.reconnect_max_count&&e.tryReconnect()},onsubtitlechange:function(i,t,s,a){$("#"+e.parent_id).find(".subtitle-container").html(t)}};webapis.avplay.setListener(i)},onDeviceReady:function(){document.addEventListener("pause",this.onPause),document.addEventListener("resume",this.onResume)},onPause:function(){this.pause()},onResume:function(){this.play()},getSubtitleOrAudioTrack:function(e){var i=[],t="",s="TEXT"===e?"track_lang":"language",a="TEXT"===e?"Subtitle ":"Track ";try{for(var o=webapis.avplay.getTotalTrackInfo(),n=0;n<o.length;n++)try{if(o[n].type==e){var r=JSON.parse(o[n].extra_info);if("TEXT"===e||"AUDIO"===e){var c=r[s].trim();t.includes(c)||""===c?""===c&&(r[s]=a+(n+1),o[n].extra_info=r,i.push(o[n])):(t+=", "+c,r[s]=void 0!==language_codes[c]?language_codes[c]:c,o[n].extra_info=r,i.push(o[n]))}else o[n].extra_info=r,i.push(o[n])}}catch(i){console.log(e,i)}}catch(e){}return i},setSubtitleOrAudioTrack:function(e,i){try{$("#"+this.parent_id+" .subtitle-container").show(),webapis.avplay.setSelectTrack(e,i)}catch(e){}"TEXT"===e&&-1==i&&$("#"+this.parent_id+" .subtitle-container").hide()}}:"lg"===platform&&(media_player={id:"",videoObj:null,parent_id:"",current_time:0,STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},init:function(e,i){e.includes("-lg")||(e+="-lg"),this.id=e,this.videoObj=null,this.parent_id=i,this.current_time=0,this.state=this.STATES.STOPPED,this.videoObj=document.getElementById(e);var t=this.videoObj,s=this;this.videoObj.addEventListener("error",function(e){console.log("Error"),$("#"+s.parent_id).find(".video-error").show()}),this.videoObj.addEventListener("canplay",function(e){$("#"+s.parent_id).find(".video-error").hide()}),this.videoObj.addEventListener("durationchange",function(e){}),this.videoObj.addEventListener("loadeddata",function(e){var i=parseInt(t.duration),a={min:0,max:i};$("#"+s.parent_id).find(".video-progress-bar-slider").attr(a),$("#"+s.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+s.parent_id).find(".video-total-time").text(s.formatTime(i)),"vod-series-player-video"===current_route&&vod_series_player_page.showResumeBar()}),this.videoObj.ontimeupdate=function(e){var i=s.videoObj.duration,t=s.videoObj.currentTime;i>0&&($("#"+s.parent_id).find(".video-progress-bar-slider").val(t).change(),$("#"+s.parent_id).find(".video-current-time").html(s.formatTime(t)))},this.videoObj.addEventListener("loadedmetadata",function(){}),this.videoObj.addEventListener("waiting",function(e){}),this.videoObj.addEventListener("suspend",function(e){}),this.videoObj.addEventListener("stalled",function(e){console.log("Failed to fetch data, but trying.")}),this.videoObj.addEventListener("ended",function(e){"vod-series-player-video"===current_route&&vod_series_player_page.videoFinishedCallBack()}),this.videoObj.addEventListener("emptied",function(e){})},playAsync:function(e){try{this.videoObj.pause()}catch(e){}console.log(e);var i=this;for($("#"+this.parent_id).find(".video-error").hide();this.videoObj.firstChild;)this.videoObj.removeChild(this.videoObj.firstChild);this.videoObj.load();var t=document.createElement("source");t.setAttribute("src",e),this.videoObj.appendChild(t),this.videoObj.play(),$("#"+this.parent_id).find(".progress-amount").css({width:0}),t.addEventListener("error",function(e){$("#"+i.parent_id).find(".video-error").show()}),t.addEventListener("emptied",function(e){console.log("Empty"),$("#"+i.parent_id).find(".video-error").show()}),this.state=this.STATES.PLAYING},play:function(){this.state=this.STATES.PLAYING,this.videoObj.play()},setDisplayArea:function(){},pause:function(){this.state=this.STATES.PAUSED;try{this.videoObj.pause()}catch(e){}},close:function(){try{this.videoObj.pause()}catch(e){}this.state=this.STATES.STOPPED},formatTime:function(e){var i=Math.floor(e/3600),t=Math.floor(e/60)%60,s=Math.floor(e)%60;return(i?(i<10?"0":"")+i+":":"")+(t<10?"0":"")+t+":"+(s<10?"0":"")+s},seekTo:function(e){},getSubtitleOrAudioTrack:function(e){return"TEXT"==e?this.videoObj.textTracks:this.videoObj.audioTracks},setSubtitleOrAudioTrack:function(e,i){if("TEXT"==e){for(var t=0;t<this.videoObj.textTracks.length;t++)this.videoObj.textTracks[t].mode="hidden";this.videoObj.textTracks[i].mode="showing"}else{for(var t=0;t<this.videoObj.audioTracks.length;t++)this.videoObj.audioTracks[t].enabled=!1;this.videoObj.audioTracks[i].enabled=!0}}})}function convertProgrammeTimeToClientTime(e){var i=moment(e,"YYYYMMDDHHmmss Z");return i.utc().add(client_offset,"minute"),i.format("Y-MM-DD HH:mm")}function getTodayDate(e){var i=new Date;return moment(i).format(e)}function calculateTimeDifference(e,i){var t=new Date(e);time_difference_with_server=parseInt((1e3*i-t.getTime())/6e4)}function getLocalChannelTime(e){return moment(e).add(time_difference_with_server,"minute")}function keyboardVisibilityChange(e){e.detail.visibility||$("input").blur()}function keyboardVisibilityChange(e){e.detail.visibility?show_keyboard=!0:(show_keyboard=!1,$("input").blur())}var VodModel={movies:[],category_name:"vod_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],saved_video_times:{},favourite_ids:[],stream_type:"vod",favourite_insert_position:"after",recent_insert_position:"before",init:function(){this.movies=[],this.categories=[]},setCategories:function(e){var i=this.stream_type,t=localStorage.getItem(storage_id+settings.playlist.id+"_saved_"+i+"_times");this.saved_video_times=t?JSON.parse(t):{};var s=localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens");s=null==s?[]:JSON.parse(s),e.map(function(e){e.is_hide=s.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,i){var t=this.stream_type,s=this.saved_video_times;s[e.toString()]=i,this.saved_video_times=s,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+t+"_times",JSON.stringify(s))},removeVideoTime:function(e){var i=this.stream_type,t=this.saved_video_times;delete t[e.toString()],this.saved_video_times=t,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+i+"_times",JSON.stringify(t))},saveHiddenCategories:function(e){var i=this.stream_type,t=this.getCategories(!0,!1);t.map(function(e){e.is_hide=!1});for(var s=0;s<e.length;s++)for(var a=0;a<t.length;a++)if(e[s]==t[a].category_id){t[a].is_hide=!0;break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(e))},getCategories:function(e,i){return this.categories.filter(function(t){return i?!!e||!t.is_hide:e?"favourite"!==t.category_id&&"recent"!==t.category_id:!t.is_hide&&"favourite"!==t.category_id&&"recent"!==t.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=this.stream_type,i=this.movies,t=this.categories,s={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},a={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},o={category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1};t.push(o);var n=this.movie_key,r=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+e+"_recent")),c=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+e+"_favourite"));r=null==r?[]:r,c=null==c?[]:c,this.favourite_ids=c;for(var l=[],d=[],_=this,m={},h=0;h<i.length;h++){var u=i[h];void 0!==u.category_id&&"null"!=u.category_id&&null!=u.category_id||(u.category_id="undefined");var v=u.category_id.toString();void 0===m[v]?m[v]=[u]:m[v].push(u),u.is_recent=!1,r.includes(u[n])&&("before"===_.recent_insert_position?l.unshift(u):l.push(u),u.is_recent=!0),c.includes(u[n])&&("before"===_.favourite_insert_position?d.unshift(u):d.push(u))}for(var h=0;h<t.length;h++){var v=t[h].category_id.toString();t[h].movies=void 0===m[v]?[]:m[v]}s.movies=l,a.movies=d,t.unshift(a),t.unshift(s);for(var h=0;h<t.length;h++)if("undefined"===t[h].category_id){0==t[h].movies.length&&t.splice(h,1);break}this.categories=t,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return"favourite"===e?1:0},getRecentOrFavouriteCategory:function(e){var i=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[i]},setRecentOrFavouriteMovies:function(e,i){var t=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(i);this.categories[s].movies=e;var a=this.movie_key,o=e.map(function(e){return e[a]});"favourite"===i&&(this.favourite_ids=o),localStorage.setItem(storage_id+settings.playlist.id+t+"_"+i,JSON.stringify(o))},addRecentOrFavouriteMovie:function(e,i){for(var t=this.getRecentOrFavouriteCategory(i),s=t.movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}if(!a){"before"===this[i+"_insert_position"]?s.unshift(e):s.push(e);var c=this[i+"_movie_count"];s=s.splice(0,c),this.setRecentOrFavouriteMovies(s,i),n=!0}return n},removeRecentOrFavouriteMovie:function(e,i){for(var t=this.getRecentOrFavouriteCategory(i).movies,s=this.movie_key,a=!1,o=0;o<t.length;o++)if(t[o][s]==e){t.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(t,i),a}},LiveModel={movies:[],category_name:"live_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],programmes:{},movie_saved:!1,programme_saved:!1,favourite_ids:[],stream_type:"live",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var i=this.stream_type,t=localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens");t=null==t?[]:JSON.parse(t),e.map(function(e){e.is_hide=t.includes(e.category_id)}),this.categories=e},saveHiddenCategories:function(e){var i=this.stream_type,t=this.getCategories(!0,!1);t.map(function(e){e.is_hide=!1});for(var s=0;s<e.length;s++)for(var a=0;a<t.length;a++)if(e[s]==t[a].category_id){t[a].is_hide=!0;break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(e))},getCategories:function(e,i){return this.categories.filter(function(t){return i?!!e||!t.is_hide:e?"favourite"!==t.category_id&&"recent"!==t.category_id:!t.is_hide&&"favourite"!==t.category_id&&"recent"!==t.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=localStorage.getItem(storage_id+settings.playlist.id+"_category_orders");e=e?JSON.parse(e):[],this.category_orders=e;var i=localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders");i=i?JSON.parse(i):{};var t=this.stream_type,s=this.movies,a=this.categories,o={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},n={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},r={category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1};a.push(r);var c=this.movie_key,l=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+t+"_recent")),d=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+t+"_favourite"));l=null==l?[]:l,d=null==d?[]:d,this.favourite_ids=d;for(var _=[],m=[],h=this,u={},v=0;v<s.length;v++){var g=s[v];void 0!==g.category_id&&"null"!=g.category_id&&null!=g.category_id||(g.category_id="undefined");var p=g.category_id.toString();void 0===u[p]?u[p]=[g]:u[p].push(g),g.is_recent=!1,l.includes(g[c])&&("before"===h.recent_insert_position?_.unshift(g):_.push(g),g.is_recent=!0),d.includes(g[c])&&("before"===h.favourite_insert_position?m.unshift(g):m.push(g))}for(var v=0;v<a.length;v++){var p=a[v].category_id.toString(),s=u[p]?u[p]:[];a[v].movies=s}o.movies=_,n.movies=m,a.unshift(n),a.unshift(o);for(var v=0;v<a.length;v++)if("undefined"===a[v].category_id){a[v].movies&&0==a[v].movies.length&&a.splice(v,1);break}for(var v=0;v<e.length;v++)for(f=0;f<a.length;f++)if(e[v].id==a[f].category_id){a=makeRearrangeArray(a,f,e[v].position);break}for(var v=0;v<a.length;v++)if("favourite"==a[v].category_id&&(this.favourite_position=v),"recent"==a[v].category_id&&(this.recent_position=v),i[a[v].category_id]){for(var y=i[a[v].category_id],s=a[v].movies,f=0;f<y.length;f++)for(var b=0;b<s.length;b++)if(y[f].id==s[b].stream_id&&y[f].name==s[b].name){s=makeRearrangeArray(s,b,y[f].position);break}a[v].movies=s}this.categories=a,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,i=0;i<e.length;i++)"favourite"===e[i].category_id&&(this.favourite_position=i),"recent"===e[i].category_id&&(this.recent_position=i)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){var i=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[i]},setRecentOrFavouriteMovies:function(e,i){var t=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(i);this.categories[s].movies=e;var a=this.movie_key,o=e.map(function(e){return e[a]});"favourite"===i&&(this.favourite_ids=o),localStorage.setItem(storage_id+settings.playlist.id+t+"_"+i,JSON.stringify(o))},addRecentOrFavouriteMovie:function(e,i){for(var t=this.getRecentOrFavouriteCategory(i),s=t.movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}if(!a){"before"===this[i+"_insert_position"]?s.unshift(e):s.push(e);var c=this[i+"_movie_count"];s=s.splice(0,c),this.setRecentOrFavouriteMovies(s,i),n=!0}return n},removeRecentOrFavouriteMovie:function(e,i){for(var t=this.getRecentOrFavouriteCategory(i).movies,s=this.movie_key,a=!1,o=0;o<t.length;o++)if(t[o][s]==e){t.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(t,i),a},getNextProgrammes:function(e){var i=settings.time_format,t="Y-MM-DD HH:mm";"12"===i&&(t="Y-MM-DD hh:mm A");for(var s=!1,a=[],o=moment(new Date).unix(),n=0,r=0;r<e.length;r++){var c=getLocalChannelTime(e[r].stop);if(c.unix()>=o){n++;var l=getLocalChannelTime(e[r].start);if(l.unix()<=o){s=!0,a.push({title:e[r].title,start:l.format(t),stop:c.format(t)});break}break}if(n>=1)break}return{current_program_exist:s,programmes:a}},getProgrammeVideoUrl:function(e,i){if("xtreme"===settings.playlist_type){var t=getLocalChannelTime(i.start),s=t.subtract(time_difference_with_server,"minute"),a=s.format("Y-MM-DD:HH-mm"),o=getMinute(i.stop)-getMinute(i.start);o*=60;return{duration:o,url:api_host_url+"/streaming/timeshift.php?username="+user_name+"&password="+password+"&stream="+e+"&start="+a+"&duration="+o}}return{duration:"00:00",url:""}}},SeriesModel={movies:[],favourite_movie_count:200,recent_movie_count:15,movie_key:"series_id",categories:[],saved_video_times:{},favourite_ids:[],stream_type:"series",favourite_insert_position:"after",recent_insert_position:"before",init:function(){this.movies=[],this.categories=[]},setCategories:function(e){var i=this.stream_type,t=localStorage.getItem(storage_id+settings.playlist.id+"_saved_"+i+"_times");this.saved_video_times=t?JSON.parse(t):{};var s=localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens");s=null==s?[]:JSON.parse(s),e.map(function(e){e.is_hide=s.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,i){var t=this.stream_type,s=this.saved_video_times;s[e.toString()]=i,this.saved_video_times=s,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+t+"_times",JSON.stringify(s))},removeVideoTime:function(e){var i=this.stream_type,t=this.saved_video_times;delete t[e.toString()],this.saved_video_times=t,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+i+"_times",JSON.stringify(t))},saveHiddenCategories:function(e){var i=this.stream_type,t=this.getCategories(!0,!1);t.map(function(e){e.is_hide=!1});for(var s=0;s<e.length;s++)for(var a=0;a<t.length;a++)if(e[s]==t[a].category_id){t[a].is_hide=!0;break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(e))},getCategories:function(e,i){return this.categories.filter(function(t){return i?!!e||!t.is_hide:e?"favourite"!==t.category_id&&"recent"!==t.category_id:!t.is_hide&&"favourite"!==t.category_id&&"recent"!==t.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=this.stream_type,i=this.movies,t=this.categories,s={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},a={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},o={category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1};t.push(o);var n=this.movie_key,r=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+e+"_recent")),c=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+e+"_favourite"));r=null==r?[]:r,c=null==c?[]:c,this.favourite_ids=c;for(var l=[],d=[],_=this,m={},h=0;h<i.length;h++){var u=i[h];void 0!==u.category_id&&"null"!=u.category_id&&null!=u.category_id||(u.category_id="undefined");var v=u.category_id.toString();void 0===m[v]?m[v]=[u]:m[v].push(u),u.is_recent=!1,r.includes(u[n])&&("before"===_.recent_insert_position?l.unshift(u):l.push(u),u.is_recent=!0),c.includes(u[n])&&("before"===_.favourite_insert_position?d.unshift(u):d.push(u))}for(var h=0;h<t.length;h++){var v=t[h].category_id.toString();t[h].movies=void 0===m[v]?[]:m[v]}s.movies=l,a.movies=d,t.unshift(a),t.unshift(s);for(var h=0;h<t.length;h++)if("undefined"===t[h].category_id){0==t[h].movies.length&&t.splice(h,1);break}this.categories=t,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return"favourite"===e?1:0},getRecentOrFavouriteCategory:function(e){var i=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[i]},setRecentOrFavouriteMovies:function(e,i){var t=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(i);this.categories[s].movies=e;var a=this.movie_key,o=e.map(function(e){
return e[a]});"favourite"===i&&(this.favourite_ids=o),localStorage.setItem(storage_id+settings.playlist.id+t+"_"+i,JSON.stringify(o))},addRecentOrFavouriteMovie:function(e,i){for(var t=this.getRecentOrFavouriteCategory(i),s=t.movies,a=!1,o=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][o]==e[o]){a=!0;break}if(!a){"before"===this[i+"_insert_position"]?s.unshift(e):s.push(e);var c=this[i+"_movie_count"];s=s.splice(0,c),this.setRecentOrFavouriteMovies(s,i),n=!0}return n},removeRecentOrFavouriteMovie:function(e,i){for(var t=this.getRecentOrFavouriteCategory(i).movies,s=this.movie_key,a=!1,o=0;o<t.length;o++)if(t[o][s]==e){t.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(t,i),a}},settings={bg_img_url:"",playlist_id:0,playlist:{},vod_sort:"default",series_sort:"default",live_sort:"default",sort_keys:{added:"Added",number:"Number",rating:"Rating",a_z:"A-Z",z_a:"Z-A",name:"Name",default:"Default"},language:"en",time_format:"24",playlist_type:"",initFromLocal:function(){var e=localStorage.getItem(storage_id+"bg_img_url");e&&(this.bg_img_url=e),e=localStorage.getItem(storage_id+"playlist_id"),this.playlist_id=e||0;var i=this;if(["vod_sort","series_sort","live_sort"].map(function(t){(e=localStorage.getItem(storage_id+t))&&(i[t]=e)}),e=localStorage.getItem(storage_id+"language"))this.language=e;else if(void 0!==navigator.language){var t=navigator.language.split("-");this.language=t[0]}},saveSettings:function(e,i,t){this[e]=i,"object"!==t&&"array"!==t||(i=JSON.stringify(i)),localStorage.setItem(storage_id+e,i)}},mac_address,user_name,password,api_host_url,device_key,is_trial,panel_urls=["https://mactvplayer.com/api","https://mactvplay.com/api","https://macplayertv.com/api"],time_difference_with_server=0,expire_date,app_loading=!1,current_route="login-page",default_movie_icon=HOST+"app_src_min/images/logo1.png",current_movie,current_season,current_episode,current_series,parent_account_password="0000",mac_valid=!0,playlist_urls=[],languages=[],current_words=[],notification={},client_offset=moment(new Date).utcOffset(),storage_id="ToYK1mCLIX_",platform="samsung",samsung_version="1.0.1",lg_version="1.0.2",show_keyboard=!1;Array.prototype.includes||(Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,i,t){return function(s,a){if(null===this||void 0===this)throw TypeError("Array.prototype.indexOf called on null or undefined");var o=e(this),n=o.length>>>0,r=t(0|a,n);if(r<0)r=i(0,n+r);else if(r>=n)return-1;if(void 0===s){for(;r!==n;++r)if(void 0===o[r]&&r in o)return r}else if(s!==s){for(;r!==n;++r)if(o[r]!==o[r])return r}else for(;r!==n;++r)if(o[r]===s)return r;return-1}}(Object,Math.max,Math.min)),String.prototype.includes||(String.prototype.includes=function(e){return!!~this.indexOf(e)});var login_page={is_loading:!1,keys:{focused_part:"main_area",main_area:0,network_issue_btn:0,expired_issue_btn:0,no_playlist_btn:0},login_succeed:!1,tried_panel_indexes:[],network_issue_btns:$(".network-issue-btn"),expired_issue_btns:$(".expired-issue-btn"),no_playlist_btns:$(".no-playlist-btn"),goBack:function(){turn_off_page.init("login-page")},showLoadImage:function(){$("#loading-issue-container").hide(),$("#loading-page").removeClass("hide")},showLoginError:function(){$(".loading-issue-item").addClass("hide"),$("#loading-issue-container").show()},showNetworkErrorModal:function(){this.showLoginError(),$("#network-issue-container").removeClass("hide"),this.hoverNetworkIssueBtn(0)},reloadApp:function(){var e=this;$("#loading-issue-container").hide(),$(".loading-issue-item").addClass("hide"),setTimeout(function(){e.fetchPlaylistInformation()},200)},continueDemoPlaylist:function(){var e=this;$("#loading-issue-container").hide(),$(".loading-issue-item").addClass("hide"),setTimeout(function(){e.login()},200)},exit:function(){exitApp()},enterActivationPage:function(){activation_page.init("login-page")},fetchPlaylistInformation:function(){if(!this.is_loading){this.showLoadImage();var e=this;this.is_loading=!0,$("#mac-address").text(mac_address),$(".mac-address").text(mac_address);var i=pickPanelUrl(this.tried_panel_indexes),t=i[1],s=i[0],a="samsung"===platform?samsung_version:lg_version,o={mac_address:mac_address,app_type:platform,version:a},n=encryptRequest(o);$.ajax({url:t+"/playlist_info",type:"POST",data:{data:n},success:function(i){var t=decryptResponse(i);localStorage.setItem(storage_id+"api_data",JSON.stringify(t)),e.loadApp(t)},error:function(i){var t=localStorage.getItem(storage_id+"api_data");t?(t=JSON.parse(t),e.loadApp(t)):(e.is_loading=!1,e.tried_panel_indexes.length<panel_urls.length?(e.tried_panel_indexes.push(s),e.fetchPlaylistInformation()):e.showNetworkErrorModal())}})}},loadApp:function(e){var i=moment().format("Y-MM-DD");saveData("playlist_urls",e.urls),saveData("notification",e.notification),$(".device-key").text(e.device_key),$(".loading-page-device-info-container").slideDown(),saveData("languages",e.languages),saveData("device_key",e.device_key),saveData("expire_date",e.expire_date),saveData("is_trial",e.is_trial),this.is_loading=!1,$(".expire-date").text(expire_date),e.expire_date<i?(saveData("mac_valid",!1),this.showLoginError(),$("#expired-issue-container").removeClass("hide"),this.hoverExpiredIssueBtn(0)):e.has_own_playlist?this.login():(this.showLoginError(),$("#no-playlist-issue-container").removeClass("hide"),this.hoverNoPlaylistBtn(0))},getPlayListDetail:function(){var e=this;if(mac_address="52:54:00:12:34:58","samsung"===platform)try{tizen.systeminfo.getPropertyValue("ETHERNET_NETWORK",function(i){void 0!==i&&void 0!==i.macAddress?(mac_address=i.macAddress,e.fetchPlaylistInformation()):e.fetchPlaylistInformation()})}catch(e){this.fetchPlaylistInformation()}else"lg"===platform&&webOS.service.request("luna://com.webos.service.sm",{method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onSuccess:function(i){mac_address="";for(var t=i.idList[0].idValue.replace(/['-]+/g,""),s=0;s<=5;s++)mac_address+=t.substr(2*s,2),s<5&&(mac_address+=":");e.fetchPlaylistInformation()},onFailure:function(i){e.fetchPlaylistInformation()}})},login:function(){this.showLoadImage();for(var e=settings.playlist_id,i=0,t=0;t<playlist_urls.length;t++)if(playlist_urls[t].id==e){i=t;break}settings.saveSettings("playlist",playlist_urls[i],"array"),settings.saveSettings("playlist_id",playlist_urls[i].id,""),parseM3uUrl(),this.proceed_login()},goToPlaylistPageWithError:function(){this.is_loading=!1,LiveModel.insertMoviesToCategories([]),VodModel.insertMoviesToCategories([]),SeriesModel.insertMoviesToCategories([]),$("#loading-page").addClass("hide"),$("#playlist-error").show(),home_page.init(),home_page.hoverMainMenu(home_page.menu_doms[0],!0),home_page.hoverSubMenu(home_page.sub_menu_doms[1][6],!0),home_page.handleMenuClick(),$("#home-expire-date").text("Unknown")},proceed_login:function(){if(!this.is_loading){$("#playlist-error").hide(),LiveModel.init(),VodModel.init(),SeriesModel.init();var e=this,i=settings.playlist_type;if(this.is_loading=!0,"xtreme"===i){var t=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=",s=t.replace("&action=","");$.ajax({method:"get",url:s,success:function(i){if(void 0!==i.server_info&&calculateTimeDifference(i.server_info.time_now,i.server_info.timestamp_now),void 0!==i.user_info)if(0==i.user_info.auth||void 0!==i.user_info.status&&("Expired"===i.user_info.status||"Banned"===i.user_info.status))e.is_loading=!1,e.goToPlaylistPageWithError();else{if(null==i.user_info.exp_date)$(".expire-date").text("Unlimited");else{var s=moment(1e3*i.user_info.exp_date);$(".expire-date").text(s.format("Y-MM-DD"))}$.when($.ajax({method:"get",url:t+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),$.ajax({method:"get",url:t+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),$.ajax({method:"get",url:t+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),$.ajax({method:"get",url:t+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),$.ajax({method:"get",url:t+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),$.ajax({method:"get",url:t+"get_series",success:function(e){SeriesModel.setMovies(e)}})).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),e.is_loading=!1,home_page.init()}catch(i){e.goToPlaylistPageWithError()}}).fail(function(){e.goToPlaylistPageWithError()})}},error:function(i){e.goToPlaylistPageWithError()},timeout:15e3})}else api_host_url=settings.playlist.url,$.ajax({method:"get",url:api_host_url,timeout:24e4,success:function(i){parseM3uResponse("type1",i),$("#loading-page").addClass("hide"),home_page.init(),e.is_loading=!1},error:function(i){e.goToPlaylistPageWithError()}})}},hoverNetworkIssueBtn:function(e){var i=this.keys;i.focused_part="network_issue_btn",i.network_issue_btn=e,$(this.network_issue_btns).removeClass("active"),$(this.network_issue_btns[e]).addClass("active")},hoverExpiredIssueBtn:function(e){var i=this.keys;i.focused_part="expired_issue_btn",i.expired_issue_btn=e,$(this.expired_issue_btns).removeClass("active"),$(this.expired_issue_btns[e]).addClass("active")},hoverNoPlaylistBtn:function(e){var i=this.keys;i.focused_part="no_playlist_btn",i.no_playlist_btn=e,$(this.no_playlist_btns).removeClass("active"),$(this.no_playlist_btns[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"network_issue_btn":$(this.network_issue_btns[e.network_issue_btn]).trigger("click");break;case"no_playlist_btn":$(this.no_playlist_btns[e.no_playlist_btn]).trigger("click");break;case"expired_issue_btn":$(this.expired_issue_btns[e.expired_issue_btn]).trigger("click")}},handleMenuUpDown:function(e){var i=this.keys;if("main_area"===i.focused_part){i.main_area+=e;var t=[$("#login-button")];t.map(function(e){$(e).removeClass("active")}),i.main_area<0&&(i.main_area=t.length-1),i.main_area>=t.length&&(i.main_area=0),$(t[i.main_area]).addClass("active")}},handleMenuLeftRight:function(e){var i=this.keys;switch(i.focused_part){case"network_issue_btn":i.network_issue_btn+=e,i.network_issue_btn<0&&(i.network_issue_btn=0),i.network_issue_btn>=this.network_issue_btns.length&&(i.network_issue_btn=this.network_issue_btns.length-1),this.hoverNetworkIssueBtn(i.network_issue_btn);break;case"expired_issue_btn":i.expired_issue_btn+=e,i.expired_issue_btn<0&&(i.expired_issue_btn=0),i.expired_issue_btn>2&&(i.expired_issue_btn=2),this.hoverExpiredIssueBtn(i.expired_issue_btn);break;case"no_playlist_btn":i.no_playlist_btn+=e,i.no_playlist_btn<0&&(i.no_playlist_btn=0),i.no_playlist_btn>1&&(i.no_playlist_btn=1),this.hoverNoPlaylistBtn(i.no_playlist_btn)}},HandleKey:function(e){if(e.keyCode===tvKey.RETURN)return void this.goBack();if(!this.is_loading)switch(e.keyCode){case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},temps=[{name:"Afar",iso6392B:"aar",iso6391:"aa"},{name:"Abkhazian",iso6392B:"abk",iso6391:"ab"},{name:"Achinese",iso6392B:"ace"},{name:"Acoli",iso6392B:"ach"},{name:"Adangme",iso6392B:"ada"},{name:"Adyghe; Adygei",iso6392B:"ady"},{name:"Afro-Asiatic languages",iso6392B:"afa"},{name:"Afrihili",iso6392B:"afh"},{name:"Afrikaans",iso6392B:"afr",iso6391:"af"},{name:"Ainu",iso6392B:"ain"},{name:"Akan",iso6392B:"aka",iso6391:"ak"},{name:"Akkadian",iso6392B:"akk"},{name:"Albanian",iso6392B:"alb",iso6392T:"sqi",iso6391:"sq"},{name:"Aleut",iso6392B:"ale"},{name:"Algonquian languages",iso6392B:"alg"},{name:"Southern Altai",iso6392B:"alt"},{name:"Amharic",iso6392B:"amh",iso6391:"am"},{name:"English, Old (ca.450-1100)",iso6392B:"ang"},{name:"Angika",iso6392B:"anp"},{name:"Apache languages",iso6392B:"apa"},{name:"Arabic",iso6392B:"ara",iso6391:"ar"},{name:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",iso6392B:"arc"},{name:"Aragonese",iso6392B:"arg",iso6391:"an"},{name:"Armenian",iso6392B:"arm",iso6392T:"hye",iso6391:"hy"},{name:"Mapudungun; Mapuche",iso6392B:"arn"},{name:"Arapaho",iso6392B:"arp"},{name:"Artificial languages",iso6392B:"art"},{name:"Arawak",iso6392B:"arw"},{name:"Assamese",iso6392B:"asm",iso6391:"as"},{name:"Asturian; Bable; Leonese; Asturleonese",iso6392B:"ast"},{name:"Athapascan languages",iso6392B:"ath"},{name:"Australian languages",iso6392B:"aus"},{name:"Avaric",iso6392B:"ava",iso6391:"av"},{name:"Avestan",iso6392B:"ave",iso6391:"ae"},{name:"Awadhi",iso6392B:"awa"},{name:"Aymara",iso6392B:"aym",iso6391:"ay"},{name:"Azerbaijani",iso6392B:"aze",iso6391:"az"},{name:"Banda languages",iso6392B:"bad"},{name:"Bamileke languages",iso6392B:"bai"},{name:"Bashkir",iso6392B:"bak",iso6391:"ba"},{name:"Baluchi",iso6392B:"bal"},{name:"Bambara",iso6392B:"bam",iso6391:"bm"},{name:"Balinese",iso6392B:"ban"},{name:"Basque",iso6392B:"baq",iso6392T:"eus",iso6391:"eu"},{name:"Basa",iso6392B:"bas"},{name:"Baltic languages",iso6392B:"bat"},{name:"Beja; Bedawiyet",iso6392B:"bej"},{name:"Belarusian",iso6392B:"bel",iso6391:"be"},{name:"Bemba",iso6392B:"bem"},{name:"Bengali",iso6392B:"ben",iso6391:"bn"},{name:"Berber languages",iso6392B:"ber"},{name:"Bhojpuri",iso6392B:"bho"},{name:"Bihari languages",iso6392B:"bih",iso6391:"bh"},{name:"Bikol",iso6392B:"bik"},{name:"Bini; Edo",iso6392B:"bin"},{name:"Bislama",iso6392B:"bis",iso6391:"bi"},{name:"Siksika",iso6392B:"bla"},{name:"Bantu languages",iso6392B:"bnt"},{name:"Bosnian",iso6392B:"bos",iso6391:"bs"},{name:"Braj",iso6392B:"bra"},{name:"Breton",iso6392B:"bre",iso6391:"br"},{name:"Batak languages",iso6392B:"btk"},{name:"Buriat",iso6392B:"bua"},{name:"Buginese",iso6392B:"bug"},{name:"Bulgarian",iso6392B:"bul",iso6391:"bg"},{name:"Burmese",iso6392B:"bur",iso6392T:"mya",iso6391:"my"},{name:"Blin; Bilin",iso6392B:"byn"},{name:"Caddo",iso6392B:"cad"},{name:"Central American Indian languages",iso6392B:"cai"},{name:"Galibi Carib",iso6392B:"car"},{name:"Catalan; Valencian",iso6392B:"cat",iso6391:"ca"},{name:"Caucasian languages",iso6392B:"cau"},{name:"Cebuano",iso6392B:"ceb"},{name:"Celtic languages",iso6392B:"cel"},{name:"Chamorro",iso6392B:"cha",iso6391:"ch"},{name:"Chibcha",iso6392B:"chb"},{name:"Chechen",iso6392B:"che",iso6391:"ce"},{name:"Chagatai",iso6392B:"chg"},{name:"Chinese",iso6392B:"chi",iso6392T:"zho",iso6391:"zh"},{name:"Chuukese",iso6392B:"chk"},{name:"Mari",iso6392B:"chm"},{name:"Chinook jargon",iso6392B:"chn"},{name:"Choctaw",iso6392B:"cho"},{name:"Chipewyan; Dene Suline",iso6392B:"chp"},{name:"Cherokee",iso6392B:"chr"},{name:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",iso6392B:"chu",iso6391:"cu"},{name:"Chuvash",iso6392B:"chv",iso6391:"cv"},{name:"Cheyenne",iso6392B:"chy"},{name:"Chamic languages",iso6392B:"cmc"},{name:"Montenegrin",iso6392B:"cnr"},{name:"Coptic",iso6392B:"cop"},{name:"Cornish",iso6392B:"cor",iso6391:"kw"},{name:"Corsican",iso6392B:"cos",iso6391:"co"},{name:"Creoles and pidgins, English based",iso6392B:"cpe"},{name:"Creoles and pidgins, French-based",iso6392B:"cpf"},{name:"Creoles and pidgins, Portuguese-based",iso6392B:"cpp"},{name:"Cree",iso6392B:"cre",iso6391:"cr"},{name:"Crimean Tatar; Crimean Turkish",iso6392B:"crh"},{name:"Creoles and pidgins",iso6392B:"crp"},{name:"Kashubian",iso6392B:"csb"},{name:"Cushitic languages",iso6392B:"cus"},{name:"Czech",iso6392B:"cze",iso6392T:"ces",iso6391:"cs"},{name:"Dakota",iso6392B:"dak"},{name:"Danish",iso6392B:"dan",iso6391:"da"},{name:"Dargwa",iso6392B:"dar"},{name:"Land Dayak languages",iso6392B:"day"},{name:"Delaware",iso6392B:"del"},{name:"Slave (Athapascan)",iso6392B:"den"},{name:"Dogrib",iso6392B:"dgr"},{name:"Dinka",iso6392B:"din"},{name:"Divehi; Dhivehi; Maldivian",iso6392B:"div",iso6391:"dv"},{name:"Dogri",iso6392B:"doi"},{name:"Dravidian languages",iso6392B:"dra"},{name:"Lower Sorbian",iso6392B:"dsb"},{name:"Duala",iso6392B:"dua"},{name:"Dutch, Middle (ca.1050-1350)",iso6392B:"dum"},{name:"Dutch; Flemish",iso6392B:"dut",iso6392T:"nld",iso6391:"nl"},{name:"Dyula",iso6392B:"dyu"},{name:"Dzongkha",iso6392B:"dzo",iso6391:"dz"},{name:"Efik",iso6392B:"efi"},{name:"Egyptian (Ancient)",iso6392B:"egy"},{name:"Ekajuk",iso6392B:"eka"},{name:"Elamite",iso6392B:"elx"},{name:"English",iso6392B:"eng",iso6391:"en"},{name:"English, Middle (1100-1500)",iso6392B:"enm"},{name:"Esperanto",iso6392B:"epo",iso6391:"eo"},{name:"Estonian",iso6392B:"est",iso6391:"et"},{name:"Ewe",iso6392B:"ewe",iso6391:"ee"},{name:"Ewondo",iso6392B:"ewo"},{name:"Fang",iso6392B:"fan"},{name:"Faroese",iso6392B:"fao",iso6391:"fo"},{name:"Fanti",iso6392B:"fat"},{name:"Fijian",iso6392B:"fij",iso6391:"fj"},{name:"Filipino; Pilipino",iso6392B:"fil"},{name:"Finnish",iso6392B:"fin",iso6391:"fi"},{name:"Finno-Ugrian languages",iso6392B:"fiu"},{name:"Fon",iso6392B:"fon"},{name:"French",iso6392B:"fre",iso6392T:"fra",iso6391:"fr"},{name:"French, Middle (ca.1400-1600)",iso6392B:"frm"},{name:"French, Old (842-ca.1400)",iso6392B:"fro"},{name:"Northern Frisian",iso6392B:"frr"},{name:"Eastern Frisian",iso6392B:"frs"},{name:"Western Frisian",iso6392B:"fry",iso6391:"fy"},{name:"Fulah",iso6392B:"ful",iso6391:"ff"},{name:"Friulian",iso6392B:"fur"},{name:"Ga",iso6392B:"gaa"},{name:"Gayo",iso6392B:"gay"},{name:"Gbaya",iso6392B:"gba"},{name:"Germanic languages",iso6392B:"gem"},{name:"Georgian",iso6392B:"geo",iso6392T:"kat",iso6391:"ka"},{name:"German",iso6392B:"ger",iso6392T:"deu",iso6391:"de"},{name:"Geez",iso6392B:"gez"},{name:"Gilbertese",iso6392B:"gil"},{name:"Gaelic; Scottish Gaelic",iso6392B:"gla",iso6391:"gd"},{name:"Irish",iso6392B:"gle",iso6391:"ga"},{name:"Galician",iso6392B:"glg",iso6391:"gl"},{name:"Manx",iso6392B:"glv",iso6391:"gv"},{name:"German, Middle High (ca.1050-1500)",iso6392B:"gmh"},{name:"German, Old High (ca.750-1050)",iso6392B:"goh"},{name:"Gondi",iso6392B:"gon"},{name:"Gorontalo",iso6392B:"gor"},{name:"Gothic",iso6392B:"got"},{name:"Grebo",iso6392B:"grb"},{name:"Greek, Ancient (to 1453)",iso6392B:"grc"},{name:"Greek, Modern (1453-)",iso6392B:"gre",iso6392T:"ell",iso6391:"el"},{name:"Guarani",iso6392B:"grn",iso6391:"gn"},{name:"Swiss German; Alemannic; Alsatian",iso6392B:"gsw"},{name:"Gujarati",iso6392B:"guj",iso6391:"gu"},{name:"Gwich'in",iso6392B:"gwi"},{name:"Haida",iso6392B:"hai"},{name:"Haitian; Haitian Creole",iso6392B:"hat",iso6391:"ht"},{name:"Hausa",iso6392B:"hau",iso6391:"ha"},{name:"Hawaiian",iso6392B:"haw"},{name:"Hebrew",iso6392B:"heb",iso6391:"he"},{name:"Herero",iso6392B:"her",iso6391:"hz"},{name:"Hiligaynon",iso6392B:"hil"},{name:"Himachali languages; Western Pahari languages",iso6392B:"him"},{name:"Hindi",iso6392B:"hin",iso6391:"hi"},{name:"Hittite",iso6392B:"hit"},{name:"Hmong; Mong",iso6392B:"hmn"},{name:"Hiri Motu",iso6392B:"hmo",iso6391:"ho"},{name:"Croatian",iso6392B:"hrv",iso6391:"hr"},{name:"Upper Sorbian",iso6392B:"hsb"},{name:"Hungarian",iso6392B:"hun",iso6391:"hu"},{name:"Hupa",iso6392B:"hup"},{name:"Iban",iso6392B:"iba"},{name:"Igbo",iso6392B:"ibo",iso6391:"ig"},{name:"Icelandic",iso6392B:"ice",iso6392T:"isl",iso6391:"is"},{name:"Ido",iso6392B:"ido",iso6391:"io"},{name:"Sichuan Yi; Nuosu",iso6392B:"iii",iso6391:"ii"},{name:"Ijo languages",iso6392B:"ijo"},{name:"Inuktitut",iso6392B:"iku",iso6391:"iu"},{name:"Interlingue; Occidental",iso6392B:"ile",iso6391:"ie"},{name:"Iloko",iso6392B:"ilo"},{name:"Interlingua (International Auxiliary Language Association)",iso6392B:"ina",iso6391:"ia"},{name:"Indic languages",iso6392B:"inc"},{name:"Indonesian",iso6392B:"ind",iso6391:"id"},{name:"Indo-European languages",iso6392B:"ine"},{name:"Ingush",iso6392B:"inh"},{name:"Inupiaq",iso6392B:"ipk",iso6391:"ik"},{name:"Iranian languages",iso6392B:"ira"},{name:"Iroquoian languages",iso6392B:"iro"},{name:"Italian",iso6392B:"ita",iso6391:"it"},{name:"Javanese",iso6392B:"jav",iso6391:"jv"},{name:"Lojban",iso6392B:"jbo"},{name:"Japanese",iso6392B:"jpn",iso6391:"ja"},{name:"Judeo-Persian",iso6392B:"jpr"},{name:"Judeo-Arabic",iso6392B:"jrb"},{name:"Kara-Kalpak",iso6392B:"kaa"},{name:"Kabyle",iso6392B:"kab"},{name:"Kachin; Jingpho",iso6392B:"kac"},{name:"Kalaallisut; Greenlandic",iso6392B:"kal",iso6391:"kl"},{name:"Kamba",iso6392B:"kam"},{name:"Kannada",iso6392B:"kan",iso6391:"kn"},{name:"Karen languages",iso6392B:"kar"},{name:"Kashmiri",iso6392B:"kas",iso6391:"ks"},{name:"Kanuri",iso6392B:"kau",iso6391:"kr"},{name:"Kawi",iso6392B:"kaw"},{name:"Kazakh",iso6392B:"kaz",iso6391:"kk"},{name:"Kabardian",iso6392B:"kbd"},{name:"Khasi",iso6392B:"kha"},{name:"Khoisan languages",iso6392B:"khi"},{name:"Central Khmer",iso6392B:"khm",iso6391:"km"},{name:"Khotanese; Sakan",iso6392B:"kho"},{name:"Kikuyu; Gikuyu",iso6392B:"kik",iso6391:"ki"},{name:"Kinyarwanda",iso6392B:"kin",iso6391:"rw"},{name:"Kirghiz; Kyrgyz",iso6392B:"kir",iso6391:"ky"},{name:"Kimbundu",iso6392B:"kmb"},{name:"Konkani",iso6392B:"kok"},{name:"Komi",iso6392B:"kom",iso6391:"kv"},{name:"Kongo",iso6392B:"kon",iso6391:"kg"},{name:"Korean",iso6392B:"kor",iso6391:"ko"},{name:"Kosraean",iso6392B:"kos"},{name:"Kpelle",iso6392B:"kpe"},{name:"Karachay-Balkar",iso6392B:"krc"},{name:"Karelian",iso6392B:"krl"},{name:"Kru languages",iso6392B:"kro"},{name:"Kurukh",iso6392B:"kru"},{name:"Kuanyama; Kwanyama",iso6392B:"kua",iso6391:"kj"},{name:"Kumyk",iso6392B:"kum"},{name:"Kurdish",iso6392B:"kur",iso6391:"ku"},{name:"Kutenai",iso6392B:"kut"},{name:"Ladino",iso6392B:"lad"},{name:"Lahnda",iso6392B:"lah"},{name:"Lamba",iso6392B:"lam"},{name:"Lao",iso6392B:"lao",iso6391:"lo"},{name:"Latin",iso6392B:"lat",iso6391:"la"},{name:"Latvian",iso6392B:"lav",iso6391:"lv"},{name:"Lezghian",iso6392B:"lez"},{name:"Limburgan; Limburger; Limburgish",iso6392B:"lim",iso6391:"li"},{name:"Lingala",iso6392B:"lin",iso6391:"ln"},{name:"Lithuanian",iso6392B:"lit",iso6391:"lt"},{name:"Mongo",iso6392B:"lol"},{name:"Lozi",iso6392B:"loz"},{name:"Luxembourgish; Letzeburgesch",iso6392B:"ltz",iso6391:"lb"},{name:"Luba-Lulua",iso6392B:"lua"},{name:"Luba-Katanga",iso6392B:"lub",iso6391:"lu"},{name:"Ganda",iso6392B:"lug",iso6391:"lg"},{name:"Luiseno",iso6392B:"lui"},{name:"Lunda",iso6392B:"lun"},{name:"Luo (Kenya and Tanzania)",iso6392B:"luo"},{name:"Lushai",iso6392B:"lus"},{name:"Macedonian",iso6392B:"mac",iso6392T:"mkd",iso6391:"mk"},{name:"Madurese",iso6392B:"mad"},{name:"Magahi",iso6392B:"mag"},{name:"Marshallese",iso6392B:"mah",iso6391:"mh"},{name:"Maithili",iso6392B:"mai"},{name:"Makasar",iso6392B:"mak"},{name:"Malayalam",iso6392B:"mal",iso6391:"ml"},{name:"Mandingo",iso6392B:"man"},{name:"Maori",iso6392B:"mao",iso6392T:"mri",iso6391:"mi"},{name:"Austronesian languages",iso6392B:"map"},{name:"Marathi",iso6392B:"mar",iso6391:"mr"},{name:"Masai",iso6392B:"mas"},{name:"Malay",iso6392B:"may",iso6392T:"msa",iso6391:"ms"},{name:"Moksha",iso6392B:"mdf"},{name:"Mandar",iso6392B:"mdr"},{name:"Mende",iso6392B:"men"},{name:"Irish, Middle (900-1200)",iso6392B:"mga"},{name:"Mi'kmaq; Micmac",iso6392B:"mic"},{name:"Minangkabau",iso6392B:"min"},{name:"Uncoded languages",iso6392B:"mis"},{name:"Mon-Khmer languages",iso6392B:"mkh"},{name:"Malagasy",iso6392B:"mlg",iso6391:"mg"},{name:"Maltese",iso6392B:"mlt",iso6391:"mt"},{name:"Manchu",iso6392B:"mnc"},{name:"Manipuri",iso6392B:"mni"},{name:"Manobo languages",iso6392B:"mno"},{name:"Mohawk",iso6392B:"moh"},{name:"Mongolian",iso6392B:"mon",iso6391:"mn"},{name:"Mossi",iso6392B:"mos"},{name:"Multiple languages",iso6392B:"mul"},{name:"Munda languages",iso6392B:"mun"},{name:"Creek",iso6392B:"mus"},{name:"Mirandese",iso6392B:"mwl"},{name:"Marwari",iso6392B:"mwr"},{name:"Mayan languages",iso6392B:"myn"},{name:"Erzya",iso6392B:"myv"},{name:"Nahuatl languages",iso6392B:"nah"},{name:"North American Indian languages",iso6392B:"nai"},{name:"Neapolitan",iso6392B:"nap"},{name:"Nauru",iso6392B:"nau",iso6391:"na"},{name:"Navajo; Navaho",iso6392B:"nav",iso6391:"nv"},{name:"Ndebele, South; South Ndebele",iso6392B:"nbl",iso6391:"nr"},{name:"Ndebele, North; North Ndebele",iso6392B:"nde",iso6391:"nd"},{name:"Ndonga",iso6392B:"ndo",iso6391:"ng"},{name:"Low German; Low Saxon; German, Low; Saxon, Low",iso6392B:"nds"},{name:"Nepali",iso6392B:"nep",iso6391:"ne"},{name:"Nepal Bhasa; Newari",iso6392B:"new"},{name:"Nias",iso6392B:"nia"},{name:"Niger-Kordofanian languages",iso6392B:"nic"},{name:"Niuean",iso6392B:"niu"},{name:"Norwegian Nynorsk; Nynorsk, Norwegian",iso6392B:"nno",iso6391:"nn"},{name:"Bokml, Norwegian; Norwegian Bokml",iso6392B:"nob",iso6391:"nb"},{name:"Nogai",iso6392B:"nog"},{name:"Norse, Old",iso6392B:"non"},{name:"Norwegian",iso6392B:"nor",iso6391:"no"},{name:"N'Ko",iso6392B:"nqo"},{name:"Pedi; Sepedi; Northern Sotho",iso6392B:"nso"},{name:"Nubian languages",iso6392B:"nub"},{name:"Classical Newari; Old Newari; Classical Nepal Bhasa",iso6392B:"nwc"},{name:"Chichewa; Chewa; Nyanja",iso6392B:"nya",iso6391:"ny"},{name:"Nyamwezi",iso6392B:"nym"},{name:"Nyankole",iso6392B:"nyn"},{name:"Nyoro",iso6392B:"nyo"},{name:"Nzima",iso6392B:"nzi"},{name:"Occitan (post 1500)",iso6392B:"oci",iso6391:"oc"},{name:"Ojibwa",iso6392B:"oji",iso6391:"oj"},{name:"Oriya",iso6392B:"ori",iso6391:"or"},{name:"Oromo",iso6392B:"orm",iso6391:"om"},{name:"Osage",iso6392B:"osa"},{name:"Ossetian; Ossetic",iso6392B:"oss",iso6391:"os"},{name:"Turkish, Ottoman (1500-1928)",iso6392B:"ota"},{name:"Otomian languages",iso6392B:"oto"},{name:"Papuan languages",iso6392B:"paa"},{name:"Pangasinan",iso6392B:"pag"},{name:"Pahlavi",iso6392B:"pal"},{name:"Pampanga; Kapampangan",iso6392B:"pam"},{name:"Panjabi; Punjabi",iso6392B:"pan",iso6391:"pa"},{name:"Papiamento",iso6392B:"pap"},{name:"Palauan",iso6392B:"pau"},{name:"Persian, Old (ca.600-400 B.C.)",iso6392B:"peo"},{name:"Persian",iso6392B:"per",iso6392T:"fas",iso6391:"fa"},{name:"Philippine languages",iso6392B:"phi"},{name:"Phoenician",iso6392B:"phn"},{name:"Pali",iso6392B:"pli",iso6391:"pi"},{name:"Polish",iso6392B:"pol",iso6391:"pl"},{name:"Pohnpeian",iso6392B:"pon"},{name:"Portuguese",iso6392B:"por",iso6391:"pt"},{name:"Prakrit languages",iso6392B:"pra"},{name:"Provenal, Old (to 1500); Occitan, Old (to 1500)",iso6392B:"pro"},{name:"Pushto; Pashto",iso6392B:"pus",iso6391:"ps"},{name:"Reserved for local use",iso6392B:"qaa-qtz"},{name:"Quechua",iso6392B:"que",iso6391:"qu"},{name:"Rajasthani",iso6392B:"raj"},{name:"Rapanui",iso6392B:"rap"},{name:"Rarotongan; Cook Islands Maori",iso6392B:"rar"},{name:"Romance languages",iso6392B:"roa"},{name:"Romansh",iso6392B:"roh",iso6391:"rm"},{name:"Romany",iso6392B:"rom"},{name:"Romanian; Moldavian; Moldovan",iso6392B:"rum",iso6392T:"ron",iso6391:"ro"},{name:"Rundi",iso6392B:"run",iso6391:"rn"},{name:"Aromanian; Arumanian; Macedo-Romanian",iso6392B:"rup"},{name:"Russian",iso6392B:"rus",iso6391:"ru"},{name:"Sandawe",iso6392B:"sad"},{name:"Sango",iso6392B:"sag",iso6391:"sg"},{name:"Yakut",iso6392B:"sah"},{name:"South American Indian languages",iso6392B:"sai"},{name:"Salishan languages",iso6392B:"sal"},{name:"Samaritan Aramaic",iso6392B:"sam"},{name:"Sanskrit",iso6392B:"san",iso6391:"sa"},{name:"Sasak",iso6392B:"sas"},{name:"Santali",iso6392B:"sat"},{name:"Sicilian",iso6392B:"scn"},{name:"Scots",iso6392B:"sco"},{name:"Selkup",iso6392B:"sel"},{name:"Semitic languages",iso6392B:"sem"},{name:"Irish, Old (to 900)",iso6392B:"sga"},{name:"Sign Languages",iso6392B:"sgn"},{name:"Shan",iso6392B:"shn"},{name:"Sidamo",iso6392B:"sid"},{name:"Sinhala; Sinhalese",iso6392B:"sin",iso6391:"si"},{name:"Siouan languages",iso6392B:"sio"},{name:"Sino-Tibetan languages",iso6392B:"sit"},{name:"Slavic languages",iso6392B:"sla"},{name:"Slovak",iso6392B:"slo",iso6392T:"slk",iso6391:"sk"},{name:"Slovenian",iso6392B:"slv",iso6391:"sl"},{name:"Southern Sami",iso6392B:"sma"},{name:"Northern Sami",iso6392B:"sme",iso6391:"se"},{name:"Sami languages",iso6392B:"smi"},{name:"Lule Sami",iso6392B:"smj"},{name:"Inari Sami",iso6392B:"smn"},{name:"Samoan",iso6392B:"smo",iso6391:"sm"},{name:"Skolt Sami",iso6392B:"sms"},{name:"Shona",iso6392B:"sna",iso6391:"sn"},{name:"Sindhi",iso6392B:"snd",iso6391:"sd"},{name:"Soninke",iso6392B:"snk"},{name:"Sogdian",iso6392B:"sog"},{name:"Somali",iso6392B:"som",iso6391:"so"},{name:"Songhai languages",iso6392B:"son"},{name:"Sotho, Southern",iso6392B:"sot",iso6391:"st"},{name:"Spanish; Castilian",iso6392B:"spa",iso6391:"es"},{name:"Sardinian",iso6392B:"srd",iso6391:"sc"},{name:"Sranan Tongo",iso6392B:"srn"},{name:"Serbian",iso6392B:"srp",iso6391:"sr"},{name:"Serer",iso6392B:"srr"},{name:"Nilo-Saharan languages",iso6392B:"ssa"},{name:"Swati",iso6392B:"ssw",iso6391:"ss"},{name:"Sukuma",iso6392B:"suk"},{name:"Sundanese",iso6392B:"sun",iso6391:"su"},{name:"Susu",iso6392B:"sus"},{name:"Sumerian",iso6392B:"sux"},{name:"Swahili",iso6392B:"swa",iso6391:"sw"},{name:"Swedish",iso6392B:"swe",iso6391:"sv"},{name:"Classical Syriac",iso6392B:"syc"},{name:"Syriac",iso6392B:"syr"},{name:"Tahitian",iso6392B:"tah",iso6391:"ty"},{name:"Tai languages",iso6392B:"tai"},{name:"Tamil",iso6392B:"tam",iso6391:"ta"},{name:"Tatar",iso6392B:"tat",iso6391:"tt"},{name:"Telugu",iso6392B:"tel",iso6391:"te"},{name:"Timne",iso6392B:"tem"},{name:"Tereno",iso6392B:"ter"},{name:"Tetum",iso6392B:"tet"},{name:"Tajik",iso6392B:"tgk",iso6391:"tg"},{name:"Tagalog",iso6392B:"tgl",iso6391:"tl"},{name:"Thai",iso6392B:"tha",iso6391:"th"},{name:"Tibetan",iso6392B:"tib",iso6392T:"bod",iso6391:"bo"},{name:"Tigre",iso6392B:"tig"},{name:"Tigrinya",iso6392B:"tir",iso6391:"ti"},{name:"Tiv",iso6392B:"tiv"},{name:"Tokelau",iso6392B:"tkl"},{name:"Klingon; tlhIngan-Hol",iso6392B:"tlh"},{name:"Tlingit",iso6392B:"tli"},{name:"Tamashek",iso6392B:"tmh"},{name:"Tonga (Nyasa)",iso6392B:"tog"},{name:"Tonga (Tonga Islands)",iso6392B:"ton",iso6391:"to"},{name:"Tok Pisin",iso6392B:"tpi"},{name:"Tsimshian",iso6392B:"tsi"},{name:"Tswana",iso6392B:"tsn",iso6391:"tn"},{name:"Tsonga",iso6392B:"tso",iso6391:"ts"},{name:"Turkmen",iso6392B:"tuk",iso6391:"tk"},{name:"Tumbuka",iso6392B:"tum"},{name:"Tupi languages",iso6392B:"tup"},{name:"Turkish",iso6392B:"tur",iso6391:"tr"},{name:"Altaic languages",iso6392B:"tut"},{name:"Tuvalu",iso6392B:"tvl"},{name:"Twi",iso6392B:"twi",iso6391:"tw"},{name:"Tuvinian",iso6392B:"tyv"},{name:"Udmurt",iso6392B:"udm"},{name:"Ugaritic",iso6392B:"uga"},{name:"Uighur; Uyghur",iso6392B:"uig",iso6391:"ug"},{name:"Ukrainian",iso6392B:"ukr",iso6391:"uk"},{name:"Umbundu",iso6392B:"umb"},{name:"Undetermined",iso6392B:"und"},{name:"Urdu",iso6392B:"urd",iso6391:"ur"},{name:"Uzbek",iso6392B:"uzb",iso6391:"uz"},{name:"Vai",iso6392B:"vai"},{name:"Venda",iso6392B:"ven",iso6391:"ve"},{name:"Vietnamese",iso6392B:"vie",iso6391:"vi"},{name:"Volapk",iso6392B:"vol",iso6391:"vo"},{name:"Votic",iso6392B:"vot"},{name:"Wakashan languages",iso6392B:"wak"},{name:"Wolaitta; Wolaytta",iso6392B:"wal"},{name:"Waray",iso6392B:"war"},{name:"Washo",iso6392B:"was"},{name:"Welsh",iso6392B:"wel",iso6392T:"cym",iso6391:"cy"},{name:"Sorbian languages",iso6392B:"wen"},{name:"Walloon",iso6392B:"wln",iso6391:"wa"},{name:"Wolof",iso6392B:"wol",iso6391:"wo"},{name:"Kalmyk; Oirat",iso6392B:"xal"},{name:"Xhosa",iso6392B:"xho",iso6391:"xh"},{name:"Yao",iso6392B:"yao"},{name:"Yapese",iso6392B:"yap"},{name:"Yiddish",iso6392B:"yid",iso6391:"yi"},{name:"Yoruba",iso6392B:"yor",iso6391:"yo"},{name:"Yupik languages",iso6392B:"ypk"},{name:"Zapotec",iso6392B:"zap"},{name:"Blissymbols; Blissymbolics; Bliss",iso6392B:"zbl"},{name:"Zenaga",iso6392B:"zen"},{name:"Standard Moroccan Tamazight",iso6392B:"zgh"},{name:"Zhuang; Chuang",iso6392B:"zha",iso6391:"za"},{name:"Zande languages",iso6392B:"znd"},{name:"Zulu",iso6392B:"zul",iso6391:"zu"},{name:"Zuni",iso6392B:"zun"},{name:"No linguistic content; Not applicable",iso6392B:"zxx"},{name:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",iso6392B:"zza"}],language_codes={};temps.map(function(e){var i;void 0!==e.iso6391&&(i=e.iso6391,language_codes[i]=e.name),void 0!==e.iso6392B&&(i=e.iso6392B,language_codes[i]=e.name),void 0!==e.iso6392T&&(i=e.iso6392T,language_codes[i]=e.name)}),language_codes.tu="Turkish";var home_page={initiated:!1,keys:{
focused_part:"menu_selection",menu_selection:0,v_keys:[0,0,0],parent_control_modal:0,user_account_modal:0},prev_focus_dom:null,menu_doms:$("#home-page .menu-item-container"),notification_timer:null,vod_categories:[],series_categories:[],channel_categories:[],sub_menu_doms:[],time_out:null,parent_control_doms:$(".parent-control-item"),language_doms:[],doms_translated:[],init:function(){this.prev_focus_dom=null,turn_off_page.prev_route="home-page","turn-off-page"!==current_route&&(current_route="home-page"),$("#loading-page").addClass("hide"),$("#login-container").hide(),$("#app").show(),this.sub_menu_doms=[];var e="",i=VodModel.getCategories(!1,!0);this.vod_categories=i,e=this.makeHomeCategoryDoms(i),$('.home-section-item-wrapper[data-kind="vod"] .home-section-sub-menus-container').html(e);var t=SeriesModel.getCategories(!1,!0);this.series_categories=t,e=this.makeHomeCategoryDoms(t),$('.home-section-item-wrapper[data-kind="series"] .home-section-sub-menus-container').html(e);var s=LiveModel.getCategories(!1,!0);this.channel_categories=s,e=this.makeHomeCategoryDoms(s),$('.home-section-item-wrapper[data-kind="channel"] .home-section-sub-menus-container').html(e),this.keys.v_keys=[0,0,0,0];var a=[];$(".home-section-item-wrapper").map(function(e,i){var t=$(i).find(".home-section-sub-menu-item");a.push(t)}),this.sub_menu_doms=a,this.prev_focus_dom=null,e="",languages.map(function(i,t){i.words[i.code]||console.log(i.name),e+='<div class="modal-operation-menu-type-3 language-item"                   data-sort_key="default"                   onclick="home_page.selectLanguage(\''+i.code+"',"+t+')"                   onmouseenter="home_page.hoverLanguage('+t+')"                   data-language="'+i.code+'"                >'+i.words[i.code]+"</div>"}),$("#select-language-body").html(e),$("#home-page").removeClass("hide"),this.language_doms=$(".language-item"),this.doms_translated=$("*").filter(function(){return void 0!==$(this).data("word_code")}),this.changeDomsLanguage(),this.hoverMainMenu(this.menu_doms[0],!0)},updateByCategoryHidden:function(e){var i,t=this.keys;switch(e){case"vod":i=VodModel.getCategories(!1,!0);break;case"live":i=LiveModel.getCategories(!1,!0);break;case"series":i=SeriesModel.getCategories(!1,!0)}var s=e;"live"===e&&(s="channel");var a=this.makeHomeCategoryDoms(i);$('.home-section-item-wrapper[data-kind="'+s+'"] .home-section-sub-menus-container').html(a);for(var o=$(".home-section-item-wrapper"),n=0;n<o.length;n++){var r=o[n];if($(r).data("kind")===s){var c=$(r).find(".home-section-sub-menu-item");t.v_keys[n]>=c.length&&(t.v_keys[n]=c.length-1),this.sub_menu_doms[n]=c;break}}this.hoverSubMenu(this.sub_menu_doms[t.menu_selection][t.v_keys[t.menu_selection]])},makeHomeCategoryDoms:function(e){var i="";return e.map(function(e,t){i+='<div class="home-section-sub-menu-item"                    data-index="'+t+'"                    onmouseenter="home_page.hoverSubMenu(this)"                     onclick="home_page.handleMenuClick()"                 >'+e.category_name+"</div>"}),i},exit:function(){$("#home-page").addClass("hide")},reEnter:function(){$("#home-page").removeClass("hide"),current_route="home-page"},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":turn_off_page.init(current_route);break;case"parent_control_modal":this.cancelResetParentAccount();break;case"user_account_modal":case"language_selection":$(".modal").modal("hide"),e.focused_part="menu_selection"}},changeKeyOrder:function(e){var i,t=this.keys,s=this.sub_menu_doms;if(0==e){var a=this.menu_doms.length-1;i=$(this.menu_doms[a]).closest(".home-section-item-container"),$(i).remove(),$("#home-section-items-wrapper").prepend(i);var o=t.v_keys[a];t.v_keys.splice(a),t.v_keys.unshift(o);var n=this.sub_menu_doms[a];s.splice(a,1),s.unshift(n),e=1}else if(e===this.menu_doms.length-1){i=$(this.menu_doms[0]).closest(".home-section-item-container"),$(i).remove(),$("#home-section-items-wrapper").append(i);var r=t.v_keys[0];t.v_keys.splice(0,1),t.v_keys.push(r);var c=this.sub_menu_doms[0];s.splice(0,1),s.push(c),e=this.menu_doms.length-2}return this.sub_menu_doms=s,e},showParentControlModal:function(){$("#parent-account-valid-error").hide(),$("#settings-modal").modal("hide"),$(".parent-modal-input-wrapper input").val(""),$("#parent-control-modal").modal("show"),this.keys.focused_part="parent_control_modal",$(this.parent_control_doms).removeClass("active"),this.keys.parent_control_modal=0,$(this.parent_control_doms[0]).addClass("active"),$(this.parent_control_doms[0]).find("input").focus()},clickParentControl:function(e){var i=this.keys;switch(i.parent_control_modal=e,i.parent_control_modal){case 0:case 1:case 2:$(this.parent_control_doms[e]).find("input").focus();var t=this;setTimeout(function(){var i=$(t.parent_control_doms[e]).find("input").val();$(t.parent_control_doms[e]).find("input")[0].setSelectionRange(i.length,i.length)},200);break;case 3:this.resetParentAccount();break;case 4:this.cancelResetParentAccount()}},resetParentAccount:function(){$("#parent-account-valid-error").hide();var e=$("#current_parent_password").val(),i=$("#new_parent_password").val(),t=$("#new_parent_password_confirm").val();return e!=parent_account_password?void $("#parent-account-valid-error").text("Current password does not match").slideDown():i!=t?void $("#parent-account-valid-error").text("Password does not match").slideDown():i?(parent_account_password=i,localStorage.setItem(storage_id+"parent_account_password",parent_account_password),$("#parent-control-modal").modal("hide"),void(this.keys.focused_part="menu_selection")):void $("#parent-account-valid-error").text("Password is required").slideDown()},cancelResetParentAccount:function(){$("#parent-control-modal").modal("hide"),this.keys.focused_part="menu_selection"},showUserAccounts:function(){$("#settings-modal").modal("hide"),$("#user-account-mac-address").text(mac_address),2==is_trial||1==is_trial?$("#user-account-is_trial").text("Active"):$("#user-account-is_trial").text("Trial"),$("#user-account-modal").modal("show"),$("#user-account-expire-date").text(expire_date),this.keys.focused_part="user_account_modal"},getSelectedLanguageWords:function(e){for(var i={},t=0;t<languages.length;t++)if(languages[t].code===e){i=languages[t].words;break}current_words=i},showLanguages:function(){$("#settings-modal").modal("hide");var e=this.keys,i=this.language_doms;i.map(function(i,t){$(t).data("language")==settings.language&&(e.language_selection=i)}),$(i).removeClass("active"),$(i[e.language_selection]).addClass("active"),$("#language-select-modal").modal("show"),this.hoverLanguage(0)},selectLanguage:function(e,i){settings.saveSettings("language",e,"");var t=this.keys;t.language_selection=i,$(this.language_doms).removeClass("active"),$(this.language_doms[i]).addClass("active"),$("#language-select-modal").modal("hide"),t.focused_part="menu_selection",this.changeDomsLanguage()},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language),this.doms_translated.map(function(e,i){var t=$(i).data("word_code");void 0!==current_words[t]&&$(i).text(current_words[t])})},hoverMainMenu:function(e,i){$(".home-section-item-wrapper").removeClass("active");var t=$(e).closest(".home-section-item-wrapper").data("index"),s=this.keys;if(s.focused_part="menu_selection",i){t=this.changeKeyOrder(t);$(".home-section-item-wrapper").map(function(e,i){$(i).data("index",e)})}s.menu_selection=t,this.menu_doms=$(".menu-item-container"),moveScrollPosition($("#home-section-items-wrapper"),$(e).closest(".home-section-item-container"),"horizontal",i),clearTimeout(this.time_out),this.time_out=setTimeout(function(){$(e).closest(".home-section-item-wrapper").addClass("active")},200),this.hoverSubMenu(this.sub_menu_doms[t][s.v_keys[t]])},hoverSubMenu:function(e){var i=$(e).data("index"),t=$(e).closest(".home-section-item-wrapper").data("index");this.keys.v_keys[t]=i,$(this.prev_focus_dom).removeClass("active"),this.prev_focus_dom=$(this.sub_menu_doms[t][i]),$(this.sub_menu_doms[t][i]).addClass("active"),moveScrollPosition($(e).closest(".home-section-sub-menus-container")[0],this.sub_menu_doms[t][i],"vertical",!1)},hoverParentControl:function(e){this.keys.parent_control_modal=e,$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[e]).addClass("active")},hoverLanguage:function(e){var i=this.keys,t=this.language_doms;i.language_selection=e,i.focused_part="language_selection",$(t).removeClass("active"),$(t[i.language_selection]).addClass("active"),moveScrollPosition($("#select-language-body"),t[i.language_selection],"vertical",!1)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":var i,t=$(this.menu_doms[e.menu_selection]).closest(".home-section-item-wrapper").data("kind"),s=e.v_keys[e.menu_selection];switch(t){case"channel":case"vod":case"series":var a;if("channel"===t?a=this.channel_categories:"vod"===t?a=this.vod_categories:"series"===t&&(a=this.series_categories),i=a[s],checkForAdult(i,"category",[]))return void parent_confirm_page.init("home-page");$("#home-page").addClass("hide"),"channel"===t?channel_page.init(i):vod_series_page.init(t,i);break;case"settings":switch(s){case 0:this.showParentControlModal();break;case 1:case 2:case 3:var o;1==s?o="live":2==s?o="vod":3==s&&(o="series"),$("#home-page").addClass("hide"),hide_category_page.init(o);break;case 4:this.showUserAccounts();break;case 5:this.showLanguages();break;case 6:playlist_page.init()}}break;case"parent_control_modal":if(e.parent_control_modal<3){$(this.parent_control_doms[e.parent_control_modal]).find("input").focus();var n=this;setTimeout(function(){var i=$(n.parent_control_doms[e.parent_control_modal]).find("input").val();console.log(i,e.parent_control_modal),$(n.parent_control_doms[e.parent_control_modal]).find("input")[0].setSelectionRange(i.length,i.length)},200)}else $(this.parent_control_doms[e.parent_control_modal]).trigger("click");break;case"language_selection":$(this.language_doms[e.language_selection]).trigger("click")}},handleMenusUpDown:function(e){var i=this.keys;switch(i.focused_part){case"menu_selection":var t=i.v_keys[i.menu_selection];t+=e,t<0&&(t=0),t>=this.sub_menu_doms[i.menu_selection].length&&(t=this.sub_menu_doms[i.menu_selection].length-1),i.v_keys[i.menu_selection]=t,this.hoverSubMenu(this.sub_menu_doms[i.menu_selection][t]);break;case"parent_control_modal":e>0?i.parent_control_modal<3&&(i.parent_control_modal+=e):i.parent_control_modal>=3?i.parent_control_modal=2:(i.parent_control_modal+=e,i.parent_control_modal<0&&(i.parent_control_modal=0)),$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[i.parent_control_modal]).addClass("active");break;case"language_selection":var s=this.language_doms;i.language_selection+=e,i.language_selection<0&&(i.language_selection=s.length-1),i.language_selection>=s.length&&(i.language_selection=0),this.hoverLanguage(i.language_selection)}},handleMenuLeftRight:function(e){var i=this.keys;switch(i.focused_part){case"menu_selection":i.menu_selection+=e,i.menu_selection<0&&(i.menu_selection=this.menu_doms.length-1),i.menu_selection>=this.menu_doms.length&&(i.menu_selection=0),this.hoverMainMenu(this.menu_doms[i.menu_selection],!0);break;case"parent_control_modal":i.parent_control_modal>=3&&(i.parent_control_modal+=e,i.parent_control_modal<3&&(i.parent_control_modal=3),i.parent_control_modal>4&&(i.parent_control_modal=4),$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[i.parent_control_modal]).addClass("active"))}},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},playlist_page={initiated:!1,keys:{focused_part:"playlist_selection",playlist_selection:0},playlist_doms:[],back_btn_dom:null,init:function(){if(!this.initiated){var e="",i=settings.playlist_id;playlist_urls.map(function(t,s){var a=i===t.id,o='<div class="playlist-state '+(a?"playing":"")+'"><i class="fa fa-play"></i></div>';e+='<div class="playlist-item-container"                       onmouseenter="playlist_page.hoverPlayListItem('+s+')"                       onclick="playlist_page.changePlaylist('+s+')"                   >                       <div class="playlist-item-wrapper">                           <span class="playlist-name">'+t.playlist_name+"</span>"+o+"</div>                    </div>"}),this.initiated=!0,$("#playlist-items-container").html(e),this.playlist_doms=$(".playlist-item-container"),this.back_btn_dom=$("#playlist-back-icon"),$("#notification-title").text(notification.title),$("#notification-content").text(notification.content),$("#playlist-device-id").text(mac_address),$("#playlist-device-key").text(device_key)}this.hoverPlayListItem(this.keys.playlist_selection),home_page.exit(),$("#playlist-page").removeClass("hide"),current_route="playlist-page"},hoverPlayListItem:function(e){var i=this.keys;i.focused_part="playlist_selection",i.playlist_selection=e,$(this.back_btn_dom).removeClass("active"),$(this.playlist_doms).removeClass("active"),$(this.playlist_doms[e]).addClass("active"),moveScrollPosition($("#playlist-items-container"),this.playlist_doms[e],"vertical",!1)},changePlaylist:function(e){var i=playlist_urls[e];i.id===settings.playlist_id?this.goBack():($(home_page.menu_doms).removeClass("active"),$(home_page.prev_focus_dom).removeClass("active"),$(this.playlist_doms).find(".playlist-state").removeClass("playing"),$($(this.playlist_doms[e]).find(".playlist-state")).addClass("playing"),settings.saveSettings("playlist_id",i.id,""),settings.saveSettings("playlist",i,"array"),current_route="login-page",$("#playlist-page").addClass("hide"),$("#loading-page").removeClass("hide"),parseM3uUrl(),login_page.proceed_login())},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":$(this.playlist_doms[e.playlist_selection]).trigger("click")}},handleMenuLeftRight:function(e){var i=this.keys;switch(i.focused_part){case"playlist_selection":i.playlist_selection;i.playlist_selection+=e,i.playlist_selection<0&&(i.playlist_selection=0),i.playlist_selection>=this.playlist_doms.length&&(i.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(i.playlist_selection)}},handleMenusUpDown:function(e){var i=this.keys;switch(i.focused_part){case"playlist_selection":i.playlist_selection+=e,i.playlist_selection<0&&(i.playlist_selection=0),i.playlist_selection>=this.playlist_doms.length&&(i.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(i.playlist_selection)}},goBack:function(){$("#playlist-page").addClass("hide"),home_page.reEnter()},HandleKey:function(e){switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-3);break;case tvKey.DOWN:this.handleMenusUpDown(3);break;case tvKey.ENTER:this.handleMenuClick()}}},channel_page={current_channel_id:0,full_screen_video:!1,full_screen_timer:null,progressbar_timer:null,player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],current_category_index:0,category_hover_timer:null,category_hover_timeout:300,channel_hover_timer:null,channel_hover_timeout:300,keys:{focused_part:"category_selection",category_selection:0,channel_selection:0,search_back_selection:0,search_selection:-1,prev_focus:"",video_control:0,catch_up_btn:0,epg_selection:0},category_doms:[],channel_doms:[],catch_up_btn_dom:$("#catch-up-btn"),video_control_doms:$("#channel-page .video-control-icon-wrapper"),play_icon_index:1,search_items:[],filtered_movies:[],next_programme_timer:null,programmes:[],short_epg_limit_count:30,prev_focus_dom:null,next_channel_timer:null,prev_keyword:"",search_timer:null,rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,epg_doms:[],archive_available:!1,current_channel:null,sort_changed:!1,rearrange_origin_position:0,init:function(e){this.sort_changed=!1,this.rearrange_mode=!1,this.prev_focus_dom=null,$("#catch-up-btn").removeClass("is-visible");var i=this.keys;home_page.exit(),$("#channel-page").removeClass("hide"),current_route="channel-page";var t=LiveModel.getCategories(!1,!0);this.categories=t;var s="",a=0;t.map(function(e,i){s+='<div class="channel-page-category-item"                    onmouseenter="channel_page.hoverCategory(this)"                    onclick="channel_page.handleMenuClick()"                    data-index="'+i+'"                >                    <span class="channel-category-name-wrapper">                        <span class="channel-category-number">'+(i+1)+'</span>                         <span class="channel-category-name">'+e.category_name+'</span>                    </span>                     <span class="channel-category-movie-counts-wrapper">                        <span class="channel-category-movie-counts">'+e.movies.length+'</span>                        <img src="'+HOST+'app_src_min/images/arrow-right.png">                    </span>                </div>'});for(var o=0;o<t.length;o++)if(t[o].category_id==e.category_id){a=o;break}$("#channel-page-categories-wrapper").html(s),this.category_doms=$(".channel-page-category-item"),this.current_category_index=-1,i.category_selection=a,this.hoverCategory(a),this.showCategoryChannels(),t[a].movies.length>0&&(this.hoverChannel(0,!0),this.showMovie(this.movies[0])),this.full_screen_video=!1},goBack:function(){var e=this.keys;switch(e.focused_part){case"video_control":$("#full-screen-information").slideUp(),e.focused_part="full_screen";break;case"full_screen":"block"===$("#full-screen-information").css("display")?(clearTimeout(this.full_screen_timer),this.hideFullScreenInfo()):(this.full_screen_video=!1,this.zoomInOut());break;case"search_selection":this.removeSearchResult();break;case"category_selection":case"channel_selection":this.Exit();break;case"epg_selection":$("#channel-epg-container").hide(),this.hoverCatchUpBtn();break;case"catch_up_btn":this.hoverChannel(e.channel_selection,!0)}},Exit:function(){try{media_player.close()}catch(e){console.log(e)}this.keys.focused_part="channel_selection",this.full_screen_video=!1,this.zoomInOut(),$("#channel-page").addClass("hide"),clearInterval(this.progressbar_timer),clearTimeout(this.full_screen_timer),clearTimeout(this.next_channel_timer),home_page.reEnter(),this.sort_changed&&home_page.updateByCategoryHidden("live")},reEnter:function(){$("#channel-page").removeClass("hide"),current_route="channel-page",this.showMovie(this.current_channel)},showCategoryChannels:function(){var e=this.keys;if(e.category_selection!==this.current_category_index){var i=this.categories,t=i[e.category_selection];$("#current-channel-category").text(t.category_name),$("#current-channel-group-name").text(t.category_name),this.movies=t.movies;var s="";this.movies.map(function(e,i){s+='<div class="channel-menu-item" data-channel_id="'+e.stream_id+'"                   data-index="'+i+'"                   onmouseenter="channel_page.hoverChannel(this, false)"                   onclick="channel_page.handleMenuClick()"                >                    <span class="channel-number">'+e.num+'</span>                    <img class="channel-icon" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></span><span class="channel-name">'+e.name+"</span>"+(LiveModel.favourite_ids.includes(e.stream_id)?'<i class="fa fa-star favourite-icon"></i>':"")+"</div>"}),$("#channel-page-menu-wrapper").html(s),e.channel_selection=0,this.channel_doms=$("#channel-page-menu-wrapper .channel-menu-item"),moveScrollPosition($("#channel-page-menu-wrapper"),this.channel_doms[0],"vertical",!0),this.current_category_index=e.category_selection,this.prev_keyword="",$("#search-value").val(""),$("#catch-up-btn").removeClass("is-visible")}},goChannelNum:function(e){if(this.full_screen_video){var i=this.channel_num;if(0!=i||0==i&&0!=e){i=10*i+e,this.channel_num=i,clearTimeout(this.channel_number_timer);var t=this;$("#typed-channel-number").text(i),this.channel_number_timer=setTimeout(function(){for(var e=t.movies,i=!1,s=0;s<e.length;s++)if(e[s].num===t.channel_num){i=!0,current_movie=e[s],t.showMovie(current_movie),t.current_channel_id=current_movie.stream_id,t.hoverChannel(t.channel_doms[s],!0),t.keys.focused_part="full_screen",t.showFullScreenInfo();break}i||showToast("Sorry","Channel does not exist"),t.channel_num=0,$("#typed-channel-number").text("")},2e3)}}},addOrRemoveFav:function(){var e=this.keys;if("channel_selection"===e.focused_part){var i=this.movies[e.channel_selection],t="add";if(LiveModel.favourite_ids.includes(i.stream_id)&&(t="remove"),"add"===t)LiveModel.addRecentOrFavouriteMovie(i,"favourite"),$(this.channel_doms[e.channel_selection]).append('<i class="fa fa-star favourite-icon"></i>');else{var s=this.categories[this.current_category_index];if(LiveModel.removeRecentOrFavouriteMovie(i.stream_id,"favourite"),$(this.channel_doms[e.channel_selection]).find(".favourite-icon").remove(),"favourite"===s.category_id){$(this.channel_doms[e.channel_selection]).remove();var a=$("#channel-page-menu-wrapper .channel-menu-item");this.channel_doms=a,0==a.length?this.hoverCategory(e.category_selection):(e.channel_selection>=a.length&&(e.channel_selection=a.length-1),this.hoverChannel(e.channel_selection,!0))}}try{for(var o=this.categories,n=0;n<o.length;n++)if("favourite"===o[n].category_id){var r=LiveModel.getRecentOrFavouriteCategory("favourite").movies.length;$(this.category_doms[n]).find(".channel-category-movie-counts").text(r);break}}catch(e){}}},showNextProgrammes:function(){var e=this.movies[this.keys.channel_selection];$("#channel-title").text(e.name),this.programmes.length>0&&$("#catch-up-btn").addClass("is-visible");var i,t,s=LiveModel.getNextProgrammes(this.programmes),a=s.current_program_exist,o=s.programmes,n="No Info",r="--:--",c="--:--",l="",d='<div class="no-programme-information">No Information</div>';if(a){i=o[0],n=getAtob(i.title),r=i.start.substring(11),o.length>1&&(t=o[1]),d='<span class="program-time">'+o[0].start.substring(11)+" ~ "+o[0].stop.substring(11)+"</span>"+n,$("#channel-current-programme-description").text(getAtob(o[0].description)),$("#channel-current-programme-infos").show();var _=parseInt((new Date).getTime()/60/1e3),m=getMinute(i.start),h=getMinute(i.stop),u=(_-m)/(h-m)*100;$("#channel-page-progress-container .progress-amount").css({width:u+"%"})}else $("#channel-current-programme-infos").hide(),o.length>0&&(t=o[0]);t&&(c=getAtob(t.title),l=t.start.substring(11)),$("#channel-page-current-programme").html(d),$(".full-screen-program-name-wrapper.current .full-screen-program-name").text(n),$(".full-screen-program-time.current").text(r),$(".full-screen-program-name-wrapper.next .full-screen-program-name").text(c),$(".full-screen-program-time.next").text(l)},updateNextProgrammes:function(){this.showNextProgrammes(),clearInterval(this.next_programme_timer);var e=this;this.next_programme_timer=setInterval(function(){e.showNextProgrammes()},6e4)},getEpgProgrammes:function(){var e=this,i=[];this.programmes=[],e.showNextProgrammes();var t=this.movies[this.keys.channel_selection];"xtreme"===settings.playlist_type&&$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+t.stream_id,success:function(t){i=t.epg_listings,i.map(function(e){e.stop=e.end}),e.programmes=i,e.updateNextProgrammes()}})},showFullScreenInfo:function(){if(this.full_screen_video){clearTimeout(this.full_screen_timer),$("#full-screen-information").slideDown();var e=this;this.full_screen_timer=setTimeout(function(){e.hideFullScreenInfo()},5e3)}},hideFullScreenInfo:function(){$("#full-screen-information").slideUp()},zoomInOut:function(){var e=this.keys;if(this.full_screen_video){$("#channel-page .player-container").addClass("expanded");try{media_player.setDisplayArea()}catch(e){}this.showFullScreenInfo(),e.focused_part="full_screen"}else{$("#channel-page .player-container").removeClass("expanded");try{media_player.setDisplayArea()}catch(e){}this.keys.focused_part="channel_selection",$("#full-screen-information").slideUp()}},showMovie:function(e){var i,t=e.stream_id;"xtreme"===settings.playlist_type?i=getMovieUrl(t,"live","ts"):"type1"===settings.playlist_type&&(i=e.url);try{media_player.close()}catch(e){}media_player.init("channel-page-video","channel-page");try{media_player.playAsync(i)}catch(e){}if(this.current_channel_id=t,this.current_channel=e,$("#full-screen-channel-title").text(e.name),$(".full-screen-channel-logo").attr("src",e.stream_icon),!checkForAdult(e,"movie",LiveModel.categories)){LiveModel.addRecentOrFavouriteMovie(e,"recent");for(var s=this.categories,a=0;a<s.length;a++)if("recent"===s[a].category_id){var o=LiveModel.getRecentOrFavouriteCategory("recent").movies.length;$(this.category_doms[a]).find(".channel-category-movie-counts").text(o);break}}},showNextChannel:function(e){var i=this.keys,t=i.focused_part;i.channel_selection+=e,i.channel_selection<0&&(i.channel_selection=0),i.channel_selection>=this.channel_doms.length&&(i.channel_selection=this.channel_doms.length-1);var s=this;setTimeout(function(){var e=s.movies[i.channel_selection];s.current_channel_id=e.stream_id,s.showMovie(s.movies[i.channel_selection])},400),this.hoverChannel(i.channel_selection,!0),"full_screen"===t&&(i.focused_part="full_screen"),this.showFullScreenInfo()},playOrPause:function(){if(media_player.state==media_player.STATES.PLAYING)try{media_player.pause(),this.video_control_doms[1]}catch(e){}else try{media_player.play()}catch(e){}},showSearchModal:function(){var e=this.keys;this.full_screen_video||"search_selection"===e.focused_part||(e.prev_focus=e.focused_part,$(".search-modal-container").show(),$("#search-value").val(""),$(".search-content-container").html(""),e.focused_part="search_selection",e.search_selection=-1,$("#search-value").focus()),this.toggleRearrangeMode(!1)},searchValueChange:function(){clearTimeout(this.search_timer);var e=this;this.search_timer=setTimeout(function(){var i=$("#search-value").val();(i=i.toLowerCase())!==e.prev_keyword&&e.renderSearchResults()},400)},renderSearchResults:function(){var e=$("#search-value").val(),i=LiveModel.getCategories(!1,!1),t=[];if(e.length>=2)for(var s=2;s<i.length;s++){var a=i[s].movies.filter(function(i){return i.name.toLowerCase().includes(e)});t=t.concat(a)}t.sort(function(e,i){return e.name.localeCompare(i.name)});var o="";t.map(function(e,i){o+='<div class="search-item-wrapper"                    onmouseenter="channel_page.hoverSearchItem('+i+')"                     onclick="channel_page.searchItemClick()"                >'+e.name+"</div>"}),$(".search-content-container").html(o),this.search_items=$(".search-item-wrapper"),this.filtered_movies=t},handleSearchItem:function(e){var i=this.keys;if(0!=$(".search-item-wrapper").length){if(i.search_selection+=e,i.search_selection<0)return $("#search-value").focus(),void setTimeout(function(){var e=$("#search-value").val();$("#search-value")[0].setSelectionRange(e.length,e.length)},200);$("#search-value").blur(),i.search_selection>=this.search_items.length&&(i.search_selection=this.search_items.length-1),$(".search-item-wrapper").removeClass("active"),$(this.search_items[i.search_selection]).addClass("active"),moveScrollPosition($(".search-content-container")[0],this.search_items[i.search_selection],"vertical",!1)}},removeSearchResult:function(){$(".search-modal-container").hide(),$(".search-content-container").html(""),this.keys.focused_part=this.keys.prev_focus,this.search_selection=-1},searchItemClick:function(){var e=this.keys;this.removeSearchResult();for(var i=this.filtered_movies,t=i[e.search_selection],s=LiveModel.getCategories(!1,!0),a=0,o=0;o<s.length;o++)if(s[o].category_id==t.category_id){a=o;break}showLoader(!0),this.is_loading=!0;var n=this.categories[a].movies;a!==this.current_category_index&&(this.hoverCategory(a),this.showCategoryChannels());var r=this;setTimeout(function(){for(var e=0;e<n.length;e++)if(n[e].stream_id==t.stream_id&&n[e].name===t.name){r.hoverChannel(e,!0),r.showMovie(n[e]);break}showLoader(!1),r.is_loading=!1},200)},toggleRearrangeMode:function(e){if(this.rearrange_mode)return this.rearrange_mode=!1,void $(this.prev_focus_dom).removeClass("rearrange");if(e){var i=this.keys;if("category_selection"===i.focused_part||"channel_selection"===i.focused_part){this.rearrange_mode=!0;var t=0;if("channel_selection"===i.focused_part)t=i.channel_selection;else for(var s=this.categories[i.category_selection],a=0;a<LiveModel.categories.length;a++)if(LiveModel.categories[a].category_id==s.category_id){t=a;break}this.rearrange_origin_position=t,$(this.prev_focus_dom).addClass("rearrange")}}},changeChannelDomContent:function(e,i,t){$(e).find(".channel-number").text(i.num),$(e).find(".channel-icon").attr("src",i.stream_icon),$(e).data("index",t),$(e).find(".channel-name").text(i.name),$(e).data("channel_id",i.stream_id)},changeCategoryDomContent:function(e,i,t){$(e).find(".channel-category-name").text(i.category_name),$(e).data("index",t),$(e).find(".channel-category-movie-counts").text(i.movies.length)},showCatchUpModal:function(){var e=this.keys,i=this.movies[e.channel_selection],t=1==i.tv_archive;this.archive_available=t;var s=settings.time_format,a="Y-MM-DD HH:mm";"12"===s&&(a="Y-MM-DD hh:mm A");if(this.programmes.length>0){showLoader(!0),this.is_loading=!0;var o=0;$("#epg-channel-name").text(i.name);var n="";$("#channel-page-content-container").hide();var r,c=this.programmes,l="adfd";r=moment().unix();var d=moment().format("Y-MM-DD"),_=!1;c.map(function(e,i){var s=getLocalChannelTime(e.start),c=getLocalChannelTime(e.stop),m=s.format(a),h=c.format(a);m.includes(l)||(n+='<div class="epg-date-label">'+m.substr(0,10)+"</div>",l=m.substr(0,10));var u="";_||(l<=d?(c=c.unix(),s=s.unix(),c<=r&&t&&(u='<img class="channel-epg-available-icon" src="'+HOST+'app_src_min/images/r_btn.png">'),c>=r&&(s<=r&&(o=i),_=!0)):_=!0),n+='<div class="epg-item-wrapper"                        onmouseenter="channel_page.hoverEpgItem('+i+',false)"                         onclick="channel_page.handleMenuClick()"                     >                        <div class="epg-time-wrapper">'+m.substr(11)+" : "+h.substr(11)+"   </div>"+u+'<div class="epg-item-name">'+getAtob(e.title)+"</div>                    </div>"}),$("#channel-epg-wrapper").html(n),this.epg_doms=$(".epg-item-wrapper"),$("#channel-epg-container").show(),this.hoverEpgItem(o,!0),showLoader(!1),this.is_loading=!1}else showToast("Sorry","No Epg Exists")},showEpgVideo:function(){var e=this.keys,i=this.movies[e.channel_selection],t=this.programmes[e.epg_selection],s=moment().unix(),a=getLocalChannelTime(t.start),o=getLocalChannelTime(t.stop);if(a.unix()>=s||o.unix()>=s)return void showToast("Sorry","Can't play current programme.<br>Try the previous programme");var n=LiveModel.getProgrammeVideoUrl(i.stream_id,t),r=n.url;try{media_player.close()}catch(e){}$("#channel-page").addClass("hide"),vod_series_player_page.init(null,"epg","channel-page",r)},bulkMove:function(e){var i=this.keys;switch(i.focused_part){case"category_selection":var t=i.category_selection;if((t+=14*e)>=this.categories.length)return;if(t<0)return;this.hoverCategory(t);break;case"channel_selection":var s=i.channel_selection;if((s+=14*e)>=this.channel_doms.length)return;if(s<0)return;this.hoverChannel(s,!0);break;case"full_screen":this.showNextChannel(-1*e)}},hoverCategory:function(e){if(!show_keyboard){var i=this.keys;i.focused_part="category_selection",i.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[i.category_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),
$(this.category_doms[i.category_selection]).addClass("rearrange")),this.prev_focus_dom=this.category_doms[i.category_selection],moveScrollPosition($("#channel-page-categories-wrapper"),this.category_doms[i.category_selection],"vertical",!1),$("#channel-page-categories-container").removeClass("collapsed")}},hoverChannel:function(e,i){if(!show_keyboard){var t=this.keys;t.focused_part="channel_selection",t.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[t.channel_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.channel_doms[t.channel_selection]).addClass("rearrange")),this.prev_focus_dom=this.channel_doms[t.channel_selection];var s=this;moveScrollPosition($("#channel-page-menu-wrapper"),this.channel_doms[t.channel_selection],"vertical",!1),clearTimeout(this.channel_hover_timer),this.channel_hover_timer=setTimeout(function(){s.getEpgProgrammes()},this.channel_hover_timeout),i&&$("#channel-page-categories-container").addClass("collapsed"),$("#catch-up-btn").removeClass("is-visible")}},hoverCatchUpBtn:function(){show_keyboard||($(this.prev_focus_dom).removeClass("active"),this.prev_focus_dom=$("#catch-up-btn"),$("#catch-up-btn").addClass("active"),this.keys.focused_part="catch_up_btn")},hoverEpgItem:function(e,i){if(!show_keyboard){var t=this.keys;t.focused_part="epg_selection",t.epg_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.epg_doms[e]).addClass("active"),this.prev_focus_dom=this.epg_doms[e],moveScrollPosition($("#channel-epg-wrapper"),this.epg_doms[e],"vertical",i)}},hoverSearchItem:function(e){if(!show_keyboard){this.keys.search_selection=e,$(this.search_items).removeClass("active"),$(this.search_items[e]).addClass("active"),moveScrollPosition($(".search-content-container")[0],this.search_items[e],"vertical",!1)}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":if(checkForAdult(this.categories[e.category_selection],"category",[]))return void parent_confirm_page.init(current_route);this.showCategoryChannels(),this.toggleRearrangeMode(!1);break;case"video_control":$(this.video_control_doms[e.video_control]).trigger("click");break;case"full_screen":this.full_screen_video=!1,this.zoomInOut();break;case"channel_selection":var i=this.movies[e.channel_selection].stream_id;this.current_channel_id==i?(this.full_screen_video=!0,this.zoomInOut()):this.showMovie(this.movies[e.channel_selection]),this.toggleRearrangeMode(!1);break;case"search_selection":var t=$(".search-item-wrapper")[e.search_selection];$(t).trigger("click");break;case"catch_up_btn":this.showCatchUpModal();break;case"epg_selection":this.showEpgVideo()}},handleMenusUpDown:function(e){var i=this.keys,t=this.channel_doms;switch(i.focused_part){case"category_selection":var s=i.category_selection;if(i.category_selection+=e,i.category_selection<0)return void(i.category_selection=0);if(i.category_selection>=this.category_doms.length)return void(i.category_selection=this.category_doms.length-1);if(this.rearrange_mode){if(s==i.category_selection)return;var a=this.categories[s],o=this.categories[i.category_selection];this.changeCategoryDomContent(this.category_doms[s],o,s),this.changeCategoryDomContent(this.category_doms[i.category_selection],a,i.category_selection),this.category_doms=$(".channel-page-category-item"),clearTimeout(this.rearrange_timer);for(var n=this,r=0,c=0;c<LiveModel.categories.length;c++)if(o.category_id==LiveModel.categories[c].category_id){r=c;break}LiveModel.categories=makeRearrangeArray(LiveModel.categories,n.rearrange_origin_position,r),n.rearrange_origin_position=r,n.categories=LiveModel.getCategories(!1,!0),this.rearrange_timer=setTimeout(function(){var e=localStorage.getItem(storage_id+settings.playlist.id+"_category_orders");e=e?JSON.parse(e):[];for(var i=0;i<e.length;i++)if(e[i].id==a.category_id){e.splice(i,1);break}e.push({id:a.category_id,position:r}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(e)),LiveModel.category_orders=e,LiveModel.updateRecentAndFavouritePosition()},this.rearrange_timeout),this.sort_changed=!0}this.hoverCategory(i.category_selection);break;case"channel_selection":var s=i.channel_selection;if(i.channel_selection+=e,i.channel_selection>=t.length)return void(i.channel_selection=t.length-1);if(i.channel_selection<0)return void(i.channel_selection=0);if(this.rearrange_mode){var l,d,_;if(i.channel_selection===s)return;_=makeRearrangeArray(this.movies,s,i.channel_selection),this.movies=_;var m=this.categories[i.category_selection];m.movies=_,l=this.movies[s],d=this.movies[i.channel_selection],this.changeChannelDomContent(this.channel_doms[s],l,s),this.changeChannelDomContent(this.channel_doms[i.channel_selection],d,i.channel_selection),this.channel_doms=$("#channel-page-menu-wrapper .channel-menu-item"),clearTimeout(this.rearrange_timer),this.rearrange_timer=setTimeout(function(){var e=localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders");e=e?JSON.parse(e):{};var t=[];e[m.category_id]&&(t=e[m.category_id]);for(var s=0;s<t.length;s++)if(t[s].id==d.stream_id&&t[s].name==d.name){t.splice(s,1);break}t.push({id:d.stream_id,name:d.name,position:i.channel_selection}),e[m.category_id]=t,localStorage.setItem(storage_id+settings.playlist.id+"_channel_orders",JSON.stringify(e))},this.rearrange_timeout)}this.hoverChannel(i.channel_selection,!0);break;case"full_screen":this.showNextChannel(-1*e);break;case"search_selection":this.handleSearchItem(e);break;case"epg_selection":i.epg_selection+=e,i.epg_selection<0&&(i.epg_selection=0),i.epg_selection>=this.epg_doms.length&&(i.epg_selection=this.epg_doms.length-1),this.hoverEpgItem(i.epg_selection,!0)}},handleMenuLeftRight:function(e){var i=this.keys;switch(i.focused_part){case"category_selection":e>0&&this.movies.length>0&&(i.focused_part="channel_selection",$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverChannel(i.channel_selection,!0));break;case"channel_selection":e<0?($(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverCategory(i.category_selection)):e>0&&this.programmes.length>0&&this.hoverCatchUpBtn();break;case"catch_up_btn":e<0&&(this.movies.length>0?this.hoverChannel(i.channel_selection,!0):this.hoverCategory(i.category_selection))}},HandleKey:function(e){if(!this.is_loading){this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:this.bulkMove(-1);break;case tvKey.CH_DOWN:this.bulkMove(1);break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:case tvKey.PLAY:case tvKey.PLAYPAUSE:this.playOrPause();break;case tvKey.BLUE:this.showSearchModal();break;case tvKey.RED:return void this.toggleRearrangeMode(!0)}}}},media_player,vod_summary_page={keys:{index:0},min_btn_index:0,action_btns:$(".vod-action-btn"),is_favourite:!1,is_loading:!1,init:function(){var e=this;$("#vod-summary-image-wrapper img").attr("src",""),$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#vod-summary-image-wrapper img").attr("src",current_movie.stream_icon?current_movie.stream_icon:HOST+"app_src_min/images/logo1.png"),this.is_favourite=!VodModel.favourite_ids.includes(current_movie.stream_id),this.toggleFavourite(),$("#vod-summary-name").text(current_movie.name),$("#vod-watch-trailer-button").hide(),$("#vod-summary-release-date").text(""),$("#vod-summary-release-genre").text(""),$("#vod-summary-release-length").text(""),$("#vod-summary-release-age").text(""),$("#vod-summary-release-director").text(""),$("#vod-summary-release-cast").text(""),$("#vod-summary-description").text(""),current_movie.youtube_trailer="",this.hoverButton(1);var i=0;i=void 0===current_movie.rating||""===current_movie.rating?0:parseFloat(current_movie.rating),isNaN(i)&&(i=0),$("#vod-rating-container").find(".rating-upper").css({width:10*i+"%"}),$("#vod-rating-mark").text(i.toFixed(1)),VodModel.favourite_ids.includes(current_movie.stream_id)?($(this.action_btns[2]).data("action","remove"),$(this.action_btns[2]).text(void 0!==current_words.remove_favorites?current_words.remove_favorites:"Remove Fav")):($(this.action_btns[2]).data("action","add"),$(this.action_btns[2]).text(void 0!==current_words.add_to_favorite?current_words.add_to_favorite:"Add Fav")),$("#vod-series-page").addClass("hide"),$("#vod-summary-page").removeClass("hide"),current_route="vod-summary-page",this.min_btn_index=1,current_movie.info={},"xtreme"===settings.playlist_type&&(showLoader(!0),this.is_loading=!0,$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+current_movie.stream_id).done(function(i){var t=i.info;$("#vod-summary-release-date").text(t.releasedate),$("#vod-summary-release-genre").text(t.genre),$("#vod-summary-release-length").text(t.duration),$("#vod-summary-release-age").text(t.age),$("#vod-summary-release-director").text(t.director),$("#vod-summary-release-cast").text(t.cast),$("#vod-summary-description").text(t.description),current_movie.info=t;var s="";try{s=t.backdrop_path[0],$(".vod-series-background-img").attr("src",s).removeClass("hide")}catch(e){}current_movie.youtube_trailer=i.info.youtube_trailer,void 0!==t.youtube_trailer&&null!=t.youtube_trailer&&""!==t.youtube_trailer.trim()&&(e.min_btn_index=0,$("#vod-watch-trailer-button").show()),showLoader(!1),e.is_loading=!1}).fail(function(){showLoader(!1),e.is_loading=!1}))},goBack:function(){$("#vod-summary-page").addClass("hide"),$("#vod-series-page").removeClass("hide"),current_route="vod-series-page";var e=vod_series_page.keys,i=vod_series_page.menu_doms;if(this.is_favourite)0==$(i[e.menu_selection]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$($(i[e.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>'));else{VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite");var t=vod_series_page.categories[e.category_selection],i=vod_series_page.menu_doms;"favourite"===t.category_id?($(i[e.menu_selection]).remove(),i.length>0?(i.map(function(e,i){$(i).data("index",e)}),i=$("#vod-series-menus-container .vod-series-menu-item-container"),vod_series_page.menu_doms=i,e.menu_selection>=vod_series_page.menu_doms.length&&(e.menu_selection=vod_series_page.menu_doms.length-1),$(vod_series_page.menu_doms[e.menu_selection]).addClass("active")):(e.focused_part="category_selection",$(vod_series_page.category_doms[e.category_selection]).addClass("active"))):$($(i[e.menu_selection]).find(".favourite-badge")).remove()}},showTrailerVideo:function(){""===current_movie.youtube_trailer||void 0==current_movie.youtube_trailer?($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")):trailer_page.init(current_movie.youtube_trailer,current_route)},showMovie:function(){$("#vod-summary-page").addClass("hide");var e=VodModel.getCategories(!0,!1);checkForAdult(current_movie,"movie",e)||VodModel.addRecentOrFavouriteMovie(current_movie,"recent"),vod_series_player_page.makeEpisodeDoms("vod-summary-page"),vod_series_player_page.init(current_movie,"movies","vod-summary-page","",!0)},toggleFavourite:function(){var e=this.action_btns[2];this.is_favourite=!this.is_favourite,this.is_favourite?$(e).text(void 0!==current_words.remove_favorites?current_words.remove_favorites:"Remove Fav"):$(e).text(void 0!==current_words.add_to_favorite?current_words.add_to_favorite:"Add Fav")},hoverButton:function(e){var i=this.keys;i.index=e,$(".vod-action-btn").removeClass("active"),$($(".vod-action-btn")[i.index]).addClass("active")},keyMove:function(e){var i=this.min_btn_index,t=this.keys;t.index+=e,t.index<i&&(t.index=2),t.index>2&&(t.index=i),this.hoverButton(t.index)},keyClick:function(){var e=this.keys,i=$(".vod-action-btn"),t=i[e.index];$(t).trigger("click")},HandleKey:function(e){if(this.is_loading)return void(e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack()));switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.keyMove(-1);break;case tvKey.RIGHT:this.keyMove(1);break;case tvKey.ENTER:this.keyClick();break;case tvKey.YELLOW:this.toggleFavourite()}}},vod_series_player_page={player:null,back_url:"vod-summary-page",show_control:!1,timeOut:null,has_episodes:!1,keys:{focused_part:"control_bar",control_bar:0,info_bar:0,operation_modal:0,subtitle_audio_selection_modal:0,audio_selection_modal:0,prev_focus:"",resume_bar:0,episode_selection:0},current_subtitle_index:-1,current_audio_track_index:-1,subtitle_audio_menus:[],forwardTimer:null,current_time:0,show_subtitle:!1,show_audio_track:!1,video_control_doms:$("#vod-series-video-controls-container .video-control-icon i"),video_info_doms:$("#vod-series-video-controls-container .video-info-btn"),vod_info_timer:null,current_movie:{},resume_time:0,resume_timer:null,episode_doms:[],resume_bar_doms:$("#video-resume-modal .resume-action-btn"),seek_timer:null,seek_interval_timer:null,current_movie_type:"",video_duration:0,last_key_time:0,slider_element:$("#vod-series-video-progressbar-container .video-progress-bar-slider")[0],init:function(e,i,t,s){this.current_movie=e,this.current_time=0,this.video_duration=0,$("#vod-series-player-page").removeClass("hide"),this.showControlBar(!0);var a=$(this.video_control_doms[2]);$(a).removeClass("fa-play"),$(a).addClass("fa-pause"),this.hoverVideoControlIcon(2),$("#vod-series-player-page").find(".video-current-time").text("--:--"),$("#vod-series-player-page").find(".video-total-time").text("--:--");var o=this,n=this.slider_element;$(n).attr({min:0,max:100}),$(n).rangeslider({polyfill:!1,rangeClass:"rangeslider",onSlideEnd:function(e,i){o.sliderPositionChanged(i)}}),$(n).val(0).change(),$(n).rangeslider("update"),clearTimeout(this.resume_timer);var r;if("movies"===i||"movie"===i)"xtreme"===settings.playlist_type?r=getMovieUrl(e.stream_id,"movie",e.container_extension):"type1"===settings.playlist_type&&(r=e.url),$("#vod-series-video-title").html(e.name);else if("series"===i)"xtreme"===settings.playlist_type?r=getMovieUrl(e.id,"series",e.container_extension):"type1"===settings.playlist_type&&(r=e.url),$("#vod-series-video-title").html(e.title);else if("epg"===i){r=s;var c=channel_page.programmes[channel_page.keys.epg_selection],l=getAtob(c.title)+"  <span class='player-epg-title-time'>"+c.start.substr(11)+"~"+c.stop.substr(11)+"</span>";$("#vod-series-video-title").html(l)}this.back_url=t;try{media_player.close()}catch(e){}try{media_player.init("vod-series-player-video","vod-series-player-page"),media_player.setDisplayArea()}catch(e){}try{media_player.playAsync(r)}catch(e){}var d;d="movies"===i||"movie"===i?"stream_id":"id","movies"===i||"movie"===i||"series"===i?(d=e[d].toString(),"movies"===i||"movie"===i?void 0!==VodModel.saved_video_times[d]?this.resume_time=VodModel.saved_video_times[d]:this.resume_time=0:"series"===i&&(void 0!==SeriesModel.saved_video_times[d]?this.resume_time=SeriesModel.saved_video_times[d]:this.resume_time=0)):this.resume_time=0,current_route="vod-series-player-video",this.current_subtitle_index=-1,this.current_audio_track_index=-1,this.show_subtitle=!1,this.current_movie_type=i},sliderPositionChanged:function(e){this.hoverSlider(),media_player.videoObj.currentTime=e,this.current_time=e,$(this.slider_element).val(e).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(e))},makeEpisodeDoms:function(e){if(this.keys.episode_selection=0,"episode-page"===e){var i=current_season.episodes;this.episodes=i,this.has_episodes=!0;var t="";i.map(function(e,i){t+='<div class="player-season-item"                        onclick="vod_series_player_page.showSelectedEpisode()"                        onmouseenter="vod_series_player_page.hoverEpisode('+i+')"                    >                        <div class="player-episode-title-container">                            <div class="player-episode-number">'+(i+1)+'</div>                             <div class="player-episode-title max-line-2">'+e.title+"</div>                        </div>                    </div>"}),$("#player-seasons-container").html(t),this.episode_doms=$(".player-season-item"),$("#player-seasons-container").removeClass("expanded"),$("#player-seasons-container").show()}else this.has_episodes=!1,$("#player-seasons-container").html(""),this.episode_doms=$(".player-season-item"),this.episode_doms=[],$("#player-seasons-container").hide()},showResumeBar:function(){var e=this.keys;if(this.resume_time>0){"resume_bar"!==e.focused_part&&(e.prev_focus=e.focused_part);var i=1e3;"lg"===platform&&(i=1);var t=media_player.formatTime(this.resume_time/i);$("#vod-resume-time").text(t),$("#video-resume-modal").show(),this.hideControlBar(),clearTimeout(this.resume_timer),this.hoverResumeBtn(0)}},Exit:function(){this.saveVideoTime(),current_route=this.back_url;try{media_player.close()}catch(e){console.log(e)}$("#"+media_player.parent_id).find(".video-error").hide(),$("#"+media_player.parent_id).find(".subtitle-container").text(""),$("#vod-series-player-page").addClass("hide")},saveVideoTime:function(){try{var e,i,t;"samsung"===platform?(t=2e3,e=webapis.avplay.getCurrentTime(),i=webapis.avplay.getDuration()):"lg"===platform&&(e=media_player.videoObj.currentTime,i=media_player.videoObj.duration,t=2);var s=this.current_movie;i-e>=t?("movies"!==this.current_movie_type&&"movie"!==this.current_movie_type||VodModel.saveVideoTime(s.stream_id,e),"series"===this.current_movie_type&&SeriesModel.saveVideoTime(s.id,e)):("movies"!==this.current_movie_type&&"movie"!==this.current_movie_type||VodModel.removeVideoTime(s.stream_id),"series"===this.current_movie_type&&SeriesModel.removeVideoTime(s.id))}catch(e){}},goBack:function(){$(".modal").modal("hide");var e=this.keys;if("resume_bar"===e.focused_part&&($("#video-resume-modal").css("display"),e.focused_part="control_bar"),this.show_control)this.hideControlBar();else if("control_bar"===e.focused_part||"info_bar"===e.focused_part||"episode_selection"===e.focused_part||"slider"===e.focused_part){if(this.Exit(),"vod-summary-page"===this.back_url){current_route="vod-series-page",$("#vod-series-page").removeClass("hide");var i=vod_series_page.keys.menu_selection;i>=vod_series_page.menu_doms.length?(vod_series_page.menu_doms.length,vod_series_page.hoverMovieItem(vod_series_page.menu_doms[i]),vod_series_page.renderCategoryContent()):vod_series_page.hoverMovieItem(vod_series_page.menu_doms[i])}if("episode-page"===this.back_url){current_route="series-summary-page",$("#series-summary-page").removeClass("hide");var t=series_summary_page.keys.season_selection;series_summary_page.hoverEpisode(t,series_summary_page.keys.episode_selection[t],!1)}"channel-page"===this.back_url&&(channel_page.reEnter(),channel_page.hoverEpgItem(channel_page.keys.channel_selection,!0))}"subtitle_audio_selection_modal"===e.focused_part&&(e.focused_part="control_bar",$("#subtitle-selection-modal").modal("hide")),"vod_info"===e.focused_part&&($("#vod-video-info-container").hide(),clearTimeout(this.vod_info_timer),e.focused_part=e.prev_focus),"resume_bar"===e.focused_part&&($("#video-resume-modal").hide(),e.focused_part=e.prev_focus,clearTimeout(this.resume_timer))},playPauseVideo:function(){this.showControlBar(!1);var e=this.video_control_doms,i=$(e[2]);if(media_player.state===media_player.STATES.PLAYING)try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}else if(media_player.state===media_player.STATES.PAUSED)try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}},seekTo:function(e){if("samsung"===platform){var i=(new Date).getTime()/1e3;if(i-this.last_key_time<.1)return;this.last_key_time=i,0===this.current_time&&(this.current_time=media_player.current_time/1e3);var t,s;if(0!=this.video_duration)t=this.video_duration;else try{t=webapis.avplay.getDuration()/1e3,this.video_duration=t}catch(e){t=0,this.video_duration=0}if(!t)return;if((s=this.current_time+e)<0)return void this.showNextVideo(-1);if(s>=t)return void this.showNextVideo(1);if(this.current_time=s,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)),$(this.slider_element).val(s).change(),clearTimeout(this.seek_timer),media_player.state===media_player.STATES.PLAYING)try{media_player.pause()}catch(e){}$("#"+media_player.parent_id).find(".video-loader").show(),this.seek_timer=setTimeout(function(){webapis.avplay.seekTo(1e3*s),setTimeout(function(){try{media_player.play()}catch(e){}},200)},500)}else{0===this.current_time&&(this.current_time=media_player.videoObj.currentTime);var t=media_player.videoObj.duration,s=this.current_time+e;s<0&&(s=0),s>=t&&(s=t),this.current_time=s,media_player.videoObj.currentTime=s,t>0&&($(this.slider_element).val(s).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)))}},showSelectedEpisode:function(){var e=series_summary_page.keys,i=series_summary_page.keys.season_selection,t=this.keys;if(e.episode_selection[i]!=t.episode_selection){e.episode_selection[i]=t.episode_selection;var s=this.episodes,a=s[t.episode_selection];this.saveVideoTime(),this.resume_time=0;try{media_player.close()}catch(e){}current_episode=a,vod_series_player_page.init(current_episode,"series","episode-page",""),this.hoverEpisode(t.episode_selection)}},showNextVideo:function(e){switch(this.saveVideoTime(),this.resume_time=0,this.back_url){case"vod-summary-page":var i=vod_series_page.keys;if(i.menu_selection+=e,i.menu_selection<0)return void(i.menu_selection=0);if(i.menu_selection>=vod_series_page.movies.length)return void(i.menu_selection=vod_series_page.movies.length-1);current_movie=vod_series_page.movies[i.menu_selection],this.init(current_movie,"movie","vod-summary-page","");break;case"episode-page":var i=series_summary_page.keys,t=series_summary_page.episode_doms[i.season_selection],s=i.episode_selection[i.season_selection];if((s+=e)<0)return i.season_selection-=1,i.season_selection<0?void(i.season_selection=0):(i.episode_selection[i.season_selection]=current_series.seasons[i.season_selection].episodes.length-1,void series_summary_page.handleMenuClick());if(s>=t.length)return i.season_selection+=1,i.season_selection>=current_series.seasons.length?void(i.season_selection=current_series.seasons.length-1):(i.episode_selection[i.season_selection]=0,void series_summary_page.handleMenuClick());var a=current_season.episodes;current_episode=a[s],i.episode_selection[i.season_selection]=s,vod_series_player_page.init(current_episode,"series","episode-page","");break;case"channel-page":var o=channel_page.keys.epg_selection;if((o+=e)<0)return;if(o>=channel_page.programmes.length)return;channel_page.keys.epg_selection=o,channel_page.showEpgVideo()}},showControlBar:function(e){$("#vod-series-video-controls-container").slideDown(),this.show_control=!0;var i=this;e&&(this.hoverVideoControlIcon(2),$("#player-seasons-container").removeClass("expanded")),clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){i.hideControlBar()},1e4)},hideControlBar:function(){$("#vod-series-video-controls-container").slideUp(),this.show_control=!1},makeMediaTrackElement:function(e,i){var t="",s=0;"TEXT"===i&&(s=1,t='<div class="modal-operation-menu-type-2 subtitle-item"                    onmouseenter="vod_series_player_page.hoverSubtitle(0)"                     onclick="vod_series_player_page.handleMenuClick()"                 >                   <input class="magic-radio" type="radio" name="radio" id="disable-subtitle" value="-1">                   <label for="disable-subtitle">Disabled</label>                </div>');var a="track_lang";return"TEXT"!==i&&(a="language"),e.map(function(e,i){var o=e.extra_info;t+='<div class="modal-operation-menu-type-2 subtitle-item"                    onmouseenter="vod_series_player_page.hoverSubtitle('+(i+s)+')"                     onclick="vod_series_player_page.handleMenuClick()"                 >                    <input class="magic-radio" type="radio" name="radio" id="disable-subtitle"                        value="'+e.index+'"                    >                    <label for="disable-subtitle">'+o[a]+"</label>                </div>"}),t},showSubtitleAudioModal:function(e){var i=this;this.hideControlBar();try{var t=media_player.getSubtitleOrAudioTrack(e);if(console.log(e),$("#vod-series-player-operation-modal").modal("hide"),t.length>0){this.keys.prev_focus=this.keys.focused_part,"TEXT"==e?$("#subtitle-modal-title").text("Subtitle"):$("#subtitle-modal-title").text("Audio Track"),this.keys.focused_part="subtitle_audio_selection_modal",$("#subtitle-selection-modal").find(".modal-operation-menu-type-2").removeClass("active");var s=this.makeMediaTrackElement(t,e);$("#subtitle-selection-container").html(s),$("#subtitle-selection-modal").modal("show");var a=$("#subtitle-selection-modal .subtitle-item");this.subtitle_audio_menus=a,$(a[0]).find("input").prop("checked",!0),this.hoverSubtitle(0);var o="TEXT"===e?this.current_subtitle_index:this.current_audio_track_index;t.map(function(e,t){e.index==o&&(i.keys.subtitle_audio_selection_modal=t,$(a).removeClass("active"),$(a).find("input").prop("checked",!0),$(a[t]).find("input").prop("checked",!0),i.hoverSubtitle(t))});var n=$("#subtitle-selection-modal").find(".modal-btn-2");$(n).removeClass("active")}else this.keys.focused_part=this.keys.prev_focus,"TEXT"===e?showToast("Sorry","No Subtitles exists"):showToast("Sorry","No Audio exists")}catch(e){$("#vod-series-player-operation-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,showToast("Sorry","Video not loaded yet")}},cancelSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},confirmSubtitle:function(){if($("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,$("#subtitle-modal-title").text().toLowerCase().includes("subtitle")){this.current_subtitle_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val();try{this.show_subtitle=!0,media_player.setSubtitleOrAudioTrack("TEXT",parseInt(this.current_subtitle_index)),$("#vod-series-player-page").find(".subtitle-container").css({visibility:"visible"})}catch(e){}console.log(this.current_subtitle_index)}else{this.current_audio_track_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val();try{media_player.setSubtitleOrAudioTrack("AUDIO",parseInt(this.current_audio_track_index))}catch(e){}console.log(this.current_audio_track_index)}},removeAllActiveClass:function(){$(this.video_control_doms).removeClass("active"),$(this.video_info_doms).removeClass("active"),$(this.video_control_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$("#vod-series-player-page .rangeslider").removeClass("active")},videoFinishedCallBack:function(){switch(this.back_url){case"vod-summary-page":var e=vod_series_page.keys;e.menu_selection<vod_series_page.movies.length-1&&this.showNextVideo(1);break;case"episode-page":var e=series_summary_page.keys;e.episode_selection[e.season_selection]<current_season.episodes.length-1||e.season_selection<current_series.seasons.length-1?this.showNextVideo(1):(this.hideControlBar(),this.goBack());break;case"channel-page":channel_page.keys.epg_selection<channel_page.programmes.length-1&&this.showNextVideo(1)}},hoverSubtitle:function(e){var i=this.keys;i.focused_part="subtitle_audio_selection_modal",$(this.subtitle_audio_menus).removeClass("active"),e>=0?(i.subtitle_audio_selection_modal=e,i.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2&&moveScrollPosition($("#subtitle-selection-container"),this.subtitle_audio_menus[i.subtitle_audio_selection_modal],"vertical",!1)):i.subtitle_audio_selection_modal=this.subtitle_audio_menus.length+e,$(this.subtitle_audio_menus[i.subtitle_audio_selection_modal]).addClass("active")},hoverSlider:function(){this.removeAllActiveClass(),this.keys.focused_part="slider",$("#vod-series-player-page .rangeslider").addClass("active")},hoverVideoControlIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1),this.removeAllActiveClass();var i=this.keys;i.focused_part="control_bar",i.control_bar=e,$(this.video_control_doms[e]).addClass("active")},hoverVideoInfoIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1);var i=this.keys;this.removeAllActiveClass(),i.focused_part="info_bar",i.info_bar=e,$(this.video_info_doms[e]).addClass("active")},hoverEpisode:function(e){$("#player-seasons-container").addClass("expanded"),this.showControlBar(!1);var i=this.keys;this.removeAllActiveClass(),i.focused_part="episode_selection",i.episode_selection=e,$(this.episode_doms[e]).addClass("active"),moveScrollPosition($("#player-seasons-container"),this.episode_doms[i.episode_selection],"horizontal",!1)},hoverResumeBtn:function(e){var i=this.keys;i.resume_bar=e,i.focused_part="resume_bar",$(this.resume_bar_doms).removeClass("active"),$(this.resume_bar_doms[e]).addClass("active"),clearTimeout(this.resume_timer),this.resume_timer=setTimeout(function(){$("#video-resume-modal").hide(),i.focused_part=i.prev_focus},15e3)},handleMenuClick:function(){var e=this.keys;if("resume_bar"===e.focused_part&&"none"===$("#video-resume-modal").css("display")&&(e.focused_part="control_bar"),!this.show_control&&("control_bar"===e.focused_part||"info_bar"===e.focused_part||"episode_selection"===e.focused_part||"slider"===e.focused_part))return void this.showControlBar(!0);switch(e.focused_part){case"control_bar":this.showControlBar(!1),$(this.video_control_doms[e.control_bar]).trigger("click");break;case"info_bar":this.show_control&&(this.showControlBar(!1),$(this.video_info_doms[e.info_bar]).find(".video-info-icon").trigger("click"));break;case"episode_selection":this.showControlBar(!1),$(this.episode_doms[e.episode_selection]).trigger("click");break;case"resume_bar":if($("#video-resume-modal").hide(),e.focused_part=e.prev_focus,0==e.resume_bar)if("samsung"===platform)try{var i=webapis.avplay.getCurrentTime();i<this.resume_time&&(webapis.avplay.seekTo(this.resume_time),$(this.slider_element).val(this.resume_time/1e3).change())}catch(e){}else if("lg"===platform)try{var i=media_player.videoObj.currentTime;if(i<this.resume_time){media_player.videoObj.currentTime=this.resume_time,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(this.resume_time));var t=media_player.videoObj.duration;t>0&&$(this.slider_element).val(this.resume_time).change()}}catch(e){}break;case"subtitle_audio_selection_modal":e.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).trigger("click"):($(this.subtitle_audio_menus).find("input").prop("checked",!1),$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).find("input").prop("checked",!0))}},handleMenuLeftRight:function(e){var i=this.keys;if(("control_bar"===i.focused_part||"info_bar"===i.focused_part||"slider"===i.focused_part)&&!this.show_control)return void this.seekTo(30*e);switch(i.focused_part){case"slider":this.seekTo(30*e),
this.showControlBar(!1);break;case"control_bar":i.control_bar+=e,i.control_bar<0&&(i.control_bar=0),i.control_bar>=this.video_control_doms.length&&(i.control_bar=this.video_control_doms.length-1),this.hoverVideoControlIcon(i.control_bar);break;case"info_bar":i.info_bar+=e,i.info_bar<0&&(i.info_bar=0),i.info_bar>=this.video_info_doms.length&&(i.info_bar=this.video_info_doms.length-1),this.hoverVideoInfoIcon(i.info_bar);break;case"episode_selection":$(this.episode_doms).removeClass("active"),i.episode_selection+=e,i.episode_selection<0&&(i.episode_selection=0),i.episode_selection>=this.episode_doms.length&&(i.episode_selection=this.episode_doms.length-1),this.hoverEpisode(i.episode_selection);break;case"subtitle_audio_selection_modal":if(i.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2)var t=this.subtitle_audio_menus.length;i.subtitle_audio_selection_modal+=e,i.subtitle_audio_selection_modal<t-2&&(i.subtitle_audio_selection_modal=t-2),i.subtitle_audio_selection_modal>=t&&(i.subtitle_audio_selection_modal=t-1),this.hoverSubtitle(i.subtitle_audio_selection_modal)}},handleMenuUpDown:function(e){var i=this.keys;if(("control_bar"===i.focused_part||"info_bar"===i.focused_part||"slider"===i.focused_part||"episode_selection"===i.focused_part)&&!this.show_control)return void this.showControlBar(!0);switch(i.focused_part){case"slider":e>0&&this.hoverVideoControlIcon(2);break;case"control_bar":e>0?(i.prev_focus="info_bar",this.hoverVideoInfoIcon(0)):this.hoverSlider();break;case"info_bar":e<0&&this.hoverVideoControlIcon(2),this.has_episodes&&e>0&&this.hoverEpisode(i.episode_selection);break;case"episode_selection":e<0&&this.hoverVideoInfoIcon(i.info_bar);break;case"subtitle_audio_selection_modal":i.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?e<0&&(i.subtitle_audio_selection_modal=this.subtitle_audio_menus.length-3):i.subtitle_audio_selection_modal+=e,i.subtitle_audio_selection_modal<0&&(i.subtitle_audio_selection_modal=0),this.hoverSubtitle(i.subtitle_audio_selection_modal);break;case"resume_bar":var t=this.resume_bar_doms;i.resume_bar+=e,i.resume_bar<0&&(i.resume_bar=0),i.resume_bar>=t.length&&(i.resume_bar=t.length-1),this.hoverResumeBtn(i.resume_bar)}},HandleKey:function(e){switch(e.keyCode){case tvKey.MediaFastForward:this.seekTo(30);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.MediaRewind:this.seekTo(-30);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.MediaPause:this.playPauseVideo("pause");break;case tvKey.MediaPlay:this.playPauseVideo("play");break;case tvKey.MediaPlayPause:this.playPauseVideo("");break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:"movies"===this.current_movie_type||"movie"===this.current_movie_type?current_movie.is_favourite?(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),current_movie.is_favourite=!1):(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),current_movie.is_favourite=!0):current_series.is_favourite?(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),current_series.is_favourite=!1):(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),current_series.is_favourite=!0)}}},trailer_page={player:null,done:!1,back_url:"home-page",is_paused:!1,is_loading:!1,init:function(e,i){showLoader(!0),this.is_loading=!0,this.back_url=i,this.is_paused=!1,$("#vod-summary-page").addClass("hide"),$("#series-summary-page").addClass("hide"),$("#trailer-player-page").show(),current_route="trailer-page",trailer_page.player=new YT.Player("trailer-player",{height:"100%",width:"100%",videoId:e,events:{onReady:trailer_page.onPlayerReady,onStateChange:trailer_page.onPlayerStateChange}}),$("#trailer-player").on("load",function(){$("#trailer-player").contents().find(".ytp-chrome-top-buttons").hide(),$("#trailer-player").contents().find(".ytp-right-controls").hide(),showLoader(!1),trailer_page.is_loading=!1,$(document.getElementById("trailer-player").contentWindow.document).keydown(function(e){switch(e.keyCode){case tvKey.RETURN:trailer_page.goBack();break;case tvKey.RIGHT:trailer_page.seekTo(5);break;case tvKey.LEFT:trailer_page.seekTo(-5);break;case tvKey.ENTER:trailer_page.playOrPause()}})})},goBack:function(){current_route=this.back_url,this.player.stopVideo(),$("#trailer-player-page").hide(),$("#trailer-player").remove(),$("#trailer-player-page").html('<div id="trailer-player"></div>'),"vod-summary-page"===this.back_url&&$("#vod-summary-page").removeClass("hide"),"series-summary-page"===this.back_url&&$("#series-summary-page").removeClass("hide")},onPlayerReady:function(e){e.target.playVideo()},onPlayerStateChange:function(e){},seekTo:function(e){var i=this.player.getCurrentTime(),t=i+e,s=this.player.getDuration();t<0&&(t=0),t>s&&(t=s),this.player.seekTo(t)},playOrPause:function(){this.is_paused?this.player.playVideo():this.player.pauseVideo(),this.is_paused=!this.is_paused},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.RIGHT:this.seekTo(5);break;case tvKey.LEFT:this.seekTo(-5);break;case tvKey.ENTER:this.playOrPause()}}},series_summary_page={keys:{focused_part:"season_selection",season_selection:0,episode_selection:[],action_btn:0},min_btn_index:0,episode_doms:[],current_season_index:0,hover_season_timer:null,is_loading:!1,action_btns:$(".series-action-btn"),is_favourite:!1,prev_focus_dom:null,season_doms:[],init:function(){this.prev_focus_dom=null,this.current_season_index=-1,showLoader(!0),this.is_loading=!0,this.is_favourite=!SeriesModel.favourite_ids.includes(current_series.series_id),this.toggleFavourite();var e=this;$(".vod-series-summary-contents-container").css({visibility:"visible"}),$("#season-episodes-container").removeClass("visible"),current_route="series-summary-page",$("#episode-items-wrapper").html(""),$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#series-summary-image-wrapper img").attr("src",""),$("#series-summary-image-wrapper img").attr("src",current_series.cover?current_series.cover:HOST+"app_src_min/images/logo1.png"),$("#series-summary-name").text(current_series.name),$("#series-summary-release-date").text(current_series.releasedate),$("#series-summary-release-genre").text(current_series.genre),$("#series-summary-release-length").text(current_series.duration),$("#series-summary-release-director").text(current_series.director),$("#series-summary-release-cast").text(current_series.cast),$("#series-summary-description").text(current_series.plot),this.min_btn_index=1,this.hoverButton(1),$(this.action_btns[0]).hide();var i=0;i=void 0===current_series.rating||""===current_series.rating?0:parseFloat(current_series.rating),isNaN(i)&&(i=0),$("#series-rating-container").find(".rating-upper").css({width:10*i+"%"}),$("#series-rating-mark").text(i.toFixed(1)),$("#vod-series-page").addClass("hide"),$("#series-summary-page").removeClass("hide"),this.keys.focused_part="episode_selection";var t=SeriesModel.getCategories(!0,!1);checkForAdult(current_series,"movie",t)||SeriesModel.addRecentOrFavouriteMovie(current_series,"recent"),"xtreme"===settings.playlist_type?$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_series_info&series_id="+current_series.series_id).done(function(i){current_series.info=i.info;var t=i.seasons;if(i.episodes&&(t&&t.length>0||Object.keys(i.episodes).length>0)){var s=i.episodes;t&&0!=t.length?t.map(function(e){e.episodes=s[e.season_number.toString()]}):(t=[],Object.keys(s).map(function(e,i){t.push({name:"Season "+(i+1),cover:HOST+"app_src_min/images/series-icon.png",episodes:s[e]})}));var a=t.filter(function(e){return e.episodes&&e.episodes.length>0}),o=Object.keys(s);if(o.length>a.length){for(var n=0;n<a.length;n++)a[n].name="Season "+(n+1);for(var n=a.length;n<o.length;n++)a.push({name:"Season "+(n+1),episodes:s[(n+1).toString()]})}current_series.seasons=a,e.showSeriesInfo()}else showLoader(!1),e.is_loading=!1,showToast("Sorry","No seasons available"),e.goBack()}).fail(function(){showLoader(!1),e.is_loading=!1,showToast("Sorry","No seasons available"),e.goBack()}):"type1"===settings.playlist_type&&(current_series.seasons.map(function(e){e.episodes=current_series.episodes[e.name]}),this.showSeriesInfo())},showSeriesInfo:function(){var e="";current_series.seasons.map(function(i,t){e+='<div class="season-item-container"                    onclick="series_summary_page.handleMenuClick()"                 >'+i.name+"</div>"}),$("#season-items-wrapper").html(e),this.season_doms=$(".season-item-container"),this.keys.season_selection=0;try{$("#selected-season-name").text(current_series.seasons[0].name);var i="";try{i=current_series.info.backdrop_path[0],i&&$(".vod-series-background-img").attr("src",i).removeClass("hide")}catch(e){console.log(e)}}catch(e){console.log(e)}this.showEpisodes(),this.hoverButton(1),current_series.info.youtube_trailer&&(this.min_btn_index=0,$(this.action_btns[0]).show()),showLoader(!1),this.is_loading=!1},showEpisodes:function(){var e=this.keys,i=current_series.seasons,t="";i.map(function(e,i){var s=e.episodes,a='<div class="season-episode-items-container">                    <div class="season-episode-items-wrapper">';s&&s.length>0&&s.map(function(e,t){var s=HOST+"app_src_min/images/default_episode.png",o="No Info";e.info&&(e.info.movie_image&&(s=e.info.movie_image),e.info.duration&&(o=e.info.duration)),a+='<div class="episode-item-container">                            <div class="episode-item-wrapper"                                onmouseenter="series_summary_page.hoverEpisode('+i+","+t+',false)"                                onclick="series_summary_page.handleMenuClick()">                                <div class="episode-item-img-wrapper">                                    <img class="episode-item-img" src="'+s+'" onerror="this.src=\''+HOST+'app_src_min/images/default_episode.png\'">                                </div>                                 <div class="episode-item-info-container">                                    <div class="episode-item-title">'+(e.title?e.title:"Episode "+(i+1))+'</div>                                    <div class="episode-item-info">'+o+"</div>                                 </div>                             </div>                        </div>"}),a+="</div></div>",t+=a}),$("#episode-items-wrapper").html(t),$("#episode-items-wrapper").scrollTop(0);var s=[];e.episode_selection=[],$(".season-episode-items-wrapper").map(function(i,t){s.push($(t).find(".episode-item-wrapper")),e.episode_selection.push(0)}),this.episode_doms=s},goBack:function(){var e=this.keys;switch(e.focused_part){case"episode_selection":$("#season-episodes-container").removeClass("visible"),$(".vod-series-summary-contents-container").css({visibility:"visible"}),this.hoverButton(e.action_btn);break;case"action_btn":current_route="vod-series-page",$("#series-summary-page").addClass("hide"),$("#vod-series-page").removeClass("hide");var e=vod_series_page.keys,i=vod_series_page.menu_doms;if(this.is_favourite)0==$(i[e.menu_selection]).find(".favourite-badge").length&&(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),$($(i[e.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>'));else{SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite");var t=vod_series_page.categories[e.category_selection],i=vod_series_page.menu_doms;"favourite"===t.category_id?($(i[e.menu_selection]).remove(),i.length>0?(i.map(function(e,i){$(i).data("index",e)}),i=$("#vod-series-menus-container .vod-series-menu-item-container"),vod_series_page.menu_doms=i,e.menu_selection>=vod_series_page.menu_doms.length&&(e.menu_selection=vod_series_page.menu_doms.length-1),$(vod_series_page.menu_doms[e.menu_selection]).addClass("active")):(e.focused_part="category_selection",$(vod_series_page.category_doms[e.category_selection]).addClass("active"))):$($(i[e.menu_selection]).find(".favourite-badge")).remove()}}},toggleFavourite:function(){var e=this.action_btns[2];this.is_favourite=!this.is_favourite,this.is_favourite?$(e).text(void 0!==current_words.remove_favorites?current_words.remove_favorites:"Remove Fav"):$(e).text(void 0!==current_words.add_to_favorite?current_words.add_to_favorite:"Add Fav")},showTrailerVideo:function(){current_series.info&&current_series.info.youtube_trailer?trailer_page.init(current_series.info.youtube_trailer,current_route):($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show"))},showSeasons:function(){var e=this.keys;current_series.seasons.length>0?($(".vod-series-summary-contents-container").css({visibility:"hidden"}),$("#season-episodes-container").addClass("visible"),this.hoverEpisode(e.season_selection,e.episode_selection[e.season_selection],!0)):showToast("Sorry","No seasons and episodes available<br>Please try again")},hoverEpisode:function(e,i,t){var s=this.keys;s.episode_selection[e]=i,s.season_selection=e,s.focused_part="episode_selection",$(this.prev_focus_dom).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e]).addClass("active");var a=this.episode_doms[e][i];$(a).addClass("active");var o=$(a).closest(".season-episode-items-wrapper");moveScrollPosition($("#episode-items-wrapper"),o,"vertical",!1),moveScrollPosition(o,$(a).closest(".episode-item-container"),"horizontal",t),moveScrollPosition($("#season-items-wrapper"),this.season_doms[s.season_selection],"vertical",!1),this.prev_focus_dom=a},hoverButton:function(e){var i=this.keys;i.focused_part="action_btn",i.action_btn=e,$("#select-season-btn").removeClass("active"),$(this.episode_doms).removeClass("active"),$(this.action_btns).removeClass("active"),$(this.action_btns[e]).addClass("active")},handleMenuLeftRight:function(e){var i=this.keys;switch(i.focused_part){case"episode_selection":if(i.episode_selection[i.season_selection]+=e,i.episode_selection[i.season_selection]<0)return void(i.episode_selection[i.season_selection]=0);if(i.episode_selection[i.season_selection]>=this.episode_doms[i.season_selection].length)return void(i.episode_selection[i.season_selection]=this.episode_doms[i.season_selection].length-1);this.hoverEpisode(i.season_selection,i.episode_selection[i.season_selection],!0);break;case"action_btn":i.action_btn+=e,i.action_btn>2&&(i.action_btn=2),i.action_btn<this.min_btn_index&&(i.action_btn=this.min_btn_index),this.hoverButton(i.action_btn)}},handleMenuUpDown:function(e){var i=this.keys;switch(i.focused_part){case"episode_selection":i.season_selection+=e,i.season_selection<0&&(i.season_selection=0),i.season_selection>=current_series.seasons.length&&(i.season_selection=current_series.seasons.length-1),this.hoverEpisode(i.season_selection,i.episode_selection[i.season_selection],!0)}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"episode_selection":$("#series-summary-page").addClass("hide");var i=e.episode_selection[e.season_selection];current_season=current_series.seasons[e.season_selection];var t=current_season.episodes;current_episode=t[i],vod_series_player_page.makeEpisodeDoms("episode-page"),vod_series_player_page.init(current_episode,"series","episode-page","",!0),vod_series_player_page.keys.episode_selection=i;break;case"action_btn":$(this.action_btns[e.action_btn]).trigger("click")}},HandleKey:function(e){if(this.is_loading)return void(e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack()));switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},vod_series_page={player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],category_hover_timer:null,category_hover_timeout:300,keys:{focused_part:"category_selection",category_selection:0,menu_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,year_filter_selection:0},category_doms:[],menu_doms:[],top_menu_doms:$("#vod-series-page .top-menu"),current_movie_type:"movie",sort_key:"vod_sort",search_key_timer:"",search_key_timout:400,current_render_count:0,render_count_increment:40,is_drawing:!1,prev_keyword:"",prev_dom:null,sort_doms:$("#sort-modal-container .sort-modal-item"),year_initiated:!1,year_filter_doms:[],init:function(e,i){this.prev_dom=null,this.is_drawing=!1;var t=this.keys;$(".vod-series-type-txt").addClass("hide"),$(".vod-series-type-txt."+e).removeClass("hide");var s=settings[e+"_sort"];$(this.top_menu_doms[1]).data("word_code",s),$(this.top_menu_doms[1]).text(current_words[s]?current_words[s]:settings.sort_keys[s]),home_page.exit(),$("#vod-series-page").removeClass("hide"),current_route="vod-series-page",this.current_movie_type=e,"vod"===e?(this.sort_key="vod_sort",this.categories=VodModel.getCategories(!1,!0)):(this.sort_key="series_sort",this.categories=SeriesModel.getCategories(!1,!0));var a="";this.categories.map(function(e,i){a+='<div class="vod-series-category-item" data-index="'+i+'"   onmouseenter="vod_series_page.hoverCategory(this)"    onclick="vod_series_page.handleMenuClick()"> '+e.category_name+"</div>"}),$("#vod-series-categories-container").html(a),this.category_doms=$(".vod-series-category-item"),t.focused_part="category_selection",t.category_selection=0,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.current_category_index=-1;for(var o=this.categories,n=0;n<o.length;n++)if(o[n].category_id==i.category_id){t.category_selection=n;break}this.showCategoryContent(),this.hoverCategory(this.category_doms[t.category_selection])},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":e.focused_part="category_selection",this.hoverCategory(this.category_doms[e.category_selection]);break;case"category_selection":$("#vod-series-page").addClass("hide"),home_page.reEnter();break;case"top_menu_selection":$("#vod-series-search-input").blur(),this.hoverCategory(this.category_doms[e.category_selection]);break;case"sort_selection":$("#sort-modal-container").removeClass("visible"),this.hoverTopMenu(1);break;case"year_filter_selection":$("#year-filter-modal-container").removeClass("visible"),this.hoverTopMenu(2)}},showCategoryContent:function(){var e=this.keys;if(this.current_category_index!==e.category_selection){var i=this.categories[e.category_selection];this.current_render_count=0,$("#vod-series-menus-container").html(""),this.prev_keyword="",$("#vod-series-search-input").val("");var t=i.movies.filter(function(e){return!0}),s=settings[this.current_movie_type+"_sort"];this.movies=getSortedMovies(t,s),this.renderCategoryContent(),$("#vod-series-menus-container").scrollTop(0),e.menu_selection=0,this.current_category_index=e.category_selection,$("#vod-series-current-category").text(i.category_name),$("#vod-series-current-movie-selection").text(0)}},renderCategoryContent:function(){var e="",i=HOST+"app_src_min/images/movie-icon.png",t="stream_icon";if("vod"!==this.current_movie_type&&(t="cover"),$("#vod-series-current-movie-count").text(this.movies.length),this.current_render_count<this.movies.length){this.is_drawing=!0,showLoader(!0);var s=this;setTimeout(function(){s.is_drawing=!1,showLoader(!1)},1e3);var a,o;"vod"===this.current_movie_type||"movie"===this.current_movie_type?(o=VodModel.movie_key,a=VodModel.favourite_ids):(o=SeriesModel.movie_key,a=SeriesModel.favourite_ids),this.movies.slice(this.current_render_count,this.current_render_count+this.render_count_increment).map(function(n,r){var c=a.includes(n[o]);e+='<div class="vod-series-menu-item-container" data-stream_id="'+n.stream_id+'"    data-index="'+(s.current_render_count+r)+'"    onmouseenter="vod_series_page.hoverMovieItem(this)"   onclick="vod_series_page.handleMenuClick()">   <div class="vod-series-menu-item">'+(c?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'       <img class="vod-series-icon" src="'+n[t]+'" onerror="this.src=\''+i+'\'">       <div class="vod-series-menu-item-title-wrapper">           <div class="vod-series-menu-item-title max-line-2">'+n.name+"           </div>       </div>   </div></div>"}),this.current_render_count+=this.render_count_increment,$("#vod-series-menus-container").append(e),this.menu_doms=$("#vod-series-menus-container .vod-series-menu-item-container")}},addOrRemoveFav:function(){var e=this.keys;if("menu_selection"===e.focused_part){var i,t,s=this.menu_doms,a=this.movies;if("vod"===this.current_movie_type||"movie"===this.current_movie_type?(t=VodModel.movie_key,i=VodModel.favourite_ids):(t=SeriesModel.movie_key,i=SeriesModel.favourite_ids),i.includes(a[e.menu_selection][t])){$($(s[e.menu_selection]).find(".favourite-badge")).remove(),"vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel.removeRecentOrFavouriteMovie(a[e.menu_selection][t],"favourite"):SeriesModel.removeRecentOrFavouriteMovie(a[e.menu_selection][t],"favourite");if("favourite"===this.categories[this.current_category_index].category_id){$(s[e.menu_selection]).remove();var s=$("#vod-series-menus-container .vod-series-menu-item-container");s.length>0?(s.map(function(e,i){$(i).data("index",e)}),this.menu_doms=s,e.menu_selection>=this.menu_doms.length&&(e.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[e.menu_selection]),$("#vod-series-current-movie-selection").text(e.menu_selection+1)):(this.hoverCategory(this.category_doms[e.category_selection]),$("#vod-series-current-movie-selection").text(0)),$("#vod-series-current-movie-count").text(this.menu_doms.length)}}else $($(s[e.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>'),"vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel.addRecentOrFavouriteMovie(a[e.menu_selection],"favourite"):SeriesModel.addRecentOrFavouriteMovie(a[e.menu_selection],"favourite")}},searchMovie:function(){$("#vod-series-search-input").focus(),setTimeout(function(){var e=$("#vod-series-search-input").val();$("#vod-series-search-input")[0].setSelectionRange(e.length,e.length)},200)},searchValueChange:function(){clearTimeout(this.search_key_timer);var e=this;this.search_key_timer=setTimeout(function(){var i=$("#vod-series-search-input").val();if(e.prev_keyword!==i){var t=e.categories[e.current_category_index],s=JSON.parse(JSON.stringify(t.movies));s.sort(function(e,i){return e.name.localeCompare(i.name)});var a=[];""===i?a=s:(i=i.toLowerCase(),a=s.filter(function(e){return e.name.toLowerCase().includes(i)})),e.movies=a,$("#vod-series-menus-container").html(""),e.current_render_count=0,e.renderCategoryContent(),e.prev_keyword=i}},this.search_key_timout)},showSortModal:function(){var e=settings[this.current_movie_type+"_sort"],i=0;this.sort_doms.map(function(t,s){$(s).data("sort_key")==e&&(i=t)}),$("#sort-modal-container").addClass("visible"),this.hoverSortItem(i)},showYearFilterModal:function(){if(!this.year_initiated){for(var e=parseInt(moment().format("Y")),i='<div class="sort-modal-item"                    data-year="all"                    onmouseenter="vod_series_page.hoverYearFilter(0)"                    onclick="vod_series_page.handleMenuClick()"                    data-word_code="all"                 >All</div>',t=0;t<30;t++){var s=e-t;i+='<div class="sort-modal-item"                        data-year="'+s+'"                        onmouseenter="vod_series_page.hoverYearFilter('+(t+1)+')"                        onclick="vod_series_page.handleMenuClick()"                    >'+s+"</div>"}$("#year-filter-modal-container .sort-modal-items-wrapper").html(i),this.year_filter_doms=$("#year-filter-modal-container .sort-modal-item")}$("#year-filter-modal-container").addClass("visible"),this.hoverYearFilter(0)},hoverYearFilter:function(e){if(!show_keyboard){var i=this.keys;i.focused_part="year_filter_selection",i.year_filter_selection=e,$(this.prev_dom).removeClass("active"),$(this.year_filter_doms[e]).addClass("active"),this.prev_dom=this.year_filter_doms[e],moveScrollPosition($("#year-filter-modal-container .sort-modal-items-wrapper"),this.year_filter_doms[e],"vertical",!1)}},hoverSortItem:function(e){if(!show_keyboard){var i=this.keys;i.focused_part="sort_selection",i.sort_selection=e,$(this.prev_dom).removeClass("active"),$(this.sort_doms[e]).addClass("active"),this.prev_dom=this.sort_doms[e]}},hoverCategory:function(e){if(!show_keyboard){var i=this.keys,t=$(e).data("index");i.focused_part="category_selection",i.category_selection=t,$(this.prev_dom).removeClass("active"),$(this.category_doms[t]).addClass("active"),this.prev_dom=this.category_doms[t],$("#vod-series-left-part").removeClass("collapsed"),moveScrollPosition($("#vod-series-categories-container"),this.category_doms[t],"vertical",!1)}},hoverMovieItem:function(e){if(!show_keyboard){var i=$(e).data("index"),t=this.keys;t.focused_part="menu_selection",t.menu_selection=i,$(this.prev_dom).removeClass("active"),$(this.menu_doms[i]).addClass("active"),this.prev_dom=this.menu_doms[i],clearTimeout(this.channel_hover_timer),$("#vod-series-left-part").addClass("collapsed"),moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[t.menu_selection],"vertical",!1),$("#vod-series-current-movie-selection").text(i+1)}},hoverTopMenu:function(e){if(!show_keyboard){var i=this.keys;i.top_menu_selection=e,i.focused_part="top_menu_selection",$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],$("#vod-series-left-part").addClass("collapsed")}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":"vod"===this.current_movie_type?(current_movie=this.movies[e.menu_selection],vod_summary_page.init()):(current_series=this.movies[e.menu_selection],series_summary_page.init());break;case"top_menu_selection":0==e.top_menu_selection&&($("#vod-series-search-input").focus(),this.searchMovie()),2==e.top_menu_selection&&this.showYearFilterModal(),1==e.top_menu_selection&&this.showSortModal();break;case"category_selection":var i=this.categories[e.category_selection];if(this.current_category_index==e.category_selection)return;if(checkForAdult(i,"category",[]))return void parent_confirm_page.init(current_route);this.showCategoryContent();break;case"sort_selection":this.current_category_index=-1;var t=$(this.sort_doms[e.sort_selection]).data("sort_key");settings.saveSettings(this.current_movie_type+"_sort",t,""),$(this.top_menu_doms[1]).data("word_code",t),$(this.top_menu_doms[1]).text(current_words[t]?current_words[t]:settings.sort_keys[t]),this.showCategoryContent(),this.goBack()}},handleMenusUpDown:function(e){var i=this.keys,t=this.menu_doms;switch($("#vod-series-search-input").blur(),i.focused_part){case"category_selection":if(i.category_selection+=e,i.category_selection<0)return void(i.category_selection=0);if(i.category_selection>=this.category_doms.length)return void(i.category_selection=this.category_doms.length-1);this.hoverCategory(this.category_doms[i.category_selection]);break;case"menu_selection":var s=i.menu_selection;if(i.menu_selection+=7*e,i.menu_selection>=t.length&&(i.menu_selection=t.length-1),i.menu_selection<0)return i.menu_selection=s,void this.hoverTopMenu(0);i.menu_selection>=this.current_render_count-7&&this.renderCategoryContent(),this.hoverMovieItem(this.menu_doms[i.menu_selection]);break;case"top_menu_selection":if(e>0){if($("#vod-series-search-input").blur(),0==this.menu_doms.length)return;i.menu_selection>=this.menu_doms.length&&(i.menu_selection=this.menu_doms.length-1),i.menu_selection>4&&(i.menu_selection=0),this.hoverMovieItem(this.menu_doms[i.menu_selection])}break;case"sort_selection":i.sort_selection+=e,i.sort_selection<0&&(i.sort_selection=0),i.sort_selection>=this.sort_doms.length&&(i.sort_selection=this.sort_doms.length-1),this.hoverSortItem(i.sort_selection);break;case"year_filter_selection":i.year_filter_selection+=e,i.year_filter_selection<0&&(i.year_filter_selection=0),i.year_filter_selection>=this.year_filter_doms.length&&(i.year_filter_selection=this.year_filter_doms.length-1),this.hoverYearFilter(i.year_filter_selection)}},handleMenuLeftRight:function(e){var i=this.keys;switch($("#vod-series-search-input").blur(),i.focused_part){case"category_selection":if(e>0)if(this.movies.length>0)this.hoverMovieItem(this.menu_doms[i.menu_selection]);else{var t=$("#vod-series-search-input").val();t&&this.hoverTopMenu(0)}break;case"menu_selection":if(i.menu_selection%7==0&&e<0)return void this.hoverCategory(this.category_doms[i.category_selection]);if(i.menu_selection+=e,i.menu_selection<0)return i.menu_selection=0,void this.hoverCategory(this.category_doms[i.category_selection]);i.menu_selection>=this.menu_doms.length&&(i.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[i.menu_selection]),e>0&&i.menu_selection>=this.current_render_count-7&&this.renderCategoryContent();break;case"top_menu_selection":if(i.top_menu_selection+=e,i.top_menu_selection<0)return void this.hoverCategory(this.category_doms[i.category_selection]);i.top_menu_selection>=this.top_menu_doms.length&&(i.top_menu_selection=this.top_menu_doms.length-1),this.hoverTopMenu(i.top_menu_selection)}},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:this.showNextChannel(1);break;case tvKey.CH_DOWN:this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:this.playOrPause();break;default:console.log("No matching")}}},setting_page={player:null,keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".setting-menu-item-wrapper"),initiated:!1,hide_category_doms:[],theme_modal_options:[],hide_category_movie_type:"",language_doms:[],init:function(){var e=this.keys;e.focused_part="menu_selection",e.menu_selection=0,$(this.menu_doms).removeClass("active"),$(this.menu_doms[0]).addClass("active"),current_route="setting-page",$("#setting-page").removeClass("hide")},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$("#setting-page").addClass("hide"),home_page.reEnter();break;case"hide_category_modal":$("#hide-category-modal").modal("hide"),e.focused_part="menu_selection";break;case"theme_modal":$("#theme-modal").modal("hide"),e.focused_part="menu_selection"}},showHideCategoryModal:function(e){this.hide_category_movie_type=e,$("#settings-modal").modal("hide");var i;"live"===e&&(i=LiveModel.getCategories(!0,!1)),"movie"!==e&&"vod"!==e||(i=VodModel.getCategories(!0,!1)),"series"===e&&(i=SeriesModel.getCategories(!0,!1));var t="";i.map(function(e,i){
t+='<div class="hide-category-modal-option"   onclick="setting_page.clickHideCategory('+i+')"   onmouseenter="setting_page.hoverHideCategory('+i+')">   <input class="hide-category-checkbox" type="checkbox" name="checkbox"       id="hide-category-item-'+e.category_id+'" '+(e.is_hide?"":"checked")+' value="'+e.category_id+'">   <label for="hide-category-item-dfafdd'+e.category_id+'">'+e.category_name+"</label></div>"}),$("#hide-modal-categories-container").html(t),$("#hide-category-modal").modal("show"),$($(".hide-category-modal-option")).removeClass("active"),$($(".hide-category-modal-option")[0]).addClass("active"),$($(".hide-category-btn-wrapper")).removeClass("active");var s=$(".hide-category-modal-option");this.hide_category_doms=s,this.keys.focused_part="hide_category_modal",this.keys.hide_category_modal=0,$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[0]).addClass("active"),$("#hide-modal-categories-container").scrollTop(0)},clickHideCategory:function(e){var i=this.hide_category_doms[e],t=$($(i).find("input")[0]).prop("checked");t=!t,$($(i).find("input")[0]).prop("checked",t),"live"===this.hide_category_movie_type?LiveModel.saveHiddenCategories(e,!t):"movie"===this.hide_category_movie_type||"vod"===this.hide_category_movie_type?VodModel.saveHiddenCategories(e,!t):SeriesModel.saveHiddenCategories(e,!t)},confirmParentPassword:function(){$("#parent-confirm-password-error").hide();var e=$("#parent-confirm-password").val();if(parent_account_password!==e)return void $("#parent-confirm-password-error").text("Password does not match").show();$("#parent-confirm-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,this.showCategoryContent()},cancelParentPassword:function(){$("#parent-confirm-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},hoverHideCategory:function(e){var i=this.keys;i.hide_category_modal=e<0?this.hide_category_doms.length+e:e,$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[i.hide_category_modal]).addClass("active"),moveScrollPosition($("#hide-modal-categories-container"),this.hide_category_doms[i.hide_category_modal],"vertical",!1)},hoverSettingMenu:function(e){this.keys.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":switch(e.menu_selection){case 0:this.showParentControlModal();break;case 1:this.showHideCategoryModal("live");break;case 2:this.showHideCategoryModal("movie");break;case 3:this.showHideCategoryModal("series");break;case 4:this.showUserAccounts();break;case 5:this.showLanguages()}break;case"hide_category_modal":$(this.hide_category_doms[e.hide_category_modal]).trigger("click");break;case"theme_modal":$(this.theme_modal_options[e.theme_modal]).trigger("click")}},handleMenusUpDown:function(e){var i=this.keys;switch(i.focused_part){case"menu_selection":var t=i.menu_selection;if(i.menu_selection+=4*e,i.menu_selection>=this.menu_doms.length){if(t>3)return void(i.menu_selection=t);i.menu_selection=this.menu_doms.length-1}if(i.menu_selection<0)return void(i.menu_selection=t);this.hoverSettingMenu(i.menu_selection);break;case"hide_category_modal":i.hide_category_modal+=e,i.hide_category_modal<0&&(i.hide_category_modal=0),i.hide_category_modal>=this.hide_category_doms.length&&(i.hide_category_modal=this.hide_category_doms.length-1),$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[i.hide_category_modal]).addClass("active"),i.hide_category_modal<this.hide_category_doms.length-3&&moveScrollPosition($("#hide-modal-categories-container"),this.hide_category_doms[i.hide_category_modal],"vertical");break;case"theme_modal":var s=this.theme_modal_options;i.theme_modal+=e,i.theme_modal<0&&(i.theme_modal=s.length-1),i.theme_modal>=s.length&&(i.theme_modal=0),$(s).removeClass("active"),$(s[i.theme_modal]).addClass("active"),moveScrollPosition($("#theme-modal-body"),this.theme_modal_options[index],"vertical",!1)}},handleMenuLeftRight:function(e){var i=this.keys;switch(i.focused_part){case"menu_selection":i.menu_selection+=e,i.menu_selection<0&&(i.menu_selection=0),i.menu_selection>=this.menu_doms.length&&(i.menu_selection=this.menu_doms.length-1),this.hoverSettingMenu(i.menu_selection)}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},turn_off_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#turn-off-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="turn-off-page",this.hoverMenuItem(0),$("#turn-off-modal").modal("show")},goBack:function(){$("#turn-off-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var i=this.keys;i.focused_part="menu_selection",i.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part){var e=this.keys;switch(e.menu_selection){case 0:"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close();break;case 1:this.goBack()}}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var i=this.keys;"menu_selection"===i.focused_part&&(i.menu_selection+=e,i.menu_selection<0&&(i.menu_selection=0),i.menu_selection>1&&(i.menu_selection=1),this.hoverMenuItem(i.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},parent_confirm_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".parent-confirm-item"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="parent-confirm-page",$(this.menu_doms[0]).find("input").val(""),this.hoverMenuItem(0),$("#parent-confirm-password-error").hide(),$("#parent-confirm-modal").modal("show")},goBack:function(){$("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"vod-summary-page"!==this.prev_route&&"series-summary-page"!==this.prev_route||(current_route="vod-series-page")},hoverMenuItem:function(e){var i=this.keys;i.focused_part="menu_selection",i.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part){var e=this.keys;switch(e.menu_selection){case 0:$(this.menu_doms[0]).find("input").val(""),$(this.menu_doms[0]).find("input").focus();break;case 1:var i=$(this.menu_doms[0]).find("input").val();if($("#parent-confirm-password-error").hide(),i!=parent_account_password)return void $("#parent-confirm-password-error").slideDown();if($("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"channel-page"===this.prev_route)channel_page.showCategoryChannels();else if("vod-series-page"===this.prev_route)vod_series_page.showCategoryContent();else if("home-page"===this.prev_route){var t,s=$(home_page.menu_doms[home_page.keys.menu_selection]).closest(".home-section-item-wrapper").data("kind");"channel"===s?t=home_page.channel_categories:"vod"===s?t=home_page.vod_categories:"series"===s&&(t=home_page.series_categories);var a=t[home_page.keys.v_keys[home_page.keys.menu_selection]];"channel"===s?channel_page.init(a):vod_series_page.init(s,a);break}break;case 2:this.goBack()}}},handleMenusUpDown:function(e){var i=this.keys;i.menu_selection>=1&&e>0||(i.menu_selection>=1&&e<0?i.menu_selection=0:0==i.menu_selection&&e>0&&(i.menu_selection=1),this.hoverMenuItem(i.menu_selection))},handleMenuLeftRight:function(e){var i=this.keys;"menu_selection"===i.focused_part&&i.menu_selection>=1&&(i.menu_selection+=e,i.menu_selection<1&&(i.menu_selection=0),i.menu_selection>2&&(i.menu_selection=2),this.hoverMenuItem(i.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},activation_page={keys:{focused_part:"input_selection",input_selection:0,btn_selection:0},prev_route:"",buttons:$(".activation-btn"),activation_input:$("#activation-input")[0],is_loading:!1,tried_panel_indexes:[],is_extended:!1,init:function(e){this.is_extended=!1,this.prev_route=e,$("#activation-modal").modal("show"),$(this.activation_input).val(""),current_route="activation-page",this.hoverInput(),this.tried_panel_indexes=[],$("#activation-code-message").hide()},goBack:function(){$("#activation-modal").modal("hide"),current_route=this.prev_route,"playlist-page"===this.prev_route?2==is_trial&&playlist_page.hoverPlayListItem(playlist_page.keys.playlist_selection):"login"===this.prev_route&&this.is_extended&&login_page.login()},showErrorMessage:function(e){$("#activation-code-message").text(e).slideDown(),setTimeout(function(){$("#activation-code-message").slideUp()},4e3)},confirmActivationCode:function(){$("#activation-code-message").hide();var e=$(this.activation_input).val();if(!e)return void this.showErrorMessage("Sorry, activation code is required");this.is_loading=!0,showLoader(!0);var i=this,t=pickPanelUrl(this.tried_panel_indexes),s=t[1],a=t[0],o={mac_address:mac_address,code:e},n=encryptRequest(o);$.ajax({method:"post",url:s+"/check-activation-code",data:{data:n},success:function(e){if(i.is_loading){i.is_loading=!1,showLoader(!1);var t=decryptResponse(e);if("success"===t.status){expire_date=t.expire_date,$(".expire-date").text(expire_date),i.is_extended=!0,saveData("is_trial",t.is_trial);var s=localStorage.getItem(storage_id+"api_data");s=JSON.parse(s),s.is_trial=t.is_trial,s.expire_date=t.expire_date,localStorage.setItem(storage_id+"api_data",JSON.stringify(s)),i.goBack()}else i.showErrorMessage(t.msg)}},error:function(){i.tried_panel_indexes.length<panel_urls.length?(i.tried_panel_indexes.push(a),i.confirmActivationCode()):(i.is_loading=!1,showLoader(!1),i.showErrorMessage("Sorry, Code is not valid"))}})},hoverInput:function(){$(this.buttons).removeClass("active"),$(this.activation_input).addClass("active"),this.keys.focused_part="input_selection"},hoverBtn:function(e){var i=this.keys;i.btn_selection=e,i.focused_part="btn_selection",$(this.activation_input).removeClass("active"),$(this.buttons).removeClass("active"),$(this.buttons[e]).addClass("active")},handleMenuLeftRight:function(e){var i=this.keys;switch(i.focused_part){case"btn_selection":i.btn_selection=e>0?1:0,this.hoverBtn(i.btn_selection)}},handleMenuUpDown:function(e){var i=this.keys;switch(i.focused_part){case"input_selection":e>0&&($(this.activation_input).blur(),this.hoverBtn(i.btn_selection));break;case"btn_selection":e<0&&this.hoverInput()}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"input_selection":$(this.activation_input).focus(),setSelectionRange(this.activation_input);break;case"btn_selection":0==e.btn_selection?this.confirmActivationCode():this.goBack()}},HandleKey:function(e){if(this.is_loading)return void(e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack()));switch(e.keyCode){case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},hide_category_page={player:null,keys:{focused_part:"hide_category_selection",action_selection:0,hide_category_selection:0},action_doms:$(".hide-category-action-btn"),hide_category_doms:[],stream_type:"",categories:[],prev_focus_dom:null,action_changed:!1,init:function(e){this.action_changed=!1,this.stream_type=e,this.keys.action_selection=0,current_route="hide-category-page",$("#settings-modal").modal("hide"),$("#hide-category-categories-wrapper").html(""),console.log(e);var i;"live"===e&&(i=LiveModel.getCategories(!0,!1)),"movie"!==e&&"vod"!==e||(i=VodModel.getCategories(!0,!1)),"series"===e&&(i=SeriesModel.getCategories(!0,!1));var t="";i.map(function(e,i){t+='<div class="hide-category-modal-option"   onclick="hide_category_page.clickHideCategory('+i+')"   onmouseenter="hide_category_page.hoverHideCategory('+i+')">   <input class="hide-category-checkbox" type="checkbox" name="hide_category"       id="hide-category-item-'+e.category_id+'" '+(e.is_hide?"":"checked")+' value="'+e.category_id+'">   <label for="hide-category-item-dfafdd'+e.category_id+'">'+e.category_name+"</label></div>"}),$("#hide-category-categories-wrapper").html(t);var s=$(".hide-category-modal-option");this.hide_category_doms=s,this.hoverHideCategory(0),$("#hide-category-page").removeClass("hide")},goBack:function(){switch(this.keys.focused_part){case"hide_category_selection":case"action_selection":$("#hide-category-page").addClass("hide"),$("#home-page").removeClass("hide"),current_route="home-page",this.action_changed&&home_page.updateByCategoryHidden(this.stream_type)}},clickHideCategory:function(e){var i=this.hide_category_doms[e],t=$($(i).find("input")[0]).prop("checked");t=!t,$($(i).find("input")[0]).prop("checked",t)},selectAll:function(){$(".hide-category-modal-option input").prop("checked",!0)},saveHiddenCategories:function(){var e=$("input[name='hide_category']:not(:checked)"),i=[];switch(e.map(function(e,t){i.push($(t).val())}),this.stream_type){case"live":LiveModel.saveHiddenCategories(i);break;case"vod":VodModel.saveHiddenCategories(i);break;case"series":SeriesModel.saveHiddenCategories(i)}this.action_changed=!0,this.goBack()},cancel:function(){this.goBack()},hoverHideCategory:function(e){var i=this.keys;i.hide_category_selection=e<0?this.hide_category_doms.length+e:e,i.focused_part="hide_category_selection",$(this.prev_focus_dom).removeClass("active"),$(this.hide_category_doms[i.hide_category_selection]).addClass("active"),this.prev_focus_dom=this.hide_category_doms[i.hide_category_selection],moveScrollPosition($("#hide-category-categories-wrapper"),this.hide_category_doms[i.hide_category_selection],"vertical",!1)},hoverActionBtn:function(e){var i=this.keys;i.focused_part="action_selection",i.action_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.action_doms[e]).addClass("active"),this.prev_focus_dom=this.action_doms[e]},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"hide_category_selection":$(this.hide_category_doms[e.hide_category_selection]).trigger("click");break;case"action_selection":$(this.action_doms[e.action_selection]).trigger("click")}},handleMenusUpDown:function(e){var i=this.keys;switch(i.focused_part){case"hide_category_selection":i.hide_category_selection+=e,i.hide_category_selection<0&&(i.hide_category_selection=0),i.hide_category_selection>=this.hide_category_doms.length&&(i.hide_category_selection=this.hide_category_doms.length-1),this.hoverHideCategory(i.hide_category_selection);break;case"action_selection":i.action_selection+=e,i.action_selection<0&&(i.action_selection=0),i.action_selection>=this.action_doms.length&&(i.action_selection=this.action_doms.length-1),this.hoverActionBtn(i.action_selection)}},handleMenuLeftRight:function(e){var i=this.keys;switch(i.focused_part){case"hide_category_selection":e>0&&this.hoverActionBtn(i.action_selection);break;case"action_selection":e<0&&this.hoverHideCategory(i.hide_category_selection)}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}};$(document).ready(function(){try{window.navigator.userAgent.toLowerCase().includes("web0s")&&(platform="lg")}catch(e){}initKeys(),initPlayer(),settings.initFromLocal();var e=localStorage.getItem(storage_id+"parent_account_password");parent_account_password=null!=e?e:parent_account_password,"samsung"===platform?($("#vod-series-player-video-lg").hide(),$("#channel-page-video-lg").hide()):"lg"===platform&&($("#vod-series-player-video").hide(),$("#channel-page-video").hide()),login_page.getPlayListDetail(),changeCurrentTime(),setInterval(function(){changeCurrentTime()},3e4);for(var i=document.getElementsByTagName("input"),t=0;t<i.length;t++){var s=i[t];s.addEventListener("focus",function(){show_keyboard=!0}),s.addEventListener("blur",function(){show_keyboard=!1})}"samsung"===platform?document.addEventListener("visibilitychange",function(){document.hidden?webapis.avplay.suspend():webapis.avplay.restore()}):"lg"===platform&&document.addEventListener("keyboardStateChange",keyboardVisibilityChange,!1),document.addEventListener("keydown",function(e){if("samsung"===platform)switch(e.keyCode==tvKey.EXIT&&tizen.application.getCurrentApplication().exit(),e.keyCode){case 65376:case 65385:return void $("input").blur()}if(!app_loading)switch(current_route){case"login-page":login_page.HandleKey(e);break;case"home-page":home_page.HandleKey(e);break;case"channel-page":channel_page.HandleKey(e);break;case"vod-series-page":vod_series_page.HandleKey(e);break;case"vod-summary-page":vod_summary_page.HandleKey(e);break;case"vod-series-player-video":vod_series_player_page.HandleKey(e);break;case"trailer-page":trailer_page.HandleKey(e);break;case"seasons-page":seasons_variable.HandleKey(e);break;case"episode-page":episode_variable.HandleKey(e);break;case"series-summary-page":series_summary_page.HandleKey(e);break;case"playlist-page":playlist_page.HandleKey(e);break;case"setting-page":setting_page.HandleKey(e);break;case"parent-confirm-page":parent_confirm_page.HandleKey(e);break;case"turn-off-page":turn_off_page.HandleKey(e);break;case"activation-page":activation_page.HandleKey(e);break;case"hide-category-page":hide_category_page.HandleKey(e)}})});