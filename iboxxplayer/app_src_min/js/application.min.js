var QRCode,custom_keyboard={isShown:!1,currentLanguage:"english",isUpperCase:!1,currentInput:null,lastFocusedKey:null,cursorPosition:0,inputValue:"",layouts:{english:{lowercase:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],uppercase:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]],numbers:["1","2","3","4","5","6","7","8","9","0"],special:[".",",","/",":",";","@","#","%","&","?","!","-","_","=","+","(",")","'",'"']},arabic:{lowercase:[["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج"],["ش","س","ي","ب","ل","ا","ت","ن","م","ك","ط"],["ذ","ئ","ء","ؤ","ر","لا","ى","ة","و","ز","ظ","د"]],uppercase:[["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج"],["ش","س","ي","ب","ل","ا","ت","ن","م","ك","ط"],["ذ","ئ","ء","ؤ","ر","لا","ى","ة","و","ز","ظ","د"]],numbers:["1","2","3","4","5","6","7","8","9","0"],special:[".","،","/",":","؛","@","#","%","&","؟","!","-","_","=","+",")","(","'",'"']}},init:function(){this.render(),this.attachEventHandlers(),this.updateSpecialCharacters()},show:function(e){this.isShown||(this.currentInput=e,this.cursorPosition=e.selectionStart||0,this.inputValue=e.value||"",this._languageDetected||(("rtl"===(e=this.detectTextDirection(e.value))&&"english"===this.currentLanguage||"ltr"===e&&"arabic"===this.currentLanguage)&&this.toggleLanguage(),this._languageDetected=!0),$("#custom-keyboard").show(),this.isShown=!0,setTimeout(function(){this.setFocusToFirstKey()}.bind(this),50))},hide:function(){this.isShown&&(this.lastFocusedKey=document.activeElement,$(".keyboard-key").blur(),$("#custom-keyboard").hide(),this.isShown=!1,this.currentInput&&(this.currentInput.blur(),this.currentInput=null),this.cursorPosition=0,this.inputValue="",key_focused=!1,"search-page"===current_route)&&search_page&&"function"==typeof search_page.focusFirstResult&&setTimeout(function(){search_page.focusFirstResult()},100)},addCharacter:function(e){var t,i;this.currentInput&&(t=this.cursorPosition,e=(i=this.currentInput.value).substring(0,t)+e+i.substring(t),this.currentInput.value=e,this.cursorPosition=t+1,this.inputValue=e,(i=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(i))},handleSpace:function(){this.addCharacter(" ")},handleBackspace:function(){var e,t,i;this.currentInput&&(t=this.cursorPosition,i=this.currentInput.value,t=0<t?(e=i.substring(0,t-1)+i.substring(t),t-1):(e=i,0),this.currentInput.value=e,this.cursorPosition=t,this.inputValue=e,this.currentInput.setSelectionRange(t,t),(i=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(i))},handleEnter:function(){this.currentInput&&(key_focused=!1,"search-page-input"===this.currentInput.id&&(search_page.keywordChange(),setTimeout(function(){search_page&&"function"==typeof search_page.focusFirstResult&&search_page.focusFirstResult()},200)),this.currentInput.blur(),this.hide())},clearAll:function(){var e;this.currentInput&&(this.currentInput.value="",this.currentInput.setSelectionRange(0,0),this.cursorPosition=0,this.inputValue="",(e=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),this.currentInput.dispatchEvent(e))},detectTextDirection:function(e){return e&&/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/.test(e)?"rtl":"ltr"},setFocusToFirstKey:function(){(this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey):($("#keyboard-row-1 .keyboard-key").length?$("#keyboard-row-1 .keyboard-key"):$("#keyboard-row-0 .keyboard-key")).first()).focus()},toggleCase:function(){"arabic"!==this.currentLanguage&&(this.lastFocusedKey=document.activeElement,this.isUpperCase=!this.isUpperCase,this.updateKeys(),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50))},toggleLanguage:function(){this.lastFocusedKey=document.activeElement,this.currentLanguage="english"===this.currentLanguage?"arabic":"english","arabic"===this.currentLanguage&&(this.isUpperCase=!1),this.updateKeys(),this.updateSpecialCharacters(),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50)},toggleSymbols:function(){this.lastFocusedKey=document.activeElement;var e=$("#keyboard-row-special");e.is(":visible")?(e.hide(),$("#keyboard-symbols").text("$%^")):(e.show(),$("#keyboard-symbols").text("abc"),this.updateSpecialCharacters()),setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50)},updateKeys:function(){this.createLetterRows();var t=this.layouts[this.currentLanguage].numbers;$("#keyboard-row-0 .keyboard-number").each(function(e){e<t.length&&(e=t[e],$(this).text(e).attr("data-key-value",e))}),$("#keyboard-lang").text("english"===this.currentLanguage?"EN":"AR"),"arabic"===this.currentLanguage?$("#keyboard-shift").hide():$("#keyboard-shift").show()},createLetterRows:function(){var e=this.layouts[this.currentLanguage],e=this.isUpperCase?e.uppercase:e.lowercase;$("#keyboard-row-1 .keyboard-letter-container").empty(),$("#keyboard-row-2 .keyboard-letter-container").empty(),$("#keyboard-row-3 .keyboard-letter-container").empty(),this.createLetterRow(e[0],"#keyboard-row-1 .keyboard-letter-container"),this.createLetterRow(e[1],"#keyboard-row-2 .keyboard-letter-container"),this.createLetterRow(e[2],"#keyboard-row-3 .keyboard-letter-container")},createLetterRow:function(e,t){for(var i=$(t),s=0;s<e.length;s++)i.append('<button class="keyboard-key" tabindex="0" data-key-value="'+e[s]+'">'+e[s]+"</button>")},updateSpecialCharacters:function(){var e=this.layouts[this.currentLanguage].special,t=$("#keyboard-row-special");t.empty();for(var i=0;i<e.length;i++){var s=e[i];t.append('<button class="keyboard-key keyboard-special" tabindex="0" data-key-value="'+s+'">'+s+"</button>")}},render:function(){for(var e=(e='<div id="custom-keyboard" class="keyboard-container" style="display:none;">')+'<div id="keyboard-row-0" class="keyboard-row">'+'<button id="keyboard-lang" class="keyboard-key keyboard-action" tabindex="0">EN</button>',t=0;t<this.layouts.english.numbers.length;t++)e+='<button class="keyboard-key keyboard-number" tabindex="0" data-key-value="'+this.layouts.english.numbers[t]+'">'+this.layouts.english.numbers[t]+"</button>";e+='<button id="keyboard-backspace" class="keyboard-key keyboard-action" tabindex="0"><i class="fas fa-backspace"></i></button></div><div id="keyboard-row-1" class="keyboard-row"><button id="keyboard-symbols" class="keyboard-key keyboard-action" tabindex="0">$%^</button><div class="keyboard-letter-container"></div><button id="keyboard-enter" class="keyboard-key keyboard-action" tabindex="0">Enter</button></div><div id="keyboard-row-2" class="keyboard-row"><div class="keyboard-letter-container"></div><button class="keyboard-key" tabindex="0" data-key-value=":">:</button></div><div id="keyboard-row-3" class="keyboard-row"><button id="keyboard-shift" class="keyboard-key keyboard-action" tabindex="0">⇧</button><button class="keyboard-key" tabindex="0" data-key-value="@">@</button><div class="keyboard-letter-container"></div><button class="keyboard-key" tabindex="0" data-key-value=".">.</button><button class="keyboard-key" tabindex="0" data-key-value="/">/</button><button id="keyboard-clear" class="keyboard-key keyboard-action" tabindex="0">Clear</button></div><div id="keyboard-row-special" class="keyboard-row keyboard-special-row" style="display:none;"></div><div class="keyboard-row"><button id="keyboard-space" class="keyboard-key keyboard-space" tabindex="0" data-key-value=" ">Space</button></div></div>',$("body").append(e),this.createLetterRows()},navigateLeft:function(e){var t=this.getParentRow(e).find(".keyboard-key:visible"),e=t.index(e);(0<e?t.eq(e-1):t.last()).focus()},navigateRight:function(e){var t=this.getParentRow(e).find(".keyboard-key:visible"),e=t.index(e);(e<t.length-1?t.eq(e+1):t.first()).focus()},navigateUp:function(e){var t,i;"keyboard-space"===e.attr("id")?(t=$("#keyboard-row-special").is(":visible")?$("#keyboard-row-special"):$("#keyboard-row-3"),this.focusMiddleKey(t)):(t=this.getParentRow(e),0<(t=(i=$(".keyboard-row:visible")).index(t))?(i=i.eq(t-1),this.focusNearestKey(e,i)):$("#keyboard-space").focus())},navigateDown:function(e){var t=this.getParentRow(e),i=$(".keyboard-row:visible"),t=i.index(t);if(t===i.length-1||"keyboard-space"===e.attr("id"))s=i.first(),this.focusMiddleKey(s);else{var s=t+1,t=i.eq(s);if("keyboard-row-special"===t.attr("id")&&!t.is(":visible")){if(!(s+1<i.length))return void $("#keyboard-space").focus();t=i.eq(s+1)}0<t.find("#keyboard-space").length?$("#keyboard-space").focus():this.focusNearestKey(e,t)}},getParentRow:function(e){e=e.parent();return e=e.hasClass("keyboard-letter-container")?e.parent():e},focusMiddleKey:function(e){var e=e.find(".keyboard-key:visible"),t=Math.floor(e.length/2);e.eq(t).focus()},focusNearestKey:function(e,t){var i=this.getParentRow(e),s=i.find(".keyboard-key:visible").index(e),i=i.width(),e=(e.position().left+e.width()/2)/i,i=t.find(".keyboard-key:visible"),o=t.width()*e,a=null,n=Number.MAX_VALUE;i.each(function(){var e=$(this),t=e.position().left+e.width()/2,t=Math.abs(t-o);t<n&&(n=t,a=e)}),(a||(t=Math.min(s,i.length-1),i.eq(t))).focus()},handleRemoteKeys:function(e){if(this.isShown)switch(e.keyCode){case 13:if(document.activeElement&&"keyboard-enter"===document.activeElement.id)return this.handleEnter(),!0;if(document.activeElement&&$(document.activeElement).hasClass("keyboard-key"))return $(document.activeElement).click(),!0;break;case 27:return this.hide(),!0;case 37:case 38:case 39:case 40:return document.activeElement&&$(document.activeElement).hasClass("keyboard-key")||this.setFocusToFirstKey(),!0}return!1},attachEventHandlers:function(){var i=this,s=!1;function e(t){return function(e){s||(s=!0,t.call(i,e,$(this)),setTimeout(function(){s=!1},100))}}$(document).on("click",".keyboard-key:not(.keyboard-action)",e(function(e,t){t=t.attr("data-key-value")||t.text();this.addCharacter(t)})),$(document).on("click","#keyboard-shift",e(function(){this.toggleCase()})),$(document).on("click","#keyboard-lang",e(function(){this.toggleLanguage()})),$(document).on("click","#keyboard-space",e(function(){this.handleSpace()})),$(document).on("click","#keyboard-backspace",e(function(){this.handleBackspace()})),$(document).on("click","#keyboard-enter",e(function(){this.handleEnter()})),$(document).on("click","#keyboard-clear",e(function(){this.clearAll()})),$(document).on("click","#keyboard-symbols",e(function(){this.toggleSymbols()})),$(document).on("focus",".keyboard-key",function(){i.isShown&&(i.lastFocusedKey=this)}),$(document).on("keydown",".keyboard-key",function(e){if(i.isShown){var t=$(this);switch(e.keyCode){case 37:i.navigateLeft(t),e.preventDefault();break;case 39:i.navigateRight(t),e.preventDefault();break;case 38:i.navigateUp(t),e.preventDefault();break;case 40:i.navigateDown(t),e.preventDefault();break;case 13:"keyboard-enter"===t.attr("id")?i.handleEnter():t.click(),e.preventDefault();break;case 27:i.hide(),e.preventDefault()}}})}},VodModel=(!function(){function t(e){this.mode=a.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=[],i=0,s=this.data.length;i<s;i++){var o=this.data.charCodeAt(i);65536<o?(t[0]=240|(1835008&o)>>>18,t[1]=128|(258048&o)>>>12,t[2]=128|(4032&o)>>>6,t[3]=128|63&o):2048<o?(t[0]=224|(61440&o)>>>12,t[1]=128|(4032&o)>>>6,t[2]=128|63&o):128<o?(t[0]=192|(1984&o)>>>6,t[1]=128|63&o):t[0]=o,this.parsedData=this.parsedData.concat(t)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function l(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function g(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var i=0;i<e.length&&0==e[i];)i++;this.num=new Array(e.length-i+t);for(var s=0;s<e.length-i;s++)this.num[s]=e[s+i]}function d(e,t){this.totalCount=e,this.dataCount=t}function c(){this.buffer=[],this.length=0}function s(){var e=!1,t=navigator.userAgent;return e=/android/i.test(t)&&(e=!0,aMat=t.toString().match(/android ([0-9]\.[0-9])/i))&&aMat[1]?parseFloat(aMat[1]):e}function i(e,t){for(var i,s=1,o=(e=e,(i=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a")).length+(i.length!=e?3:0)),a=0,n=b.length;a<=n;a++){var r=0;switch(t){case h.L:r=b[a][0];break;case h.M:r=b[a][1];break;case h.Q:r=b[a][2];break;case h.H:r=b[a][3]}if(o<=r)break;s++}if(b.length<s)throw new Error("Too long data");return s}t.prototype={getLength:function(){return this.parsedData.length},write:function(e){for(var t=0,i=this.parsedData.length;t<i;t++)e.put(this.parsedData[t],8)}},l.prototype={addData:function(e){e=new t(e);this.dataList.push(e),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[i][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),7<=this.typeNumber&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var i=-1;i<=7;i++)if(!(e+i<=-1||this.moduleCount<=e+i))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(this.modules[e+i][t+s]=0<=i&&i<=6&&(0==s||6==s)||0<=s&&s<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=s&&s<=4)},getBestMaskPattern:function(){for(var e=0,t=0,i=0;i<8;i++){this.makeImpl(!0,i);var s=y.getLostPoint(this);(0==i||s<e)&&(e=s,t=i)}return t},createMovieClip:function(e,t,i){var s=e.createEmptyMovieClip(t,i);this.make();for(var o=0;o<this.modules.length;o++)for(var a=+o,n=0;n<this.modules[o].length;n++){var r=+n;this.modules[o][n]&&(s.beginFill(0,100),s.moveTo(r,a),s.lineTo(1+r,a),s.lineTo(1+r,1+a),s.lineTo(r,1+a),s.endFill())}return s},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var e=y.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var i=0;i<e.length;i++){var s=e[t],o=e[i];if(null==this.modules[s][o])for(var a=-2;a<=2;a++)for(var n=-2;n<=2;n++)this.modules[s+a][o+n]=-2==a||2==a||-2==n||2==n||0==a&&0==n}},setupTypeNumber:function(e){for(var t=y.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var s=!e&&1==(1&t>>i);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=s}for(i=0;i<18;i++){s=!e&&1==(1&t>>i);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=s}},setupTypeInfo:function(e,t){for(var t=this.errorCorrectLevel<<3|t,i=y.getBCHTypeInfo(t),s=0;s<15;s++){var o=!e&&1==(1&i>>s);s<6?this.modules[s][8]=o:s<8?this.modules[s+1][8]=o:this.modules[this.moduleCount-15+s][8]=o}for(s=0;s<15;s++){o=!e&&1==(1&i>>s);s<8?this.modules[8][this.moduleCount-s-1]=o:s<9?this.modules[8][15-s-1+1]=o:this.modules[8][15-s-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var i=-1,s=this.moduleCount-1,o=7,a=0,n=this.moduleCount-1;0<n;n-=2)for(6==n&&n--;;){for(var r,l,c=0;c<2;c++)null==this.modules[s][n-c]&&(r=!1,a<e.length&&(r=1==(1&e[a]>>>o)),l=y.getMask(t,s,n-c),this.modules[s][n-c]=r=l?!r:r,-1==--o)&&(a++,o=7);if((s+=i)<0||this.moduleCount<=s){s-=i,i=-i;break}}}},l.PAD0=236,l.PAD1=17,l.createData=function(e,t,i){for(var s=d.getRSBlocks(e,t),o=new c,a=0;a<i.length;a++){var n=i[a];o.put(n.mode,4),o.put(n.getLength(),y.getLengthInBits(n.mode,e)),n.write(o)}for(var r=0,a=0;a<s.length;a++)r+=s[a].dataCount;if(o.getLengthInBits()>8*r)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*r+")");for(o.getLengthInBits()+4<=8*r&&o.put(0,4);0!=o.getLengthInBits()%8;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*r)&&(o.put(l.PAD0,8),!(o.getLengthInBits()>=8*r));)o.put(l.PAD1,8);return l.createBytes(o,s)},l.createBytes=function(e,t){for(var i=0,s=0,o=0,a=new Array(t.length),n=new Array(t.length),r=0;r<t.length;r++){var l=t[r].dataCount,c=t[r].totalCount-l,s=Math.max(s,l),o=Math.max(o,c);a[r]=new Array(l);for(var d=0;d<a[r].length;d++)a[r][d]=255&e.buffer[d+i];i+=l;var l=y.getErrorCorrectPolynomial(c),h=new g(a[r],l.getLength()-1).mod(l);n[r]=new Array(l.getLength()-1);for(d=0;d<n[r].length;d++){var u=d+h.getLength()-n[r].length;n[r][d]=0<=u?h.get(u):0}}for(var _=0,d=0;d<t.length;d++)_+=t[d].totalCount;for(var m=new Array(_),p=0,d=0;d<s;d++)for(r=0;r<t.length;r++)d<a[r].length&&(m[p++]=a[r][d]);for(d=0;d<o;d++)for(r=0;r<t.length;r++)d<n[r].length&&(m[p++]=n[r][d]);return m};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h={L:1,M:0,Q:3,H:2},o=0,n=1,r=2,u=3,_=4,m=5,p=6,v=7,y={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;0<=y.getBCHDigit(t)-y.getBCHDigit(y.G15);)t^=y.G15<<y.getBCHDigit(t)-y.getBCHDigit(y.G15);return(e<<10|t)^y.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;0<=y.getBCHDigit(t)-y.getBCHDigit(y.G18);)t^=y.G18<<y.getBCHDigit(t)-y.getBCHDigit(y.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return y.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,i){switch(e){case o:return 0==(t+i)%2;case n:return 0==t%2;case r:return 0==i%3;case u:return 0==(t+i)%3;case _:return 0==(Math.floor(t/2)+Math.floor(i/3))%2;case m:return 0==t*i%2+t*i%3;case p:return 0==(t*i%2+t*i%3)%2;case v:return 0==(t*i%3+(t+i)%2)%2;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new g([1],0),i=0;i<e;i++)t=t.multiply(new g([1,f.gexp(i)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),i=0,s=0;s<t;s++)for(var o=0;o<t;o++){for(var a=0,n=e.isDark(s,o),r=-1;r<=1;r++)if(!(s+r<0||t<=s+r))for(var l=-1;l<=1;l++)o+l<0||t<=o+l||0==r&&0==l||n!=e.isDark(s+r,o+l)||a++;5<a&&(i+=3+a-5)}for(s=0;s<t-1;s++)for(o=0;o<t-1;o++){var c=0;e.isDark(s,o)&&c++,e.isDark(s+1,o)&&c++,e.isDark(s,o+1)&&c++,e.isDark(s+1,o+1)&&c++,0!=c&&4!=c||(i+=3)}for(s=0;s<t;s++)for(o=0;o<t-6;o++)e.isDark(s,o)&&!e.isDark(s,o+1)&&e.isDark(s,o+2)&&e.isDark(s,o+3)&&e.isDark(s,o+4)&&!e.isDark(s,o+5)&&e.isDark(s,o+6)&&(i+=40);for(o=0;o<t;o++)for(s=0;s<t-6;s++)e.isDark(s,o)&&!e.isDark(s+1,o)&&e.isDark(s+2,o)&&e.isDark(s+3,o)&&e.isDark(s+4,o)&&!e.isDark(s+5,o)&&e.isDark(s+6,o)&&(i+=40);for(var d=0,o=0;o<t;o++)for(s=0;s<t;s++)e.isDark(s,o)&&d++;return i+10*(Math.abs(100*d/t/t-50)/5)}},f={glog:function(e){if(e<1)throw new Error("glog("+e+")");return f.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;256<=e;)e-=255;return f.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)f.EXP_TABLE[e]=1<<e;for(e=8;e<256;e++)f.EXP_TABLE[e]=f.EXP_TABLE[e-4]^f.EXP_TABLE[e-5]^f.EXP_TABLE[e-6]^f.EXP_TABLE[e-8];for(e=0;e<255;e++)f.LOG_TABLE[f.EXP_TABLE[e]]=e;g.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var s=0;s<e.getLength();s++)t[i+s]^=f.gexp(f.glog(this.get(i))+f.glog(e.get(s)));return new g(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=f.glog(this.get(0))-f.glog(e.get(0)),i=new Array(this.getLength()),s=0;s<this.getLength();s++)i[s]=this.get(s);for(s=0;s<e.getLength();s++)i[s]^=f.gexp(f.glog(e.get(s))+t);return new g(i,0).mod(e)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(e,t){var i=d.getRsBlockTable(e,t);if(null==i)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=i.length/3,o=[],a=0;a<s;a++)for(var n=i[3*a+0],r=i[3*a+1],l=i[3*a+2],c=0;c<n;c++)o.push(new d(r,l));return o},d.getRsBlockTable=function(e,t){switch(t){case h.L:return d.RS_BLOCK_TABLE[4*(e-1)+0];case h.M:return d.RS_BLOCK_TABLE[4*(e-1)+1];case h.Q:return d.RS_BLOCK_TABLE[4*(e-1)+2];case h.H:return d.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},c.prototype={get:function(e){var t=Math.floor(e/8);return 1==(1&this.buffer[t]>>>7-e%8)},put:function(e,t){for(var i=0;i<t;i++)this.putBit(1==(1&e>>>t-i-1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],k=($.prototype.draw=function(e){function t(e,t){var i,s=document.createElementNS("http://www.w3.org/2000/svg",e);for(i in t)t.hasOwnProperty(i)&&s.setAttribute(i,t[i]);return s}var i=this._htOption,s=this._el,o=e.getModuleCount(),a=(Math.floor(i.width/o),Math.floor(i.height/o),this.clear(),t("svg",{viewBox:"0 0 "+String(o)+" "+String(o),width:"100%",height:"100%",fill:i.colorLight}));a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),s.appendChild(a),a.appendChild(t("rect",{fill:i.colorDark,width:"1",height:"1",id:"template"}));for(var n,r=0;r<o;r++)for(var l=0;l<o;l++)e.isDark(r,l)&&((n=t("use",{x:String(r),y:String(l)})).setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),a.appendChild(n))},$.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},$),w="svg"===document.documentElement.tagName.toLowerCase()?k:"undefined"!=typeof CanvasRenderingContext2D?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function t(e,t){this._bIsPainted=!1,this._android=s(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null}var c,d;this._android&&this._android<=2.1&&(c=1/window.devicePixelRatio,d=CanvasRenderingContext2D.prototype.drawImage,CanvasRenderingContext2D.prototype.drawImage=function(e,t,i,s,o,a,n,r){if("nodeName"in e&&/img/i.test(e.nodeName))for(var l=arguments.length-1;1<=l;l--)arguments[l]=arguments[l]*c;else void 0===r&&(arguments[1]*=c,arguments[2]*=c,arguments[3]*=c,arguments[4]*=c);d.apply(this,arguments)});return t.prototype.draw=function(e){var t=this._elImage,i=this._oContext,s=this._htOption,o=e.getModuleCount(),a=s.width/o,n=s.height/o,r=Math.round(a),l=Math.round(n);t.style.display="none",this.clear();for(var c=0;c<o;c++)for(var d=0;d<o;d++){var h=e.isDark(c,d),u=d*a,_=c*n;i.strokeStyle=h?s.colorDark:s.colorLight,i.lineWidth=1,i.fillStyle=h?s.colorDark:s.colorLight,i.fillRect(u,_,a,n),i.strokeRect(Math.floor(u)+.5,Math.floor(_)+.5,r,l),i.strokeRect(Math.ceil(u)-.5,Math.ceil(_)-.5,r,l)}this._bIsPainted=!0},t.prototype.makeImage=function(){this._bIsPainted&&function(e,t){var i=this;i._fFail=t,i._fSuccess=e,null===i._bSupportDataURI?((t=document.createElement("img")).onabort=e=function(){i._bSupportDataURI=!1,i._fFail&&_fFail.call(i)},t.onerror=e,t.onload=function(){i._bSupportDataURI=!0,i._fSuccess&&i._fSuccess.call(i)},t.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="):!0===i._bSupportDataURI&&i._fSuccess?i._fSuccess.call(i):!1===i._bSupportDataURI&&i._fFail&&i._fFail.call(i)}.call(this,e)},t.prototype.isPainted=function(){return this._bIsPainted},t.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},t.prototype.round=function(e){return e&&Math.floor(1e3*e)/1e3},t}():(C.prototype.draw=function(e){for(var t=this._htOption,i=this._el,s=e.getModuleCount(),o=Math.floor(t.width/s),a=Math.floor(t.height/s),n=['<table style="border:0;border-collapse:collapse;">'],r=0;r<s;r++){n.push("<tr>");for(var l=0;l<s;l++)n.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+o+"px;height:"+a+"px;background-color:"+(e.isDark(r,l)?t.colorDark:t.colorLight)+';"></td>');n.push("</tr>")}n.push("</table>"),i.innerHTML=n.join("");var i=i.childNodes[0],c=(t.width-i.offsetWidth)/2,d=(t.height-i.offsetHeight)/2;0<c&&0<d&&(i.style.margin=d+"px "+c+"px")},C.prototype.clear=function(){this._el.innerHTML=""},C);function C(e,t){this._el=e,this._htOption=t}function $(e,t){this._el=e,this._htOption=t}(QRCode=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:h.H},t="string"==typeof t?{text:t}:t)for(var i in t)this._htOption[i]=t[i];"string"==typeof e&&(e=document.getElementById(e)),this._android=s(),this._el=e,this._oQRCode=null,this._oDrawing=new w(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(e){this._oQRCode=new l(i(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||3<=this._android)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=h}(),{movies:[],category_name:"vod_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],saved_video_times:[],favourite_ids:[],stream_type:"vod",favourite_insert_position:"after",recent_insert_position:"before",category_orders:[],favourite_position:1,recent_position:0,init:function(){this.movies=[],this.categories=[]},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i){for(var s=this.stream_type,o=this.saved_video_times,a=-1,n=0;n<o.length;n++)if(o[n].stream_id==e){a=n;break}t={stream_id:e,time:t,duration:i};-1!=a?o[a]=t:o.push(t),this.saved_video_times=o,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+s+"_times",JSON.stringify(o))},removeVideoTime:function(e){for(var t=this.stream_type,i=this.saved_video_times,s=0;s<i.length;s++)if(i[s].stream_id==e){i.splice(s,1);break}this.saved_video_times=i,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+t+"_times",JSON.stringify(i))},addToWatchList:function(t){var e=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[e].movies,s=!1;i.map(function(e){e.stream_id==t.stream_id&&(s=!0)}),s||(i.unshift(t),i.splice(this.recent_movie_count),this.categories[e].movies=i)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s=0;s<i.length;s++)if(i[s].stream_id==e.stream_id){i.splice(s,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){for(var i,s,o,e=this,t=this.stream_type,a=this.movies,n=this.categories,r={recent:{category_id:"recent",category_name:"Continue Watching",parent_id:0,movies:[],is_hide:!1},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:!1},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},newlyAdded:{category_id:"newly_added",category_name:"Newly Added",parent_id:0,movies:[],is_hide:!1},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}},l=(n.push(r.undefined),l=storage_id+settings.playlist.id+"_saved_"+t+"_times",(l=localStorage.getItem(l))?JSON.parse(l):[]),c=(this.saved_video_times=l,this.movie_key),d=(t=storage_id+settings.playlist.id+t+"_favourite",JSON.parse(localStorage.getItem(t))||[]),h=(this.favourite_ids=d,t=l,"xc"!==settings.playlist.playlist_type?t.map(function(e){return e.stream_id}):t.map(function(e){return parseInt(e.stream_id,10)})),u=[],_=[],m=[],p=[],g={},v=Math.floor(Date.now()/1e3),y=0;y<a.length;y++){x=T=M=S=$=C=w=k=b=f=void 0;var f=a[y],b=g,k=h,w=d,C=u,$=_,S=m,M=p,T=v,x=(void 0!==f.category_id&&"null"!==f.category_id&&null!==f.category_id||(f.category_id="undefined"),f.category_id.toString());b[x]||(b[x]=[]),b[x].push(f),f.is_recent=!1,-1!==k.indexOf(f[c])&&C.push(f),-1!==w.indexOf(f[c])&&("before"===e.favourite_insert_position?$.unshift(f):$.push(f)),f.rating&&!isNaN(parseFloat(f.rating))&&M.push(f),f.added&&function(e,t){return t-e<=1296e3}(f.added,T)&&S.push(f)}i=u,s=[],h.forEach(function(e){for(var t=0;t<i.length;t++)if(i[t].stream_id==e){s.unshift(i[t]),i.splice(t,1);break}}),u=s,o=g,n.forEach(function(e){var t=e.category_id.toString();e.movies=o[t]||[]}),r.recent.movies=u,r.favourite.movies=_,r.newlyAdded.movies=m,r.topRated.movies=utilities.getTopRatedMovies(p)||[],null==r.topRated.movies&&(r.topRated.movies=[]),n.unshift(r.newlyAdded),n.unshift(r.topRated),n.unshift(r.favourite),n.unshift(r.recent);for(var B=n,E=0;E<B.length;E++)if("undefined"===B[E].category_id&&0===B[E].movies.length){B.splice(E,1);break}this.categories=n,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)}}),LiveModel={movies:[],category_name:"live_categories",favourite_movie_count:500,recent_movie_count:15,movie_key:"stream_id",categories:[],programmes:{},movie_saved:!1,programme_saved:!1,favourite_ids:[],stream_type:"live",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=(e=localStorage.getItem(storage_id+settings.playlist.id+"_category_orders"))?JSON.parse(e):[];this.category_orders=e;var t=(t=localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders"))?JSON.parse(t):{},i=(this.channel_orders=t,this.stream_type),s=this.movies,o=this.categories,a={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},n={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},r=(o.push({category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}),this.movie_key),l=null==(l=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_recent")))?[]:l,c=null==(c=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_favourite")))?[]:c;this.favourite_ids=c;for(var d=[],h=[],u={},_=0;_<s.length;_++){var m=s[_];void 0!==m.category_id&&"null"!=m.category_id&&null!=m.category_id||(m.category_id="undefined"),void 0===u[p=m.category_id.toString()]?u[p]=[m]:u[p].push(m),m.is_recent=!1,l.includes(m[r])&&("before"===this.recent_insert_position?d.unshift(m):d.push(m),m.is_recent=!0),c.includes(m[r])&&("before"===this.favourite_insert_position?h.unshift(m):h.push(m))}for(_=0;_<o.length;_++){var p,s=u[p=o[_].category_id.toString()]||[];o[_].movies=s}a.movies=d,n.movies=h,o.unshift(n),o.unshift(a);for(_=0;_<o.length;_++)if("undefined"===o[_].category_id){o[_].movies&&0==o[_].movies.length&&o.splice(_,1);break}for(_=0;_<e.length;_++)for(v=0;v<o.length;v++)if(e[_].id==o[v].category_id){o=makeRearrangeArray(o,v,e[_].position);break}for(_=0;_<o.length;_++)if("favourite"==o[_].category_id&&(this.favourite_position=_),"recent"==o[_].category_id&&(this.recent_position=_),t[o[_].category_id]){for(var g=t[o[_].category_id],s=o[_].movies,v=0;v<g.length;v++)for(var y=0;y<s.length;y++)if(g[v].id==s[y].stream_id&&g[v].name==s[y].name){s=makeRearrangeArray(s,y,g[v].position);break}o[_].movies=s}this.categories=o,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},getProgrammeVideoUrl:function(e,t){var i;return"xc"===settings.playlist_type?(i=moment(t.start).subtract(time_difference_with_server,"minute").format("Y-MM-DD:HH-mm"),{duration:t=getMinute(t.stop)-getMinute(t.start),url:api_host_url+"/streaming/timeshift.php?username="+user_name+"&password="+password+"&stream="+e+"&start="+i+"&duration="+t}):{duration:"00:00",url:""}},getMovieFromId:function(e){var t=this.movies,i=null;this.categories.map(function(e){t=t.concat(e.movies)});for(var s=0;s<t.length;s++)if(t[s].stream_id==e){i=t[s];break}return i},getNextProgrammes:function(e){for(var t=!1,i=[],s=moment(new Date).unix(),o=0,a=0;a<e.length;a++){var n=e[a];if(s<=moment(n.stop).unix()&&(o++,moment(n.start).unix()<=s&&(t=!0),i.push(e[a])),4<=o)break}return{current_program_exist:t,programmes:i}}},SeriesModel={movies:[],favourite_movie_count:200,recent_movie_count:15,movie_key:"series_id",categories:[],saved_video_times:[],favourite_ids:[],stream_type:"series",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],init:function(){this.movies=[],this.categories=[]},setCategories:function(e){var t=this.stream_type,i=null==(i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"))?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i,s,o){for(var a=this.stream_type,n=this.saved_video_times,r=-1,l={},c=0;c<n.length;c++)if(n[c].stream_id==e){l=n[r=c].video_times;break}var d={},s={time:s,duration:o};if((d=l[t.toString()]?l[t.toString()]:d)[i.toString()]=s,l[t.toString()]=d,-1!=r){o=this.getRecentOrFavouriteCategoryPosition("recent");if(this.categories[o].movies.length>=this.recent_movie_count)return;n[r].video_times=l}else n.push({stream_id:e,video_times:l});return this.saved_video_times=n,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+a+"_times",JSON.stringify(n)),l},removeVideoTime:function(e,t,i){for(var s,o=this.stream_type,a=this.saved_video_times,n={},r=!1,l=0;l<a.length;l++)if(a[l].stream_id==e){(n=a[l].video_times)[t.toString()]&&(delete(s=n[t.toString()])[i.toString()],0==Object.keys(s).length&&delete n[t.toString()],0==Object.keys(n).length?(a.splice(l,1),r=!0,n={},this.removeFromWatchList(e)):a[l].video_times=n,this.saved_video_times=a,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+o+"_times",JSON.stringify(a)));break}return[r,n]},addToWatchList:function(t){var i,e=this.getRecentOrFavouriteCategoryPosition("recent"),s=this.categories[e].movies;s.length>=this.recent_movie_count||(i=!1,s.map(function(e){e.series_id==t.series_id&&(i=!0)}),i)||(s.unshift(t),s.splice(this.recent_movie_count),this.categories[e].movies=s)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s="object"==typeof e?e.series_id:e,o=0;o<i.length;o++)if(i[o].series_id==s){i.splice(o,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!1),o=(s[e].is_hide=t,s[e].category_id),a=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==a&&(a=[]),t&&!a.includes(o))a.push(o);else if(a.includes(o))for(var n=0;n<a.length;n++)if(a[n]==o){a.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(a))},getCategories:function(t,i){return this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id})},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){for(var e,t=this,i=this.stream_type,s=this.movies,o=this.categories,a={recent:{category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:!1},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:!1},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:!1},recentlyModified:{category_id:"recently_modified",category_name:"Recently Added/Updated",parent_id:0,movies:[],is_hide:!1},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:!1}},n=(o.push(a.undefined),this.movie_key),r=(e=storage_id+settings.playlist.id+i+"_favourite",JSON.parse(localStorage.getItem(e))||[]),i=(this.favourite_ids=r,e=storage_id+settings.playlist.id+"_saved_"+i+"_times",(e=localStorage.getItem(e))?JSON.parse(e):[]),l=(this.saved_video_times=i,e=i,"xc"!==settings.playlist.playlist_type?e.map(function(e){return e.stream_id}):e.map(function(e){return parseInt(e.stream_id,10)})),c=[],d=[],h=[],u=[],_={},m=Math.floor(Date.now()/1e3),p=0;p<s.length;p++){S=$=C=w=k=b=f=y=v=g=void 0;var g=s[p],v=_,y=l,f=r,b=h,k=c,w=d,C=u,$=m,S=(void 0!==g.category_id&&"null"!=g.category_id&&null!=g.category_id||(g.category_id="undefined"),g.category_id.toString());v[S]||(v[S]=[]),v[S].push(g),g.is_recent=!1,-1!==y.indexOf(g[n])&&b.push(g),-1!==f.indexOf(g[n])&&("before"===t.favourite_insert_position?k.unshift(g):k.push(g)),g.rating&&!isNaN(parseFloat(g.rating))&&C.push(g),g.last_modified&&function(e,t){return t-parseInt(e,10)<=1296e3}(g.last_modified,$)&&w.push(g)}for(var i=function(e,t){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<t.length;o++)if(t[o].series_id==e[s]){i.unshift(t[o]),t.splice(o,1);break}return i}(l,h),M=o,T=_,x=0;x<M.length;x++){var B=M[x].category_id.toString();M[x].movies=T[B]||[]}a.recent.movies=i,a.favourite.movies=c,a.recentlyModified.movies=d,a.topRated.movies=utilities.getTopRatedMovies(u)||[],null==a.topRated.movies&&(a.topRated.movies=[]),o.unshift(a.recentlyModified),o.unshift(a.topRated),o.unshift(a.favourite),o.unshift(a.recent);for(var E=o,L=0;L<E.length;L++)if("undefined"===E[L].category_id&&0==E[L].movies.length){E.splice(L,1);break}this.categories=o,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),o=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[o]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){for(var i,s=this.getRecentOrFavouriteCategory(t).movies,o=!1,a=this.movie_key,n=!1,r=0;r<s.length;r++)if(s[r][a]==e[a]){o=!0;break}return o||("before"===this[t+"_insert_position"]?s.unshift(e):s.push(e),i=this[t+"_movie_count"],s=s.splice(0,i),this.setRecentOrFavouriteMovies(s,t),n=!0),n},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,o=!1,a=0;a<i.length;a++)if(i[a][s]==e){i.splice(a,1),o=!0;break}return this.setRecentOrFavouriteMovies(i,t),o},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)}},STORE_URL="https://store.cr7player.com",STORE_TOKEN="sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB",IBO_TMDB_URL="https://tmdb.iboplayer.com",IBO_TMDB_TOKEN="sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB",STARARCS_URL="https://backend.stararcs.com";function updateProxyURL(){if(window.PROXY_URL="",settings&&settings.smart_proxy_connection_state&&proxyAvailableServers&&0!==proxyAvailableServers.length)try{var e,t,i=settings.smart_proxy_region||0,s=settings.smart_proxy_country||0,o=settings.smart_proxy_server||0,a=proxyAvailableServers[i];a&&a.Countries&&0<a.Countries.length&&(e=a.Countries[s])&&e.Servers&&0<e.Servers.length&&(t=e.Servers[o])&&(window.PROXY_URL="http://"+t+":8080/?mimo_proxy_token_765=QCIBMHoAmBrlTOQGGvmmcVWbEHdNnUNVIQoirolvjrcsSpGZ&mimo_proxy_target_765=",console.log("Proxy URL updated to:",window.PROXY_URL),$.ajax({url:"http://"+t+":765",type:"GET",success:function(e){},error:function(e,t,i){},complete:function(){console.log("Discovery request completed.")}}))}catch(e){console.error("Error updating proxy URL:",e),window.PROXY_URL=""}}function api(e){console.log(e),window.ongoingRequests||(window.ongoingRequests=[]);var t={type:"GET",headers:{},data:null},i=e.url,i={url:i=settings&&settings.smart_proxy_connection_state&&window.PROXY_URL&&""!==window.PROXY_URL&&(i=window.PROXY_URL+e.url,e.headers)&&e.headers["Custom-Proxy-Mode"]&&1==e.headers["Custom-Proxy-Mode"]?e.url:i,type:e.type||t.type,headers:e.headers||t.headers,data:e.data||t.data},s=("function"==typeof e.success&&(i.success=e.success),"function"==typeof e.error&&(i.error=e.error),e.timeout&&(i.timeout=e.timeout),$.ajax(i));return window.ongoingRequests.push(s),s.always(function(){var e=window.ongoingRequests.indexOf(s);-1<e&&window.ongoingRequests.splice(e,1)}),s}window.PROXY_URL="";var utilities={formatTimeStringToSeconds:function(e){var t;return"string"!=typeof e?(console.error("Invalid input: duration must be a string"),0):(t=0,3===(e=e.split(":").map(Number)).length?t=(t=(t+=3600*e[0])+60*e[1])+e[2]:2===e.length?t=(t+=60*e[0])+e[1]:1===e.length&&(t+=e[0]),t)},getPercentage:function(e,t){return Math.floor(e/t*100)},isNewlyAdded:function(e){return Math.floor(Date.now()/1e3)-e<=1296e3},isRecentlyModifiedSeries:function(e){return Math.floor(Date.now()/1e3)-parseInt(e,10)<=1296e3},compareTimestamps:function(e){var t=new Date;if(isNaN(String(e)))try{var i=e.split(" "),s=i[0].split("-"),o=i[1].split(":"),a=[s[0],s[1].padStart(2,"0"),s[2].padStart(2,"0")].join("-"),n=[o[0].padStart(2,"0"),o[1].padStart(2,"0")].join(":");if(r=new Date(a+"T"+n+":00"),isNaN(r.getTime()))throw new Error("Invalid date format")}catch(e){throw new Error("Invalid timestamp or date format. Expected Unix timestamp or 'YYYY-MM-DD HH:MM' format")}else{var i=String(e),r=i.length<=10?new Date(1e3*parseInt(i)):new Date(parseInt(i));if(isNaN(r.getTime()))throw new Error("Invalid timestamp value")}s=t.getTime(),o=r.getTime();return Math.round((o-s)/864e5)},convertToTimestamp:function(e){var t,i;if(e.match(/^\d{4}-\d{2}-\d{2}$/))t=e.split("-"),i=new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10));else{if(!e.match(/^\d{2}-\d{2}-\d{4}$/))throw new Error("Invalid date format. Please use either 'YYYY-MM-DD' or 'MM-DD-YYYY'");t=e.split("-"),i=new Date(parseInt(t[2],10),parseInt(t[0],10)-1,parseInt(t[1],10))}if((e=i)instanceof Date&&!isNaN(e))return i.getTime();throw new Error("Invalid date. Please check if the date exists.")},timestampDiffInDays:function(e){return Math.ceil((e-(new Date).getTime())/864e5)},getCurrentDate:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")},getCurrentDateTimeFormatted:function(){var e=new Date,t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],i=e.getDate();return t+". "+(i<10?"0":"")+i+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()},pickProperties:function(e,t){for(var i={},s=0;s<t.length;s++){var o=t[s];e.hasOwnProperty(o)&&(i[o]=e[o])}return i},shuffleArray:function(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[--s],e[s]=e[i],e[i]=t;return e},getTopRatedMovies:function(e){if(e&&0!=e.length){for(var t=e.sort(function(e,t){e=parseFloat(e.rating)||0;return(parseFloat(t.rating)||0)-e}),i=parseFloat(t[0].rating),s=[],o=0;o<t.length&&parseFloat(t[o].rating)==i;o++)s.push(t[o]);if(10<s.length)for(o=s.length-1;0<o;o--){var a=Math.floor(Math.random()*(o+1)),n=s[o];s[o]=s[a],s[a]=n}else if(s.length<10){var r=10;s.length<10&&(r=s.length+1);for(o=s.length;o<r;o++)s.push(e[o])}return s.slice(0,10)}},clampNumber:function(e,t,i){return Math.max(t,Math.min(e,i))}},color_theme_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:null,prev_route:"",themes:[["#392F5A","#d6a330"]],current_theme:0,init:function(e){this.generateColorThemes(),this.current_theme=this.getThemeChoiceIndex(),this.styleCurrentChoice(),this.prev_route=e,current_route="color-theme-page",this.current_theme&&0<=this.current_theme&&this.current_theme<this.menu_doms.length?this.hoverMenuItem(this.current_theme):this.hoverMenuItem(0),$("#colors-setting-modal").modal("show")},goBack:function(){$("#colors-setting-modal").modal("hide"),current_route=this.prev_route},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},hoverMenuItem:function(e,t){var t=t||!1,i=this.keys;i.focused_part="menu_selection",i.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active"),moveScrollPosition($("#colors-btns-container"),this.menu_doms[e],"horizontal",!0,t)},generateColorThemes:function(){var i="";this.themes.forEach(function(e,t){i+="      <div        class='colors-setting-item'        onmouseenter='color_theme_page.hoverMenuItem("+t+", true)'        onclick='color_theme_page.changeAppColors("+t+")'      >        <div class='color-setting-colors'>          <span class='color-setting-color' style='background: "+e[0]+";'></span>          <span class='color-setting-color' style='background: "+e[1]+";'></span>        </div>      </div>"}),$("#colors-btns-container").html(i),this.menu_doms=$(".colors-setting-item")},changeAppColors:function(e){settings.saveSettings("colors_theme",e),this.current_theme=e,this.styleCurrentChoice(),styleAppColors()},getThemeChoice:function(){var e=parseInt(localStorage.getItem(storage_id+"colors_theme"));return 0<=e&&e<=this.themes.length?this.themes[e]:this.themes[0]},getThemeChoiceIndex:function(){var e=parseInt(localStorage.getItem(storage_id+"colors_theme"));return 0<=e&&e<=this.themes.length?e:(this.changeAppColors(0),0)},getAppBackgroundColor:function(){return this.getThemeChoice()[0]},getAppMainColor:function(){return this.getThemeChoice()[1]},styleCurrentChoice:function(){$(this.menu_doms).removeClass("current"),$(this.menu_doms[this.current_theme]).addClass("current")},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;t.menu_selection+=e,t.menu_selection<0?t.menu_selection=0:t.menu_selection>this.menu_doms.length-1?t.menu_selection=this.menu_doms.length-1:this.hoverMenuItem(t.menu_selection)},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},colorUtils={processColor:function(e){var t;return"main"===e?t=color_theme_page.getAppMainColor():"background"===e&&(t=color_theme_page.getAppBackgroundColor()),t},processCustomStyle:function(e){return e=(e=e.replace("$BACKGROUND",color_theme_page.getAppBackgroundColor())).replace("$MAIN",color_theme_page.getAppMainColor())}},styleGroups={activeStyles:[{selector:".menu-item-container.active::before",property:"background-color",colorType:"main"},{selector:".latest-movie-item-wrapper.active .latest-movie-item-title-container",property:"background-color",colorType:"main"},{selector:".home-tab-item-container.active",property:"background-color",colorType:"main"},{selector:".layout-setting-item.active",property:"border-color",colorType:"main"},{selector:".layout-setting-item.active",property:"color",colorType:"main"},{selector:".layout-setting-item.current::after",property:"background-color",colorType:"main"},{selector:".setting-menu-item-wrapper.active .setting-menu-item-icon-container",property:"background-color",colorType:"main"},{selector:".hide-category-modal-option.active",property:"background-color",colorType:"main"},{selector:".vod-series-category-item.active",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item",property:"border-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-item-title-wrapper",property:"background-color",colorType:"main"},{selector:".vod-series-menu-item-container.active .vod-series-menu-top-order",property:"background-color",colorType:"main"},{selector:".catchup-page-category-item.active, .catchup-channel-menu-item.active",property:"background-color",colorType:"main"},{selector:".epg-programme-item-wrapper.active",property:"background-color",colorType:"main"},{selector:".epg-date-item-container.active",property:"background-color",colorType:"main"},{selector:".channel-page-category-item.current",property:"background-color",colorType:"main"},{selector:"#vod-watch-movie-button.active .vod-watch-movie-icon-container",property:"background-color",colorType:"main"},{selector:".vod-action-btn.active",property:"background-color",colorType:"main"},{selector:".vod-action-btn.active",property:"border-color",colorType:"main"},{selector:".vod-series-search-btn.active",property:"background-color",colorType:"main"},{selector:"#vod-series-order-btn.active",property:"background-color",colorType:"main"},{selector:".sort-modal-item.active",property:"background-color",colorType:"main"},{selector:".filtered-movie-wrapper.active",property:"background-color",colorType:"main"},{selector:".modal-operation-menu-type-3.active",property:"background-color",colorType:"main"},{selector:".modal-btn-1.active",property:"background-color",colorType:"main"},{selector:".season-item-container.active",property:"background-color",colorType:"main"},{selector:".episode-item-wrapper.active",property:"background-color",colorType:"main"},{selector:".modal-btn-2.active",property:"background-color",colorType:"main"},{selector:"#aspect-ratio-modal-body div.active",property:"border-color",colorType:"main"}],staticStyles:[{selector:"#app",property:"background-color",colorType:"background"},{selector:"#channel-page.classic",property:"background-color",colorType:"background"},{selector:".latest-movie-item-wrapper",property:"border-color",colorType:"main"},{selector:".vod-new-label",property:"background-color",colorType:"main"},{selector:"#vod-summary-watched-bar",property:"background-color",colorType:"main"},{selector:".notification-action-btn",property:"background-color",colorType:"main"},{selector:".highlight",property:"color",colorType:"main"}],customStyles:[{selector:".playlist-item-wrapper",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #00000085 77%)"},{selector:"#playlists-page::after",property:"background",value:"linear-gradient(to left, $BACKGROUND, transparent)"},{selector:"#add-playlist-btn",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #00000085 77%)"},{selector:".playlist-state",property:"background",value:"linear-gradient(45deg, $MAIN 5%, #000000 77%)"},{selector:".channel-page-category-item.active, .channel-menu-item.active",property:"background",value:"linear-gradient( 90deg, $MAIN 37%, transparent, transparent )"},{selector:".modal-operation-menu-type-3.current",property:"border",value:"0.2rem solid $MAIN"}]};function styleAppColors(){for(var e="",t=0;t<styleGroups.customStyles.length;t++){var i=styleGroups.customStyles[t],s=colorUtils.processCustomStyle(i.value);e+=i.selector+" { "+i.property+": "+s+"; }\n"}for(t=0;t<styleGroups.activeStyles.length;t++){var o=styleGroups.activeStyles[t],a=colorUtils.processColor(o.colorType);e+=o.selector+" { "+o.property+": "+a+"; }\n"}for(t=0;t<styleGroups.staticStyles.length;t++){var n=styleGroups.staticStyles[t],a=colorUtils.processColor(n.colorType);e+=n.selector+" { "+n.property+": "+a+"; }\n"}var r=document.getElementById("themeColorStyles");r||((r=document.createElement("style")).id="themeColorStyles",document.head.appendChild(r)),r.innerHTML=e}$(document).ready(function(){styleAppColors()});var mac_address,ip_address,user_name,playlist_status,password,device_key,api_host_url,is_trial,weatherCountry,weatherCity,weatherForecast,weatherToday,weatherNow,expire_date,playlist_expire_date,current_movie,current_season,current_episode,current_series,activation_code,scroll_text_timer,settings={bg_img_url:"",playlist_id:0,playlist:{},vod_sort:"default",series_sort:"default",live_sort:"default",sort_keys:{added:"Added",number:"Number",rating:"Rating",a_z:"A-Z",z_a:"Z-A",name:"Name",default:"Default"},language:"en",time_format:"24",playlist_type:"",stream_format:"default",tmdb_choice:"on",home_favorites_choice:"on",live_initialization_choice:"default",subtitle_size:50,subtitle_bg:"transparent",smart_proxy_connection_state:!1,smart_proxy_region:0,smart_proxy_country:0,smart_proxy_server:0,initFromLocal:function(){var e,t=localStorage.getItem(storage_id+"bg_img_url"),i=(t&&(this.bg_img_url=t),t=localStorage.getItem(storage_id+"playlist_id"),this.playlist_id=t||0,this);["vod_sort","series_sort","live_sort","stream_format","tmdb_choice","home_favorites_choice","live_initialization_choice"].map(function(e){(t=localStorage.getItem(storage_id+e))&&(i[e]=t)}),t=localStorage.getItem(storage_id+"smart_proxy_connection_state"),console.log("Loading smart_proxy_connection_state from localStorage:",t),t&&(this.smart_proxy_connection_state="true"===t),t=localStorage.getItem(storage_id+"smart_proxy_region"),console.log("Loading smart_proxy_region from localStorage:",t),t&&(this.smart_proxy_region=parseInt(t,10)||0),t=localStorage.getItem(storage_id+"smart_proxy_country"),console.log("Loading smart_proxy_country from localStorage:",t),t&&(this.smart_proxy_country=parseInt(t,10)||0),t=localStorage.getItem(storage_id+"smart_proxy_server"),console.log("Loading smart_proxy_server from localStorage:",t),t&&(this.smart_proxy_server=parseInt(t,10)||0),console.log("Final smart proxy settings after loading:",{connection_state:this.smart_proxy_connection_state,region:this.smart_proxy_region,country:this.smart_proxy_country,server:this.smart_proxy_server}),(t=localStorage.getItem(storage_id+"language"))?this.language=t:void 0!==navigator.language&&(e=navigator.language.split("-"),this.language=e[0]),(t=localStorage.getItem(storage_id+"subtitle_size"))&&(this.subtitle_size=parseInt(t)),(t=localStorage.getItem(storage_id+"subtitle_bg"))&&(this.subtitle_bg=t),(t=localStorage.getItem(storage_id+"smart_proxy_region"))&&(this.smart_proxy_region=parseInt(t)),(t=localStorage.getItem(storage_id+"smart_proxy_country"))&&(this.smart_proxy_country=parseInt(t)),(t=localStorage.getItem(storage_id+"smart_proxy_server"))&&(this.smart_proxy_server=parseInt(t)),(t=localStorage.getItem(storage_id+"smart_proxy_connection_state"))&&(this.smart_proxy_connection_state="true"===t)},saveSettings:function(e,t,i){this[e]=t,"object"!==i&&"array"!==i||(t=JSON.stringify(t)),localStorage.setItem(storage_id+e,t)},resetDefaultValues:function(){this.vod_sort="default",this.series_sort="default",this.live_sort="default",this.language="en",this.playlist_id="",this.time_format="24",this.stream_format="default",this.tmdb_choice="on",this.home_favorites_choice="on",this.live_initialization_choice="default",this.playlist={},this.subtitle_size=50,this.subtitle_bg="transparent",this.smart_proxy_connection_state=!1,this.smart_proxy_region=0,this.smart_proxy_country=0,this.smart_proxy_server=0}},panel_urls=["https://iboxiptvplayer.com/api","https://iboxxiptv.com/api","https://iboxxplayerplayer.com/api","https://app.iboxxplayerplayer.com/api","https://iboxxplayer.com/api","https://api.iboxxplayer.com/api","https://app.iboxxplayer.com/api","https://iboxx.ibo-dev.com/api","https://iboxx.mimocodes.com/api"],time_difference_with_server=0,app_loading=!1,themes=[],current_route="login-page",default_movie_icon=HOST+"app_src_min/images/default_channel.png",parent_account_password="0000",mac_valid=!0,playlist_urls=[],languages=[],current_words=[],notification={},client_offset=moment(new Date).utcOffset(),storage_id="MLfCRvAt6g_",platform="samsung",samsung_version="1.0.1",lg_version="1.0.2",vidaa_version="1.0.2",zeasn_version="1.0.0",api_succeed=!1,key_focused=!1,tmdb_api_key="8c16ccb8909edd817467103427d56efe",tmdb_prefix_url="https://api.themoviedb.org/3",tmdb_img_url="https://image.tmdb.org/t/p/",main_domain="ibosol.pro",agent_urls=["https://iboxiptvplayer.com/api","https://iboxxiptv.com/api"],ad_url="",scroll_text_time=400,env="production",storageMoviesInfo=JSON.parse(localStorage.getItem(storage_id+"saved-movie-info"))||{},proxySubscriptionStatus=!0,proxyAvailableServers=[],proxyUrl="",isPlaylistWorking=!0;function showLoader(e){(e=void 0===e?!0:e)?$("#loader").show():$("#loader").hide()}function saveData(e,t){window[e]=t}function getMovieUrl(e,t,i){if("live"===t)if("default"!=settings.stream_format)i=settings.stream_format;else{var s=settings.playlist.url;try{var o=s.split("output="),a=o[1]||"";"mpegts"===a||"ts"===a?i="ts":"hls"!==a&&"m3u8"!==a||(i="m3u8"),console.log("here extension1="+a,i)}catch(e){}}return api_host_url+"/"+t+"/"+user_name+"/"+password+"/"+e+"."+i}function moveScrollPosition(e,t,i,s,o,a){var n,r,l,c;if(e&&t&&i)return a=a||!1,n=$(t).position(),"vertical"===i?(i=d(e,"height"),l=d(t,"height"),r=0,!s||o?(n.top+l>=i&&(r=n.top+l-i),n.top<0&&(r=n.top),$(e).animate({scrollTop:"+="+r},10,"swing")):(c=n.top+l/2-i/2,$(e).animate({scrollTop:"+="+c},100,"linear")),r):(l=d(e,"width"),i=d(t,"width"),c=0,!s||o?(n.left+i>=l&&(c=n.left+i-l),n.left<0&&!a?c=n.left:n.left<50&&a&&(c=n.left-100)):c=n.left+i/2-l/2,$(e).animate({scrollLeft:"+="+c},100,"linear"),c);function d(e,t){return parseInt($(e).css(t).replace("px",""))}}function showToast(e,t){$("#toast-body").html("<h3>"+e+"<br>"+t+"</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")}function getMinute(e){e=new Date(e);return parseInt(e.getTime()/60/1e3)}function parseM3uResponse(e,t){var i=0;if("type1"===e){var s=[],o=[],a=[],n=[],r=[],l=[],c=(t=t.replace(/['"]+/g,"")).split(/#EXTINF:-{0,1}[0-9]{1,} {0,},{0,}/gm),d=(c.splice(0,1),[]);(new Date).getTime();if(t.includes("tvg-"))for(var h={},u={},_={},m=0;m<c.length;m++)try{var p,g,v,y,d=c[m].split("\n");i++,(f=1<d[1].length?d[1]:"").includes("http:")&&(e="live",(f.includes("/movie/")||f.includes("vod")||f.includes("=movie")||f.includes("==movie=="))&&(e="vod"),f.includes("/series/")&&(e="series"),p=d[0].trim().split(","),b=1<p.length?p[1]:"",g=splitStrings(p[0],["tvg-","channel-","group-"]),k={stream_id:"",name:b,stream_icon:"",title:""},v="All",g.map(function(e){var e=e.split("="),t=e[0],i=e[1];switch(t){case"id":k.stream_id=i;break;case"name":k.name=""!=i.trim()?i:b;break;case"logo":k.stream_icon=i;break;case"title":""==(v=i.split(",")[0])&&(v="Uncategorized")}}),""===k.stream_id.trim()&&(k.stream_id=k.name),k.url=f,k.num=i,"live"===e&&(void 0===h[v]&&(y={category_id:h[v]=v,category_name:v},s.push(y)),k.category_id=v,o.push(k)),"vod"===e&&(void 0===u[v]&&(y={category_id:u[v]=v,category_name:v},n.push(y)),k.category_id=v,a.push(k)),"series"===e)&&(void 0===_[v]&&(y={category_id:_[v]=v,category_name:v},r.push(y)),k.category_id=v,l.push(k))}catch(e){console.log("parsing m3u error "+m,e)}else for(s=[{category_id:"all",category_name:"All"}],n=[{category_id:"all",category_name:"All"}],r=[{category_id:"all",category_name:"All"}],m=0;m<c.length;m++){d=c[m].split("\n");try{var f,b=d[0],e="live",k=((f=d[1]).includes("/movie/")&&(e="movie"),f.includes("/series/")&&(e="series"),{});b=b.trim(),k.stream_id=b,k.name=b,k.stream_icon="",k.num=m+1,k.category_id="all",k.url=f,"live"===e&&o.push(k),"series"===e&&l.push(k),"movie"===e&&a.push(k)}catch(e){console.log(d[0]),console.log(e)}}1<s.length&&s.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<n.length&&n.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<r.length&&r.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),LiveModel.setCategories(s),LiveModel.setMovies(o),LiveModel.insertMoviesToCategories(),VodModel.setCategories(n),VodModel.setMovies(a),VodModel.insertMoviesToCategories(),SeriesModel.setCategories(r);t=parseSeries(l);SeriesModel.setMovies(t),SeriesModel.insertMoviesToCategories()}}function parseSeries(e){var s=[],a={},n={},r={},o=(e.map(function(e){try{var t=e.name.split(/ S[0-9]{2}/),i=e.name.match(/S[0-9]{2}/)[0],s=(i="Season "+(i=i.trim().replace("S","")),t[0].trim()),o=t[1].trim().replace("E","");void 0===a[s]?(n={},(r={})[i]=[{name:o,url:e.url,id:o,info:{},title:"Episode "+o}],n[i]={name:i,cover:HOST+"app_src_min/images/series-icon.png"},a[s]={series_id:s,name:s,cover:e.stream_icon,youtube_trailer:"",category_id:e.category_id,rating:"",rating_5based:"",genre:"",director:"",cast:"",plot:"",season_map:n,episodes:r}):(void 0===n[i]?(r[i]=[{name:o,url:e.url,id:o,info:{},title:"Episode "+o}],n[i]={name:i,cover:HOST+"app_src_min/images/series-icon.png"},a[s].season_map=n):r[i].push({name:i,url:e.url,id:i,info:{},title:"Episode "+o}),a[s].episodes=r)}catch(e){}}),console.log("Here Series Map",a),0);return Object.keys(a).map(function(e){o++;var t=a[e],i=[];try{Object.keys(t.season_map).map(function(e){i.push(t.season_map[e])})}catch(e){}delete t.season_map,t.num=o,t.seasons=i,s.push(t)}),s}function splitStrings(e,t){for(var i=[],s=0;s<t.length;s++){var o=e.split(t[s]);if(s==t.length-1)for(var a=0;a<o.length;a++)""!=o[a].trim()&&i.push(o[a]);else for(a=0;a<o.length;a++)""!=o[a].trim()&&splitStrings(o[a],t.slice(s+1)).map(function(e){""!==e.trim()&&i.push(e)});return i}}function getAtob(e){var t=e;try{return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){}return t}function checkForAdult(e,t,i){var s,o=!1;if("movie"===t){for(var a=0;a<i.length;a++)if(e.category_id==i[a].category_id){s=i[a];break}}else s=e;for(var n=s.category_name.toLowerCase(),r=["xxx","sex","porn","adult","18+","+18"],a=0;a<r.length;a++)if(n.includes(r[a])){o=!0;break}return o=s.parent_id&&0!=s.parent_id?!0:o}function pickPanelUrl(i){var e,t;if(0==i.length){for(var s=0;s<panel_urls.length;s++)if(panel_urls[s].includes(main_domain)){e=panel_urls[s],t=s;break}e||(e=panel_urls[0],t=0)}else for(var o=[],a=(panel_urls.map(function(e,t){i.includes(t)||o.push(e)}),Math.random()),n=1/o.length,s=0;s<o.length;s++)if(s*n<=a&&a<=n*(s+1)){e=o[s],t=s;break}return[t,e]}function getSortedMovies(e,t){var i=[],s="number"===t?"num":"a_z"!==t&&"z_a"!==t?t:"name";if(0==e.length)return e;if(void 0===e[0][s])return e;var o=1;switch(t){case"rating":case"number":case"added":o=1,"number"===t&&(o=-1),i=e.sort(function(e,t){e=parseFloat(e[s]),isNaN(e)&&(e=0),t=parseFloat(t[s]);return isNaN(t)&&(t=0),o*(e<t?1:t<e?-1:0)});break;case"a_z":case"z_a":case"name":o="a_z"===t||"name"===t?1:-1,i=e.sort(function(e,t){return o*e[s].localeCompare(t[s])});break;case"default":return e}return i}function parseM3uUrl(){var e,t=settings.playlist.url;t&&""!==t.trim()&&(t.includes("username=")&&t.includes("password=")?settings.playlist_type="xc":settings.playlist_type="type1",api_host_url="xc"===settings.playlist_type?((e=settings.playlist.url.split("?"))[1].split("&").map(function(e){var e=e.split("="),t=e[0],e=e[1];"username"===t.toLowerCase()&&(user_name=e),"password"===t.toLowerCase()&&(password=e)}),e[0].replace("/get.php","")):t)}function makeRearrangeArray(e,t,i){t=e.splice(t,1)[0];return e.splice(i,0,t),e}function setSelectionRange(t){setTimeout(function(){var e=$(t).val();$(t)[0].setSelectionRange(e.length,e.length)},200)}function exitApp(){"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close()}function checkVerticalMovable(e,t,i,s){var o=i<t&&s<0?!1:!0;return o=(Math.ceil(e/t)-1)*t<=i&&0<s?!1:o}function getLatestMovies(e){var t=[],i=("channel"===e?t=LiveModel.getCategories(!1,!1):"movie"===e?t=VodModel.getCategories(!1,!1):"series"===e&&(t=SeriesModel.getCategories(!1,!1)),[]);return t.map(function(e){checkForAdult(e,"category",[])||(i=i.concat(e.movies))}),(i=getSortedMovies(i,"added")).slice(0,50)}function getEncryptKey(e){for(var t="";t.length<e;t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(62*Math.random()|0));return t}function getEncryptKeyPosition(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i=0;i<t.length;i++)if(t[i]==e)return i}function getEncryptPositionChar(e){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".charAt(e)}function encryptRequest(e){var e=JSON.stringify(e),e=btoa(e),t=parseInt(30*Math.random()),i=(t<20&&(t=20),Math.floor(Math.random()*e.length)),s=(42<=i&&(i=42),getEncryptKey(t)),s=e.slice(0,i).concat(s).concat(e.slice(i));return getEncryptPositionChar(i)+getEncryptPositionChar(t)+s}function decryptResponse(e){var e=e.data,t=getEncryptKeyPosition(e[e.length-2]),i=getEncryptKeyPosition(e[e.length-1]),e=getAtob((e=e.slice(0,e.length-2)).slice(0,t).concat(e.slice(t+i)));return JSON.parse(e)}function changeLocalStorageKeysForPlaylist(e,s){for(var o=[],a=[],n=[],t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);e.map(function(e,t){var i;r.includes(e)&&r.includes(storage_id)&&(i=localStorage.getItem(r),e=r.replace(e,s[t]),a.push(e),n.push(i),o.push(r))})}o.map(function(e){localStorage.removeItem(e)}),a.map(function(e,t){localStorage.setItem(e,n[t])})}function removeLocalStorageKeysForPlaylist(e){for(var t=[],i=localStorage.length-1;0<=i;i--){var s=localStorage.key(i);e.map(function(e){s.includes(storage_id)&&s.includes(e)&&t.push(s)})}t.map(function(e){localStorage.removeItem(e)})}function checkActivePlaylist(){return!(!settings.playlist_id||0==Object.keys(settings.playlist).length)||(showToast("Sorry","No active playlist now<br>Please select one playlist in change playlist page"),!1)}function getRealMovieName(e){for(var e=e.split("-"),t=(1<e.length?e[1]:e[0]).split("("),e=t[0].trim(),i="",s="",o=1;o<t.length;o++){var a=t[o].replace(")","").trim();isNaN(a)?i=a:s=parseInt(a)}return{name:e,country:i,year:s}}function hideImg(e){$(e).hide(),$(".vod-series-background-img-overlay").hide()}function pickAgentUrl(i){for(var e,t,s=[],o=(agent_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),a=1/s.length,n=0;n<s.length;n++)if(n*a<=o&&o<=a*(n+1)){e=s[n],t=n;break}return[t,e]}function updateTimeStr(){var e=moment().format("hh:mm A");$(".current-time").text(e)}function debounce(i,s){var o;return function(){var e=this,t=arguments;clearTimeout(o),o=setTimeout(function(){o=null,i.apply(e,t)},s)}}function applyAnimation(t){try{clearTimeout(scroll_text_timer),scroll_text_timer=null,scroll_text_timer=setTimeout(function(){var e;$(t).find(".floatTextWrapper").width()<$(t).find(".floatText").width()&&(0==$(t).find(".floatTextTail").length&&(e=$(t).find(".floatText").html(),$(t).find(".floatTextWrapper").append('<span class="floatText floatTextTail">'+e+"</span>")),e=15*$(t).find(".floatText").width()/1e3,$(t).find(".floatText").css({"animation-duration":e+"s","-webkit-animation-duration":e+"s"}).addClass("has-animation"))},scroll_text_time)}catch(e){}}Array.prototype.includes||(Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,n,r){return function(e,t){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var i=a(this),s=i.length>>>0,o=r(0|t,s);if(o<0)o=n(0,s+o);else if(s<=o)return-1;if(void 0===e){for(;o!==s;++o)if(void 0===i[o]&&o in i)return o}else if(e!=e){for(;o!==s;++o)if(i[o]!=i[o])return o}else for(;o!==s;++o)if(i[o]===e)return o;return-1}}(Object,Math.max,Math.min)),String.prototype.includes||(String.prototype.includes=function(e){return!!~this.indexOf(e)});var clearCachedMoviesInfo=function(){storageMoviesInfo&&(storageMoviesInfo={},localStorage.removeItem(storage_id+"saved-movie-info"))};function handleWeatherFetchAndStore(){var e=JSON.parse(localStorage.getItem(storage_id+"weather-forecast")),t=(console.log("Stored Weather Data:",e),-20);e&&e.date&&(console.log("Date detected"),t=utilities.compareTimestamps(e.date)),e&&e.timestamp&&(console.log("Timestamp detected"),t=utilities.compareTimestamps(e.timestamp)),!e||t<=-13?$.getJSON("http://api.weatherapi.com/v1/forecast.json?key=0c1f9db9b99649f3a2b124503241310&q="+ip_address+"&days=14",function(e){e={date:e.location.localtime,country:e.location.country,city:e.location.name,forecast:e.forecast.forecastday};localStorage.setItem(storage_id+"weather-forecast",JSON.stringify(e)),handleWeatherFetchAndStore()}):(weatherCountry=e.country,weatherCity=e.city,weatherForecast=e.forecast,weatherToday=binarySearchForecastDays(weatherForecast),weatherNow=binarySearchForecastHours(weatherToday.hour))}function binarySearchForecastDays(e){for(var t=new Date,i=(t.setUTCHours(0,0,0,0),Math.floor(t.getTime()/1e3)),s=0,o=e.length-1;s<=o;){var a=Math.floor((s+o)/2);if(e[a].date_epoch===i)return e[a];e[a].date_epoch<i?s=a+1:o=a-1}return 0<=o&&e[o].date_epoch<=i?e[o]:s<e.length?e[s]:null}function binarySearchForecastHours(e){for(var t=new Date,i=Math.floor(t.getTime()/1e3),s=0,o=e.length-1;s<=o;){var a=Math.floor((s+o)/2);if(e[a].time_epoch<=i&&(a===e.length-1||e[a+1].time_epoch>i))return e[a];e[a].time_epoch>i?o=a-1:s=a+1}return s<e.length?e[s]:null}function handleProxyInfoFetch(t){api({url:STARARCS_URL+"/api/tv/general",type:"POST",data:{DeviceMac:mac_address,DeviceAppName:"IBOXPlayer",DeviceUserAgent:platform},success:function(e){if(proxySubscriptionStatus=e.Response.Status,proxyAvailableServers=e.Response.Servers,proxyUrl=e.Response.Url,settings_page.setupSmartProxyOptions(),console.log("Proxy Servers",proxyAvailableServers),"function"==typeof updateProxyURL&&updateProxyURL(),t)switch(e.Response.Status){case"Success":return showToast("Success","You are now subscribed to the service"),!0;case"Expired":return showToast("Expired","Your subscription has expired."),!1;case"QuotaLimit":return showToast("Quota Limit","You've used all your quota."),!1;case"SubFail":return showToast("Failed","We couldn't find an active subscription."),!1;default:return showToast("Failed","Something went wrong."),!1}},error:function(e){console.error("PROXY ERROR",e),t&&showToast("Error","Something went wrong.")}})}function generateQRCode(e,t,i){return i=i||{},t.empty(),new QRCode(t[0],{text:e,width:i.width||128,height:i.height||128,colorDark:i.colorDark||"#000000",colorLight:i.colorLight||"#ffffff",correctLevel:QRCode.CorrectLevel.M})}function handlePlaylistDependantElements(e){void 0!==e&&(isPlaylistWorking=e),$(".playlist-dependant").each(function(){var e,t=$(this);isPlaylistWorking?t.find(".playlist-not-working-overlay").remove():(t.css({position:"relative",overflow:"hidden"}),(e=$("<div class='playlist-not-working-overlay'>PLAYLIST NOT WORKING</div>")).css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-color":"rgba(0, 0, 0, 0.6)",display:"flex","align-items":"center","justify-content":"center","z-index":"9999","pointer-events":"none",color:"#fff","font-size":"1.5rem","font-style":"italic"}),t.append(e))})}function handleServerNotifications(e){if(e.length)for(var t=0;t<e.length;t++)home_page.addNotification(e[t])}var login_page={is_loading:!1,activeRequests:[],keys:{focused_part:"main_area",main_area:0,network_issue_btn:0,expired_issue_btn:0,no_playlist_btn:0,loading_stuck_btn:0},login_succeed:!1,tried_panel_indexes:[],network_issue_btns:$(".network-issue-btn"),expired_issue_btns:$(".expired-issue-btn"),no_playlist_btns:$(".no-playlist-btn"),playlist_not_working_timer:null,loading_stuck_check_timer:6e4,goBack:function(){turn_off_page.init("login-page")},showLoadImage:function(){$("#loading-issue-container").hide(),$("#loading-page").removeClass("hide")},showLoginError:function(){$(".loading-issue-item").addClass("hide"),$("#loading-issue-container").show()},showNetworkErrorModal:function(){this.showLoginError(),$("#network-issue-container").removeClass("hide"),this.hoverNetworkIssueBtn(0)},reloadApp:function(){window.location.reload()},continueDemoPlaylist:function(){var e=this;$("#loading-issue-container").hide(),$(".loading-issue-item").addClass("hide"),setTimeout(function(){e.login()},200)},exit:function(){exitApp()},enterActivationPage:function(){activation_page.init("login-page")},syncWithServer:function(r){var e,t,i,s,l,c,d=localStorage.getItem(storage_id+"local_data");d&&((d=JSON.parse(d)).playlist_urls&&0<d.playlist_urls.length||d.remove_ids&&0<d.remove_ids.length)?(e=(e=d.playlist_urls)||[],c=(c=d.remove_ids)||[],api_succeed?(t=(s=pickPanelUrl(this.tried_panel_indexes))[1],i=s[0],s=encryptRequest({mac_address:mac_address,app_type:platform,playlists:e,remove_ids:c}),l=this,api({method:"post",url:t+"/update_playlist",data:{data:s},success:function(e){l.tried_panel_indexes=[];for(var t=decryptResponse(e),i=[],s=[],o=0;o<t.length;o++)t[o].id!=t[o].origin_id&&(i.push(t[o].id),s.push(t[o].origin_id),settings.playlist_id===t[o].origin_id)&&settings.saveSettings("playlist_id",t[o].id,"");0<i.length&&changeLocalStorageKeysForPlaylist(s,i);for(var a=r.urls,o=a.length-1;0<=o;o--)for(var n=0;n<t.length;n++)if(a[o].id==t[n].id){a.splice(o,1);break}for(o=(a=a.concat(t)).length-1;0<=o;o--)c.includes(a[o].id)&&a.splice(o,1);r.urls=a,localStorage.setItem(storage_id+"api_data",JSON.stringify(r)),d.playlist_urls=[],d.remove_ids=[],localStorage.setItem(storage_id+"local_data",JSON.stringify(d)),l.loadApp(r)},error:function(){l.is_loading=!1,l.tried_panel_indexes.push(i),l.tried_panel_indexes.length<panel_urls.length?l.syncWithServer(r):l.syncFailedWithServer(r,d)}})):this.syncFailedWithServer(r,d)):this.loadApp(r)},syncFailedWithServer:function(e,t){for(var i=(i=t.playlist_urls)||[],s=(s=t.remove_ids)||[],o=e.urls,a=o.length-1;0<=a;a--)for(var n=0;n<i.length;n++)if(o[a].id==i[n].id){o.splice(a,1);break}for(a=(o=o.concat(i)).length-1;0<=a;a--)s.includes(o[a].id)&&o.splice(a,1);t.remove_ids=s=[],localStorage.setItem("local_data",JSON.stringify(t)),e.urls=o,this.loadApp(e)},fetchPlaylistInformation:function(){var i,e,s,t;this.is_loading||(api_succeed=!0,this.showLoadImage(),(i=this).is_loading=!0,$("#mac-address").text(mac_address),$(".mac-address").text(mac_address),e=(t=pickPanelUrl(this.tried_panel_indexes))[1],s=t[0],t="samsung"===platform?samsung_version:"lg"===platform?lg_version:vidaa_version,api({url:e+"/playlist_info",type:"POST",data:{data:encryptRequest({mac_address:mac_address,app_type:platform,version:t="zeasn"!==platform&&"titanos"!==platform?t:zeasn_version})},success:function(e){i.tried_panel_indexes=[];e=decryptResponse(e);console.log("API Decrypted response",e),ip_address=e.ip_address,2==e.is_trial?$(".app-expire-date").text("Lifetime"):$(".app-expire-date").text(e.expire_date),2==e.is_trial?$(".app-expire-date").text("Lifetime"):$(".app-expire-date").text(e.expire_date),localStorage.setItem(storage_id+"api_data",JSON.stringify(e)),e.themes&&(themes=e.themes),e.themes&&(themes=e.themes),i.syncWithServer(e),handleWeatherFetchAndStore(),handleProxyInfoFetch(),e.notifications&&handleServerNotifications(e.notifications)},error:function(e){var t;saveData("api_succeed",i.is_loading=!1),i.tried_panel_indexes.length<panel_urls.length?(i.tried_panel_indexes.push(s),i.fetchPlaylistInformation()):(t=localStorage.getItem(storage_id+"api_data"))?(t=JSON.parse(t),i.syncWithServer(t)):i.showNetworkErrorModal()}}))},loadApp:function(e){console.log("DATA",e);var t=moment().format("Y-MM-DD");saveData("playlist_urls",e.urls),saveData("notification",e.notification),$(".device-key").text(e.device_key),$(".loading-page-device-info-container").css("display","flex"),saveData("languages",e.languages),saveData("device_key",e.device_key),saveData("expire_date",e.expire_date),!api_succeed&&e.expire_date<t&&saveData("expire_date","2438-01-02"),saveData("is_trial",e.is_trial),this.is_loading=!1,$(".expire-date").text(expire_date),e.expire_date<t?(saveData("mac_valid",!1),this.showLoginError(),$("#expired-issue-container").removeClass("hide"),this.hoverExpiredIssueBtn(0),this.hideLoadingForTooLong()):e.has_own_playlist?this.login():(this.showLoginError(),$("#no-playlist-issue-container").removeClass("hide"),this.hoverNoPlaylistBtn(0),this.hideLoadingForTooLong())},getPlayListDetail:function(){var s=this;if(this.playlist_not_working_timer=setTimeout(function(){s.showLoadingForTooLong()},this.loading_stuck_check_timer),mac_address="52:54:00:12:34:59","samsung"===platform)try{tizen.systeminfo.getPropertyValue("ETHERNET_NETWORK",function(e){void 0!==e&&void 0!==e.macAddress&&(mac_address=e.macAddress),s.fetchPlaylistInformation()})}catch(e){this.fetchPlaylistInformation()}else if("lg"===platform)webOS.service.request("luna://com.webos.service.sm",{method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onSuccess:function(e){mac_address="";for(var t=e.idList[0].idValue.replace(/['-]+/g,""),i=0;i<=5;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":");s.fetchPlaylistInformation()},onFailure:function(e){s.fetchPlaylistInformation()}});else if("vidaa"===platform)try{if("function"==typeof Hisense_GetDeviceID){var e=Hisense_GetDeviceID();if(/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(e))mac_address=e;else{mac_address="";var t=e.slice(-12);try{for(var i=0;i<6;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":")}catch(e){}}console.log("VIDAA MAC Address: "+mac_address)}s.fetchPlaylistInformation()}catch(e){s.fetchPlaylistInformation()}else"zeasn"===platform||"titanos"===platform?window.onDeviceInfoReady(function(e){try{var t=e.Product.deviceID,i=e.Product.WhaleAdID,s=e.Product.mac,o=(console.log("Device ID:",t),console.log("Whale ID:",i),console.log("Device MAC Address:",s),""),a="";if(mac_address="",s&&"undefined"!==s&&""!==s&&null!==s&&"null"!==s)mac_address=o=s;else{for(var o=i,n=0;n<o.length&&("-"!=o[n]&&(a+=o[n]),!(12<=a.length));n++);for(n=0;n<=5;n++)mac_address+=a.substr(2*n,2),n<5&&(mac_address+=":")}console.log("Zeasn mac address=",mac_address),login_page.fetchPlaylistInformation()}catch(e){login_page.fetchPlaylistInformation()}console.log(e)}):("windows"===platform&&console.log("Windows test mac address",mac_address),s.fetchPlaylistInformation())},login:function(){this.showLoadImage();for(var e=settings.playlist_id,t=0,i=0;i<playlist_urls.length;i++)if(playlist_urls[i].id==e){t=i;break}settings.saveSettings("playlist",playlist_urls[t],"array"),settings.saveSettings("playlist_id",playlist_urls[t].id,"");var s=this;"code"===playlist_urls[t].playlist_type?api({type:"POST",url:STORE_URL+"/api/sync-code",data:{code:playlist_urls[t].code,mac_address:mac_address},headers:{Authorization:"Bearer "+STORE_TOKEN},success:function(e){console.log(e),e.status?e.data.is_expired?s.goToPlaylistPageWithError("Code is expired"):"enable"!==e.data.status?s.goToPlaylistPageWithError("Code is disabled"):e.data.url&&0!==e.data.url.length?(playlist_urls[t].code_response=e.data,playlist_urls[t].url_index=0,s.tryPlaylistUrl(t)):s.goToPlaylistPageWithError("No playlist URL found in this code"):s.goToPlaylistPageWithError(e.msg)},error:function(){s.goToPlaylistPageWithError()}}):this.continueLogin(t)},tryPlaylistUrl:function(e){var t,i=playlist_urls[e].code_response,s=playlist_urls[e].url_index;s>=i.url.length?this.goToPlaylistPageWithError("All playlist URLs failed"):(t=i.url[s],console.log("Trying playlist URL "+(s+1)+" of "+i.url.length),(!t.includes("get.php")||!t.includes("type=m3u"))&&"xc"===i.type&&i.username&&i.password?(playlist_urls[e].playlist_type="xc",playlist_urls[e].url=t,playlist_urls[e].username=i.username,playlist_urls[e].password=i.password):(playlist_urls[e].playlist_type="general",playlist_urls[e].url=t),this.continueLoginWithFallback(e))},continueLoginWithFallback:function(e){"xc"===playlist_urls[e].playlist_type?(user_name=playlist_urls[e].username,password=playlist_urls[e].password,api_host_url=playlist_urls[e].url,settings.playlist_type="xc"):parseM3uUrl(),this.proceedLoginWithFallback(e)},proceedLoginWithFallback:function(e){var t,r,l,c,d=this;this.is_loading||($("#playlist-error").hide(),$("#playlist-items-container").removeClass("has-error"),LiveModel.init(),VodModel.init(),SeriesModel.init(),t=settings.playlist_type,this.is_loading=!0,api_host_url=api_host_url||(settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url),storageMoviesInfo.host_url!=api_host_url&&clearCachedMoviesInfo(),r=function(){d.is_loading=!1,home_page.init(!0),d.hideLoadingForTooLong()},l=function(){d.is_loading=!1,playlist_urls[e].url_index++,d.tryPlaylistUrl(e)},api("xc"===t?{method:"get",url:(c=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=").replace("&action=",""),success:function(e){if(void 0!==e.server_info&&calculateTimeDifference(e.server_info.time_now,e.server_info.timestamp_now),void 0!==e.user_info){if(0==e.user_info.auth||void 0!==e.user_info.status&&("Expired"===e.user_info.status||"Banned"===e.user_info.status||"Disabled"===e.user_info.status))return void l();null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD")));var t=api({method:"get",url:c+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),i=api({method:"get",url:c+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),s=api({method:"get",url:c+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),o=api({method:"get",url:c+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),a=api({method:"get",url:c+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),n=api({method:"get",url:c+"get_series",success:function(e){SeriesModel.setMovies(e)}});d.activeRequests=[t,i,s,o,a,n],$.when(t,i,s,o,a,n).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),r()}catch(e){l()}}).fail(function(){l()})}playlist_status=e.user_info&&e.user_info.status||"Unknown"},error:function(e){l()},timeout:15e3}:{method:"get",url:api_host_url=settings.playlist.url,timeout:24e4,success:function(e){try{parseM3uResponse("general",e),$("#loading-page").addClass("hide"),r()}catch(e){l()}},error:function(e){l()}}))},continueLogin:function(e){"xc"===playlist_urls[e].playlist_type?(user_name=playlist_urls[e].username,password=playlist_urls[e].password,api_host_url=playlist_urls[e].url,settings.playlist_type="xc"):parseM3uUrl(),this.proceed_login()},goToPlaylistPageWithError:function(e,t){t&&this.abortAllRequests(),handlePlaylistDependantElements(!1),this.is_loading=!1,LiveModel.insertMoviesToCategories([]),VodModel.insertMoviesToCategories([]),SeriesModel.insertMoviesToCategories([]),$("#loading-page").addClass("hide"),$("#playlist-error").show(),e&&"string"==typeof e?$("#playlist-error").text(e):$("#playlist-error").text("We regret to inform you that there is a problem with the current                playlist. This issue is associated with your IPTV service                provider, not our application. For inquiries about the playlist’s                status and expiration, please reach out to your provider."),$("#playlist-items-container").addClass("has-error"),home_page.init(),this.hideLoadingForTooLong(),home_page.hoverMainMenu(4),home_page.handleMenuClick()},abortAllRequests:function(){if(console.log("Aborting all requests..."),this.activeRequests&&0<this.activeRequests.length){console.log("Found "+this.activeRequests.length+" local active requests to abort");for(var t=0;t<this.activeRequests.length;t++)if(this.activeRequests[t]&&this.activeRequests[t].abort)try{this.activeRequests[t].abort(),console.log("Aborted local request "+(t+1))}catch(e){console.log("Error aborting local request "+(t+1)+":",e)}this.activeRequests=[]}if(window.ongoingRequests){console.log("Found "+window.ongoingRequests.length+" ongoing requests to abort");for(t=0;t<window.ongoingRequests.length;t++)if(window.ongoingRequests[t]&&window.ongoingRequests[t].abort)try{window.ongoingRequests[t].abort(),console.log("Aborted request "+(t+1))}catch(e){console.log("Error aborting request "+(t+1)+":",e)}window.ongoingRequests=[]}jQuery&&0<jQuery.active&&(console.log("Found "+jQuery.active+" active jQuery requests"),$(document).ajaxStop()),this.playlist_not_working_timer&&(clearTimeout(this.playlist_not_working_timer),this.playlist_not_working_timer=null),this.is_loading=!1,console.log("Request abortion completed")},convertNormalM3u:function(){var e;console.log("Converting to normal M3U"),this.is_loading=!1,"xc"===settings.playlist.playlist_type&&(e=settings.playlist.url+"/get.php?username="+settings.playlist.username+"&password="+settings.playlist.password+"&type=m3u_plus&output=m3u8",settings.playlist.url=e),settings.playlist_type="general",api_host_url=settings.playlist.url,this.proceed_login()},proceed_login:function(){var l,e,t;this.is_loading||($("#playlist-error").hide(),$("#playlist-items-container").removeClass("has-error"),LiveModel.init(),VodModel.init(),SeriesModel.init(),e=settings.playlist_type,(l=this).is_loading=!0,api_host_url=api_host_url||(settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url),storageMoviesInfo.host_url!=api_host_url&&clearCachedMoviesInfo(),t=proxySubscriptionStatus?1e3:0,setTimeout(function(){var r;api("xc"===e?{method:"get",url:(r=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=").replace("&action=",""),success:function(e){var t,i,s,o,a,n;void 0!==e.server_info&&calculateTimeDifference(e.server_info.time_now,e.server_info.timestamp_now),void 0!==e.user_info&&(playlist_status=e.user_info.status,0==e.user_info.auth||void 0!==e.user_info.status&&("Expired"===e.user_info.status||"Banned"===e.user_info.status||"Disabled"===e.user_info.status)?(l.is_loading=!1,l.goToPlaylistPageWithError(),e.user_info.exp_date&&(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD"))))):(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD"))),t=api({method:"get",url:r+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),i=api({method:"get",url:r+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),s=api({method:"get",url:r+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),o=api({method:"get",url:r+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),a=api({method:"get",url:r+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),n=api({method:"get",url:r+"get_series",success:function(e){SeriesModel.setMovies(e)}}),l.activeRequests=[t,i,s,o,a,n],$.when(t,i,s,o,a,n).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),l.is_loading=!1,home_page.init(!0),handlePlaylistDependantElements(!0),l.hideLoadingForTooLong()}catch(e){l.convertNormalM3u()}}).fail(function(){l.convertNormalM3u()}))),playlist_status=e.user_info&&e.user_info.status||"Unknown"},error:function(e){l.convertNormalM3u()},timeout:15e3}:{method:"get",url:api_host_url=settings.playlist.url,timeout:24e4,success:function(e){parseM3uResponse("general",e),$("#loading-page").addClass("hide"),home_page.init(!0),l.hideLoadingForTooLong(),l.is_loading=!1},error:function(e){l.goToPlaylistPageWithError()}})},t))},hoverNetworkIssueBtn:function(e){var t=this.keys;t.focused_part="network_issue_btn",t.network_issue_btn=e,$(this.network_issue_btns).removeClass("active"),$(this.network_issue_btns[e]).addClass("active")},hoverExpiredIssueBtn:function(e){var t=this.keys;t.focused_part="expired_issue_btn",t.expired_issue_btn=e,$(this.expired_issue_btns).removeClass("active"),$(this.expired_issue_btns[e]).addClass("active")},hoverNoPlaylistBtn:function(e){var t=this.keys;t.focused_part="no_playlist_btn",t.no_playlist_btn=e,$(this.no_playlist_btns).removeClass("active"),$(this.no_playlist_btns[e]).addClass("active")},showLoadingForTooLong:function(){$("#app-loading-too-long").css("display","flex"),this.keys.focused_part="loading_stuck"},hideLoadingForTooLong:function(){clearTimeout(this.playlist_not_working_timer),$("#app-loading-too-long").hide()},clickLoadingForTooLongOption:function(e){switch(e){case 0:this.goToPlaylistPageWithError("Playlist loading aborted by the user.",!0);break;case 1:window.location.reload();break;case 2:this.hideLoadingForTooLong()}},hoverLoadingForTooLongOption:function(e){this.keys.loading_stuck_btn=e,$(".app-loading-too-long-cta-button").removeClass("active"),$($(".app-loading-too-long-cta-button")[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"network_issue_btn":$(this.network_issue_btns[e.network_issue_btn]).trigger("click");break;case"no_playlist_btn":$(this.no_playlist_btns[e.no_playlist_btn]).trigger("click");break;case"expired_issue_btn":$(this.expired_issue_btns[e.expired_issue_btn]).trigger("click");break;case"loading_stuck":this.clickLoadingForTooLongOption(e.loading_stuck_btn)}},handleMenuUpDown:function(e){var t=this.keys;"main_area"===t.focused_part&&(t.main_area+=e,(e=[$("#login-button")]).map(function(e){$(e).removeClass("active")}),t.main_area<0&&(t.main_area=e.length-1),t.main_area>=e.length&&(t.main_area=0),$(e[t.main_area]).addClass("active"))},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"network_issue_btn":t.network_issue_btn+=e,t.network_issue_btn<0&&(t.network_issue_btn=0),t.network_issue_btn>=this.network_issue_btns.length&&(t.network_issue_btn=this.network_issue_btns.length-1),this.hoverNetworkIssueBtn(t.network_issue_btn);break;case"expired_issue_btn":t.expired_issue_btn+=e,t.expired_issue_btn<0&&(t.expired_issue_btn=0),1<t.expired_issue_btn&&(t.expired_issue_btn=1),this.hoverExpiredIssueBtn(t.expired_issue_btn);break;case"no_playlist_btn":t.no_playlist_btn+=e,t.no_playlist_btn<0&&(t.no_playlist_btn=0),1<t.no_playlist_btn&&(t.no_playlist_btn=1),this.hoverNoPlaylistBtn(t.no_playlist_btn);break;case"loading_stuck":t.loading_stuck_btn+=e,t.loading_stuck_btn<0&&(t.loading_stuck_btn=0),2<t.loading_stuck_btn&&(t.loading_stuck_btn=2),this.hoverLoadingForTooLongOption(t.loading_stuck_btn)}},HandleKey:function(e){switch(e.keyCode){case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},temps=[{name:"Afar",iso6392B:"aar",iso6391:"aa"},{name:"Abkhazian",iso6392B:"abk",iso6391:"ab"},{name:"Achinese",iso6392B:"ace"},{name:"Acoli",iso6392B:"ach"},{name:"Adangme",iso6392B:"ada"},{name:"Adyghe; Adygei",iso6392B:"ady"},{name:"Afro-Asiatic languages",iso6392B:"afa"},{name:"Afrihili",iso6392B:"afh"},{name:"Afrikaans",iso6392B:"afr",iso6391:"af"},{name:"Ainu",iso6392B:"ain"},{name:"Akan",iso6392B:"aka",iso6391:"ak"},{name:"Akkadian",iso6392B:"akk"},{name:"Albanian",iso6392B:"alb",iso6392T:"sqi",iso6391:"sq"},{name:"Aleut",iso6392B:"ale"},{name:"Algonquian languages",iso6392B:"alg"},{name:"Southern Altai",iso6392B:"alt"},{name:"Amharic",iso6392B:"amh",iso6391:"am"},{name:"English, Old (ca.450-1100)",iso6392B:"ang"},{name:"Angika",iso6392B:"anp"},{name:"Apache languages",iso6392B:"apa"},{name:"Arabic",iso6392B:"ara",iso6391:"ar"},{name:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",iso6392B:"arc"},{name:"Aragonese",iso6392B:"arg",iso6391:"an"},{name:"Armenian",iso6392B:"arm",iso6392T:"hye",iso6391:"hy"},{name:"Mapudungun; Mapuche",iso6392B:"arn"},{name:"Arapaho",iso6392B:"arp"},{name:"Artificial languages",iso6392B:"art"},{name:"Arawak",iso6392B:"arw"},{name:"Assamese",iso6392B:"asm",iso6391:"as"},{name:"Asturian; Bable; Leonese; Asturleonese",iso6392B:"ast"},{name:"Athapascan languages",iso6392B:"ath"},{name:"Australian languages",iso6392B:"aus"},{name:"Avaric",iso6392B:"ava",iso6391:"av"},{name:"Avestan",iso6392B:"ave",iso6391:"ae"},{name:"Awadhi",iso6392B:"awa"},{name:"Aymara",iso6392B:"aym",iso6391:"ay"},{name:"Azerbaijani",iso6392B:"aze",iso6391:"az"},{name:"Banda languages",iso6392B:"bad"},{name:"Bamileke languages",iso6392B:"bai"},{name:"Bashkir",iso6392B:"bak",iso6391:"ba"},{name:"Baluchi",iso6392B:"bal"},{name:"Bambara",iso6392B:"bam",iso6391:"bm"},{name:"Balinese",iso6392B:"ban"},{name:"Basque",iso6392B:"baq",iso6392T:"eus",iso6391:"eu"},{name:"Basa",iso6392B:"bas"},{name:"Baltic languages",iso6392B:"bat"},{name:"Beja; Bedawiyet",iso6392B:"bej"},{name:"Belarusian",iso6392B:"bel",iso6391:"be"},{name:"Bemba",iso6392B:"bem"},{name:"Bengali",iso6392B:"ben",iso6391:"bn"},{name:"Berber languages",iso6392B:"ber"},{name:"Bhojpuri",iso6392B:"bho"},{name:"Bihari languages",iso6392B:"bih",iso6391:"bh"},{name:"Bikol",iso6392B:"bik"},{name:"Bini; Edo",iso6392B:"bin"},{name:"Bislama",iso6392B:"bis",iso6391:"bi"},{name:"Siksika",iso6392B:"bla"},{name:"Bantu languages",iso6392B:"bnt"},{name:"Bosnian",iso6392B:"bos",iso6391:"bs"},{name:"Braj",iso6392B:"bra"},{name:"Breton",iso6392B:"bre",iso6391:"br"},{name:"Batak languages",iso6392B:"btk"},{name:"Buriat",iso6392B:"bua"},{name:"Buginese",iso6392B:"bug"},{name:"Bulgarian",iso6392B:"bul",iso6391:"bg"},{name:"Burmese",iso6392B:"bur",iso6392T:"mya",iso6391:"my"},{name:"Blin; Bilin",iso6392B:"byn"},{name:"Caddo",iso6392B:"cad"},{name:"Central American Indian languages",iso6392B:"cai"},{name:"Galibi Carib",iso6392B:"car"},{name:"Catalan; Valencian",iso6392B:"cat",iso6391:"ca"},{name:"Caucasian languages",iso6392B:"cau"},{name:"Cebuano",iso6392B:"ceb"},{name:"Celtic languages",iso6392B:"cel"},{name:"Chamorro",iso6392B:"cha",iso6391:"ch"},{name:"Chibcha",iso6392B:"chb"},{name:"Chechen",iso6392B:"che",iso6391:"ce"},{name:"Chagatai",iso6392B:"chg"},{name:"Chinese",iso6392B:"chi",iso6392T:"zho",iso6391:"zh"},{name:"Chuukese",iso6392B:"chk"},{name:"Mari",iso6392B:"chm"},{name:"Chinook jargon",iso6392B:"chn"},{name:"Choctaw",iso6392B:"cho"},{name:"Chipewyan; Dene Suline",iso6392B:"chp"},{name:"Cherokee",iso6392B:"chr"},{name:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",iso6392B:"chu",iso6391:"cu"},{name:"Chuvash",iso6392B:"chv",iso6391:"cv"},{name:"Cheyenne",iso6392B:"chy"},{name:"Chamic languages",iso6392B:"cmc"},{name:"Montenegrin",iso6392B:"cnr"},{name:"Coptic",iso6392B:"cop"},{name:"Cornish",iso6392B:"cor",iso6391:"kw"},{name:"Corsican",iso6392B:"cos",iso6391:"co"},{name:"Creoles and pidgins, English based",iso6392B:"cpe"},{name:"Creoles and pidgins, French-based",iso6392B:"cpf"},{name:"Creoles and pidgins, Portuguese-based",iso6392B:"cpp"},{name:"Cree",iso6392B:"cre",iso6391:"cr"},{name:"Crimean Tatar; Crimean Turkish",iso6392B:"crh"},{name:"Creoles and pidgins",iso6392B:"crp"},{name:"Kashubian",iso6392B:"csb"},{name:"Cushitic languages",iso6392B:"cus"},{name:"Czech",iso6392B:"cze",iso6392T:"ces",iso6391:"cs"},{name:"Dakota",iso6392B:"dak"},{name:"Danish",iso6392B:"dan",iso6391:"da"},{name:"Dargwa",iso6392B:"dar"},{name:"Land Dayak languages",iso6392B:"day"},{name:"Delaware",iso6392B:"del"},{name:"Slave (Athapascan)",iso6392B:"den"},{name:"Dogrib",iso6392B:"dgr"},{name:"Dinka",iso6392B:"din"},{name:"Divehi; Dhivehi; Maldivian",iso6392B:"div",iso6391:"dv"},{name:"Dogri",iso6392B:"doi"},{name:"Dravidian languages",iso6392B:"dra"},{name:"Lower Sorbian",iso6392B:"dsb"},{name:"Duala",iso6392B:"dua"},{name:"Dutch, Middle (ca.1050-1350)",iso6392B:"dum"},{name:"Dutch; Flemish",iso6392B:"dut",iso6392T:"nld",iso6391:"nl"},{name:"Dyula",iso6392B:"dyu"},{name:"Dzongkha",iso6392B:"dzo",iso6391:"dz"},{name:"Efik",iso6392B:"efi"},{name:"Egyptian (Ancient)",iso6392B:"egy"},{name:"Ekajuk",iso6392B:"eka"},{name:"Elamite",iso6392B:"elx"},{name:"English",iso6392B:"eng",iso6391:"en"},{name:"English, Middle (1100-1500)",iso6392B:"enm"},{name:"Esperanto",iso6392B:"epo",iso6391:"eo"},{name:"Estonian",iso6392B:"est",iso6391:"et"},{name:"Ewe",iso6392B:"ewe",iso6391:"ee"},{name:"Ewondo",iso6392B:"ewo"},{name:"Fang",iso6392B:"fan"},{name:"Faroese",iso6392B:"fao",iso6391:"fo"},{name:"Fanti",iso6392B:"fat"},{name:"Fijian",iso6392B:"fij",iso6391:"fj"},{name:"Filipino; Pilipino",iso6392B:"fil"},{name:"Finnish",iso6392B:"fin",iso6391:"fi"},{name:"Finno-Ugrian languages",iso6392B:"fiu"},{name:"Fon",iso6392B:"fon"},{name:"French",iso6392B:"fre",iso6392T:"fra",iso6391:"fr"},{name:"French, Middle (ca.1400-1600)",iso6392B:"frm"},{name:"French, Old (842-ca.1400)",iso6392B:"fro"},{name:"Northern Frisian",iso6392B:"frr"},{name:"Eastern Frisian",iso6392B:"frs"},{name:"Western Frisian",iso6392B:"fry",iso6391:"fy"},{name:"Fulah",iso6392B:"ful",iso6391:"ff"},{name:"Friulian",iso6392B:"fur"},{name:"Ga",iso6392B:"gaa"},{name:"Gayo",iso6392B:"gay"},{name:"Gbaya",iso6392B:"gba"},{name:"Germanic languages",iso6392B:"gem"},{name:"Georgian",iso6392B:"geo",iso6392T:"kat",iso6391:"ka"},{name:"German",iso6392B:"ger",iso6392T:"deu",iso6391:"de"},{name:"Geez",iso6392B:"gez"},{name:"Gilbertese",iso6392B:"gil"},{name:"Gaelic; Scottish Gaelic",iso6392B:"gla",iso6391:"gd"},{name:"Irish",iso6392B:"gle",iso6391:"ga"},{name:"Galician",iso6392B:"glg",iso6391:"gl"},{name:"Manx",iso6392B:"glv",iso6391:"gv"},{name:"German, Middle High (ca.1050-1500)",iso6392B:"gmh"},{name:"German, Old High (ca.750-1050)",iso6392B:"goh"},{name:"Gondi",iso6392B:"gon"},{name:"Gorontalo",iso6392B:"gor"},{name:"Gothic",iso6392B:"got"},{name:"Grebo",iso6392B:"grb"},{name:"Greek, Ancient (to 1453)",iso6392B:"grc"},{name:"Greek, Modern (1453-)",iso6392B:"gre",iso6392T:"ell",iso6391:"el"},{name:"Guarani",iso6392B:"grn",iso6391:"gn"},{name:"Swiss German; Alemannic; Alsatian",iso6392B:"gsw"},{name:"Gujarati",iso6392B:"guj",iso6391:"gu"},{name:"Gwich'in",iso6392B:"gwi"},{name:"Haida",iso6392B:"hai"},{name:"Haitian; Haitian Creole",iso6392B:"hat",iso6391:"ht"},{name:"Hausa",iso6392B:"hau",iso6391:"ha"},{name:"Hawaiian",iso6392B:"haw"},{name:"Hebrew",iso6392B:"heb",iso6391:"he"},{name:"Herero",iso6392B:"her",iso6391:"hz"},{name:"Hiligaynon",iso6392B:"hil"},{name:"Himachali languages; Western Pahari languages",iso6392B:"him"},{name:"Hindi",iso6392B:"hin",iso6391:"hi"},{name:"Hittite",iso6392B:"hit"},{name:"Hmong; Mong",iso6392B:"hmn"},{name:"Hiri Motu",iso6392B:"hmo",iso6391:"ho"},{name:"Croatian",iso6392B:"hrv",iso6391:"hr"},{name:"Upper Sorbian",iso6392B:"hsb"},{name:"Hungarian",iso6392B:"hun",iso6391:"hu"},{name:"Hupa",iso6392B:"hup"},{name:"Iban",iso6392B:"iba"},{name:"Igbo",iso6392B:"ibo",iso6391:"ig"},{name:"Icelandic",iso6392B:"ice",iso6392T:"isl",iso6391:"is"},{name:"Ido",iso6392B:"ido",iso6391:"io"},{name:"Sichuan Yi; Nuosu",iso6392B:"iii",iso6391:"ii"},{name:"Ijo languages",iso6392B:"ijo"},{name:"Inuktitut",iso6392B:"iku",iso6391:"iu"},{name:"Interlingue; Occidental",iso6392B:"ile",iso6391:"ie"},{name:"Iloko",iso6392B:"ilo"},{name:"Interlingua (International Auxiliary Language Association)",iso6392B:"ina",iso6391:"ia"},{name:"Indic languages",iso6392B:"inc"},{name:"Indonesian",iso6392B:"ind",iso6391:"id"},{name:"Indo-European languages",iso6392B:"ine"},{name:"Ingush",iso6392B:"inh"},{name:"Inupiaq",iso6392B:"ipk",iso6391:"ik"},{name:"Iranian languages",iso6392B:"ira"},{name:"Iroquoian languages",iso6392B:"iro"},{name:"Italian",iso6392B:"ita",iso6391:"it"},{name:"Javanese",iso6392B:"jav",iso6391:"jv"},{name:"Lojban",iso6392B:"jbo"},{name:"Japanese",iso6392B:"jpn",iso6391:"ja"},{name:"Judeo-Persian",iso6392B:"jpr"},{name:"Judeo-Arabic",iso6392B:"jrb"},{name:"Kara-Kalpak",iso6392B:"kaa"},{name:"Kabyle",iso6392B:"kab"},{name:"Kachin; Jingpho",iso6392B:"kac"},{name:"Kalaallisut; Greenlandic",iso6392B:"kal",iso6391:"kl"},{name:"Kamba",iso6392B:"kam"},{name:"Kannada",iso6392B:"kan",iso6391:"kn"},{name:"Karen languages",iso6392B:"kar"},{name:"Kashmiri",iso6392B:"kas",iso6391:"ks"},{name:"Kanuri",iso6392B:"kau",iso6391:"kr"},{name:"Kawi",iso6392B:"kaw"},{name:"Kazakh",iso6392B:"kaz",iso6391:"kk"},{name:"Kabardian",iso6392B:"kbd"},{name:"Khasi",iso6392B:"kha"},{name:"Khoisan languages",iso6392B:"khi"},{name:"Central Khmer",iso6392B:"khm",iso6391:"km"},{name:"Khotanese; Sakan",iso6392B:"kho"},{name:"Kikuyu; Gikuyu",iso6392B:"kik",iso6391:"ki"},{name:"Kinyarwanda",iso6392B:"kin",iso6391:"rw"},{name:"Kirghiz; Kyrgyz",iso6392B:"kir",iso6391:"ky"},{name:"Kimbundu",iso6392B:"kmb"},{name:"Konkani",iso6392B:"kok"},{name:"Komi",iso6392B:"kom",iso6391:"kv"},{name:"Kongo",iso6392B:"kon",iso6391:"kg"},{name:"Korean",iso6392B:"kor",iso6391:"ko"},{name:"Kosraean",iso6392B:"kos"},{name:"Kpelle",iso6392B:"kpe"},{name:"Karachay-Balkar",iso6392B:"krc"},{name:"Karelian",iso6392B:"krl"},{name:"Kru languages",iso6392B:"kro"},{name:"Kurukh",iso6392B:"kru"},{name:"Kuanyama; Kwanyama",iso6392B:"kua",iso6391:"kj"},{name:"Kumyk",iso6392B:"kum"},{name:"Kurdish",iso6392B:"kur",iso6391:"ku"},{name:"Kutenai",iso6392B:"kut"},{name:"Ladino",iso6392B:"lad"},{name:"Lahnda",iso6392B:"lah"},{name:"Lamba",iso6392B:"lam"},{name:"Lao",iso6392B:"lao",iso6391:"lo"},{name:"Latin",iso6392B:"lat",iso6391:"la"},{name:"Latvian",iso6392B:"lav",iso6391:"lv"},{name:"Lezghian",iso6392B:"lez"},{name:"Limburgan; Limburger; Limburgish",iso6392B:"lim",iso6391:"li"},{name:"Lingala",iso6392B:"lin",iso6391:"ln"},{name:"Lithuanian",iso6392B:"lit",iso6391:"lt"},{name:"Mongo",iso6392B:"lol"},{name:"Lozi",iso6392B:"loz"},{name:"Luxembourgish; Letzeburgesch",iso6392B:"ltz",iso6391:"lb"},{name:"Luba-Lulua",iso6392B:"lua"},{name:"Luba-Katanga",iso6392B:"lub",iso6391:"lu"},{name:"Ganda",iso6392B:"lug",iso6391:"lg"},{name:"Luiseno",iso6392B:"lui"},{name:"Lunda",iso6392B:"lun"},{name:"Luo (Kenya and Tanzania)",iso6392B:"luo"},{name:"Lushai",iso6392B:"lus"},{name:"Macedonian",iso6392B:"mac",iso6392T:"mkd",iso6391:"mk"},{name:"Madurese",iso6392B:"mad"},{name:"Magahi",iso6392B:"mag"},{name:"Marshallese",iso6392B:"mah",iso6391:"mh"},{name:"Maithili",iso6392B:"mai"},{name:"Makasar",iso6392B:"mak"},{name:"Malayalam",iso6392B:"mal",iso6391:"ml"},{name:"Mandingo",iso6392B:"man"},{name:"Maori",iso6392B:"mao",iso6392T:"mri",iso6391:"mi"},{name:"Austronesian languages",iso6392B:"map"},{name:"Marathi",iso6392B:"mar",iso6391:"mr"},{name:"Masai",iso6392B:"mas"},{name:"Malay",iso6392B:"may",iso6392T:"msa",iso6391:"ms"},{name:"Moksha",iso6392B:"mdf"},{name:"Mandar",iso6392B:"mdr"},{name:"Mende",iso6392B:"men"},{name:"Irish, Middle (900-1200)",iso6392B:"mga"},{name:"Mi'kmaq; Micmac",iso6392B:"mic"},{name:"Minangkabau",iso6392B:"min"},{name:"Uncoded languages",iso6392B:"mis"},{name:"Mon-Khmer languages",iso6392B:"mkh"},{name:"Malagasy",iso6392B:"mlg",iso6391:"mg"},{name:"Maltese",iso6392B:"mlt",iso6391:"mt"},{name:"Manchu",iso6392B:"mnc"},{name:"Manipuri",iso6392B:"mni"},{name:"Manobo languages",iso6392B:"mno"},{name:"Mohawk",iso6392B:"moh"},{name:"Mongolian",iso6392B:"mon",iso6391:"mn"},{name:"Mossi",iso6392B:"mos"},{name:"Multiple languages",iso6392B:"mul"},{name:"Munda languages",iso6392B:"mun"},{name:"Creek",iso6392B:"mus"},{name:"Mirandese",iso6392B:"mwl"},{name:"Marwari",iso6392B:"mwr"},{name:"Mayan languages",iso6392B:"myn"},{name:"Erzya",iso6392B:"myv"},{name:"Nahuatl languages",iso6392B:"nah"},{name:"North American Indian languages",iso6392B:"nai"},{name:"Neapolitan",iso6392B:"nap"},{name:"Nauru",iso6392B:"nau",iso6391:"na"},{name:"Navajo; Navaho",iso6392B:"nav",iso6391:"nv"},{name:"Ndebele, South; South Ndebele",iso6392B:"nbl",iso6391:"nr"},{name:"Ndebele, North; North Ndebele",iso6392B:"nde",iso6391:"nd"},{name:"Ndonga",iso6392B:"ndo",iso6391:"ng"},{name:"Low German; Low Saxon; German, Low; Saxon, Low",iso6392B:"nds"},{name:"Nepali",iso6392B:"nep",iso6391:"ne"},{name:"Nepal Bhasa; Newari",iso6392B:"new"},{name:"Nias",iso6392B:"nia"},{name:"Niger-Kordofanian languages",iso6392B:"nic"},{name:"Niuean",iso6392B:"niu"},{name:"Norwegian Nynorsk; Nynorsk, Norwegian",iso6392B:"nno",iso6391:"nn"},{name:"Bokmål, Norwegian; Norwegian Bokmål",iso6392B:"nob",iso6391:"nb"},{name:"Nogai",iso6392B:"nog"},{name:"Norse, Old",iso6392B:"non"},{name:"Norwegian",iso6392B:"nor",iso6391:"no"},{name:"N'Ko",iso6392B:"nqo"},{name:"Pedi; Sepedi; Northern Sotho",iso6392B:"nso"},{name:"Nubian languages",iso6392B:"nub"},{name:"Classical Newari; Old Newari; Classical Nepal Bhasa",iso6392B:"nwc"},{name:"Chichewa; Chewa; Nyanja",iso6392B:"nya",iso6391:"ny"},{name:"Nyamwezi",iso6392B:"nym"},{name:"Nyankole",iso6392B:"nyn"},{name:"Nyoro",iso6392B:"nyo"},{name:"Nzima",iso6392B:"nzi"},{name:"Occitan (post 1500)",iso6392B:"oci",iso6391:"oc"},{name:"Ojibwa",iso6392B:"oji",iso6391:"oj"},{name:"Oriya",iso6392B:"ori",iso6391:"or"},{name:"Oromo",iso6392B:"orm",iso6391:"om"},{name:"Osage",iso6392B:"osa"},{name:"Ossetian; Ossetic",iso6392B:"oss",iso6391:"os"},{name:"Turkish, Ottoman (1500-1928)",iso6392B:"ota"},{name:"Otomian languages",iso6392B:"oto"},{name:"Papuan languages",iso6392B:"paa"},{name:"Pangasinan",iso6392B:"pag"},{name:"Pahlavi",iso6392B:"pal"},{name:"Pampanga; Kapampangan",iso6392B:"pam"},{name:"Panjabi; Punjabi",iso6392B:"pan",iso6391:"pa"},{name:"Papiamento",iso6392B:"pap"},{name:"Palauan",iso6392B:"pau"},{name:"Persian, Old (ca.600-400 B.C.)",iso6392B:"peo"},{name:"Persian",iso6392B:"per",iso6392T:"fas",iso6391:"fa"},{name:"Philippine languages",iso6392B:"phi"},{name:"Phoenician",iso6392B:"phn"},{name:"Pali",iso6392B:"pli",iso6391:"pi"},{name:"Polish",iso6392B:"pol",iso6391:"pl"},{name:"Pohnpeian",iso6392B:"pon"},{name:"Portuguese",iso6392B:"por",iso6391:"pt"},{name:"Prakrit languages",iso6392B:"pra"},{name:"Provençal, Old (to 1500); Occitan, Old (to 1500)",iso6392B:"pro"},{name:"Pushto; Pashto",iso6392B:"pus",iso6391:"ps"},{name:"Reserved for local use",iso6392B:"qaa-qtz"},{name:"Quechua",iso6392B:"que",iso6391:"qu"},{name:"Rajasthani",iso6392B:"raj"},{name:"Rapanui",iso6392B:"rap"},{name:"Rarotongan; Cook Islands Maori",iso6392B:"rar"},{name:"Romance languages",iso6392B:"roa"},{name:"Romansh",iso6392B:"roh",iso6391:"rm"},{name:"Romany",iso6392B:"rom"},{name:"Romanian; Moldavian; Moldovan",iso6392B:"rum",iso6392T:"ron",iso6391:"ro"},{name:"Rundi",iso6392B:"run",iso6391:"rn"},{name:"Aromanian; Arumanian; Macedo-Romanian",iso6392B:"rup"},{name:"Russian",iso6392B:"rus",iso6391:"ru"},{name:"Sandawe",iso6392B:"sad"},{name:"Sango",iso6392B:"sag",iso6391:"sg"},{name:"Yakut",iso6392B:"sah"},{name:"South American Indian languages",iso6392B:"sai"},{name:"Salishan languages",iso6392B:"sal"},{name:"Samaritan Aramaic",iso6392B:"sam"},{name:"Sanskrit",iso6392B:"san",iso6391:"sa"},{name:"Sasak",iso6392B:"sas"},{name:"Santali",iso6392B:"sat"},{name:"Sicilian",iso6392B:"scn"},{name:"Scots",iso6392B:"sco"},{name:"Selkup",iso6392B:"sel"},{name:"Semitic languages",iso6392B:"sem"},{name:"Irish, Old (to 900)",iso6392B:"sga"},{name:"Sign Languages",iso6392B:"sgn"},{name:"Shan",iso6392B:"shn"},{name:"Sidamo",iso6392B:"sid"},{name:"Sinhala; Sinhalese",iso6392B:"sin",iso6391:"si"},{name:"Siouan languages",iso6392B:"sio"},{name:"Sino-Tibetan languages",iso6392B:"sit"},{name:"Slavic languages",iso6392B:"sla"},{name:"Slovak",iso6392B:"slo",iso6392T:"slk",iso6391:"sk"},{name:"Slovenian",iso6392B:"slv",iso6391:"sl"},{name:"Southern Sami",iso6392B:"sma"},{name:"Northern Sami",iso6392B:"sme",iso6391:"se"},{name:"Sami languages",iso6392B:"smi"},{name:"Lule Sami",iso6392B:"smj"},{name:"Inari Sami",iso6392B:"smn"},{name:"Samoan",iso6392B:"smo",iso6391:"sm"},{name:"Skolt Sami",iso6392B:"sms"},{name:"Shona",iso6392B:"sna",iso6391:"sn"},{name:"Sindhi",iso6392B:"snd",iso6391:"sd"},{name:"Soninke",iso6392B:"snk"},{name:"Sogdian",iso6392B:"sog"},{name:"Somali",iso6392B:"som",iso6391:"so"},{name:"Songhai languages",iso6392B:"son"},{name:"Sotho, Southern",iso6392B:"sot",iso6391:"st"},{name:"Spanish; Castilian",iso6392B:"spa",iso6391:"es"},{name:"Sardinian",iso6392B:"srd",iso6391:"sc"},{name:"Sranan Tongo",iso6392B:"srn"},{name:"Serbian",iso6392B:"srp",iso6391:"sr"},{name:"Serer",iso6392B:"srr"},{name:"Nilo-Saharan languages",iso6392B:"ssa"},{name:"Swati",iso6392B:"ssw",iso6391:"ss"},{name:"Sukuma",iso6392B:"suk"},{name:"Sundanese",iso6392B:"sun",iso6391:"su"},{name:"Susu",iso6392B:"sus"},{name:"Sumerian",iso6392B:"sux"},{name:"Swahili",iso6392B:"swa",iso6391:"sw"},{name:"Swedish",iso6392B:"swe",iso6391:"sv"},{name:"Classical Syriac",iso6392B:"syc"},{name:"Syriac",iso6392B:"syr"},{name:"Tahitian",iso6392B:"tah",iso6391:"ty"},{name:"Tai languages",iso6392B:"tai"},{name:"Tamil",iso6392B:"tam",iso6391:"ta"},{name:"Tatar",iso6392B:"tat",iso6391:"tt"},{name:"Telugu",iso6392B:"tel",iso6391:"te"},{name:"Timne",iso6392B:"tem"},{name:"Tereno",iso6392B:"ter"},{name:"Tetum",iso6392B:"tet"},{name:"Tajik",iso6392B:"tgk",iso6391:"tg"},{name:"Tagalog",iso6392B:"tgl",iso6391:"tl"},{name:"Thai",iso6392B:"tha",iso6391:"th"},{name:"Tibetan",iso6392B:"tib",iso6392T:"bod",iso6391:"bo"},{name:"Tigre",iso6392B:"tig"},{name:"Tigrinya",iso6392B:"tir",iso6391:"ti"},{name:"Tiv",iso6392B:"tiv"},{name:"Tokelau",iso6392B:"tkl"},{name:"Klingon; tlhIngan-Hol",iso6392B:"tlh"},{name:"Tlingit",iso6392B:"tli"},{name:"Tamashek",iso6392B:"tmh"},{name:"Tonga (Nyasa)",iso6392B:"tog"},{name:"Tonga (Tonga Islands)",iso6392B:"ton",iso6391:"to"},{name:"Tok Pisin",iso6392B:"tpi"},{name:"Tsimshian",iso6392B:"tsi"},{name:"Tswana",iso6392B:"tsn",iso6391:"tn"},{name:"Tsonga",iso6392B:"tso",iso6391:"ts"},{name:"Turkmen",iso6392B:"tuk",iso6391:"tk"},{name:"Tumbuka",iso6392B:"tum"},{name:"Tupi languages",iso6392B:"tup"},{name:"Turkish",iso6392B:"tur",iso6391:"tr"},{name:"Altaic languages",iso6392B:"tut"},{name:"Tuvalu",iso6392B:"tvl"},{name:"Twi",iso6392B:"twi",iso6391:"tw"},{name:"Tuvinian",iso6392B:"tyv"},{name:"Udmurt",iso6392B:"udm"},{name:"Ugaritic",iso6392B:"uga"},{name:"Uighur; Uyghur",iso6392B:"uig",iso6391:"ug"},{name:"Ukrainian",iso6392B:"ukr",iso6391:"uk"},{name:"Umbundu",iso6392B:"umb"},{name:"Undetermined",iso6392B:"und"},{name:"Urdu",iso6392B:"urd",iso6391:"ur"},{name:"Uzbek",iso6392B:"uzb",iso6391:"uz"},{name:"Vai",iso6392B:"vai"},{name:"Venda",iso6392B:"ven",iso6391:"ve"},{name:"Vietnamese",iso6392B:"vie",iso6391:"vi"},{name:"Volapük",iso6392B:"vol",iso6391:"vo"},{name:"Votic",iso6392B:"vot"},{name:"Wakashan languages",iso6392B:"wak"},{name:"Wolaitta; Wolaytta",iso6392B:"wal"},{name:"Waray",iso6392B:"war"},{name:"Washo",iso6392B:"was"},{name:"Welsh",iso6392B:"wel",iso6392T:"cym",iso6391:"cy"},{name:"Sorbian languages",iso6392B:"wen"},{name:"Walloon",iso6392B:"wln",iso6391:"wa"},{name:"Wolof",iso6392B:"wol",iso6391:"wo"},{name:"Kalmyk; Oirat",iso6392B:"xal"},{name:"Xhosa",iso6392B:"xho",iso6391:"xh"},{name:"Yao",iso6392B:"yao"},{name:"Yapese",iso6392B:"yap"},{name:"Yiddish",iso6392B:"yid",iso6391:"yi"},{name:"Yoruba",iso6392B:"yor",iso6391:"yo"},{name:"Yupik languages",iso6392B:"ypk"},{name:"Zapotec",iso6392B:"zap"},{name:"Blissymbols; Blissymbolics; Bliss",iso6392B:"zbl"},{name:"Zenaga",iso6392B:"zen"},{name:"Standard Moroccan Tamazight",iso6392B:"zgh"},{name:"Zhuang; Chuang",iso6392B:"zha",iso6391:"za"},{name:"Zande languages",iso6392B:"znd"},{name:"Zulu",iso6392B:"zul",iso6391:"zu"},{name:"Zuni",iso6392B:"zun"},{name:"No linguistic content; Not applicable",iso6392B:"zxx"},{name:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",iso6392B:"zza"}],language_codes={},home_page=(temps.map(function(e){var t;void 0!==e.iso6391&&(t=e.iso6391,language_codes[t]=e.name),void 0!==e.iso6392B&&(t=e.iso6392B,language_codes[t]=e.name),void 0!==e.iso6392T&&(t=e.iso6392T,language_codes[t]=e.name)}),{initiated:!(language_codes.tu="Turkish"),keys:{focused_part:"menu_selection",menu_selection:0,top_menu_selection:0},prev_focus_dom:null,menu_doms:$("#home-page .menu-item-container"),top_menu_doms:$("#home-page .home-top-item"),openedModal:!1,init:function(){this.setLiveFavoritesChoice(),account_page.fillAccountDetails(),this.showCurrentWeather(),this.prev_focus_dom=null,turn_off_page.prev_route="home-page","turn-off-page"!==current_route&&(current_route="home-page"),$("#loading-page").addClass("hide"),$("#login-container").hide(),$("#app").show(),$("#home-page").removeClass("hide");var i="";languages?languages.map(function(e,t){i+='        <div           class="setting-select-option"          data-word_code="'+e.code+'"          data-language="'+e.code+'"          onmouseenter="settings_page.hoverChangeLanguageOption('+t+', true)"          onclick="settings_page.handleMenuClick()"        >          '+e.name+"        </div>"}):console.error("Languages not found"),$("#settings-languages-options").html(i),settings_page.change_language_items=$("#change-language-settings .setting-select-option"),settings_page.doms_translated=$("*").filter(function(){return void 0!==$(this).data("word_code")}),settings_page.changeDomsLanguage(),this.hoverMainMenu(0),this.checkForPlaylistExpirationDate(),this.fillCategoriesCount(),isPlaylistWorking||this.hoverMainMenu(4)},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":turn_off_page.init(current_route);break;case"notifications_modal":this.hideNotificationsModal();break;default:this.hoverMainMenu(e.menu_selection)}},exit:function(){$("#home-page").addClass("hide")},reEnter:function(){this.hoverMainMenu(this.keys.menu_selection),$("#home-page").removeClass("hide"),current_route="home-page"},fillCategoriesCount:function(){$("#live-categories-count").text(LiveModel.categories.length+" Categories"),$("#movies-categories-count").text(VodModel.categories.length+" Categories"),$("#series-categories-count").text(SeriesModel.categories.length+" Categories")},showCurrentWeather:function(){weatherNow&&(e=Math.floor(parseInt(weatherNow.temp_c))+"°",t="https:"+weatherNow.condition.icon);var e,t,i=utilities.getCurrentDateTimeFormatted();weatherCountry&&weatherCity&&$("#weather-country").text(weatherCity+", "+weatherCountry+"."),$("#current-date").text(i),$("#current-weather-icon").attr("src",t),$("#current-weather-degree").text(e)},clickMainMenu:function(){try{media_player.close()}catch(e){}switch(this.keys.menu_selection){case 0:isPlaylistWorking?channel_page.init("home-page",null):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 1:isPlaylistWorking?vod_series_page.init("vod"):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 2:isPlaylistWorking?vod_series_page.init("series"):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 3:isPlaylistWorking?catchup_page.init():showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 4:playlist_page.init("home-page");break;case 5:isPlaylistWorking?channel_page.init("home-page",null,!0):showToast("Current playlist is not woking,","Change the playlist and try again.");break;case 6:layout_page.init("home-page")}},setLiveFavoritesChoice:function(){"off"==localStorage.getItem(storage_id+"home_favorites_choice")?(this.isLiveFavoriteAllowed=!1,$(this.menu_doms[5]).hide(),$(".right-menu-items .menu-item-container").css("height","14rem")):(this.isLiveFavoriteAllowed=!0,$(this.menu_doms[5]).show(),$(".right-menu-items .menu-item-container").css("height","10rem"))},hoverMainMenu:function(e,t){t&&this.openedModal||((t=this.keys).focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.top_menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active"))},clickTopMenu:function(){switch(this.keys.top_menu_selection){case 0:this.showNotificationsModal();break;case 1:account_page.init("home-page");break;case 2:search_page.init("home-page");break;case 3:settings_page.init();break;case 4:window.location.reload();break;case 5:settings_page.init(),settings_page.hoverSettingsItem(11),settings_page.clickSettingsItem()}},hoverTopMenu:function(e,t){t&&this.openedModal||((t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.top_menu_doms).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"))},updatePlaylistExpiryDays:function(e){switch(e){case 0:$(".playlist-will-expire-in").text("a few hours");break;case 1:$(".playlist-will-expire-in").text(e+" day");break;case null:$(".playlist-will-expire-in").text("Unknown");break;default:$(".playlist-will-expire-in").text(e+" days")}},closePlaylistExpiryNotification:function(){$("#home-page .notification-container").hide(),this.keys.focused_part="menu_selection"},checkForPlaylistExpirationDate:function(){if(playlist_expire_date)try{console.log("####### Playlist expiry date",playlist_expire_date);var e=utilities.convertToTimestamp(playlist_expire_date),t=utilities.timestampDiffInDays(e);console.log("Playlist will expire in",t),this.updatePlaylistExpiryDays(t),t<=5&&0<=t&&this.addNotification({message:"Your playlist will expire in "+t+" days. Please contact your provider to extend it and continue enjoying your service."})}catch(e){console.log("Error checking for playlist expiration date",e),this.updatePlaylistExpiryDays(null)}else console.log("This playlist is unlimited")},addNotification:function(e){console.log("NOTIFICATION TO ADD",e),e.message&&(e.title||(e.title="App System"),e.date||(e.date=utilities.getCurrentDateTimeFormatted()),e='      <div class="notifications-modal-item">        <div class="notifications-modal-item-header">          <div class="notifications-modal-item-sender">'+e.title+'</div>          <div class="notifications-modal-item-date">'+e.date+'</div>        </div>        <div class="notifications-modal-item-body">'+e.message+"</div>      </div>    ",$("#notifications-modal-body").append(e),$(".home-top-item.notifications").addClass("has-items"),$(".empty-notifications").hide())},showNotificationsModal:function(){this.keys.focused_part="notifications_modal",this.openedModal="notifications",$("#notifications-modal").addClass("open")},hideNotificationsModal:function(){this.keys.focused_part="top_menu_selection",this.openedModal=null,$("#notifications-modal").removeClass("open"),$(".home-top-item.notifications").removeClass("has-items")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$(this.menu_doms[e.menu_selection]).trigger("click");break;case"top_menu_selection":this.clickTopMenu(this.top_menu_doms)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":3==t.menu_selection?(0<e&&(t.menu_selection+=e,this.hoverMainMenu(t.menu_selection)),e<0&&this.hoverTopMenu(t.top_menu_selection)):t.menu_selection<3?e<0&&this.hoverTopMenu(t.top_menu_selection):3<t.menu_selection&&(t.menu_selection+=e,this.hoverMainMenu(t.menu_selection)),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1,this.hoverMainMenu(t.menu_selection));break;case"top_menu_selection":0<e&&this.hoverMainMenu(t.menu_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":t.menu_selection<3&&(t.menu_selection+=e),3<=t.menu_selection&&e<0&&(t.menu_selection=2),t.menu_selection<0&&(t.menu_selection=0),this.hoverMainMenu(t.menu_selection);break;case"top_menu_selection":t.top_menu_selection+=e,t.top_menu_selection<0&&(t.top_menu_selection=0),t.top_menu_selection>=this.top_menu_doms.length&&(t.top_menu_selection=this.top_menu_doms.length-1),this.hoverTopMenu(t.top_menu_selection)}},HandleKey:function(e){this.keys;if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack();break;case tvKey.GREEN:window.location.reload()}}}),playlist_page={initiated:!1,keys:{focused_part:"playlist_selection",playlist_selection:0,color_buttons_selection:0},playlist_doms:[],color_btns_doms:$("#playlists-page .bottom-label-item"),back_btn_dom:null,is_loading:!1,tried_panel_indexes:[],prev_route:"home-page",init:function(e){var s,o;this.prev_route=e,current_route="playlist-page",this.tried_panel_indexes=[],this.initiated||(s="",o=settings.playlist_id,playlist_urls.map(function(e,t){var i=o===e.id;s+='<div class="playlist-item-container"                       onmouseenter="playlist_page.hoverPlayListItem('+t+')"                       onclick="playlist_page.changePlaylist('+t+')"                   >                       <div class="playlist-item-wrapper">                           <span class="playlist-name">'+e.playlist_name+"</span>"+('<div class="playlist-state '+(i?"playing":"")+'">SELECTED</div>')+"</div>                    </div>"}),this.initiated=!0,$("#playlist-items-container").html(s),this.playlist_doms=$(".playlist-item-wrapper"),this.back_btn_dom=$("#playlist-back-icon"),this.keys.playlist_selection=0),home_page.exit(),$("#playlists-page").removeClass("hide"),this.hoverPlayListItem(this.keys.playlist_selection)},hoverColorButton:function(e){var t=this.keys;t.color_buttons_selection=e,t.focused_part="color_buttons_selection",$(this.playlist_doms).removeClass("active"),$("#add-playlist-btn").removeClass("active"),$(this.color_btns_doms).removeClass("active"),$(this.color_btns_doms[e]).addClass("active")},clickColorButton:function(e){switch(e){case 0:this.removePlayList();break;case 1:window.location.reload()}},hoverPlayListItem:function(e){var t=this.keys;t.focused_part="playlist_selection",current_route="playlist-page",$(home_page.menu_doms).removeClass("active"),$("#add-playlist-btn").removeClass("active"),this.color_btns_doms.removeClass("active"),t.playlist_selection=e,$(this.playlist_doms).removeClass("active"),$(this.playlist_doms[e]).addClass("active"),moveScrollPosition($("#playlist-items-container"),this.playlist_doms[e],"horizontal",!1)},hoverAddPlaylistBtn:function(){this.keys.focused_part="add_playlist_btn",$(this.playlist_doms).removeClass("active"),$(this.color_btns_doms).removeClass("active"),$("#add-playlist-btn").addClass("active")},changePlaylist:function(e){var t=playlist_urls[e];"playlist-page"==current_route&&($(home_page.menu_doms).removeClass("active"),$(this.playlist_doms).find(".playlist-state").removeClass("playing"),$($(this.playlist_doms[e]).find(".playlist-state")).addClass("playing"),$(this.playlist_doms).removeClass("active"),$("#playlists-page").addClass("hide"),settings.saveSettings("playlist_id",t.id,""),settings.saveSettings("playlist",t,"array"),current_route="login-page",$("#home-page").addClass("hide"),$("#loading-page").removeClass("hide"),login_page.login())},showPlayListEditPage:function(){playlist_edit_page.init("playlist-page")},removePlayList:function(){0!=playlist_urls.length&&(1==playlist_urls.length?showToast("Sorry","You need to have 1 playlist at least"):0<playlist_urls.length&&(showLoader(!0),this.is_loading=!0,this.proceedRemovingWithServer()))},proceedRemovingWithServer:function(){var e=this.keys,e=playlist_urls[e.playlist_selection],e=encryptRequest({mac_address:mac_address,app_type:platform,id:e.id}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],o=this;$.ajax({method:"post",url:i+"/remove_playlist",data:{data:e},success:function(e){o.tried_panel_indexes=[],o.playlistRemoved(!0)},error:function(){o.tried_panel_indexes.push(s),o.tried_panel_indexes.length<panel_urls.length?o.proceedRemovingWithServer():o.playlistRemoved(!1)}})},playlistRemoved:function(e){var t=this.keys,i=playlist_urls[t.playlist_selection].id,i=(playlist_urls.splice(t.playlist_selection,1),settings.playlist_id===i&&(settings.saveSettings("playlist_id","",""),settings.saveSettings("playlist",{},"array")),showLoader(!1),this.is_loading=!1,$(this.playlist_doms[t.playlist_selection]).remove(),t.playlist_selection);this.initiated=!1,this.init(),i>=this.playlist_doms.length&&(i=this.playlist_doms.length-1),this.hoverPlayListItem(i),settings.playlist_id||this.handleMenuClick()},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":$(this.playlist_doms[e.playlist_selection]).trigger("click");break;case"add_playlist_btn":this.showPlayListEditPage();break;case"color_buttons_selection":this.clickColorButton(e.color_buttons_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"playlist_selection":t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection);break;case"color_buttons_selection":t.color_buttons_selection+=e,t.color_buttons_selection<0&&(t.color_buttons_selection=0),t.color_buttons_selection>=this.color_btns_doms.length&&(t.color_buttons_selection=this.color_btns_doms.length-1),this.hoverColorButton(t.color_buttons_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"playlist_selection":0<e&&this.hoverAddPlaylistBtn();break;case"add_playlist_btn":e<0?this.hoverPlayListItem(t.playlist_selection):this.hoverColorButton(t.color_buttons_selection);break;case"color_buttons_selection":e<0&&this.hoverAddPlaylistBtn()}},goBack:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":case"add_playlist_btn":$("#playlists-page").addClass("hide"),$("#home-page").removeClass("hide"),home_page.hoverMainMenu(home_page.keys.menu_selection),current_route="home-page";break;case"color_buttons_selection":this.hoverPlayListItem(e.playlist_selection)}},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-3);break;case tvKey.DOWN:this.handleMenusUpDown(3);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.YELLOW:window.location.reload();break;case tvKey.RED:this.removePlayList()}}},account_page={init:function(){this.fillAccountDetails(),current_route="account-page",$("#account-page").removeClass("hide"),$("#home-page").addClass("hide")},fillAccountDetails:function(){$("#mac-address").text(mac_address.toUpperCase()),$(".mac-address").text(mac_address.toUpperCase()),$("#device-key").text(device_key),$(".device-key").text(device_key),$("#platform").text(platform.toUpperCase()||"Unknown"),1==is_trial||2==is_trial?$("#app-status").text("Active"):$("#app-status").text("Trial"),"lg"==platform?$("#app-version").text(lg_version):$("#app-version").text(samsung_version),$("#playlist-username").text(user_name),$("#playlist-status").text(playlist_status),$("playlist-expire-date").text(expire_date),generateQRCode("https://iboxxiptv.com/device/login&mac_address="+mac_address,$("#account-page-login-qr"))},handleMenuClick:function(){},handleMenuLeftRight:function(e){},handleMenusUpDown:function(e){},goBack:function(){$("#account-page").addClass("hide"),$("#home-page").removeClass("hide"),current_route="home-page"},HandleKey:function(e){e.keyCode===tvKey.RETURN&&this.goBack()}};function initKeys(){var e;if("samsung"===platform){var t,i;try{for(i=tizen.tvinputdevice.getSupportedKeys(),t=0;t<i.length;t++)i[t].name,i[t].code,tizen.tvinputdevice.registerKey(i[t].name);tizen.tvinputdevice.unregisterKey("VolumeUp"),tizen.tvinputdevice.unregisterKey("VolumeDown"),tizen.tvinputdevice.unregisterKey("VolumeMute")}catch(e){}e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,RETURN:10009,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}}else"lg"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:461,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}:"vidaa"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072,RETURN:8,PLAY_PAUSE:463,MediaPlayPause:463}:"zeasn"===platform||"titanos"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072,RETURN:8,PLAY_PAUSE:463,MediaPlayPause:179}:"windows"===platform&&(e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:27,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072});window.tvKey=e}function confirmParentPassword(){"home-page"===current_route&&home_page.confirmParentPassword()}function cancelParentPassword(){"home-page"===current_route&&home_page.cancelParentPassword()}var media_player,channel_page={current_channel_id:0,full_screen_video:!1,information_timer:null,progressbar_timer:null,player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],current_category_index:0,category_hover_timer:null,category_hover_timeout:300,channel_hover_timer:null,channel_hover_timeout:300,channel_sidebar_options_timer:null,keys:{focused_part:"category_selection",category_selection:0,channel_selection:0,sidebar_selection:0,aspect_ratio_selection:0,subtitles_selection:0,audio_selection:0,prev_focus:"",video_control:0,color_buttons_selection:0,switch_page_modal_selection:0},category_doms:[],channel_doms:[],switch_page_modal_doms:$(".channel-switch-page-modal-page-item"),video_control_doms:$("#channel-page .video-control-icon-wrapper"),color_btns_doms:$("#channel-page .bottom-label-item"),play_icon_index:1,search_items:[],filtered_movies:[],next_programme_timer:null,programmes:[],short_epg_limit_count:30,prev_focus_dom:null,next_channel_timer:null,prev_keyword:"",search_timer:null,rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,rearrange_origin_position:0,show_information:!1,epg_channel_id:null,prev_channel:null,current_category_dom:null,channel_layout:1,is_categories_menu_visible:!1,is_no_categories:!1,fullscreen_sidebar_doms:$(".channel-sidebar-option"),sidebar_aspect_ratio_doms:$("#channel-sidebar-aspect-ratio-options-wrapper .channel-sidebar-suboption"),sidebar_subtitles_doms:$("#channel-sidebar-subtitles-options-wrapper .channel-sidebar-suboption"),sidebar_audio_doms:$("#channel-sidebar-audio-options-wrapper .channel-sidebar-suboption"),last_chosen_aspect_ratio:"stretch",current_subtitle_index:0,current_audio_track_index:0,init:function(e,t,i){this.rearrange_mode=!1,this.prev_focus_dom=null,this.prev_route=e;var e=this.keys,s=(home_page.exit(),$("#channel-page").removeClass("hide"),current_route="channel-page",$("#channel-page .stream-page-title").removeClass("hide"),LiveModel.getCategories(!1,!0)),o=(this.categories=s,""),a=(s.map(function(e,t){o+='<div class="channel-page-category-item"                    onmouseenter="channel_page.hoverCategory(this)"                    onclick="channel_page.handleMenuClick()"                    data-index="'+t+'"                >                    <div class="channel-category-name-wrapper floatTextWrapper">                        <span class="floatText">                            <span class="channel-category-name">'+e.category_name+'</span>                        </span>                    </div>                     <span class="channel-category-movie-counts-wrapper">                        <span class="channel-category-movie-counts">'+e.movies.length+"</span>                        <span class='channel-category-movie-counts-word'> Channels</span>                    </span>                </div>"}),$("#channel-page-categories-container").html(o),this.category_doms=$(".channel-page-category-item"),0);if(t){for(n=0;n<s.length;n++)if(s[n].category_id==t.category_id){a=n;break}}else for(var n=0;n<s.length;n++)if(0<s[n].movies.length){a=n;break}this.current_category_index=-1,e.category_selection=a,this.showInformation(!1),this.hoverCategory(a),this.showCategoryChannels(t),t||this.showInitialChannel(s,i),this.epg_channel_id=null,this.setupCurrentLayout()},goBack:function(){var e=this.keys;switch(e.focused_part){case"video_control":var t=this.checkIfShowInfo();console.log("Going back in video control"),t?(clearTimeout(this.full_screen_timer),this.hideFullScreenInfo()):(console.log("Will go back to channels"),this.showInformation(!1));break;case"full_screen":this.showInformation(!1);break;case"category_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):this.Exit();break;case"channel_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):this.is_no_categories?this.Exit():this.hoverCategory(e.category_selection);break;case"sidebar_options":this.hideSidebarOptions();break;case"aspect_ratio_selection":case"subtitles_selection":case"audio_selection":this.hideSidebarSubOptions();break;case"color_buttons_selection":this.hoverChannel(e.channel_selection);break;case"switch_page_modal":this.hideSwitchPageModal()}},Exit:function(e){e=e||"home-page";try{media_player.close()}catch(e){console.log("Error closing media player",e)}this.keys;$("#channel-page").addClass("hide"),clearInterval(this.progressbar_timer),clearTimeout(this.information_timer),clearTimeout(this.next_channel_timer),$("#next-program-container").html(""),$("#channel-title").html(""),"home-page"==e?home_page.reEnter():($("#search-page").show(),current_route="search-page",search_page.init("channel-page","live"));var t=LiveModel.category_orders;if(0<t.length){for(var i=this.categories,s=0;s<i.length;s++)for(var o=0;o<t.length;o++)if(i[s].category_id==t[o].id){t[o].position=s;break}t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(t)),LiveModel.category_orders=t}},showInitialChannel:function(e,t){if(t=t||!1){$("#channel-page-categories-container").hide();for(var i=-1,s=0;s<e.length;s++)if("favourite"===e[s].category_id){i=s;break}return-1===i||(this.hoverCategory($(this.category_doms[i])),this.handleMenuClick(),this.hoverChannel(0),this.movies&&0!=this.movies.length)?void(this.is_no_categories=!0):(this.Exit(),void showToast("Sorry","You have no favorite channels."))}$("#channel-page-categories-container").show(),this.is_no_categories=!1;t=localStorage.getItem(storage_id+"live_initialization_choice");"last"==(t=t||"default")?this.initializeByLast(e):"favorite"==t?this.initializeByFavorite(e):this.initializeByDefault(e)},initializeByDefault:function(e){var t=2;if(!e[t]||0==e[t].movies.length||!e[t].movies)for(var i=0;i<e.length;i++)if(0<e[i].movies.length){t=i;break}e[t]&&0<e[t].movies.length&&(this.hoverCategory(t),this.handleMenuClick(),this.hoverChannel(0),this.showMovie(e[t].movies[0]),this.keys.focused_part="channel_selection")},initializeByFavorite:function(e){for(var t=null,i=-1,s=0;s<e.length;s++)if("favourite"==e[s].category_id){t=e[s],i=s;break}t&&0<t.movies.length?(this.hoverCategory(i),this.handleMenuClick(),this.hoverChannel(0),this.showMovie(t.movies[0])):this.initializeByDefault(e)},initializeByLast:function(e){var t=localStorage.getItem(storage_id+settings.playlist.id+"live_recent");if(t){t=JSON.parse(t);if(t&&0<t.length){for(var i=t[0],s=null,o=-1,a=-1,n=2;n<e.length;n++){for(var r=e[n],l=0;l<r.movies.length;l++)if(r.movies[l].stream_id==i){s=r,o=n,a=l;break}if(s)break}if(s)return this.hoverCategory(o),this.handleMenuClick(),this.hoverChannel(a),void this.showMovie(s.movies[a])}}this.initializeByDefault(e)},setupCurrentLayout:function(){$("#channel-page .player-container").removeClass("expanded");var e=["classic","classic-compact","normal","normal-compact","modern"],t=(this.channel_layout=layout_page.getLayoutChoice(),e[this.channel_layout]);$("#channel-page").removeClass(e.join(" ")).addClass(t),this.is_no_categories?$("#channel-page").addClass("no-categories"):$("#channel-page").removeClass("no-categories")},showCategoryChannels:function(e){var t=this.keys;if(t.category_selection!==this.current_category_index){var i=this.categories[t.category_selection],s=(this.movies=i.movies,$(this.current_category_dom).removeClass("current"),$(this.category_doms[t.category_selection]).addClass("current"),this.current_category_dom=this.category_doms[t.category_selection],"");if(this.movies.forEach(function(e,t){s+='      <div class="channel-menu-item"        data-channel_id="'+e.stream_id+'"        data-index="'+t+'"        onmouseenter="channel_page.hoverChannel(this)"        onclick="channel_page.handleMenuClick()"        >          <div class="channel-icon-container channel-icon-'+t+'">            <img class="channel-icon '+t+'" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"/>          </div>          <div class="channel-item-number-title">            <div class="channel-info-top">\n              <span class="channel-number">'+e.num+"</span>"+(LiveModel.favourite_ids.includes(e.stream_id)?'<i class="fa fa-star favourite-icon"></i>':"")+'</div>\n            <div class="channel-name-wrapper floatTextWrapper">              <span class="channel-name floatText">'+e.name+"</span>            </div>          </div></div>"}),$("#channel-page-menu-container").html(s),t.channel_selection=0,this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),$("#channel-page-menu-container").scrollTop(0),this.current_category_index=t.category_selection,0<this.movies.length){if(this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),this.channel_nav_doms=$("#full-screen-navigation .channel-nav-item"),moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[0],"vertical",!0),this.hoverChannel(0),e){for(var o=0;o<this.movies.length;o++)if(this.movies[o].stream_id==e.stream_id){t.channel_selection=o,this.showMovie(this.movies[o]),this.hoverChannel(o);break}}else this.showMovie(this.movies[0]);t.focused_part="channel_selection"}}},goChannelNum:function(e){var t,s;this.full_screen_video&&(0!=(t=this.channel_num)||0==t&&0!=e)&&(this.channel_num=t=10*t+e,this.channel_number_timer&&(clearTimeout(this.channel_number_timer),this.channel_number_timer=null),s=this,$("#typed-channel-number").text(t),this.channel_number_timer=setTimeout(function(){for(var e=s.movies,t=!1,i=0;i<e.length;i++)if(e[i].num===s.channel_num){t=!0,current_movie=e[i],s.showMovie(current_movie),s.current_channel_id=current_movie.stream_id,s.hoverChannel(s.channel_doms[i]),s.keys.focused_part="video_control";break}t||showToast("Sorry","Channel does not exist"),s.channel_num=0,$("#typed-channel-number").text("")},2e3))},addOrRemoveFav:function(){var e=this.keys;if("channel_selection"===e.focused_part){var t=this.movies[e.channel_selection],i="add";"add"===(i=LiveModel.favourite_ids.includes(t.stream_id)?"remove":i)?(LiveModel.addRecentOrFavouriteMovie(t,"favourite"),$(this.channel_doms[e.channel_selection]).find(".channel-info-top").append('<i class="fa fa-star favourite-icon"></i>')):(i=this.categories[this.current_category_index],LiveModel.removeRecentOrFavouriteMovie(t.stream_id,"favourite"),$(this.channel_doms[e.channel_selection]).find(".favourite-icon").remove(),"favourite"===i.category_id&&($(this.channel_doms[e.channel_selection]).remove(),t=$("#channel-page-menu-container .channel-menu-item"),0==(this.channel_doms=t).length?this.hoverCategory(e.category_selection):(e.channel_selection>=t.length&&(e.channel_selection=t.length-1),this.hoverChannel(e.channel_selection))));try{for(var s=this.categories,o=0;o<s.length;o++)if("favourite"===s[o].category_id){var a=LiveModel.getRecentOrFavouriteCategory("favourite").movies.length;$(this.category_doms[o]).find(".channel-category-movie-counts").text(a);break}}catch(e){}}},showNextProgrammes:function(){for(var e="next-program-container",t=this.movies[this.keys.channel_selection],t=($("#channel-title").text(t.name),LiveModel.getNextProgrammes(this.programmes)),i=t.current_program_exist,s=t.programmes,o=0,a="",n=0;n<s.length&&(a+='<div class="next-program-item '+(0==o&&i?"current":"")+'"><span class="program-time">'+s[n].start.substring(11)+" ~ "+s[n].stop.substring(11)+"</span>"+s[n].title+"</div>",!(4<=++o));n++);0<o?$("#"+e).html(a).show():$("#"+e).hide().html("");var r,l,t="No Info",e="",c="No Info",d="";i?(r=s[0],1<s.length&&(l=s[1])):0<s.length&&(l=s[0]),r&&(t=r.title,e=r.start.substring(11)+" ~ "+r.stop.substring(11)),l&&(c=l.title,d=l.start.substring(11)+" ~ "+l.stop.substring(11)),$(".full-screen-program-name.current").text(t),$(".full-screen-program-time.current").text(e),$(".full-screen-program-name.next").text(c),$(".full-screen-program-time.next").text(d)},updateNextProgrammes:function(){this.showNextProgrammes(),clearInterval(this.next_programme_timer);var e=this;this.next_programme_timer=setInterval(function(){e.showNextProgrammes()},6e4)},getEpgProgrammes:function(){var t,i,s,e=this.movies[this.keys.channel_selection];this.epg_channel_id!==e.stream_id&&(i=[],(t=this).programmes=[],t.showNextProgrammes(),this.epg_channel_id=e.stream_id,"xc"===settings.playlist_type)&&(s="Y-MM-DD HH:mm",api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_short_epg&stream_id="+e.stream_id+"&limit="+this.short_epg_limit_count,success:function(e){e.epg_listings.map(function(e){i.push({start:getLocalChannelTime(e.start).format(s),stop:getLocalChannelTime(e.end).format(s),title:getAtob(e.title),description:getAtob(e.description)})}),t.programmes=i,t.updateNextProgrammes()}}))},checkIfShowInfo:function(){var e=!1;return e="block"===$("#full-screen-information").css("display")?!0:e},showInformation:function(e){$("#channel-page .player-container").removeClass("expanded"),$("#channel-page-contents-container").show();var t=this,i=(this.information_timer&&(clearTimeout(this.information_timer),this.information_timer=null),this.information_timer=setTimeout(function(){t.hideInformation()},25e3),this.keys);"category_selection"!=i.focused_part&&"channel_selection"!=i.focused_part&&(i.focused_part="channel_selection",e)&&"channel_selection"===i.focused_part&&this.hoverChannel(i.channel_selection),this.hideFullScreenInfo(),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){console.log(e)}},0)},hideInformation:function(){var e=this,t=this.keys;"category_selection"!=t.focused_part&&"channel_selection"!=t.focused_part||($("#channel-page .player-container").addClass("expanded"),"video_control"!=t.focused_part&&(t.prev_focus=t.focused_part),t.focused_part="video_control",$("#channel-page-contents-container").hide(),this.hoverVideoControl(1),setTimeout(function(){try{e.last_chosen_aspect_ratio?media_player.setDisplayArea(e.last_chosen_aspect_ratio,"channel"):media_player.setDisplayArea()}catch(e){console.log(e)}},0))},showFullScreenInfo:function(){clearTimeout(this.full_screen_timer),this.full_screen_timer=null,$("#full-screen-information").slideDown();var e=this;this.full_screen_timer=setTimeout(function(){e.hideFullScreenInfo()},5e3)},hideFullScreenInfo:function(){$("#full-screen-information").slideUp()},showMovie:function(e){this.last_chosen_aspect_ratio="stretch";var t,i=e.stream_id;"xc"===settings.playlist_type?t=getMovieUrl(i,"live","ts"):"general"===settings.playlist_type&&(t=e.url);try{media_player.close()}catch(e){}media_player.init("channel-page-video","channel-page");try{media_player.playAsync(window.PROXY_URL+t)}catch(e){}this.current_channel_id=i,$(".full-screen-channel-name").text(e.name),$(".full-screen-channel-logo").attr("src",e.stream_icon);var s=this;if(setTimeout(function(){s.populateSubtitleTracks(),s.populateAudioTracks()},2e3),!checkForAdult(e,"movie",LiveModel.categories)){LiveModel.addRecentOrFavouriteMovie(e,"recent");for(var o=this.categories,a=0;a<o.length;a++)if("recent"===o[a].category_id){var n=LiveModel.getRecentOrFavouriteCategory("recent").movies.length;$(this.category_doms[a]).find(".channel-category-movie-counts").text(n);break}}},showNextChannel:function(e){var t=this.keys,i=(t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this);setTimeout(function(){var e=i.movies[t.channel_selection],e=(i.current_channel_id=e.stream_id,i.showMovie(i.movies[t.channel_selection]),$(i.video_control_doms[1]).find("i"));$(e).removeClass("fa-play"),$(e).addClass("fa-pause")},400),this.showFullScreenInfo()},playOrPause:function(){var e=$(this.video_control_doms[1]).find("i");if(media_player.state==media_player.STATES.PLAYING){try{media_player.pause()}catch(e){}$(e).removeClass("fa-pause"),$(e).addClass("fa-play")}else{try{media_player.play()}catch(e){}$(e).removeClass("fa-play"),$(e).addClass("fa-pause")}},goToSearchPage:function(){this.hideFullScreenInfo(),$("#channel-page").addClass("hide"),search_page.init("channel-page","live"),this.toggleRearrangeMode(!1)},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_focus_dom).removeClass("rearrange");else if(e){e=this.keys;if("category_selection"===e.focused_part||"channel_selection"===e.focused_part){this.rearrange_mode=!0;var t=0;if("channel_selection"===e.focused_part)t=e.channel_selection;else for(var i=this.categories[e.category_selection],s=0;s<LiveModel.categories.length;s++)if(LiveModel.categories[s].category_id==i.category_id){t=s;break}this.rearrange_origin_position=t,$(this.prev_focus_dom).addClass("rearrange")}}},changeChannelDomContent:function(e,t,i){$(e).find(".channel-number").text(t.num),$(e).find(".channel-icon").attr("src",t.stream_icon),$(e).data("index",i),$(e).find(".channel-name").text(t.name),$(e).data("channel_id",t.stream_id)},changeCategoryDomContent:function(e,t,i){$(e).find(".channel-category-name").text(t.category_name),$(e).data("index",i),$(e).find(".channel-category-movie-counts").text(t.movies.length)},hoverColorButton:function(e){var t=this.keys;t.color_buttons_selection=e,t.focused_part="color_buttons_selection",$(this.prev_focus_dom).removeClass("active"),$(this.color_btns_doms).removeClass("active"),$(this.color_btns_doms[e]).addClass("active"),this.prev_focus_dom=$(colorBtnsDoms[e])},clickColorButton:function(e){var t=this.keys;switch(e){case 0:this.Exit("search-page");break;case 1:this.hoverChannel(t.channel_selection),this.toggleRearrangeMode(!0);break;case 2:this.hoverChannel(t.channel_selection),this.addOrRemoveFav();break;case 3:this.showSwitchPageModal()}},hoverVideoControl:function(e){var t=this.keys;t.video_control=e,t.focused_part="video_control",$(this.video_control_doms).removeClass("active"),$(this.video_control_doms[e]).addClass("active"),this.showFullScreenInfo()},hoverCategory:function(e){$("#channel-page-menu-container").css("overflow-y","hidden"),$("#channel-page-categories-container").css("overflow-y","scroll");var t=this.keys;t.focused_part="category_selection",this.toggleCategoriesMenu(!0),t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#channel-page-categories-container"),this.category_doms[t.category_selection],"vertical",!1),this.showInformation(!1),applyAnimation(this.category_doms[t.category_selection])},hoverChannel:function(e){$("#channel-page-categories-container").css("overflow-y","hidden"),$("#channel-page-menu-container").css("overflow-y","scroll");var t=this.keys,i=(t.focused_part="channel_selection",this.toggleCategoriesMenu(!1),t.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.color_btns_doms).removeClass("active"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[t.channel_selection]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.channel_doms[t.channel_selection]).addClass("rearrange")),this.prev_focus_dom=this.channel_doms[t.channel_selection],this.showInformation(!1),this);moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[t.channel_selection],"vertical",!1),this.channel_hover_timer&&(clearTimeout(this.channel_hover_timer),this.channel_hover_timer=null),this.channel_hover_timer=setTimeout(function(){i.getEpgProgrammes()},this.channel_hover_timeout),applyAnimation(this.channel_doms[t.channel_selection])},toggleCategoriesMenu:function(e){4==this.channel_layout&&(1==e?$(".categories-container").addClass("visible"):$(".categories-container").removeClass("visible"))},hoverSidebarOption:function(e){"sidebar_options"==this.keys.focused_part&&($(this.fullscreen_sidebar_doms).removeClass("active"),$(this.fullscreen_sidebar_doms[e]).addClass("active"),this.resetSidebarOptionsTimer())},showSidebarOptions:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="sidebar_options",this.resetSidebarOptionsTimer(),$("#channel-fullscreen-sidebar-options").addClass("visible"),e.sidebar_selection=0,this.hoverSidebarOption(e.sidebar_selection)},hideSidebarOptions:function(){var e=this.keys;e.focused_part="video_control",e.sidebar_selection=0,clearTimeout(this.channel_sidebar_options_timer),$("#channel-fullscreen-sidebar-options").removeClass("visible")},resetSidebarOptionsTimer:function(){var e=this;clearTimeout(this.channel_sidebar_options_timer),this.channel_sidebar_options_timer=setTimeout(function(){e.hideSidebarOptions()},1e4)},clickSidebarMainItem:function(e){if("sidebar_options"==this.keys.focused_part)switch(this.resetSidebarOptionsTimer(),e){case 0:this.showSidebarSubOptions(0);break;case 1:this.showSidebarSubOptions(1);break;case 2:this.showSidebarSubOptions(2)}},showSidebarSubOptions:function(e){clearTimeout(this.channel_sidebar_options_timer);var t=this.keys;switch($("#channel-fullscreen-sidebar-options").addClass("suboptions-visible"),this.hideAllSidebarSubOptions(),e){case 0:t.focused_part="aspect_ratio_selection",$("#channel-sidebar-aspect-ratio-options-container").show(),this.hoverSidebarSubOptionItem(t.aspect_ratio_selection);break;case 1:t.focused_part="subtitles_selection",$("#channel-sidebar-subtitles-options-container").show(),this.hoverSidebarSubOptionItem(t.subtitles_selection);break;case 2:t.focused_part="audio_selection",$("#channel-sidebar-audio-options-container").show(),this.hoverSidebarSubOptionItem(t.audio_selection)}},hideSidebarSubOptions:function(){this.keys.focused_part="sidebar_options",$("#channel-fullscreen-sidebar-options").removeClass("suboptions-visible"),this.resetSidebarOptionsTimer()},hideAllSidebarSubOptions:function(){$("#channel-sidebar-aspect-ratio-options-container").hide(),$("#channel-sidebar-subtitles-options-container").hide(),$("#channel-sidebar-audio-options-container").hide()},hoverSidebarSubOptionItem:function(e){var t=this.keys;if("aspect_ratio_selection"==t.focused_part||"subtitles_selection"==t.focused_part||"audio_selection"==t.focused_part)switch(t.focused_part){case"aspect_ratio_selection":$(this.sidebar_aspect_ratio_doms).removeClass("active"),$(this.sidebar_aspect_ratio_doms[e]).addClass("active"),t.aspect_ratio_selection=e;break;case"subtitles_selection":$(this.sidebar_subtitles_doms).removeClass("active"),$(this.sidebar_subtitles_doms[e]).addClass("active"),t.subtitles_selection=e;break;case"audio_selection":$(this.sidebar_audio_doms).removeClass("active"),$(this.sidebar_audio_doms[e]).addClass("active"),t.audio_selection=e}},clickSidebarSubOptionItem:function(e){var t=this.keys;if("aspect_ratio_selection"==t.focused_part||"subtitles_selection"==t.focused_part||"audio_selection"==t.focused_part)switch(t.focused_part){case"aspect_ratio_selection":this.clickAspectRatioItem(e);break;case"subtitles_selection":this.clickSubtitleItem(e);break;case"audio_selection":this.clickAudioItem(e)}},clickAspectRatioItem:function(e){$(this.sidebar_aspect_ratio_doms).removeClass("current"),$(this.sidebar_aspect_ratio_doms[e]).addClass("current"),this.changeAspectRatio(e)},changeAspectRatio:function(e){switch(e){case 0:media_player.setDisplayArea("stretch","channel"),this.last_chosen_aspect_ratio="stretch";break;case 1:media_player.setDisplayArea("16:9","channel"),this.last_chosen_aspect_ratio="16:9";break;case 2:media_player.setDisplayArea("21:9","channel"),this.last_chosen_aspect_ratio="21:9";break;case 3:media_player.setDisplayArea("4:3","channel"),this.last_chosen_aspect_ratio="4:3";break;case 4:media_player.setDisplayArea("1:1","channel"),this.last_chosen_aspect_ratio="1:1"}},clickSubtitleItem:function(e){if($(this.sidebar_subtitles_doms).removeClass("current"),$(this.sidebar_subtitles_doms[e]).addClass("current"),0===e)try{media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("TEXT",-1)}catch(e){console.log("Error turning off subtitles:",e)}else{var t=media_player.getSubtitleOrAudioTrack("TEXT"),e=e-1;if(t&&t[e])try{var i=t[e].index||e;media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("TEXT",i)}catch(e){console.log("Error setting subtitle track:",e)}}},showSwitchPageModal:function(){var e=this.keys;e.switch_page_modal_selection=0,e.focused_part="switch_page_modal",$("#channel-switch-page-modal-container").show(),this.hoverSwitchPageModal(0),clearTimeout(this.channel_hover_timer)},hideSwitchPageModal:function(){this.keys.focused_part="channel_selection",this.hoverChannel(this.keys.channel_selection),$("#channel-switch-page-modal-container").hide()},hoverSwitchPageModal:function(e){this.keys.switch_page_modal_selection=e,$(this.switch_page_modal_doms).removeClass("active"),$(this.switch_page_modal_doms[e]).addClass("active")},clickSwitchPageModal:function(){switch(this.hideSwitchPageModal(),this.Exit(),this.keys.switch_page_modal_selection){case 0:home_page.keys.menu_selection=1;break;case 1:home_page.keys.menu_selection=2;break;case 2:home_page.keys.menu_selection=4;break;case 3:home_page.hoverTopMenu(3)}home_page.handleMenuClick()},clickAudioItem:function(e){$(this.sidebar_audio_doms).removeClass("current"),$(this.sidebar_audio_doms[e]).addClass("current");var t=media_player.getSubtitleOrAudioTrack("AUDIO");if(t&&t[e])try{var i=t[e].index||e;media_player&&"function"==typeof media_player.setSubtitleOrAudioTrack&&media_player.setSubtitleOrAudioTrack("AUDIO",i)}catch(e){console.log("Error setting audio track:",e)}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":var t=checkForAdult(this.categories[e.category_selection],"category",[],!0);this.showInformation(!1),t?parent_confirm_page.init(current_route):(this.showCategoryChannels(),this.toggleRearrangeMode(!1));break;case"video_control":this.goBack();break;case"full_screen":this.showInformation(!0);break;case"channel_selection":t=this.movies[e.channel_selection].stream_id;this.showInformation(!1),this.current_channel_id==t?this.hideInformation():this.showMovie(this.movies[e.channel_selection]),this.toggleRearrangeMode(!1);break;case"sidebar_options":this.clickSidebarMainItem(e.sidebar_selection);break;case"aspect_ratio_selection":this.clickSidebarSubOptionItem(e.aspect_ratio_selection);break;case"subtitles_selection":this.clickSubtitleItem(e.subtitles_selection);break;case"audio_selection":this.clickAudioItem(e.audio_selection);break;case"color_buttons_selection":this.clickColorButton(this.keys.color_buttons_selection);break;case"switch_page_modal":this.clickSwitchPageModal(e.switch_page_modal_selection)}},handleMenusUpDown:function(e){var s=this.keys,t=this.channel_doms;switch(s.focused_part){case"category_selection":var i=s.category_selection;if(s.category_selection+=e,s.category_selection<0)s.category_selection=0;else if(s.category_selection>=this.category_doms.length)s.category_selection=this.category_doms.length-1;else{if(this.rearrange_mode&&i!==s.category_selection){for(var o=this.categories[i],a=this.categories[s.category_selection],n=(this.changeCategoryDomContent(this.category_doms[i],a,i),this.changeCategoryDomContent(this.category_doms[s.category_selection],o,s.category_selection),this.category_doms=$(".channel-page-category-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),0),r=0;r<LiveModel.categories.length;r++)if(a.category_id==LiveModel.categories[r].category_id){n=r;break}LiveModel.categories=makeRearrangeArray(LiveModel.categories,this.rearrange_origin_position,n),this.rearrange_origin_position=n,this.categories=LiveModel.getCategories(!1,!0),this.rearrange_timer=setTimeout(function(){for(var e=LiveModel.category_orders,t=0;t<e.length;t++)if(e[t].id==o.category_id){e.splice(t,1);break}e.push({id:o.category_id,position:n}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(e)),LiveModel.category_orders=e,LiveModel.updateRecentAndFavouritePosition()},this.rearrange_timeout)}this.hoverCategory(s.category_selection)}break;case"channel_selection":var l,c,d,i=s.channel_selection;s.channel_selection+=e,s.channel_selection>=t.length?s.channel_selection=t.length-1:s.channel_selection<0?s.channel_selection=0:(this.rearrange_mode&&s.channel_selection!==i&&(c=makeRearrangeArray(this.movies,i,s.channel_selection),this.movies=c,(d=this.categories[this.current_category_index]).movies=c,c=this.movies[i],l=this.movies[s.channel_selection],this.changeChannelDomContent(this.channel_doms[i],c,i),this.changeChannelDomContent(this.channel_doms[s.channel_selection],l,s.channel_selection),this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),this.rearrange_timer=setTimeout(function(){var e=LiveModel.channel_orders,t=[];e[d.category_id]&&(t=e[d.category_id]);for(var i=0;i<t.length;i++)if(t[i].id==l.stream_id&&t[i].name==l.name){t.splice(i,1);break}t.push({id:l.stream_id,name:l.name,position:s.channel_selection}),t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),e[d.category_id]=t,LiveModel.channel_orders=e,localStorage.setItem(storage_id+settings.playlist.id+"_channel_orders",JSON.stringify(e))},this.rearrange_timeout)),this.hoverChannel(s.channel_selection));break;case"full_screen":this.showNextChannel(-1*e);break;case"video_control":this.checkIfShowInfo()&&this.showNextChannel(-1*e),this.showFullScreenInfo();break;case"sidebar_options":s.sidebar_selection+=e,s.sidebar_selection<0&&(s.sidebar_selection=0),s.sidebar_selection>=this.fullscreen_sidebar_doms.length&&(s.sidebar_selection=this.fullscreen_sidebar_doms.length-1),this.hoverSidebarOption(s.sidebar_selection);break;case"aspect_ratio_selection":s.aspect_ratio_selection+=e,s.aspect_ratio_selection<0&&(s.aspect_ratio_selection=0),s.aspect_ratio_selection>=this.sidebar_aspect_ratio_doms.length&&(s.aspect_ratio_selection=this.sidebar_aspect_ratio_doms.length-1),this.hoverSidebarSubOptionItem(s.aspect_ratio_selection);break;case"subtitles_selection":s.subtitles_selection+=e,s.subtitles_selection<0&&(s.subtitles_selection=0),s.subtitles_selection>=this.sidebar_subtitles_doms.length&&(s.subtitles_selection=this.sidebar_subtitles_doms.length-1),this.hoverSidebarSubOptionItem(s.subtitles_selection);break;case"audio_selection":s.audio_selection+=e,s.audio_selection<0&&(s.audio_selection=0),s.audio_selection>=this.sidebar_audio_doms.length&&(s.audio_selection=this.sidebar_audio_doms.length-1),this.hoverSidebarSubOptionItem(s.audio_selection);break;case"switch_page_modal":s.switch_page_modal_selection+=e,s.switch_page_modal_selection>=this.switch_page_modal_doms.length&&(s.switch_page_modal_selection=this.switch_page_modal_doms.length-1),s.switch_page_modal_selection<0&&(s.switch_page_modal_selection=0),this.hoverSwitchPageModal(s.switch_page_modal_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&0<this.movies.length&&(t.focused_part="channel_selection",$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverChannel(t.channel_selection));break;case"channel_selection":this.is_no_categories||(e<0&&($(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverCategory(t.category_selection)),0<e&&this.hoverColorButton(0));break;case"video_control":console.log("Going left right video control"),this.showSidebarOptions();break;case"sidebar_options":e<0&&this.hideSidebarOptions(),0<e&&this.showSidebarSubOptions(t.sidebar_selection);break;case"aspect_ratio_selection":case"subtitles_selection":case"audio_selection":e<0&&this.hideSidebarSubOptions();break;case"color_buttons_selection":t.color_buttons_selection+=e,3<t.color_buttons_selection&&(t.color_buttons_selection=3),t.color_buttons_selection<0?(t.color_buttons_selection=0,this.hoverChannel(t.channel_selection)):this.hoverColorButton(t.color_buttons_selection)}},HandleKey:function(e){if(!this.is_loading){var t=this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:"video_control"===t.focused_part&&this.showNextChannel(1);break;case tvKey.CH_DOWN:"video_control"===t.focused_part&&this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:case tvKey.PLAY:case tvKey.PLAYPAUSE:this.playOrPause();break;case tvKey.BLUE:this.Exit("search-page");break;case tvKey.RED:this.toggleRearrangeMode(!0);break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.GREEN:this.showSwitchPageModal()}}},populateSubtitleTracks:function(){if(media_player&&"function"==typeof media_player.getSubtitleOrAudioTrack){var e=media_player.getSubtitleOrAudioTrack("TEXT"),n=(console.log("[DEBUG] Available subtitle tracks:",e),!1);try{media_player.parent_id&&(n=$("#"+media_player.parent_id+" .subtitle-container").is(":visible"),console.log("[DEBUG] Subtitle container is visible:",n))}catch(e){console.log("[DEBUG] Error checking subtitle visibility:",e)}var r="";r+='<div class="channel-sidebar-suboption'+(n?"":" current")+'" onclick="channel_page.clickSubtitleItem(0)"><span>Off</span></div>',e.forEach(function(e,t){var i="",s=e.index,o=n&&0===t;try{var a="string"==typeof e.extra_info?JSON.parse(e.extra_info):e.extra_info,i=a.track_lang||"Subtitle "+(t+1);language_codes&&language_codes[i]&&(i=language_codes[i]),console.log("[DEBUG] Subtitle track "+t+":",{language:i,index:s,extraInfo:a,isCurrent:o})}catch(e){i="Subtitle "+(t+1),console.log("[DEBUG] Error parsing subtitle track "+t+":",e)}r+='<div class="channel-sidebar-suboption'+(o?" current":"")+'" onclick="channel_page.clickSubtitleItem('+(t+1)+')"><span>'+i+"</span></div>"}),$("#channel-sidebar-subtitles-options-wrapper").html(r),this.sidebar_subtitles_doms=$("#channel-sidebar-subtitles-options-wrapper .channel-sidebar-suboption"),n&&0<e.length?(this.keys.subtitles_selection=1,this.current_subtitle_index=1):(this.keys.subtitles_selection=0,this.current_subtitle_index=0)}else console.log("[DEBUG] Media player or getSubtitleOrAudioTrack function not available")},populateAudioTracks:function(){if(media_player&&"function"==typeof media_player.getSubtitleOrAudioTrack){var e=media_player.getSubtitleOrAudioTrack("AUDIO"),o=0;try{if(media_player.videoObj&&media_player.videoObj.audioTracks)for(var t=0;t<media_player.videoObj.audioTracks.length;t++)if(media_player.videoObj.audioTracks[t].enabled){o=t,console.log("Found enabled audio track at index:",t);break}}catch(e){console.log("Error detecting enabled audio track:",e)}var a="";e.forEach(function(e,t){var i="",s=(e.index,t===o);try{i=("string"==typeof e.extra_info?JSON.parse(e.extra_info):e.extra_info).language||"Audio "+(t+1);language_codes&&language_codes[i]&&(i=language_codes[i])}catch(e){i="Audio "+(t+1)}a+='<div class="channel-sidebar-suboption'+(s?" current":"")+'" onclick="channel_page.clickAudioItem('+t+')"><span>'+i+"</span></div>"}),0===e.length&&(a+='<div class="channel-sidebar-suboption current" onclick="channel_page.clickAudioItem(0)"><span>Default</span></div>'),$("#channel-sidebar-audio-options-wrapper").html(a),this.sidebar_audio_doms=$("#channel-sidebar-audio-options-wrapper .channel-sidebar-suboption"),this.keys.audio_selection=o,this.current_audio_track_index=o}}};function initPlayer(){media_player="samsung"===platform?{videoObj:null,parent_id:"",STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},current_time:0,reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",init:function(e,t){this.videoObj=null,this.parent_id=t,this.state=this.STATES.STOPPED,this.parent_id=t,this.current_time=0,this.reconnect_count=0,this.url="",this.videoObj=document.getElementById(e),$("#"+t).find(".video-error").hide(),$(".video-resolution").text(""),$("#"+this.parent_id).find(".subtitle-container").html("").hide()},playAsync:function(e){if(this.url=e,$("#"+this.parent_id).find(".video-error").hide(),$(".video-loader").show(),!(this.state>this.STATES.STOPPED)){if(!this.videoObj)return 0;try{console.log(e),webapis.avplay.open(e),this.setupEventListeners(),this.setDisplayArea(),webapis.avplay.setBufferingParam("PLAYER_BUFFER_FOR_PLAY","PLAYER_BUFFER_SIZE_IN_SECOND",3);var a=this;webapis.avplay.prepareAsync(function(){$(".video-loader").hide(),a.reconnect_count=0,a.state=a.STATES.PLAYING,webapis.avplay.play(),$("#"+a.parent_id).find(".video-total-time").text(a.formatTime(webapis.avplay.getDuration()/1e3)),$("#"+a.parent_id).find(".video-error").hide();var e={min:0,max:webapis.avplay.getDuration()/1e3};$("#"+a.parent_id).find(".video-progress-bar-slider").attr(e),$("#"+a.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+a.parent_id).find(".video-current-time").text("00:00"),$("#"+a.parent_id).find(".video-reconnect-message").hide(),"vod-series-player-video"===current_route&&vod_series_player.showResumeBar();try{for(var t=webapis.avplay.getCurrentStreamInfo(),i=0;i<t.length;i++)if("VIDEO"===t[i].type){var s,o=JSON.parse(t[i].extra_info);o.Width&&o.Height&&(s=o.Width+" x "+o.Height,$(".video-resolution").text(s));break}}catch(e){console.log(e)}},function(){$(".video-loader").hide(),$("#"+a.parent_id).find(".video-error").show(),a.reconnect_count<a.reconnect_max_count&&a.tryReconnect()})}catch(e){$(".video-loader").hide(),$("#"+this.parent_id).find(".video-error").show(),this.reconnect_count<this.reconnect_max_count&&this.tryReconnect()}}},play:function(){this.state=this.STATES.PLAYING;try{webapis.avplay.play()}catch(e){}},pause:function(){this.state=this.STATES.PAUSED;try{webapis.avplay.pause()}catch(e){}},stop:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.stop()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},close:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.close()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_count+=1,this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{console.log("reconnect count=",this.reconnect_count),$("#"+this.parent_id).find(".video-reconnect-message").show(),this.state=this.STATES.STOPPED;var e=this;try{webapis.avplay.close()}catch(e){}this.reconnect_timer=setTimeout(function(){e.playAsync(e.url)},6e3)}},setDisplayArea:function(e,t){if(webapis&&webapis.avplay){var i=null,i="channel"==t?"#channel-page-video-lg":"#vod-series-player-video-lg";if(e)try{var s=$(this.videoObj).parent().width(),o=$(this.videoObj).parent().height();switch(e){case"1:1":$(i).css("object-fit","fill"),r=l=o;break;case"16:9":$(i).css("object-fit","fill"),l=o,r=Math.round(l*(16/9));break;case"4:3":$(i).css("object-fit","fill"),l=o,r=Math.round(l*(4/3));break;case"21:9":$(i).css("object-fit","fill"),r=window.innerWidth,l=Math.round(r*(9/21));break;case"stretch":$(i).css("object-fit","fill"),r=s,l=o;break;default:$(i).css("object-fit","contain"),r=s,l=o}var a=Math.round((s-r)/2),n=Math.round((o-l)/2);(s=$(this.videoObj).parent().width())<r&&(a-=(r-s)/2),webapis.avplay.setDisplayRect(Math.round(a),Math.round(n),Math.round(r),Math.round(l)),console.log("Samsung Display Rectangle:",{left:Math.round(a),top:Math.round(n),width:Math.round(r),height:Math.round(l)})}catch(e){console.log("Error in setDisplayRect",e)}else{var n=$(this.videoObj).offset().top,a=$(this.videoObj).offset().left,r=parseInt($(this.videoObj).width()),l=parseInt($(this.videoObj).height());webapis.avplay.setDisplayRect(a,n,r,l)}}else console.log("Samsung webapis.avplay is not available")},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},setupEventListeners:function(){var o=this;webapis.avplay.setListener({onbufferingstart:function(){$("#"+o.parent_id).find(".video-loader").show()},onbufferingprogress:function(e){},onbufferingcomplete:function(){$("#"+o.parent_id).find(".video-loader").hide()},onstreamcompleted:function(){$("#"+o.parent_id).find(".video-error").hide(),webapis.avplay.stop(),o.state=o.STATES.STOPPED,$("#"+o.parent_id).find(".progress-amount").css({width:"100%"}),"vod-series-player-video"===current_route&&vod_series_player.showNextVideo(1,!0)},oncurrentplaytime:function(e){o.current_time=e,$("#"+o.parent_id).find(".video-error").hide(),"vod-series-player-video"===current_route&&(vod_series_player.current_time=e/1e3),0<webapis.avplay.getDuration()&&($("#"+o.parent_id).find(".video-current-time").html(o.formatTime(e/1e3)),$("#"+o.parent_id).find(".video-progress-bar-slider").val(e/1e3).change())},ondrmevent:function(e,t){},onerror:function(e,t){$("#"+o.parent_id).find(".video-error").show()},onsubtitlechange:function(e,t,i,s){$("#"+o.parent_id).find(".subtitle-container").html(""),$("#"+o.parent_id).find(".subtitle-container").html(t)}})},onDeviceReady:function(){document.addEventListener("pause",this.onPause),document.addEventListener("resume",this.onResume)},onPause:function(){this.pause()},onResume:function(){this.play()},getSubtitleOrAudioTrack:function(t){var e=[];if("develop"==env)return e=[{extra_info:{fourCC:"un",subtitle_type:"0",track_lang:"un",index:3,type:"TEXT"}}];var i="",s="TEXT"===t?"track_lang":"language",o="TEXT"===t?"Subtitle ":"Track ";try{for(var a,n,r=webapis.avplay.getTotalTrackInfo(),l=0;l<r.length;l++)try{r[l].type==t&&(a=JSON.parse(r[l].extra_info),"TEXT"===t||"AUDIO"===t?(n=a[s].trim(),i.includes(n)||""===n?""===n&&(a[s]=o+(l+1),r[l].extra_info=a,e.push(r[l])):(i+=", "+n,a[s]=void 0!==language_codes[n]?language_codes[n]:n,r[l].extra_info=a,e.push(r[l]))):(r[l].extra_info=a,e.push(r[l])))}catch(e){console.log(t,e)}}catch(e){}return e},setSubtitleOrAudioTrack:function(e,t){try{webapis.avplay.setSelectTrack(e,t)}catch(e){}"TEXT"===e&&(-1==t?$("#"+this.parent_id+" .subtitle-container").hide():$("#"+this.parent_id+" .subtitle-container").show())}}:{id:"",videoObj:null,parent_id:"",current_time:0,STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},subtitles:[],tracks:[],reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",srt_map:{},movie_list_id:null,init:function(e,t){this.reconnect_count=0,this.url="",this.srt_map={},this.movie_list_id=null,e.includes("-lg")||(e+="-lg"),"lg"!=platform&&($("video").addClass("hide"),$("#"+e).removeClass("hide"),$("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden")),this.id=e,this.videoObj=null,this.parent_id=t,this.current_time=0,$("#"+t).find(".video-error").hide(),this.state=this.STATES.STOPPED,this.videoObj=document.getElementById(e),this.subtitles=[],this.tracks=[],$("#"+this.parent_id).find(".subtitle-container").html("").hide(),SrtOperation.deStruct();var s=this.videoObj,o=this,e=document.getElementById("channel-page-video"),i=document.getElementById("vod-series-player-video");e&&(e.onload=function(){$(this).css("visibility","visible")}),i&&(i.onload=function(){$(this).css("visibility","visible")}),this.videoObj.addEventListener("error",function(e){console.log("Error"),o.tryReconnect(),$("#"+o.parent_id).find(".video-error").show()}),this.videoObj.addEventListener("canplay",function(e){$("#"+o.parent_id).find(".video-error").hide(),"lg"!=platform&&($("#channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible"))}),this.videoObj.addEventListener("durationchange",function(e){}),this.videoObj.addEventListener("loadeddata",function(e){var t=parseInt(s.duration),i={min:0,max:t};$("#"+o.parent_id).find(".video-progress-bar-slider").attr(i),$("#"+o.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+o.parent_id).find(".video-total-time").text(o.formatTime(t)),"vod-series-player-video"===current_route&&vod_series_player.showResumeBar(),$("#"+o.parent_id).find(".video-reconnect-message").hide(),o.reconnect_count=0,clearTimeout(o.reconnect_timer)}),$("#"+t).find(".video-reconnect-message").hide(),this.videoObj.ontimeupdate=function(e){var t=o.videoObj.duration,i=o.videoObj.currentTime;0<t&&($("#"+o.parent_id).find(".video-progress-bar-slider").val(i).change(),$("#"+o.parent_id).find(".video-current-time").html(o.formatTime(i))),"vod-series-player-video"==current_route&&(vod_series_player.current_time=i,SrtOperation.timeChange(s.currentTime))},this.videoObj.addEventListener("loadedmetadata",function(){var e="No Information";try{var t=o.videoObj.videoWidth,i=o.videoObj.videoHeight;t&&i&&(e=t+" x "+i+"px")}catch(e){console.log(e)}console.log(e),$(".video-resolution").text(e)}),this.videoObj.addEventListener("waiting",function(e){}),this.videoObj.addEventListener("suspend",function(e){}),this.videoObj.addEventListener("stalled",function(e){console.log("Failed to fetch data, but trying.")}),this.videoObj.addEventListener("ended",function(e){"vod-series-player-video"===current_route&&vod_series_player.showNextVideo(1,!0)}),this.videoObj.addEventListener("emptied",function(e){})},playAsync:function(e){"lg"!=platform&&($("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden"));try{this.videoObj.pause()}catch(e){}console.log(e),this.url=e;var t=this;for($("#"+this.parent_id).find(".video-error").hide();this.videoObj.firstChild;)this.videoObj.removeChild(this.videoObj.firstChild);this.videoObj.load();var i=document.createElement("source");i.setAttribute("src",e),this.videoObj.appendChild(i),this.videoObj.addEventListener("playing",function e(){"lg"!=platform&&($("channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible")),this.removeEventListener("playing",e)}),this.videoObj.play(),$("#"+this.parent_id).find(".progress-amount").css({width:0}),i.addEventListener("error",function(e){$(".video-loader").hide(),$("#"+t.parent_id).find(".video-error").show(),t.tryReconnect()}),i.addEventListener("emptied",function(e){console.log("Empty"),$("#"+t.parent_id).find(".video-error").show()}),this.state=this.STATES.PLAYING},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_timer=null,this.reconnect_count+=1,console.log("here reconnecting",this.reconnect_count),this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{$("#"+this.parent_id).find(".video-reconnect-message").show();var e=this;try{this.videoObj.close()}catch(e){}this.reconnect_timer=setTimeout(function(){try{e.playAsync(e.url)}catch(e){console.log(e)}},6e3)}},play:function(){this.state=this.STATES.PLAYING,this.videoObj.play(),0<SrtOperation.srt.length&&(SrtOperation.stopped=!1)},setDisplayArea:function(e,t){if(e){$("video_element").css("object-fit","fill");var i,s=parseInt($(this.videoObj).height());switch(e){case"1:1":$("video_element").css("object-fit","fill"),i=s+"px";break;case"16:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(16/9))+"px";break;case"4:3":$("video_element").css("object-fit","fill"),i=Math.round(s*(4/3))+"px";break;case"21:9":$("video_element").css("object-fit","fill"),i=Math.round(s*(21/9))+"px";break;case"stretch":$("video_element").css("object-fit","fill"),s=i="100%";break;default:$("video_element").css("object-fit","contain"),s=i="100%"}this.videoObj.style.width=i,this.videoObj.style.height=s,console.log("NEW height",s),console.log("NEW WIDTH",i)}},pause:function(){this.state=this.STATES.PAUSED;try{this.videoObj.pause()}catch(e){}},close:function(){try{this.videoObj.pause()}catch(e){}this.state=this.STATES.STOPPED,SrtOperation.deStruct(),this.subtitles=[],this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},seekTo:function(e){},getSubtitleOrAudioTrack:function(e){var i=[],s="TEXT"==e?0<media_player.videoObj.textTracks.length?media_player.videoObj.textTracks:{}:media_player.videoObj.audioTracks&&0<media_player.videoObj.audioTracks.length?media_player.videoObj.audioTracks:{};return console.log(s),0<Object.keys(s).length&&Object.keys(s).map(function(e,t){"object"==typeof s[e]&&null!=s[e]&&i.push(s[e])}),console.log(i),i},setSubtitleOrAudioTrack:function(e,t){if("TEXT"==e)-1==t?(SrtOperation.deStruct(),this.subtitles=[],$("#"+this.parent_id+" .subtitle-container").hide()):(this.subtitles[t]&&(e=this.subtitles[t].file_id.toString(),this.srt_map[e])&&SrtOperation.init(this.srt_map[e],media_player.videoObj.currentTime),$("#"+this.parent_id+" .subtitle-container").show());else{for(var i=0;i<this.videoObj.audioTracks.length;i++)this.videoObj.audioTracks[i].enabled=!1;this.videoObj.audioTracks[t].enabled=!0}}}}function convertProgrammeTimeToClientTime(e){e=moment(e,"YYYYMMDDHHmmss Z");return e.utc().add(client_offset,"minute"),e.format("Y-MM-DD HH:mm")}function getTodayDate(e){var t=new Date;return moment(t).format(e)}function calculateTimeDifference(e,t){e=new Date(e);time_difference_with_server=parseInt((1e3*t-e.getTime())/6e4)}function getLocalChannelTime(e){return moment(e).add(time_difference_with_server,"minute")}var vod_summary_page={keys:{index:0},action_btns:$(".vod-action-btn"),is_favourite:!1,is_loading:!1,prev_route:"",has_trailer:!1,init:function(e){this.prev_route=e;var s=this,e=($(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),this.is_favourite=!VodModel.favourite_ids.includes(current_movie.stream_id),this.toggleFavourite(),$("#vod-summary-name").text(current_movie.name),$("#vod-watch-trailer-button").hide(),$("#vod-summary-release-date").text(""),$("#vod-summary-release-genre").text(""),$("#vod-summary-release-length").text(""),$("#vod-summary-release-age").text(""),$("#vod-summary-release-director").text(""),$("#vod-summary-release-cast").text(""),$("#vod-summary-description").text(""),current_movie.youtube_trailer="",this.hoverButton(0),0),e=void 0===current_movie.rating||""===current_movie.rating?0:parseFloat(current_movie.rating);isNaN(e)&&(e=0),$("#vod-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#vod-rating-mark").text(e.toFixed(1)),VodModel.favourite_ids.includes(current_movie.stream_id)?($(this.action_btns[2]).data("action","remove"),$(this.action_btns[2]).text(void 0!==current_words.remove_favorites?current_words.remove_favorites:"Remove Fav")):($(this.action_btns[2]).data("action","add"),$(this.action_btns[2]).text(void 0!==current_words.add_to_favorite?current_words.add_to_favorite:"Add Fav")),$("#vod-series-page").addClass("hide"),$("#vod-summary-page").removeClass("hide"),current_route="vod-summary-page",current_movie.info={},"xc"===settings.playlist_type&&(showLoader(!0),this.is_loading=!0,api({url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+current_movie.stream_id,success:function(e){var t=e.info,i=($("#vod-summary-release-date").text(t.releasedate),$("#vod-summary-release-genre").text(t.genre),$("#vod-summary-release-length").text(t.duration),$("#vod-summary-release-age").text(t.age),$("#vod-summary-release-director").text(t.director),$("#vod-summary-release-cast").text(t.cast),$("#vod-summary-description").text(t.description),(current_movie.info=t).tmdb_id&&(current_movie.tmdb_id=t.tmdb_id),current_movie.summary_downloaded=!0,"");try{((i=vod_series_page.current_backdrop||t.backdrop_path[0]||t.backdrop||HOST+"app_src_min/images/default_movie_bg.png")?$(".vod-series-background-img").attr("src",i):$(".vod-series-background-img").attr("src",HOST+"app_src_min/images/default_movie_bg.png")).show()}catch(e){console.error("ERROR SETTINGS BACKDROP IMAGE",e)}$(".vod-series-background-img-overlay").show(),current_movie.youtube_trailer=e.info.youtube_trailer,void 0!==t.youtube_trailer&&null!=t.youtube_trailer&&""!==t.youtube_trailer.trim()&&($("#vod-watch-trailer-button").show(),s.has_trailer=!0),showLoader(!1),s.is_loading=!1},fail:function(e){showLoader(!1),s.is_loading=!1}})),this.has_trailer=!1,this.fillContinueWatchingData()},goBack:function(){switch($("#vod-summary-page").addClass("hide"),current_route=this.prev_route,this.prev_route){case"home-page":$("#home-page").removeClass("hide");break;case"vod-series-page":$("#vod-series-page").removeClass("hide");var e=vod_series_page.keys,t=vod_series_page.menu_doms;this.is_favourite?0==$(t[e.menu_selection]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$($(t[e.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),i=vod_series_page.categories[e.category_selection],t=vod_series_page.menu_doms,"favourite"===i.category_id?($(t[e.menu_selection]).remove(),(0<t.length?(t.map(function(e,t){$(t).data("index",e)}),t=$("#vod-series-menus-container .vod-series-menu-item-container"),vod_series_page.menu_doms=t,e.menu_selection>=vod_series_page.menu_doms.length&&(e.menu_selection=vod_series_page.menu_doms.length-1),$(vod_series_page.menu_doms[e.menu_selection])):(e.focused_part="category_selection",$(vod_series_page.category_doms[e.category_selection]))).addClass("active")):$($(t[e.menu_selection]).find(".favourite-badge")).remove());break;case"search-page":$("#search-page").show(),current_route="search-page",t=search_page.movie_doms[1];var i=(e=search_page.keys).hor_keys[1];this.is_favourite?0==$(t[i]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$(t[i]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),$($(t[i]).find(".favourite-badge")).remove())}},fillContinueWatchingData:function(){var t={},e=(VodModel.saved_video_times.forEach(function(e){t[e.stream_id.toString()]=e}),t[current_movie.stream_id]),e=e?utilities.getPercentage(e.time,e.duration):0;0<e?($("#vod-watch-movie-button").addClass("continue"),$("#vod-summary-watched-bar").css("width",e+"%"),$("#vod-summary-progress-percentage").text(e+"%"),$("#vod-watch-movie-btn-text").attr("data-word_code","continue_watching"),console.log(current_words.continue_watching),null!=current_words.continue_watching?(console.log("Word found"),$("#vod-watch-movie-btn-text").text(current_words.continue_watching)):(console.log("Word not found, falling back to text"),$("#vod-watch-movie-btn-text").text("Continue Watching"))):($("#vod-watch-movie-button").removeClass("continue"),$("#vod-watch-movie-btn-text").attr("data-word_code","watch_movie"),null!=typeof current_words.watch_movie?$("#vod-watch-movie-btn-text").text(current_words.watch_movie):$("#vod-watch-movie-btn-text").text("Watch Movie"))},showTrailerVideo:function(){""===current_movie.youtube_trailer||null==current_movie.youtube_trailer?($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")):trailer_page.init(current_movie.youtube_trailer,current_route)},showMovie:function(){$("#vod-summary-page").addClass("hide"),vod_series_player.init(current_movie,"movie","vod-summary-page","",!0)},toggleFavourite:function(){var e=this.action_btns[2];this.is_favourite=!this.is_favourite,this.is_favourite?$(e).text(void 0!==current_words.remove_favorites?current_words.remove_favorites:"Remove Fav"):$(e).text(void 0!==current_words.add_to_favorite?current_words.add_to_favorite:"Add Fav")},hoverButton:function(e){var t=this.keys;t.index=e,$(".vod-action-btn").removeClass("active"),$($(".vod-action-btn")[t.index]).addClass("active")},keyMove:function(e){var t=this.keys;t.index+=e,this.has_trailer||(t.index+=e),t.index<0&&(t.index=2),2<t.index&&(t.index=0),this.hoverButton(t.index)},keyClick:function(){var e=this.keys,e=$(".vod-action-btn")[e.index];$(e).trigger("click")},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.keyMove(-1);break;case tvKey.RIGHT:this.keyMove(1);break;case tvKey.ENTER:this.keyClick();break;case tvKey.YELLOW:this.toggleFavourite()}}},vod_series_player={player:null,back_url:"",show_control:!1,timeOut:null,has_episodes:!1,keys:{focused_part:"control_bar",control_bar:0,info_bar:0,operation_modal:0,subtitle_audio_selection_modal:0,audio_selection_modal:0,aspect_ratio_selection:0,prev_focus:"",resume_bar:0,episode_selection:0,subtitle_adjust_selection:0,leave_popup_selection:1},current_subtitle_index:-1,current_audio_track_index:-1,subtitle_audio_menus:[],forwardTimer:null,current_time:0,show_subtitle:!1,show_audio_track:!1,video_control_doms:$("#vod-series-video-controls-container .video-control-icon i"),video_info_doms:$("#vod-series-video-controls-container .video-info-btn"),vod_info_timer:null,current_movie:{},resume_time:0,resume_timer:null,episode_doms:[],resume_bar_doms:$("#video-resume-modal .resume-action-btn"),seek_timer:null,seek_interval_timer:null,current_movie_type:"",video_duration:0,last_key_time:0,slider_element:$("#vod-series-video-progressbar-container .video-progress-bar-slider")[0],subtitle_loading:!1,subtitle_loaded:!1,fw_timer:null,subtitle_adjust_items:$(".subtitle-adjust-item"),subtitle_adjust_time:0,aspect_ratio_doms:$("#aspect-ratio-modal-body div"),showNextVideo_debounce:!1,init:function(e,t,i,s,o){this.current_movie=e,this.current_time=0,this.video_duration=0,this.fw_timer=null,this.subtitle_adjust_time=0,$("#vod-summary-page").addClass("hide"),$("#series-summary-page").addClass("hide"),$("#vod-series-player-page").removeClass("hide"),this.current_movie_type=t,this.showControlBar(o),o&&this.makeEpisodeDoms();var a,n,r,o=$(this.video_control_doms[2]),l=($(o).removeClass("fa-play"),$(o).addClass("fa-pause"),$("#vod-series-player-page").find(".video-current-time").text("--:--"),$("#vod-series-player-page").find(".video-total-time").text("--:--"),this),o=this.slider_element;$(o).attr({min:0,max:100}),$(o).rangeslider({polyfill:!1,rangeClass:"rangeslider",onSlideEnd:function(e,t){l.sliderPositionChanged(t)}}),$(o).val(0).change(),$(o).rangeslider("update"),clearTimeout(this.resume_timer),"movie"===t?("xc"===settings.playlist_type?a=getMovieUrl(e.stream_id,"movie",e.container_extension):"type1"===settings.playlist_type&&(a=e.url),$("#vod-series-video-title").html(e.name)):"series"===t?("xc"===settings.playlist_type?a=getMovieUrl(e.id,"series",e.container_extension):"type1"===settings.playlist_type&&(a=e.url),$("#vod-series-video-title").html(e.title)):"epg"===t&&(o="channel-page"===i?(a=s,getAtob((n=channel_page.programmes[channel_page.keys.epg_selection]).title)+"  <span class='player-epg-title-time'>"+n.start.substr(11)+"~"+n.stop.substr(11)+"</span>"):(n=this.current_movie,a=LiveModel.getProgrammeVideoUrl(epg_page.movie.stream_id,n,!0).url,getAtob(n.title)+"  <span class='player-epg-title-time'>"+n.start.substr(11)+"~"+n.stop.substr(11)+"</span>"),$("#vod-series-video-title").html(o)),this.back_url=i;try{media_player.close()}catch(e){}try{media_player.init("vod-series-player-video","vod-series-player-page"),media_player.setDisplayArea()}catch(e){}try{media_player.playAsync(a)}catch(e){}if(r="movie"===t?"stream_id":"id",this.resume_time=0,"movie"===t||"series"===t)if(r=e[r].toString(),"movie"===t){for(var c=VodModel.saved_video_times,d=this.resume_time=0;d<c.length;d++)if(c[d].stream_id==r){this.resume_time=c[d].time;break}}else if("series"===t)for(c=SeriesModel.saved_video_times,d=0;d<c.length;d++)if(c[d].stream_id==current_series.series_id){var h=c[d].video_times,u=series_summary_page.keys.episode_selection.toString(),_=series_summary_page.current_season_index.toString();if(h[_]&&h[_][u]){this.resume_time=h[_][u].time;break}}current_route="vod-series-player-video",this.current_subtitle_index=-1,this.current_audio_track_index=-1,this.show_subtitle=!1},sliderPositionChanged:function(e){this.hoverSlider(),media_player.videoObj.currentTime=e,this.current_time=e,$(this.slider_element).val(e).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(e))},makeEpisodeDoms:function(){var e,s;this.keys.episode_selection=0,"series"===this.current_movie_type?(e=current_season.episodes,this.episodes=e,this.has_episodes=!0,s="",e.map(function(e,t){var i=e.info.movie_image||series_summary_page.current_series_backdrop_image||current_series.cover;s+='<div class="player-season-item"                        onclick="vod_series_player.showSelectedEpisode()"                        onmouseenter="vod_series_player.hoverEpisode('+t+')"                    >                        <div class="player-episodes-image-container">                            <img src="'+i+'" />                        </div>                        <div class="player-episode-title-container">                            <div class="player-episode-number">'+(t+1)+'</div>                             <div class="player-episode-title max-line-2">'+e.title+"</div>                        </div>                    </div>"}),$("#player-seasons-container").html(s),this.episode_doms=$(".player-season-item"),$("#player-seasons-container").removeClass("expanded"),$("#player-seasons-container").show()):(this.has_episodes=!1,$("#player-seasons-container").html(""),this.episode_doms=$(".player-season-item"),this.episode_doms=[],$("#player-seasons-container").hide())},showResumeBar:function(){var e,t=this.keys;0<this.resume_time&&("resume_bar"!==t.focused_part&&(t.prev_focus=t.focused_part),e="lg"!==platform&&"vidaa"!==platform&&"zeasn"!==platform&&"titanos"!==platform?1e3:1,e=media_player.formatTime(this.resume_time/e),$("#vod-resume-time").text(e),$("#video-resume-modal").show(),this.hideControlBar(),clearTimeout(this.resume_timer),this.resume_timer=null,"resume_bar"!=t.focused_part&&(t.prev_focus=t.focused_part),"subtitle_audio_selection_modal"!=t.focused_part?this.hoverResumeBtn(0):(this.hoverResumeBtn(0),t.focused_part="subtitle_audio_selection_modal",t.prev_focus="resume_bar"))},Exit:function(){this.saveVideoTime(),current_route=this.back_url;try{media_player.close()}catch(e){console.log(e)}$("#"+media_player.parent_id).find(".video-error").hide(),$("#"+media_player.parent_id).find(".subtitle-container").text(""),$("#vod-series-player-page").addClass("hide")},saveVideoTime:function(){try{var e,t,i,s;if("samsung"===platform){s=i=1e4;try{e=webapis.avplay.getCurrentTime(),t=webapis.avplay.getDuration()}catch(e){}}else"lg"!==platform&&"vidaa"!==platform&&"zeasn"!==platform&&"titanos"!==platform||(s=10,e=media_player.videoObj.currentTime,t=media_player.videoObj.duration,i=10);"develop"===env&&(t=(e=25e3)+5e4*Math.random());var o,a,n,r=this.current_movie;if(i<=t-e&&s<=e){if("movie"===this.current_movie_type){if(checkForAdult(r,"movie",o=VodModel.getCategories(!0,!1)))return;VodModel.saveVideoTime(r.stream_id,e,t),VodModel.addToWatchList(r),"vod-series-page"===this.back_url&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").addClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-progress").css({width:e/t*100+"%"}),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress"))}"series"===this.current_movie_type&&(o=SeriesModel.getCategories(!0,!1),checkForAdult(current_series,"movie",o)||(a=SeriesModel.saveVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection,e,t),SeriesModel.addToWatchList(current_series),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-duration").addClass("has-progress"),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-progress").css({width:e/t*100+"%"}),series_summary_page.series_video_times=a,"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress")))}else t-e<i&&("movie"===this.current_movie_type&&(VodModel.removeVideoTime(r.stream_id),"vod-series-page"===this.back_url)&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").removeClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress")),"series"===this.current_movie_type)&&((n=SeriesModel.removeVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection))[0]&&"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress"),series_summary_page.series_video_times=n[1])}catch(e){console.log("here error",e)}},goBack:function(){$(".modal").modal("hide");var e=this.keys;console.log(e.focused_part),"resume_bar"===e.focused_part&&($("#video-resume-modal").hide(),"resume_bar"!=e.prev_focus?e.focused_part=e.prev_focus:e.focused_part="info_bar",clearTimeout(this.resume_timer)),"leave_popup_selection"==e.focused_part?this.hideLeavePopup():this.show_control?this.hideControlBar():"control_bar"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part&&"slider"!==e.focused_part||this.showLeavePopup(),"subtitle_audio_selection_modal"===e.focused_part&&(e.focused_part="control_bar",$("#subtitle-selection-modal").modal("hide")),"vod_info"===e.focused_part&&($("#vod-video-info-container").hide(),clearTimeout(this.vod_info_timer),e.focused_part=e.prev_focus),"subtitle_adjust_selection"===e.focused_part&&($("#subtitle-time-adjust-modal").hide(),e.focused_part="control_bar"),"aspect_ratio_modal"===e.focused_part&&($("aspect-ratio-modal").modal("hide"),e.focused_part=e.prev_focus)},playPauseVideo:function(e){this.showControlBar(!1);var t=this.video_control_doms,i=$(t[2]);switch(e){case"pause":if(media_player.state===media_player.STATES.PLAYING)try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}break;case"play":if(media_player.state===media_player.STATES.PAUSED)try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}break;default:if(media_player.state===media_player.STATES.PAUSED){console.log("We are in pause state, will play");try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}}else if(media_player.state===media_player.STATES.PLAYING){console.log("We are in playing state, will pause");try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}}}},seekTo:function(e){if("samsung"===platform){var t=(new Date).getTime()/1e3;if(!(t-this.last_key_time<.1)){if(this.last_key_time=t,0===this.current_time&&(this.current_time=media_player.current_time/1e3),0!=this.video_duration)i=this.video_duration;else try{i=webapis.avplay.getDuration()/1e3,this.video_duration=i}catch(e){this.video_duration=i=0}if(i)if((s=this.current_time+e)<0)this.showNextVideo(-1);else if(i<=s)this.showNextVideo(1);else{if(this.current_time=s,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)),$(this.slider_element).val(s).change(),clearTimeout(this.seek_timer),media_player.state===media_player.STATES.PLAYING)try{media_player.pause()}catch(e){}$("#"+media_player.parent_id).find(".video-loader").show(),this.seek_timer=setTimeout(function(){webapis.avplay.seekTo(1e3*s),setTimeout(function(){try{media_player.play()}catch(e){}},200)},500)}}}else{var i,s;0===this.current_time&&(this.current_time=media_player.videoObj.currentTime),(i=media_player.videoObj.duration)<=(s=(s=this.current_time+e)<0?0:s)&&(s=i),this.current_time=s,media_player.videoObj.currentTime=s,0<i&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),SrtOperation.stopOperation(),this.fw_timer&&(clearTimeout(this.fw_timer),this.fw_timer=null),this.fw_timer=setTimeout(function(){SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1},200),$(this.slider_element).val(s).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)))}},showSelectedEpisode:function(){var e=series_summary_page.keys,t=this.keys,i=series_summary_page.episode_doms;if(e.episode_selection!=t.episode_selection){this.saveVideoTime(),$(i).removeClass("active"),e.episode_selection=t.episode_selection,$(i[e.episode_selection]).addClass("active");i=this.episodes[t.episode_selection];this.resume_time=0;try{media_player.close()}catch(e){}current_episode=i,this.init(current_episode,"series","episode-page","",!1),this.hoverEpisode(t.episode_selection)}},showNextVideo:function(e){if(!this.showNextVideo_debounce){this.showNextVideo_debounce=!0;var t=this;switch(setTimeout(function(){t.showNextVideo_debounce=!1},1e3),this.saveVideoTime(),this.resume_time=0,this.back_url){case"vod-series-page":var i=vod_series_page.menu_doms;(s=vod_series_page.keys).menu_selection+=e,s.menu_selection<0?s.menu_selection=0:s.menu_selection>=vod_series_page.movies.length?s.menu_selection=vod_series_page.movies.length-1:($(i).removeClass("active"),$(i[s.menu_selection]).addClass("active"),current_movie=vod_series_page.movies[s.menu_selection],this.init(current_movie,"movie","vod-series-page","",!1));break;case"home-page":var s=home_page.keys;if("movie"===this.current_movie_type){if(o=home_page.keys.latest_movie_selection+e,i=home_page.latest_movies,o<0)return;if(o>=i.length)return this.hideControlBar(),void this.goBack();s.latest_movie_selection=o,current_movie=home_page.latest_movies[o],this.init(current_movie,"movie","home-page","",!1)}break;case"episode-page":var o,s=series_summary_page.keys,i=series_summary_page.episode_doms;$(i).removeClass("active"),s.episode_selection+=e,s.episode_selection<0?s.episode_selection=0:s.episode_selection>=i.length?s.episode_selection=i.length-1:($(i[s.episode_selection]).addClass("active"),o=current_season.episodes,current_episode=o[s.episode_selection],this.init(current_episode,"series","episode-page","",!1));break;case"channel-page":i=channel_page.keys.epg_selection;(i+=e)<0||i>=channel_page.programmes.length||(channel_page.keys.epg_selection=i,channel_page.showEpgVideo());break;case"search-page":(s=search_page.keys).hor_keys[1]+=e,s.hor_keys[1]<0?s.hor_keys[1]=0:(o=search_page.filtered_movies[1],s.hor_keys[1]>=o.length?s.hor_keys[1]=o.length-1:(this.saveVideoTime(),current_movie=o[s.hor_keys[1]],this.init(current_movie,"movie","search-page","",!1)));break;case"catch-up-detail":(s=epg_page.keys).programme_selection+=e,s.programme_selection<0?s.programme_selection=0:s.programme_selection>=epg_page.programme_doms.length?s.programme_selection=epg_page.programme_doms.length-1:this.init(epg_page.current_programmes[s.programme_selection],"epg","catch-up-detail",!1)}}},showControlBar:function(e){$("#vod-series-video-controls-container").slideDown(),$("#vod-series-video-title").slideDown(),this.show_control=!0;var t=this;e&&(this.hoverVideoControlIcon(2),$("#player-seasons-container").removeClass("expanded")),clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){t.hideControlBar()},1e4)},hideControlBar:function(){$("#vod-series-video-controls-container").slideUp(),$("#vod-series-video-title").slideUp(),this.show_control=!1},makeMediaTrackElement:function(e,t){var s,i,o="",a=0;return"TEXT"===t&&(a=1,o='<div class="modal-operation-menu-type-2 subtitle-item"                    onmouseenter="vod_series_player.hoverSubtitle(0)"                     onclick="vod_series_player.handleMenuClick()"                 >                   <input class="magic-radio" type="radio" name="radio" id="disable-subtitle" value="-1">                   <label for="disable-subtitle">Disabled</label>                </div>'),"samsung"===platform?(s="TEXT"!==t?"language":"track_lang",e.map(function(e,t){var i=e.extra_info;o+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player.hoverSubtitle('+(t+a)+')"                     onclick="vod_series_player.handleMenuClick()"                 >                    <input class="magic-radio" type="radio" name="radio"                        value="'+e.index+'"                    >                    <label>'+i[s]+"</label>                </div>"})):(i="TEXT"===t?"Subtitle ":"Track ",e.map(function(e,t){e=e.language;e?language_codes[e]&&(e=language_codes[e]):e=i+(t+1),o+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player.hoverSubtitle('+(t+a)+')"                         onclick="vod_series_player.handleMenuClick()"                     >                        <input class="magic-radio" type="radio" name="radio"                            value="'+t+'">                        <label>'+e+"</label>                    </div>"})),o},showSubtitleAudioModal:function(e){this.hideControlBar();var t,i,s,o=this.keys;try{$("#subtitle-loader-container").hide(),this.subtitle_loading=!1,"samsung"!==platform&&"TEXT"===e?this.subtitle_loaded?0<media_player.subtitles.length?this.renderSubtitles(e,media_player.subtitles):this.showEmptySubtitleMessage(e):($("#subtitle-selection-container").html(""),"subtitle_audio_selection_modal"!==o.focused_part&&(o.prev_focus=o.focused_part),this.hoverSubtitle(-2),this.subtitle_loading=!0,$("#subtitle-selection-modal").modal("show"),$("#subtitle-loader-container").show(),i=settings.playlist_type,s=this.current_movie,"movie"===this.current_movie_type?s.tmdb_id?this.getSubtitlesForLG():s.tmdb?(s.tmdb_id=s.tmdb,this.getSubtitlesForLG()):"xc"!==i||s.summary_downloaded?this.getTmdbID(s,"movie"):this.getMovieDetail():(console.log(current_series),current_series.tmdb||current_series.info&&current_series.info.tmdb||s.info&&s.info.tmdb_id?this.getSubtitlesForLG():this.getTmdbID(current_series,"series"))):0<(t=media_player.getSubtitleOrAudioTrack(e)).length?this.renderSubtitles(e,t):showToast("Sorry","TEXT"===e?"No Subtitles exists":"No Audios exists")}catch(e){console.log(e),$("#vod-series-player-operation-modal").modal("hide"),showToast("Sorry","Video not loaded yet")}},showAspectRatioMenu:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="aspect_ratio_modal",this.hideControlBar(),$("#aspect-ratio-modal").modal("show")},getMovieDetail:function(){var t=this,i=this.current_movie;"xc"===settings.playlist_type&&api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+i.stream_id,success:function(e){e=e.info;t.current_movie.info=e,i.summary_downloaded=!0,e.tmdb_id?(t.current_movie.tmdb_id=e.tmdb_id,t.getSubtitlesForLG()):t.getTmdbID(i,"movie")},fail:function(e){console.log(e),t.getTmdbID(i,"movie")}})},getTmdbID:function(r,l){var e="movie"===l?r.info&&(r.info.o_name||r.info.name)||r.name:(r.info&&r.info.name?r.info:r).name,e=getRealMovieName(e),c=e.name.toLowerCase(),e=(e.year,e.country,tmdb_prefix_url+("movie"===l?"/search/movie":"/search/tv")+"?api_key="+tmdb_api_key+"&query="+c),d=this;$.ajax({method:"get",url:e,success:function(e){if(e.results&&0<e.results.length){var t=e.results;if(console.log(e),1==t.length)"movie"===l?d.current_movie.tmdb_id=t[0].id:current_series.tmdb=t[0].id,d.getSubtitlesForLG();else if("movie"===l){e=r.info;if(e&&e.releasedate){for(var i=e.releasedate,s=0;s<t.length;s++)if(t[s].release_date===i){d.current_movie.tmdb_id=t[s].id;break}}else{for(var o=0,s=0;s<t.length;s++)c.includes(t[s].title.toLowerCase())&&(o++,a=s);1==o&&(console.log(t[a]),d.current_movie.tmdb_id=t[a].id)}d.current_movie.tmdb_id?d.getSubtitlesForLG():d.showEmptySubtitleMessage("TEXT")}else{console.log("here series tmdb api results",t);for(var a,o=0,n=current_series.plot?current_series.plot.toLowerCase().trim():"",s=0;s<t.length;s++)if((c.includes(t[s].name.toLowerCase())||c.includes(t[s].original_name.toLowerCase()))&&(o++,a=s,n)&&n==t[s].overview.toLowerCase().trim()){console.log("here same overview"),o=1;break}1==o?(console.log(t[a]),current_series.tmdb=t[a].id,d.getSubtitlesForLG()):d.showEmptySubtitleMessage("TEXT")}}else d.showEmptySubtitleMessage("TEXT")},error:function(e){d.showEmptySubtitleMessage("TEXT")}})},getSubtitlesForLG:function(){var e,t,i,s=this;"movie"===this.current_movie_type?e={tmdb_id:this.current_movie.tmdb_id}:(t=current_season.episodes[series_summary_page.keys.episode_selection],current_series.tmdb?i=current_series.tmdb:current_series.info&&current_series.info.tmdb&&(i=current_series.info.tmdb),i?(e={movie_type:"episode",season_number:current_season.season_number||series_summary_page.keys.season_selection+1,episode_number:t.episode_num||series_summary_page.keys.episode_selection+1,tmdb_id:i},t.info&&t.info.tmdb_id&&(e.episode_tmdb_id=t.info.tmdb_id)):t.info&&t.info.tmdb_id&&(e={movie_type:"episode",episode_tmdb_id:t.info.tmdb_id})),$.ajax({method:"post",url:"https://ibosub.com/api/get-subtitles-update",data:e,dataType:"json",success:function(e){s.subtitle_loading=!1,s.subtitle_loaded=!0,$("#subtitle-loader-container").hide(),"success"===e.status&&(0<e.subtitles.length?(media_player.subtitles=e.subtitles,media_player.srt_map=e.srt_map,media_player.movie_list_id=e.movie_list_id,s.renderSubtitles("TEXT",media_player.subtitles)):s.showEmptySubtitleMessage("TEXT"))},error:function(e){s.showEmptySubtitleMessage("TEXT")}})},renderSubtitles:function(e,t){var i,s,o=this,a=this.keys;0<t.length&&("subtitle_audio_selection_modal"!=a.focused_part&&(a.prev_focus=a.focused_part),"TEXT"==e?$("#subtitle-modal-title").text("Subtitle"):$("#subtitle-modal-title").text("Audio Track"),a.focused_part="subtitle_audio_selection_modal",$("#subtitle-selection-modal .modal-operation-menu-type-2").removeClass("active"),a=this.makeMediaTrackElement(t,e),$("#subtitle-selection-container").html(a),$("#subtitle-selection-modal").modal("show"),i=$("#subtitle-selection-modal .subtitle-item"),this.subtitle_audio_menus=i,$(i[0]).find("input").prop("checked",!0),this.hoverSubtitle(0),s="TEXT"===e?this.current_subtitle_index:this.current_audio_track_index,this.subtitle_audio_menus.map(function(e,t){t=parseInt($(t).find("input").val());console.log(t),t==s&&(console.log("here"+s),$(i).find("input").prop("checked",!1),$(i[e]).find("input").prop("checked",!0),o.hoverSubtitle(e))}),t=$("#subtitle-selection-modal").find(".modal-btn-2"),$(t).removeClass("active"))},showEmptySubtitleMessage:function(e){$("#subtitle-selection-modal").modal("hide"),"TEXT"===e?(this.subtitle_loaded=!1,this.subtitle_loading=!1,media_player.subtitles=[],showToast("Sorry","No Subtitles exists")):showToast("Sorry","No Audios exists");e=this.keys;"subtitle_audio_selection_modal"==e.focused_part&&(e.focused_part=e.prev_focus)},cancelSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},confirmSubtitle:function(){if($("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,$("#subtitle-modal-title").text().toLowerCase().includes("subtitle")){var t,i=this;this.current_subtitle_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val(),-1==this.current_subtitle_index||"samsung"==platform||(t=media_player.subtitles[this.current_subtitle_index].file_id.toString(),media_player.srt_map[t])?this.subtitleChanged():$.ajax({method:"post",url:"https://ibosub.com/api/get-single-subtitle-content",data:{movie_list_id:media_player.movie_list_id,file_id:t},dataType:"json",success:function(e){"success"===e.status&&(media_player.srt_map[t]=e.content,i.subtitleChanged())},error:function(e){showToast("Sorry","Something error caused while downloading subtitles for current language, please try again later")}})}else{this.current_audio_track_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val();try{media_player.setSubtitleOrAudioTrack("AUDIO",parseInt(this.current_audio_track_index))}catch(e){}console.log(this.current_audio_track_index)}},subtitleChanged:function(){try{this.show_subtitle=!0,media_player.setSubtitleOrAudioTrack("TEXT",parseInt(this.current_subtitle_index))}catch(e){}},removeAllActiveClass:function(){$(this.video_control_doms).removeClass("active"),$(this.video_info_doms).removeClass("active"),$(this.video_control_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$("#vod-series-player-page .rangeslider").removeClass("active")},showSubtitleAdjustModal:function(){var e=this.keys;this.hideControlBar(),"subtitle_adjust_selection"!=e.focused_part&&(e.prev_focus=e.focused_part),$("#subtitle-adjust-time").val(this.subtitle_adjust_time),$("#subtitle-time-adjust-modal").show(),this.hoverSubtitleAdjustBtn(0)},saveSubtitleAdjustTime:function(){var e=(e=$("#subtitle-adjust-time").val())||0;this.subtitle_adjust_time!=e&&(this.subtitle_adjust_time=e,SrtOperation.srt)&&0<SrtOperation.srt.length&&(SrtOperation.setTimeDifference(e),SrtOperation.stopOperation(),SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1),this.goBack()},hoverSubtitleAdjustBtn:function(e){var t=this.keys;t.focused_part="subtitle_adjust_selection",t.subtitle_adjust_selection=e,$(this.subtitle_adjust_items).removeClass("active"),$(this.subtitle_adjust_items[e]).addClass("active")},hoverSubtitle:function(e){var t=this.keys;t.focused_part="subtitle_audio_selection_modal",$(this.subtitle_audio_menus).removeClass("active"),0<=e?(t.subtitle_audio_selection_modal=e,t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2&&moveScrollPosition($("#subtitle-selection-container"),this.subtitle_audio_menus[t.subtitle_audio_selection_modal],"vertical",!1)):t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length+e,$(this.subtitle_audio_menus[t.subtitle_audio_selection_modal]).addClass("active")},hoverSlider:function(){$("#player-seasons-container").removeClass("expanded"),this.removeAllActiveClass(),this.keys.focused_part="slider",$("#vod-series-player-page .rangeslider").addClass("active")},hoverVideoControlIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1),this.removeAllActiveClass();var t=this.keys;t.focused_part="control_bar",t.control_bar=e,$(this.video_control_doms[e]).addClass("active")},hoverVideoInfoIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="info_bar",t.info_bar=e,$(this.video_info_doms[e]).addClass("active")},hoverEpisode:function(e){$("#player-seasons-container").addClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="episode_selection",t.episode_selection=e,$(this.episode_doms[e]).addClass("active"),moveScrollPosition($("#player-seasons-container"),this.episode_doms[t.episode_selection],"horizontal",!1)},hoverAspectRatioItem:function(e){var t=this.keys;"aspect_ratio_modal"!=t.focused_part&&(t.prev_focus=t.focused_part,t.focused_part="aspect_ratio_modal"),t.aspect_ratio_selection=e,$(this.aspect_ratio_doms).removeClass("active"),$(this.aspect_ratio_doms[e]).addClass("active"),moveScrollPosition($("#aspect-ratio-modal-body"),$(this.aspect_ratio_doms[e]),"vertical",!1)},hoverResumeBtn:function(e){var t=this.keys;t.resume_bar=e,t.focused_part="resume_bar",$(this.resume_bar_doms).removeClass("active"),$(this.resume_bar_doms[e]).addClass("active"),clearTimeout(this.resume_timer),this.resume_timer=setTimeout(function(){$("#video-resume-modal").hide(),"resume_bar"==t.focused_part?"resume_bar"!=t.prev_focus?t.focused_part=t.prev_focus:t.focused_part="info_bar":"subtitle_audio_selection_modal"===t.focused_part&&(t.prev_focus="info_bar")},15e3)},changeAspectRatio:function(e){e=e||"16:9",setTimeout(function(){try{media_player.setDisplayArea(e)}catch(e){console.log(e)}},0)},showLeavePopup:function(){this.keys.focused_part="leave_popup_selection",$("#confirm-exit-movie-popup-container").css("display","flex"),this.hoverLeavePopupBtn(1)},hideLeavePopup:function(){this.keys.focused_part="control_bar",$("#confirm-exit-movie-popup-container").hide()},hoverLeavePopupBtn:function(e){this.keys.leave_popup_selection=e,this.keys.focused_part="leave_popup_selection",$(".confirm-exit-movie-btn").removeClass("active"),$($(".confirm-exit-movie-btn")[e]).addClass("active")},exitPlayer:function(){switch(this.hideLeavePopup(),this.Exit(),this.back_url){case"vod-series-page":current_route="vod-series-page",$("#vod-series-page").removeClass("hide"),moveScrollPosition($("#vod-series-menus-container"),vod_series_page.menu_doms[vod_series_page.keys.menu_selection],"vertical",!1);break;case"vod-summary-page":current_route="vod-summary-page",$("#vod-summary-page").removeClass("hide");break;case"home-page":current_route="home-page",$("#home-page").removeClass("hide"),home_page.hoverLatestMovie(home_page.keys.latest_movie_selection,"movie");break;case"episode-page":current_route="series-summary-page",$("#series-summary-page").removeClass("hide"),series_summary_page.hoverEpisode(series_summary_page.keys.episode_selection);break;case"channel-page":channel_page.reEnter(),channel_page.hoverEpgItem(channel_page.keys.channel_selection,!0);break;case"search-page":$("#search-page").show();var e="movie"===this.current_movie_type?1:2;search_page.keys.hor_keys[e]>=search_page.movie_doms[e].length&&(search_page.keys.hor_keys[e]=search_page.movie_doms[e].length-1),search_page.hoverMovie(search_page.keys.hor_keys[e],e);break;case"catch-up-detail":$("#catchup-detail-page").removeClass("hide"),epg_page.hoverProgramme(epg_page.keys.programme_selection)}},handleMenuClick:function(){var e=this.keys;if("resume_bar"===e.focused_part&&"none"===$("#video-resume-modal").css("display")&&(e.focused_part="control_bar"),this.show_control||"control_bar"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part&&"slider"!==e.focused_part)switch(e.focused_part){case"control_bar":this.showControlBar(!1),$(this.video_control_doms[e.control_bar]).trigger("click");break;case"info_bar":this.show_control&&(this.showControlBar(!1),$(this.video_info_doms[e.info_bar]).find(".video-info-icon").trigger("click"));break;case"episode_selection":this.showControlBar(!1),$(this.episode_doms[e.episode_selection]).trigger("click");break;case"resume_bar":if($("#video-resume-modal").hide(),e.focused_part=e.prev_focus,0==e.resume_bar)if("samsung"===platform)try{webapis.avplay.getCurrentTime()<this.resume_time&&(webapis.avplay.seekTo(this.resume_time),$(this.slider_element).val(this.resume_time/1e3).change())}catch(e){}else if("lg"===platform||"vidaa"===platform||"zeasn"===platform||"titanos"===platform)try{media_player.videoObj.currentTime<this.resume_time&&(media_player.videoObj.currentTime=this.resume_time,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(this.resume_time)),0<media_player.videoObj.duration)&&$(this.slider_element).val(this.resume_time).change()}catch(e){}break;case"subtitle_audio_selection_modal":e.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).trigger("click"):($(this.subtitle_audio_menus).find("input").prop("checked",!1),$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).find("input").prop("checked",!0));break;case"subtitle_adjust_selection":0==e.subtitle_adjust_selection?$(this.subtitle_adjust_items[0]).focus():$(this.subtitle_adjust_items[e.subtitle_adjust_selection]).trigger("click");break;case"aspect_ratio_modal":$(this.aspect_ratio_doms[e.aspect_ratio_selection]).trigger("click");break;case"leave_popup_selection":1==e.leave_popup_selection&&this.exitPlayer(),0==e.leave_popup_selection&&this.hideLeavePopup()}else this.showControlBar(!0)},handleMenuLeftRight:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":this.seekTo(30*e),this.showControlBar(!1);break;case"control_bar":t.control_bar+=e,t.control_bar<0&&(t.control_bar=0),t.control_bar>=this.video_control_doms.length?(t.control_bar=this.video_control_doms.length-1,this.hoverVideoInfoIcon(0)):this.hoverVideoControlIcon(t.control_bar);break;case"info_bar":var i=3;this.is_catchup&&(i=2),t.info_bar+=e,2==t.info_bar&&"samsung"==platform&&(t.info_bar+=e),t.info_bar>i&&(t.info_bar=i),t.info_bar<0?(t.info_bar=0,this.hoverVideoControlIcon(t.control_bar)):this.hoverVideoInfoIcon(t.info_bar);break;case"episode_selection":$(this.episode_doms).removeClass("active"),t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length&&(t.episode_selection=this.episode_doms.length-1),this.hoverEpisode(t.episode_selection);break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2?0<e?this.hoverSubtitle(-1):this.hoverSubtitle(-2):(i=this.subtitle_audio_menus.length,t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<i-2&&(t.subtitle_audio_selection_modal=i-2),t.subtitle_audio_selection_modal>=i&&(t.subtitle_audio_selection_modal=i-1),this.hoverSubtitle(t.subtitle_audio_selection_modal));break;case"subtitle_adjust_selection":t.subtitle_adjust_selection=0<e?2:1,this.hoverSubtitleAdjustBtn(t.subtitle_adjust_selection);break;case"leave_popup_selection":t.leave_popup_selection+=e,1<t.leave_popup_selection&&(t.leave_popup_selection=1),t.leave_popup_selection<0&&(t.leave_popup_selection=0),this.hoverLeavePopupBtn(t.leave_popup_selection)}else this.seekTo(30*e)},handleMenuUpDown:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part&&"episode_selection"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":e<0&&this.hoverVideoControlIcon(2),this.has_episodes&&0<e&&this.hoverEpisode(t.episode_selection);break;case"control_bar":0<e&&this.hoverSlider();break;case"info_bar":0<e&&this.hoverSlider(2);break;case"episode_selection":e<0&&this.hoverSlider();break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?e<0&&(t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length-3):t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<0&&(t.subtitle_audio_selection_modal=0),this.hoverSubtitle(t.subtitle_audio_selection_modal);break;case"subtitle_adjust_selection":0<t.subtitle_adjust_selection?e<0&&this.hoverSubtitleAdjustBtn(0):0<e&&this.hoverSubtitleAdjustBtn(1);break;case"resume_bar":var i=this.resume_bar_doms;t.resume_bar+=e,t.resume_bar<0&&(t.resume_bar=0),t.resume_bar>=i.length&&(t.resume_bar=i.length-1),this.hoverResumeBtn(t.resume_bar);break;case"aspect_ratio_modal":t.aspect_ratio_selection+=e,t.aspect_ratio_selection<0&&(t.aspect_ratio_selection=0),t.aspect_ratio_selection>=this.aspect_ratio_doms.length&&(t.aspect_ratio_selection=this.aspect_ratio_doms.length-1),this.hoverAspectRatioItem(t.aspect_ratio_selection)}else this.showControlBar(!0)},HandleKey:function(e){switch(e.keyCode){case tvKey.MediaFastForward:this.seekTo(30);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.MediaRewind:this.seekTo(-30);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.MediaPause:this.playPauseVideo("pause");break;case tvKey.MediaPlay:this.playPauseVideo("play");break;case tvKey.MediaPlayPause:this.playPauseVideo("");break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:"movie"===this.current_movie_type?current_movie.is_favourite?(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),current_movie.is_favourite=!1):(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),current_movie.is_favourite=!0):current_series.is_favourite?(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),current_series.is_favourite=!1):(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),current_series.is_favourite=!0)}}},trailer_page={player:null,done:!1,back_url:"home-page",is_paused:!1,is_loading:!1,init:function(e,t){showLoader(!0),this.is_loading=!0,this.back_url=t,this.is_paused=!1,$("#vod-summary-page").addClass("hide"),$("#series-summary-page").addClass("hide"),$("#trailer-player-page").show(),current_route="trailer-page",trailer_page.player=new YT.Player("trailer-player",{height:"100%",width:"100%",videoId:e,events:{onReady:trailer_page.onPlayerReady,onStateChange:trailer_page.onPlayerStateChange}}),$("#trailer-player").on("load",function(){$("#trailer-player").contents().find(".ytp-chrome-top-buttons").hide(),$("#trailer-player").contents().find(".ytp-right-controls").hide(),showLoader(!1),trailer_page.is_loading=!1,$(document.getElementById("trailer-player").contentWindow.document).keydown(function(e){switch(e.keyCode){case tvKey.RETURN:trailer_page.goBack();break;case tvKey.RIGHT:trailer_page.seekTo(5);break;case tvKey.LEFT:trailer_page.seekTo(-5);break;case tvKey.ENTER:trailer_page.playOrPause()}})})},goBack:function(){current_route=this.back_url,this.player.stopVideo(),$("#trailer-player-page").hide(),$("#trailer-player").remove(),$("#trailer-player-page").html('<div id="trailer-player"></div>'),"vod-summary-page"===this.back_url&&$("#vod-summary-page").removeClass("hide"),"series-summary-page"===this.back_url&&$("#series-summary-page").removeClass("hide")},onPlayerReady:function(e){e.target.playVideo()},onPlayerStateChange:function(e){},seekTo:function(e){var e=this.player.getCurrentTime()+e,t=this.player.getDuration();this.player.seekTo(e=t<(e=e<0?0:e)?t:e)},playOrPause:function(){this.is_paused?this.player.playVideo():this.player.pauseVideo(),this.is_paused=!this.is_paused},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.RIGHT:this.seekTo(5);break;case tvKey.LEFT:this.seekTo(-5);break;case tvKey.ENTER:this.playOrPause()}}},series_summary_page={keys:{focused_part:"season_selection",season_selection:0,episode_selection:0},min_btn_index:0,season_doms:[],episode_doms:[],current_season_index:0,hover_season_timer:null,is_loading:!1,prev_route:"",series_video_times:{},current_series_backdrop_image:"",init:function(e){this.prev_route=e,this.current_season_index=-1,showLoader(!0),this.is_loading=!0,this.series_video_times={};for(var t=SeriesModel.saved_video_times,i=0;i<t.length;i++)if(t[i].stream_id==current_series.series_id){this.series_video_times=t[i].video_times;break}var s,r=this,e=(current_route="series-summary-page",$("#season-items-container").html(""),$("#series-summary-episode-items-container").html(""),$("#series-summary-image-wrapper img").attr("src",""),$("#series-summary-page .vod-series-background-img").attr("src",""),hideImg($("#series-summary-page .vod-series-background-img")),$("#series-summary-name").text(current_series.name),$("#series-summary-release-date").text(current_series.releasedate),$("#series-summary-release-genre").text(current_series.genre),$("#series-summary-release-length").text(current_series.duration),$("#series-summary-release-director").text(current_series.director),$("#series-summary-release-cast").text(current_series.cast),$("#series-summary-description").text(current_series.plot),$("#series-summary-image-wrapper img").attr("src",current_series.cover||HOST+"app_src_min/images/default_movie.png"),0),e=void 0===current_series.rating||""===current_series.rating?0:parseFloat(current_series.rating);isNaN(e)&&(e=0),$("#series-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#series-rating-mark").text(e.toFixed(1)),$("#vod-series-page").addClass("hide"),$("#series-summary-page").removeClass("hide"),$("#season-items-container").scrollTop(0),"xc"===settings.playlist_type?api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_series_info&series_id="+current_series.series_id,success:function(e){current_series.info=e.info;var i=e.seasons;if(e.episodes&&(i&&0<i.length||0<Object.keys(e.episodes).length)){var s=e.episodes,t=(i&&0!=i.length?i.map(function(e){e.episodes=s[e.season_number.toString()]}):(i=[],Object.keys(s).map(function(e,t){i.push({name:"Season "+(t+1),cover:HOST+"app_src_min/images/series.png",episodes:s[e]})})),i.filter(function(e){return e.episodes&&0<e.episodes.length})),o=Object.keys(s);if(o.length>t.length){for(var a=0;a<t.length;a++)t[a].name="Season "+(a+1);for(a=t.length;a<o.length;a++)t.push({name:"Season "+(a+1),episodes:s[(a+1).toString()]})}current_series.seasons=t;var n="";current_series.seasons.map(function(e,t){n+='<div class="season-item-container" onmouseenter="series_summary_page.hoverSeason('+t+')">'+e.name+"</div>"}),$("#season-items-container").html(n),r.showSeriesInfo()}else showLoader(!1),r.is_loading=!1,showToast("Sorry","No seasons available"),r.goBack()},fail:function(e){showLoader(!1),r.is_loading=!1,r.goBack()}}):"general"===settings.playlist.playlist_type&&(current_series.seasons.map(function(e){e.episodes=current_series.episodes[e.name]}),s="",current_series.seasons.map(function(e,t){s+='<div class="season-item-container"   onmouseenter="series_summary_page.hoverSeason('+t+')">'+e.name+"</div>"}),$("#season-items-container").html(s),r.showSeriesInfo())},showSeriesInfo:function(){this.season_doms=$(".season-item-container");try{this.hoverSeason(0),$("#selected-season-name").text(current_series.seasons[0].name);try{try{(e=current_series.info.backdrop_path[0])&&(this.current_series_backdrop_image=e,$("#series-summary-page .vod-series-background-img").attr("src",e).show(),$("#series-summary-page .vod-series-background-img-overlay").show())}catch(e){}}catch(e){}this.showEpisodes()}catch(e){}var e;current_series.info&&(e=current_series.info).releaseDate&&""==$("#series-summary-release-date").text()&&$("#series-summary-release-date").text(e.releaseDate),void 0!==current_series.youtube_trailer&&null!=current_series.youtube_trailer&&""!==current_series.youtube_trailer.trim()?(this.min_btn_index=0,$("#vod-watch-trailer-button").show()):(this.min_btn_index=1,$("#vod-watch-trailer-button").hide()),showLoader(!1),this.is_loading=!1},showEpisodes:function(){var e,a,n,t=this.keys;this.current_season_index!==t.season_selection&&(e=(current_season=current_series.seasons[t.season_selection]).episodes,a=this.series_video_times[t.season_selection.toString()]?this.series_video_times[t.season_selection.toString()]:{},void 0!==e&&0<e.length?(n="",e.map(function(e,t){var i,s="",o=0;a[t.toString()]&&(s="has-progress",(i=a[t.toString()]).duration)&&(o=100*parseFloat(i.time)/parseFloat(i.duration)+"%"),n+='<div class="episode-item-wrapper"                        onmouseenter="series_summary_page.hoverEpisode('+t+')"                        onclick="series_summary_page.handleMenuClick()"                    >'+(e.title||"Episode "+(t+1))+'   <div class="episode-video-duration-container">                            <div class="episode-video-duration '+s+'">                                <span class="episode-video-progress" style="width: '+o+'"></span>                            </div>                         </div>                    </div>'}),$("#series-summary-episode-items-container").html(n),$("#series-summary-episode-items-container").scrollTop(0)):(showToast("Sorry","No episodes available"),$("#series-summary-episode-items-container").html("")),t.episode_selection=0,this.episode_doms=$(".episode-item-wrapper"),$("#selected-season-name").text(current_season.name),this.current_season_index=t.season_selection)},goBack:function(){var e=this.keys;switch(e.focused_part){case"season_selection":switch(current_route=this.prev_route,$("#series-summary-page").addClass("hide"),this.prev_route){case"vod-series-page":$("#vod-series-page").removeClass("hide");break;case"search-page":$("#search-page").show();break;case"home-page":home_page.reEnter()}break;case"episode_selection":e.focused_part="season_selection",e.episode_selection=0,$(this.episode_doms).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e.season_selection]).addClass("active")}},hoverSeason:function(e){var t=this.keys,i=(t.focused_part="season_selection",t.season_selection=e,$(this.episode_doms).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e]).addClass("active"),clearTimeout(this.hover_season_timer),moveScrollPosition($("#season-items-container"),this.season_doms[t.season_selection],"vertical",!1),this);this.hover_season_timer=setTimeout(function(){i.showEpisodes()},300)},hoverEpisode:function(e){var t=this.keys;t.episode_selection=e,t.focused_part="episode_selection",$(this.season_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$(this.episode_doms[t.episode_selection]).addClass("active"),moveScrollPosition($("#series-summary-episode-items-container"),this.episode_doms[t.episode_selection],"vertical",!1)},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":0<e&&0<this.episode_doms.length&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":e<0&&this.hoverSeason(t.season_selection)}},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":t.season_selection+=e,t.season_selection<0?t.season_selection=0:t.season_selection>=this.season_doms.length?t.season_selection=this.season_doms.length-1:this.hoverSeason(t.season_selection);break;case"episode_selection":t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length?t.episode_selection=this.episode_doms.length-1:this.hoverEpisode(t.episode_selection)}},handleMenuClick:function(){var e,t=this.keys;"episode_selection"===t.focused_part&&(e=(current_season=current_series.seasons[t.season_selection]).episodes,current_episode=e[t.episode_selection],vod_series_player.init(current_episode,"series","episode-page","",!0),vod_series_player.keys.episode_selection=t.episode_selection)},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},vod_series_page={player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],category_hover_timer:null,category_hover_timeout:300,current_backdrop:"",keys:{focused_part:"category_selection",category_selection:0,menu_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,themes_modal_selection:0},category_doms:[],menu_doms:[],top_menu_doms:$("#vod-series-page .top-menu"),current_movie_type:"movie",sort_key:"vod_sort",search_key_timer:"",search_key_timout:400,current_render_count:0,render_count_increment:40,is_drawing:!1,prev_keyword:"",prev_dom:null,sort_doms:$(".sort-modal-item"),rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,rearrange_origin_position:0,is_categories_open:!0,current_category:"",movie_hover_timer:null,vod_theme:null,isTMDBAllowed:!1,init:function(e,t){this.getTMDBChoice(),this.prev_dom=null,this.is_drawing=!1;var i=this.keys,s=settings[e+"_sort"],o=($(this.top_menu_doms[0]).data("word_code",s),$(this.top_menu_doms[0]).text(current_words[s]||settings.sort_keys[s]),$(".vod-series-mark-wrapper").addClass("hide"),$("."+e+"-mark-wrapper").removeClass("hide"),home_page.exit(),$("#vod-series-page").removeClass("hide"),current_route="vod-series-page",s="vod"===(this.current_movie_type=e)?(this.sort_key="vod_sort",this.categories=VodModel.getCategories(!1,!0),current_words.movies||"Movies"):(this.sort_key="series_sort",this.categories=SeriesModel.getCategories(!1,!0),current_words.series||"Series"),$("#vod-series-page .page-title").text(s),this.setupTheme(),"");this.categories.map(function(e,t){o+='<div class="vod-series-category-item" data-index="'+t+'"                    onmouseenter="vod_series_page.hoverCategory(this)"                    onclick="vod_series_page.handleMenuClick()"                >                    <div class="floatTextWrapper">                        <div class="vod-series-category-name floatText">'+e.category_name+"</div>                    </div>                </div>"}),$("#vod-series-categories-container").html(o),this.category_doms=$(".vod-series-category-item"),i.focused_part="category_selection",i.category_selection=0,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.current_category_index=-1;for(var a=0;a<this.categories.length;a++)if(0<this.categories[a].movies.length){i.category_selection=a;break}this.showCategoryContent(),this.hoverCategory(this.category_doms[i.category_selection]),this.fetchHoverMovie(0)},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":e.focused_part="category_selection",this.hoverCategory(this.category_doms[e.category_selection]);break;case"category_selection":this.rearrange_mode?this.toggleRearrangeMode(!1):($("#vod-series-page").addClass("hide"),home_page.reEnter());break;case"top_menu_selection":$("#vod-series-search-input").blur(),this.hoverCategory(this.category_doms[e.category_selection]);break;case"sort_selection":$("#sort-modal-container").removeClass("visible"),this.hoverTopMenu(0);break;case"theme_vod_modal":$("#vod-theme-modal").modal("hide"),this.hoverTopMenu(2)}},getTMDBChoice:function(){var e=localStorage.getItem(storage_id+"tmdb_choice");this.isTMDBAllowed="off"!=e},setupTheme:function(){this.theme=localStorage.getItem(storage_id+"vod_theme"),this.theme||(this.theme="modern"),"replay"!=this.current_movie_type&&this.isTMDBAllowed||(this.theme="normal"),"normal"==this.theme?(this.keys.themes_modal_selection=0,$("#vod-series-info-container").addClass("d-none"),$("#vod-series-info-container").removeClass("d-block"),$("#vod-series-menus-container").css("height","60rem"),$("#vod-series-menus-container").css("margin-top","0")):(this.keys.themes_modal_selection=1,$("#vod-series-info-container").addClass("d-block"),$("#vod-series-info-container").removeClass("d-none"),$("#vod-series-menus-container").css("height","29rem"),$("#vod-series-menus-container").css("margin-top","29rem"))},showCategoryContent:function(){var e,t,i,s=this.keys;this.current_category_index!==s.category_selection&&(e=this.categories[s.category_selection],this.current_category=e,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.prev_keyword="",$("#vod-series-search-input").val(""),t=e.movies.filter(function(e){return!0}),i=settings[this.current_movie_type+"_sort"],this.movies=getSortedMovies(t,i),this.renderCategoryContent(),$("#vod-series-menus-container").scrollTop(0),s.menu_selection=0,this.current_category_index=s.category_selection,$("#vod-series-current-category").text(e.category_name))},renderCategoryContent:function(){var n,r,l,c,d,h="",u=HOST+"app_src_min/images/default_movie.png",_="stream_icon";"vod"!==this.current_movie_type&&(_="cover"),this.current_render_count<this.movies.length&&(showLoader(this.is_drawing=!0),n=this,setTimeout(function(){showLoader(n.is_drawing=!1)},1e3),c={},"vod"===(d=this.current_movie_type)||"movie"===d?(l=VodModel.movie_key,r=VodModel.favourite_ids,VodModel.saved_video_times.map(function(e){c[e.stream_id.toString()]=e})):(l=SeriesModel.movie_key,r=SeriesModel.favourite_ids,SeriesModel.saved_video_times.map(function(e){c[e.stream_id.toString()]=e})),this.movies.slice(this.current_render_count,this.current_render_count+this.render_count_increment).map(function(e,t){var i=r.includes(e[l]),s="",o=0,a=e[l].toString();c[a]&&(s="has-progress",(a=c[a]).duration)&&"vod"==d&&(o=100*parseFloat(a.time)/parseFloat(a.duration)+"%"),a="movie"==e.stream_type?utilities.isNewlyAdded(e.added)?"vod-new-label ":"vod-new-label hidden":utilities.isRecentlyModifiedSeries(e.last_modified)?"vod-new-label ":"vod-new-label hidden","top_rated"==n.current_category.category_id?h+='<div class="vod-series-menu-item-container top-rated" data-stream_id="'+e.stream_id+'"                        data-index="'+(n.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                       <div class="vod-series-menu-item">                      <div class="vod-series-menu-top-order"> TOP #'+(t+1)+'</div>                      <div class="'+a+'">NEW</div>'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'       <img class="vod-series-icon" src="'+e[_]+'" onerror="this.src=\''+u+'\'">                            <div class="vod-series-menu-item-title-container">                                <div class="vod-series-menu-item-title-wrapper">                                   <div class="vod-series-menu-item-title max-line-2">'+e.name+'</div>                                </div>                            </div>                            <div class="vod-series-video-duration-container">                                <div class="vod-series-video-duration '+d+" "+s+'">                                    <span class="vod-series-video-progress" style="width: '+o+'"></span>                                </div>                             </div>                        </div>                    </div>':h+='<div class="vod-series-menu-item-container" data-stream_id="'+e.stream_id+'"                        data-index="'+(n.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                       <div class="vod-series-menu-item"><div class="'+a+'">NEW</div>'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'       <img class="vod-series-icon" src="'+e[_]+'" onerror="this.src=\''+u+'\'">                            <div class="vod-series-menu-item-title-container">                                <div class="vod-series-menu-item-title-wrapper">                                   <div class="vod-series-menu-item-title max-line-2">'+e.name+'</div>                                </div>                            </div>                            <div class="vod-series-video-duration-container">                                <div class="vod-series-video-duration '+d+" "+s+'">                                    <span class="vod-series-video-progress" style="width: '+o+'"></span>                                </div>                             </div>                        </div>                    </div>'}),this.current_render_count+=this.render_count_increment,$("#vod-series-menus-container").append(h),this.menu_doms=$("#vod-series-menus-container .vod-series-menu-item-container"))},addOrRemoveFav:function(){var e,t,i,s=this.keys;"menu_selection"===s.focused_part&&(i=this.menu_doms,e=this.movies,("vod"===this.current_movie_type||"movie"===this.current_movie_type?(t=VodModel.movie_key,VodModel):(t=SeriesModel.movie_key,SeriesModel)).favourite_ids.includes(e[s.menu_selection][t])?($($(i[s.menu_selection]).find(".favourite-badge")).remove(),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).removeRecentOrFavouriteMovie(e[s.menu_selection][t],"favourite"),"favourite"===this.categories[this.current_category_index].category_id&&($(i[s.menu_selection]).remove(),0<(i=$("#vod-series-menus-container .vod-series-menu-item-container")).length?(i.map(function(e,t){$(t).data("index",e)}),this.menu_doms=i,s.menu_selection>=this.menu_doms.length&&(s.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[s.menu_selection])):this.hoverCategory(this.category_doms[s.category_selection]))):($($(i[s.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>'),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).addRecentOrFavouriteMovie(e[s.menu_selection],"favourite")))},showSortModal:function(){var i=settings[this.current_movie_type+"_sort"],s=0;this.sort_doms.map(function(e,t){$(t).data("sort_key")==i&&(s=e)}),$("#sort-modal-container").addClass("visible"),this.hoverSortItem(s)},closeSortModal:function(){$("#sort-modal-container").removeClass("visible"),"sort_selection"===this.keys.focused_part&&this.hoverTopMenu(1)},updateFavouriteOrRecentCount:function(e){for(var t=this.categories,i=0;i<t.length;i++)if(t[i].category_id==e){$(this.category_doms[i]).find(".vod-series-category-item-count").text(t[i].movies.length);break}},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_dom).removeClass("rearrange");else if(e){var e=this.keys,t="vod"==this.current_movie_type?VodModel:SeriesModel;if("category_selection"===e.focused_part){this.rearrange_mode=!0;var i=0;if("channel_selection"===e.focused_part)i=e.channel_selection;else for(var s=this.categories[e.category_selection],o=0;o<t.categories.length;o++)if(t.categories[o].category_id==s.category_id){i=o;break}this.rearrange_origin_position=i,$(this.prev_dom).addClass("rearrange")}}},changeCategoryDomContent:function(e,t,i){$(e).find(".vod-series-category-name").text(t.category_name),$(e).data("index",i)},hoverTopMenu:function(e){var t;key_focused||(this.toggleCategoriesBar(!1),(t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e])},hoverSortItem:function(e){var t;key_focused||(this.toggleCategoriesBar(!1),(t=this.keys).focused_part="sort_selection",t.sort_selection=e,$(this.prev_dom).removeClass("active"),$(this.sort_doms[e]).addClass("active"),this.prev_dom=this.sort_doms[e])},hoverCategory:function(e){var t;key_focused||(this.toggleCategoriesBar(!0),t=this.keys,e=$(e).data("index"),t.focused_part="category_selection",t.category_selection=e,$(this.prev_dom).removeClass("active"),$(this.category_doms[e]).addClass("active"),this.rearrange_mode&&($(this.prev_dom).removeClass("rearrange"),$(this.category_doms[t.category_selection]).addClass("rearrange")),this.prev_dom=this.category_doms[e],moveScrollPosition($("#vod-series-categories-container"),this.category_doms[e],"vertical",!1),applyAnimation(this.category_doms[e]))},hoverMovieItem:function(e,t){this.current_backdrop="";clearTimeout(this.channel_hover_timer);var i=this.keys,s=this,e=$(e).data("index");i.focused_part="menu_selection",i.menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.menu_doms[e]).addClass("active"),this.prev_dom=this.menu_doms[e],moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[i.menu_selection],"vertical",!1),clearTimeout(this.movie_hover_timer),this.movie_hover_timer=setTimeout(function(){s.fetchHoverMovie()},1e3),this.toggleCategoriesBar(!1)},fetchHoverMovie:function(e){var t,i,s,o,a,n=this;this.resetMovieUI(),"replay"!==this.current_movie_type&&(e=null!=e&&"number"==typeof e?this.movies[e]:this.movies[this.keys.menu_selection],s=this.getMovieUrlKey(e),this.setTitleScrolling(e.name),i=e.series_id?(t="series",e.series_id):(t="vod",e.stream_id),this.isTMDBAllowed)&&((e=this.getCachedMovieInfo(t,i))?((e=e.info)&&0!==e.length||(n.fetchHoverMovie(),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png")),this.updateMovieUI(e),o=e.tmdb_id||e.tmdb,e.backdrop_path&&0<e.backdrop_path.length&&(a=e.backdrop_path[0]),this.fetchMovieImages(o,a||HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-image").fadeIn()):api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+s,success:function(e){n.handleMovieResponse(e,t,i),$("#movie-image").fadeIn()},error:function(e){n.handleFetchError(e)}}),this.resetScrollPosition(),$("#vod-series-info-container").css("opacity",1))},resetMovieUI:function(){$("#movie-log-title").hide(),$("#vod-img-bg").css("opacity",0),$("#vod-series-info-container .movie-info").hide(),$("#vod-series-info-container").css("opacity",0);["#movie-title","#movie-synopsis","#movie-cast","#release-data","#director","#duration","#genre","#rate"].forEach(function(e){$(e).text("")}),$("#movie-title").text(this.movies[this.keys.menu_selection].name),$("#rate").text(this.movies[this.keys.menu_selection].rating),$("#movie-image").hide().attr("src","")},getMovieUrlKey:function(e){return"series"===this.current_movie_type?"&action=get_series_info&series_id="+e.series_id:"&action=get_vod_info&vod_id="+e.stream_id},setTitleScrolling:function(e){50<e.length?$("#movie-title").css({"padding-left":"100%",animation:"scroll-left 20s linear infinite"}):$("#movie-title").css({"padding-left":"",animation:""})},handleMovieResponse:function(e,t,i){var s,e=e.info;e&&0!==e.length&&(this.updateMovieUI(e),this.cacheMovieInfo(t,i,e),t=e.tmdb_id||e.tmdb,e.backdrop_path&&0<e.backdrop_path.length&&(s=e.backdrop_path[0]),this.fetchMovieImages(t,s||HOST+"app_src_min/images/default_movie_bg.png"))},updateMovieUI:function(e){$("#movie-title").text(e.name).show(),!e.backdrop_path&&e.movie_image&&(e.backdrop_path=e.movie_image),$("#movie-image").attr("src",e.backdrop_path).css("opacity",1),$("#movie-synopsis").text(e.description||e.plot),$("#movie-cast").text(e.cast),$("#release-data").text(e.releasedate||e.releaseDate),$("#director").text(e.director),$("#duration").text(e.duration),$("#genre").text(e.genre),$("#rate").text(Math.round(10*e.rating)/10),this.toggleCircle("#movie-cast",e.cast),this.toggleCircle("#release-data",e.releasedate||e.releaseDate),this.toggleCircle("#director",e.director),this.toggleCircle("#duration",e.duration),this.toggleCircle("#genre",e.genre),$("#vod-series-info-container .movie-info").show()},toggleCircle:function(e,t){$(e).siblings(".circle").toggle(!!t)},handleFetchError:function(e){console.error("fetchHoverMovie",e),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png").show()},resetScrollPosition:function(){},fetchMovieImages:function(e,t){var i,s=this,o=(e||t||$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-log-title").attr("src",""),"series"===this.current_movie_type?"/tv/"+e+"/images?api_key="+tmdb_api_key:"/movie/"+e+"/images?api_key="+tmdb_api_key);return e?(i="series"==this.current_movie_type?"series":"movies",$.ajax({url:IBO_TMDB_URL+"/api/"+i+"/images/show/"+e,type:"GET",headers:{Authorization:"Bearer "+IBO_TMDB_TOKEN}}).then(function(e){return e.data}).fail(function(e){return $.getJSON(tmdb_prefix_url+o).then(function(e){return console.log("Official TMDB API success:",e),e}).then(s.handleImageResponse.bind(s,t)).then(function(){$("#vod-series-info-container .movie-info").show()}).fail(function(e){return console.log("Official TMDB API failed:",e),null})}).then(this.handleImageResponse.bind(this,t)).then(function(){$("##vod-series-info-container .movie-info").show()})):$.Deferred().resolve().promise()},handleImageResponse:function(e,t){t.backdrops&&0<t.backdrops.length&&(e=tmdb_img_url+"w1280"+t.backdrops[0].file_path,this.current_backdrop=e);var i,s=t.logos&&0<t.logos.length?tmdb_img_url+"w500"+t.logos[0].file_path:null;if(s?($(".title-container").css("margin-bottom","1rem"),$("#movie-log-title").attr("src",s).show(),$("#movie-title").hide()):($(".title-container").css("margin-bottom","0"),$("#movie-log-title").hide(),$("#movie-title").show()),$("#vod-series-info-container .movie-info").show(),$("#movie-image").attr("src",e).css("opacity",1),$(".vod-series-summary-section-img-darken").show(),$("#vod-img-bg").css("opacity",1),i=i||("series"==this.current_movie_type?"series":"movies"),!t.tmdbId)return $.ajax({url:IBO_TMDB_URL+"/api/"+i+"/images/store",type:"POST",headers:{Authorization:"Bearer "+IBO_TMDB_TOKEN},data:{tmdbId:t.tmdbId||t.id,backdrops:t.backdrops,logos:t.logos,posters:t.posters}}).then(function(e){return console.log("TMDB Images stored to server",e),e}).fail(function(e,t,i){console.log("Error storing TMDB Images to server:",i)})},cacheMovieInfo:function(e,t,i,s,o){var e=e+t,t=(i=utilities.pickProperties(i,["name","duration","cover","cover_big","movie_image","releasedate","releaseDate","director","actors","cast","description","plot","genre","rating","backdrop_path","tmdb","tmdb_id"]),Object.keys(storageMoviesInfo));t&&0!=t.length||(storageMoviesInfo.host_url=api_host_url),100<=t.length&&(t=t[1],delete storageMoviesInfo[t]),storageMoviesInfo[e]={info:i,logo:s,bg:o},localStorage.setItem(storage_id+"saved-movie-info",JSON.stringify(storageMoviesInfo))},getCachedMovieInfo:function(e,t){return storageMoviesInfo&&storageMoviesInfo!={}?storageMoviesInfo[e+t]:null},showThemeModal:function(){var e;this.isTMDBAllowed?(this.keys.focused_part="theme_vod_modal",$("#vod-theme-modal").modal("show"),e=this.keys.themes_modal_selection,this.modal_visible=!0,$("#vod-theme-modal .vod-theme").removeClass("current"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("current")}),this.updateModalFocus()):showToast("Sorry","Theme cannot be changed unless TMDB is allowed in settings.")},hideThemeModal:function(){this.keys.focused_part="menu_selection",$("#vod-theme-modal").modal("hide"),this.modal_visible=!1},updateModalFocus:function(){var e=this.keys.themes_modal_selection;$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")})},handleModalSelection:function(e){0==(this.keys.themes_modal_selection=e)?(localStorage.setItem(storage_id+"vod_theme","normal"),this.vod_theme="normal"):(localStorage.setItem(storage_id+"vod_theme","modern"),this.vod_theme="modern"),this.setupTheme(),this.hideThemeModal()},hoverThemeVod:function(e){$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")}),this.keys.themes_modal_selection=e},toggleCategoriesBar:function(e){void 0!==e&&(1==e?($("#vod-series-page").addClass("categories-open"),this.is_categories_open=!0):($("#vod-series-page").removeClass("categories-open"),this.is_categories_open=!1))},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":("vod"===this.current_movie_type?(current_movie=this.movies[e.menu_selection],vod_summary_page):(current_series=this.movies[e.menu_selection],series_summary_page)).init("vod-series-page");break;case"top_menu_selection":switch(e.top_menu_selection){case 0:this.showSortModal();break;case 1:search_page.init("vod-series-page",this.current_movie_type);break;case 2:this.showThemeModal()}break;case"category_selection":var t=this.categories[e.category_selection];this.current_category_index!=e.category_selection&&(checkForAdult(t,"category",[])?parent_confirm_page.init(current_route):(this.showCategoryContent(),this.toggleRearrangeMode(!1)));break;case"sort_selection":this.current_category_index=-1;t=$(this.sort_doms[e.sort_selection]).data("sort_key");settings.saveSettings(this.current_movie_type+"_sort",t,""),$(this.top_menu_doms[0]).data("word_code",t),$(this.top_menu_doms[0]).text(current_words[t]||settings.sort_keys[t]),this.showCategoryContent(),this.goBack();break;case"theme_vod_modal":this.handleModalSelection(e.themes_modal_selection)}},handleMenusUpDown:function(e){var t=this.keys,i=this.menu_doms;switch($("#vod-series-search-input").blur(),t.focused_part){case"category_selection":var s=t.category_selection;if(t.category_selection+=e,t.category_selection<0)t.category_selection=0,this.hoverCategorySearch();else if(t.category_selection>=this.category_doms.length)t.category_selection=this.category_doms.length-1;else{if(this.rearrange_mode&&s!=t.category_selection){for(var o=this.categories[s],a=this.categories[t.category_selection],n=(this.changeCategoryDomContent(this.category_doms[s],a,s),this.changeCategoryDomContent(this.category_doms[t.category_selection],o,t.category_selection),this.category_doms=$(".vod-series-category-item"),this.rearrange_timer&&(clearTimeout(this.rearrange_timer),this.rearrange_timer=null),0),r=null,r="vod"==this.current_movie_type?VodModel:SeriesModel,l=0;l<r.categories.length;l++)if(a.category_id==r.categories[l].category_id){n=l;break}r.categories=makeRearrangeArray(r.categories,this.rearrange_origin_position,n),this.rearrange_origin_position=n,this.categories=r.getCategories(!1,!0),this.rearrange_timer=setTimeout(function(){for(var e=r.category_orders,t=0;t<e.length;t++)if(e[t].id==o.category_id){e.splice(t,1);break}e.push({id:o.category_id,position:n}),e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_"+r.stream_type+"_category_orders",JSON.stringify(e)),r.category_orders=e,r.updateRecentAndFavouritePosition()},this.rearrange_timeout)}this.hoverCategory(this.category_doms[t.category_selection])}break;case"menu_selection":s=t.menu_selection;t.menu_selection<5&&e<0?(t.menu_selection=s,this.hoverTopMenu(0)):checkVerticalMovable(this.menu_doms.length,4,t.menu_selection,e)&&(t.menu_selection+=5*e,t.menu_selection>=i.length&&(t.menu_selection=i.length-1),t.menu_selection>=this.current_render_count-6&&this.renderCategoryContent(),this.hoverMovieItem(this.menu_doms[t.menu_selection]));break;case"top_menu_selection":if(0<e){if($("#vod-series-search-input").blur(),0==this.menu_doms.length)return;t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),4<t.menu_selection&&(t.menu_selection=0),this.hoverMovieItem(this.menu_doms[t.menu_selection])}break;case"sort_selection":t.sort_selection+=e,t.sort_selection<0&&(t.sort_selection=0),t.sort_selection>=this.sort_doms.length&&(t.sort_selection=this.sort_doms.length-1),this.hoverSortItem(t.sort_selection);case"theme_vod_modal":0<e?this.hoverThemeVod(1):this.hoverThemeVod(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&(0<this.movies.length?(this.toggleRearrangeMode(!1),this.hoverMovieItem(this.menu_doms[t.menu_selection])):$("#vod-series-search-input").val()&&(this.toggleRearrangeMode(!1),this.hoverTopMenu(0)));break;case"menu_selection":t.menu_selection%5==0&&e<0?this.hoverCategory(this.category_doms[t.category_selection]):(t.menu_selection+=e,t.menu_selection<0?(t.menu_selection=0,this.hoverCategory(this.category_doms[t.category_selection])):(t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[t.menu_selection]),0<e&&t.menu_selection>=this.current_render_count-6&&this.renderCategoryContent()));break;case"top_menu_selection":key_focused||(t.top_menu_selection+=e,t.top_menu_selection<0?this.hoverCategory(this.category_doms[t.category_selection]):(2<t.top_menu_selection&&(t.top_menu_selection=2),this.hoverTopMenu(t.top_menu_selection)))}},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case 65376:case 65385:$("input").blur();break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:this.showNextChannel(1);break;case tvKey.CH_DOWN:this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.YELLOW:this.addOrRemoveFav();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:this.playOrPause();break;case tvKey.RED:return void this.toggleRearrangeMode(!0);case tvKey.GREEN:this.showThemeModal();break;case tvKey.BLUE:search_page.init("vod-series-page",this.current_movie_type);break;default:console.log("No matching")}}},settings_page={keys:{focused_part:"settings_selection",settings_selection:0,parental_control_tabs_selection:0,current_parental_control_tab_selection:0,parental_control_selection:0,hide_categories_tabs_selection:0,current_hide_categories_tabs_selection:0,hide_categories_selection:0,change_language_selection:0,stream_format_selection:0,clear_cache_selection:0,clear_watch_lists_selection:0,subtitle_selection:0,toggle_tmdb_selection:0,toggle_home_favorites_selection:0,live_initialization_selection:0,live_layout_selection:0,smart_proxy_selection:0,smart_proxy_region_selection:0,current_smart_proxy_region:0,current_smart_proxy_server:0},transparency_mode:!1,subtitle_bg_options:{black:{color:"#fff",background:"#000"},white:{color:"#000",background:"#fff"},yellow:{color:"#000000",background:"#d6a330"},transparent:{color:"#fff",background:"transparent"}},doms_translated:[],tried_panel_indexes:[],settings_doms:$(".settings-page-option"),settings_options_doms:$(".setting-option-container"),parental_control_tab_items:$("#parental-control-settings .setting-tab"),hide_categories_tabs_items:$("#hide-categories-settings .setting-tab"),hide_categories_live_items:$("#hide_categories_live_container .setting-select-multi-option"),hide_categories_movies_items:$("#hide_categories_movies_container .setting-select-multi-option"),hide_categories_series_items:$("#hide_categories_series_container .setting-select-multi-option"),change_language_items:$("#stream-format-settings .setting-select-option"),stream_format_items:$("#stream-format-settings .setting-select-option"),clear_cache_items:$("#clear-cache-settings .setting-select-option"),clear_watch_lists_items:$("#clear-watch-lists-settings .setting-select-option"),subtitle_items:$("#subtitle-settings .settings-multi-value-option"),toggle_tmdb_items:$("#toggle-tmdb-settings .setting-select-option"),toggle_home_favorites_items:$("#toggle-home-favorites-settings .setting-select-option"),live_initialization_items:$("#live-initialization-settings .setting-select-option"),live_layout_items:$("#live-layout-settings .setting-select-option"),smart_proxy_items:$("#smart-proxy-settings .active-proxy-choice"),smart_proxy_connection_state:!1,isProxyCheckDisabled:!1,current_proxy_selections:{region:0,country:0,server:0},init:function(){$("#home-page").addClass("hide"),$("#settings-page").css("display","flex"),current_route="settings-page",$(this.settings_doms).removeClass("current"),$(this.settings_options_doms).hide(),this.createCategoriesDoms(),this.loadSmartProxySettings(),this.hoverSettingsItem(0)},goBack:function(){var e=this.keys;switch(e.focused_part){case"hide_categories":e.hide_categories_selection=0,this.hoverHideCategoriesTab(e.hide_categories_tabs_selection);break;case"subtitle_option":this.hoverSubtitleOption(e.subtitle_selection);break;case"smart_proxy_option":this.hoverSmartProxyOption(e.smart_proxy_selection);break;default:this.keys.focused_part="settings_selection",$("#settings-page").css("display","none"),$("#home-page").removeClass("hide"),current_route="home-page"}},updateActiveClass:function(e,t){e.removeClass("active").eq(t).addClass("active")},handleScrolling:function(e,t,i,s){s=!s;moveScrollPosition($(e),$(t[i]),"vertical",s)},hoverOption:function(e,t,i,s){console.log("Hovering index",i),this.updateActiveClass(t,i),this.handleScrolling(e,t,i,s)},hoverSettingsItem:function(e,t){$("#proxy-sub-confirmation-btn").removeClass("active"),key_focused||(t&&t.removeClass("active"),(t=this.keys).focused_part="settings_selection",this.updateActiveClass(this.settings_doms,t.settings_selection=e),1==this.transparency_mode&&(this.transparency_mode=!1,$("#settings-page").css("opacity",1)))},clickSettingsItem:function(e){var t=this.keys;switch(e="number"==typeof e?e:t.settings_selection,$(this.settings_doms).removeClass("current").removeClass("active").eq(e).addClass("current"),$(this.settings_options_doms).hide().eq(e).show(),t.settings_selection){case 0:this.setupChangeLanguageOptions(),this.hoverChangeLanguageOption(t.change_language_selection);break;case 1:this.setupHideCategoriesOptions(),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);break;case 2:this.setupParentalControlOptions();break;case 3:this.setupStreamFormatOptions(),this.hoverStreamFormatOption(t.stream_format_selection);break;case 4:this.hoverClearCacheOption(t.clear_cache_selection);break;case 5:this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case 6:this.setupSubtitleOptions(),this.hoverSubtitleOption(t.subtitle_selection);break;case 7:this.setupToggleTMDBOptions(),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case 8:this.setupToggleHomeFavoritesOptions(),this.hoverToggleHomeFavoritesOption(t.toggle_home_favorites_selection);break;case 9:this.setupLiveInitializationOptions(),this.hoverLiveInitializationOption(t.live_initialization_selection);break;case 10:this.setupLiveLayoutOptions(),this.hoverLiveLayoutOption(t.live_layout_selection);break;case 11:this.setupSmartProxyOptions(),this.hoverSmartProxyOption(t.smart_proxy_selection)}},setupParentalControlOptions:function(){var e=this.keys;e.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("current"),$("#settings-parental-control-off").hide(),"off"==parent_account_password?($("#parental-control-settings .setting-tabs-container").hide(),$("#settings-parental-control-change").hide(),$("#settings-parental-control-on").show(),e.current_parental_control_tab_selection=-1,this.hoverParentalControlOption(0)):($("#parental-control-settings .setting-tabs-container").show(),$("#settings-parental-control-change").show(),$("#settings-parental-control-on").hide(),e.current_parental_control_tab_selection=0,e.parental_control_tabs_selection=0,this.hoverParentalControlTab(e.parental_control_tabs_selection),this.clickParentalControlTab(e.current_parental_control_tab_selection))},resetParentalControlStyles:function(){$("#parental-control-settings .settings-input").removeClass("active"),$("#settings-parental-control-off-button").removeClass("active"),$("#settings-parental-control-on-button").removeClass("active")},hoverParentalControlTab:function(e){var t;key_focused||((t=this.keys).focused_part="parental_control_tabs",this.resetParentalControlStyles(),this.updateActiveClass(this.parental_control_tab_items,e),t.parental_control_tabs_selection=e)},clickParentalControlTab:function(e){var t=this.keys;switch(t.parental_control_tabs_selection=e,t.current_parental_control_tab_selection=e,$(this.parental_control_tab_items).removeClass("current").eq(e).addClass("current"),$("#settings-parental-control-change").hide(),$("#settings-parental-control-off").hide(),$("#settings-parental-control-on").hide(),$("#change-parental-validation-error").text(""),$("#turn-off-parental-validation-error").text(""),$("#turn-on-parental-validation-error").text(""),e){case 0:$("#settings-parental-control-change").show();break;case 1:$("#settings-parental-control-off").show()}},hoverParentalControlOption:function(e){if(!key_focused){var t=this.keys;switch(t.focused_part="parental_control",t.parental_control_selection=e,$(this.parental_control_tab_items).removeClass("active"),this.resetParentalControlStyles(),t.current_parental_control_tab_selection){case 0:t.parental_control_selection<3?$($("#settings-parental-control-change .settings-input")[e]).addClass("active"):3==t.parental_control_selection&&$("#settings-parental-control-change-button").addClass("active");break;case 1:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password-off").addClass("active");break;case 1:$("#settings-parental-control-off-button").addClass("active")}break;case-1:switch(t.parental_control_selection){case 0:$("#settings-create-parental-password").addClass("active");break;case 1:$("#settings-parental-control-on-button").addClass("active")}}}},clickParentalControlOption:function(e){var t=this.keys;switch(t.parental_control_selection=e,$("#settings-current-parental-password").removeClass("active"),$("#settings-new-parental-password").removeClass("active"),$("#settings-confirm-parental-password").removeClass("active"),t.current_parental_control_tab_selection){case 0:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password").focus().addClass("active");break;case 1:$("#settings-new-parental-password").focus().addClass("active");break;case 2:$("#settings-confirm-parental-password").focus().addClass("active");break;case 3:this.submitParentalControlChangePassword()}break;case 1:switch(t.parental_control_selection){case 0:$("#settings-current-parental-password-off").focus().addClass("active");break;case 1:this.submitParentalControlTurnOff()}break;case-1:switch(t.parental_control_selection){case 0:$("#settings-create-parental-password").focus().addClass("active");break;case 1:this.submitParentalControlTurnOn()}}},submitParentalControlChangePassword:function(){var e=$("#change-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password").val()),i=$("#settings-new-parental-password").val(),s=$("#settings-confirm-parental-password").val();""==t||""==i||""==s?e.text("Please fill all fields"):t!=parent_account_password?e.text("Current password is incorrect"):i!=s?e.text("New passwords do not match"):i.length<4?$("#change-parental-validation-error").text("Password must be 4 digits"):(parent_account_password=i,localStorage.setItem(storage_id+"parent_account_password",i),showToast("Successful","Parental control password changed successfully!"),this.clearParentChangePasswordInputs())},submitParentalControlTurnOff:function(){var e=$("#turn-off-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password-off").val());""==t?e.text("Please enter the current password"):t!=parent_account_password?e.text("Current password is incorrect"):(parent_account_password="off",localStorage.setItem(storage_id+"parent_account_password","off"),showToast("Successful","Parental control turned off."),this.clearParentChangePasswordInputs(),this.setupParentalControlOptions())},submitParentalControlTurnOn:function(){var e=$("#turn-on-parental-validation-error"),t=(e.text(""),$("#settings-create-parental-password").val());""==t?e.text("Please enter the new password"):t.length<4?e.text("Password must be 4 digits"):(parent_account_password=t,localStorage.setItem(storage_id+"parent_account_password",t),showToast("Successful","Parental control turned on"),this.clearParentChangePasswordInputs(),this.setupParentalControlOptions())},clearParentChangePasswordInputs:function(){$("#change-parental-validation-error").val(""),$("#settings-current-parental-password").val(""),$("#settings-new-parental-password").val(""),$("#settings-confirm-parental-password").val(""),$("#settings-current-parental-password-off").val(""),$("#settings-create-parental-password").val("")},createCategoriesDoms:function(){var e,t={live:LiveModel.getCategories(!0,!1),movies:VodModel.getCategories(!0,!1),series:SeriesModel.getCategories(!0,!1)},i={live:"",movies:"",series:""};for(e in t){var s=t[e];if(0!=s.length)for(var o=0;o<s.length;o++)i[e]+='        <div           class="setting-select-multi-option '+(s[o].is_hide?"":"checked")+'"          onmouseenter="settings_page.hoverHideCategoriesOption('+o+', true)"          onclick="settings_page.handleMenuClick()"        >          '+s[o].category_name+"        </div>"}var a=$("#hide-categories-settings .setting-select-multi-options");$(a[0]).html(i.live),$(a[1]).html(i.movies),$(a[2]).html(i.series),this.hide_categories_live_items=$("#hide_categories_live_container .setting-select-multi-option"),this.hide_categories_movies_items=$("#hide_categories_movies_container .setting-select-multi-option"),this.hide_categories_series_items=$("#hide_categories_series_container .setting-select-multi-option")},setupHideCategoriesOptions:function(){var e=this.keys;e.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("current"),$("#hide_categories_movies_container").hide(),$("#hide_categories_series_container").hide(),this.clickHideCategoriesTab(e.current_hide_categories_tabs_selection)},hoverHideCategoriesTab:function(e){var t=this.keys;t.focused_part="hide_categories_tabs",this.updateActiveClass(this.hide_categories_tabs_items,e),$(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),t.hide_categories_tabs_selection=e},clickHideCategoriesTab:function(e){var t=this.keys;switch(t.hide_categories_tabs_selection=e,t.current_hide_categories_tabs_selection=e,t.hide_categories_selection=0,$(this.hide_categories_tabs_items).removeClass("current").eq(e).addClass("current"),$("#hide_categories_live_container").hide(),$("#hide_categories_movies_container").hide(),$("#hide_categories_series_container").hide(),e){case 0:$("#hide_categories_live_container").show();break;case 1:$("#hide_categories_movies_container").show();break;case 2:$("#hide_categories_series_container").show()}},hoverHideCategoriesOption:function(e,t){var i=this.keys;switch(i.focused_part="hide_categories",$(this.hide_categories_tabs_items).removeClass("active"),i.hide_categories_selection=e,i.current_hide_categories_tabs_selection){case 0:this.hoverOption("#hide_categories_live_container",this.hide_categories_live_items,i.hide_categories_selection,t);break;case 1:this.hoverOption("#hide_categories_movies_container",this.hide_categories_movies_items,i.hide_categories_selection,t);break;case 2:this.hoverOption("#hide_categories_series_container",this.hide_categories_series_items,i.hide_categories_selection,t)}},clickHideCategoriesOption:function(e){var t=[];switch(this.keys.current_hide_categories_tabs_selection){case 0:t=LiveModel.getCategories(!0,!1),LiveModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_live_items[e]),t[e].is_hide);break;case 1:t=VodModel.getCategories(!0,!1),VodModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_movies_items[e]),t[e].is_hide);break;case 2:t=SeriesModel.getCategories(!0,!1),SeriesModel.saveHiddenCategories(e,!t[e].is_hide),this.toggleCategoryItem($(this.hide_categories_series_items[e]),t[e].is_hide)}},toggleCategoryItem:function(e,t){t?e.removeClass("checked"):e.addClass("checked")},getSelectedLanguageWords:function(e){for(var t={},i=0;i<languages.length;i++)if(languages[i].code===e){t=languages[i].words;break}current_words=t},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language),this.doms_translated.map(function(e,t){var i=$(t).data("word_code");void 0!==current_words[i]&&$(t).text(current_words[i])})},setupChangeLanguageOptions:function(){for(var e=0,t=languages.length,i=0;i<t;i++)if(languages[i].code===settings.language){e=i;break}$(this.change_language_items).removeClass("current").eq(e).addClass("current")},hoverChangeLanguageOption:function(e,t){var i=this.keys;i.focused_part="change_language",i.change_language_selection=e,this.hoverOption("#settings-languages-options",this.change_language_items,i.change_language_selection,t)},clickChangeLanguageOption:function(e){void 0!==languages[e]&&(settings.saveSettings("language",languages[e].code,""),this.changeDomsLanguage(),$(this.change_language_items).removeClass("current").eq(e).addClass("current"))},setupStreamFormatOptions:function(){var e={default:0,ts:1,m3u8:2}[settings.stream_format]||0;$(this.stream_format_items).removeClass("current").eq(e).addClass("current")},hoverStreamFormatOption:function(e){var t=this.keys;t.focused_part="stream_format",this.updateActiveClass(this.stream_format_items,e),t.stream_format_selection=e},clickStreamFormatOption:function(e){settings.saveSettings("stream_format",["default","ts","m3u8"][e],""),$(this.stream_format_items).removeClass("current").eq(e).addClass("current")},hoverClearCacheOption:function(e){var t=this.keys;t.focused_part="clear_cache",this.updateActiveClass(this.clear_cache_items,e),t.clear_cache_selection=e},clickClearCacheOption:function(){clear_cache_page.handleMenuClick(!0)},hoverClearWatchListOption:function(e){var t=this.keys;t.focused_part="clear_watch_lists",this.updateActiveClass(this.clear_watch_lists_items,e),t.clear_watch_lists_selection=e},clickClearWatchListsOption:function(e){switch(this.keys.clear_watch_lists_selection){case 0:clear_recent_page.handleMenuClick("vod");break;case 1:clear_recent_page.handleMenuClick("series")}},setupSubtitleOptions:function(){$(this.subtitle_items).removeClass("current"),this.updateSubtitleSize(settings.subtitle_size),this.updateSubtitleBackground(settings.subtitle_bg)},updateSubtitleSize:function(e){$(".subtitle-container").css({"font-size":e/16+"rem"}),$("#subtitle-settings-preview-text").css("font-size",e/16+"rem"),$(this.subtitle_items[0]).find(".settings-multi-value-option-value").text(e+"px"),settings.subtitle_size=e,settings.saveSettings("subtitle_size",e,"")},updateSubtitleBackground:function(e){$(".subtitle-container").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$("#subtitle-settings-preview-text").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$(this.subtitle_items[1]).find(".settings-multi-value-option-value").text(e),settings.subtitle_bg=e,settings.saveSettings("subtitle_bg",e,"")},hoverSubtitleOption:function(e){$(this.subtitle_items).removeClass("current");var t=this.keys;t.focused_part="subtitle",this.updateActiveClass(this.subtitle_items,t.subtitle_selection=e)},clickSubtitleOption:function(e){this.keys.focused_part="subtitle_option",$(this.subtitle_items).removeClass("current").eq(e).addClass("current")},handleSubtitleSettingChange:function(e){var t=this.keys,i=Number(settings.subtitle_size),s=settings.subtitle_bg,o=Object.keys(this.subtitle_bg_options);switch(t.subtitle_selection){case 0:this.updateSubtitleSize(i=80<(i=(i+=5*e)<20?20:i)?80:i);break;case 1:var a=o.indexOf(s)+e,a=o[a=(a=a<0?o.length-1:a)>=o.length?0:a];this.updateSubtitleBackground(a)}},setupToggleTMDBOptions:function(){var e={off:0,on:1}[settings.tmdb_choice]||0;$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},hoverToggleTMDBOption:function(e){var t=this.keys;t.focused_part="toggle_tmdb",this.updateActiveClass(this.toggle_tmdb_items,e),t.toggle_tmdb_selection=e},clickToggleTMDBOption:function(e){settings.saveSettings("tmdb_choice",["off","on"][e],""),$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},setupToggleHomeFavoritesOptions:function(){var e={off:0,on:1}[settings.home_favorites_choice]||0;$(this.toggle_home_favorites_items).removeClass("current").eq(e).addClass("current")},hoverToggleHomeFavoritesOption:function(e){var t=this.keys;t.focused_part="toggle_home_favorites",this.updateActiveClass(this.toggle_home_favorites_items,e),t.toggle_home_favorites_selection=e},clickToggleHomeFavoritesOption:function(e){settings.saveSettings("home_favorites_choice",["off","on"][e],""),$(this.toggle_home_favorites_items).removeClass("current").eq(e).addClass("current"),home_page.setLiveFavoritesChoice()},setupLiveInitializationOptions:function(){var e={default:0,last:1,favorite:2}[settings.live_initialization_choice]||0;$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},hoverLiveInitializationOption:function(e){var t=this.keys;t.focused_part="live_initialization",this.updateActiveClass(this.live_initialization_items,e),t.live_initialization_selection=e},clickLiveInitializationOption:function(e){settings.saveSettings("live_initialization_choice",["default","last","favorite"][e],""),$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},setupLiveLayoutOptions:function(){var e=parseInt(localStorage.getItem(storage_id+"live_layout"));void 0===(e=e<0||2<e?1:e)&&(e=1),$(this.live_layout_items).removeClass("current").eq(e).addClass("current")},hoverLiveLayoutOption:function(e){var t=this.keys;t.focused_part="live_layout",this.updateActiveClass(this.live_layout_items,e),t.live_layout_selection=e},clickLiveLayoutOption:function(e){localStorage.setItem(storage_id+"live_layout",e),$(this.live_layout_items).removeClass("current").eq(e).addClass("current")},loadSmartProxySettings:function(){this.smart_proxy_connection_state=settings.smart_proxy_connection_state,this.current_proxy_selections={region:settings.smart_proxy_region,country:settings.smart_proxy_country,server:settings.smart_proxy_server},console.log("Loading smart proxy settings:",{connection_state:this.smart_proxy_connection_state,selections:this.current_proxy_selections,settings_values:{region:settings.smart_proxy_region,country:settings.smart_proxy_country,server:settings.smart_proxy_server}}),"function"==typeof updateProxyURL&&updateProxyURL()},saveSmartProxySettings:function(){var e;settings.saveSettings("smart_proxy_connection_state",this.smart_proxy_connection_state,""),settings.saveSettings("smart_proxy_region",this.current_proxy_selections.region,""),settings.saveSettings("smart_proxy_country",this.current_proxy_selections.country,""),settings.saveSettings("smart_proxy_server",this.current_proxy_selections.server,""),"function"==typeof updateProxyURL&&updateProxyURL(),this.smart_proxy_connection_state?($($(".home-proxy-info-container")[0]).show(),e=this.current_proxy_selections,e=proxyAvailableServers[e.region].Countries[e.country],$("#country-name").text(e.CountryName),$("#proxy-country-img").attr("src",e.CountryImage)):$($(".home-proxy-info-container")[0]).hide(),this.sendServerChangeRequest()},sendServerChangeRequest:function(){var e;this.current_proxy_selections&&proxyAvailableServers&&0!==proxyAvailableServers.length&&(e=this.current_proxy_selections,e={ServerIP:proxyAvailableServers[e.region].Countries[e.country].Servers[0],DeviceMac:mac_address},$.ajax({url:STARARCS_URL+"/api/tv/country/change",type:"POST",data:e,success:function(e){console.log("Server change request successful:",e)},error:function(e,t,i){console.error("Server change request failed:",i)}}))},setupSmartProxyOptions:function(){"Success"==proxySubscriptionStatus?($("#proxy-not-active").hide(),$("#proxy-active").show(),this.smart_proxy_connection_state=settings.smart_proxy_connection_state,this.validateProxySelections(),this.smart_proxy_connection_state?($("#smart-proxy-settings .settings-multi-value-option").show(),$($(".settings-toggle-switch-value")[0]).addClass("on").removeClass("off")):($("#smart-proxy-settings .settings-multi-value-option").hide(),$($(".settings-toggle-switch-value")[0]).removeClass("on").addClass("off")),this.updateSmartProxyDisplayValues()):($("#proxy-active").hide(),$("#proxy-not-active").show(),generateQRCode(proxyUrl,$("#proxy-sub-qr-container")))},validateProxySelections:function(){var e,t,i,s,o,a;proxyAvailableServers&&0!==proxyAvailableServers.length&&(t=(e=this.current_proxy_selections).region,i=e.country,s=e.server,o=!1,(e.region>=proxyAvailableServers.length||e.region<0)&&(o=!(e.region=0)),(a=proxyAvailableServers[e.region]).Countries&&0<a.Countries.length?((e.country>=a.Countries.length||e.country<0)&&(o=!(e.country=0)),(a=a.Countries[e.country]).Servers&&0<a.Servers.length?(e.server>=a.Servers.length||e.server<0)&&(o=!(e.server=0)):0!==e.server&&(o=!(e.server=0))):0===e.country&&0===e.server||(e.country=0,o=!(e.server=0)),o)&&(console.log("Proxy selections were out of bounds and corrected:",{original:{region:t,country:i,server:s},corrected:{region:e.region,country:e.country,server:e.server}}),this.saveSmartProxySettings())},updateSmartProxyDisplayValues:function(){var e,t;proxyAvailableServers&&0!==proxyAvailableServers.length&&(e=this.current_proxy_selections,t=proxyAvailableServers[e.region],$(this.smart_proxy_items[1]).find(".settings-multi-value-option-value").text(t.RegionName),t.Countries)&&0<t.Countries.length&&(t=t.Countries[e.country],$(this.smart_proxy_items[2]).find(".settings-multi-value-option-value").text(t.CountryName),t.Servers)&&0<t.Servers.length&&(t=e.server+1,$(this.smart_proxy_items[3]).find(".settings-multi-value-option-value").text("Server "+t))},hoverSmartProxyOption:function(e){$(this.smart_proxy_items).removeClass("current"),this.keys.focused_part="smart_proxy",this.keys.smart_proxy_selection=e,"Success"===proxySubscriptionStatus?this.updateActiveClass(this.smart_proxy_items,e):$("#proxy-sub-confirmation-btn").addClass("active")},toggleSmartProxy:function(){this.smart_proxy_connection_state?($($(".settings-toggle-switch-value")[0]).removeClass("on").addClass("off"),this.smart_proxy_connection_state=!1,$("#smart-proxy-settings .settings-multi-value-option").hide()):($($(".settings-toggle-switch-value")[0]).addClass("on").removeClass("off"),this.smart_proxy_connection_state=!0,$("#smart-proxy-settings .settings-multi-value-option").show()),this.saveSmartProxySettings()},clickSmartProxyOption:function(e){switch(e){case 0:"Success"===proxySubscriptionStatus?this.toggleSmartProxy():this.isProxyCheckDisabled||this.attemptProxyStatusChange();break;case 1:case 2:case 3:this.keys.focused_part="smart_proxy_option",$(this.smart_proxy_items).removeClass("current").eq(e).addClass("current")}},attemptProxyStatusChange:function(){var e=this;!0===handleProxyInfoFetch(!0)&&e.hoverSmartProxyOption(0),this.isProxyCheckDisabled=!0,console.log("Disabled?",this.isProxyCheckDisabled),$("#proxy-sub-confirmation-btn").addClass("disabled"),setTimeout(function(){$("#proxy-sub-confirmation-btn").removeClass("disabled"),e.isProxyCheckDisabled=!1},5e3)},handleSmartProxySettingChange:function(e){if(proxyAvailableServers&&0!==proxyAvailableServers.length){var t,i=this.keys,s=this.current_proxy_selections;switch(i.smart_proxy_selection){case 1:s.region+=e,s.region<0&&(s.region=proxyAvailableServers.length-1),s.region>=proxyAvailableServers.length&&(s.region=0),s.country=0,s.server=0;break;case 2:(t=proxyAvailableServers[s.region]).Countries&&0<t.Countries.length&&(s.country+=e,s.country<0&&(s.country=t.Countries.length-1),s.country>=t.Countries.length&&(s.country=0),s.server=0);break;case 3:(t=proxyAvailableServers[s.region]).Countries&&t.Countries[s.country]&&(t=t.Countries[s.country]).Servers&&0<t.Servers.length&&(s.server+=e,s.server<0&&(s.server=t.Servers.length-1),s.server>=t.Servers.length)&&(s.server=0)}this.saveSmartProxySettings(),this.updateSmartProxyDisplayValues()}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"settings_selection":this.clickSettingsItem(e.settings_selection);break;case"parental_control_tabs":this.clickParentalControlTab(e.parental_control_tabs_selection);break;case"parental_control":this.clickParentalControlOption(e.parental_control_selection);break;case"hide_categories_tabs":this.clickHideCategoriesTab(e.hide_categories_tabs_selection);break;case"hide_categories":this.clickHideCategoriesOption(e.hide_categories_selection);break;case"change_language":this.clickChangeLanguageOption(e.change_language_selection);break;case"stream_format":this.clickStreamFormatOption(e.stream_format_selection);break;case"clear_cache":this.clickClearCacheOption();break;case"clear_watch_lists":this.clickClearWatchListsOption();break;case"subtitle":this.clickSubtitleOption(e.subtitle_selection);break;case"toggle_tmdb":this.clickToggleTMDBOption(e.toggle_tmdb_selection);break;case"toggle_home_favorites":this.clickToggleHomeFavoritesOption(e.toggle_home_favorites_selection);break;case"live_initialization":this.clickLiveInitializationOption(e.live_initialization_selection);break;case"live_layout":this.clickLiveLayoutOption(e.live_layout_selection);break;case"smart_proxy":this.clickSmartProxyOption(e.smart_proxy_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":t.settings_selection=utilities.clampNumber(t.settings_selection+e,0,this.settings_doms.length-1),this.hoverSettingsItem(t.settings_selection);break;case"parental_control_tabs":0<e&&this.hoverParentalControlOption(0);break;case"parental_control":if(t.parental_control_selection+=e,-1==t.current_parental_control_tab_selection&&t.parental_control_selection<0)t.parental_control_selection=0;else if(t.parental_control_selection<0)t.parental_control_selection=0,this.hoverParentalControlTab(t.parental_control_tabs_selection);else{switch(t.current_parental_control_tab_selection){case 0:3<t.parental_control_selection&&(t.parental_control_selection=3);break;case 1:case-1:1<t.parental_control_selection&&(t.parental_control_selection=1)}this.hoverParentalControlOption(t.parental_control_selection)}break;case"hide_categories_tabs":0<e&&this.hoverHideCategoriesOption(0);break;case"hide_categories":if(t.hide_categories_selection+=e,t.hide_categories_selection<0)t.hide_categories_selection=0,this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);else{switch(t.current_hide_categories_tabs_selection){case 0:t.hide_categories_selection>=this.hide_categories_live_items.length&&(t.hide_categories_selection=this.hide_categories_live_items.length-1);break;case 1:t.hide_categories_selection>=this.hide_categories_movies_items.length&&(t.hide_categories_selection=this.hide_categories_movies_items.length-1);break;case 2:t.hide_categories_selection>=this.hide_categories_series_items.length&&(t.hide_categories_selection=this.hide_categories_series_items.length-1)}this.hoverHideCategoriesOption(t.hide_categories_selection)}break;case"change_language":t.change_language_selection=utilities.clampNumber(t.change_language_selection+e,0,this.change_language_items.length-1),this.hoverChangeLanguageOption(t.change_language_selection);break;case"stream_format":t.stream_format_selection=utilities.clampNumber(t.stream_format_selection+e,0,this.stream_format_items.length-1),this.hoverStreamFormatOption(t.stream_format_selection);break;case"clear_watch_lists":t.clear_watch_lists_selection=utilities.clampNumber(t.clear_watch_lists_selection+e,0,this.clear_watch_lists_items.length-1),this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case"subtitle":t.subtitle_selection=utilities.clampNumber(t.subtitle_selection+e,0,this.subtitle_items.length-1),this.hoverSubtitleOption(t.subtitle_selection);break;case"toggle_tmdb":t.toggle_tmdb_selection=utilities.clampNumber(t.toggle_tmdb_selection+e,0,this.toggle_tmdb_items.length-1),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case"toggle_home_favorites":t.toggle_home_favorites_selection=utilities.clampNumber(t.toggle_home_favorites_selection+e,0,this.toggle_home_favorites_items.length-1),this.hoverToggleHomeFavoritesOption(t.toggle_home_favorites_selection);break;case"live_initialization":t.live_initialization_selection=utilities.clampNumber(t.live_initialization_selection+e,0,this.live_initialization_items.length-1),this.hoverLiveInitializationOption(t.live_initialization_selection);break;case"live_layout":t.live_layout_selection=utilities.clampNumber(t.live_layout_selection+e,0,this.live_layout_items.length-1),this.hoverLiveLayoutOption(t.live_layout_selection);break;case"smart_proxy":proxySubscriptionStatus&&this.smart_proxy_connection_state&&(t.smart_proxy_selection=utilities.clampNumber(t.smart_proxy_selection+e,0,this.smart_proxy_items.length-1),this.hoverSmartProxyOption(t.smart_proxy_selection))}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":0<e&&this.clickSettingsItem(t.settings_selection);break;case"parental_control_tabs":t.parental_control_tabs_selection+=e,t.parental_control_tabs_selection<0?(t.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.parental_control_tabs_selection>=this.parental_control_tab_items.length&&(t.parental_control_tabs_selection=this.parental_control_tab_items.length-1),this.hoverParentalControlTab(t.parental_control_tabs_selection));break;case"parental_control":e<0&&(this.resetParentalControlStyles(),this.hoverSettingsItem(t.settings_selection));break;case"hide_categories_tabs":t.hide_categories_tabs_selection+=e,t.hide_categories_tabs_selection<0?(t.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.hide_categories_tabs_selection>=this.hide_categories_tabs_items.length&&(t.hide_categories_tabs_selection=this.hide_categories_tabs_items.length-1),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection));break;case"hide_categories":e<0&&($(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection));break;case"change_language":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.change_language_items));case"stream_format":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.stream_format_items));break;case"clear_cache":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_cache_items));break;case"clear_watch_lists":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_watch_lists_items));break;case"subtitle":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.subtitle_items));break;case"subtitle_option":this.handleSubtitleSettingChange(e);break;case"toggle_tmdb":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_tmdb_items));break;case"toggle_home_favorites":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_home_favorites_items));break;case"live_initialization":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.live_initialization_items));break;case"live_layout":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.live_layout_items));break;case"smart_proxy":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.smart_proxy_items));break;case"smart_proxy_option":this.handleSmartProxySettingChange(e)}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},turn_off_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#turn-off-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="turn-off-page",this.hoverMenuItem(0),$("#turn-off-modal").modal("show")},goBack:function(){$("#turn-off-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close();break;case 1:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},parent_confirm_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".parent-confirm-item"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="parent-confirm-page",this.resetPasswordInput(),this.hoverMenuItem(0),$("#parent-confirm-password-error").hide(),$("#parent-confirm-modal").modal("show"),this.setupCustomKeyboardForInput()},goBack:function(){$("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"vod-summary-page"!==this.prev_route&&"series-summary-page"!==this.prev_route||(current_route="vod-series-page"),"channel-category-page"===this.prev_route&&(current_route="channel-category-page")},setupCustomKeyboardForInput:function(){var e;USE_CUSTOM_KEYBOARD&&"function"==typeof inputFocusHandler&&"function"==typeof inputBlurHandler&&(e=document.getElementById("parent-confirm-password"))&&(e.removeEventListener("focus",inputFocusHandler),e.removeEventListener("blur",inputBlurHandler),e.addEventListener("focus",inputFocusHandler),e.addEventListener("blur",inputBlurHandler),e.addEventListener("click",function(e){USE_CUSTOM_KEYBOARD&&(e.preventDefault(),e.stopPropagation(),custom_keyboard.isShown||this.focus())}),console.log("Custom keyboard setup completed for parent-confirm-password input"))},resetPasswordInput:function(){var e=$("#parent-confirm-password"),t=e.clone().val(""),i=(e.replaceWith(t),this);setTimeout(function(){i.setupCustomKeyboardForInput()},100)},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part)switch(this.keys.menu_selection){case 0:$(this.menu_doms[0]).find("input").focus();break;case 1:var t=$(this.menu_doms[0]).find("input").val();$("#parent-confirm-password-error").hide(),t!=parent_account_password?$("#parent-confirm-password-error").slideDown():($("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"channel-page"===this.prev_route?channel_page.showCategoryChannels():"vod-series-page"===this.prev_route?vod_series_page.showCategoryContent():"stream-category-page"===this.prev_route&&stream_category_page.showStreamPage());break;case 2:this.goBack()}},handleMenusUpDown:function(e){var t=this.keys;1<=t.menu_selection&&0<e||(1<=t.menu_selection&&e<0?t.menu_selection=0:0==t.menu_selection&&0<e&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&1<=t.menu_selection&&(t.menu_selection+=e,t.menu_selection<1&&(t.menu_selection=0),2<t.menu_selection&&(t.menu_selection=2),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},activation_page={keys:{focused_part:"input_selection",input_selection:0,btn_selection:0},prev_route:"",buttons:$(".activation-btn"),activation_input:$("#activation-input")[0],is_loading:!1,tried_panel_indexes:[],init:function(e){this.prev_route=e,$("#activation-modal").modal("show"),$(this.activation_input).val(""),current_route="activation-page",this.hoverInput(),this.tried_panel_indexes=[],$("#activation-code-message").hide()},goBack:function(){$("#activation-modal").modal("hide"),current_route=this.prev_route},showErrorMessage:function(e){$("#activation-code-message").text(e).slideDown(),setTimeout(function(){$("#activation-code-message").slideUp()},4e3)},confirmActivationCode:function(){var t,e,i,s;$("#activation-code-message").hide(),(activation_code=$(this.activation_input).val())?(showLoader(this.is_loading=!0),i=(e=pickPanelUrl((t=this).tried_panel_indexes))[1],s=e[0],api({method:"post",url:i+"/change-code",data:{data:encryptRequest({mac_address:mac_address,code:activation_code,app_type:platform,version:"samsung"===platform?samsung_version:lg_version})},success:function(e){t.is_loading&&(showLoader(t.is_loading=!1),"success"===e.status?($(".activation-code").text(activation_code),t.goBack(),"login-page"===t.prev_route&&login_page.reloadApp()):t.showErrorMessage(e.msg))},error:function(){t.tried_panel_indexes.length<panel_urls.length?(t.tried_panel_indexes.push(s),t.fetchPlaylistInformation()):(showLoader(t.is_loading=!1),t.showErrorMessage("Sorry, Code is not valid"))}})):this.showErrorMessage("Sorry, activation code is required")},hoverInput:function(){$(this.buttons).removeClass("active"),$(this.activation_input).addClass("active"),this.keys.focused_part="input_selection"},hoverBtn:function(e){var t=this.keys;t.btn_selection=e,t.focused_part="btn_selection",$(this.activation_input).removeClass("active"),$(this.buttons).removeClass("active"),$(this.buttons[e]).addClass("active")},handleMenuLeftRight:function(e){var t=this.keys;"btn_selection"===t.focused_part&&(t.btn_selection=0<e?1:0,this.hoverBtn(t.btn_selection))},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"input_selection":0<e&&($(this.activation_input).blur(),this.hoverBtn(t.btn_selection));break;case"btn_selection":e<0&&this.hoverInput()}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"input_selection":$(this.activation_input).focus(),setSelectionRange(this.activation_input);break;case"btn_selection":0==e.btn_selection?this.confirmActivationCode():this.goBack()}},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},playlist_edit_page={initiated:!1,keys:{focused_part:"playlist_edit_selection",playlist_edit_selection:0,code_playlist_edit_selection:0,playlist_tabs_selection:0},current_playlist_type:0,playlist_edit_doms:$(".playlist-edit-item"),code_playlist_edit_doms:$(".code-playlist-edit-item"),playlist_tabs_doms:$(".add-playlist-tab"),back_btn_dom:null,playlist:null,is_loading:!1,tried_panel_indexes:[],prev_route:"",init:function(e){this.prev_route=e,this.tried_panel_indexes=[],this.playlist=null,$("#home-page").addClass("hide"),$("#playlist-edit-page").removeClass("hide"),$("#playlist-edit-error-message").hide();$(this.playlist_edit_doms[0]).val(""),$(this.playlist_edit_doms[1]).val(""),$(this.playlist_edit_doms[2]).val(""),$(this.playlist_edit_doms[3]).val(""),this.hoverPlaylistEditItem(0),current_route="playlist-edit-page"},savePlaylist:function(){var t,i,s,o,a,e,n;0==this.current_playlist_type?(t=$(this.playlist_edit_doms[0]).val(),i=$(this.playlist_edit_doms[1]).val(),s=$(this.playlist_edit_doms[2]).val(),o=$(this.playlist_edit_doms[3]).val(),t?i?s?o?($("#playlist-edit-error-message").slideUp(),showLoader(!0),this.is_loading=!0,a=this,api({method:"get",url:i+"/player_api.php?username="+s+"&password="+o,success:function(e){!e||!e.user_info||0==(e=e.user_info).auth||e.status&&("Expired"===e.status||"Banned"===e.status)?a.showPlaylistErrorMessage():(e={url:i+="/get.php?username="+s+"&password="+o+"&type=m3u&output=hls",playlist_name:t,mac_address:mac_address,app_type:platform},a.updatePlaylistWithServer(e))},error:function(){a.showPlaylistErrorMessage()}})):$("#playlist-edit-error-message").text("Sorry, password is required").slideDown():$("#playlist-edit-error-message").text("Sorry, username is required").slideDown():$("#playlist-edit-error-message").text("Sorry, playlist url is required").slideDown():$("#playlist-edit-error-message").text("Sorry, playlist name is required").slideDown()):1==this.current_playlist_type&&(n=$(this.code_playlist_edit_doms[1]).val(),e=$(this.code_playlist_edit_doms[0]).val()||n,n?(n={playlist_type:"code",playlist_code:n,playlist_name:e,mac_address:mac_address,app_type:platform},console.log("Playlist data sent to the server",n),this.updatePlaylistWithServer(n)):$("#playlist-edit-error-message").text("Sorry, code is required").slideDown())},showPlaylistErrorMessage:function(){showLoader(!1),this.is_loading=!1,$("#playlist-edit-error-message").html("Sorry, Your playlist is not working<br>Please check your playlist and try again").slideDown()},updatePlaylistWithServer:function(e){var t=encryptRequest(e),i=pickPanelUrl(this.tried_panel_indexes),s=i[1],o=i[0],a=this;api({type:"POST",url:s+"/add_playlist",data:{data:t},success:function(e){a.tried_panel_indexes=[];e=decryptResponse(e);a.playListSaved(e,!0),console.log("Server response",e)},error:function(){a.tried_panel_indexes.push(o),a.tried_panel_indexes.length<panel_urls.length&&a.updatePlaylistWithServer(e)}})},playListSaved:function(e,t){playlist_urls.push(e),saveData("playlist_urls",playlist_urls),showLoader(!1),this.is_loading=!1;var i=playlist_urls.length-1,i='<div class="playlist-item-container"                onmouseenter="playlist_page.hoverPlayListItem('+i+')"                onclick="playlist_page.changePlaylist('+i+')"            >                <div class="playlist-item-wrapper">                    <img class="playlist-item-logo" src="'+HOST+'app_src_min/images/logo.png">                     <span class="playlist-name">'+e.playlist_name+'</span><div class="playlist-state"><i class="fa fa-play"></i></div></div>         </div>';$("#playlist-items-container").append(i),playlist_page.playlist_doms=$(".playlist-item-wrapper"),this.goBack()},updateInputs:function(){switch(this.current_playlist_type){case 0:$("#add-xc-playlist-inputs-container").show(),$("#add-code-playlist-inputs-container").hide();break;case 1:$("#add-xc-playlist-inputs-container").hide(),$("#add-code-playlist-inputs-container").show()}$("#playlist-edit-error-message").text("Sorry, code is required").slideUp(),$(this.playlist_tabs_doms).removeClass("current"),$(this.playlist_tabs_doms[this.current_playlist_type]).addClass("current")},hoverPlaylistEditItem:function(e){$(this.playlist_tabs_doms).removeClass("active"),$("#playlist-submit-btn").removeClass("active");var t=this.keys;switch(this.current_playlist_type){case 0:t.focused_part="playlist_edit_selection",$(this.playlist_edit_doms).removeClass("active"),t.playlist_edit_selection=e,$(this.playlist_edit_doms[e]).addClass("active");break;case 1:t.focused_part="code_playlist_edit_selection",$(this.code_playlist_edit_doms).removeClass("active"),t.code_playlist_edit_selection=e,$(this.code_playlist_edit_doms[e]).addClass("active")}},hoverPlaylistTabItem:function(e){$(this.playlist_edit_doms).removeClass("active"),$(this.code_playlist_edit_doms).removeClass("active"),$("#playlist-submit-btn").removeClass("active");var t=this.keys;t.focused_part="playlist_tabs_selection",t.playlist_tabs_selection=e,$(this.playlist_tabs_doms).removeClass("active"),$(this.playlist_tabs_doms[e]).addClass("active")},hoverPlaylistSaveBtn:function(){$(this.playlist_edit_doms).removeClass("active"),$(this.code_playlist_edit_doms).removeClass("active"),this.keys.focused_part="playlist_submit_btn",$("#playlist-submit-btn").addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"playlist_edit_selection":e.playlist_edit_selection<4?($(this.playlist_edit_doms[e.playlist_edit_selection]).focus(),setSelectionRange(this.playlist_edit_doms[e.playlist_edit_selection])):4==e.playlist_edit_selection?this.savePlaylist():this.goBack();break;case"code_playlist_edit_selection":e.code_playlist_edit_selection<2&&($(this.code_playlist_edit_doms[e.code_playlist_edit_selection]).focus(),setSelectionRange(this.code_playlist_edit_doms[e.code_playlist_edit_selection]));break;case"playlist_tabs_selection":this.current_playlist_type=this.keys.playlist_tabs_selection,this.updateInputs();break;case"playlist_submit_btn":this.savePlaylist()}},handleMenuLeftRight:function(e){var t=this.keys;"playlist_tabs_selection"===t.focused_part&&(t.playlist_tabs_selection+=e,t.playlist_tabs_selection<0?t.playlist_tabs_selection=0:t.playlist_tabs_selection>=this.playlist_tabs_doms.length&&(t.playlist_tabs_selection=this.playlist_tabs_doms.length-1),this.hoverPlaylistTabItem(t.playlist_tabs_selection))},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"playlist_tabs_selection":0<e&&this.hoverPlaylistEditItem(0);break;case"playlist_edit_selection":t.playlist_edit_selection+=e,t.playlist_edit_selection<0?(t.playlist_edit_selection=0,this.hoverPlaylistTabItem(t.playlist_tabs_selection)):4<=t.playlist_edit_selection?(t.playlist_edit_selection=3,this.hoverPlaylistSaveBtn()):this.hoverPlaylistEditItem(t.playlist_edit_selection);break;case"code_playlist_edit_selection":t.code_playlist_edit_selection+=e,t.code_playlist_edit_selection<0?(t.code_playlist_edit_selection=0,this.hoverPlaylistTabItem(t.playlist_tabs_selection)):2<=t.code_playlist_edit_selection?(t.code_playlist_edit_selection=1,this.hoverPlaylistSaveBtn()):this.hoverPlaylistEditItem(t.code_playlist_edit_selection);break;case"playlist_submit_btn":0<e||(0==this.current_playlist_type?this.hoverPlaylistEditItem(this.playlist_edit_doms.length-1):1==this.current_playlist_type&&this.hoverPlaylistEditItem(this.code_playlist_edit_doms.length-1))}},goBack:function(){$("#playlist-edit-page").addClass("hide"),current_route="playlist-page"},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},category_selection_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:[],back_url:"",categories:[],init:function(e,t){this.back_url=e,this.categories=t,current_route="category-selection-page";var i="";t.map(function(e,t){i+='<div class="category-item-container">                    <div class="category-item-wrapper"                        onmouseenter="category_selection_page.hoverMenuItem('+t+')"                         onclick="category_selection_page.handleMenuClick()"                     >'+e.category_name+"                     </div>                 </div>                "}),$("#select-category-items-container").html(i),this.menu_doms=$("#select-category-items-container .category-item-wrapper"),$("#select-category-modal").modal("show"),this.hoverMenuItem(0)},goBack:function(){$("#select-category-modal").modal("hide"),current_route=this.back_url},hoverMenuItem:function(e){$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active"),this.keys.menu_selection=e,moveScrollPosition($("#select-category-items-container"),$(this.menu_doms[e]).closest(".category-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;"menu_selection"===e.focused_part&&(this.goBack(),"channel-page"===this.back_url)&&channel_page.goToSelectedCategory(e.menu_selection)},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMenuItem(t.menu_selection))},handleMenusUpDown:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(checkVerticalMovable(this.menu_doms.length,4,t.menu_selection,e)&&(t.menu_selection+=4*e),t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.BLUE:this.showPlayListEditPage();break;case tvKey.RED:this.removePlayList()}}},SrtParser={seperator:",",init:function(){this.seperator=","},timestampToSeconds:function(e){var e=e.split(","),t=e[0],e=parseInt(e[1]),t=t.split(":").map(function(e){return parseInt(e)}),i=t[0];return.001*e+t[2]+60*t[1]+3600*i},correctFormat:function(e){var e=e.replace(".",",").split(","),t=e[0],e=this.fixed_str_digit(3,e[1],!0),t=t.split(":"),i=t[0],s=t[1],t=t[2];return this.fixed_str_digit(2,i,!1)+":"+this.fixed_str_digit(2,s,!1)+":"+this.fixed_str_digit(2,t,!1)+","+e},fixed_str_digit:function(e,t,i){return t.length==e?t:e<t.length?t.slice(0,e):t.length<e?i?t.padEnd(e,"0"):t.padStart(e,"0"):void 0},tryComma:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g);return e.shift(),e},tryDot:function(e){e=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g);return e.shift(),this.seperator=".",e},fromSrt:function(e){if(""==e.trim())return[];for(var t=(new Date).getTime(),i=this.tryComma(e),s=(0==i.length&&(i=this.tryDot(e)),[]),o=0;o<i.length;o+=4){var a=this.correctFormat(i[o+1].trim()),n=this.correctFormat(i[o+2].trim()),a={id:i[o].trim(),startTime:a,startSeconds:this.timestampToSeconds(a),endTime:n,endSeconds:this.timestampToSeconds(n),text:i[o+3].trim()};s.push(a)}e=(new Date).getTime();return console.log(e-t,"ms take to parse"),s}},SrtOperation={current_srt_index:0,next_srt_time:0,srt:[],stopped:!1,subtitle_shown:!1,time_difference:0,init:function(t,e){this.time_difference=0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1;var i=[];if(t)try{SrtParser.init(),i=SrtParser.fromSrt(t)}catch(e){console.log("here subtitle parse issue",e,t)}0<(this.srt=i).length?(this.stopped=!1,this.current_srt_index=this.findIndex(e,0,i.length-1),console.log("here found srt index",this.current_srt_index,e,i),this.current_srt_index<0&&(this.current_srt_index=0),this.next_srt_time=0):this.stopped=!0},findIndex:function(e,t,i){var s,o;return 0==(e+=this.time_difference)?0:(s=this.srt,i<t?i:s[o=Math.floor((t+i)/2)].startSeconds<=e&&e<s[o].endTime?o:s[o].startSeconds>e?this.findIndex(e,t,o-1):this.findIndex(e,o+1,i))},timeChange:function(e){if(!this.stopped){e+=this.time_difference,.98<=Math.random()&&console.log("current_time=",e,media_player.videoObj.currentTime);var t=this.current_srt_index,i=this.srt[t];if(e>=i.startSeconds&&e<i.endSeconds)this.subtitle_shown||$("#"+media_player.parent_id).find(".subtitle-container").html(i.text);else if(e>i.endSeconds){t=this.srt[t+1];try{e<t.startSeconds?this.subtitle_shown&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1):t.endSeconds>e?($("#"+media_player.parent_id).find(".subtitle-container").html(t.text),this.subtitle_shown=!0,this.current_srt_index+=1):(console.log("here finding new srt index"),this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0))}catch(e){console.log("subtitle timer issue",e)}}else if(e<i.startSeconds)try{this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0)}catch(e){}}},stopOperation:function(){this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},setTimeDifference:function(e){this.time_difference=parseInt(e),$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},deStruct:function(){this.srt=[],this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html("")}},search_page={keys:{top_menu_selection:0,hor_keys:[0,0,0],v_selection:0,movie_selection:[],focused_part:""},prev_dom:null,is_loading:!1,filtered_movies:[],render_counts:[0,0,0],prev_keyword:"",search_timeout:null,prev_route:"",top_menu_doms:$(".search-page-top-menu"),movie_doms:[],render_count_increment:50,searching_for:[],parent_elements:[$("#filtered_channels_container")[0],$("#filtered_movies_container")[0],$("#filtered_series_container")[0]],init:function(e,t){switch(this.prev_route=e,$("#filtered_replay_container").html(""),$("#filtered_channels_container").html(""),$("#filtered_movies_container").html(""),$("#filtered_series_container").html(""),$(".search-page-stream-type-container.replay").hide(),$(".search-page-stream-type-container.live").hide(),$(".search-page-stream-type-container.vod").hide(),$(".search-page-stream-type-container.series").hide(),this.searching_for=t||"all",this.searching_for){case"vod":$(".search-page-stream-type-container.vod").show();break;case"series":$(".search-page-stream-type-container.series").show();break;case"live":$(".search-page-stream-type-container.live").show();break;case"replay":$(".search-page-stream-type-container.replay").show();break;default:$(".search-page-stream-type-container.live").show(),$(".search-page-stream-type-container.vod").show(),$(".search-page-stream-type-container.series").show()}this.filtered_movies=[],this.keys.hor_keys=[0,0,0],this.prev_keyword="",$("#search-page-input").val(""),$("#home-page").addClass("hide"),$("#channel-page").addClass("hide"),$("#search-page").show(),current_route="search-page",this.hoverTopMenu(0),this.handleMenuClick()},goBack:function(){clearTimeout(this.search_timeout),$("#search-page-input").blur(),$("#search-page").hide();var e="#"+this.prev_route;current_route="channel-page"==this.prev_route?($("#channel-page").removeClass("hide"),"channel-page"):($(e).removeClass("hide"),this.prev_route)},keywordChange:function(){clearTimeout(this.search_timeout);var n=this;this.search_timeout=setTimeout(function(){var e=n.prev_keyword,t=$("#search-page-input").val().toLowerCase();if(e!=t&&t){showLoader(!0),n.is_loading=!0;var i=VodModel.getCategories(!1,!1),s=SeriesModel.getCategories(!1,!1),o=LiveModel.getCategories(!1,!1),a=n.getReplayCategories();switch(n.filtered_movies=[],n.searching_for){case"vod":n.filtered_movies.push([]),n.filtered_movies.push(n.getFilteredMovies(i,t)),n.filtered_movies.push([]);break;case"series":n.filtered_movies.push([]),n.filtered_movies.push([]),n.filtered_movies.push(n.getFilteredMovies(s,t));break;case"live":n.filtered_movies.push(n.getFilteredMovies(o,t)),n.filtered_movies.push([]),n.filtered_movies.push([]),console.log("Filtered movies",n.filtered_movies);break;case"replay":n.filtered_movies.push(n.getFilteredMovies(a,t)),n.filtered_movies.push([]),n.filtered_movies.push([]);break;default:n.filtered_movies.push(n.getFilteredMovies(o,t)),n.filtered_movies.push(n.getFilteredMovies(i,t)),n.filtered_movies.push(n.getFilteredMovies(s,t))}switch(n.render_counts=[0,0,0],n.keys.hor_keys=[0,0,0],n.movie_doms=[[],[],[]],$(n.parent_elements[0]).html(""),$(n.parent_elements[1]).html(""),$(n.parent_elements[2]).html(""),n.searching_for){case"vod":n.renderFilteredMovies(1,!1,!1);break;case"series":n.renderFilteredMovies(2,!1,!1);break;case"live":n.renderFilteredMovies(0,!1,!1);break;case"replay":n.renderFilteredMovies(0,!1,!1,!0);break;default:n.renderFilteredMovies(0,!1,!0),n.renderFilteredMovies(1,!1,!0),n.renderFilteredMovies(2,!1,!0)}n.prev_keyword=t;e=2e3;n.filtered_movies[0].length+n.filtered_movies[1].length+n.filtered_movies[2].length<50&&(e=500),setTimeout(function(){showLoader(!1),n.is_loading=!1},e)}},400)},getReplayCategories:function(){return LiveModel.getCategories(!1,!1).map(function(e){var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));return e.movies=t,e}).filter(function(e){return 0<e.movies.length})},getFilteredMovies:function(e,t){var i=[];return e.map(function(e){checkForAdult(e,"category",[])||"resume"===e.category_id||(e=e.movies.filter(function(e){return e.name.toLowerCase().includes(t)}),i=i.concat(e))}),i},renderFilteredMovies:function(s,e,t,i){var o,a,n,r,l,c,d,h,u=this.parent_elements[s],_=((i=i||!1)&&(u=$("#filtered_replay_container")[0]),this.render_counts[s]);0==this.filtered_movies[s].length?$(u).append("<p class='search-no-results'>No results found!</p>"):_>=this.filtered_movies[s].length||(i=this.render_count_increment,e&&(showLoader(!0),this.is_loading=!0),o=this,a="",n=0==s?"channel":"vod",r="stream_icon",c="stream_id",d=HOST+"app_src_min/images/default_movie.png",0==s&&(d=HOST+"app_src_min/images/logo.png",l=LiveModel.favourite_ids),1==s&&(VodModel.saved_video_times,l=VodModel.favourite_ids),2==s&&(r="cover",l=SeriesModel.favourite_ids,c="series_id"),h=this.filtered_movies[s].slice(_,_+i),t?$(".search-page-stream-items-container").addClass("one-line"):$(".search-page-stream-items-container").removeClass("one-line"),t=1500,h.length<10&&(t=0),h.map(function(e,t){var i=l.includes(e[c]);a+='<div class="filtered-movie-container '+n+'">                      <div class="filtered-movie-wrapper"                          onmouseenter="search_page.hoverMovie('+(_+t)+","+s+')"                          onclick="search_page.handleMenuClick()"                       >'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'<div class="filtered-movie-img-wrapper">                              <img src="'+e[r]+'" onerror="this.src=\''+d+'\'">                          </div>                          <div class="filtered-movie-title-wrapper">                              <div class="filtered-movie-title">'+e.name+"</div>                           </div>                       </div>                  </div>"}),this.render_counts[s]+=i,$(u).append(a),this.movie_doms[s]=$(u).find(".filtered-movie-wrapper"),e&&setTimeout(function(){showLoader(!1),o.is_loading=!1},t))},hoverTopMenu:function(e){var t;key_focused||((t=this.keys).focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],t=this.parent_elements[0],moveScrollPosition($("#search-page-contents-wrapper"),$(t).closest(".search-page-stream-type-container"),"vertical",!1))},hoverMovie:function(e,t){if(!key_focused){var i=this.keys,i=(i.hor_keys[t]=e,i.v_selection=t,i.focused_part="movie_selection",this.parent_elements[t]);if($(this.prev_dom).removeClass("active"),$(this.movie_doms[t][e]).addClass("active"),this.prev_dom=this.movie_doms[t][e],moveScrollPosition(i,$(this.prev_dom).closest(".filtered-movie-container"),"horizontal",!1),"all"==this.searching_for)moveScrollPosition($("#search-page-contents-wrapper"),$(i).closest(".search-page-stream-type-container"),"vertical",!1);else{var s="";switch(this.searching_for){case"replay":s="replay";break;case"live":s="channels";break;case"vod":s="movies";break;case"series":s="series"}moveScrollPosition($("#filtered_"+s+"_container"),this.movie_doms[t][e],"vertical",!1)}}},handleMenuLeftRight:function(e){var t=this.keys;if(!key_focused)switch(t.focused_part){case"top_menu_selection":break;case"movie_selection":var i=t.hor_keys[t.v_selection]+e;(i=i<0?0:i)>=this.movie_doms[t.v_selection].length&&(i=this.movie_doms[t.v_selection].length-1),this.hoverMovie(i,t.v_selection),0<e&&i>=this.movie_doms[t.v_selection].length-9&&this.renderFilteredMovies(t.v_selection,!0)}},handleMenuUpDown:function(e){var t,i=this.keys;switch(i.focused_part){case"top_menu_selection":if(!key_focused&&0<e){if("vod"==this.searching_for)t=1;else if("series"==this.searching_for)t=2;else if("live"==this.searching_for)t=0;else for(var s=0;s<this.filtered_movies.length;s++)if(0<this.filtered_movies[s].length){t=s;break}null!=t&&0<this.filtered_movies[t].length&&(i.v_selection=t,this.hoverMovie(i.hor_keys[t],t));for(s=0;s<this.filtered_movies.length;s++)if(0<this.filtered_movies[s].length){i.v_selection=s,this.hoverMovie(i.hor_keys[s],s);break}}break;case"movie_selection":if("all"==this.searching_for){var o=-1;if(0<e){if(2<=i.v_selection)return;for(s=i.v_selection+1;s<3;s++)if(0<this.filtered_movies[s].length){o=s;break}}else for(s=i.v_selection-1;0<=s;s--)if(0<this.filtered_movies[s].length){o=s;break}if(e<0&&(i.v_selection<=0||-1===o)||-1===o)return void this.hoverTopMenu(0);-1!==o&&this.hoverMovie(i.hor_keys[o],o)}else{o=-1;switch(this.searching_for){case"replay":case"live":o=0;break;case"vod":o=1;break;case"series":o=2}"live"==this.searching_for||"replay"==this.searching_for?i.hor_keys[o]+=6*e:i.hor_keys[o]+=8*e;var a=this.filtered_movies[o];if(i.hor_keys[o]>=a.length&&(i.hor_keys[o]=a.length-1),i.hor_keys[o]<0)return i.hor_keys[o]=0,void this.hoverTopMenu(0);-1!==o&&this.hoverMovie(i.hor_keys[o],o),0<e&&i.hor_keys[o]>=this.movie_doms[i.v_selection].length-9&&this.renderFilteredMovies(i.v_selection,!0)}}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"top_menu_selection":0==e.top_menu_selection&&(key_focused?$("#search-page-input").blur():($("#search-page-input").focus(),setSelectionRange($("#search-page-input"))));break;case"movie_selection":var t=this.filtered_movies[e.v_selection][e.hor_keys[e.v_selection]];switch($("#search-page").hide(),e.v_selection){case 0:"replay"==this.searching_for?vod_series_page.init("replay",t):channel_page.init("search-page",t);break;case 1:current_movie=this.filtered_movies[1][e.hor_keys[1]],vod_summary_page.init("search-page");break;case 2:current_series=this.filtered_movies[2][e.hor_keys[2]],series_summary_page.init("search-page")}}},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},catchup_page={keys:{focused_part:"category_selection",category_search_selection:0,channel_search_selection:0,category_selection:0,channel_selection:0},category_doms:[],channel_doms:[],category_search_dom:$("#catchup-page-category-search-bar"),channel_search_dom:$("#catchup-page-channel-search-bar"),all_categories:[],categories:[],movies:[],all_movies:[],prev_focus_dom:null,prev_keyword:"",prev_category_keyword:"",search_timer:null,is_loading:!1,category_shown:!1,init:function(){var e;this.is_loading=!1,this.category_shown=!1,"xc"===settings.playlist_type&&($("#catchup-page-category-items-container").html(""),$("#catchup-page").addClass("category-expanded"),this.prev_category_keyword="",$("#catchup-page-category-search-input").val(""),e=LiveModel.getCategories(!1,!1),this.all_categories=e.map(function(e){var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));return e.movies=t,e}).filter(function(e){return 0<e.movies.length}),this.categories=this.all_categories.filter(function(e){return!0}),0<this.all_categories.length)?($("#home-page").addClass("hide"),$("#catchup-page").removeClass("hide"),this.renderCategories(),current_route="catchup-page",this.hoverCategory(0),this.showCategoryChannels()):showToast(current_words.sorry||"Sorry",current_words.no_catchup_available||"No catch up available for current playlist")},goBack:function(){var e=this.keys;switch(e.focused_part){case"channel_search_selection":if(key_focused)break;case"channel_selection":$("#catchup-page").addClass("category-expanded"),this.category_shown=!0,this.hoverCategory(e.category_selection);break;default:$("#catchup-page").addClass("hide"),home_page.reEnter()}},renderCategories:function(){var i="";this.categories.map(function(e,t){i+='<div class="catchup-page-category-item-container">                    <div class="catchup-page-category-item bg-focus"                        onmouseenter="catchup_page.hoverCategory('+t+')"                        onclick="catchup_page.handleMenuClick()"                        data-index="'+t+'"                    >                        <span class="catchup-category-name-wrapper">'+e.category_name+'</span>                        <span class="catchup-category-stream-count-container">                            <span class="catchup-category-stream-count">'+e.movies.length+'</span>                            <span class="catchup-category-count-icon">                                <img src="'+HOST+'app_src_min/images/forward_arrow.png">                            </span>                        </span>                    </div>                </div>'}),$("#catchup-page-category-items-container").html(i),this.category_doms=$(".catchup-page-category-item"),this.keys.category_selection=0},showCategoryChannels:function(){var e,t=this.keys;t.category_selection!==this.current_category_index&&(this.prev_keyword="",$("#catchup-page-channel-search-input").val(""),e=this.categories[t.category_selection],$("#catchup-category-title").text(e.category_name),e=e.movies,this.all_movies=e,this.movies=e.filter(function(e){return!0}),this.renderCategoryChannels(),t.channel_selection=0,this.current_category_index=t.category_selection)},renderCategoryChannels:function(){var i="";this.movies.map(function(e,t){i+='<div class="catchup-channel-menu-item-container">                    <div class="catchup-channel-menu-item bg-focus" data-channel_id="'+e.stream_id+'"                       data-index="'+t+'"                       onmouseenter="catchup_page.hoverChannel(this)"                       onclick="catchup_page.handleMenuClick()"                    >                        <span class="catchup-channel-number">'+e.num+'</span>                        <span class="catchup-channel-icon-wrapper"><img class="catchup-channel-icon" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></span>                        <span class="catchup-channel-name">'+e.name+"</span>                    </div>                </div>"}),$("#catchup-page-channel-items-container").html(i),this.channel_doms=$("#catchup-page-channel-items-container .catchup-channel-menu-item")},getEpgProgrammes:function(){var t,i,e=this.movies[this.keys.channel_selection];this.epg_channel_id!==e.stream_id&&(i=[],(t=this).programmes=[],t.showNextProgrammes(),this.epg_channel_id=e.stream_id,"xc"===settings.playlist_type)&&api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+e.stream_id,success:function(e){e.epg_listings.map(function(e){i.push({start:e.start,stop:e.end,title:e.title,description:e.description})}),t.programmes=i,t.updateNextProgrammes()}})},channelKeywordChange:function(){clearTimeout(this.search_timer);var s=this;this.search_timer=setTimeout(function(){var e,t,i=$("#catchup-page-channel-search-input").val();s.prev_keyword!==i&&((e=s.all_movies).sort(function(e,t){return e.name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.name.toLowerCase().includes(i)})),s.movies=t,s.prev_keyword=i,s.renderCategoryChannels())},400)},categoryKeywordChange:function(){clearTimeout(this.search_timer);var s=this;this.search_timer=setTimeout(function(){var e,t,i=$("#catchup-page-category-search-input").val();s.prev_category_keyword!==i&&((e=s.all_categories).sort(function(e,t){return e.category_name.localeCompare(t.name)}),t=[],t=""===i?e:(i=i.toLowerCase(),e.filter(function(e){return e.category_name.toLowerCase().includes(i)})),s.categories=t,s.prev_category_keyword=i,s.renderCategories())},400)},hoverCategorySearchBar:function(){this.keys.focused_part="category_search_selection",$(this.prev_focus_dom).removeClass("active"),$(this.category_search_dom).addClass("active"),this.prev_focus_dom=this.category_search_dom,$("#catchup-page").addClass("category-expanded"),this.category_shown=!0},hoverChannelSearchBar:function(){this.keys.focused_part="channel_search_selection",$(this.prev_focus_dom).removeClass("active"),$(this.channel_search_dom).addClass("active"),this.prev_focus_dom=this.channel_search_dom,$("#catchup-page").removeClass("category-expanded"),this.category_shown=!1},hoverCategory:function(e){var t=this.keys;t.focused_part="category_selection",t.category_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.category_doms[t.category_selection]).addClass("active"),this.prev_focus_dom=this.category_doms[t.category_selection],moveScrollPosition($("#catchup-page-category-items-container"),$(this.category_doms[t.category_selection]).closest(".catchup-page-category-item"),"vertical",!1)},hoverChannel:function(e){var t=this.keys;t.focused_part="channel_selection",t.channel_selection="number"==typeof e?e:$(e).data("index"),$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[t.channel_selection]).addClass("active"),this.prev_focus_dom=this.channel_doms[t.channel_selection],moveScrollPosition($("#catchup-page-channel-items-container"),$(this.channel_doms[t.channel_selection]).closest(".catchup-channel-menu-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":checkForAdult(this.categories[e.category_selection],"category",[])?parent_confirm_page.init(current_route):(this.showCategoryChannels(),$("#catchup-page").removeClass("category-expanded"),this.category_shown=!1,this.hoverChannel(0));break;case"channel_selection":epg_page.init(this.movies[e.channel_selection]);break;case"channel_search_selection":key_focused?$("#catchup-page-channel-search-input").blur():($("#catchup-page-channel-search-input").focus(),setSelectionRange($("#catchup-page-channel-search-input")));break;case"category_search_selection":key_focused?$("#catchup-page-category-search-input").blur():($("#catchup-page-category-search-input").focus(),setSelectionRange($("#catchup-page-category-search-input")))}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":t.category_selection<2&&e<0?this.hoverCategorySearchBar():checkVerticalMovable(this.category_doms.length,2,t.category_selection,e)&&(t.category_selection+=2*e,t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(t.category_selection));break;case"channel_selection":t.channel_selection<2&&e<0?this.hoverChannelSearchBar():checkVerticalMovable(this.channel_doms.length,2,t.channel_selection,e)&&(t.channel_selection+=2*e,t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),t.channel_selection<0&&(t.channel_selection=0),this.hoverChannel(t.channel_selection));break;case"category_search_selection":key_focused||0<e&&0<this.category_doms.length&&this.hoverCategory(0);break;case"channel_search_selection":key_focused||0<e&&0<this.channel_doms.length&&this.hoverChannel(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":t.category_selection+=e,t.category_selection<0&&(t.category_selection=0),t.category_selection>=this.category_doms.length&&(t.category_selection=this.category_doms.length-1),this.hoverCategory(t.category_selection);break;case"channel_selection":t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this.hoverChannel(t.channel_selection);break;case"category_search_selection":key_focused||0<e&&0<this.channel_doms.length&&this.hoverChannelSearchBar();break;case"channel_search_selection":e<0&&this.hoverCategorySearchBar()}},HandleKey:function(e){if(!this.is_loading){this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}},epg_page={keys:{focused_part:"date_selection",date_selection:0,programme_selection:0},movie:{},sorted_programmes:[],date_doms:[],programme_doms:[],current_programmes:[],is_loading:!1,channel_id:"",init:function(l){showLoader(!0),this.is_loading=!0,this.movie=l;var c=this,d=this.keys;current_route="catch-up-detail",d.focused_part="date_selection",api({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+l.stream_id,success:function(e){for(var i,t=[],s=e.epg_listings,o="Y-MM-DD HH:mm",a=(12==settings.time_format&&(o="Y-MM-DD hh:mm A"),moment().subtract(l.tv_archive_duration,"days").unix(),0);a<s.length;a++){var n=s[a],r=getLocalChannelTime(n.start);r.unix();0!=n.has_archive&&t.push({start:r.format(o),stop:getLocalChannelTime(n.end).format(o),title:n.title,has_archive:n.has_archive})}c.sorted_programmes=c.sortProgrammesByDate(t),0==t.length||0==Object.keys(c.sorted_programmes).length?(showLoader(!1),c.is_loading=!1,showToast(current_words.sorry||"Sorry",current_words.no_epg_avaliable||"No Epg Available"),c.goBack()):($("#catchup-page").addClass("hide"),$("#catchup-detail-page").removeClass("hide"),i="",c.sorted_programmes.map(function(e,t){i+='<div class="epg-date-item-container bg-focus"                            onmouseenter="epg_page.selectDate('+t+',true,false)"                            onclick="epg_page.handleMenuClick()"                        >                            <div class="epg-date-item-date">'+e.day_string+"</div>                        </div>"}),$("#epg-dates-wrapper").html(i),c.date_doms=$(".epg-date-item-container"),d.focused_part="programme_selection",d.date_selection=c.sorted_programmes.length-1,$(c.date_doms[d.date_selection]).addClass("active"),c.selectDate(d.date_selection,!1,!0),d.programme_selection=c.sorted_programmes[d.date_selection].programmes.length-1,setTimeout(function(){c.hoverProgramme(d.programme_selection),showLoader(!1),c.is_loading=!1},200))},error:function(){showLoader(!1),c.is_loading=!1,showToast(current_words.sorry||"Sorry",current_words.no_epg_avaliable||"No Epg Available"),c.goBack()}})},goBack:function(){var e=this.keys;switch(e.focused_part){case"date_selection":$("#catchup-detail-page").addClass("hide"),$("#catchup-page").removeClass("hide"),current_route="catchup-page";break;case"programme_selection":this.selectDate(e.date_selection,!0,!1)}},sortProgrammesByDate:function(e){for(var t={},i=moment().format("Y-MM-DD HH:mm:ss"),s=0;s<e.length;s++){var o=e[s];if(o.start>=i||o.stop>=i)break;var a,n=o.start,r=n.substr(0,10);void 0!==t[r]?t[r].programmes.push(o):(a=(n=moment(n,"Y-MM-DD HH:mm:ss")).format("DD MMM YYYY"),n=n.format("YYYY-MM-DD"),t[r]={day_string:a,date_string:n,programmes:[o]})}var l=[];return Object.keys(t).map(function(e){l.push(t[e])}),l},selectDate:function(e,t,i){var s=this.keys,o=(s.date_selection=e,"");this.current_programmes=this.sorted_programmes[e].programmes,this.sorted_programmes[e].programmes.map(function(e,t){o+='<div class="epg-programme-item-container">                    <div class="epg-programme-item-wrapper bg-focus"                        onmouseenter="epg_page.hoverProgramme('+t+')"                        onclick="epg_page.handleMenuClick()"                    >                        <div class="epg-programme-title">'+getAtob(e.title)+'</div>                        <div class="epg-time-icon-container">                            <span class="epg-programme-time">'+e.start.substr(11)+"-"+e.stop.substr(11)+"</span>                      </div>                   </div>                </div>"}),$("#epg-programmes-container").html(o),$("#epg-programmes-container").scrollLeft(0),i||(s.programme_selection=0),this.programme_doms=$(".epg-programme-item-wrapper "),$(this.date_doms).removeClass("active"),$(this.programme_doms).removeClass("active"),$(this.date_doms[e]).addClass("active"),t?(s.focused_part="date_selection",i||moveScrollPosition($("#epg-programmes-container"),$(this.programme_doms[0]).closest(".epg-programme-item-container"),"vertical",!1)):i||this.hoverProgramme(0),moveScrollPosition($("#epg-dates-wrapper"),this.date_doms[e],"horizontal",!1)},hoverProgramme:function(e){var t=this.keys;t.programme_selection=e,t.focused_part="programme_selection",$(this.date_doms).removeClass("active"),$(this.programme_doms).removeClass("active"),$(this.programme_doms[e]).addClass("active"),moveScrollPosition($("#epg-programmes-container"),$(this.programme_doms[e]).closest(".epg-programme-item-container"),"vertical",!1)},handleMenuClick:function(){var e=this.keys;"programme_selection"===e.focused_part&&(e=this.sorted_programmes[e.date_selection].programmes[e.programme_selection],$("#catchup-detail-page").addClass("hide"),vod_series_player.init(e,"epg","catch-up-detail","",!0))},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"programme_selection":t.programme_selection+=e,t.programme_selection<0?(t.programme_selection=0,this.selectDate(t.date_selection,!0,!1)):(t.programme_selection>=this.current_programmes.length&&(t.programme_selection=this.current_programmes.length-1),this.hoverProgramme(t.programme_selection));break;case"date_selection":0<e&&0<this.programme_doms.length&&this.hoverProgramme(0)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"date_selection":case"programme_selection":t.date_selection+=e,t.date_selection<0&&(t.date_selection=0),t.date_selection>=this.sorted_programmes.length&&(t.date_selection=this.sorted_programmes.length-1),t.focused_part,this.selectDate(t.date_selection,!0,!1)}},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RIGHT:epg_page.handleMenuLeftRight(1);break;case tvKey.LEFT:epg_page.handleMenuLeftRight(-1);break;case tvKey.DOWN:epg_page.handleMenusUpDown(1);break;case tvKey.UP:epg_page.handleMenusUpDown(-1);break;case tvKey.ENTER:epg_page.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_recent_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-recent-modal button"),prev_route:"",movie:null,movie_kind:"",init:function(e,t){this.movie_kind=t,this.prev_route=e,current_route="clear_recent_page",this.hoverMenuItem(0),$("#clear-recent-modal").modal("show")},goBack:function(){$("#clear-recent-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t=this.keys;if("vod"==e)VodModel.removeAllWatchList(),showToast("Successful","Movies Watch lists cleared successfully!");else if("series"==e)SeriesModel.removeAllWatchList(),showToast("Successful","Series Watch lists cleared successfully!");else if("menu_selection"===t.focused_part)switch(this.keys.menu_selection){case 1:("vod"===this.movie_kind?VodModel:SeriesModel).removeAllWatchList(),this.goBack();break;case 0:this.goBack()}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_cache_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$("#clear-cache-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="clear_cache_page",this.hoverMenuItem(0),$("#clear-cache-modal").modal("show")},goBack:function(){$("#clear-cache-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){window.location.reload()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t;e=e||!1,"menu_selection"===this.keys.focused_part&&(1==this.keys.menu_selection||e?(current_route="login-page",$("#clear-cache-modal").modal("hide"),t=[],Object.keys(localStorage).map(function(e){e.includes(storage_id)&&t.push(e)}),t.map(function(e){localStorage.removeItem(e)}),settings.resetDefaultValues(),this.reloadPage()):this.goBack())},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},subtitle_setting_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".subtitle-setting-item"),prev_route:"",init:function(e){$("#current-subtitle-size").text(settings.subtitle_size+"px"),this.prev_route=e,current_route="subtitle-setting-page",this.hoverMenuItem(0),$("#subtitle-setting-modal").modal("show")},goBack:function(){$("#subtitle-setting-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){$("#app").hide(),$("#setting-page").addClass("hide"),$(home_page.prev_focus_dom).removeClass("active"),home_page.prev_focus_dom=null,current_route="login-page",$(".home-page-sub-container").removeClass("hide"),$("#home-page").addClass("is-home"),$(setting_page.menu_doms).removeClass("active"),setting_page.keys.menu_selection=0,login_page.login()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},increaseSubtitleSize:function(e){var t=settings.subtitle_size;100<(t=(t+=e)<20?20:t)&&(t=100),$("#current-subtitle-size").text(t+"px"),$(".subtitle-container").css({"font-size":t/16+"rem"}),settings.saveSettings("subtitle_size",t,"")},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){0<e?this.hoverMenuItem(1):this.hoverMenuItem(0)},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},layout_page={keys:{focused_part:"menu_selection",menu_selection:0},menu_doms:$(".layout-setting-item"),prev_route:"",current_layout:1,init:function(e){this.current_layout=this.getLayoutChoice(),this.styleCurrentChoice(),this.prev_route=e,current_route="layout-page",this.current_layout&&0<=this.current_layout&&this.current_layout<this.menu_doms.length?this.hoverMenuItem(this.current_layout):this.hoverMenuItem(0),$("#layout-setting-modal").modal("show")},goBack:function(){$("#layout-setting-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},styleCurrentChoice:function(){$(this.menu_doms).removeClass("current"),$(this.menu_doms[this.current_layout]).addClass("current"),channel_page.setupCurrentLayout()},handleMenuClick:function(){var e=this.keys;$(this.menu_doms[e.menu_selection]).trigger("click")},changeLiveLayoutSetting:function(e){e!=this.current_layout&&(this.current_layout=e,this.storeLayoutChoice(e),this.styleCurrentChoice(),this.goBack())},storeLayoutChoice:function(e){e?localStorage.setItem(storage_id+"live_layout",e):localStorage.setItem(storage_id+"live_layout",0)},getLayoutChoice:function(){return parseInt(localStorage.getItem(storage_id+"live_layout"))},handleMenusUpDown:function(e){var t=this.keys;t.menu_selection+=e,t.menu_selection<0?t.menu_selection=0:t.menu_selection>=this.menu_doms.length?t.menu_selection=this.menu_doms.length-1:this.hoverMenuItem(t.menu_selection)},handleMenuLeftRight:function(e){},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},USE_CUSTOM_KEYBOARD=!1,processingInputFocus=!1;function handleVidaaZeasn(){if("vidaa"===platform||"zeasn"===platform||"titanos"===platform){USE_CUSTOM_KEYBOARD=!0;for(var e=document.querySelectorAll("div, span, p, img, section"),t=0;t<e.length;t++)e[t].setAttribute("tabindex","-1")}}function getOSPlatform(){window.navigator.userAgent.toLowerCase().includes("web0s")?platform="lg":window.navigator.userAgent.toLowerCase().includes("tizen")?platform="samsung":window.navigator.userAgent.toLowerCase().includes("hisense")||window.navigator.userAgent.toLowerCase().includes("vidaa")?platform="vidaa":window.navigator.userAgent.toLowerCase().includes("zeasn")||window.navigator.userAgent.toLowerCase().includes("whale")||window.navigator.userAgent.toLowerCase().includes("titano")||window.navigator.userAgent.toLowerCase().includes("philips")?platform="zeasn":window.navigator.userAgent.toLowerCase().includes("windows")&&(platform="windows")}function keyboardVisibilityChange(e){e.detail.visibility?key_focused=!0:(key_focused=!1,$("input").blur())}function isBackButtonPressed(e){if(27===e.keyCode)return!0;if(window.tvKey){if(e.keyCode===tvKey.RETURN)return!0;if("samsung"===platform&&10009===e.keyCode)return!0;if("lg"===platform&&461===e.keyCode)return!0;if(("vidaa"===platform||"zeasn"==platform||"titanos"===platform)&&8===e.keyCode)return!0}return!1}function initPlatformKeyboard(){if("samsung"===platform){document.addEventListener("visibilitychange",function(){document.hidden?webapis.avplay.suspend():webapis.avplay.restore()});for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var i=e[t];i.addEventListener("focus",function(){console.log("input element is focused and ready to get user input."),key_focused=!0}),i.addEventListener("blur",function(){console.log("input element loses focus."),key_focused=!1})}}else if("lg"===platform)document.addEventListener("keyboardStateChange",keyboardVisibilityChange,!1);else if("vidaa"===platform||"zeasn"==platform||"titanos"===platform){window.lastFocusedInput=null;for(var s=document.getElementsByTagName("input"),t=0;t<s.length;t++)s[t].addEventListener("click",function(e){e.preventDefault(),e.stopPropagation()})}document.addEventListener("keydown",function(e){var t=document.activeElement;if(13===e.keyCode&&t&&"INPUT"===t.tagName&&(!USE_CUSTOM_KEYBOARD||!custom_keyboard.isShown))return e.preventDefault(),e.stopPropagation(),t.blur(),!1})}function initCustomKeyboard(){custom_keyboard.init();for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var i=e[t];i.removeEventListener("focus",inputFocusHandler),i.removeEventListener("blur",inputBlurHandler),i.addEventListener("focus",inputFocusHandler),i.addEventListener("blur",inputBlurHandler),i.addEventListener("click",function(e){USE_CUSTOM_KEYBOARD&&(e.preventDefault(),e.stopPropagation(),custom_keyboard.isShown||this.focus())})}"lg"===platform&&document.addEventListener("keyboardStateChange",function(e){var t;USE_CUSTOM_KEYBOARD&&e.detail.visibility&&(console.log("Native keyboard trying to show - suppressing"),t=document.activeElement)&&"INPUT"===t.tagName&&(t.blur(),setTimeout(function(){custom_keyboard.show(t)},50))},!1),document.addEventListener("keydown",function(e){if(isBackButtonPressed(e)&&custom_keyboard.isShown)return custom_keyboard.hide(),e.preventDefault(),e.stopPropagation(),!1},!0)}function inputFocusHandler(){processingInputFocus||(processingInputFocus=!0,console.log("input element is focused and ready to show custom keyboard."),key_focused=!0,custom_keyboard.isShown||custom_keyboard.show(this),setTimeout(function(){processingInputFocus=!1},50))}function inputBlurHandler(){processingInputFocus||(console.log("input element loses focus."),key_focused=!1,setTimeout(function(){processingInputFocus||document.activeElement&&$(document.activeElement).hasClass("keyboard-key")||custom_keyboard.hide()},100))}$(document).ready(function(){window.navigator.userAgent.toLowerCase().includes("web0s")?platform="lg":window.navigator.userAgent.toLowerCase().includes("tizen")?platform="samsung":window.navigator.userAgent.toLowerCase().includes("hisense")||window.navigator.userAgent.toLowerCase().includes("vidaa")?platform="vidaa":-1!==window.navigator.userAgent.toLowerCase().indexOf("titano")?platform="titanos":window.navigator.userAgent.toLowerCase().includes("zeasn")||window.navigator.userAgent.toLowerCase().includes("whale")||window.navigator.userAgent.toLowerCase().includes("titano")||window.navigator.userAgent.toLowerCase().includes("philips")?platform="zeasn":window.navigator.userAgent.toLowerCase().includes("windows")&&(platform="windows"),handleVidaaZeasn(),$("#app").addClass(platform),initKeys(),initPlayer(),settings.initFromLocal();var e=localStorage.getItem(storage_id+"parent_account_password");parent_account_password=null!=e?e:parent_account_password,"samsung"===platform?($("#vod-series-player-video-lg").hide(),$("#channel-page-video-lg").hide(),$("#home-page-player-lg").hide()):"lg"!==platform&&"vidaa"!==platform&&"zeasn"!==platform&&"titanos"!==platform||($("#vod-series-player-video").hide(),$("#channel-page-video").hide(),$("#home-page-player").hide()),login_page.getPlayListDetail(),(USE_CUSTOM_KEYBOARD?initCustomKeyboard:initPlatformKeyboard)(),document.addEventListener("keydown",function(e){if(isBackButtonPressed(e)&&USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown)custom_keyboard.hide(),e.preventDefault(),e.stopPropagation();else if(!(USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown&&custom_keyboard.handleRemoteKeys(e))){if("samsung"===platform)switch(e.keyCode==tvKey.EXIT&&tizen.application.getCurrentApplication().exit(),e.keyCode){case 65376:case 65385:return void $("input").blur()}else if("vidaa"===platform||"zeasn"===platform||"titanos"===platform){var t=document.activeElement,i=t&&"INPUT"===t.tagName;switch(e.keyCode){case 13:if(i){if(key_focused)key_focused=!1,"search-page-input"===t.id&&search_page.keywordChange(),t.blur(),document.activeElement&&document.activeElement.blur(),window.lastFocusedInput=null;else if(window.lastFocusedInput=t,key_focused=!0,USE_CUSTOM_KEYBOARD)return custom_keyboard.show(t),e.preventDefault(),void e.stopPropagation();return e.preventDefault(),void e.stopPropagation()}break;case tvKey.RETURN:case 27:if(USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown)return custom_keyboard.hide(),key_focused=!1,e.preventDefault(),void e.stopPropagation();if(key_focused)return key_focused=!1,t&&t.blur(),document.activeElement&&document.activeElement.blur(),window.lastFocusedInput=null,e.preventDefault(),void e.stopPropagation();break;case 37:case 38:case 39:case 40:if(key_focused)return e.preventDefault(),void e.stopPropagation();i&&(t.blur(),document.activeElement)&&document.activeElement.blur()}e.keyCode!=tvKey.EXIT&&e.preventDefault()}if(!app_loading)switch(current_route){case"login-page":login_page.HandleKey(e);break;case"home-page":home_page.HandleKey(e);break;case"channel-page":channel_page.HandleKey(e);break;case"vod-series-page":vod_series_page.HandleKey(e);break;case"vod-summary-page":vod_summary_page.HandleKey(e);break;case"vod-series-player-video":vod_series_player.HandleKey(e);break;case"trailer-page":trailer_page.HandleKey(e);break;case"seasons-page":seasons_variable.HandleKey(e);break;case"episode-page":episode_variable.HandleKey(e);break;case"series-summary-page":series_summary_page.HandleKey(e);break;case"playlist-page":playlist_page.HandleKey(e);break;case"account-page":account_page.HandleKey(e);break;case"settings-page":settings_page.HandleKey(e);break;case"parent-confirm-page":parent_confirm_page.HandleKey(e);break;case"turn-off-page":turn_off_page.HandleKey(e);break;case"activation-page":activation_page.HandleKey(e);break;case"playlist-edit-page":playlist_edit_page.HandleKey(e);break;case"category-selection-page":category_selection_page.HandleKey(e);break;case"search-page":search_page.HandleKey(e);break;case"catchup-page":catchup_page.HandleKey(e);break;case"catch-up-detail":epg_page.HandleKey(e);break;case"clear_recent_page":clear_recent_page.HandleKey(e);break;case"clear_cache_page":clear_cache_page.HandleKey(e);break;case"subtitle-setting-page":subtitle_setting_page.HandleKey(e);break;case"layout-page":layout_page.HandleKey(e);break;case"color-theme-page":color_theme_page.HandleKey(e)}}}),$(".subtitle-container").css({"font-size":settings.subtitle_size/16+"rem",color:settings_page.subtitle_bg_options[settings.subtitle_bg].color,"background-color":settings_page.subtitle_bg_options[settings.subtitle_bg].background}),updateTimeStr(),setInterval(function(){updateTimeStr()},3e4)}),document.addEventListener("keydown",function(e){if(custom_keyboard&&custom_keyboard.isShown&&13===e.keyCode){var t=document.activeElement;if(t&&"keyboard-enter"===t.id)return console.log("Enter key pressed on Enter button via remote, hiding keyboard"),custom_keyboard.currentInput&&"search-page-input"===custom_keyboard.currentInput.id&&search_page.keywordChange(),custom_keyboard.hide(),key_focused=!1,e.preventDefault(),e.stopPropagation(),!1}},!0);