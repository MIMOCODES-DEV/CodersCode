!function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}(this,function(){var i=(c=Math,A=Object.create||function(e){var e;return Ie.prototype=e,e=new Ie,Ie.prototype=null,e},e={},t=e.lib={},s=t.Base={extend:function(e){var t=A(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=t.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=N?t:4*e.length},toString:function(e){return(e||D).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,a=e.sigBytes;if(this.clamp(),s%4)for(var o=0;o<a;o++){var n=i[o>>>2]>>>24-o%4*8&255;t[s+o>>>2]|=n<<24-(s+o)%4*8}else for(var o=0;o<a;o+=4)t[s+o>>>2]=i[o>>>2];return this.sigBytes+=a,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,i=[],s=function(t){var t=t,i=987654321,s=4294967295;return function(){i=36969*(65535&i)+(i>>16)&s,t=18e3*(65535&t)+(t>>16)&s;var e=(i<<16)+t&s;return e/=4294967296,e+=.5,e*(.5<c.random()?1:-1)}},a=0;a<e;a+=4){var o=s(4294967296*(t||c.random())),t=987654071*o();i.push(4294967296*o()|0)}return new d.init(i,e)}}),a=e.enc={},D=a.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a++){var o=t[a>>>2]>>>24-a%4*8&255;s.push((o>>>4).toString(16)),s.push((15&o).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new d.init(i,t/2)}},F=a.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a++){var o=t[a>>>2]>>>24-a%4*8&255;s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new d.init(i,t)}},K=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(F.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return F.parse(unescape(encodeURIComponent(e)))}},z=t.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=K.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,s=t.sigBytes,a=this.blockSize,o=4*a,o=s/o,o=e?c.ceil(o):c.max((0|o)-this._minBufferSize,0),n=o*a,e=c.min(4*n,s);if(n){for(var r=0;r<n;r+=a)this._doProcessBlock(i,r);var l=i.splice(0,n);t.sigBytes-=e}return new d.init(l,e)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=z.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){z.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new H.HMAC.init(i,t).finalize(e)}}}),H=e.algo={},e),c,N,A,e,t,s,d,a,D,F,K,z,H,t,o,a,n,r,l,h,e,e,n,t,e,o,n,_,u,m,a,a,n,t,a,e,n,U,o,e,t,j,n,a,V,W,q,G,J,Y,o,X,t,e,Z,a,Q,o,n,o,a,e,ee,a,o,t,te,ie,e,se,e,ae,oe,e,n,n,e,e,ne,n,e,re,n,t,le,e,t,a,p,ce,o,de,e,he,o,a,_e,ue,e,e,o,me,a,pe,t,t,a,o,ge,e,a,ve,e,t,a,fe,t,o,ye,be,e,t,a,t,ke,t,we,t,a,g,Ce,e,$e,Se,Me,Be,Te,xe,a,a,t,e,Le,a,t,a,Oe,e,e,t,Pe,Ee,a,v,t,a,t,Re,e;function Ie(){}a=i,t=a.lib,Re=t.WordArray,e=a.enc,e.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var a=[],o=0;o<i;o+=3)for(var n=t[o>>>2]>>>24-o%4*8&255,r=t[o+1>>>2]>>>24-(o+1)%4*8&255,l=t[o+2>>>2]>>>24-(o+2)%4*8&255,c=n<<16|r<<8|l,d=0;d<4&&o+.75*d<i;d++)a.push(s.charAt(c>>>6*(3-d)&63));var h=s.charAt(64);if(h)for(;a.length%4;)a.push(h);return a.join("")},parse:function(e){var t=e.length,i=this._map,s=this._reverseMap;if(!s)for(var s=this._reverseMap=[],a=0;a<i.length;a++)s[i.charCodeAt(a)]=a;var o=i.charAt(64),o;return o&&(o=e.indexOf(o),-1!==o)&&(t=o),qt(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};var Ne=Math;function M(e,t,i,s,a,o,n){var e=e+(t&i|~t&s)+a+n;return(e<<o|e>>>32-o)+t}function B(e,t,i,s,a,o,n){var e=e+(t&s|i&~s)+a+n;return(e<<o|e>>>32-o)+t}function T(e,t,i,s,a,o,n){var e=e+(t^i^s)+a+n;return(e<<o|e>>>32-o)+t}function x(e,t,i,s,a,o,n){var e=e+(i^(t|~s))+a+n;return(e<<o|e>>>32-o)+t}for(var t=i,a=t.lib,Ae=a.WordArray,De=a.Hasher,e=t.algo,L=[],Fe=0;Fe<64;Fe++)L[Fe]=4294967296*Ne.abs(Ne.sin(Fe+1))|0;var a=e.MD5=De.extend({_doReset:function(){this._hash=new Ae.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,a=e[s];e[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,n=e[t+0],r=e[t+1],l=e[t+2],c=e[t+3],d=e[t+4],h=e[t+5],_=e[t+6],u=e[t+7],m=e[t+8],p=e[t+9],g=e[t+10],v=e[t+11],f=e[t+12],y=e[t+13],b=e[t+14],k=e[t+15],w=o[0],C=o[1],$=o[2],S=o[3],w=M(w,C,$,S,n,7,L[0]),S=M(S,w,C,$,r,12,L[1]),$=M($,S,w,C,l,17,L[2]),C=M(C,$,S,w,c,22,L[3]);w=M(w,C,$,S,d,7,L[4]),S=M(S,w,C,$,h,12,L[5]),$=M($,S,w,C,_,17,L[6]),C=M(C,$,S,w,u,22,L[7]),w=M(w,C,$,S,m,7,L[8]),S=M(S,w,C,$,p,12,L[9]),$=M($,S,w,C,g,17,L[10]),C=M(C,$,S,w,v,22,L[11]),w=M(w,C,$,S,f,7,L[12]),S=M(S,w,C,$,y,12,L[13]),$=M($,S,w,C,b,17,L[14]),C=M(C,$,S,w,k,22,L[15]),w=B(w,C,$,S,r,5,L[16]),S=B(S,w,C,$,_,9,L[17]),$=B($,S,w,C,v,14,L[18]),C=B(C,$,S,w,n,20,L[19]),w=B(w,C,$,S,h,5,L[20]),S=B(S,w,C,$,g,9,L[21]),$=B($,S,w,C,k,14,L[22]),C=B(C,$,S,w,d,20,L[23]),w=B(w,C,$,S,p,5,L[24]),S=B(S,w,C,$,b,9,L[25]),$=B($,S,w,C,c,14,L[26]),C=B(C,$,S,w,m,20,L[27]),w=B(w,C,$,S,y,5,L[28]),S=B(S,w,C,$,l,9,L[29]),$=B($,S,w,C,u,14,L[30]),C=B(C,$,S,w,f,20,L[31]),w=T(w,C,$,S,h,4,L[32]),S=T(S,w,C,$,m,11,L[33]),$=T($,S,w,C,v,16,L[34]),C=T(C,$,S,w,b,23,L[35]),w=T(w,C,$,S,r,4,L[36]),S=T(S,w,C,$,d,11,L[37]),$=T($,S,w,C,u,16,L[38]),C=T(C,$,S,w,g,23,L[39]),w=T(w,C,$,S,y,4,L[40]),S=T(S,w,C,$,n,11,L[41]),$=T($,S,w,C,c,16,L[42]),C=T(C,$,S,w,_,23,L[43]),w=T(w,C,$,S,p,4,L[44]),S=T(S,w,C,$,f,11,L[45]),$=T($,S,w,C,k,16,L[46]),C=T(C,$,S,w,l,23,L[47]),w=x(w,C,$,S,n,6,L[48]),S=x(S,w,C,$,u,10,L[49]),$=x($,S,w,C,b,15,L[50]),C=x(C,$,S,w,h,21,L[51]),w=x(w,C,$,S,f,6,L[52]),S=x(S,w,C,$,c,10,L[53]),$=x($,S,w,C,g,15,L[54]),C=x(C,$,S,w,r,21,L[55]),w=x(w,C,$,S,m,6,L[56]),S=x(S,w,C,$,k,10,L[57]),$=x($,S,w,C,_,15,L[58]),C=x(C,$,S,w,y,21,L[59]),w=x(w,C,$,S,d,6,L[60]),S=x(S,w,C,$,v,10,L[61]),$=x($,S,w,C,l,15,L[62]),C=x(C,$,S,w,p,21,L[63]),o[0]=o[0]+w|0,o[1]=o[1]+C|0,o[2]=o[2]+$|0,o[3]=o[3]+S|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes,a=(t[s>>>5]|=128<<24-s%32,Ne.floor(i/4294967296)),i=i;t[15+(64+s>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t[14+(64+s>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,o=a.words,n=0;n<4;n++){var r=o[n];o[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}return a},clone:function(){var e=De.clone.call(this);return e._hash=this._hash.clone(),e}}),Ke=(t.MD5=De._createHelper(a),t.HmacMD5=De._createHmacHelper(a),e=i,t=e.lib,Pe=t.WordArray,Ee=t.Hasher,a=e.algo,v=[],t=a.SHA1=Ee.extend({_doReset:function(){this._hash=new Pe.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],a=i[1],o=i[2],n=i[3],r=i[4],l=0;l<80;l++){var c,c=(l<16?v[l]=0|e[t+l]:(c=v[l-3]^v[l-8]^v[l-14]^v[l-16],v[l]=c<<1|c>>>31),(s<<5|s>>>27)+r+v[l]);c+=l<20?1518500249+(a&o|~a&n):l<40?1859775393+(a^o^n):l<60?(a&o|a&n|o&n)-1894007588:(a^o^n)-899497514,r=n,n=o,o=a<<30|a>>>2,a=s,s=c}i[0]=i[0]+s|0,i[1]=i[1]+a|0,i[2]=i[2]+o|0,i[3]=i[3]+n|0,i[4]=i[4]+r|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=Math.floor(i/4294967296),t[15+(64+s>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=Ee.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=Ee._createHelper(t),e.HmacSHA1=Ee._createHmacHelper(t),Math),a=i,e=a.lib,ze=e.WordArray,He=e.Hasher,t=a.algo,Ue=[],je=[];function Ve(e){for(var t=Ke.sqrt(e),i=2;i<=t;i++)if(!(e%i))return;return 1}function We(e){return 4294967296*(e-(0|e))|0}for(var qe=2,Ge=0;Ge<64;)Ve(qe)&&(Ge<8&&(Ue[Ge]=We(Ke.pow(qe,.5))),je[Ge]=We(Ke.pow(qe,1/3)),Ge++),qe++;for(var f=[],e=t.SHA256=He.extend({_doReset:function(){this._hash=new ze.init(Ue.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],a=i[1],o=i[2],n=i[3],r=i[4],l=i[5],c=i[6],d=i[7],h=0;h<64;h++)var _,_,u,u,_=(h<16?f[h]=0|e[t+h]:(_=f[h-15],_=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,u=f[h-2],u=(u<<15|u>>>17)^(u<<13|u>>>19)^u>>>10,f[h]=_+f[h-7]+u+f[h-16]),r&l^~r&c),u=s&a^s&o^a&o,m=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),p=(r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25),p=d+p+_+je[h]+f[h],m=m+u,d=c,c=l,l=r,r=n+p|0,n=o,o=a,a=s,s=p+m|0;i[0]=i[0]+s|0,i[1]=i[1]+a|0,i[2]=i[2]+o|0,i[3]=i[3]+n|0,i[4]=i[4]+r|0,i[5]=i[5]+l|0,i[6]=i[6]+c|0,i[7]=i[7]+d|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=Ke.floor(i/4294967296),t[15+(64+s>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=He.clone.call(this);return e._hash=this._hash.clone(),e}}),Je=(a.SHA256=He._createHelper(e),a.HmacSHA256=He._createHmacHelper(e),t=i,a=t.lib,Oe=a.WordArray,e=t.enc,e.Utf16=e.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a+=2){var o=t[a>>>2]>>>16-a%4*8&65535;s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>1]|=e.charCodeAt(s)<<16-s%2*16;return Oe.create(i,2*t)}},e.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a+=2){var o=Wt(t[a>>>2]>>>16-a%4*8&65535);s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>1]|=Wt(e.charCodeAt(s)<<16-s%2*16);return Oe.create(i,2*t)}},"function"==typeof ArrayBuffer&&(a=i,t=a.lib,e=t.WordArray,Le=e.init,a=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],s=0;s<t;s++)i[s>>>2]|=e[s]<<24-s%4*8;Le.call(this,i,t)}else Le.apply(this,arguments)},a.prototype=e),we=Math,t=i,a=t.lib,g=a.WordArray,Ce=a.Hasher,e=t.algo,$e=g.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),Se=g.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),Me=g.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Be=g.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Te=g.create([0,1518500249,1859775393,2400959708,2840853838]),xe=g.create([1352829926,1548603684,1836072691,2053994217,0]),a=e.RIPEMD160=Ce.extend({_doReset:function(){this._hash=g.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,a=e[s];e[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}for(var o,n,r,l,c,d,h,_,u,m,p=this._hash.words,g=Te.words,v=xe.words,f=$e.words,y=Se.words,b=Me.words,k=Be.words,d=o=p[0],h=n=p[1],_=r=p[2],u=l=p[3],m=c=p[4],w,i=0;i<80;i+=1)w=o+e[t+f[i]]|0,w+=i<16?(n^r^l)+g[0]:i<32?zt(n,r,l)+g[1]:i<48?((n|~r)^l)+g[2]:i<64?Ut(n,r,l)+g[3]:(n^(r|~l))+g[4],w|=0,w=Vt(w,b[i]),w=w+c|0,o=c,c=l,l=Vt(r,10),r=n,n=w,w=d+e[t+y[i]]|0,w+=i<16?(h^(_|~u))+v[0]:i<32?Ut(h,_,u)+v[1]:i<48?((h|~_)^u)+v[2]:i<64?zt(h,_,u)+v[3]:(h^_^u)+v[4],w|=0,w=Vt(w,k[i]),w=w+m|0,d=m,m=u,u=Vt(_,10),_=h,h=w;w=p[1]+r+u|0,p[1]=p[2]+l+m|0,p[2]=p[3]+c+d|0,p[3]=p[4]+o+h|0,p[4]=p[0]+n+_|0,p[0]=w},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,a=s.words,o=0;o<5;o++){var n=a[o];a[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}return s},clone:function(){var e=Ce.clone.call(this);return e._hash=this._hash.clone(),e}}),t.RIPEMD160=Ce._createHelper(a),t.HmacRIPEMD160=Ce._createHmacHelper(a),e=i,t=e.lib,a=t.Base,t=e.enc,ke=t.Utf8,t=e.algo,t.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=ke.parse(t));var i=e.blockSize,s=4*i;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),a=e.words,o=t.words,n=0;n<i;n++)a[n]^=1549556828,o[n]^=909522486;e.sigBytes=t.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e),t=(t.reset(),t.finalize(this._oKey.clone().concat(e)));return t}}),e=i,t=e.lib,a=t.Base,fe=t.WordArray,t=e.algo,o=t.SHA1,ye=t.HMAC,be=t.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=ye.create(i.hasher,e),a=fe.create(),o=fe.create([1]),n=a.words,r=o.words,l=i.keySize,c=i.iterations;n.length<l;){var d=s.update(t).finalize(o);s.reset();for(var h=d.words,_=h.length,u=d,m=1;m<c;m++){u=s.finalize(u),s.reset();for(var p=u.words,g=0;g<_;g++)h[g]^=p[g]}a.concat(d),r[0]++}return a.sigBytes=4*l,a}}),e.PBKDF2=function(e,t,i){return be.create(i).compute(e,t)},t=i,a=t.lib,o=a.Base,ge=a.WordArray,e=t.algo,a=e.MD5,ve=e.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=i.hasher.create(),a=ge.create(),o=a.words,n=i.keySize,r=i.iterations;o.length<n;){l&&s.update(l);var l=s.update(e).finalize(t);s.reset();for(var c=1;c<r;c++)l=s.finalize(l),s.reset();a.concat(l)}return a.sigBytes=4*n,a}}),t.EvpKDF=function(e,t,i){return ve.create(i).compute(e,t)},e=i,o=e.lib,me=o.WordArray,a=e.algo,pe=a.SHA256,t=a.SHA224=pe.extend({_doReset:function(){this._hash=new me.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=pe._doFinalize.call(this);return e.sigBytes-=4,e}}),e.SHA224=pe._createHelper(t),e.HmacSHA224=pe._createHmacHelper(t),o=i,a=o.lib,_e=a.Base,ue=a.WordArray,e=o.x64={},e.Word=_e.extend({init:function(e,t){this.high=e,this.low=t}}),e.WordArray=_e.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=he?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],s=0;s<t;s++){var a=e[s];i.push(a.high),i.push(a.low)}return ue.create(i,this.sigBytes)},clone:function(){for(var e=_e.clone.call(this),t=e.words=this.words.slice(0),i=t.length,s=0;s<i;s++)t[s]=t[s].clone();return e}}),Math),t=i,a=t.lib,Ye=a.WordArray,Xe=a.Hasher,o=t.x64,Ze=o.Word,e=t.algo,Qe=[],et=[],tt=[],y=1,b=0,it=0;it<24;it++){Qe[y+5*b]=(it+1)*(it+2)/2%64;var st=b%5,at=(2*y+3*b)%5;y=st,b=at}for(var y=0;y<5;y++)for(var b=0;b<5;b++)et[y+5*b]=b+(2*y+3*b)%5*5;for(var ot=1,nt=0;nt<24;nt++){for(var rt=0,lt=0,ct=0,dt;ct<7;ct++)1&ot&&(dt=(1<<ct)-1,dt<32?lt^=1<<dt:rt^=1<<dt-32),128&ot?ot=ot<<1^113:ot<<=1;tt[nt]=Ze.create(rt,lt)}for(var O=[],ht=0;ht<25;ht++)O[ht]=Ze.create();var a=e.SHA3=Xe.extend({cfg:Xe.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new Ze.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,s=this.blockSize/2,a=0;a<s;a++){var o=e[t+2*a],n=e[t+2*a+1],o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),r=i[a];r.high^=n,r.low^=o}for(var l=0;l<24;l++){for(var c=0;c<5;c++){for(var d=0,h=0,_=0;_<5;_++){var r=i[c+5*_];d^=r.high,h^=r.low}var u=O[c];u.high=d,u.low=h}for(var c=0;c<5;c++)for(var m=O[(c+4)%5],p=O[(c+1)%5],g=p.high,p=p.low,d=m.high^(g<<1|p>>>31),h=m.low^(p<<1|g>>>31),_=0;_<5;_++){var r=i[c+5*_];r.high^=d,r.low^=h}for(var v=1;v<25;v++){var r=i[v],f=r.high,y=r.low,b=Qe[v],d,h,d,h,f=(h=b<32?(d=f<<b|y>>>32-b,y<<b|f>>>32-b):(d=y<<b-32|f>>>64-b,f<<b-32|y>>>64-b),O[et[v]]);f.high=d,f.low=h}var k=O[0],w=i[0];k.high=w.high,k.low=w.low;for(var c=0;c<5;c++)for(var _=0;_<5;_++){var v=c+5*_,r=i[v],C=O[v],$=O[(c+1)%5+5*_],S=O[(c+2)%5+5*_];r.high=C.high^~$.high&S.high,r.low=C.low^~$.low&S.low}var r=i[0],k=tt[l];r.high^=k.high,r.low^=k.low}},_doFinalize:function(){var e=this._data,t=e.words,i=(this._nDataBytes,8*e.sigBytes),s=32*this.blockSize;t[i>>>5]|=1<<24-i%32,t[(Je.ceil((1+i)/s)*s>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var a=this._state,i=this.cfg.outputLength/8,o=i/8,n=[],r=0;r<o;r++){var l=a[r],c=l.high,l=l.low,c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8);n.push(l),n.push(c)}return new Ye.init(n,i)},clone:function(){for(var e=Xe.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});function k(){return w.create.apply(w,arguments)}t.SHA3=Xe._createHelper(a),t.HmacSHA3=Xe._createHmacHelper(a);for(var o=i,e=o.lib,_t=e.Hasher,t=o.x64,w=t.Word,ut=t.WordArray,a=o.algo,mt=[k(1116352408,3609767458),k(1899447441,602891725),k(3049323471,3964484399),k(3921009573,2173295548),k(961987163,4081628472),k(1508970993,3053834265),k(2453635748,2937671579),k(2870763221,3664609560),k(3624381080,2734883394),k(310598401,1164996542),k(607225278,1323610764),k(1426881987,3590304994),k(1925078388,4068182383),k(2162078206,991336113),k(2614888103,633803317),k(3248222580,3479774868),k(3835390401,2666613458),k(4022224774,944711139),k(264347078,2341262773),k(604807628,2007800933),k(770255983,1495990901),k(1249150122,1856431235),k(1555081692,3175218132),k(1996064986,2198950837),k(2554220882,3999719339),k(2821834349,766784016),k(2952996808,2566594879),k(3210313671,3203337956),k(3336571891,1034457026),k(3584528711,2466948901),k(113926993,3758326383),k(338241895,168717936),k(666307205,1188179964),k(773529912,1546045734),k(1294757372,1522805485),k(1396182291,2643833823),k(1695183700,2343527390),k(1986661051,1014477480),k(2177026350,1206759142),k(2456956037,344077627),k(2730485921,1290863460),k(2820302411,3158454273),k(3259730800,3505952657),k(3345764771,106217008),k(3516065817,3606008344),k(3600352804,1432725776),k(4094571909,1467031594),k(275423344,851169720),k(430227734,3100823752),k(506948616,1363258195),k(659060556,3750685593),k(883997877,3785050280),k(958139571,3318307427),k(1322822218,3812723403),k(1537002063,2003034995),k(1747873779,3602036899),k(1955562222,1575990012),k(2024104815,1125592928),k(2227730452,2716904306),k(2361852424,442776044),k(2428436474,593698344),k(2756734187,3733110249),k(3204031479,2999351573),k(3329325298,3815920427),k(3391569614,3928383900),k(3515267271,566280711),k(3940187606,3454069534),k(4118630271,4000239992),k(116418474,1914138554),k(174292421,2731055270),k(289380356,3203993006),k(460393269,320620315),k(685471733,587496836),k(852142971,1086792851),k(1017036298,365543100),k(1126000580,2618297676),k(1288033470,3409855158),k(1501505948,4234509866),k(1607167915,987167468),k(1816402316,1246189591)],pt=[],gt=0;gt<80;gt++)pt[gt]=k();var e=a.SHA512=_t.extend({_doReset:function(){this._hash=new ut.init([new w.init(1779033703,4089235720),new w.init(3144134277,2227873595),new w.init(1013904242,4271175723),new w.init(2773480762,1595750129),new w.init(1359893119,2917565137),new w.init(2600822924,725511199),new w.init(528734635,4215389547),new w.init(1541459225,327033209)])},_doProcessBlock:function(N,A){for(var e=this._hash.words,t=e[0],i=e[1],s=e[2],a=e[3],o=e[4],n=e[5],r=e[6],e=e[7],D=t.high,l=t.low,F=i.high,c=i.low,K=s.high,d=s.low,z=a.high,h=a.low,H=o.high,_=o.low,U=n.high,u=n.low,j=r.high,m=r.low,V=e.high,p=e.low,g=D,v=l,f=F,y=c,b=K,k=d,W=z,w=h,C=H,$=_,q=U,S=u,G=j,J=m,Y=V,X=p,M=0;M<80;M++)var B=pt[M],T,x,L,O,L,Z,L,O,P,O,Q,O,P,ee,P,E,te,E,x,T,x,T,x,T,P=(M<16?(T=B.high=0|N[A+2*M],x=B.low=0|N[A+2*M+1]):(L=pt[M-15],O=L.high,L=L.low,Z=(O>>>1|L<<31)^(O>>>8|L<<24)^O>>>7,L=(L>>>1|O<<31)^(L>>>8|O<<24)^(L>>>7|O<<25),O=pt[M-2],P=O.high,O=O.low,Q=(P>>>19|O<<13)^(P<<3|O>>>29)^P>>>6,O=(O>>>19|P<<13)^(O<<3|P>>>29)^(O>>>6|P<<26),P=pt[M-7],ee=P.high,P=P.low,E=pt[M-16],te=E.high,E=E.low,x=L+P,T=Z+ee+(x>>>0<L>>>0?1:0),x+=O,T=T+Q+(x>>>0<O>>>0?1:0),x+=E,T=T+te+(x>>>0<E>>>0?1:0),B.high=T,B.low=x),C&q^~C&G),Z=$&S^~$&J,ee=g&f^g&b^f&b,L=v&y^v&k^y&k,Q=(g>>>28|v<<4)^(g<<30|v>>>2)^(g<<25|v>>>7),O=(v>>>28|g<<4)^(v<<30|g>>>2)^(v<<25|g>>>7),te=(C>>>14|$<<18)^(C>>>18|$<<14)^(C<<23|$>>>9),E=($>>>14|C<<18)^($>>>18|C<<14)^($<<23|C>>>9),B=mt[M],ie=B.high,B=B.low,R=X+E,I=Y+te+(R>>>0<X>>>0?1:0),R=R+Z,I=I+P+(R>>>0<Z>>>0?1:0),R=R+B,I=I+ie+(R>>>0<B>>>0?1:0),R=R+x,I=I+T+(R>>>0<x>>>0?1:0),ie=O+L,B=Q+ee+(ie>>>0<O>>>0?1:0),Y=G,X=J,G=q,J=S,q=C,S=$,$=w+R|0,C=W+I+($>>>0<w>>>0?1:0)|0,W=b,w=k,b=f,k=y,f=g,y=v,v=R+ie|0,g=I+B+(v>>>0<R>>>0?1:0)|0;l=t.low=l+v,t.high=D+g+(l>>>0<v>>>0?1:0),c=i.low=c+y,i.high=F+f+(c>>>0<y>>>0?1:0),d=s.low=d+k,s.high=K+b+(d>>>0<k>>>0?1:0),h=a.low=h+w,a.high=z+W+(h>>>0<w>>>0?1:0),_=o.low=_+$,o.high=H+C+(_>>>0<$>>>0?1:0),u=n.low=u+S,n.high=U+q+(u>>>0<S>>>0?1:0),m=r.low=m+J,r.high=j+G+(m>>>0<J>>>0?1:0),p=e.low=p+X,e.high=V+Y+(p>>>0<X>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes,s=(t[s>>>5]|=128<<24-s%32,t[30+(128+s>>>10<<5)]=Math.floor(i/4294967296),t[31+(128+s>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32());return s},clone:function(){var e=_t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});o.SHA512=_t._createHelper(e),o.HmacSHA512=_t._createHmacHelper(e),t=i,a=t.x64,p=a.Word,ce=a.WordArray,o=t.algo,de=o.SHA512,e=o.SHA384=de.extend({_doReset:function(){this._hash=new ce.init([new p.init(3418070365,3238371032),new p.init(1654270250,914150663),new p.init(2438529370,812702999),new p.init(355462360,4144912697),new p.init(1731405415,4290775857),new p.init(2394180231,1750603025),new p.init(3675008525,1694076839),new p.init(1203062813,3204075428)])},_doFinalize:function(){var e=de._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=de._createHelper(e),t.HmacSHA384=de._createHmacHelper(e),i.lib.Cipher||(a=i,o=a.lib,t=o.Base,te=o.WordArray,ie=o.BufferedBlockAlgorithm,e=a.enc,e.Utf8,se=e.Base64,e=a.algo,ae=e.EvpKDF,oe=o.Cipher=ie.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){ie.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var e=this._doFinalize();return e},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(s){return{encrypt:function(e,t,i){return Ft(t).encrypt(s,e,t,i)},decrypt:function(e,t,i){return Ft(t).decrypt(s,e,t,i)}}}}),o.StreamCipher=oe.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),e=a.mode={},n=o.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),n=e.CBC=(e=n.extend(),e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize;Dt.call(this,e,t,s),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=e.slice(t,t+s);i.decryptBlock(e,t),Dt.call(this,e,t,s),this._prevBlock=a}}),e),e=a.pad={},e=e.Pkcs7={pad:function(e,t){for(var t=4*t,i=t-e.sigBytes%t,s=i<<24|i<<16|i<<8|i,a=[],o=0;o<i;o+=4)a.push(s);var t=te.create(a,i);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.BlockCipher=oe.extend({cfg:oe.cfg.extend({mode:n,padding:e}),reset:function(){oe.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode,i,i;this._xformMode==this._ENC_XFORM_MODE?i=e.createEncryptor:(i=e.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==i?this._mode.init(this,t&&t.words):(this._mode=i.call(e,this,t&&t.words),this._mode.__creator=i)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding,t,t;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),ne=o.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),n=a.format={},e=n.OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt,e,e;return e=e?te.create([1398893684,1701076831]).concat(e).concat(t):t,e.toString(se)},parse:function(e){var e=se.parse(e),t=e.words,i;return 1398893684==t[0]&&1701076831==t[1]&&(i=te.create(t.slice(2,4)),t.splice(0,4),e.sigBytes-=16),ne.create({ciphertext:e,salt:i})}},re=o.SerializableCipher=t.extend({cfg:t.extend({format:e}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var a=e.createEncryptor(i,s),t=a.finalize(t),a=a.cfg;return ne.create({ciphertext:t,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);var e=e.createDecryptor(i,s).finalize(t.ciphertext);return e},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),n=a.kdf={},t=n.OpenSSL={execute:function(e,t,i,s){s=s||te.random(8);var e=ae.create({keySize:t+i}).compute(e,s),i=te.create(e.words.slice(t),4*i);return e.sigBytes=4*t,ne.create({key:e,iv:i,salt:s})}},le=o.PasswordBasedCipher=re.extend({cfg:re.cfg.extend({kdf:t}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var i=s.kdf.execute(i,e.keySize,e.ivSize),e=(s.iv=i.iv,re.encrypt.call(this,e,t,i.key,s));return e.mixIn(i),e},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);var i=s.kdf.execute(i,e.keySize,e.ivSize,t.salt),e=(s.iv=i.iv,re.decrypt.call(this,e,t,i.key,s));return e}})),i.mode.CFB=(e=i.lib.BlockCipherMode.extend(),e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize;At.call(this,e,t,s,i),this._prevBlock=e.slice(t,t+s)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=e.slice(t,t+s);At.call(this,e,t,s,i),this._prevBlock=a}}),e),i.mode.ECB=(a=i.lib.BlockCipherMode.extend(),a.Encryptor=a.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),a.Decryptor=a.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),a),i.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,t=4*t,t=t-i%t,i=i+t-1;e.clamp(),e.words[i>>>2]|=t<<24-i%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.pad.Iso10126={pad:function(e,t){var t=4*t,t=t-e.sigBytes%t;e.concat(i.lib.WordArray.random(t-1)).concat(i.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.pad.Iso97971={pad:function(e,t){e.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(e,t)},unpad:function(e){i.pad.ZeroPadding.unpad(e),e.sigBytes--}},i.mode.OFB=(n=i.lib.BlockCipherMode.extend(),o=n.Encryptor=n.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=this._iv,o=this._keystream;a&&(o=this._keystream=a.slice(0),this._iv=void 0),i.encryptBlock(o,0);for(var n=0;n<s;n++)e[t+n]^=o[n]}}),n.Decryptor=o,n),i.pad.NoPadding={pad:function(){},unpad:function(){}},t=i,e=t.lib,Z=e.CipherParams,a=t.enc,Q=a.Hex,o=t.format,o.Hex={stringify:function(e){return e.ciphertext.toString(Q)},parse:function(e){var e=Q.parse(e);return Z.create({ciphertext:e})}};for(var n=i,e=n.lib,a=e.BlockCipher,t=n.algo,C=[],vt=[],ft=[],yt=[],bt=[],kt=[],wt=[],Ct=[],$t=[],St=[],$=[],S=0;S<256;S++)$[S]=S<128?S<<1:S<<1^283;for(var P=0,E=0,S=0;S<256;S++){var R=E^E<<1^E<<2^E<<3^E<<4,R=R>>>8^255&R^99,Mt=(C[P]=R,vt[R]=P,$[P]),Bt=$[Mt],Tt=$[Bt],I=257*$[R]^16843008*R,I=(ft[P]=I<<24|I>>>8,yt[P]=I<<16|I>>>16,bt[P]=I<<8|I>>>24,kt[P]=I,16843009*Tt^65537*Bt^257*Mt^16843008*P);wt[R]=I<<24|I>>>8,Ct[R]=I<<16|I>>>16,$t[R]=I<<8|I>>>24,St[R]=I,P?(P=Mt^$[$[$[Tt^Mt]]],E^=$[$[E]]):P=E=1}var xt=[0,1,2,4,8,16,32,64,128,27,54],o=t.AES=a.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,e=this._nRounds=6+i,s=4*(1+e),a=this._keySchedule=[],o=0,n;o<s;o++)o<i?a[o]=t[o]:(n=a[o-1],o%i?6<i&&o%i==4&&(n=C[n>>>24]<<24|C[n>>>16&255]<<16|C[n>>>8&255]<<8|C[255&n]):(n=n<<8|n>>>24,n=C[n>>>24]<<24|C[n>>>16&255]<<16|C[n>>>8&255]<<8|C[255&n],n^=xt[o/i|0]<<24),a[o]=a[o-i]^n);for(var r=this._invKeySchedule=[],l=0;l<s;l++){var o=s-l,n,n;n=l%4?a[o]:a[o-4],r[l]=l<4||o<=4?n:wt[C[n>>>24]]^Ct[C[n>>>16&255]]^$t[C[n>>>8&255]]^St[C[255&n]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,ft,yt,bt,kt,C)},decryptBlock:function(e,t){var i=e[t+1],i=(e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,wt,Ct,$t,St,vt),e[t+1]);e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,a,o,n,r){for(var l=this._nRounds,c=e[t]^i[0],d=e[t+1]^i[1],h=e[t+2]^i[2],_=e[t+3]^i[3],u=4,m=1;m<l;m++)var p=s[c>>>24]^a[d>>>16&255]^o[h>>>8&255]^n[255&_]^i[u++],g=s[d>>>24]^a[h>>>16&255]^o[_>>>8&255]^n[255&c]^i[u++],v=s[h>>>24]^a[_>>>16&255]^o[c>>>8&255]^n[255&d]^i[u++],f=s[_>>>24]^a[c>>>16&255]^o[d>>>8&255]^n[255&h]^i[u++],c=p,d=g,h=v,_=f;var p=(r[c>>>24]<<24|r[d>>>16&255]<<16|r[h>>>8&255]<<8|r[255&_])^i[u++],g=(r[d>>>24]<<24|r[h>>>16&255]<<16|r[_>>>8&255]<<8|r[255&c])^i[u++],v=(r[h>>>24]<<24|r[_>>>16&255]<<16|r[c>>>8&255]<<8|r[255&d])^i[u++],f=(r[_>>>24]<<24|r[c>>>16&255]<<16|r[d>>>8&255]<<8|r[255&h])^i[u++];e[t]=p,e[t+1]=g,e[t+2]=v,e[t+3]=f},keySize:8});return n.AES=a._createHelper(o),e=i,t=e.lib,j=t.WordArray,n=t.BlockCipher,a=e.algo,V=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],W=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],q=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],G=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],J=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],Y=a.DES=n.extend({_doReset:function(){for(var e=this._key,t=e.words,i=[],s=0;s<56;s++){var a=V[s]-1;i[s]=t[a>>>5]>>>31-a%32&1}for(var o=this._subKeys=[],n=0;n<16;n++){for(var r=o[n]=[],l=q[n],s=0;s<24;s++)r[s/6|0]|=i[(W[s]-1+l)%28]<<31-s%6,r[4+(s/6|0)]|=i[28+(W[s+24]-1+l)%28]<<31-s%6;r[0]=r[0]<<1|r[0]>>>31;for(var s=1;s<7;s++)r[s]=r[s]>>>4*(s-1)+3;r[7]=r[7]<<5|r[7]>>>27}for(var c=this._invSubKeys=[],s=0;s<16;s++)c[s]=o[15-s]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],It.call(this,4,252645135),It.call(this,16,65535),Nt.call(this,2,858993459),Nt.call(this,8,16711935),It.call(this,1,1431655765);for(var s=0;s<16;s++){for(var a=i[s],o=this._lBlock,n=this._rBlock,r=0,l=0;l<8;l++)r|=G[l][((n^a[l])&J[l])>>>0];this._lBlock=n,this._rBlock=o^r}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,It.call(this,1,1431655765),Nt.call(this,8,16711935),Nt.call(this,2,858993459),It.call(this,16,65535),It.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2}),e.DES=n._createHelper(Y),o=a.TripleDES=n.extend({_doReset:function(){var e=this._key,e=e.words;this._des1=Y.createEncryptor(j.create(e.slice(0,2))),this._des2=Y.createEncryptor(j.create(e.slice(2,4))),this._des3=Y.createEncryptor(j.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),e.TripleDES=n._createHelper(o),t=i,a=t.lib,e=a.StreamCipher,n=t.algo,U=n.RC4=e.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,s=this._S=[],a=0;a<256;a++)s[a]=a;for(var a=0,o=0;a<256;a++){var n=a%i,n=t[n>>>2]>>>24-n%4*8&255,o=(o+s[a]+n)%256,n=s[a];s[a]=s[o],s[o]=n}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=Rt.call(this)},keySize:8,ivSize:0}),t.RC4=e._createHelper(U),o=n.RC4Drop=U.extend({cfg:U.cfg.extend({drop:192}),_doReset:function(){U._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)Rt.call(this)}}),t.RC4Drop=e._createHelper(o),i.mode.CTRGladman=(a=i.lib.BlockCipherMode.extend(),n=a.Encryptor=a.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=this._iv,o=this._counter,n=(a&&(o=this._counter=a.slice(0),this._iv=void 0),Et(o),o.slice(0));i.encryptBlock(n,0);for(var r=0;r<s;r++)e[t+r]^=n[r]}}),a.Decryptor=n,a),t=i,e=t.lib,o=e.StreamCipher,n=t.algo,_=[],u=[],m=[],a=n.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)Ot.call(this);for(var i=0;i<8;i++)a[i]^=s[i+4&7];if(t){var t=t.words,o=t[0],t=t[1],o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),n=o>>>16|4294901760&t,r=t<<16|65535&o;a[0]^=o,a[1]^=n,a[2]^=t,a[3]^=r,a[4]^=o,a[5]^=n,a[6]^=t,a[7]^=r;for(var i=0;i<4;i++)Ot.call(this)}},_doProcessBlock:function(e,t){var i=this._X;Ot.call(this),_[0]=i[0]^i[5]>>>16^i[3]<<16,_[1]=i[2]^i[7]>>>16^i[5]<<16,_[2]=i[4]^i[1]>>>16^i[7]<<16,_[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)_[s]=16711935&(_[s]<<8|_[s]>>>24)|4278255360&(_[s]<<24|_[s]>>>8),e[t+s]^=_[s]},blockSize:4,ivSize:2}),t.Rabbit=o._createHelper(a),i.mode.CTR=(e=i.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,a=this._iv,o=this._counter,n=(a&&(o=this._counter=a.slice(0),this._iv=void 0),o.slice(0));i.encryptBlock(n,0),o[s-1]=o[s-1]+1|0;for(var r=0;r<s;r++)e[t+r]^=n[r]}}),e.Decryptor=n,e),t=i,o=t.lib,a=o.StreamCipher,n=t.algo,r=[],l=[],h=[],e=n.RabbitLegacy=a.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)Lt.call(this);for(var a=0;a<8;a++)s[a]^=i[a+4&7];if(t){var e=t.words,t=e[0],e=e[1],t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),o=t>>>16|4294901760&e,n=e<<16|65535&t;s[0]^=t,s[1]^=o,s[2]^=e,s[3]^=n,s[4]^=t,s[5]^=o,s[6]^=e,s[7]^=n;for(var a=0;a<4;a++)Lt.call(this)}},_doProcessBlock:function(e,t){var i=this._X;Lt.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2}),t.RabbitLegacy=a._createHelper(e),i.pad.ZeroPadding={pad:function(e,t){var t=4*t;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},i;function Lt(){for(var e=this._X,t=this._C,i=0;i<8;i++)l[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<l[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<l[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<l[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<l[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<l[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<l[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<l[6]>>>0?1:0)|0,this._b=t[7]>>>0<l[7]>>>0?1:0;for(var i=0;i<8;i++){var s=e[i]+t[i],a=65535&s,o=s>>>16,a=((a*a>>>17)+a*o>>>15)+o*o,o=((4294901760&s)*s|0)+((65535&s)*s|0);h[i]=a^o}e[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,e[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,e[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,e[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,e[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,e[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,e[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,e[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}function Ot(){for(var e=this._X,t=this._C,i=0;i<8;i++)u[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<u[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<u[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<u[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<u[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<u[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<u[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<u[6]>>>0?1:0)|0,this._b=t[7]>>>0<u[7]>>>0?1:0;for(var i=0;i<8;i++){var s=e[i]+t[i],a=65535&s,o=s>>>16,a=((a*a>>>17)+a*o>>>15)+o*o,o=((4294901760&s)*s|0)+((65535&s)*s|0);m[i]=a^o}e[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,e[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,e[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,e[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,e[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,e[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,e[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,e[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}function Pt(e){var t,i,s;return 255==(e>>24&255)?(t=e>>16&255,i=e>>8&255,s=255&e,255===t?(t=0,255===i?(i=0,255===s?s=0:++s):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=s):e+=1<<24,e}function Et(e){0===(e[0]=Pt(e[0]))&&(e[1]=Pt(e[1]))}function Rt(){for(var e=this._S,t=this._i,i=this._j,s=0,a=0;a<4;a++){var t=(t+1)%256,i=(i+e[t])%256,o=e[t];e[t]=e[i],e[i]=o,s|=e[(e[t]+e[i])%256]<<24-8*a}return this._i=t,this._j=i,s}function It(e,t){var t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function Nt(e,t){var t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}function At(e,t,i,s){var a=this._iv,o,o;a?(o=a.slice(0),this._iv=void 0):o=this._prevBlock,s.encryptBlock(o,0);for(var n=0;n<i;n++)e[t+n]^=o[n]}function Dt(e,t,i){var s=this._iv,a,a;s?(a=s,this._iv=ee):a=this._prevBlock;for(var o=0;o<i;o++)e[t+o]^=a[o]}function Ft(e){return"string"==typeof e?le:re}function Kt(e,t,i){}function zt(e,t,i){return e&t|~e&i}function Ht(e,t,i){}function Ut(e,t,i){return e&i|t&~i}function jt(e,t,i){}function Vt(e,t){return e<<t|e>>>32-t}function Wt(e){return e<<8&4278255360|e>>>8&16711935}function qt(e,t,i){for(var s=[],a=0,o=0,n,r;o<t;o++)o%4&&(n=i[e.charCodeAt(o-1)]<<o%4*2,r=i[e.charCodeAt(o)]>>>6-o%4*2,s[a>>>2]|=(n|r)<<24-a%4*8,a++);return Re.create(s,a)}});var custom_keyboard={
/**********************
   * CORE CONFIGURATION 
   **********************/
// Keyboard state
isShown:!1,currentLanguage:"english",// can be "english" or "arabic"
isUpperCase:!1,currentInput:null,lastFocusedKey:null,cursorPosition:0,inputValue:"",
// Keyboard layouts
layouts:{english:{lowercase:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],uppercase:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]],numbers:["1","2","3","4","5","6","7","8","9","0"],special:[".",",","/",":",";","@","#","%","&","?","!","-","_","=","+","(",")","'",'"']},arabic:{lowercase:[["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج"],["ش","س","ي","ب","ل","ا","ت","ن","م","ك","ط"],["ذ","ئ","ء","ؤ","ر","لا","ى","ة","و","ز","ظ","د"]],uppercase:[["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج"],["ش","س","ي","ب","ل","ا","ت","ن","م","ك","ط"],["ذ","ئ","ء","ؤ","ر","لا","ى","ة","و","ز","ظ","د"]],numbers:["1","2","3","4","5","6","7","8","9","0"],special:[".","،","/",":","؛","@","#","%","&","؟","!","-","_","=","+",")","(","'",'"']}},
/**********************
   * LIFECYCLE METHODS
   **********************/
/**
   * Initialize the keyboard
   */
init:function(){this.render(),this.attachEventHandlers(),this.updateSpecialCharacters()},
/**
   * Show the keyboard for the given input element
   * @param {HTMLElement} inputElement - The input element to attach the keyboard to
   */
show:function(e){var e;this.isShown||(this.currentInput=e,this.cursorPosition=e.selectionStart||0,this.inputValue=e.value||"",
// Only detect language on initial show, not when already in a language
this._languageDetected||(e=this.detectTextDirection(e.value),("rtl"===e&&"english"===this.currentLanguage||"ltr"===e&&"arabic"===this.currentLanguage)&&this.toggleLanguage(),this._languageDetected=!0),$("#custom-keyboard").show(),this.isShown=!0,
// Use a short delay to ensure the keyboard is visible before focusing
setTimeout(function(){this.setFocusToFirstKey()}.bind(this),50))},
/**
   * Hide the keyboard
   */
hide:function(){this.isShown&&(this.lastFocusedKey=document.activeElement,$(".keyboard-key").blur(),$("#custom-keyboard").hide(),this.isShown=!1,this.currentInput&&(this.currentInput.blur(),this.currentInput=null),
// Reset cursor position tracking
this.cursorPosition=0,this.inputValue="",
// Reset focused state
key_focused=!1,"search-page"===current_route)&&search_page&&"function"==typeof search_page.focusFirstResult&&setTimeout(function(){search_page.focusFirstResult()},100)},
/**********************
   * TEXT MANIPULATION
   **********************/
/**
   * Add character to input at current cursor position
   * @param {string} character - The character to add
   */
addCharacter:function(e){var t,i,e,i;
// Use tracked cursor position
this.currentInput&&(t=this.cursorPosition,i=this.currentInput.value,e=i.substring(0,t)+e+i.substring(t),
// Update input value and position
this.currentInput.value=e,this.cursorPosition=t+1,this.inputValue=e,i=document.createEvent("HTMLEvents"),i.initEvent("input",!0,!0),this.currentInput.dispatchEvent(i))},
/**
   * Handle space key
   */
handleSpace:function(){this.addCharacter(" ")},
/**
   * Handle backspace key
   */
handleBackspace:function(){var e,t,i,e,e,t;
// Get current positions
this.currentInput&&(e=this.cursorPosition,t=this.currentInput.value,
// Delete character(s)
e=0<e?(i=t.substring(0,e-1)+t.substring(e),e-1):(i=t,0),
// Update input
this.currentInput.value=i,this.cursorPosition=e,this.inputValue=i,
// Update selection range
this.currentInput.setSelectionRange(e,e),t=document.createEvent("HTMLEvents"),t.initEvent("input",!0,!0),this.currentInput.dispatchEvent(t))},
/**
   * Handle enter key (submit)
   */
handleEnter:function(){this.currentInput&&(key_focused=!1,
// Check if this was a search input and trigger search
"search-page-input"===this.currentInput.id&&(search_page.keywordChange(),
// Focus search results after a delay
setTimeout(function(){search_page&&"function"==typeof search_page.focusFirstResult&&search_page.focusFirstResult()},200)),
// Blur the input and hide keyboard
this.currentInput.blur(),this.hide())},
/**
   * Clear all text in the input
   */
clearAll:function(){var e;
// Clear input and reset cursor
this.currentInput&&(this.currentInput.value="",this.currentInput.setSelectionRange(0,0),this.cursorPosition=0,this.inputValue="",e=document.createEvent("HTMLEvents"),e.initEvent("input",!0,!0),this.currentInput.dispatchEvent(e))},
/**
   * Detect if text is RTL (Right to Left) or LTR (Left to Right)
   * @param {string} text - The text to analyze
   * @return {string} "rtl" for Right to Left or "ltr" for Left to Right
   */
detectTextDirection:function(e){var t;
// Check if the text contains Arabic characters
return e&&(t=/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,t.test(e))?"rtl":"ltr"},
/**********************
   * UI MANAGEMENT
   **********************/
/**
   * Focus the first key or last focused key
   */
setFocusToFirstKey:function(){
// If we have a previously focused key, focus it
(this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey):(
// Otherwise focus the first letter key
$("#keyboard-row-1 .keyboard-key").length?$("#keyboard-row-1 .keyboard-key"):
// Fallback to first number key
$("#keyboard-row-0 .keyboard-key")).first()).focus()},
/**
   * Toggle uppercase/lowercase
   */
toggleCase:function(){
// Don't toggle case for Arabic
"arabic"!==this.currentLanguage&&(
// Store focused element
this.lastFocusedKey=document.activeElement,
// Toggle case and update keys
this.isUpperCase=!this.isUpperCase,this.updateKeys(),
// Re-apply focus after updating
setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50))},
/**
   * Toggle language between English and Arabic
   */
toggleLanguage:function(){
// Store focused element
this.lastFocusedKey=document.activeElement,
// Switch language
this.currentLanguage="english"===this.currentLanguage?"arabic":"english",
// Reset uppercase for Arabic
"arabic"===this.currentLanguage&&(this.isUpperCase=!1),
// Update UI
this.updateKeys(),this.updateSpecialCharacters(),
// Re-apply focus
setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50)},
/**
   * Toggle special symbols row visibility
   */
toggleSymbols:function(){
// Store focused element
this.lastFocusedKey=document.activeElement;
// Toggle symbols visibility
var e=$("#keyboard-row-special");e.is(":visible")?(e.hide(),$("#keyboard-symbols").text("$%^")):(e.show(),$("#keyboard-symbols").text("abc"),this.updateSpecialCharacters()),
// Re-apply focus
setTimeout(function(){this.lastFocusedKey&&$(this.lastFocusedKey).length&&$(this.lastFocusedKey).is(":visible")?$(this.lastFocusedKey).focus():this.setFocusToFirstKey()}.bind(this),50)},
/**
   * Update all keys based on current language and case
   */
updateKeys:function(){
// Create letter rows
this.createLetterRows();
// Update number keys
var t=this.layouts[this.currentLanguage].numbers;$("#keyboard-row-0 .keyboard-number").each(function(e){var e;e<t.length&&(e=t[e],$(this).text(e).attr("data-key-value",e))}),
// Update language button
$("#keyboard-lang").text("english"===this.currentLanguage?"EN":"AR"),
// Show/hide shift key for appropriate language
"arabic"===this.currentLanguage?$("#keyboard-shift").hide():$("#keyboard-shift").show()},
/**
   * Create letter rows dynamically based on language
   */
createLetterRows:function(){var e=this.layouts[this.currentLanguage],e=this.isUpperCase?e.uppercase:e.lowercase;
// Clear existing letter rows
$("#keyboard-row-1 .keyboard-letter-container").empty(),$("#keyboard-row-2 .keyboard-letter-container").empty(),$("#keyboard-row-3 .keyboard-letter-container").empty(),
// Create new letter rows
this.createLetterRow(e[0],"#keyboard-row-1 .keyboard-letter-container"),this.createLetterRow(e[1],"#keyboard-row-2 .keyboard-letter-container"),this.createLetterRow(e[2],"#keyboard-row-3 .keyboard-letter-container")},
/**
   * Create a single row of letter keys
   * @param {Array} rowKeys - Array of letter keys
   * @param {string} containerId - The container selector
   */
createLetterRow:function(e,t){for(var i=$(t),s=0;s<e.length;s++)i.append('<button class="keyboard-key" tabindex="0" data-key-value="'+e[s]+'">'+e[s]+"</button>")},
/**
   * Update special characters row
   */
updateSpecialCharacters:function(){var e=this.layouts[this.currentLanguage].special,t=$("#keyboard-row-special");
// Clear existing keys
t.empty();
// Add special character keys
for(var i=0;i<e.length;i++){var s=e[i];t.append('<button class="keyboard-key keyboard-special" tabindex="0" data-key-value="'+s+'">'+s+"</button>")}},
/**
   * Render keyboard HTML
   */
render:function(){var e='<div id="custom-keyboard" class="keyboard-container" style="display:none;">';
// Numbers row
e+='<div id="keyboard-row-0" class="keyboard-row">',e+='<button id="keyboard-lang" class="keyboard-key keyboard-action" tabindex="0">EN</button>';
// Number keys
for(var t=0;t<this.layouts.english.numbers.length;t++)e+='<button class="keyboard-key keyboard-number" tabindex="0" data-key-value="'+this.layouts.english.numbers[t]+'">'+this.layouts.english.numbers[t]+"</button>";e+='<button id="keyboard-backspace" class="keyboard-key keyboard-action" tabindex="0"><i class="fas fa-backspace"></i></button>',e+="</div>",
// First row of letters
e+='<div id="keyboard-row-1" class="keyboard-row">',e+='<button id="keyboard-symbols" class="keyboard-key keyboard-action" tabindex="0">$%^</button>',e+='<div class="keyboard-letter-container"></div>',e+='<button id="keyboard-enter" class="keyboard-key keyboard-action" tabindex="0">Enter</button>',e+="</div>",
// Second row of letters
e+='<div id="keyboard-row-2" class="keyboard-row">',e+='<div class="keyboard-letter-container"></div>',e+='<button class="keyboard-key" tabindex="0" data-key-value=":">:</button>',e+="</div>",
// Third row of letters
e+='<div id="keyboard-row-3" class="keyboard-row">',e+='<button id="keyboard-shift" class="keyboard-key keyboard-action" tabindex="0">⇧</button>',e+='<button class="keyboard-key" tabindex="0" data-key-value="@">@</button>',e+='<div class="keyboard-letter-container"></div>',e+='<button class="keyboard-key" tabindex="0" data-key-value=".">.</button>',e+='<button class="keyboard-key" tabindex="0" data-key-value="/">/</button>',e+='<button id="keyboard-clear" class="keyboard-key keyboard-action" tabindex="0">Clear</button>',e+="</div>",
// Special characters row
e+='<div id="keyboard-row-special" class="keyboard-row keyboard-special-row" style="display:none;"></div>',
// Space bar row
e+='<div class="keyboard-row">',e+='<button id="keyboard-space" class="keyboard-key keyboard-space" tabindex="0" data-key-value=" ">Space</button>',e+="</div>",e+="</div>",
// Append to body and initialize letter keys
$("body").append(e),this.createLetterRows()},
/**********************
   * NAVIGATION
   **********************/
/**
   * Navigate left from the current key
   * @param {jQuery} $key - The current key
   */
navigateLeft:function(e){var t=this.getParentRow(e),t=t.find(".keyboard-key:visible"),e=t.index(e);
// Move to previous key in this row
(0<e?t.eq(e-1):
// Circular navigation - go to last key in same row
t.last()).focus()},
/**
   * Navigate right from the current key
   * @param {jQuery} $key - The current key
   */
navigateRight:function(e){var t=this.getParentRow(e),t=t.find(".keyboard-key:visible"),e=t.index(e);
// Move to next key in this row
(e<t.length-1?t.eq(e+1):
// Circular navigation - go to first key in same row
t.first()).focus()},
/**
   * Navigate up from the current key
   * @param {jQuery} $key - The current key
   */
navigateUp:function(e){
// Special case for space key
var t,t,i,t,i;"keyboard-space"===e.attr("id")?(t=$("#keyboard-row-special").is(":visible")?$("#keyboard-row-special"):$("#keyboard-row-3"),this.focusMiddleKey(t)):(t=this.getParentRow(e),i=$(".keyboard-row:visible"),t=i.index(t),0<t?(i=i.eq(t-1),this.focusNearestKey(e,i)):
// Wrap to space row
$("#keyboard-space").focus())},
/**
   * Navigate down from the current key
   * @param {jQuery} $key - The current key
   */
navigateDown:function(e){var t=this.getParentRow(e),i=$(".keyboard-row:visible"),t=i.index(t),s;
// Special case for space or last row
if(t===i.length-1||"keyboard-space"===e.attr("id"))s=i.first(),this.focusMiddleKey(s);
// Skip special row if hidden
else{var s=t+1,t=i.eq(s);if("keyboard-row-special"===t.attr("id")&&!t.is(":visible")){if(!(s+1<i.length))return void $("#keyboard-space").focus();t=i.eq(s+1)}
// Go to space if next row is space row
0<t.find("#keyboard-space").length?$("#keyboard-space").focus():
// Go to next row at similar position
this.focusNearestKey(e,t)}},
/**
   * Get the parent row of a key, handling letter containers
   * @param {jQuery} $key - The key element
   * @return {jQuery} The parent row
   */
getParentRow:function(e){var e=e.parent();
// Handle container divs
return e.hasClass("keyboard-letter-container")&&(e=e.parent()),e},
/**
   * Focus the middle key in a row
   * @param {jQuery} $row - The row
   */
focusMiddleKey:function(e){var e=e.find(".keyboard-key:visible"),t=Math.floor(e.length/2);e.eq(t).focus()},
/**
   * Focus key in target row nearest to source key's position
   * @param {jQuery} $sourceKey - The source key
   * @param {jQuery} $targetRow - The target row
   */
focusNearestKey:function(e,t){var i=this.getParentRow(e),s=i.find(".keyboard-key:visible"),s=s.index(e),i=i.width(),e=e.position().left+e.width()/2,e=e/i,i=t.find(".keyboard-key:visible"),t=t.width(),a=t*e,o=null,n=Number.MAX_VALUE,t;
// Get relative position
i.each(function(){var e=$(this),t=e.position().left+e.width()/2,t=Math.abs(t-a);t<n&&(n=t,o=e)}),(
// Focus closest key or fall back to index-based
o||(t=Math.min(s,i.length-1),i.eq(t))).focus()},
/**********************
   * EVENT HANDLING
   **********************/
/**
   * Handle remote control key events
   * @param {Event} e - The key event
   * @return {boolean} True if handled, false otherwise
   */
handleRemoteKeys:function(e){if(this.isShown)switch(e.keyCode){case 13:// OK/Enter key
if(document.activeElement&&"keyboard-enter"===document.activeElement.id)return this.handleEnter(),!0;if(document.activeElement&&$(document.activeElement).hasClass("keyboard-key"))return $(document.activeElement).click(),!0;break;case 27:// Back/ESC key
return this.hide(),!0;case 37:// Left arrow
case 38:// Up arrow
case 39:// Right arrow
case 40:// Down arrow
// If no key is focused, focus one
return document.activeElement&&$(document.activeElement).hasClass("keyboard-key")||this.setFocusToFirstKey(),!0}return!1},
/**
   * Attach event handlers to keyboard keys
   */
attachEventHandlers:function(){var i=this,s=!1;
// Click handler helper
function e(t){return function(e){s||(s=!0,t.call(i,e,$(this)),setTimeout(function(){s=!1},100))}}
// Regular keys
$(document).on("click",".keyboard-key:not(.keyboard-action)",e(function(e,t){var t=t.attr("data-key-value")||t.text();this.addCharacter(t)})),
// Action keys
$(document).on("click","#keyboard-shift",e(function(){this.toggleCase()})),$(document).on("click","#keyboard-lang",e(function(){this.toggleLanguage()})),$(document).on("click","#keyboard-space",e(function(){this.handleSpace()})),$(document).on("click","#keyboard-backspace",e(function(){this.handleBackspace()})),$(document).on("click","#keyboard-enter",e(function(){this.handleEnter()})),$(document).on("click","#keyboard-clear",e(function(){this.clearAll()})),$(document).on("click","#keyboard-symbols",e(function(){this.toggleSymbols()})),
// Focus tracking
$(document).on("focus",".keyboard-key",function(){i.isShown&&(i.lastFocusedKey=this)}),
// Keyboard navigation
$(document).on("keydown",".keyboard-key",function(e){if(i.isShown){var t=$(this);switch(e.keyCode){case 37:// Left
i.navigateLeft(t),e.preventDefault();break;case 39:// Right
i.navigateRight(t),e.preventDefault();break;case 38:// Up
i.navigateUp(t),e.preventDefault();break;case 40:// Down
i.navigateDown(t),e.preventDefault();break;case 13:// Enter
"keyboard-enter"===t.attr("id")?i.handleEnter():t.click(),e.preventDefault();break;case 27:// Escape
i.hide(),e.preventDefault()}}})}};
// function updateProxyURL() {
//   // Reset proxy URL
//   window.PROXY_URL = "";
//   // Check if proxy is enabled and we have available servers
//   if (!settings || !settings.smart_proxy_connection_state || !proxyAvailableServers || proxyAvailableServers.length === 0) {
//     return;
//   }
//   try {
//     var regionIndex = settings.smart_proxy_region || 0;
//     var countryIndex = settings.smart_proxy_country || 0;
//     var serverIndex = settings.smart_proxy_server || 0;
//     var regionData = proxyAvailableServers[regionIndex];
//     if (regionData && regionData.Countries && regionData.Countries.length > 0) {
//       var countryData = regionData.Countries[countryIndex];
//       if (countryData && countryData.Servers && countryData.Servers.length > 0) {
//         var serverUrl = countryData.Servers[serverIndex];
//         if (serverUrl) {
//           window.PROXY_URL = "http://" + serverUrl + ":8080/?mimo_proxy_token_765=QCIBMHoAmBrlTOQGGvmmcVWbEHdNnUNVIQoirolvjrcsSpGZ&mimo_proxy_target_765=";
//           console.log("Proxy URL updated to:", window.PROXY_URL);
//           // Send a discovery request with the correct serverUrl
//           $.ajax({
//             url: 'http://' + serverUrl + ':765',
//             type: 'GET',
//             success: function(response) {
//             },
//             error: function(xhr, status, error) {
//             },
//             complete: function() {
//               console.log("Discovery request completed.");
//             }
//           });
//         }
//       }
//     }
//   } catch (error) {
//     console.error("Error updating proxy URL:", error);
//     window.PROXY_URL = "";
//   }
// }
function api(e){
// Initialize global request tracking array if it doesn't exist
window.ongoingRequests||(window.ongoingRequests=[]);var t={type:"GET",headers:{},data:null},i=e.url,i={url:i,type:e.type||e.method||t.type,headers:e.headers||t.headers,data:e.data||t.data},s=("function"==typeof e.success&&(i.success=e.success),"function"==typeof e.error&&(i.error=e.error),
// Add timeout if specified
e.timeout&&(i.timeout=e.timeout),$.ajax(i));
// Track this request
return window.ongoingRequests.push(s),
// Remove from tracking when complete
s.always(function(){var e=window.ongoingRequests.indexOf(s);-1<e&&window.ongoingRequests.splice(e,1)}),s}window.PROXY_URL="";var utilities={formatTimeStringToSeconds:function(e){
// Ensure the input is a string
var e,t;
// Split the duration into parts (hours, minutes, seconds)
return"string"!=typeof e?0:(e=e.split(":").map(Number),t=0,3===e.length?(
// HH:MM:SS format
t+=3600*e[0],// Hours to seconds
t+=60*e[1],// Minutes to seconds
t+=e[2]):2===e.length?(
// MM:SS format
t+=60*e[0],// Minutes to seconds
t+=e[1]):1===e.length&&(
// SS format
t+=e[0]),t)},getPercentage:function(e,t){return Math.floor(e/t*100)},isNewlyAdded:function(e){var t=1296e3;return Math.floor(Date.now()/1e3)-e<=t},isRecentlyModifiedSeries:function(e){var t=1296e3;return Math.floor(Date.now()/1e3)-parseInt(e,10)<=t},compareTimestamps:function(e){
// Get the current date and time
var t=new Date,i;
// Check if comparisonTimestamp is a number or string number
if(isNaN(String(e)))try{
// Try to parse as "YYYY-MM-DD HH:MM" format
var s=e.split(" "),a=s[0].split("-"),o=s[1].split(":"),n=[a[0],// Year stays the same
a[1].padStart(2,"0"),// Month
a[2].padStart(2,"0")].join("-"),r=[o[0].padStart(2,"0"),// Hour
o[1].padStart(2,"0")].join(":"),l=n+"T"+r+":00";
// Check if the date is valid
if(i=new Date(l),isNaN(i.getTime()))throw new Error("Invalid date format")}catch(e){throw new Error("Invalid timestamp or date format. Expected Unix timestamp or 'YYYY-MM-DD HH:MM' format")}else{
// Convert to string first to handle large numbers properly
var s=String(e),
// Check if we need to convert from seconds to milliseconds
i=s.length<=10?new Date(1e3*parseInt(s)):new Date(parseInt(s));
// Validate the date
if(isNaN(i.getTime()))throw new Error("Invalid timestamp value")}
// Convert both dates to milliseconds
var a=t.getTime(),o=i.getTime(),n=o-a,r=n/864e5;
// Return the rounded difference in days
return Math.round(r)},convertToTimestamp:function(e){
/**
     * Convert a date string to Unix timestamp (milliseconds)
     * Accepts formats: YYYY-MM-DD or MM-DD-YYYY
     * 
     * @param {string} dateString - Date in format 'YYYY-MM-DD' or 'MM-DD-YYYY'
     * @returns {number} Unix timestamp in milliseconds
     * @throws {Error} If date string format is invalid
     */
// Helper function to check if date is valid
function t(e){return e instanceof Date&&!isNaN(e)}
// Try YYYY-MM-DD format first
var i,s;if(e.match(/^\d{4}-\d{2}-\d{2}$/))
// YYYY-MM-DD format
i=e.split("-"),s=new Date(parseInt(i[0],10),// year
parseInt(i[1],10)-1,// month (0-based)
parseInt(i[2],10));else{if(!e.match(/^\d{2}-\d{2}-\d{4}$/))throw new Error("Invalid date format. Please use either 'YYYY-MM-DD' or 'MM-DD-YYYY'");
// Validate the date
// MM-DD-YYYY format
i=e.split("-"),s=new Date(parseInt(i[2],10),// year
parseInt(i[0],10)-1,// month (0-based)
parseInt(i[1],10))}if(t(s))
// Return timestamp in milliseconds
return s.getTime();throw new Error("Invalid date. Please check if the date exists.")},timestampDiffInDays:function(e){return Math.ceil((e-(new Date).getTime())/864e5)},getCurrentDate:function(){
// Get the current date and time
var e=new Date,t=e.getFullYear(),i=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),e=e.getMinutes().toString().padStart(2,"0"),t=t+"-"+i+"-"+s+" "+a+":"+e;
// Extract the year, month, day, hour, and minutes
return t},getCurrentDateTimeFormatted:function(){var e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=new Date,e=e[i.getDay()],s=i.getDate(),t=t[i.getMonth()],i=i.getFullYear();
// Format the date like "Sun. 10 Sep 2024"
return e+". "+(s<10?"0":"")+s+" "+t+" "+i},pickProperties:function(e,t){for(var i={},s=0;s<t.length;s++){var a=t[s];e.hasOwnProperty(a)&&(i[a]=e[a])}return i},shuffleArray:function(e){for(var t=e.length,i,s;0!==t;)s=Math.floor(Math.random()*t),--t,i=e[t],e[t]=e[s],e[s]=i;return e},getTopRatedMovies:function(e){if(e&&0!=e.length){for(
// Sort movies by rating in descending order
var t=e.sort(function(e,t){var e=parseFloat(e.rating)||0,t=parseFloat(t.rating)||0;return t-e}),i=parseFloat(t[0].rating),s=[],a=0;a<t.length&&parseFloat(t[a].rating)==i;a++)s.push(t[a]);
// Shuffle ten rated movies if there are more than 10
if(10<s.length)for(var a=s.length-1;0<a;a--){var o=Math.floor(Math.random()*(a+1)),n=s[a];s[a]=s[o],s[o]=n}else if(s.length<10){var r=10;s.length<10&&(r=s.length+1);
// If the top rated is still lower than 10, fill the remaining in order
for(var a=s.length;a<r;a++)s.push(e[a])}
// Return top 10 movies
return(10<=s.length?s:t).slice(0,10)}},clampNumber:function(e,t,i){return Math.max(t,Math.min(e,i))}},settings={bg_img_url:"",bg_img_name:"",playlist_id:0,playlist:{},vod_sort:"default",// or a-z, z-a, rating, number
series_sort:"default",live_sort:"default",sort_keys:{added:"Added",number:"Number",rating:"Rating",a_z:"A-Z",z_a:"Z-A",name:"Name",default:"Default"},language:"en",time_format:"24",playlist_type:"",stream_format:"default",font_size:"normal",tmdb_choice:"on",home_favorites_choice:"on",live_initialization_choice:"default",subtitle_size:50,subtitle_bg:"transparent",initFromLocal:function(){var t=localStorage.getItem(storage_id+"bg_img_url");if(t){if(t.includes("http"))for(var e=t.split("/"),i=e[e.length-1].trim(),s=0;s<themes.length;s++){var a=themes[s];if(a.url==i){t=a.url;break}}this.bg_img_url=t}this.bg_img_name=localStorage.getItem(storage_id+"bg_img_name"),t=localStorage.getItem(storage_id+"playlist_id"),this.playlist_id=t||0;var e=["vod_sort","series_sort","live_sort","stream_format","font_size","tmdb_choice","home_favorites_choice","live_initialization_choice"],o=this,e;e.map(function(e){t=localStorage.getItem(storage_id+e),t&&(o[e]=t)}),t=localStorage.getItem(storage_id+"language"),t?this.language=t:void 0!==navigator.language&&(e=navigator.language.split("-"),this.language=e[0]),t=localStorage.getItem(storage_id+"subtitle_size"),t&&(this.subtitle_size=parseInt(t)),t=localStorage.getItem(storage_id+"subtitle_bg"),t&&(this.subtitle_bg=t)},saveSettings:function(e,t,i){this[e]=t,"object"!==i&&"array"!==i||(t=JSON.stringify(t)),localStorage.setItem(storage_id+e,t)},resetDefaultValues:function(){this.vod_sort="default",this.series_sort="default",this.live_sort="default",this.language="en",this.playlist_id="",this.time_format="24",this.stream_format="default",this.font_size="normal",this.tmdb_choice="on",this.home_favorites_choice="on",this.live_initialization_choice="default",this.playlist={},this.subtitle_size=50,this.subtitle_bg="transparent"}},mac_address,ip_address,user_name,playlist_status,password,api_host_url,device_key,is_trial,panel_urls=["https://iboiptv.com/api","https://iboplayer.com/api","https://ibotvplayer.com/api","https://tvplayeribo.com/api","https://ibobtv.com/api"],time_difference_with_server=0,// time difference between user time and server time, measured by mins
weatherCountry,weatherCity,weatherForecast,weatherToday,weatherNow,is_device_low=!1,expire_date,playlist_expire_date,app_loading=!1,current_route="login",default_movie_icon=HOST+"app_src_min/images/logo.png",current_movie,current_season,current_episode,current_series,parent_account_password="0000",mac_valid=!0,playlist_urls=[],themes=[{name:"Future",url:"125984.png"},{name:"Honor Wallpaper",url:"166531.jpg"},{name:"Red Bubbles",url:"453684.png"},{name:"Movies Area",url:"521487.jpg"},{name:"Red Strings",url:"654236.png"},{name:"IBO Classic",url:"698079.png"},{name:"Modern Look",url:"753215.png"},{name:"Red Lines",url:"765321.png"},{name:"Main Background",url:"784319.jpg"},{name:"Sharp Lines",url:"951354.png"},{name:"Cinema",url:"953645.png"}],languages=[],current_words=[],notification={},client_offset=moment(new Date).utcOffset(),storage_id="gz3rYzUIC7_",samsung_version="1.1.4",lg_version="1.0.6",vidaa_version="1.0.6",zeasn_version="1.0.0",api_succeed=!0,current_timer=null,key_focused=!1,tmdb_api_key="a3c79068cd6961a3526ba1b516c50c39",tmdb_prefix_url="https://api.themoviedb.org/3",tmdb_img_url="https://image.tmdb.org/t/p/",storageMoviesInfo=JSON.parse(localStorage.getItem(storage_id+"saved-movie-info"))||{},agent_urls=["https://babyeducate.com/api","https://babyeducationonline.com/api"],main_domain="iboiptv.com",env="production",fontSize=localStorage.getItem(storage_id+"font_size");function showLoader(e){void 0===e&&(e=!0),e?
// $('#loader').css({display:'flex'});
$("#loader").show():$("#loader").hide()}function saveData(e,t){window[e]=t}function getMovieUrl(e,t,i){if("live"===t){var s=settings.stream_format;if("default"!=s)i=settings.stream_format;else{var s=settings.playlist.origin_url;try{var a=s.split("output="),o=a[1]||"";"mpegts"===o||"ts"===o?i="ts":"hls"!==o&&"m3u8"!==o||(i="m3u8")}catch(e){}}}return api_host_url+"/"+t+"/"+user_name+"/"+password+"/"+e+"."+i}
/**
 * Moves an element's scroll position within its parent container
 * @param {HTMLElement|jQuery} parent_element - The scrollable parent container
 * @param {HTMLElement|jQuery} element - The child element to scroll to
 * @param {string} direction - Scroll direction, either "vertical" or "horizontal"
 * @param {boolean} to_center - Whether to center the element in the viewport
 * @param {boolean} mouse_hover - Whether this was triggered by mouse hover
 * @param {boolean} [moreToLeft=false] - For horizontal scroll, adds extra left padding
 * @returns {number} The amount scrolled in pixels
 */function moveScrollPosition(e,t,i,s,a,o){
// Helper function to calculate scroll amount for centering
function n(e,t,i){}
// Helper function to get numeric dimension from CSS
function r(e,t){return parseInt($(e).css(t).replace("px",""))}o=o||!1;var l=$(t).position(),i,c,d,h,c,i,h;return"vertical"===i?(i=r(e,"height"),c=r(t,"height"),d=0,!s||a?(
// Adjust scroll if element is below viewport
l.top+c>=i&&(d=l.top+c-i),
// Adjust scroll if element is above viewport
l.top<0&&(d=l.top),$(e).animate({scrollTop:"+="+d},10,"swing")):(h=l.top+c/2-i/2,$(e).animate({scrollTop:"+="+h},100,"linear")),d):(c=r(e,"width"),i=r(t,"width"),h=0,!s||a?(
// Adjust scroll if element is beyond right edge
l.left+i>=c&&(h=l.left+i-c),
// Adjust scroll if element is beyond left edge
l.left<0&&!o?h=l.left:l.left<50&&o&&(h=l.left-100)):
// Center the element horizontally
h=l.left+i/2-c/2,$(e).animate({scrollLeft:"+="+h},100,"linear"),h)}function showToast(e,t){$("#toast-body").html("<h3>"+e+"<br>"+t+"</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")}function getMinute(e){
// get the minute of time string
var e=new Date(e);return parseInt(e.getTime()/60/1e3)}function goHomePageWithMovieType(e){
// when clicking red button in special pages, it will show movie or series or live section by movie type
try{var t=$("#menu-wrapper").find("*[data-type="+e+"]")[0];$(t).trigger("click"),"live-tv"===e?(
// show home page preview video;
$("#home-page-movie-logo").hide(),$("#home-page-movie-logo").closest(".player-container").css({background:"#111"}),$("#search-button-wrapper").hide(),// hide back button
$("#home-page-video-preview").show(),home_page.reEnter()):(home_page.player=new AVPlayer("home-page-video-preview"),home_page.preview_url&&home_page.player.playAsync(home_page.preview_url)),current_route="home-page",$("#home-page-right-part-content-2").hide(""),$("#home-page-slider-container").css({opacity:0}),$("#home-page-slider-container").slick("unslick"),setTimeout(function(){$("#home-page-slider-container").css({opacity:1}),$("#home-page-slider-container").slick({autoplay:!0,arrows:!1,dots:!0,variableWidth:!1,autoplaySpeed:5e3})},1500),$("#home-page-right-part-content-1").css({height:"100vh"}),$("#home-page").css({height:"100vh"})}catch(e){showToast("Sorry","Some Error occured")}}function changeBackgroundImage(){var e=settings.bg_img_url;e.includes("http")?api_succeed&&
// if server is working and theme is the url from server
// $("#login-container").css({
//   "background-image": "url(" + bg_img_url + ")",
// });
$("#app").css({"background-image":"url("+e+")"}):(e=HOST+"app_src_min/images/background.jpg",
// $("#login-container").css({
//   "background-image": "url(" + bg_img_url + ")",
// });
$("#app").css({"background-image":"url("+e+")"}))}function parseM3uResponse(e,t){var i=0;if("general"===e){var s=[],a=[],o=[],n=[],r=[],l=[],c=(t=t.replace(/['"]+/g,""),t.split(/#EXTINF:-{0,1}[0-9]{1,} {0,},{0,}/gm)),d=(c.splice(0,1),[]),h=(new Date).getTime()/1e3;if(t.includes("tvg-"))for(
// if general m3u type 1
var _={},u={},m={},p=0;p<c.length;p++)try{d=c[p].split("\n"),i++;var g=1<d[1].length?d[1]:"",e,v,f,y,b,k,w,w,w;g.includes("http:")&&(e="live",(g.includes("/movie/")||g.includes("vod")||g.includes("=movie")||g.includes("==movie=="))&&(e="vod"),g.includes("/series/")&&(e="series"),v=d[0].trim().split(","),f=1<v.length?v[1]:"",y=splitStrings(v[0],["tvg-","channel-","group-"]),b={stream_id:"",name:f,stream_icon:"",title:""},k="All",y.map(function(e){var e=e.split("="),t=e[0],i=e[1];switch(t){case"id":b.stream_id=i;break;case"name":b.name=""!=i.trim()?i:f;break;case"logo":b.stream_icon=i;break;case"title":k=i.split(",")[0],""==k&&(k="Uncategorized")}}),""===b.stream_id.trim()&&(b.stream_id=b.name),b.url=g,b.num=i,"live"===e&&(void 0===_[k]&&(_[k]=k,w={category_id:k,category_name:k},s.push(w)),b.category_id=k,a.push(b)),"vod"===e&&(void 0===u[k]&&(u[k]=k,w={category_id:k,category_name:k},n.push(w)),b.category_id=k,o.push(b)),"series"===e)&&(void 0===m[k]&&(m[k]=k,w={category_id:k,category_name:k},r.push(w)),b.category_id=k,l.push(b))}catch(e){}else for(var s=[{category_id:"all",category_name:"All"}],n=[{category_id:"all",category_name:"All"}],r=[{category_id:"all",category_name:"All"}],p=0;p<c.length;p++){d=c[p].split("\n");try{var f=d[0],g=d[1],e="live",b=(g.includes("/movie/")&&(e="movie"),g.includes("/series/")&&(e="series"),{});f=f.trim(),b.stream_id=f,b.name=f,b.stream_icon="",b.num=p+1,b.category_id="all",b.url=g,"live"===e&&a.push(b),"series"===e&&l.push(b),"movie"===e&&o.push(b)}catch(e){}}1<s.length&&s.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<n.length&&n.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),1<r.length&&r.map(function(e){"All"===e.category_id&&(e.category_name="Uncategorized")}),LiveModel.setCategories(s),LiveModel.setMovies(a),LiveModel.insertMoviesToCategories(),VodModel.setCategories(n),VodModel.setMovies(o),VodModel.insertMoviesToCategories(),SeriesModel.setCategories(r);var t=parseSeries(l);SeriesModel.setMovies(t),SeriesModel.insertMoviesToCategories()}}function parseSeries(e){var s=[],o={},n={},r={},a=(e.map(function(e){try{var t=e.name.split(/ S[0-9]{2}/),i=e.name.match(/S[0-9]{2}/)[0],i=i.trim().replace("S",""),s=(i="Season "+i,t[0].trim()),a=t[1].trim().replace("E","");void 0===o[s]?(n={},r={},// Initialize for every other series
r[i]=[{name:a,url:e.url,id:a,info:{},title:"Episode "+a}],n[i]={name:i,cover:HOST+"app_src_min/images/series.png"},o[s]={series_id:s,name:s,cover:e.stream_icon,youtube_trailer:"",category_id:e.category_id,rating:"",rating_5based:"",genre:"",director:"",cast:"",plot:"",season_map:n,episodes:r}):(void 0===n[i]?(r[i]=[{name:a,url:e.url,id:a,info:{},title:"Episode "+a}],n[i]={name:i,cover:HOST+"app_src_min/images/series.png"},o[s].season_map=n):r[i].push({name:i,url:e.url,id:i,info:{},title:"Episode "+a}),o[s].episodes=r)}catch(e){
// console.log(e);
}}),0);return Object.keys(o).map(function(e){a++;var t=o[e],i=[];try{Object.keys(t.season_map).map(function(e){i.push(t.season_map[e])})}catch(e){}delete t.season_map,t.num=a,t.seasons=i,s.push(t)}),s}function splitStrings(e,t){for(var i=[],s=0;s<t.length;s++){var a=e.split(t[s]);if(s==t.length-1)for(var o=0;o<a.length;o++)""!=a[o].trim()&&i.push(a[o]);else for(var o=0,n;o<a.length;o++)""!=a[o].trim()&&(n=splitStrings(a[o],t.slice(s+1)),n.map(function(e){""!==e.trim()&&i.push(e)}));return i}}function getAtob(e){var t=e;try{return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){}return t}function checkForAdult(e,t,i,s){if("off"==parent_account_password&&s)return!1;var s=!1,a;if("movie"===t){
//
for(var o=0;o<i.length;o++)if(e.category_id==i[o].category_id){a=i[o];break}}else a=e;var t=a.category_name.toLowerCase();return(t.includes("xxx")||t.includes("adult")||t.includes("porn"))&&(s=!0),s}function pickPanelUrl(i){for(var e,t,s=[],a=(panel_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),o=1/s.length,n=0;n<s.length;n++)if(n*o<=a&&a<=o*(n+1)){e=s[n],t=n;break}return[t,e]}function pickAgentUrl(i){for(var e,t,s=[],a=(agent_urls.map(function(e,t){i.includes(t)||s.push(e)}),Math.random()),o=1/s.length,n=0;n<s.length;n++)if(n*o<=a&&a<=o*(n+1)){e=s[n],t=n;break}return[t,e]}function setSelectionRange(t){setTimeout(function(){var e=$(t).val();$(t)[0].setSelectionRange(e.length,e.length)},200)}function getSortedMovies(e,t){var i=[],s="number"===t?"num":"a_z"!==t&&"z_a"!==t?t:"name";if(0==e.length)return e;if(void 0===e[0][s])return e;var a=1;switch(t){case"rating":case"number":case"added":case"last_modified":a="number"===t?-1:1,i=e.sort(function(e,t){var e=parseFloat(e[s]),t=(isNaN(e)&&(e=0),parseFloat(t[s]));return isNaN(t)&&(t=0),a*(e<t?1:t<e?-1:0)});break;case"a_z":case"z_a":case"name":a="a_z"===t||"name"===t?1:-1,i=e.sort(function(e,t){return a*e[s].localeCompare(t[s])});break;case"default":return e}return i}function updateCurrentTime(){var e=moment().format("hh:mm A");$(".current-time").text(e)}function parseM3uUrl(e){
// here, we will check if it is xtreme url or general m3u url
var t,i,s,a,o,a,t=e.includes("username=")&&e.includes("password=")?"xc":"general",a="xc"==t?(o=e.split("?"),a=o[1].split("&"),a.map(function(e){var e=e.split("="),t=e[0],e=e[1];"username"===t.toLowerCase()&&(i=e),"password"===t.toLowerCase()&&(s=e)}),o[0].replace("/get.php","")):e;return{playlist_type:t,url:a,username:i,password:s}}function getEncryptKey(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i="";i.length<e;i+=t.charAt(62*Math.random()|0));return i}function getEncryptKeyPosition(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i=0;i<t.length;i++)if(t[i]==e)return i}function getEncryptPositionChar(e){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";return t.charAt(e)}function encryptRequest(e){var t=0,i=1,e=JSON.stringify(e),e=btoa(e),s=parseInt(30*Math.random()),a=(s<20&&(s=20),Math.floor(Math.random()*e.length)),o=(42<=a&&(a=42),getEncryptKey(s)),o=e.slice(0,a).concat(o).concat(e.slice(a)),e=getEncryptPositionChar(a),a=getEncryptPositionChar(s),o=o.slice(0,0)+e+o.slice(0);return o=o.slice(0,1)+a+o.slice(1),o}function decryptResponse(e){var e=e.data,t,i,t=getEncryptKeyPosition(e[e.length-2]),i=getEncryptKeyPosition(e[e.length-1]),e=e.slice(0,e.length-2),s=e.slice(t,t+i),e=e.slice(0,t).concat(e.slice(t+i)),e=getAtob(e),t=JSON.parse(e);
// console.log(data);
return t}function newEncryptRequest(e,t){return CryptoJS.AES.encrypt(JSON.stringify(e),t).toString()}function newDecryptResponse(e,t){return JSON.parse(CryptoJS.AES.decrypt(e,t).toString(CryptoJS.enc.Utf8))}function changeLocalStorageKeysForPlaylist(e,s){for(var a=[],t=localStorage.length-1;0<=t;t--){var o=localStorage.key(t);e.map(function(e,t){var i,e;o.includes(e)&&o.includes(storage_id)&&(i=localStorage.getItem(o),e=o.replace(e,s[t]),localStorage.setItem(e,i),a.push(o))})}a.map(function(e){localStorage.removeItem(e)})}function removeLocalStorageKeysForPlaylist(e){for(var t=[],i=localStorage.length-1;0<=i;i--){var s=localStorage.key(i);e.map(function(e){s.includes(storage_id)&&s.includes(e)&&t.push(s)})}t.map(function(e){localStorage.removeItem(e)})}function checkActivePlaylist(){return!(!settings.playlist_id||0==Object.keys(settings.playlist).length)||(showToast("Sorry","No active playlist now<br>Please select one playlist in change playlist page"),!1)}function makeRearrangeArray(e,t,i){var t=e.splice(t,1)[0];return e.splice(i,0,t),e}function getRealMovieName(e){for(
// get the movie name after removing year, and country name from movie name
var e=e.split("-"),e=1<e.length?e[1]:e[0],t=e.split("("),e=t[0].trim(),i="",s="",a=1;a<t.length;a++){var o=t[a].replace(")","").trim();isNaN(o)?i=o:s=parseInt(o)}return{name:e,country:i,year:s}}function hideImg(e){$(e).hide(),$(".vod-series-background-img-overlay").hide()}function checkVerticalMovable(e,t,i,s){var a=!0,e=(i<t&&s<0&&(a=!1),Math.ceil(e/t)-1);return e*t<=i&&0<s&&(a=!1),a}function checkVerticalMovable(e,t,i,s){var a=!0,e=(i<t&&s<0&&(a=!1),Math.ceil(e/t)-1);return e*t<=i&&0<s&&(a=!1),a}function handleWeatherFetchAndStore(){var e=JSON.parse(localStorage.getItem(storage_id+"weather-forecast")),t=-20;
// Make a request if the stored weather is older than 13 days ago
e&&e.date&&(t=utilities.compareTimestamps(e.date)),e&&e.timestamp&&(t=utilities.compareTimestamps(e.timestamp)),!e||t<=-13?$.getJSON("http://api.weatherapi.com/v1/forecast.json?key=0c1f9db9b99649f3a2b124503241310&q="+ip_address+"&days=14",function(e){
// Get the weather data needed from the response
var e={date:e.location.localtime,country:e.location.country,city:e.location.name,forecast:e.forecast.forecastday};
// Store the weatherData in localstorage
localStorage.setItem(storage_id+"weather-forecast",JSON.stringify(e)),
// Recursion to store data of the current day
handleWeatherFetchAndStore()}):(
// We don't need to make a request if the stored weather is less than 13 days ago
// Get weather country
weatherCountry=e.country,
// Get weather city
weatherCity=e.city,
// Get all weather forecast data
weatherForecast=e.forecast,
// Get the weather data for the current day
weatherToday=binarySearchForecastDays(weatherForecast),
// Get the weather data for the current hour
weatherNow=binarySearchForecastHours(weatherToday.hour))}function binarySearchForecastDays(e){for(var t=new Date,i=(t.setUTCHours(0,0,0,0),Math.floor(t.getTime()/1e3)),s=0,a=e.length-1;s<=a;){var o=Math.floor((s+a)/2);if(e[o].date_epoch===i)return e[o];e[o].date_epoch<i?s=o+1:a=o-1}
// If no exact match, return the most recent past date or today
return 0<=a&&e[a].date_epoch<=i?e[a]:s<e.length?e[s]:null;
// If all dates are in the future, return the earliest future date
}function binarySearchForecastHours(e){for(var t=new Date,i=Math.floor(t.getTime()/1e3),s=0,a=e.length-1;s<=a;){var o=Math.floor((s+a)/2);if(e[o].time_epoch<=i&&(o===e.length-1||e[o+1].time_epoch>i))return e[o];// Return the current or most recent past hour
e[o].time_epoch>i?a=o-1:s=o+1}
// If all hours are in the future, return the first future hour
return s<e.length?e[s]:null}fontSize&&"large"===fontSize&&document.body.classList.add("large-font"),String.prototype.endsWith||(String.prototype.endsWith=function(e){return e=String(e),this.slice(-e.length)===e}),Array.prototype.map||(Array.prototype.map=function(e,t){if(null==this)throw new TypeError("this is null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var i=Object(this),s=i.length>>>0,a=new Array(s),o=0;o<s;o++)o in i&&(a[o]=e.call(t,i[o],o,i));return a}),Array.prototype.includes||(
//or use Object.defineProperty
Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(n,r,l){return function e(t,i){if(null==this)throw TypeError("Array.prototype.indexOf called on null or undefined");var s=n(this),a=s.length>>>0,o=l(0|i,a);if(o<0)o=r(0,a+o);else if(a<=o)return-1;if(void 0===t){for(;o!==a;++o)if(void 0===s[o]&&o in s)return o;// undefined
}else if(t!=t){for(;o!==a;++o)if(s[o]!=s[o])return o;// NaN
}else for(;o!==a;++o)if(s[o]===t)return o;// all else
return-1;// if the value was not found, then return -1
}}(Object,Math.max,Math.min)),String.prototype.includes||(String.prototype.includes=function(e){return!!~this.indexOf(e)}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,// Truncate if number or convert non-number to 0
t=String(t||" "),this.length>e?String(this):(e-=this.length,e>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))});var isOnline=!0,checkInterval=null,isOnline=!0,checkInterval=null;// Assume online initially
// To store the interval ID
function checkConnection(){
// Define a list of DNS servers (Google's DNS and Cloudflare's DNS)
var e=["vidaa.iboprotv.com/",// Google's primary DNS
"vidaa.iboprotv.com/"];
// Function to ping a single DNS server
// Function to ping a single DNS server
function s(e,t,i){var s=new XMLHttpRequest;s.open("GET",e,!0),s.onreadystatechange=function(){4===s.readyState&&(200<=s.status&&s.status<300?(
// If the request is successful
handleUIOnlineStatus(!0),t):
// If the request fails
i)()},s.send()}
// Function to iterate through all DNS servers one by one
function t(e){var t=0;// Start with the first DNS in the list
// Function to try the next DNS in the list if the previous one fails
function i(){t<e.length?
// If there are still DNS servers to check
s(e[t],// Ping the current DNS at position 'index'
function(){},function(){
// Failure callback (try the next DNS)
t++,// Move to the next DNS in the list
i()}):
// If all DNS servers have failed
handleUIOnlineStatus(!1)}i()}
// Start the connection check by calling the function that checks all DNS servers
t(e)}
// Function to update the UI and connection status
function handleUIOnlineStatus(e){!0===e?($("#connection-status").removeClass("offline"),$("#connection-status").addClass("online"),
// Only change the interval if we were previously offline
isOnline||(isOnline=!0,
// Set interval to 30 seconds when online
clearInterval(checkInterval),checkInterval=setInterval(checkConnection,3e4))):($("#connection-status").removeClass("online"),$("#connection-status").addClass("offline"),
// Only change the interval if we were previously online
isOnline&&(isOnline=!1,
// Set interval to 5 seconds when offline
clearInterval(checkInterval),checkInterval=setInterval(checkConnection,5e3)))}
// Initial check
// checkConnection();
// Set an initial interval to check the connection every 30 seconds
// checkInterval = setInterval(checkConnection, 30000);
function checkDevicePerformance(i){var e={frameThreshold:30,// minimum acceptable fps
testDuration:500,// test duration in ms
iterations:1e3},t;for(t in i=i||{},e)i.hasOwnProperty(t)||(i[t]=e[t]);var s=performance.now(),a=0,o=s,n=!0,r=document.createElement("div"),l=(r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r),function(e){if(n){a++;
// Perform heavy calculations and DOM operations
for(var t=0;t<i.iterations;t++)r.style.transform="rotate("+t+"deg)",Math.sqrt(1e4*Math.random());e-s<i.testDuration?requestAnimationFrame(l):(n=!1,c())}}),c=function(){var e=performance.now(),e=e-s,e=a/(e/1e3),e=(
// Clean up test element
document.body.removeChild(r),e>=i.frameThreshold);return e?(is_device_low=!1,document.body.classList.add("allow-transition")):(is_device_low=!0,document.body.classList.remove("allow-transition")),e};
// Start the test
requestAnimationFrame(l)}
// Clear cached movies info if the host is different
var clearCachedMoviesInfo=function(){storageMoviesInfo&&(storageMoviesInfo={},localStorage.removeItem(storage_id+"saved-movie-info"))},media_player;function getHostVersion(){
// Get the version based on platform
// Priority: host.js version > common.js version
var e="";return"samsung"===platform?
// Check if host_samsung_version is defined and not empty in host.js
e="undefined"!=typeof host_samsung_version&&host_samsung_version?host_samsung_version:samsung_version:"lg"===platform?e="undefined"!=typeof host_lg_version&&host_lg_version?host_lg_version:lg_version:"vidaa"===platform?e="undefined"!=typeof host_vidaa_version&&host_vidaa_version?host_vidaa_version:vidaa_version:"zeasn"!==platform&&"titanos"!==platform||(e="undefined"!=typeof host_zeasn_version&&host_zeasn_version?host_zeasn_version:zeasn_version),e}function initKeys(){var e;if("samsung"===platform){var t,i={},s;// Register Keys;
try{for(s=tizen.tvinputdevice.getSupportedKeys(),t=0;t<s.length;t++)i[s[t].name]=s[t].code,tizen.tvinputdevice.registerKey(s[t].name);tizen.tvinputdevice.unregisterKey("VolumeUp"),tizen.tvinputdevice.unregisterKey("VolumeDown"),tizen.tvinputdevice.unregisterKey("VolumeMute")}catch(e){}e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,RETURN:10009,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}}else"lg"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:461,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072}:"vidaa"===platform?e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072,RETURN:8,PLAY_PAUSE:463,MediaPlayPause:463}:"zeasn"===platform||"titanos"===platform?(e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:427,CH_DOWN:428,TOOLS:10135,ENTER:13,// Enter key
INFO:457,EXIT:10182,UP:38,// Up arrow key
DOWN:40,// Down arrow key
LEFT:37,// Left arrow key
RIGHT:39,// Right arrow key
RED:403,// Red key
GREEN:404,// Green key
YELLOW:405,// Yellow key
BLUE:406,// Blue key
RW:412,// Rewind key
PAUSE:19,FF:417,// Fast Forward key
REC:416,PLAY:415,STOP:413,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,// Pause key
MediaFastForward:417,MediaRecord:416,MediaPlay:415,// Play key
MediaStop:413,// Stop key
MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072,RETURN:"undefined"!=typeof VK_BACK?VK_BACK:8,PLAY_PAUSE:463,MediaPlayPause:179},
// Back key code overwrite for JVC TVs
-1!==window.navigator.userAgent.toLowerCase().indexOf("vestel")&&(e.RETURN=461)):"windows"===platform&&(e={N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,N0:48,PRECH:10190,VOL_UP:448,VOL_DOWN:447,MUTE:449,CH_UP:33,CH_DOWN:34,TOOLS:10135,ENTER:13,RETURN:27,INFO:457,EXIT:10182,UP:38,DOWN:40,LEFT:37,RIGHT:39,RED:403,GREEN:404,YELLOW:405,BLUE:406,RW:412,PAUSE:19,FF:417,REC:416,PLAY:415,STOP:413,PLAYPAUSE:10252,MENU:10133,SEARCH:10255,MediaRewind:412,MediaPause:19,MediaFastForward:417,MediaRecord:416,MediaPlay:415,MediaStop:413,MediaPlayPause:10252,MediaTrackPrevious:10232,MediaTrackNext:10233,Source:10072});window.tvKey=e}function initPlayer(){media_player="samsung"===platform?{videoObj:null,parent_id:"",STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},current_time:0,reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",init:function(e,t){this.videoObj=null,// tag video
this.parent_id=t,this.state=this.STATES.STOPPED,this.parent_id=t,this.current_time=0,this.reconnect_count=0,this.url="",this.videoObj=document.getElementById(e),$("#"+t).find(".video-error").hide(),$(".video-resolution").text(""),$("#"+this.parent_id).find(".subtitle-container").html("").hide()},playAsync:function(e){if(this.url=e,$("#"+this.parent_id).find(".video-error").hide(),$(".video-loader").show(),!(this.state>this.STATES.STOPPED)){if(!this.videoObj)return 0;try{webapis.avplay.open(e),this.setupEventListeners(),this.setDisplayArea(),
// webapis.avplay.setBufferingParam("PLAYER_BUFFER_FOR_PLAY","PLAYER_BUFFER_SIZE_IN_BYTE", 1000); // 5 is in seconds
webapis.avplay.setBufferingParam("PLAYER_BUFFER_FOR_PLAY","PLAYER_BUFFER_SIZE_IN_SECOND",3);// 5 is in seconds
var o=this;webapis.avplay.prepareAsync(function(){$(".video-loader").hide(),o.reconnect_count=0,o.state=o.STATES.PLAYING,webapis.avplay.play(),$("#"+o.parent_id).find(".video-total-time").text(o.formatTime(webapis.avplay.getDuration()/1e3)),$("#"+o.parent_id).find(".video-error").hide();var e={min:0,max:webapis.avplay.getDuration()/1e3};$("#"+o.parent_id).find(".video-progress-bar-slider").attr(e),$("#"+o.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+o.parent_id).find(".video-current-time").text("00:00"),$("#"+o.parent_id).find(".video-reconnect-message").hide(),"vod-series-player-video"===current_route&&vod_series_player_page.showResumeBar();try{for(var t=webapis.avplay.getCurrentStreamInfo(),i=0;i<t.length;i++)if("VIDEO"===t[i].type){var s=JSON.parse(t[i].extra_info),a;s.Width&&s.Height&&(a=s.Width+" x "+s.Height,$(".video-resolution").text(a));break}}catch(e){}},function(){$(".video-loader").hide(),$("#"+o.parent_id).find(".video-error").show(),o.reconnect_count<o.reconnect_max_count&&o.tryReconnect()})}catch(e){$(".video-loader").hide(),$("#"+this.parent_id).find(".video-error").show(),this.reconnect_count<this.reconnect_max_count&&this.tryReconnect()}}},play:function(){this.state=this.STATES.PLAYING;try{webapis.avplay.play()}catch(e){}},pause:function(){
// if (this.state != this.STATES.PLAYING) {
//     return;
// }
this.state=this.STATES.PAUSED;try{webapis.avplay.pause()}catch(e){}},stop:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.stop()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},close:function(){this.state=this.STATES.STOPPED;try{webapis.avplay.close()}catch(e){}this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},tryReconnect:function(){
// console.log("here reconnecting", this.reconnect_count);
if(clearTimeout(this.reconnect_timer),this.reconnect_count+=1,this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{$("#"+this.parent_id).find(".video-reconnect-message").show(),this.state=this.STATES.STOPPED;var e=this;try{webapis.avplay.close()}catch(e){}this.reconnect_timer=setTimeout(function(){e.playAsync(e.url)},6e3)}},setDisplayArea:function(e,t){if(webapis&&webapis.avplay){var i=null,i="channel"==t?"#channel-page-video-lg":"#vod-series-player-video-lg";if(e)try{var s=$(this.videoObj).parent().width(),a=$(this.videoObj).parent().height(),o,n;switch(e){case"1:1":// Square
$(i).css("object-fit","fill"),o=a,n=o;break;case"16:9":// Standard widescreen
$(i).css("object-fit","fill"),o=a,n=Math.round(o*(16/9));break;case"4:3":// Traditional TV
$(i).css("object-fit","fill"),o=a,n=Math.round(o*(4/3));break;case"21:9":// Ultra widescreen
$(i).css("object-fit","fill"),n=window.innerWidth,// Use screen width
o=Math.round(n*(9/21));// Calculate height based on 21:9 ratio
break;case"stretch":$(i).css("object-fit","fill"),n=s,o=a;break;default:$(i).css("object-fit","contain"),n=s,o=a}
// Calculate centered position
var r=Math.round((s-n)/2),l=Math.round((a-o)/2),s=$(this.videoObj).parent().width();s<n&&(r-=(n-s)/2),
// Apply the new dimensions using Samsung's API
webapis.avplay.setDisplayRect(Math.round(r),Math.round(l),Math.round(n),Math.round(o))}catch(e){}else{var l=$(this.videoObj).offset().top,r=$(this.videoObj).offset().left,n=parseInt($(this.videoObj).width()),o=parseInt($(this.videoObj).height());webapis.avplay.setDisplayRect(r,l,n,o)}}},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},setupEventListeners:function(){var a=this,e={onbufferingstart:function(){$("#"+a.parent_id).find(".video-loader").show()},onbufferingprogress:function(e){
// console.log("Buffering progress: "+percent);
},onbufferingcomplete:function(){
// console.log('Buffering Complete, Can play now!');
$("#"+a.parent_id).find(".video-loader").hide()},onstreamcompleted:function(){
// console.log('video has ended.');
$("#"+a.parent_id).find(".video-error").hide(),webapis.avplay.stop(),a.state=a.STATES.STOPPED,
// document.getElementById('progress-amount').style.width = "100%";
$("#"+a.parent_id).find(".progress-amount").css({width:"100%"}),"vod-series-player-video"===current_route&&vod_series_player_page.showNextVideo(1,!0)},oncurrentplaytime:function(e){a.current_time=e,$("#"+a.parent_id).find(".video-error").hide(),"vod-series-player-video"===current_route&&(vod_series_player_page.current_time=e/1e3);var t=webapis.avplay.getDuration();0<t&&($("#"+a.parent_id).find(".video-current-time").html(a.formatTime(e/1e3)),$("#"+a.parent_id).find(".video-progress-bar-slider").val(e/1e3).change())},ondrmevent:function(e,t){
// console.log("DRM callback: " + drmEvent + ", data: " + drmData);
},onerror:function(e,t){$("#"+a.parent_id).find(".video-error").show();
// console.log("OnError: " + data);
},onsubtitlechange:function(e,t,i,s){$("#"+a.parent_id).find(".subtitle-container").html(""),$("#"+a.parent_id).find(".subtitle-container").html(t)}};webapis.avplay.setListener(e)},onDeviceReady:function(){document.addEventListener("pause",this.onPause),document.addEventListener("resume",this.onResume)},onPause:function(){this.pause()},onResume:function(){this.play()},getSubtitleOrAudioTrack:function(e){var t=[];if("develop"==env)t=[{extra_info:{fourCC:"un",subtitle_type:"0",track_lang:"un",index:3,type:"TEXT"}}];else{var i="",s="TEXT"===e?"track_lang":"language",a="TEXT"===e?"Subtitle ":"Track ";try{for(var o=webapis.avplay.getTotalTrackInfo(),n=0,r,l;n<o.length;n++)try{o[n].type==e&&(r=JSON.parse(o[n].extra_info),"TEXT"===e||"AUDIO"===e?(l=r[s].trim(),i.includes(l)||""===l?""===l&&(r[s]=a+(n+1),o[n].extra_info=r,t.push(o[n])):(i+=", "+l,r[s]=void 0!==language_codes[l]?language_codes[l]:l,o[n].extra_info=r,t.push(o[n]))):(o[n].extra_info=r,t.push(o[n])))}catch(e){}
// console.log(kind, result);
}catch(e){}}return t},setSubtitleOrAudioTrack:function(e,t){try{webapis.avplay.setSelectTrack(e,t)}catch(e){}"TEXT"===e&&(-1==t?$("#"+this.parent_id+" .subtitle-container").hide():$("#"+this.parent_id+" .subtitle-container").show())}}:{id:"",videoObj:null,parent_id:"",current_time:0,STATES:{STOPPED:0,PLAYING:1,PAUSED:2,PREPARED:4},subtitles:[],tracks:[],reconnect_timer:null,reconnect_count:0,reconnect_max_count:10,url:"",srt_map:{},movie_list_id:null,init:function(e,t){this.reconnect_count=0,this.url="",this.srt_map={},this.movie_list_id=null,e.includes("-lg")||(e+="-lg"),"lg"!=platform&&($("video").addClass("hide"),$("#"+e).removeClass("hide"),
// Hide the object element initially
$("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden")),this.id=e,this.videoObj=null,// tag video
this.parent_id=t,this.current_time=0,$("#"+t).find(".video-error").hide(),this.state=this.STATES.STOPPED,this.videoObj=document.getElementById(e),this.subtitles=[],this.tracks=[],$("#"+this.parent_id).find(".subtitle-container").html("").hide(),SrtOperation.deStruct();var s=this.videoObj,a=this,e=document.getElementById("channel-page-video"),i=document.getElementById("vod-series-player-video");e&&(e.onload=function(){$(this).css("visibility","visible")}),i&&(i.onload=function(){$(this).css("visibility","visible")}),this.videoObj.addEventListener("error",function(e){a.tryReconnect(),$("#"+a.parent_id).find(".video-error").show()}),this.videoObj.addEventListener("canplay",function(e){$("#"+a.parent_id).find(".video-error").hide(),
// Show the video element
"lg"!=platform&&($("#channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible"))}),this.videoObj.addEventListener("durationchange",function(e){
// $('#'+that.parent_id).find('.video-error').hide();
}),this.videoObj.addEventListener("loadeddata",function(e){var t=parseInt(s.duration),i={min:0,max:t};$("#"+a.parent_id).find(".video-progress-bar-slider").attr(i),$("#"+a.parent_id).find(".video-progress-bar-slider").rangeslider("update",!0),$("#"+a.parent_id).find(".video-total-time").text(a.formatTime(t)),"vod-series-player-video"===current_route&&vod_series_player_page.showResumeBar(),$("#"+a.parent_id).find(".video-reconnect-message").hide(),a.reconnect_count=0,clearTimeout(a.reconnect_timer)}),$("#"+t).find(".video-reconnect-message").hide(),this.videoObj.ontimeupdate=function(e){
// $('#'+that.parent_id).find('.video-error').hide();
var t=a.videoObj.duration,i=a.videoObj.currentTime;0<t&&($("#"+a.parent_id).find(".video-progress-bar-slider").val(i).change(),$("#"+a.parent_id).find(".video-current-time").html(a.formatTime(i))),"vod-series-player-video"==current_route&&(vod_series_player_page.current_time=i,SrtOperation.timeChange(s.currentTime))},this.videoObj.addEventListener("loadedmetadata",function(){
//     var  duration=parseInt(videoObj.duration);
//     $('#'+that.parent_id).find('.video-total-time').text(that.formatTime(duration));
var e="No Information";try{var t=a.videoObj.videoWidth,i=a.videoObj.videoHeight;t&&i&&(e=t+" x "+i+"px")}catch(e){}$(".video-resolution").text(e)}),this.videoObj.addEventListener("waiting",function(e){
// console.log('Video is waiting for more data.',event);
}),this.videoObj.addEventListener("suspend",function(e){
// $('#'+that.parent_id).find('.video-error').show();
}),this.videoObj.addEventListener("stalled",function(e){}),this.videoObj.addEventListener("ended",function(e){"vod-series-player-video"===current_route&&vod_series_player_page.showNextVideo(1,!0)}),this.videoObj.addEventListener("emptied",function(e){
// console.log("Empty");
// $('#'+that.parent_id).find('.video-error').show();
})},playAsync:function(e){
// For vidaa
"lg"!=platform&&($("#channel-page-video").css("visibility","hidden"),$("#vod-series-player-video").css("visibility","hidden"));try{this.videoObj.pause()}catch(e){}this.url=e;var t=this;for($("#"+this.parent_id).find(".video-error").hide();this.videoObj.firstChild;)this.videoObj.removeChild(this.videoObj.firstChild);this.videoObj.load();var i=document.createElement("source");i.setAttribute("src",e),this.videoObj.appendChild(i),
// For vidaa
this.videoObj.addEventListener("playing",function e(){"lg"!=platform&&($("channel-page-video").css("visibility","visible"),$("#vod-series-player-video").css("visibility","visible")),this.removeEventListener("playing",e)}),this.videoObj.play(),$("#"+this.parent_id).find(".progress-amount").css({width:0}),i.addEventListener("error",function(e){$(".video-loader").hide(),$("#"+t.parent_id).find(".video-error").show(),t.tryReconnect()}),i.addEventListener("emptied",function(e){$("#"+t.parent_id).find(".video-error").show()}),this.state=this.STATES.PLAYING},tryReconnect:function(){if(clearTimeout(this.reconnect_timer),this.reconnect_timer=null,this.reconnect_count+=1,this.reconnect_count>=this.reconnect_max_count)$("#"+this.parent_id).find(".video-reconnect-message").hide();else{$("#"+this.parent_id).find(".video-reconnect-message").show();var e=this;try{this.videoObj.close()}catch(e){}this.reconnect_timer=setTimeout(function(){try{e.playAsync(e.url)}catch(e){}},6e3)}},play:function(){this.state=this.STATES.PLAYING,this.videoObj.play(),0<SrtOperation.srt.length&&(// if has subtitles
SrtOperation.stopped=!1)},setDisplayArea:function(e,t){var i=null,i="channel"==t?"#channel-page-video-lg":"#vod-series-player-video-lg";if(e){$("video_element").css("object-fit","fill");var s=parseInt($(this.videoObj).height()),a;// px
// px
switch(e){case"1:1":// Square
$("video_element").css("object-fit","fill"),a=s+"px";break;case"16:9":// Standard widescreen
$("video_element").css("object-fit","fill"),a=Math.round(s*(16/9))+"px";break;case"4:3":// Traditional TV
$("video_element").css("object-fit","fill"),a=Math.round(s*(4/3))+"px";break;case"21:9":// Ultra widescreen
$("video_element").css("object-fit","fill"),a=Math.round(s*(21/9))+"px";break;case"stretch":$("video_element").css("object-fit","fill"),a="100%",s="100%";break;default:$("video_element").css("object-fit","contain"),a="100%",s="100%"}this.videoObj.style.width=a,this.videoObj.style.height=s}},pause:function(){this.state=this.STATES.PAUSED;try{this.videoObj.pause()}catch(e){}},close:function(){try{this.videoObj.pause()}catch(e){}this.state=this.STATES.STOPPED,SrtOperation.deStruct(),this.subtitles=[],this.reconnect_count=0,clearTimeout(this.reconnect_timer),$("#"+this.parent_id).find(".video-reconnect-message").hide()},formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,e=Math.floor(e)%60;return(t?(t<10?"0":"")+t+":":"")+(i<10?"0":"")+i+":"+(e<10?"0":"")+e},seekTo:function(e){},getSubtitleOrAudioTrack:function(e){var i=[],s,s="TEXT"==e?0<media_player.videoObj.textTracks.length?media_player.videoObj.textTracks:{}:0<media_player.videoObj.audioTracks.length?media_player.videoObj.audioTracks:{};return 0<Object.keys(s).length&&Object.keys(s).map(function(e,t){"object"==typeof s[e]&&null!=s[e]&&i.push(s[e])}),i},setSubtitleOrAudioTrack:function(e,t){if("TEXT"==e){var e;-1==t?(SrtOperation.deStruct(),this.subtitles=[],$("#"+this.parent_id+" .subtitle-container").hide()):(this.subtitles[t]&&(e=this.subtitles[t].file_id.toString(),this.srt_map[e])&&SrtOperation.init(this.srt_map[e],media_player.videoObj.currentTime),$("#"+this.parent_id+" .subtitle-container").show())}else{for(var i=0;i<this.videoObj.audioTracks.length;i++)this.videoObj.audioTracks[i].enabled=!1;this.videoObj.audioTracks[t].enabled=!0}}}}var VodModel={movies:[],category_name:"vod_categories",favourite_movie_count:200,recent_movie_count:15,movie_key:"stream_id",categories:[],saved_video_times:{},favourite_ids:[],stream_type:"vod",favourite_insert_position:"after",recent_insert_position:"before",init:function(){this.movies=[],this.categories=[]},isProtected:function(e){return!!checkForAdult(e,"category",[])},setCategories:function(e){var t=this.stream_type,i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"),i=null==i?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i){for(var s=this.stream_type,a=this.saved_video_times,o=-1,n=0;n<a.length;n++)if(a[n].stream_id==e){o=n;break}var t={stream_id:e,time:t,duration:i};-1!=o?a[o]=t:a.push(t),this.saved_video_times=a,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+s+"_times",JSON.stringify(a))},removeVideoTime:function(e){for(var t=this.stream_type,i=this.saved_video_times,s=0;s<i.length;s++)if(i[s].stream_id==e){i.splice(s,1);break}this.saved_video_times=i,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+t+"_times",JSON.stringify(i))},addToWatchList:function(t){var e=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[e].movies,s=!1;i.map(function(e){e.stream_id==t.stream_id&&(s=!0)}),s||(i.unshift(t),i.splice(this.recent_movie_count),this.categories[e].movies=i)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s=0;s<i.length;s++)if(i[s].stream_id==e.stream_id){i.splice(s,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!0),a=(s[e].is_hide=t,s[e].category_id),o=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==o&&(o=[]),t&&!o.includes(a))
// if hide category,
o.push(a);else
// if show category
if(o.includes(a))for(var n=0;n<o.length;n++)if(o[n]==a){o.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(o))},getCategories:function(t,i){var e=this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id});return e},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var d=this,t=this.stream_type,e=this.movies,i=this.categories,s=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens");function a(e){return s.includes(e)}
// Define special categories
for(var s=null==s?[]:JSON.parse(s),o={recent:{category_id:"recent",category_name:"Continue Watching",parent_id:0,movies:[],is_hide:a("recent")},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:a("top_rated")},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:a("favourite")},newlyAdded:{category_id:"newly_added",category_name:"Newly Added",parent_id:0,movies:[],is_hide:a("newly_added")},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:a("undefined")}},n=(
// Add undefined category to the list
i.push(o.undefined),{}),r=0;r<i.length;r++){var l=(i[r].category_name||"").toLowerCase();(l.includes("xxx")||l.includes("adult")||l.includes("porn")||l.includes("sex"))&&(n[i[r].category_id]=!0)}function h(e){return!0===n[e]}
// Retrieve and parse saved video progress
// Categorize movies
for(var c=k(),_=(this.saved_video_times=c,this.movie_key),u=w(),m=(this.favourite_ids=u,C(c)),p=[],g=[],v=[],f=[],y={},b=Math.floor(Date.now()/1e3),r=0;r<e.length;r++)$(e[r],y,m,u,p,g,v,f,b);
// Order recent movies based on watch progress
// Helper functions
function k(){var e=storage_id+settings.playlist.id+"_saved_"+t+"_times",e=localStorage.getItem(e);return e?JSON.parse(e):[]}function w(){var e=storage_id+settings.playlist.id+t+"_favourite",e=JSON.parse(localStorage.getItem(e));return e||[]}function C(e){return"xc"===settings.playlist.playlist_type?e.map(function(e){return parseInt(e.stream_id,10)}):e.map(function(e){return e.stream_id})}function $(e,t,i,s,a,o,n,r,l){void 0!==e.category_id&&"null"!==e.category_id&&null!==e.category_id||(e.category_id="undefined");var c=e.category_id.toString(),t=(t[c]||(t[c]=[]),t[c].push(e),e.is_recent=!1,-1!==i.indexOf(e[_])&&a.push(e),-1!==s.indexOf(e[_])&&("before"===d.favourite_insert_position?o.unshift(e):o.push(e)),h(c));t||!e.rating||isNaN(parseFloat(e.rating))||r.push(e),
// Check if the movie was added within the last 15 days
!t&&e.added&&S(e.added,l)&&n.push(e)}function S(e,t){var i=1296e3;return t-e<=i}function M(e,i){var s=[];return e.forEach(function(e){for(var t=0;t<i.length;t++)if(i[t].stream_id==e){s.unshift(i[t]),i.splice(t,1);break}}),s}function B(e,i){e.forEach(function(e){var t=e.category_id.toString();e.movies=i[t]||[]})}function T(e){for(var t=0;t<e.length;t++)if("undefined"===e[t].category_id&&0===e[t].movies.length){e.splice(t,1);break}}p=M(m,p),
// Assign movies to their respective categories
B(i,y),
// Assign special category movies
o.recent.movies=p,o.favourite.movies=g,o.newlyAdded.movies=v,o.topRated.movies=utilities.getTopRatedMovies(f)||[],null==o.topRated.movies&&(o.topRated.movies=[]),
// Add special categories at the beginning
i.unshift(o.newlyAdded),i.unshift(o.topRated),i.unshift(o.favourite),i.unshift(o.recent),
// Remove undefined category if empty
T(i),this.categories=i,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return"favourite"===e?1:0},getRecentOrFavouriteCategory:function(e){var e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){// if added, it will be true
for(var i=this.getRecentOrFavouriteCategory(t),s=i.movies,a=!1,o=this.movie_key,i=!1,n=0,r,r,s;n<s.length;n++)if(s[n][o]==e[o]){a=!0;break}return a||(r=this[t+"_insert_position"],"before"===r?s.unshift(e):s.push(e),r=this[t+"_movie_count"],s=s.splice(0,r),this.setRecentOrFavouriteMovies(s,t),i=!0),i},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a}},LiveModel={movies:[],category_name:"live_categories",favourite_movie_count:500,recent_movie_count:15,movie_key:"stream_id",categories:[],programmes:{},movie_saved:!1,programme_saved:!1,favourite_ids:[],stream_type:"live",favourite_insert_position:"after",recent_insert_position:"before",favourite_position:1,recent_position:0,category_orders:[],channel_orders:{},init:function(){this.channel_orders={},this.movies=[],this.categories=[],this.recent_position=0,this.favourite_position=1},setCategories:function(e){var t=this.stream_type,i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"),i=null==i?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!0),a=(s[e].is_hide=t,s[e].category_id),o=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==o&&(o=[]),t&&!o.includes(a))// if hide category,
o.push(a);else// if show category
if(o.includes(a))for(var n=0;n<o.length;n++)if(o[n]==a){o.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(o))},getCategories:function(t,i){var e=this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id});return e},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var e=localStorage.getItem(storage_id+settings.playlist.id+"_category_orders"),e=e?JSON.parse(e):[],t=(this.category_orders=e,localStorage.getItem(storage_id+settings.playlist.id+"_channel_orders")),t=t?JSON.parse(t):{},i=(this.channel_orders=t,this.stream_type),s=this.movies,a=this.categories,o=localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens");function n(e){return o.includes(e)}var o=null==o?[]:JSON.parse(o),r={category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:n("recent")},l={category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:n("favourite")},c={category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:n("undefined")},d=(a.push(c),this.movie_key),h=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_recent")),_=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_favourite")),h=null==h?[]:h,_=null==_?[]:_;this.favourite_ids=_;
// movies.map(function(movie){
for(var u=[],m=[],p=this,g={},v=0;v<s.length;v++){
// for(var i=0;i<100;i++){
var f=s[v],y=(void 0!==f.category_id&&"null"!=f.category_id&&null!=f.category_id||(f.category_id="undefined"),f.category_id.toString());void 0===g[y]?g[y]=[f]:g[y].push(f),f.is_recent=!1,h.includes(f[d])&&("before"===p.recent_insert_position?u.unshift(f):u.push(f),f.is_recent=!0),_.includes(f[d])&&("before"===p.favourite_insert_position?m.unshift(f):m.push(f))}for(var v=0;v<a.length;v++){// except favourite, and recent movies
var y=a[v].category_id.toString();a[v].movies=void 0===g[y]?[]:g[y]}r.movies=u,l.movies=m,a.unshift(l),a.unshift(r);
// categories.unshift(all_category);
for(var v=0;v<a.length;v++)if("undefined"===a[v].category_id){0==a[v].movies.length&&a.splice(v,1);break}for(var v=0;v<a.length;v++)if("undefined"===a[v].category_id){a[v].movies&&0==a[v].movies.length&&a.splice(v,1);break}for(var v=0;v<e.length;v++)for(k=0;k<a.length;k++)if(e[v].id==a[k].category_id){a=makeRearrangeArray(a,k,e[v].position);break}for(var v=0;v<a.length;v++)if("favourite"==a[v].category_id&&(this.favourite_position=v),"recent"==a[v].category_id&&(this.recent_position=v),t[a[v].category_id]){for(// rearrange started.
var b=t[a[v].category_id],s=a[v].movies,k=0;k<b.length;k++)for(var w=0;w<s.length;w++)if(b[k].id==s[w].stream_id&&b[k].name==s[w].name){s=makeRearrangeArray(s,w,b[k].position);break}a[v].movies=s}this.categories=a,this.movies=[]},updateRecentAndFavouritePosition:function(){for(var e=this.categories,t=0;t<e.length;t++)"favourite"===e[t].category_id&&(this.favourite_position=t),"recent"===e[t].category_id&&(this.recent_position=t)},getRecentOrFavouriteCategoryPosition:function(e){return this[e+"_position"]},getRecentOrFavouriteCategory:function(e){var e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){// if added, it will be true
for(var i=this.getRecentOrFavouriteCategory(t),s=i.movies,a=!1,o=this.movie_key,i=!1,n=0,r,r,s;n<s.length;n++)if(s[n][o]==e[o]){a=!0;break}return a||(r=this[t+"_insert_position"],"before"===r?s.unshift(e):s.push(e),r=this[t+"_movie_count"],s=s.splice(0,r),this.setRecentOrFavouriteMovies(s,t),i=!0),i},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a},getProgrammeVideoUrl:function(e,t){var i,i,i,i,t,e;return"xc"===settings.playlist.playlist_type?(i=settings.time_format,i=12==i?"Y-MM-DD hh:mm A":"Y-MM-DD HH:mm",i=moment(t.start,i),i=i.subtract(time_difference_with_server,"minute").format("Y-MM-DD:HH-mm"),t=getMinute(t.stop)-getMinute(t.start),api_host_url.endsWith("/")&&(api_host_url=api_host_url.slice(0,-1)),e=api_host_url+"/streaming/timeshift.php?username="+user_name+"&password="+password+"&stream="+e+"&start="+i+"&duration="+t,{duration:t,url:e}):{duration:"00:00",url:""}},getNextProgrammes:function(e){for(var t=!1,i=[],s=moment(new Date).unix(),a=0,o=0;o<e.length;o++){var n=e[o],r=moment(n.stop).unix(),r;if(s<=r&&(a++,r=moment(n.start).unix(),r<=s&&(t=!0),i.push(e[o])),4<=a)break}return{current_program_exist:t,programmes:i}}},SeriesModel={movies:[],favourite_movie_count:200,recent_movie_count:15,movie_key:"series_id",categories:[],saved_video_times:{},favourite_ids:[],stream_type:"series",favourite_insert_position:"after",recent_insert_position:"before",init:function(){this.movies=[],this.categories=[]},isProtected:function(e){return!!checkForAdult(e,"category",[])},setCategories:function(e){var t=this.stream_type,i=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens"),i=null==i?[]:JSON.parse(i);e.map(function(e){e.is_hide=i.includes(e.category_id)}),this.categories=e},saveVideoTime:function(e,t,i,s,a){
// Find the existing series time data by stream_id
for(var o=this.stream_type,n=this.saved_video_times,r=-1,l={},c=0;c<n.length;c++)if(n[c].stream_id==e){r=c,// Update index if found
l=n[c].video_times;// Get existing video times
break;// Exit loop
}var d={},s=(l[t.toString()]&&(d=l[t.toString()]),{time:s,duration:a}),a=(
// Store episode time data in the season data
d[i.toString()]=s,
// Update series time data with the modified season time data
l[t.toString()]=d,{ep:i+1,// Store latest episode (index + 1)
s:t+1});
// If the stream_id was found, update the saved data
if(-1!=r){var s=this.getRecentOrFavouriteCategoryPosition("recent"),d=this.categories[s].movies;if(d.length>=this.recent_movie_count)return;// Limit check
n[r].video_times=l,// Update video times
n[r].video_times.recent=a}else
// If not found, create a new entry
n.push({stream_id:e,video_times:Object.assign({},l,{recent:a})});
// Save updated video times back to the object
return this.saved_video_times=n,
// Store in local storage
localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+o+"_times",JSON.stringify(n)),l;// Return updated series time data
},removeVideoTime:function(e,t,i){for(var s=this.stream_type,a=this.saved_video_times,o={},n=!1,r=0;r<a.length;r++)if(a[r].stream_id==e){var l,o=a[r].video_times;o[t.toString()]&&(l=o[t.toString()],delete l[i.toString()],0==Object.keys(l).length&&
// then remove season_time_data
delete o[t.toString()],0==Object.keys(o).length?(a.splice(r,1),n=!0,o={},this.removeFromWatchList(e)):a[r].video_times=o,this.saved_video_times=a,localStorage.setItem(storage_id+settings.playlist.id+"_saved_"+s+"_times",JSON.stringify(a)));break}return[n,o]},addToWatchList:function(t){var e=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[e].movies,s;i.length>=this.recent_movie_count||(s=!1,i.map(function(e){e.series_id==t.series_id&&(s=!0)}),s)||(i.unshift(t),i.splice(this.recent_movie_count),this.categories[e].movies=i)},removeFromWatchList:function(e){for(var t=this.getRecentOrFavouriteCategoryPosition("recent"),i=this.categories[t].movies,s,s="object"==typeof e?e.series_id:e,a=0;a<i.length;a++)if(i[a].series_id==s){i.splice(a,1);break}this.categories[t].movies=i},removeAllWatchList:function(){this.saved_video_times=[];var e=this.getRecentOrFavouriteCategoryPosition("recent");localStorage.removeItem(storage_id+settings.playlist.id+"_saved_"+this.stream_type+"_times"),this.categories[e].movies=[]},saveHiddenCategories:function(e,t){var i=this.stream_type,s=this.getCategories(!0,!0),a=(s[e].is_hide=t,s[e].category_id),o=JSON.parse(localStorage.getItem(storage_id+settings.playlist.id+i+"_hiddens"));if(null==o&&(o=[]),t&&!o.includes(a))
// if hide category,
o.push(a);else
// if show category
if(o.includes(a))for(var n=0;n<o.length;n++)if(o[n]==a){o.splice(n,1);break}localStorage.setItem(storage_id+settings.playlist.id+i+"_hiddens",JSON.stringify(o))},getCategories:function(t,i){var e=this.categories.filter(function(e){return i?!!t||!e.is_hide:t?"favourite"!==e.category_id&&"recent"!==e.category_id:!e.is_hide&&"favourite"!==e.category_id&&"recent"!==e.category_id});return e},setMovies:function(e){this.movies=e},insertMoviesToCategories:function(){var d=this,t=this.stream_type,e=this.movies,i=this.categories,s=localStorage.getItem(storage_id+settings.playlist.id+t+"_hiddens");function a(e){return s.includes(e)}
// Define special categories
// Categorize series
for(var s=null==s?[]:JSON.parse(s),o={recent:{category_id:"recent",category_name:"Recently Viewed",parent_id:0,movies:[],is_hide:a("recent")},topRated:{category_id:"top_rated",category_name:"Top Rated",parent_id:0,movies:[],is_hide:a("top_rated")},favourite:{category_id:"favourite",category_name:"Favourites",parent_id:0,movies:[],is_hide:a("favourite")},recentlyModified:{category_id:"recently_modified",category_name:"Recently Added/Updated",parent_id:0,movies:[],is_hide:a("recently_modified")},undefined:{category_id:"undefined",category_name:"Uncategorized",parent_id:0,movies:[],is_hide:a("undefined")}},h=(
// Add undefined category to the list
i.push(o.undefined),this.movie_key),n=f(),r=(this.favourite_ids=n,y()),l=(this.saved_video_times=r,b(r)),r=[],c=[],_=[],u=[],m=[],p={},g=Math.floor(Date.now()/1e3),v=0;v<e.length;v++)k(e[v],p,l,n,u,c,_,m,g);
// Order recent series based on watch progress
// Clear the series list
// Helper functions
function f(){var e=storage_id+settings.playlist.id+t+"_favourite",e=JSON.parse(localStorage.getItem(e));return e||[]}function y(){var e=storage_id+settings.playlist.id+"_saved_"+t+"_times",e=localStorage.getItem(e);return e?JSON.parse(e):[]}function b(e){return"xc"===settings.playlist.playlist_type?e.map(function(e){return parseInt(e.stream_id,10)}):e.map(function(e){return e.stream_id})}function k(e,t,i,s,a,o,n,r,l){void 0!==e.category_id&&"null"!=e.category_id&&null!=e.category_id||(e.category_id="undefined");var c=e.category_id.toString();t[c]||(t[c]=[]),t[c].push(e),e.is_recent=!1,-1!==i.indexOf(e[h])&&a.push(e),-1!==s.indexOf(e[h])&&("before"===d.favourite_insert_position?o.unshift(e):o.push(e)),e.rating&&!isNaN(parseFloat(e.rating))&&r.push(e),
// Check if the series was modified within the last 15 days
e.last_modified&&w(e.last_modified,l)&&n.push(e)}function w(e,t){var i=1296e3;return t-parseInt(e,10)<=i}function C(e,t){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<t.length;a++)if(t[a].series_id==e[s]){i.unshift(t[a]),t.splice(a,1);break}return i}function $(e,t){for(var i=0;i<e.length;i++){var s=e[i].category_id.toString();e[i].movies=t[s]||[]}}function S(e){for(var t=0;t<e.length;t++)if("undefined"===e[t].category_id&&0==e[t].movies.length){e.splice(t,1);break}}r=C(l,u),
// Assign series to their respective categories
$(i,p),
// Assign special category series
o.recent.movies=r,o.favourite.movies=c,o.recentlyModified.movies=_,o.topRated.movies=utilities.getTopRatedMovies(m)||[],null==o.topRated.movies&&(o.topRated.movies=[]),
// Add special categories at the beginning
i.unshift(o.recentlyModified),i.unshift(o.topRated),i.unshift(o.favourite),i.unshift(o.recent),
// Remove undefined category if empty
S(i),this.categories=i,this.movies=[]},getRecentOrFavouriteCategoryPosition:function(e){return"favourite"===e?1:0},getRecentOrFavouriteCategory:function(e){var e=this.getRecentOrFavouriteCategoryPosition(e);return this.categories[e]},setRecentOrFavouriteMovies:function(e,t){var i=this.stream_type,s=this.getRecentOrFavouriteCategoryPosition(t),a=(this.categories[s].movies=e,this.movie_key),s=e.map(function(e){return e[a]});"favourite"===t&&(this.favourite_ids=s),localStorage.setItem(storage_id+settings.playlist.id+i+"_"+t,JSON.stringify(s))},addRecentOrFavouriteMovie:function(e,t){// if added, it will be true
for(var i=this.getRecentOrFavouriteCategory(t),s=i.movies,a=!1,o=this.movie_key,i=!1,n=0,r,r,s;n<s.length;n++)if(s[n][o]==e[o]){a=!0;break}return a||(r=this[t+"_insert_position"],"before"===r?s.unshift(e):s.push(e),r=this[t+"_movie_count"],s=s.splice(0,r),this.setRecentOrFavouriteMovies(s,t),i=!0),i},removeRecentOrFavouriteMovie:function(e,t){for(var i=this.getRecentOrFavouriteCategory(t).movies,s=this.movie_key,a=!1,o=0;o<i.length;o++)if(i[o][s]==e){i.splice(o,1),a=!0;break}return this.setRecentOrFavouriteMovies(i,t),a}},playlist_page={initiated:!1,keys:{focused_part:"playlist_selection",playlist_selection:0,color_buttons_selection:0},playlist_doms:[],color_btns_doms:$("#playlist-page .bottom-label-item"),back_btn_dom:null,is_loading:!1,tried_panel_indexes:[],init:function(){var s,a,o;this.tried_panel_indexes=[],this.initiated||(this.keys.playlist_selection=0,s="",a=settings.playlist_id,o=this,playlist_urls.map(function(e,t){var i=a===e.id;i&&(o.keys.playlist_selection=t),s+='<div class="playlist-item-container"        onmouseenter="playlist_page.hoverPlayListItem('+t+')"        onclick="playlist_page.changePlaylist('+t+')"    >        <div class="playlist-item-wrapper '+(i?"active-current-play":"")+'">    <div class="playlist-name">'+e.playlist_name+"</div>    </div></div>"}),this.initiated=!0,$("#playlist-items-container").html(s),this.playlist_doms=$(".playlist-item-container"),this.back_btn_dom=$("#playlist-back-icon"),$("#notification-title").text(notification.title),$("#notification-content").text(notification.content),$("#playlist-device-id").text(mac_address),$("#playlist-device-key").text(device_key),this.hoverPlayListItem(this.keys.playlist_selection)),$("#home-page").addClass("hide"),$("#playlist-page").removeClass("hide"),current_route="playlist-page"},hoverColorButton:function(e){var t=this.keys;t.color_buttons_selection=e,t.focused_part="color_btns_selection",$(this.playlist_doms).removeClass("active"),$(this.color_btns_doms).removeClass("active"),$(this.color_btns_doms[e]).addClass("active")},clickColorButton:function(e){switch(e){case 0:this.handleRefreshPlaylists();break;case 1:this.showPlayListEditPage(!0);break;case 2:this.removePlayList()}},hoverPlayListItem:function(e){var t=this.keys;t.focused_part="playlist_selection",t.playlist_selection=e,$(this.back_btn_dom).removeClass("active"),$(this.color_btns_doms).removeClass("active"),$(this.playlist_doms).removeClass("active"),$(this.playlist_doms[e]).addClass("active"),moveScrollPosition($("#playlist-items-container"),this.playlist_doms[e],"vertical",!1)},changePlaylist:function(e){playlist_expire_date=null;var t=playlist_urls[e];t.id===settings.playlist.id?this.goBack():($(home_page.menu_doms).removeClass("active"),
// $(this.playlist_doms).find(".playlist-state").removeClass("playing");
// $($(this.playlist_doms[index]).find(".playlist-state")).addClass(
//   "playing"
// );
$(this.playlist_doms).find(".playlist-item-wrapper").removeClass("active-current-play"),$($(this.playlist_doms[e]).find(".playlist-item-wrapper")).addClass("active-current-play"),settings.saveSettings("playlist_id",t.id,""),settings.saveSettings("playlist",t,"array"),current_route="login",$("#playlist-page").addClass("hide"),$("#login-container").removeClass("hide"),login_page.login())},showPlayListEditPage:function(e){var e,e;e?playlist_edit_page.init(null):(e=this.keys,e=playlist_urls[e.playlist_selection],"demo"===e.id?showToast("Sorry","You cannot edit demo playlist"):playlist_edit_page.init(e))},removePlayList:function(){0!=playlist_urls.length&&(1==playlist_urls.length?showToast("Sorry","You need to have 1 playlist at least"):0<playlist_urls.length&&(showLoader(!0),this.is_loading=!0,this.proceedRemovingWithServer()))},proceedRemovingWithServer:function(){var e=this.keys,e=playlist_urls[e.playlist_selection],e=encryptRequest({mac_address:mac_address,app_type:platform,remove_ids:[e.id]}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],a=this;$.ajax({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+i+"/update_playlist",data:{data:e},success:function(e){a.tried_panel_indexes=[],a.playlistRemoved(!0)},error:function(){a.tried_panel_indexes.push(s),a.tried_panel_indexes.length<panel_urls.length?a.proceedRemovingWithServer():a.playlistRemoved(!1)}})},playlistRemoved:function(e){var t=this.keys,i=playlist_urls[t.playlist_selection],s=i.id,i=(playlist_urls.splice(t.playlist_selection,1),settings.playlist_id===s&&(
// if removed playlist is current active playlist, remove settings playlist
settings.saveSettings("playlist_id","",""),settings.saveSettings("playlist",{},"array")),removeLocalStorageKeysForPlaylist([s]),localStorage.getItem(storage_id+"local_data")),i=i?JSON.parse(i):{};i.playlist_urls||(i.playlist_urls=[]),i.remove_ids||(i.remove_ids=[]);// remove local data playlist urls for playlist id
for(var a=localStorage.getItem(storage_id+"api_data"),o=(a&&(a=JSON.parse(a),a.urls=playlist_urls,localStorage.setItem(storage_id+"api_data",JSON.stringify(a))),i.playlist_urls),n=0,a;n<o.length;n++)if(o[n].id==s){o.splice(n,1);break}i.playlist_urls=o,e||(a=i.remove_ids,a.includes(s))||a.push(s),localStorage.setItem(storage_id+"local_data",JSON.stringify(i)),showLoader(!1),this.is_loading=!1,$(this.playlist_doms[t.playlist_selection]).remove();var e=t.playlist_selection;this.initiated=!1,this.init(),e>=this.playlist_doms.length&&(e=this.playlist_doms.length-1),this.hoverPlayListItem(e)},handleRefreshPlaylists:function(){
// var that = this;
// login_page
//   .fetchPlaylistList()
//   .then(function (playlists) {
//     console.log("Fetched playlists:", playlists);
//     that.initiated = false;
//     that.init();
//   })
//   .catch(function (error) {
//     console.error("Failed to fetch playlists:", error);
//     showToast("Error", "Failed to refresh playlists");
//   });
window.location.reload()},
// hoverBackBtn: function () {
//   var keys = this.keys;
//   keys.focused_part = "back_btn";
//   $(this.playlist_doms).removeClass("active");
//   $(this.back_btn_dom).addClass("active");
// },
handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":$(this.playlist_doms[e.playlist_selection]).trigger("click");break;case"color_btns_selection":this.clickColorButton(e.color_buttons_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"playlist_selection":t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection);break;case"color_btns_selection":t.color_buttons_selection+=e,t.color_buttons_selection>=this.color_btns_doms.length&&(t.color_buttons_selection=this.color_btns_doms.length-1),t.color_buttons_selection<0&&(t.color_buttons_selection=0),this.hoverColorButton(t.color_buttons_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"playlist_selection":!checkVerticalMovable(this.playlist_doms.length,1,t.playlist_selection,e)&&0<e?this.hoverColorButton(t.color_buttons_selection):(t.playlist_selection+=e,t.playlist_selection<0&&(t.playlist_selection=0),t.playlist_selection>=this.playlist_doms.length&&(t.playlist_selection=this.playlist_doms.length-1),this.hoverPlayListItem(t.playlist_selection));break;case"color_btns_selection":e<0&&this.hoverPlayListItem(t.playlist_selection)}},goBack:function(){var e=this.keys;switch(e.focused_part){case"playlist_selection":current_route="home-page",$("#playlist-page").addClass("hide"),$("#home-page").removeClass("hide");break;case"color_btns_selection":this.hoverPlayListItem(e.playlist_selection)}},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-4);break;case tvKey.DOWN:this.handleMenusUpDown(4);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.YELLOW:this.showPlayListEditPage(!0);break;case tvKey.GREEN:this.handleRefreshPlaylists();break;case tvKey.BLUE:
// this.showPlayListEditPage(false);
break;case tvKey.RED:this.removePlayList()}}},account_page={initiated:!1,is_loading:!1,init:function(){this.fillAccountDetails(),$("#home-page").addClass("hide"),$("#account-page").removeClass("hide"),current_route="account-page"},fillAccountDetails:function(){$("#user-account-mac-address").text(mac_address.toUpperCase()),$("#platform").text(platform.toUpperCase()||"Unknown"),2==is_trial||3==is_trial?$("#user-account-is_trial").text("Active"):$("#user-account-is_trial").text("Trial"),$("#playlist-username").text(user_name),$(".user-account-expire-date").text(expire_date),"lg"==platform?$(".app-version").text(lg_version):$(".app-version").text(samsung_version),$("#playlist-status").text(playlist_status)},handleMenuClick:function(){},handleMenuLeftRight:function(e){},handleMenusUpDown:function(e){},goBack:function(){current_route="home-page",$("#account-page").addClass("hide"),$("#home-page").removeClass("hide")},HandleKey:function(e){
// console.log("Key pressed in Account Page: " + e.keyCode);
this.is_loading?e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack()):e.keyCode===tvKey.RETURN&&this.goBack()}};function confirmParentPassword(){"home-page"===current_route&&home_page.confirmParentPassword()}function cancelParentPassword(){"home-page"===current_route&&home_page.cancelParentPassword()}var channel_page={current_channel_id:0,full_screen_video:!1,full_screen_info_timer:null,full_nav_timer:null,progressbar_timer:null,player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,categories:[],current_category_index:0,category_hover_timer:null,category_hover_timeout:300,channel_hover_timer:null,channel_hover_timeout:300,sidebarVisible:!1,keys:{focused_part:"category_selection",//search_selection
category_selection:0,channel_selection:0,color_buttons_selection:0,current_channel:0,search_back_selection:0,search_selection:-1,switch_modal_selection:0,prev_focus:"",video_control:0,live_control_selection:0},channel_theme:"",modal_visible:!1,category_doms:[],channel_doms:[],channel_nav_doms:[],live_control_doms:$(".full-screen-buttons-wrapper .full-screen-button"),switch_modal_doms:$("#switch-page-modal .switch-modal-item"),play_icon_index:1,search_items:[],filtered_movies:[],next_programme_timer:null,idleOnChannelTimer:null,programmes:[],short_epg_limit_count:30,prev_focus_dom:null,prev_focus_nav_dom:null,next_channel_timer:null,rearrange_origin_position:0,rearrange_mode:!1,rearrange_timer:null,rearrange_timeout:300,prev_keyword:"",search_timer:null,prev_route:"",current_category:null,is_no_categories:!1,init:function(e,t,i){t=t||null,this.closeChannelNav(),this.current_category=null,this.prev_route=e,this.prev_focus_dom=null,this.rearrange_mode=!1;var e=this.keys,s=($("#home-page").addClass("hide"),$("#channel-page").removeClass("hide"),current_route="channel-page",LiveModel.getCategories(!1,!0)),a=(this.categories=s,""),o=(s.map(function(e,t){a+='<div class="channel-page-category-item"                    onmouseenter="channel_page.hoverCategory(this)"                    onclick="channel_page.handleMenuClick()"                    data-index="'+t+'"                >                    <span class="channel-page-category-item-name">'+e.category_name+'</span>                    <span class="channel-page-category-item-count">'+e.movies.length+"</span>                 </div>"}),$("#channel-page-categories-container").html(a),this.category_doms=$(".channel-page-category-item"),0);if(t){for(var n=0;n<s.length;n++)if(s[n].category_id==t.category_id){o=n;break}}else for(var n=0;n<s.length;n++)if(0<s[n].movies.length){o=n;break}this.current_category_index=-1,e.category_selection=o,this.showCategoryChannels(t),t||this.showInitialChannel(s,i),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){}},0),this.resetSidebarStyle()},goBack:function(){var e=this.keys;switch(e.focused_part){case"live_controls":clearTimeout(this.full_screen_info_timer),this.hideFullScreenInfo();break;case"full_screen":this.full_screen_video=!1,this.zoomInOut(),this.setupZoomOnIdleTimer(),this.hoverChannel(this.keys.current_channel);break;case"search_selection":this.setupZoomOnIdleTimer(),this.removeSearchResult();break;case"category_selection":case"channel_selection":clearTimeout(this.idleOnChannelTimer),this.Exit();break;case"channel_nav":this.closeChannelNav(),e.focused_part="full_screen";break;case"switch-modal":this.hideSwitchPageModal();break;case"color_buttons_selection":this.hoverChannel(e.channel_selection)}},Exit:function(e){e=e||"home-page";try{media_player.close()}catch(e){}var t=this.keys,i=(t.focused_part="channel_selection",// focus will go to menu part
this.full_screen_video=!1,this.zoomInOut(),$("#channel-page").addClass("hide"),clearInterval(this.progressbar_timer),clearTimeout(this.full_screen_info_timer),clearTimeout(this.next_channel_timer),clearTimeout(this.full_nav_timer),"home-page"==e?home_page.reEnter():($("#search-page").show(),current_route="search-page",search_page.init("channel-page","live")),LiveModel.category_orders);if(0<i.length){for(var s=this.categories,a=0;a<s.length;a++)for(var o=0;o<i.length;o++)if(s[a].category_id==i[o].id){i[o].position=a;break}i=i.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(i)),LiveModel.category_orders=i}},showInitialChannel:function(e,t){if(t=t||!1,t){$("#channel-page-categories-container").hide();for(
// Find favourites category
var i=-1,s=0;s<e.length;s++)if("favourite"===e[s].category_id){i=s;break}return-1===i||(this.hoverCategory($(this.category_doms[i])),this.handleMenuClick(),this.hoverChannel(0),this.movies&&0!=this.movies.length)?void(this.is_no_categories=!0):(this.Exit(),void showToast("Sorry","You have no favorite channels."))}$("#channel-page-categories-container").show(),this.is_no_categories=!1;var t=localStorage.getItem(storage_id+"live_initialization_choice"),t=t||"default";"last"==t?this.initializeByLast(e):"favorite"==t?// Initialize on favorites
this.initializeByFavorite(e):// Initialize by start (default)
this.initializeByDefault(e)},initializeByDefault:function(e){
// Try to select the third category (index 2)
var t=2;
// If the third category doesn't exist or has not movies, find first category with movies
if(!e[t]||0==e[t].movies.length||!e[t].movies)for(var i=0;i<e.length;i++)if(0<e[i].movies.length){t=i;break}
// If we found a valid category
e[t]&&0<e[t].movies.length&&(
// Select the category
this.hoverCategory(t),this.handleMenuClick(),
// Show first channel in category
this.hoverChannel(0),this.showMovie(e[t].movies[0]),
// Set focus to channel selection
this.keys.focused_part="channel_selection")},initializeByFavorite:function(e){for(var t=null,i=-1,s=0;s<e.length;s++)if("favourite"==e[s].category_id){t=e[s],i=s;break}t&&0<t.movies.length?(
// Hover and select the favourites category
this.hoverCategory(i),this.handleMenuClick(),
// Show the first movie in favorites
this.hoverChannel(0),this.showMovie(t.movies[0])):
// If no favorites, fall back to default behavior
this.initializeByDefault(e)},initializeByLast:function(e){
// Get the most recent channel ID from localStorage
var t=localStorage.getItem(storage_id+settings.playlist.id+"live_recent");if(t){var t=JSON.parse(t);if(t&&0<t.length){for(var i=t[0],s=null,a=-1,o=-1,n=2// Most recent channel
// Search through all categories to find the channel
;n<e.length;n++){for(var r=e[n],l=0;l<r.movies.length;l++)if(r.movies[l].stream_id==i){s=r,a=n,o=l;break}if(s)break}
// If we found the last watched channel
if(s)
// Select the category
return this.hoverCategory(a),this.handleMenuClick(),
// Select and show the channel
this.hoverChannel(o),void this.showMovie(s.movies[o])}}
// If we couldn't find the last channel, fall back to default behavior
this.initializeByDefault(e)},showChannelNav:function(){$("#full-screen-navigation").css("bottom",0),clearTimeout(this.full_screen_info_timer);var e=this.keys;this.resetChannelNavTimer(),e.focused_part="channel_nav"},closeChannelNav:function(){
// var keys = this.keys;
$("#full-screen-navigation").css("bottom","-100%"),clearTimeout(this.full_nav_timer)},hoverNav:function(e){var t=this,i=this.keys,e,e="number"==typeof e?e:$(e).data("index");i.channel_selection=e,$(this.prev_focus_nav_dom).removeClass("active"),$(this.channel_nav_doms[e]).addClass("active"),this.prev_focus_nav_dom=this.channel_nav_doms[e],moveScrollPosition($("#full-screen-navigation-channels"),$(this.channel_nav_doms[e]),"horizontal",!1,!1,!1),this.resetChannelNavTimer(),this.channel_hover_timer=setTimeout(function(){t.getEpgProgrammes()},this.channel_hover_timeout)},resetChannelNavTimer:function(){this.full_nav_timer&&clearTimeout(this.full_nav_timer),"channel_nav"==this.keys.focused_part&&(this.full_nav_timer=setTimeout(function(){channel_page.goBack()},5e3))},showCategoryChannels:function(e){var t=this.keys;if(t.category_selection!==this.current_category_index){var i=this.categories,i=i[t.category_selection],s=($(this.category_doms).removeClass("current"),$(this.category_doms[t.category_selection]).addClass("current"),this.current_category=i,this.movies=i.movies,""),a="";if(this.movies.map(function(e,t){var i=LiveModel.favourite_ids.includes(e.stream_id)?"favourite":"";s+='<div class="channel-menu-item" data-channel_id="'+e.stream_id+'"                    data-index="'+t+'"                    onmouseenter="channel_page.hoverChannel(this)"                    onclick="channel_page.handleMenuClick()"                >                    <span class="channel-number">'+e.num+'</span>                    <div class="channel-icon-container"><img class="channel-icon" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></div>                    <span class="channel-name">'+e.name+'</span>                    <i class="fa fa-star favourite-icon '+i+'"></i>                </div>'}),this.movies.map(function(e,t){a+='<div class="channel-nav-item" data-channel_id="'+e.stream_id+'"                    data-index="'+t+'"                    onmouseenter="channel_page.hoverNav(this)"                    onclick="channel_page.handleMenuClick()"                >                    <div class="channel-icon-container-nav"><img class="channel-icon-nav" src="'+e.stream_icon+'" onerror="this.src=\''+default_movie_icon+'\'"></div>                    <span class="channel-name-nav">'+e.name+"</span>        </div>"}),$("#channel-page-menu-container").html(s),$("#full-screen-navigation-channels").html(a),this.prev_keyword="",$("#search-value").val(""),t.channel_selection=0,this.current_category_index=t.category_selection,0<this.movies.length){if(this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),this.channel_nav_doms=$("#full-screen-navigation .channel-nav-item"),moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[0],"vertical",!0),this.hoverChannel(0),e){
// Loop over channels to hover the channel user searched for
for(var o=0;o<this.movies.length;o++)if(this.movies[o].stream_id==e.stream_id){t.channel_selection=o,this.showMovie(this.movies[o]),this.hoverChannel(o);break}}else this.showMovie(this.movies[0]);t.focused_part="channel_selection"}}},goChannelNum:function(e){var t,s;this.full_screen_video&&(t=this.channel_num,0!=t||0==t&&0!=e)&&(t=10*t+e,this.channel_num=t,clearTimeout(this.channel_number_timer),s=this,$("#typed-channel-number").text(t),this.channel_number_timer=setTimeout(function(){for(
// go to channel number
var e=s.movies,t=!1,i=0;i<e.length;i++)if(e[i].num===s.channel_num){t=!0,current_movie=e[i],s.showMovie(current_movie),s.current_channel_id=current_movie.stream_id,s.hoverChannel(i),s.keys.focused_part="full_screen",s.showFullScreenInfo();break}t||showToast("Sorry","Channel does not exist"),s.channel_num=0,$("#typed-channel-number").text("")},2e3))},goToPlaylistPage:function(){clearTimeout(this.idleOnChannelTimer),this.Exit(),home_page.hoverControlsMenu(1),home_page.handleMenuClick()},addOrRemoveFav:function(){var e=this.keys;if("channel_selection"===e.focused_part){var t=this.movies[e.channel_selection],i="add";if(LiveModel.favourite_ids.includes(t.stream_id)&&(i="remove"),"add"===i){if(checkForAdult(t,"movie",LiveModel.categories))return void showToast("Parental safety","Adding protected content to favourites is not allowed.");LiveModel.addRecentOrFavouriteMovie(t,"favourite"),// add to favourite movie
$(this.channel_doms[e.channel_selection]).find(".favourite-icon").addClass("favourite")}else{var i=this.categories[this.current_category_index],t;LiveModel.removeRecentOrFavouriteMovie(t.stream_id,"favourite"),$(this.channel_doms[e.channel_selection]).find(".favourite-icon").removeClass("favourite"),"favourite"===i.category_id&&($(this.channel_doms[e.channel_selection]).remove(),t=$("#channel-page-menu-container .channel-menu-item"),this.channel_doms=t,0==t.length?this.hoverCategory(e.category_selection):(e.channel_selection>=t.length&&(e.channel_selection=t.length-1),this.hoverChannel(e.channel_selection)))}this.updateFavouriteChannelCount()}},updateFavouriteChannelCount:function(){for(var e=this.categories,t=0;t<e.length;t++)if("favourite"==e[t].category_id){$(this.category_doms[t]).find(".channel-page-category-item-count").text(e[t].movies.length);break}},showNextProgrammes:function(){for(var e="next-program-container",t=this.movies[this.keys.channel_selection],t=($("#channel-title").text(t.name),LiveModel.getNextProgrammes(this.programmes)),i=t.current_program_exist,s=t.programmes,a=0,o="",n=0;n<s.length&&(o+='<div class="next-program-item '+(0==a&&i?"current":"")+'"><span class="program-time">'+s[n].start.substring(11)+" ~ "+s[n].stop.substring(11)+"</span>"+s[n].title+"</div>",a++,!(4<=a));n++);0<a?$("#"+e).html(o).show():$("#"+e).hide().html("");var r,l,t="No Info",e="",c="No Info",d="";i?(r=s[0],1<s.length&&(l=s[1])):0<s.length&&(l=s[0]),r&&(t=r.title,e=r.start.substring(11)+" ~ "+r.stop.substring(11)),l&&(c=l.title,d=l.start.substring(11)+" ~ "+l.stop.substring(11)),$(".full-screen-program-name.current").text(t),$(".full-screen-program-time.current").text(e),$(".full-screen-program-name.next").text(c),$(".full-screen-program-time.next").text(d)},updateNextProgrammes:function(){this.showNextProgrammes(),clearInterval(this.next_programme_timer);var e=this;this.next_programme_timer=setInterval(function(){e.showNextProgrammes()},6e4)},getEpgProgrammes:function(){var e=this.keys,t=this,i=[],s=(this.programmes=[],t.showNextProgrammes(),this.movies[this.keys.channel_selection]),a,o,n;"xc"===settings.playlist.playlist_type&&(a="Y-MM-DD HH:mm",o=settings.playlist,n=o.url.endsWith("/")?o.url.slice(0,-1):o.url,$.ajax({method:"get",url:n+"/player_api.php?username="+o.username+"&password="+o.password+"&action=get_short_epg&stream_id="+s.stream_id+"&limit="+this.short_epg_limit_count,success:function(e){e.epg_listings&&(e.epg_listings.map(function(e){i.push({start:getLocalChannelTime(e.start).format(a),stop:getLocalChannelTime(e.end).format(a),title:getAtob(e.title),description:getAtob(e.description)})}),t.programmes=i,t.updateNextProgrammes()),t.fillNavEpgProgrammes(t.programmes)},error:function(e){t.programmes=i,t.updateNextProgrammes(),t.fillNavEpgProgrammes(t.programmes)}}))},showFullScreenInfo:function(){this.keys.focused_part="live_controls",this.hoverLiveControlButton(this.keys.live_control_selection),this.full_screen_video&&$("#full-screen-information").slideDown(),this.resetFullScreenInfoTimer()},resetFullScreenInfoTimer:function(){var e;this.full_screen_video&&(clearTimeout(this.full_screen_info_timer),e=this,this.full_screen_info_timer=setTimeout(function(){e.hideFullScreenInfo()},7500))},hideFullScreenInfo:function(){this.keys.focused_part="full_screen",$("#full-screen-information").slideUp()},zoomInOut:function(){var e=this.keys,t=this;this.full_screen_video?($("#channel-page .player-container").addClass("expanded"),clearTimeout(this.idleOnChannelTimer),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){}e.focused_part="full_screen",t.showFullScreenInfo()},0)):($("#channel-page .player-container").removeClass("expanded"),clearTimeout(this.full_screen_info_timer),setTimeout(function(){try{media_player.setDisplayArea()}catch(e){}t.keys.focused_part="channel_selection",$("#full-screen-information").slideUp()},0))},showMovie:function(e){var t=this.keys;if(e.stream_id!=this.current_channel_id||"channel_nav"!=t.focused_part){var i,s=e.stream_id;t.current_channel=t.channel_selection,$(this.channel_doms).removeClass("current"),$(this.channel_nav_doms).removeClass("current"),$(this.channel_doms[t.channel_selection]).addClass("current"),$(this.channel_nav_doms[t.channel_selection]).addClass("current"),this.hoverNav(t.channel_selection),"xc"===settings.playlist.playlist_type?i=getMovieUrl(s,"live","ts"):"general"===settings.playlist.playlist_type&&(i=e.url);try{media_player.close()}catch(e){}try{media_player.init("channel-page-video","channel-page")}catch(e){}try{media_player.playAsync(i)}catch(e){}if(this.current_channel_id=s,$(".full-screen-channel-name").text(e.name),$(".full-screen-channel-logo").attr("src",e.stream_icon),!checkForAdult(e,"movie",LiveModel.categories)){LiveModel.addRecentOrFavouriteMovie(e,"recent");for(var a=this.categories,o=0;o<a.length;o++)if("recent"==a[o].category_id){$(this.category_doms[o]).find(".channel-page-category-item-count").text(a[o].movies.length);break}}// add to recent live channels
}},showNextChannel:function(e){var t=this.keys,i=t.focused_part,s=(t.channel_selection+=e,t.channel_selection<0&&(t.channel_selection=0),t.channel_selection>=this.channel_doms.length&&(t.channel_selection=this.channel_doms.length-1),this);setTimeout(function(){var e=s.movies[t.channel_selection];s.current_channel_id=e.stream_id,s.showMovie(s.movies[t.channel_selection])},400),this.hoverChannel(t.channel_selection),"full_screen"===i&&(t.focused_part="full_screen"),this.showFullScreenInfo()},
// playOrPause: function () {
//   if (media_player.state == media_player.STATES.PLAYING) {
//     try {
//       media_player.pause();
//       this.video_control_doms[1], false;
//     } catch (e) {}
//   } else {
//     try {
//       media_player.play();
//       // changePlayerStateIcon(this.video_control_doms[1],true)
//     } catch (e) {}
//   }
// },
showSearchModal:function(){clearTimeout(this.idleOnChannelTimer);var e=this.keys;this.full_screen_video||"search_selection"===e.focused_part||(e.prev_focus=e.focused_part,$(".search-modal-container").show(),$("#search-value").val(""),$(".search-content-container").html(""),this.keys.focused_part="search_selection",this.keys.search_selection=-1,$("#search-value").focus(),this.searchValueChange()),this.toggleRearrangeMode(!1)},searchValueChange:function(){clearTimeout(this.search_timer),this.search_timer=null;var t=this;this.search_timer=setTimeout(function(){var e=$("#search-value").val(),e=e.toLowerCase();e!==t.prev_keyword&&t.renderSearchResults()},400)},renderSearchResults:function(){var t=$("#search-value").val(),e=LiveModel.getCategories(!1,!1),i=[];if(2<=t.length)for(var s=0;s<e.length;s++)var a=e[s].movies.filter(function(e){return e.name.toLowerCase().includes(t)}),i=i.concat(a);i.sort(function(e,t){return e.name.localeCompare(t.name)});var o="";i.map(function(e,t){o+='<div class="search-item-wrapper"                    onmouseenter="channel_page.hoverSearchItem('+t+')"                     onclick="channel_page.searchItemClick()"                >'+e.name+"</div>"}),0<i.length?$(".search-content-container").html(o):$(".search-content-container").html("<p class='search-no-results'>No results found!</p>"),this.search_items=$(".search-item-wrapper"),this.filtered_movies=i},handleSearchItem:function(e){var t=this.keys;0!=$(".search-item-wrapper").length&&(t.search_selection+=e,$(".search-item-wrapper").removeClass("active"),t.search_selection<0?($("#search-value").focus(),setTimeout(function(){var e=$("#search-value").val();$("#search-value")[0].setSelectionRange(e.length,e.length)},200)):($("#search-value").blur(),t.search_selection>=$(".search-item-wrapper").length&&(t.search_selection=$(".search-item-wrapper").length-1),$($(".search-item-wrapper")[t.search_selection]).addClass("active"),moveScrollPosition($(".search-content-container")[0],$(".search-item-wrapper")[t.search_selection],"vertical",!1)))},removeSearchResult:function(){$(".search-modal-container").hide(),$(".search-content-container").html(""),this.keys.focused_part=this.keys.prev_focus,this.search_selection=-1},searchItemClick:function(){for(var e=this.keys,t=(this.removeSearchResult(),this.filtered_movies),i=t[e.search_selection],s=LiveModel.getCategories(!1,!0),a=0,o=0;o<s.length;o++)if(s[o].category_id==i.category_id){a=o;break}showLoader(!0),this.is_loading=!0;var n=this.categories[a].movies,r=(a!==this.current_category_index&&(e.category_selection=a,this.showCategoryChannels()),this);setTimeout(function(){for(var e=0;e<n.length;e++)if(n[e].stream_id==i.stream_id&&n[e].name===i.name){r.hoverChannel(e),r.showMovie(n[e]);break}showLoader(!1),r.is_loading=!1},200)},toggleRearrangeMode:function(e){if(this.rearrange_mode)this.rearrange_mode=!1,$(this.prev_focus_dom).removeClass("rearrange"),"channel_selection"==this.focused_part&&this.showMovie(this.movies[t.channel_selection]);else if(e){$(".channel-menu-item.current").removeClass("current");var t=this.keys;if("category_selection"===t.focused_part||"channel_selection"===t.focused_part){this.rearrange_mode=!0;var i=0;if("channel_selection"===t.focused_part)i=t.channel_selection;else for(var s=this.categories[t.category_selection],a=0;a<LiveModel.categories.length;a++)if(LiveModel.categories[a].category_id==s.category_id){i=a;break}this.rearrange_origin_position=i,$(this.prev_focus_dom).addClass("rearrange")}}},changeChannelDomContent:function(e,t,i){
// Update the text of the element displaying the channel number
$(e).find(".channel-number").text(t.num),
// Set the source of the channel icon image to the channel's stream icon URL
$(e).find(".channel-icon").attr("src",t.stream_icon),
// Update the element's data attribute to store the current channel's index
$(e).data("index",i),
// Update the text of the element displaying the channel's name
$(e).find(".channel-name").text(t.name),
// Update the element's data attribute to store the channel's stream ID
$(e).data("channel_id",t.stream_id),
// Check if the channel is a favorite by comparing its stream ID with the favourite_ids array LiveModel
LiveModel.favourite_ids.includes(t.stream_id)?
// If it's a favorite, add the "favourite" class to the favourite icon element
$(e).find(".favourite-icon").addClass("favourite"):
// If it's not a favorite, remove the "favourite" class from the favourite icon element
$(e).find(".favourite-icon").removeClass("favourite")},changeCategoryDomContent:function(e,t,i){$(e).find(".channel-page-category-item-name").text(t.category_name),$(e).data("index",i),$(e).find(".channel-page-category-item-count").text(t.movies.length)},hoverColorButton:function(e){this.setupZoomOnIdleTimer();var t=this.keys,i=(t.color_buttons_selection=e,$("#channel-page .bottom-label-item"));t.focused_part="color_buttons_selection",$(this.prev_focus_dom).removeClass("active"),$(i).removeClass("active"),$(i[e]).addClass("active"),this.prev_focus_dom=$(i[e])},clickColorButton:function(e){var t=this.keys;switch(e){case 0:
// Click move (RED)
this.hoverChannel(t.channel_selection),this.toggleRearrangeMode(!0);break;case 1:
// Click search (BLUE)
clearTimeout(this.idleOnChannelTimer),this.Exit("search-page");break;case 2:
// Click fav (YELLOW)
this.hoverChannel(t.channel_selection),this.addOrRemoveFav();break;case 3:
// Click switch page (GREEN)
"full_screen"!=t.focused_part&&this.showSwitchPageModal()}},hoverCategory:function(e){$("#channel-page .bottom-label-item").removeClass("active"),this.showCategoriesMenu(),this.setupZoomOnIdleTimer();var t=this.keys;// Access the keys object which stores the UI state
// Set the focused part to "category_selection" to indicate the user is navigating categories
t.focused_part="category_selection",
// If `index` is a number, set the `category_selection` to that index
// If not, assume `index` is a DOM element and extract the index from its data attribute
t.category_selection="number"==typeof e?e:$(e).data("index"),
// Remove the "active" class from the previously focused category
$(this.prev_focus_dom).removeClass("active"),
// Add the "active" class to the newly selected (hovered) category
$(this.category_doms[t.category_selection]).addClass("active"),
// If the interface is in rearrange mode, handle additional class changes
this.rearrange_mode&&(
// Remove the "rearrange" class from the previously focused category
$(this.prev_focus_dom).removeClass("rearrange"),
// Add the "rearrange" class to the newly selected (hovered) category
$(this.category_doms[t.category_selection]).addClass("rearrange")),
// Update the reference to the currently focused DOM element
this.prev_focus_dom=this.category_doms[t.category_selection],
// Adjust the scroll position to ensure the selected category is in view
moveScrollPosition($("#channel-page-categories-container"),// The container of categories
this.category_doms[t.category_selection],// The selected category DOM element
"vertical",// Ensure vertical scrolling
!1,// No animation, just move instantly
!0)},zoomInWhenIdle:function(){var e=this.movies[keys.channel_selection].stream_id;this.current_channel_id==e?(this.full_screen_video=!0,this.zoomInOut()):this.showMovie(this.movies[keys.channel_selection]),this.toggleRearrangeMode(!1)},hoverChannel:function(e){$("#channel-page .bottom-label-item").removeClass("active"),this.hideCategoriesMenu();var t=this.keys,e,i=(t.focused_part="channel_selection",e="number"==typeof e?e:$(e).data("index"),t.channel_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.channel_doms[e]).addClass("active"),this.rearrange_mode&&($(this.prev_focus_dom).removeClass("rearrange"),$(this.channel_doms[e]).addClass("rearrange")),this.prev_focus_dom=this.channel_doms[e],clearTimeout(this.channel_hover_timer),this);moveScrollPosition($("#channel-page-menu-container"),this.channel_doms[e],"vertical",!1,!1,!1,!0),this.channel_hover_timer=setTimeout(function(){i.getEpgProgrammes()},this.channel_hover_timeout),this.setupZoomOnIdleTimer()},fillNavEpgProgrammes:function(){
// Hide all navigation elements and separators initially
for(var e=["full-screen-navigation-now","full-screen-navigation-next","full-screen-navigation-later"],t=0;t<e.length;t++)$("."+e[t]).hide(),t<e.length-1&&$("."+e[t]+" + .horizontal-separator").hide();if(this.programmes.length)
// Update programmes in sequence
for(var i=0;i<Math.min(this.programmes.length,3);i++){var s=e[i];o(this.programmes[i],s),i<2&&this.programmes[i+1]&&$("."+s+" + .horizontal-separator").show()}
// Helper function to format time range
function a(e){var t=e.start.split(" ")[1],e=e.stop.split(" ")[1];return t+" - "+e}
// Helper function to update programme display
function o(e,t){var t=$("."+t);t.show(),t.find(".full-screen-navigation-epg-name").text(e.title),t.find(".full-screen-navigation-epg-time").text(a(e))}},hoverSearchItem:function(e){var t;key_focused||(t=this.keys,t.search_selection=e,$(this.search_items).removeClass("active"),$(this.search_items[e]).addClass("active"),moveScrollPosition($(".search-content-container")[0],this.search_items[e],"vertical",!1))},setupZoomOnIdleTimer:function(){clearTimeout(this.idleOnChannelTimer),this.idleOnChannelTimer=setTimeout(function(){this.current_channel_id&&(this.full_screen_video=!0,this.zoomInOut())}.bind(this),15e3)},// Bind 'this' to the function
handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"category_selection":var t=this.categories[e.category_selection],t=checkForAdult(t,"category",[],!0);t?parent_confirm_page.init(current_route):(this.showCategoryChannels(),this.toggleRearrangeMode(!1));break;case"full_screen":this.full_screen_video=!1,this.zoomInOut(),this.setupZoomOnIdleTimer();break;case"channel_selection":
// Second click (Fullscreen)
var t=this.movies[e.channel_selection].stream_id;this.current_channel_id==t?(this.full_screen_video=!0,this.zoomInOut()):(
// First click (Preview)
this.showMovie(this.movies[e.channel_selection]),this.setupZoomOnIdleTimer()),this.toggleRearrangeMode(!1);break;case"search_selection":var t=$(".search-item-wrapper")[e.search_selection];$(t).trigger("click");break;case"channel_nav":this.showMovie(this.movies[e.channel_selection]);break;case"live_controls":this.full_screen_video=!1,this.zoomInOut(),this.setupZoomOnIdleTimer();break;case"switch-modal":this.clickSwitchModalItem(this.keys.switch_modal_selection);break;case"color_buttons_selection":this.clickColorButton(this.keys.color_buttons_selection)}},showSubtitleAudioModal:function(e){this.hideFullScreenInfo();var t=this.keys;try{var i=media_player.getSubtitleOrAudioTrack(e);0<i.length||showToast("Sorry","No Audios exist")}catch(e){}
// try {
//   var subtitles;
//   subtitles = media_player.getSubtitleOrAudioTrack(kind);
//   if (subtitles.length > 0) this.renderSubtitles(kind, subtitles);
//   else {
//     if (kind === "TEXT") showToast("Sorry", "No Subtitles exists");
//     else showToast("Sorry", "No Audios exists");
//   }
// } catch (e) {
//   console.log(e);
//   $("#vod-series-player-operation-modal").modal("hide");
//   showToast("Sorry", "Video not loaded yet");
// }
},
// sidebarVisibleToggle: function (order) {
//   if (!this.channel_theme) return;
//   if (this.sidebarVisible && order == false) {
//     $("#channel-page-categories-container").css(
//       "transform",
//       "translateX(-100%)"
//     );
//     $("#channel-page-title").css("background-color", "transparent");
//     this.sidebarVisible = false;
//   } else if (!this.sidebarVisible && order == true) {
//     $("#channel-page-categories-container").css(
//       "transform",
//       "translateX(0%)"
//     );
//     $("#channel-page-title").css("background-color", "#000000");
//     this.sidebarVisible = true;
//   }
// },
hideCategoriesMenu:function(){this.channel_theme&&($("#channel-page-categories-container").css("-webkit-transform","translateX(-100%)"),$("#channel-page-categories-container").css("transform","translateX(-100%)"),$("#channel-page-title").css("background-color","transparent"))},showCategoriesMenu:function(){this.channel_theme&&($("#channel-page-categories-container").css("transform","translateX(0%)"),$("#channel-page-title").css("background-color","rgba(0, 0, 0, 0.831)"))},resetSidebarStyle:function(){"normal"==this.channel_theme||"modern"==this.channel_theme?($("#channel-page-categories-container").css("transform","translateX(-100%)"),$("#channel-page-title").css("background-color","transparent")):($("#channel-page-title").css("background-color","transparent"),$("#channel-page-categories-container").css("transform","translateX(0%)"),this.is_no_categories?$("#channel-page-right-part,#channel-page-left-part").addClass("normal"):$("#channel-page-right-part,#channel-page-left-part").removeClass("normal"))},hoverLiveControlButton:function(e){this.keys.live_control_selection=e,this.resetFullScreenInfoTimer(),$(this.live_control_doms).removeClass("active"),$(this.live_control_doms[e]).addClass("active")},showSwitchPageModal:function(){clearTimeout(this.idleOnChannelTimer);var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="switch-modal",$("#switch-page-modal").css("display","flex"),$(this.switch_modal_doms[e.switch_modal_selection]).addClass("active")},hideSwitchPageModal:function(){this.setupZoomOnIdleTimer(),$("#switch-page-modal").css("display","none"),this.keys.focused_part=this.keys.prev_focus},hoverSwitchPageModalItem:function(e){this.keys.switch_modal_selection!=e&&(this.keys.switch_modal_selection=e),$(this.switch_modal_doms).removeClass("active"),$(this.switch_modal_doms[e]).addClass("active")},clickSwitchModalItem:function(e){switch(e=e||this.keys.switch_modal_selection,this.hideSwitchPageModal(),this.Exit("home-page"),e){case 0:home_page.hoverMainMenu(2),home_page.handleMenuClick();break;case 1:home_page.hoverMainMenu(3),home_page.handleMenuClick();break;case 2:home_page.hoverMainMenu(4),home_page.handleMenuClick();break;case 3:home_page.hoverControlsMenu(2),home_page.handleMenuClick();break;case 4:home_page.hoverControlsMenu(1),home_page.handleMenuClick()}},handleMenusUpDown:function(e){
// Store references to key states and DOM elements for channels
var s=this.keys,t=this.channel_doms;
// Handle different parts of the UI depending on which section is currently focused
switch(s.focused_part){
// Case when the user is focused on category selection
case"category_selection":var i=s.category_selection;// Store previous category selection
// Increment or decrement category selection
// Loop back to bottom when the user reaches the top (first category)
if(s.category_selection+=e,s.category_selection<0)
// keys.category_selection = 0; // Set to first category
s.category_selection=this.category_doms.length;else
// Prevent category selection from exceeding the available number of categories
if(s.category_selection>=this.category_doms.length)
// keys.category_selection = this.category_doms.length - 1; // Set to last category
s.category_selection=-1;else{
// Handle category rearrangement if rearrange mode is active
if(this.rearrange_mode){if(i==s.category_selection)return;// No rearrangement if no change in selection
// Swap the previous and next categories
// Find the target position for the rearranged category in the category list
for(var a=this.categories[i],o=this.categories[s.category_selection],n=(
// Update the DOM with the rearranged categories
this.changeCategoryDomContent(this.category_doms[i],o,i),this.changeCategoryDomContent(this.category_doms[s.category_selection],a,s.category_selection),
// Refresh the category DOM elements
this.category_doms=$(".channel-page-category-item"),
// Clear the existing rearrangement timer if it's still active
clearTimeout(this.rearrange_timer),this.rearrange_timer=null,this),r=0,l=0;l<LiveModel.categories.length;l++)if(o.category_id==LiveModel.categories[l].category_id){r=l;break}
// Rearrange the category array based on the new position
LiveModel.categories=makeRearrangeArray(LiveModel.categories,n.rearrange_origin_position,r),this.rearrange_origin_position=r,// Update rearrange origin
this.categories=LiveModel.getCategories(!1,!0),// Refresh the categories
// Set a timeout to save the rearranged categories
this.rearrange_timer=setTimeout(function(){
// Remove the previous category from its old position
for(var e=LiveModel.category_orders,t=0;t<e.length;t++)if(e[t].id==a.category_id){e.splice(t,1);// Remove from array
break}
// Add the previous category to its new position
e.push({id:a.category_id,position:r}),
// Sort the categories based on their new positions
e=e.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),
// Save the new category order to localStorage
localStorage.setItem(storage_id+settings.playlist.id+"_category_orders",JSON.stringify(e)),
// Update the LiveModel with the new category orders
LiveModel.category_orders=e,LiveModel.updateRecentAndFavouritePosition()},this.rearrange_timeout)}
// Trigger hover effect on the newly selected category
this.hoverCategory(s.category_selection)}break;
// Case when the user is focused on channel selection
case"channel_selection":var i=s.channel_selection,n,c,n;// Store previous channel selection
// Increment or decrement channel selection based on input
// Prevent channel selection from going beyond the number of channels
if(s.channel_selection+=e,s.channel_selection>=t.length)s.channel_selection=t.length-1;else
// Prevent channel selection from going below 0 (first channel)
if(s.channel_selection<0)s.channel_selection=0;else{
// If rearrange mode is active, handle the rearrangement of channels
if(this.rearrange_mode){
// If no change in selection, return (no need to rearrange)
if(s.channel_selection===i)return;
// Create an updated movie list with the rearranged channels
n=makeRearrangeArray(this.movies,// Current movie list
i,// Previous channel position
s.channel_selection),
// Update the movie list with the rearranged order
this.movies=n;var d=this.current_category;// Get the current category
d.movies=n,// Assign rearranged movies to the category
// Get the previous and next channel after rearrangement
n=this.movies[i],c=this.movies[s.channel_selection],
// Update DOM content for the previous channel
this.changeChannelDomContent(this.channel_doms[i],n,i),
// Update DOM content for the newly selected channel
this.changeChannelDomContent(this.channel_doms[s.channel_selection],c,s.channel_selection),
// Refresh channel DOM elements
this.channel_doms=$("#channel-page-menu-container .channel-menu-item"),
// Clear previous rearrangement timer if it's still active
clearTimeout(this.rearrange_timer),
// Set a new timer for saving rearrangement
this.rearrange_timer=setTimeout(function(){var e=LiveModel.channel_orders,t=[];
// Get the current category's channel order
e[d.category_id]&&(t=e[d.category_id]);
// Remove the next channel from its old position in the order
for(var i=0;i<t.length;i++)if(t[i].id==c.stream_id&&t[i].name==c.name){t.splice(i,1);// Remove from array
break}
// Add the next channel to its new position
t.push({id:c.stream_id,name:c.name,position:s.channel_selection}),
// Sort channels based on their new positions
t=t.sort(function(e,t){return e.position>t.position?1:e.position<t.position?-1:0}),
// Update the channel order for the current category
e[d.category_id]=t,
// Save the updated channel orders to the LiveModel
LiveModel.channel_orders=e,
// Persist the new channel order to localStorage
localStorage.setItem(storage_id+settings.playlist.id+"_channel_orders",JSON.stringify(e))},this.rearrange_timeout)}
// Trigger hover effect on the newly selected channel
this.hoverChannel(s.channel_selection)}break;case"full_screen":case"live_controls":
// this.showNextChannel(-1 * increment);
// this.showFullScreenInfo();
0<e?this.showNextChannel(1):this.showNextChannel(-1);break;case"search_selection":this.handleSearchItem(e);break;case"theme_channel_modal":break;case"switch-modal":s.switch_modal_selection+=e,s.switch_modal_selection<0&&(s.switch_modal_selection=0),s.switch_modal_selection>=this.switch_modal_doms.length&&(s.switch_modal_selection=this.switch_modal_doms.length-1),this.hoverSwitchPageModalItem(s.switch_modal_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"category_selection":0<e&&0<this.movies.length?(t.focused_part="channel_selection",$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverChannel(t.channel_selection)):this.hoverCategory(0);break;case"channel_selection":if(e<0){if(this.is_no_categories)break;$(this.prev_focus_dom).removeClass("rearrange"),this.toggleRearrangeMode(!1),this.hoverCategory(t.category_selection)}0<e&&this.hoverColorButton(0);break;case"full_screen":case"live_controls":
// keys.live_control_selection += increment;
// if (keys.live_control_selection > 3) keys.live_control_selection = 3;
// if (keys.live_control_selection < 0) keys.live_control_selection = 0;
// this.hoverLiveControlButton(keys.live_control_selection);
$("#full-screen-information").slideUp(),
// keys.focused_part = "channel_nav";
this.showChannelNav();break;case"channel_nav":0<e?t.channel_selection==this.movies.length-1?this.hoverNav(0):this.hoverNav(t.channel_selection+1):e<0&&(0==t.channel_selection?this.hoverNav(this.movies.length-1):this.hoverNav(t.channel_selection-1));break;case"color_buttons_selection":t.color_buttons_selection+=e,3<t.color_buttons_selection&&(t.color_buttons_selection=3),t.color_buttons_selection<0?(t.color_buttons_selection=0,this.hoverChannel(t.channel_selection)):this.hoverColorButton(t.color_buttons_selection)}},HandleKey:function(e){var t=this.keys;switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.CH_UP:"full_screen"!==t.focused_part&&"live_controls"!==t.focused_part||this.showNextChannel(1);break;case tvKey.CH_DOWN:"full_screen"!==t.focused_part&&"live_controls"!==t.focused_part||this.showNextChannel(-1);break;case tvKey.RETURN:this.goBack();break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:case tvKey.PLAY:case tvKey.PLAYPAUSE:this.playOrPause();break;case tvKey.BLUE:clearTimeout(this.idleOnChannelTimer),this.Exit("search-page");
// search_page.init("channel-page", "live");
break;case tvKey.RED:return void this.toggleRearrangeMode(!0);case tvKey.GREEN:return void("full_screen"!=t.focused_part&&this.showSwitchPageModal());case tvKey.YELLOW:this.addOrRemoveFav()}}};function convertProgrammeTimeToClientTime(e){var e=moment(e,"YYYYMMDDHHmmss Z");return e.utc().add(client_offset,"minute"),e.format("Y-MM-DD HH:mm")}function getTodayDate(e){var t=new Date,t=moment(t);return t.format(e)}function calculateTimeDifference(e,t){var e=new Date(e);time_difference_with_server=parseInt((1e3*t-e.getTime())/6e4)}function getLocalChannelTime(e){var e=moment(e);return e.add(time_difference_with_server,"minute")}var vod_summary_page={keys:{focused_part:"action_selection",// cast_selection || action_selection
index:0,cast_selection:0},min_btn_index:0,favourite_action:0,//if 0, no action, 1 added to favourite, -1 removed from favourite
action_btns:$(".vod-action-btn"),is_favourite:!1,is_protected:!1,is_loading:!1,is_trailer_exist:!0,prev_route:"",init:function(e){this.prev_route=e,this.favourite_action=0;var t=this,e=(showLoader(!0),this.is_loading=!0,$("#vod-summary-release-cast").siblings(".circle").hide(),$("#vod-summary-release-date").siblings(".circle").hide(),$("#vod-summary-release-director").siblings(".circle").hide(),$("#vod-summary-release-length").siblings(".circle").hide(),$("#vod-summary-release-genre").siblings(".circle").hide(),$("#vod-watch-trailer-button").hide(),$("#vod-watch-trailer-button-container").hide(),$("#vod-summary-release-date").text(""),$("#vod-summary-release-genre").text(""),$("#vod-summary-release-length").text(""),$("#vod-summary-release-age").text(""),$("#vod-summary-release-director").text(""),$("#vod-summary-release-cast").text(""),$("#vod-summary-description").text(""),this.hoverButton(0),$("#vod-summary-image-wrapper img").attr("src",""),$("#vod-summary-name").text(current_movie.name),$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#vod-summary-image-wrapper img").attr("src",current_movie.stream_icon||HOST+"app_src_min/images/default_movie.png"),this.is_favourite=!VodModel.favourite_ids.includes(current_movie.stream_id),this.toggleFavourite(),VodModel.favourite_ids.includes(current_movie.stream_id)?($($(".vod-action-btn")[2]).data("action","remove"),
// $($(".vod-action-btn")[2]).text(
//   typeof current_words["remove_favorites"] != "undefined"
//     ? current_words["remove_favorites"]
//     : "Remove Fav"
// );
$($(".vod-action-btn")[2]).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')):($($(".vod-action-btn")[2]).data("action","add"),
// $($(".vod-action-btn")[2]).text(
//   typeof current_words["add_to_favorite"] != "undefined"
//     ? current_words["add_to_favorite"]
//     : "Add Fav"
// );
$($(".vod-action-btn")[2]).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')),0),i,s,e=void 0===current_movie.rating||""===current_movie.rating?0:parseFloat(current_movie.rating),e=(isNaN(e)&&(e=0),$("#vod-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#vod-rating-mark").text(e.toFixed(1)),current_movie.youtube_trailer="",current_route="vod-summary-page",$("#vod-series-page").addClass("hide"),$("#vod-series-player-page").addClass("hide"),$("#player-movies-modal").modal("hide"),$("#search-page").hide(),$("#vod-summary-page").removeClass("hide"),this.min_btn_index=0,current_movie.info={},current_movie.summary_downloaded=!1,"xc"===settings.playlist.playlist_type?
// Get the data from the server
$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+current_movie.stream_id,function(e){s=e,i=e.info,t.fillVodSummaryData(s,i);var e=i.tmdb_id||i.tmdb;i.backdrop_path&&0<i.backdrop_path.length?t.fetchMovieImages(e,i.backdrop_path[0]):t.fetchMovieImages(e,HOST+"app_src_min/images/default_movie_bg.png"),t.fetchCast(e),showLoader(!1),t.is_loading=!1},function(e){showLoader(!1),t.is_loading=!1}):(showLoader(!1),this.is_loading=!1),vod_series_page.categories[vod_series_page.keys.category_selection]);this.is_protected=VodModel.isProtected(e)},goBack:function(){var e,t,i,t,e,i;$("#vod-summary-page").addClass("hide"),current_route=this.prev_route,"vod-series-page"===this.prev_route?($("#vod-series-page").removeClass("hide"),e=vod_series_page.keys,t=vod_series_page.menu_doms,this.is_favourite?0==$(t[e.menu_selection]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$($(t[e.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),i=vod_series_page.categories[e.category_selection],t=vod_series_page.menu_doms,"favourite"===i.category_id?(this.is_favourite||(vod_series_page.menu_selection=0,vod_series_page.keys.focused_part="category_selection",vod_series_page.hiddenAndShowSidebar(),vod_series_page.hoverCategory(vod_series_page.category_doms[vod_series_page.keys.category_selection]),vod_series_page.showCategoryContent(!0),$(t[e.menu_selection]).remove()),e.focused_part="category_selection",$(vod_series_page.category_doms[e.category_selection]).addClass("active")):$($(t[e.menu_selection]).find(".favourite-badge")).remove()),vod_series_page.updateFavouriteOrRecentCount("favourite")):"search-page"===this.prev_route&&($("#search-page").show(),current_route="search-page",t=search_page.movie_doms[1],e=search_page.keys,i=e.hor_keys[1],this.is_favourite?0==$(t[i]).find(".favourite-badge").length&&(VodModel.addRecentOrFavouriteMovie(current_movie,"favourite"),$(t[i]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(VodModel.removeRecentOrFavouriteMovie(current_movie.stream_id,"favourite"),$($(t[i]).find(".favourite-badge")).remove()))},fetchMovieImages:function(e,t,i){var s="/movie/"+e+"/images?api_key="+tmdb_api_key,a;e&&0!=e&&null!=e&&vod_series_page.isTMDBAllowed?$.getJSON(tmdb_prefix_url+s,function(e){0<e.backdrops.length&&(t=tmdb_img_url+"w1280"+e.backdrops[0].file_path),0<e.logos.length&&(a=tmdb_img_url+"w500"+e.logos[0].file_path),a?($("#vod-summary-log-title").attr("src",a).show(),$("#vod-summary-name").hide()):($("#vod-summary-log-title").hide(),$("#vod-summary-name").show());try{$("#movie-image").attr("src",t).show(),$(".vod-series-summary-section-img-darken").show()}catch(e){showImg($(".vod-series-background-img"))}i&&i()}):i&&i()},fetchCast:function(e,i){var e;
// $("#vod-summary-cast").hide();
vod_series_page.isTMDBAllowed&&e&&0!=e&&null!=e&&(e="/movie/"+e+"/credits?api_key="+tmdb_api_key,$.getJSON(tmdb_prefix_url+e,function(e){var t;0<e.cast.length&&(t="",e.cast.forEach(function(e){t+='<div class="cast-member" onmouseenter="vod_summary_page.hoverCastMember('+e.order+')"><img src="'+(e.profile_path?tmdb_img_url+"w500"+e.profile_path:HOST+"app_src_min/images/avater.svg")+'" alt="'+e.name+'" class="cast-image"><span class="cast-name">'+e.name+"</span></div>"}),$("#vod-summary-cast #cast-container").html(t),$("#vod-summary-cast").show()),i&&i()}))},fillVodSummaryData:function(e,t){var i=this,s=($("#vod-summary-release-date").text(t.releasedate),t.releasedate&&$("#vod-summary-release-date").siblings(".circle").show(),$("#vod-summary-release-genre").text(t.genre),t.genre&&$("#vod-summary-release-genre").siblings(".circle").show(),$("#vod-summary-release-length").text(t.duration),t.duration&&$("#vod-summary-release-length").siblings(".circle").show(),{}),a=(
// Iterate through the list of saved video times and populate the map
VodModel.saved_video_times.forEach(function(e){
// Convert stream ID to a string and store the video time information in the map
s[e.stream_id.toString()]=e}),s[current_movie.stream_id]),a=a?utilities.getPercentage(a.time,a.duration):0,a=(// If no saved time, watched percentage remains 0
0<a?($("#vod-watch-movie-button").addClass("continue"),
// Update the width of the progress bar to represent how much of the movie has been watched
$("#vod-summary-watched-bar").css("width",a+"%"),
// Update the text content of progress percentage
$("#vod-summary-progress-percentage").text(a+"%"),
// Update the text of the button to make it continue watching instead of start watching
$("#vod-watch-movie-btn-text").attr("data-word_code","continue_watching"),null!=typeof current_words.continue_watching?$("#vod-watch-movie-btn-text").text(current_words.continue_watching):$("#vod-watch-movie-btn-text").text("Continue Watching.")):($("#vod-watch-movie-button").removeClass("continue"),$("#vod-watch-movie-btn-text").attr("data-word_code","start_watching"),null!=typeof current_words.start_watching?$("#vod-watch-movie-btn-text").text(current_words.start_watching):$("#vod-watch-movie-btn-text").text("Start Watching.")),$("#vod-summary-release-age").text(t.age),$("#vod-summary-release-director").text(t.director),t.director&&$("#vod-summary-release-director").siblings(".circle").show(),$("#vod-summary-release-cast").text(t.cast),t.cast&&$("#vod-summary-release-cast").siblings(".circle").show(),$("#vod-summary-description").text(t.plot),current_movie.info=t,t.tmdb_id&&(current_movie.tmdb_id=t.tmdb_id),current_movie.summary_downloaded=!0,"");try{a=t.backdrop_path[0]||HOST+"app_src_min/images/default_movie_bg.png",a&&$(".vod-series-background-img").attr("src",a).show()}catch(e){a=vod_series_page.current_backdrop,(vod_series_page.current_backdrop?$(".vod-series-background-img").attr("src",vod_series_page.current_backdrop):$(".vod-series-background-img").attr("src",HOST+"app_src_min/images/default_movie_bg.png")).show()}$(".vod-series-background-img-overlay").show(),current_movie.youtube_trailer=e.info.youtube_trailer,void 0!==t.youtube_trailer&&null!=t.youtube_trailer&&""!==t.youtube_trailer.trim()?(this.is_trailer_exist=!0,i.min_btn_index=0,$("#vod-watch-trailer-button").show(),$("#vod-watch-trailer-button-container").show(),vod_summary_page.playTrailerVideo(e.info.youtube_trailer)):(this.is_trailer_exist=!1,$("#vod-watch-trailer-button").hide(),$("#vod-watch-trailer-button-container").hide())},showTrailerVideo:function(){""===current_movie.youtube_trailer||null==current_movie.youtube_trailer?($("#toast-body").html("<h3>Sorry<br>No trailer video available</h3>"),$(".toast").toast({animation:!0,delay:2e3}),$("#toast").toast("show")):trailer_page.init(current_movie.youtube_trailer,current_route)},showMovie:function(){$("#vod-summary-page").addClass("hide"),vod_series_player_page.makeEpisodeDoms("vod-summary-page"),vod_series_player_page.init(current_movie,"movie",this.prev_route,"",!0)},toggleFavourite:function(){var e;this.is_protected&&!this.is_favourite?showToast("Parental Safety","Adding protected content to favourites is not allowed."):(e=this.action_btns[2],this.is_favourite=!this.is_favourite,this.is_favourite?$(e).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'):$(e).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'))},hoverButton:function(e){var t=this.keys;t.index=e,t.focused_part="action_selection",$(".cast-member").removeClass("active"),$(".vod-action-btn").removeClass("active"),$($(".vod-action-btn")[t.index]).addClass("active")},hoverCastMember:function(e){var t=this.keys;
// Update keys
t.focused_part="cast_selection",t.cast_selection=e,
// Remove any active elements
$(".vod-action-btn").removeClass("active"),$(".cast-member").removeClass("active"),
// Add active class to the selected cast member by index
$($(".cast-member")[t.cast_selection]).addClass("active"),
// Move scroll position
moveScrollPosition($("#cast-container"),$($(".cast-member")[t.cast_selection])[0],"horizontal",!1,!1,!0)},keyClick:function(){var e=this.keys,t=$(".vod-action-btn"),t=t[e.index];$(t).trigger("click")},handleMenuLeftRight:function(e){var t=this.keys,i;switch(t.focused_part){case"action_selection":var s=this.min_btn_index;t.index+=e,this.is_trailer_exist||(t.index+=e),t.index<s&&(t.index=2),2<t.index&&(t.index=s),this.hoverButton(t.index);break;case"cast_selection":t.cast_selection+=e,$(".cast-member")&&(i=$(".cast-member").length),t.cast_selection<0&&(t.cast_selection=0),t.cast_selection>=i&&(t.cast_selection=i-1),this.hoverCastMember(t.cast_selection);break;default:this.hoverButton(1)}},HandleKey:function(e){var t=this.keys;
// console.log("Key pressed in VOD Summary Page: " + e.keyCode);
if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.hoverButton(t.index);break;case tvKey.DOWN:this.hoverCastMember(t.cast_selection);break;case tvKey.ENTER:this.keyClick();break;case tvKey.YELLOW:this.toggleFavourite()}},playTrailerVideo:function(e){
// new YT.Player("vod-summary-trailer-player", {
//   height: "100%",
//   width: "100%",
//   videoId: url,
//   events: {
//     onReady: function (event) {
//       event.target.playVideo();
//       $("#vod-summary-trailer").css("opacity", "1");
//     },
//   },
// });
}},vod_series_player_page={player:null,back_url:"",show_control:!1,timeOut:null,has_episodes:!1,keys:{focused_part:"control_bar",//operation_modal
control_bar:0,info_bar:0,operation_modal:0,subtitle_audio_selection_modal:0,audio_selection_modal:0,movies_menu_selection:0,aspect_ratio_selection:0,prev_focus:"",resume_bar:0,episode_selection:0,subtitle_adjust_selection:0,selected_exit_button:0},current_subtitle_index:-1,current_audio_track_index:-1,subtitle_audio_menus:[],forwardTimer:null,current_time:0,show_subtitle:!1,show_audio_track:!1,video_control_doms:$("#vod-series-video-controls-container .video-control-icon i"),video_info_doms:$("#vod-series-video-controls-container .video-info-btn"),vod_info_timer:null,current_movie:{},resume_time:0,resume_timer:null,episode_doms:[],resume_bar_doms:$("#video-resume-modal .resume-action-btn"),slider_element:$("#vod-series-video-progressbar-container .video-progress-bar-slider")[0],seek_timer:null,seek_interval_timer:null,current_movie_type:"",video_duration:0,last_key_time:0,subtitle_loading:!1,subtitle_loaded:!1,fw_timer:null,subtitle_adjust_items:$(".subtitle-adjust-item"),subtitle_adjust_time:0,is_drawing:!1,current_render_count:0,render_count_increment:40,movies_menu_doms:[],aspect_ratio_doms:$("#aspect-ratio-modal-body div"),is_catchup:!1,showNextVideo_debounce:!1,init:function(e,t,i,s,a){"epg"==t||"catchup"==t||"catch-up"==t?(this.is_catchup=!0,$(".no-catchup").hide()):(this.is_catchup=!1,$(".no-catchup").show());var o=this.keys,o=(o.movies_menu_selection=0,this.subtitle_adjust_time=0,this.current_movie=e,this.current_time=0,this.video_duration=0,this.subtitle_loaded=!1,this.fw_timer=null,$("#vod-series-player-page").removeClass("hide"),this.show_control=!0,this.showControlBar(a),$("#vod-series-progress-container .rangeslider").removeClass("active"),$(this.video_control_doms[2])),n=($(o).removeClass("fa-play"),$(o).addClass("fa-pause"),this),a=this.slider_element,r,o,a,r,a,l,a,l,o,n=($(a).attr({min:0,max:100}),$(a).rangeslider({polyfill:!1,rangeClass:"rangeslider",onSlideEnd:function(e,t){n.sliderPositionChanged(t)}}),$(a).val(0).change(),
// $(slider_element).attr('disabled',true);
$(a).rangeslider("update"),$("#vod-series-player-page").find(".video-current-time").text("--:--"),$("#vod-series-player-page").find(".video-total-time").text("--:--"),clearTimeout(this.resume_timer),"movie"===t?("xc"===settings.playlist.playlist_type?r=getMovieUrl(e.stream_id,"movie",e.container_extension):"general"===settings.playlist.playlist_type&&(r=e.url),$("#vod-series-video-title").html(e.name)):"series"===t?("xc"===settings.playlist.playlist_type?r=getMovieUrl(e.id,"series",e.container_extension):"general"===settings.playlist.playlist_type&&(r=e.url),$("#vod-series-video-title").html(e.title)):"epg"===t&&"catch-up"===i&&(o=catchup_page.sorted_programmes[catchup_page.keys.date_selection].programmes[catchup_page.keys.programme_selection],a=LiveModel.getProgrammeVideoUrl(e.stream_id,o),r=a.url,a=o.start,l=o.stop,a=a.substr(11),l=l.substr(11),o=getAtob(o.title)+"  <span class='player-epg-title-time'>"+a+"~"+l+"</span>",$("#vod-series-video-title").html(o)),this.back_url=i,this),c;try{media_player.close()}catch(e){}try{media_player.init("vod-series-player-video","vod-series-player-page")}catch(e){}try{media_player.playAsync(r)}catch(e){}if(this.timeOut=setTimeout(function(){n.hideControlBar()},1e4),c="movie"===t?"stream_id":"id",this.resume_time=0,"movie"===t||"series"===t)if(c=e[c].toString(),"movie"===t){var d=VodModel.saved_video_times;this.resume_time=0;for(var h=0;h<d.length;h++)if(d[h].stream_id==c){this.resume_time=d[h].time;break}}else if("series"===t)for(var d=SeriesModel.saved_video_times,h=0;h<d.length;h++)if(d[h].stream_id==current_series.series_id){var _=d[h].video_times,u=series_summary_page.keys.episode_selection.toString(),m=series_summary_page.current_season_index.toString();if(_[m]&&_[m][u]){this.resume_time=_[m][u].time;break}}current_route="vod-series-player-video",this.current_subtitle_index=-1,this.current_audio_track_index=-1,this.show_subtitle=!1,this.current_movie_type=t},hoverExitButton:function(e){0==e?($(".confirtm-exit-palyer").addClass("active"),$(".cancel-exit-palyer").removeClass("active")):($(".confirtm-exit-palyer").removeClass("active"),$(".cancel-exit-palyer").addClass("active")),this.keys.selected_exit_button=e},clearMoviesList:function(){$("#player-movies-modal-body").html(""),
// Reset the current render count (used to control how many items are displayed)
this.current_render_count=0},exitPlayer:function(){switch(this.clearMoviesList(),$("#player-exit-confirm-modal").hide(),$("#video-resume-modal").hide(),this.Exit(),this.back_url){case"vod-series-page":current_route="vod-series-page",$("#vod-summary-page").removeClass("hide"),
// if (
//   vod_series_page.keys.menu_selection >=
//   vod_series_page.menu_doms.length
// )
//   vod_series_page.keys.menu_selection =
//     vod_series_page.menu_doms.length - 1;
// vod_series_page.hoverMovieItem(
//   vod_series_page.menu_doms[vod_series_page.keys.menu_selection]
// );
vod_summary_page.init("vod-series-page"),vod_series_page.updateFavouriteOrRecentCount("recent");break;case"episode-page":current_route="series-summary-page",$("#series-summary-page").removeClass("hide"),series_summary_page.hoverEpisode(series_summary_page.keys.episode_selection);break;case"catch-up":$("#epg-page").removeClass("hide"),catchup_page.selectProgramme(catchup_page.keys.programme_selection,!1);break;case"search-page":$("#search-page").show();var e="movie"===this.current_movie_type?1:2;search_page.keys.hor_keys[e]>=search_page.movie_doms[e].length&&(search_page.keys.hor_keys[e]=search_page.movie_doms[e].length-1),search_page.hoverMovie(search_page.keys.hor_keys[e],e)}},cancelExit:function(){$("#player-exit-confirm-modal").hide(),$("#video-resume-modal").hide(),this.keys.focused_part="control_bar"},sliderPositionChanged:function(e){this.hoverSlider(),media_player.videoObj.currentTime=e,this.current_time=e,$(this.slider_element).val(e).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(e))},makeEpisodeDoms:function(e){var e,s;this.keys.episode_selection=0,"episode-page"===e?(e=current_season.episodes,this.episodes=e,this.has_episodes=!0,s="",e.map(function(e,t){var i,i=e.info.movie_image||series_summary_page.current_series_backdrop_image||current_series.cover;s+='<div class="player-season-item"              onclick="vod_series_player_page.showSelectedEpisode()"              onmouseenter="vod_series_player_page.hoverEpisode('+t+')"          >              <div class="player-episodes-image-container">                  <img src="'+i+'" />              </div>              <div class="player-episode-title-container">                  <div class="player-episode-number">'+(t+1)+'</div>                   <div class="player-episode-title max-line-2">'+e.title+"</div>              </div>          </div>"}),$("#player-seasons-container").html(s),this.episode_doms=$(".player-season-item"),$("#player-seasons-container").removeClass("expanded"),$("#player-seasons-container").show()):(this.has_episodes=!1,$("#player-seasons-container").html(""),this.episode_doms=$(".player-season-item"),this.episode_doms=[],$("#player-seasons-container").hide())},showResumeBar:function(){var e=this.keys,t,t;0<this.resume_time&&(t=1e3,"lg"!==platform&&"vidaa"!==platform&&"zeasn"!==platform&&"titanos"!==platform||(t=1),t=media_player.formatTime(this.resume_time/t),$("#vod-resume-time").text(t),$("#video-resume-modal").show(),this.hideControlBar(),clearTimeout(this.resume_timer),"resume_bar"!=e.focused_part&&(e.prev_focus=e.focused_part),
// if already showing a modal, should not change focused part
"subtitle_audio_selection_modal"!=e.focused_part&&"movies_menu_modal"!=e.focused_part&&"aspect_ratio_modal"!=e.focused_part||(e.prev_focus="resume_bar"),this.hoverResumeBtn(0))},Exit:function(){this.saveVideoTime(),current_route=this.back_url;try{media_player.close()}catch(e){}$("#"+media_player.parent_id).find(".video-error").hide(),$("#"+media_player.parent_id).find(".subtitle-container").text(""),$("#vod-series-player-page").addClass("hide")},saveVideoTime:function(){try{var e,t,i,s;if("samsung"===platform){i=1e4,s=1e4;try{e=webapis.avplay.getCurrentTime(),t=webapis.avplay.getDuration()}catch(e){}}else"lg"!==platform&&"vidaa"!==platform&&"zeasn"!==platform&&"titanos"!==platform||(s=10,e=media_player.videoObj.currentTime,t=media_player.videoObj.duration,i=10);"develop"===env&&(
// to test add to watch list
e=25e3,t=25e3+5e4*Math.random());var a=this.current_movie,o,n,r,l;if(i<=t-e&&s<=e){if("movie"===this.current_movie_type){var o=VodModel.getCategories(!0,!1);if(checkForAdult(a,"movie",o))return;VodModel.saveVideoTime(a.stream_id,e,t),VodModel.addToWatchList(a),"vod-series-page"===this.back_url&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").addClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-progress").css({width:e/t*100+"%"}),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress"))}"series"===this.current_movie_type&&(o=SeriesModel.getCategories(!0,!1),checkForAdult(current_series,"movie",o)||(n=SeriesModel.saveVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection,e,t),SeriesModel.addToWatchList(current_series),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-duration").addClass("has-progress"),$(series_summary_page.episode_doms[series_summary_page.keys.episode_selection]).find(".episode-video-progress").css({width:e/t*100+"%"}),series_summary_page.series_video_times=n,"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").addClass("has-progress")))}else t-e<i&&("movie"===this.current_movie_type&&(VodModel.removeVideoTime(a.stream_id),"vod-series-page"===this.back_url)&&vod_series_page.keys.menu_selection<vod_series_page.menu_doms.length&&($(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-duration").removeClass("has-progress"),$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress")),"series"===this.current_movie_type)&&(r=SeriesModel.removeVideoTime(current_series.series_id,series_summary_page.current_season_index,series_summary_page.keys.episode_selection),l=r[0],l&&"vod-series-page"===series_summary_page.prev_route&&$(vod_series_page.menu_doms[vod_series_page.keys.menu_selection]).find(".vod-series-video-watch-status-icon").removeClass("has-progress"),series_summary_page.series_video_times=r[1])}catch(e){}},goBack:function(){$(".modal").modal("hide");var e=this.keys;this.show_control?this.hideControlBar():"exit_confirm"===e.focused_part?this.cancelExit():"control_bar"!=e.focused_part&&"info_bar"!=e.focused_part&&"slider"!=e.focused_part&&"episode_selection"!=e.focused_part||($("#player-exit-confirm-modal").show(),this.hoverExitButton(0),this.keys.focused_part="exit_confirm"),"subtitle_audio_selection_modal"===e.focused_part&&(e.focused_part=e.prev_focus,$("#subtitle-selection-modal").modal("hide")),"vod_info"===e.focused_part&&($("#vod-video-info-container").hide(),clearTimeout(this.vod_info_timer),e.focused_part=e.prev_focus),"resume_bar"===e.focused_part&&($("#video-resume-modal").hide(),"resume_bar"!=e.prev_focus?e.focused_part=e.prev_focus:e.focused_part="info_bar",clearTimeout(this.resume_timer)),"subtitle_adjust_selection"===e.focused_part&&($("#subtitle-time-adjust-modal").hide(),
// keys.focused_part = keys.prev_focus;
e.focused_part="control_bar"),"movies_menu_modal"===e.focused_part&&($("player-movies-modal").modal("hide"),e.focused_part=e.prev_focus),"aspect_ratio_modal"===e.focused_part&&($("aspect-ratio-modal").modal("hide"),e.focused_part=e.prev_focus)},playPauseVideo:function(e){this.showControlBar(!1);var t=this.video_control_doms,i=$(t[2]);switch(e){case"pause":if(media_player.state===media_player.STATES.PLAYING)try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}break;case"play":if(media_player.state===media_player.STATES.PAUSED)try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}break;default:if(media_player.state===media_player.STATES.PAUSED)try{media_player.play(),$(i).removeClass("fa-play"),$(i).addClass("fa-pause")}catch(e){}else if(media_player.state===media_player.STATES.PLAYING)try{media_player.pause(),$(i).removeClass("fa-pause"),$(i).addClass("fa-play")}catch(e){}}},seekTo:function(e){if("samsung"===platform){var t=(new Date).getTime()/1e3,i,s;if(!(t-this.last_key_time<.1)){if(this.last_key_time=t,0===this.current_time&&(this.current_time=media_player.current_time/1e3),0!=this.video_duration)i=this.video_duration;else try{i=webapis.avplay.getDuration()/1e3,this.video_duration=i}catch(e){}if(0!=i)if(s=this.current_time+e,s<0)this.showNextVideo(-1,!1);else if(i<=s)this.showNextVideo(1,!1);else{if(this.current_time=s,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)),$(this.slider_element).val(s).change(),clearTimeout(this.seek_timer),media_player.state===media_player.STATES.PLAYING)try{media_player.pause()}catch(e){}$("#"+media_player.parent_id).find(".video-loader").show(),this.seek_timer=setTimeout(function(){webapis.avplay.seekTo(1e3*s),setTimeout(function(){try{media_player.play()}catch(e){}},200)},500)}}}else{0===this.current_time&&(this.current_time=media_player.videoObj.currentTime);var i=media_player.videoObj.duration,s=this.current_time+e;s<0&&(s=0),i<=s&&(s=i),this.current_time=s,media_player.videoObj.currentTime=s,0<i&&(SrtOperation.srt&&0<SrtOperation.srt.length&&(
// here will hide subtitles first
$("#"+media_player.parent_id).find(".subtitle-container").html(""),SrtOperation.stopOperation(),this.fw_timer&&(clearTimeout(this.fw_timer),this.fw_timer=null),this.fw_timer=setTimeout(function(){SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1},200)),$(this.slider_element).val(s).change(),$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(s)))}},showSelectedEpisode:function(){var e=series_summary_page.keys,t=this.keys,i=series_summary_page.episode_doms;if(e.episode_selection!=t.episode_selection){this.saveVideoTime(),$(i).removeClass("active"),e.episode_selection=t.episode_selection,$(i[e.episode_selection]).addClass("active");var i=this.episodes,e=i[t.episode_selection];this.resume_time=0;try{media_player.close()}catch(e){}current_episode=e,this.init(current_episode,"series","episode-page","",!1),this.hoverEpisode(t.episode_selection)}},showNextVideo:function(e,t){if(!this.showNextVideo_debounce){this.showNextVideo_debounce=!0;var i=this,s;switch(setTimeout(function(){i.showNextVideo_debounce=!1},1e3),this.saveVideoTime(),this.resume_time=0,this.back_url){case"vod-series-page":var a=vod_series_page.menu_doms,o=vod_series_page.keys;if(o.menu_selection+=e,o.menu_selection<0)o.menu_selection=0;else{if(o.menu_selection>=vod_series_page.movies.length)return t?(
// if its from finishing play video
this.hideControlBar(),void this.goBack()):
// if its showing next video by clicking next button
void(o.menu_selection=vod_series_page.movies.length-1);current_movie=vod_series_page.movies[o.menu_selection],this.init(current_movie,"movie","vod-series-page","",!1)}break;case"episode-page":var o=series_summary_page.keys,s=series_summary_page.episode_doms;if(o.episode_selection+=e,o.episode_selection<0)o.episode_selection=0;else{if(o.episode_selection>=s.length)return t?(this.hideControlBar(),void this.goBack()):void(o.episode_selection=s.length-1);var s=current_season.episodes;current_episode=s[o.episode_selection],this.init(current_episode,"series","episode-page","",!1)}break;case"catch-up":o=catchup_page.keys,o.programme_selection+=e;var s=catchup_page.sorted_programmes[o.date_selection].programmes[o.programme_selection];o.programme_selection<0?o.programme_selection=0:o.programme_selection>=s.length?o.programme_selection=s.length-1:this.init(catchup_page.channel,"epg","catch-up","",!1);break;case"search-page":o=search_page.keys,o.hor_keys[1]+=e,o.hor_keys[1]<0?o.hor_keys[1]=0:(s=search_page.filtered_movies[1],o.hor_keys[1]>=s.length?o.hor_keys[1]=s.length-1:(this.saveVideoTime(),current_movie=s[o.hor_keys[1]],this.init(current_movie,"movie","search-page",!1)))}}},showControlBar:function(e){$("#vod-series-video-controls-container").slideDown(),$("#vod-series-video-title").slideDown(),this.show_control=!0;var t=this;e&&this.hoverVideoControlIcon(2),clearTimeout(this.timeOut),this.timeOut=null,this.timeOut=setTimeout(function(){t.hideControlBar()},1e4)},hideControlBar:function(){$("#vod-series-video-controls-container").slideUp(),$("#vod-series-video-title").slideUp(),this.show_control=!1},makeMediaTrackElement:function(e,t){var s="",a=0,o,i;return"TEXT"===t&&(a=1,s='<div class="modal-operation-menu-type-2 subtitle-item"                    onmouseenter="vod_series_player_page.hoverSubtitle(0)"                     onclick="vod_series_player_page.handleMenuClick()"                 >                   <input class="magic-radio" type="radio" name="radio" value="-1">                   <label>Disabled</label>                </div>'),"samsung"===platform?(o="TEXT"!==t?"language":"track_lang",e.map(function(e,t){
// var extra_info=JSON.parse(item.extra_info);
var i=e.extra_info;s+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player_page.hoverSubtitle('+(t+a)+')"                     onclick="vod_series_player_page.handleMenuClick()"                 >                    <input class="magic-radio" type="radio" name="radio"                        value="'+e.index+'"                    >                    <label>'+i[o]+"</label>                </div>"})):(i="TEXT"===t?"Subtitle ":"Track ",e.map(function(e,t){var e=e.language;e?language_codes[e]&&(e=language_codes[e]):e=i+(t+1),s+='<div class="modal-operation-menu-type-2 subtitle-item"                        onmouseenter="vod_series_player_page.hoverSubtitle('+(t+a)+')"                         onclick="vod_series_player_page.handleMenuClick()"                     >                        <input class="magic-radio" type="radio" name="radio"                            value="'+t+'">                        <label>'+e+"</label>                    </div>"})),s},showSubtitleAudioModal:function(e){this.hideControlBar();var t=this.keys,i,s,a,o,a;try{$("#subtitle-loader-container").hide(),this.subtitle_loading=!1,"samsung"!==platform&&"TEXT"===e?this.subtitle_loaded?0<media_player.subtitles.length?this.renderSubtitles(e,media_player.subtitles):this.showEmptySubtitleMessage(e):($("#subtitle-selection-container").html(""),"subtitle_audio_selection_modal"!==t.focused_part&&(t.prev_focus=t.focused_part),this.hoverSubtitle(-2),this.subtitle_loading=!0,$("#subtitle-selection-modal").modal("show"),$("#subtitle-loader-container").show(),o=settings.playlist.playlist_type,a=this.current_movie,"movie"===this.current_movie_type?a.tmdb_id?this.getSubtitlesForLG():a.tmdb?(a.tmdb_id=a.tmdb,this.getSubtitlesForLG()):"xc"!==o||a.summary_downloaded?this.getTmdbID(a,"movie"):this.getMovieDetail():current_series.tmdb||current_series.info&&current_series.info.tmdb||a.info&&a.info.tmdb_id?this.getSubtitlesForLG():this.getTmdbID(current_series,"series")):(i=media_player.getSubtitleOrAudioTrack(e),0<i.length?this.renderSubtitles(e,i):showToast("Sorry","TEXT"===e?"No Subtitles exists":"No Audios exists"))}catch(e){$("#vod-series-player-operation-modal").modal("hide"),showToast("Sorry","Video not loaded yet")}},showMoviesMenu:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="movies_menu_modal",this.hideControlBar(),$("#player-movies-modal").modal("show"),this.renderCategoryContent()},showAspectRatioMenu:function(){var e=this.keys;e.prev_focus=e.focused_part,e.focused_part="aspect_ratio_modal",this.hideControlBar(),$("#aspect-ratio-modal").modal("show")},renderCategoryContent:function(){var s="",a=HOST+"app_src_min/images/default_movie_bg.png",o="stream_icon",e=(// Default key for movie icons
this.current_movie_type=vod_series_player_page.current_movie_type,this.current_movie_type),n,r;// Initialize an empty string for the HTML content
// Store the current movie type
// Update the key if the current content type is series
"series"===e&&(o="cover"),
// Update the default icon if the current content type is replay
"replay"===e&&(a=default_movie_icon),
// Check if there are more movies to render
this.current_render_count<vod_series_page.movies.length&&(this.is_drawing=!0,// Set drawing state to true
showLoader(!0),n=this,// Store reference to 'this' for later use in timeout
// Set a timeout to stop drawing and hide the loader after 1 second
setTimeout(function(){n.is_drawing=!1,// Reset drawing state
showLoader(!1)},1e3),r="stream_id","vod"==this.current_movie_type||"movie"==this.current_movie_type?r="stream_id":"series"==this.current_movie_type&&(r="series_id"),
// Loop through the movies to be rendered in this batch
vod_series_page.movies.slice(this.current_render_count,// Start from the current render count
this.current_render_count+this.render_count_increment).map(function(e,t){var i=e[r].toString();// Get the movie's stream ID
// Generate the HTML for the movie item
s+='<div class="player-vod-series-menu-item-container"              data-stream_id ="'+i+'"              data-index="'+(n.current_render_count+t)+'"              onmouseenter="vod_series_player_page.hoverMovieItem('+t+')"              onclick="vod_series_player_page.handleMenuClick()"            >              <div class="player-vod-series-poster-wrapper">                <img class="vod-series-icon" src="'+e[o]+'" onerror="this.src=\''+a+'\'">              </div>              <div class="player-vod-series-menu-item-info-wrapper">                <div class="player-vod-series-menu-item-info-title">'+e.name+"</div>              </div>            </div>            "}),
// Increment the render count by the batch size
this.current_render_count+=this.render_count_increment,
// Add the generated HTML content to the container
$("#player-movies-modal-body").append(s),
// Update the DOM elements for the newly rendered menu items
this.movies_menu_doms=$("#player-movies-modal-body .player-vod-series-menu-item-container"),this.hoverMovieItem(this.keys.movies_menu_selection))},getMovieDetail:function(){var t=this,i=this.current_movie;"xc"===settings.playlist.playlist_type&&$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_vod_info&vod_id="+i.stream_id,function(e){var e=e.info;t.current_movie.info=e,i.summary_downloaded=!0,e.tmdb_id?(t.current_movie.tmdb_id=e.tmdb_id,t.getSubtitlesForLG()):t.getTmdbID(i,"movie")},function(e){t.getTmdbID(i,"movie")})},getTmdbID:function(r,l){var e,c,t,i,e="movie"===l?r.info&&(r.info.o_name||r.info.name)||r.name:(r.info&&r.info.name?r.info:r).name,e=getRealMovieName(e),c=e.name.toLowerCase(),t=e.year,i=e.country,e="movie"===l?"/search/movie":"/search/tv",e=tmdb_prefix_url+e+"?api_key="+tmdb_api_key+"&query="+c,d=this;$.ajax({method:"get",url:e,success:function(e){if(e.results&&0<e.results.length){var t=e.results;if(1==t.length)
// only 1 movie;
"movie"===l?d.current_movie.tmdb_id=t[0].id:current_series.tmdb=t[0].id,d.getSubtitlesForLG();else
// if there are many results
if("movie"===l){var e=r.info;if(e&&e.releasedate){for(var i=e.releasedate,s=0;s<t.length;s++)if(t[s].release_date===i){d.current_movie.tmdb_id=t[s].id;break}}else{for(var a=0,o,s=0;s<t.length;s++)c.includes(t[s].title.toLowerCase())&&(a++,o=s);1==a&&(d.current_movie.tmdb_id=t[o].id)}d.current_movie.tmdb_id?d.getSubtitlesForLG():d.showEmptySubtitleMessage("TEXT")}else{for(var a=0,o,n=current_series.plot?current_series.plot.toLowerCase().trim():"",s=0;s<t.length;s++)if((c.includes(t[s].name.toLowerCase())||c.includes(t[s].original_name.toLowerCase()))&&(a++,o=s,n)&&n==t[s].overview.toLowerCase().trim()){a=1;break}1==a?(current_series.tmdb=t[o].id,d.getSubtitlesForLG()):d.showEmptySubtitleMessage("TEXT")}}else d.showEmptySubtitleMessage("TEXT")},error:function(e){d.showEmptySubtitleMessage("TEXT")}})},getSubtitlesForLG:function(){var t=this,e=this.current_movie_type,i,e,s;"movie"===e?i={tmdb_id:this.current_movie.tmdb_id}:(e=current_season.episodes[series_summary_page.keys.episode_selection],current_series.tmdb?s=current_series.tmdb:current_series.info&&current_series.info.tmdb&&(s=current_series.info.tmdb),s?(
// this is parent series tmdb id, in
i={movie_type:"episode",season_number:current_season.season_number||series_summary_page.keys.season_selection+1,episode_number:e.episode_num||series_summary_page.keys.episode_selection+1,tmdb_id:s},e.info&&e.info.tmdb_id&&(i.episode_tmdb_id=e.info.tmdb_id)):e.info&&e.info.tmdb_id&&(i={movie_type:"episode",episode_tmdb_id:e.info.tmdb_id})),$.ajax({method:"post",url:"https://ibosub.com/api/get-subtitles-update",data:i,dataType:"json",success:function(e){t.subtitle_loading=!1,t.subtitle_loaded=!0,$("#subtitle-loader-container").hide(),"success"===e.status&&0<e.subtitles.length?(media_player.subtitles=e.subtitles,media_player.srt_map=e.srt_map,media_player.movie_list_id=e.movie_list_id,t.renderSubtitles("TEXT",e.subtitles)):t.showEmptySubtitleMessage("TEXT")},error:function(e){
// that.subtitle_loading=false;
// that.subtitle_loaded=true;
// that.showEmptySubtitleMessage(kind);
t.showEmptySubtitleMessage("TEXT")}})},renderSubtitles:function(e,t){var i=this,s=this.keys,s,a,o,t;$("#vod-series-player-operation-modal").modal("hide"),0<t.length&&("subtitle_audio_selection_modal"!=s.focused_part&&(s.prev_focus=s.focused_part),"TEXT"==e?$("#subtitle-modal-title").text("Subtitle"):$("#subtitle-modal-title").text("Audio Track"),s.focused_part="subtitle_audio_selection_modal",$("#subtitle-selection-modal").find(".modal-operation-menu-type-2").removeClass("active"),s=this.makeMediaTrackElement(t,e),$("#subtitle-selection-container").html(s),$("#subtitle-selection-modal").modal("show"),a=$("#subtitle-selection-modal .subtitle-item"),this.subtitle_audio_menus=a,$(a[0]).find("input").prop("checked",!0),this.hoverSubtitle(0),o="TEXT"===e?this.current_subtitle_index:this.current_audio_track_index,this.subtitle_audio_menus.map(function(e,t){var t=parseInt($(t).find("input").val());t==o&&($(a).find("input").prop("checked",!1),$(a[e]).find("input").prop("checked",!0),i.hoverSubtitle(e))}),t=$("#subtitle-selection-modal").find(".modal-btn-2"),$(t).removeClass("active"))},showEmptySubtitleMessage:function(e){$("#subtitle-selection-modal").modal("hide"),"TEXT"===e?(this.subtitle_loaded=!1,this.subtitle_loading=!1,media_player.subtitles=[],showToast("Sorry","No Subtitles exists")):showToast("Sorry","No Audios exists");var e=this.keys;"subtitle_audio_selection_modal"==e.focused_part&&(e.focused_part=e.prev_focus)},cancelSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},confirmSubtitle:function(){$("#subtitle-selection-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus;var e=$("#subtitle-modal-title").text();if(e.toLowerCase().includes("subtitle")){var t=this,e,i,e;this.current_subtitle_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val(),-1==this.current_subtitle_index||"samsung"==platform||(e=media_player.subtitles[this.current_subtitle_index],i=e.file_id.toString(),e=media_player.srt_map,e[i])?this.subtitleChanged():$.ajax({method:"post",url:"https://ibosub.com/api/get-single-subtitle-content",data:{movie_list_id:media_player.movie_list_id,file_id:i},dataType:"json",success:function(e){"success"===e.status&&(media_player.srt_map[i]=e.content,t.subtitleChanged())},error:function(e){showToast("Sorry","Something error caused while downloading subtitles for current language, please try again later")}})}else{this.current_audio_track_index=$("#subtitle-selection-modal").find("input[type=radio]:checked").val();try{media_player.setSubtitleOrAudioTrack("AUDIO",parseInt(this.current_audio_track_index))}catch(e){}}},subtitleChanged:function(){try{this.show_subtitle=!0,media_player.setSubtitleOrAudioTrack("TEXT",parseInt(this.current_subtitle_index))}catch(e){}},removeAllActiveClass:function(){$(this.video_info_doms).removeClass("active"),$(this.video_control_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$("#vod-series-player-page .rangeslider").removeClass("active")},showSubtitleAdjustModal:function(){var e=this.keys;this.hideControlBar(),"subtitle_adjust_selection"!=e.focused_part&&(e.prev_focus=e.focused_part),$("#subtitle-adjust-time").val(this.subtitle_adjust_time),$("#subtitle-time-adjust-modal").show(),this.hoverSubtitleAdjustBtn(0)},saveSubtitleAdjustTime:function(){var e=$("#subtitle-adjust-time").val(),e=e||0;this.subtitle_adjust_time!=e&&(this.subtitle_adjust_time=e,SrtOperation.srt)&&0<SrtOperation.srt.length&&(SrtOperation.setTimeDifference(e),SrtOperation.stopOperation(),SrtOperation.findIndex(media_player.videoObj.currentTime,0,SrtOperation.srt.length-1),SrtOperation.stopped=!1),this.goBack()},hoverSubtitleAdjustBtn:function(e){var t=this.keys;t.focused_part="subtitle_adjust_selection",t.subtitle_adjust_selection=e,$(this.subtitle_adjust_items).removeClass("active"),$(this.subtitle_adjust_items[e]).addClass("active")},hoverSubtitle:function(e){var t=this.keys;t.focused_part="subtitle_audio_selection_modal",$(this.subtitle_audio_menus).removeClass("active"),0<=e?(t.subtitle_audio_selection_modal=e,t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2&&moveScrollPosition($("#subtitle-selection-container"),this.subtitle_audio_menus[t.subtitle_audio_selection_modal],"vertical",!1)):t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length+e,$(this.subtitle_audio_menus[t.subtitle_audio_selection_modal]).addClass("active")},hoverSlider:function(){$("#player-seasons-container").removeClass("expanded"),this.removeAllActiveClass(),this.keys.focused_part="slider",$("#vod-series-player-page .rangeslider").addClass("active"),this.showControlBar(!1)},hoverVideoControlIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1),this.removeAllActiveClass();var t=this.keys;t.focused_part="control_bar",t.control_bar=e,$(this.video_control_doms[e]).addClass("active")},hoverVideoInfoIcon:function(e){$("#player-seasons-container").removeClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="info_bar",t.info_bar=e,$(this.video_info_doms[e]).addClass("active")},hoverEpisode:function(e){$("#player-seasons-container").addClass("expanded"),this.showControlBar(!1);var t=this.keys;this.removeAllActiveClass(),t.focused_part="episode_selection",t.episode_selection=e,$(this.episode_doms[e]).addClass("active"),moveScrollPosition($("#player-seasons-container"),this.episode_doms[t.episode_selection],"horizontal",!1)},hoverMovieItem:function(e){var t=this.keys;"movies_menu_modal"!=t.focused_part&&(t.prev_focus=t.focused_part,t.focused_part="movies_menu_modal"),t.movies_menu_selection=e,$(this.movies_menu_doms).removeClass("active"),$(this.movies_menu_doms[e]).addClass("active"),moveScrollPosition($("#player-movies-modal-body"),$(this.movies_menu_doms[e]),"vertical",!1)},hoverAspectRatioItem:function(e){var t=this.keys;"aspect_ratio_modal"!=t.focused_part&&(t.prev_focus=t.focused_part,t.focused_part="aspect_ratio_modal"),t.aspect_ratio_selection=e,$(this.aspect_ratio_doms).removeClass("active"),$(this.aspect_ratio_doms[e]).addClass("active"),moveScrollPosition($("#aspect-ratio-modal-body"),$(this.aspect_ratio_doms[e]),"vertical",!1)},hoverResumeBtn:function(e){var t=this.keys;t.resume_bar=e,t.focused_part="resume_bar",$(this.resume_bar_doms).removeClass("active"),$(this.resume_bar_doms[e]).addClass("active"),clearTimeout(this.resume_timer),this.resume_timer=null,this.resume_timer=setTimeout(function(){$("#video-resume-modal").hide(),
// keys.focused_part=keys.prev_focus;
"resume_bar"==t.focused_part?
// only when focus on resume bar, change into prev focus when hiding resume modal
"resume_bar"!=t.prev_focus?t.focused_part=t.prev_focus:t.focused_part="info_bar":"subtitle_audio_selection_modal"===t.focused_part&&(t.prev_focus="info_bar")},15e3)},changeAspectRatio:function(e){e=e||"16:9",setTimeout(function(){try{media_player.setDisplayArea(e)}catch(e){}},0)},handleMenuClick:function(){var e=this.keys;if("movies_menu_modal"!=e.focused_part||this.is_drawing)if(this.show_control||"control_bar"!==e.focused_part&&"slider"!==e.focused_part&&"info_bar"!==e.focused_part&&"episode_selection"!==e.focused_part){switch(e.focused_part){case"subtitle_audio_selection_modal":return void(e.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?
// this means ok, or cancel button cliced in subtitle selection modal
$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).trigger("click"):($(this.subtitle_audio_menus).find("input").prop("checked",!1),$(this.subtitle_audio_menus[e.subtitle_audio_selection_modal]).find("input").prop("checked",!0)));case"aspect_ratio_modal":$(this.aspect_ratio_doms[e.aspect_ratio_selection]).trigger("click");break;case"resume_bar":if($("#video-resume-modal").hide(),e.focused_part=e.prev_focus,0==e.resume_bar)if("samsung"===platform)try{var t=webapis.avplay.getCurrentTime();t<this.resume_time&&(webapis.avplay.seekTo(this.resume_time),$(this.slider_element).val(this.resume_time/1e3).change())}catch(e){}else if("lg"===platform||"vidaa"===platform||"zeasn"===platform||"titanos"===platform)try{var t=media_player.videoObj.currentTime,i;t<this.resume_time&&(media_player.videoObj.currentTime=this.resume_time,$("#"+media_player.parent_id).find(".video-current-time").html(media_player.formatTime(this.resume_time)),i=media_player.videoObj.duration,0<i)&&$(this.slider_element).val(this.resume_time).change()}catch(e){}break;case"subtitle_adjust_selection":return void(0==e.subtitle_adjust_selection?$(this.subtitle_adjust_items[0]).focus():$(this.subtitle_adjust_items[e.subtitle_adjust_selection]).trigger("click"));case"exit_confirm":0==e.selected_exit_button?this.exitPlayer():1==e.selected_exit_button&&this.cancelExit()}if(this.show_control)switch(e.focused_part){case"control_bar":this.showControlBar(!1),$(this.video_control_doms[e.control_bar]).trigger("click");break;case"slider":this.showControlBar(!1);break;case"info_bar":$(this.video_info_doms[e.info_bar]).find(".video-info-icon").trigger("click"),this.showControlBar(!1);break;case"episode_selection":this.showControlBar(!1),$(this.episode_doms[e.episode_selection]).trigger("click")}}else this.showControlBar(!0);else if("vod"===this.current_movie_type||"movie"==this.current_movie_type){current_movie=vod_series_page.movies[e.movies_menu_selection];try{media_player.close()}catch(e){}vod_summary_page.init("vod-series-page")}else if("series"===this.current_movie_type){current_series=vod_series_page.movies[e.movies_menu_selection];try{media_player.close()}catch(e){}series_summary_page.init("vod-series-page")}},handleMenuLeftRight:function(e){var t=this.keys,i;if(this.show_control)switch(t.focused_part){case"control_bar":t.control_bar+=e,t.control_bar<0&&(t.control_bar=0),t.control_bar>=this.video_control_doms.length?(t.control_bar=this.video_control_doms.length-1,this.hoverVideoInfoIcon(0)):this.hoverVideoControlIcon(t.control_bar);break;case"info_bar":var s=4;
// If catchup (EPG), then max info bar is 3
this.is_catchup&&(s=3),
// Increment or decrement going right or left
t.info_bar+=e,
// Skip adjust subtitle time button for samsung devices
2==t.info_bar&&"samsung"==platform&&(t.info_bar+=e),
// Stop at the max info bar buttons
t.info_bar>s&&(t.info_bar=s),
// If info bar is less than zero, then set to zero and hover to control bar
t.info_bar<0?(t.info_bar=0,this.hoverVideoControlIcon(t.control_bar)):this.hoverVideoInfoIcon(t.info_bar);break;case"slider":this.seekTo(30*e);break;case"episode_selection":t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=this.episode_doms.length-1),t.episode_selection>=this.episode_doms.length&&(t.episode_selection=0),this.hoverEpisode(t.episode_selection)}else"control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part||(this.showControlBar(!1),this.hoverSlider());"subtitle_audio_selection_modal"===t.focused_part&&(t.subtitle_audio_selection_modal<this.subtitle_audio_menus.length-2?0<e?this.hoverSubtitle(-1):this.hoverSubtitle(-2):(i=this.subtitle_audio_menus.length,t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<i-2&&(
// will loop inside ok, cancel button
t.subtitle_audio_selection_modal=i-2),t.subtitle_audio_selection_modal>=i&&(t.subtitle_audio_selection_modal=i-1),this.hoverSubtitle(t.subtitle_audio_selection_modal))),"subtitle_adjust_selection"===t.focused_part&&(t.subtitle_adjust_selection=0<e?2:1,this.hoverSubtitleAdjustBtn(t.subtitle_adjust_selection)),"exit_confirm"===t.focused_part&&(0<e?this.hoverExitButton(1):this.hoverExitButton(0))},handleMenuUpDown:function(e){var t=this.keys;if("control_bar"!==t.focused_part&&"info_bar"!==t.focused_part&&"slider"!==t.focused_part&&"episode_selection"!==t.focused_part||this.show_control)switch(t.focused_part){case"slider":e<0&&this.hoverVideoControlIcon(2),this.has_episodes&&0<e&&this.hoverEpisode(t.episode_selection);break;case"control_bar":0<e&&this.hoverSlider();break;case"info_bar":0<e&&this.hoverSlider(2),this.has_episodes&&0<e&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":e<0&&this.hoverSlider();break;case"subtitle_audio_selection_modal":t.subtitle_audio_selection_modal>=this.subtitle_audio_menus.length-2?e<0&&(t.subtitle_audio_selection_modal=this.subtitle_audio_menus.length-3):t.subtitle_audio_selection_modal+=e,t.subtitle_audio_selection_modal<0&&(t.subtitle_audio_selection_modal=0),this.hoverSubtitle(t.subtitle_audio_selection_modal);break;case"resume_bar":var i=this.resume_bar_doms;t.resume_bar+=e,t.resume_bar<0&&(t.resume_bar=i.length-1),t.resume_bar>=i.length&&(t.resume_bar=0),this.hoverResumeBtn(t.resume_bar);break;case"subtitle_adjust_selection":0<t.subtitle_adjust_selection?e<0&&this.hoverSubtitleAdjustBtn(0):0<e&&this.hoverSubtitleAdjustBtn(1);break;case"movies_menu_modal":t.movies_menu_selection+=e,t.movies_menu_selection<0&&(t.movies_menu_selection=0),t.movies_menu_selection>=this.movies_menu_doms.length&&(t.movies_menu_selection=this.movies_menu_doms.length-1),this.hoverMovieItem(t.movies_menu_selection),0<e&&t.movies_menu_selection>=this.current_render_count-5&&this.renderCategoryContent();break;case"aspect_ratio_modal":t.aspect_ratio_selection+=e,t.aspect_ratio_selection<0&&(t.aspect_ratio_selection=0),t.aspect_ratio_selection>=this.aspect_ratio_doms.length&&(t.aspect_ratio_selection=this.aspect_ratio_doms.length-1),this.hoverAspectRatioItem(t.aspect_ratio_selection)}else this.showControlBar(!0)},HandleKey:function(e){
// console.log("Key pressed in VOD Series Player Page: " + e.keyCode);
switch(e.keyCode){case tvKey.MediaFastForward:this.seekTo(30);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.MediaRewind:this.seekTo(-30);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.MediaPause:this.playPauseVideo("pause");break;case tvKey.MediaPlay:this.playPauseVideo("play");break;case tvKey.MediaPlayPause:this.playPauseVideo("");break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.STOP:case tvKey.RETURN:this.goBack()}}},trailer_page={player:null,done:!1,back_url:"home-page",is_paused:!1,is_loading:!1,init:function(e,t){showLoader(!0),this.is_loading=!0,this.back_url=t,this.is_paused=!1,$("#vod-summary-page").addClass("hide"),$("#trailer-player-page").show(),current_route="trailer-page",trailer_page.player=new YT.Player("trailer-player",{height:"100%",width:"100%",videoId:e,events:{onReady:trailer_page.onPlayerReady,onStateChange:trailer_page.onPlayerStateChange}}),$("#trailer-player").on("load",function(){$("#trailer-player").contents().find(".ytp-chrome-top-buttons").hide(),$("#trailer-player").contents().find(".ytp-right-controls").hide(),showLoader(!1),trailer_page.is_loading=!1,$(document.getElementById("trailer-player").contentWindow.document).keydown(function(e){switch(e.keyCode){case tvKey.RETURN:trailer_page.goBack();break;case tvKey.RIGHT:trailer_page.seekTo(5);break;case tvKey.LEFT:trailer_page.seekTo(-5);break;case tvKey.ENTER:trailer_page.playOrPause()}})})},goBack:function(){current_route=this.back_url,this.player.stopVideo(),$("#trailer-player-page").hide(),$("#trailer-player").remove(),$("#trailer-player-page").html('<div id="trailer-player"></div>'),"vod-summary-page"===this.back_url&&$("#vod-summary-page").removeClass("hide"),"series-summary-page"===this.back_url&&$("#series-summary-page").removeClass("hide")},onPlayerReady:function(e){e.target.playVideo()},onPlayerStateChange:function(e){},seekTo:function(e){var t=this.player.getCurrentTime(),t=t+e,e=this.player.getDuration();t<0&&(t=0),e<t&&(t=e),this.player.seekTo(t)},playOrPause:function(){this.is_paused?this.player.playVideo():this.player.pauseVideo(),this.is_paused=!this.is_paused},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.RIGHT:this.seekTo(5);break;case tvKey.LEFT:this.seekTo(-5);break;case tvKey.ENTER:this.playOrPause()}}},series_summary_page={keys:{focused_part:"season_selection",season_selection:0,episode_selection:0},min_btn_index:0,season_doms:[],episode_doms:[],current_season_index:0,hover_season_timer:null,is_loading:!1,prev_route:"",series_video_times:{},is_favourite:!1,init:function(e){this.prev_route=e,this.current_season_index=-1,showLoader(!0),this.is_loading=!0,current_route="series-summary-page",$(".vod-series-background-img").attr("src",""),hideImg($(".vod-series-background-img")),$("#series-summary-release-cast").siblings(".circle").hide(),$("#series-summary-release-date").siblings(".circle").hide(),$("#series-summary-release-genre").siblings(".circle").hide(),$("#season-items-container").html(""),$("#series-summary-episode-items-container").html(""),$("#series-summary-image-wrapper img").attr("src",""),$("#series-summary-name").text(current_series.name),25<current_series.name.length?$("#series-summary-name").css({animation:"scroll-left 10s linear infinite"," padding-left":"100%"}):$("#series-summary-name").css({animation:""," padding-left":""}),$("#series-summary-release-date").text(current_series.releaseDate),current_series.releaseDate&&$("#series-summary-release-date").siblings(".circle").hide(),$("#series-summary-release-genre").text(current_series.genre),current_series.genre&&$("#series-summary-release-genre").siblings(".circle").show(),
// $("#series-summary-release-director").text(current_series.director);
$("#series-summary-release-cast").text(current_series.cast),current_series.cast&&$("#series-summary-release-cast").siblings(".circle").show(),$("#series-summary-description").text(current_series.plot),$("#series-summary-image-wrapper img").attr("src",current_series.cover||HOST+"app_src_min/images/default_movie.png");var e=0,e=void 0===current_series.rating||""===current_series.rating?0:parseFloat(current_series.rating);isNaN(e)&&(e=0),$("#series-rating-container").find(".rating-upper").css({width:10*e+"%"}),$("#series-rating-mark").text(e.toFixed(1)),$("#vod-series-page").addClass("hide"),$("#vod-series-player-page").addClass("hide"),$("#player-movies-modal").modal("hide"),$("#series-summary-page").removeClass("hide"),$("#season-items-container").scrollTop(0),this.series_video_times={};for(var t=SeriesModel.saved_video_times,i=0;i<t.length;i++)if(t[i].stream_id==current_series.series_id){this.series_video_times=t[i].video_times;break}this.is_favourite=SeriesModel.favourite_ids.includes(current_series.series_id),this.is_favourite?$($("#series-summary-favorite-icon")).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'):$($("#series-summary-favorite-icon")).html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'),this.getSeriesInfo()},getSeriesInfo:function(){var l=this,i;"xc"===settings.playlist.playlist_type?$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_series_info&series_id="+current_series.series_id).done(function(e){current_series.info=e.info;var i=e.seasons;if(e.episodes&&(i&&0<i.length||("[object Array]"===Object.prototype.toString.call(e.episodes)?0<e.episodes.length:0<Object.keys(e.episodes).length))){var s=e.episodes;
// Convert array-based episodes to object format if needed
if("[object Array]"===Object.prototype.toString.call(s)){for(var t={},a=0;a<s.length;a++)"[object Array]"===Object.prototype.toString.call(s[a])&&(t[(a+1).toString()]=s[a]);s=t}i&&0!==i.length?i.map(function(e){
// Handle zero-based season numbers
var t=(e.season_number||1).toString();e.episodes=s[t]||[]}):(i=[],Object.keys(s).map(function(e,t){i.push({name:"Season "+(t+1),cover:HOST+"app_src_min/images/series.png",episodes:s[e]})}));var o=i.filter(function(e){return e.episodes&&0<e.episodes.length}),n=Object.keys(s);if(n.length>o.length){for(var a=0;a<o.length;a++)o[a].name="Season "+(a+1);for(var a=o.length;a<n.length;a++)o.push({name:"Season "+(a+1),episodes:s[(a+1).toString()]||[]})}current_series.seasons=o;var r="";current_series.seasons.map(function(e,t){r+='<div class="season-item-container" onmouseenter="series_summary_page.hoverSeason('+t+')"><span><svg width="3rem" height="3rem" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg" fill="#ddd" stroke="#ddd"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g fill="none" fill-rule="evenodd" stroke="#ddd" stroke-linecap="round" stroke-linejoin="round" transform="translate(1 4)"> <path d="m13.5 12.5v-6c0-1.1045695-.8954305-2-2-2h-9c-1.1045695 0-2 .8954305-2 2v6c0 1.1045695.8954305 2 2 2h9c1.1045695 0 2-.8954305 2-2z"></path> <path d="m15.5 12.5v-6.99481259c0-1.65685425-1.3431458-3-3-3-.0017276 0-.0034553 0-.0051829 0l-8.9948171.01554432"></path> <path d="m17.5 10.5v-5.99308345c0-2.209139-1.790861-4-4-4-.0023035 0-.004607 0-.0069106 0l-7.9930894.01381519"></path> </g> </g></svg></span>'+e.name+'<span class="num-of-episodes">'+(e.episodes?e.episodes.length:0)+"</span></div>"}),$("#season-items-container").html(r),$("#series-summary-release-date").text(current_series.info.releaseDate),l.showSeriesInfo()}else showLoader(!1),l.is_loading=!1,showToast("Sorry","No seasons available"),l.goBack()}).fail(function(e){showLoader(!1),l.is_loading=!1,l.goBack()}):"general"===settings.playlist.playlist_type&&(current_series.seasons.map(function(e){e.episodes=current_series.episodes[e.name]}),i="",current_series.seasons.map(function(e,t){i+='<div class="season-item-container"   onmouseenter="series_summary_page.hoverSeason('+t+')"><span><svg width="3rem" height="3rem" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg" fill="#ddd" stroke="#ddd"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g fill="none" fill-rule="evenodd" stroke="#ddd" stroke-linecap="round" stroke-linejoin="round" transform="translate(1 4)"> <path d="m13.5 12.5v-6c0-1.1045695-.8954305-2-2-2h-9c-1.1045695 0-2 .8954305-2 2v6c0 1.1045695.8954305 2 2 2h9c1.1045695 0 2-.8954305 2-2z"></path> <path d="m15.5 12.5v-6.99481259c0-1.65685425-1.3431458-3-3-3-.0017276 0-.0034553 0-.0051829 0l-8.9948171.01554432"></path> <path d="m17.5 10.5v-5.99308345c0-2.209139-1.790861-4-4-4-.0023035 0-.004607 0-.0069106 0l-7.9930894.01381519"></path> </g> </g></svg></span>'+e.name+'<span class="num-of-episodes">'+e.episodes.length+"</span></div>"}),$("#season-items-container").html(i),l.showSeriesInfo())},showSeriesInfo:function(){this.season_doms=$(".season-item-container");var e=current_series.tmdb_id||current_series.tmdb;this.fetchMovieImages(e,current_series.backdrop_path?current_series.backdrop_path[0]:HOST+"app_src_min/images/default_movie_bg.png");try{this.hoverSeason(0),$("#selected-season-name").text(current_series.seasons[0].name),this.showEpisodes()}catch(e){}void 0!==current_series.youtube_trailer&&null!=current_series.youtube_trailer&&""!==current_series.youtube_trailer.trim()?(this.min_btn_index=0,$("#vod-watch-trailer-button").show()):(this.min_btn_index=1,$("#vod-watch-trailer-button").hide()),showLoader(!1),this.is_loading=!1},showEpisodes:function(){var e=this.keys,t,o,n;this.current_season_index!==e.season_selection&&(current_season=current_series.seasons[e.season_selection],t=current_season.episodes,o=this.series_video_times[e.season_selection.toString()]?this.series_video_times[e.season_selection.toString()]:{},void 0!==t&&0<t.length?(n="",t.map(function(e,t){var i="",s=0,i,a,a=(o[t.toString()]&&(i="has-progress",a=o[t.toString()],a.duration)&&(s=100*parseFloat(a.time)/parseFloat(a.duration)+"%"),"");0<Math.floor(parseFloat(s))&&(a=Math.floor(parseFloat(s))+"%"),n+='<div class="episode-item-wrapper"                        onmouseenter="series_summary_page.hoverEpisode('+t+')"                        onclick="series_summary_page.handleMenuClick()"                    ><div class="img-box"><img src="'+(current_series.cover||HOST+"app_src_min/images/default_movie.png")+'" /></div><span>'+(e.title||"Episode "+(t+1))+"</span> <span>"+(e.info.duration_secs?Math.floor(e.info.duration_secs/60)+"min":"")+'</span>   <div class="episode-video-duration-container">                            <div class="episode-video-duration '+i+'">                                <span class="episode-video-progress" style="width: '+s+'"></span>                            </div>                         </div>                         <div class="episode-video-progress-percentage">'+a+"</div>                    </div>"}),$("#series-summary-episode-items-container").html(n),$("#series-summary-episode-items-container").scrollTop(0)):(showToast("Sorry","No episodes available"),$("#series-summary-episode-items-container").html("")),e.episode_selection=0,this.current_season_index=e.season_selection,this.episode_doms=$(".episode-item-wrapper"),$("#selected-season-name").text(current_season.name))},exitPage:function(){var e,t,i,t,e,i;$("#series-summary-page").addClass("hide"),current_route=this.prev_route,"vod-series-page"==this.prev_route?($("#vod-series-page").removeClass("hide"),e=vod_series_page.keys,t=vod_series_page.menu_doms,i=vod_series_page.categories[e.category_selection],this.is_favourite?0==$(t[e.menu_selection]).find(".favourite-badge").length&&(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),$($(t[e.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>')):(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),"favourite"==i.category_id?(this.is_favourite||(vod_series_page.menu_selection=0,vod_series_page.keys.focused_part="category_selection",vod_series_page.hiddenAndShowSidebar(),vod_series_page.hoverCategory(vod_series_page.category_doms[vod_series_page.keys.category_selection]),vod_series_page.showCategoryContent(!0),$(t[e.menu_selection]).remove()),e.focused_part="category_selection",$(vod_series_page.category_doms[e.category_selection]).addClass("active")):$($(t[e.menu_selection]).find(".favourite-badge")).remove())):"search-page"===this.prev_route&&($("#search-page").show(),t=search_page.movie_doms[2],e=search_page.keys,i=e.hor_keys[2],this.is_favourite?0==$(t[i]).find(".favourite-badge").length&&(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),$(t[i]).prepend('<div class="favourite-badge"><i class="fa fa-star"></i></div>')):(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id,"favourite"),$($(t[i]).find(".favourite-badge")).remove()))},goBack:function(){var e=this.keys;"episode_selection"==e.focused_part?(this.hoverSeason(e.season_selection),e.episode_selection=0):this.exitPage()},toggleFavourite:function(){this.is_favourite=!this.is_favourite,this.is_favourite?(SeriesModel.addRecentOrFavouriteMovie(current_series,"favourite"),$("#series-summary-favorite-icon").html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="#ffffff" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>')):(SeriesModel.removeRecentOrFavouriteMovie(current_series.series_id||current_series.stream_id,"favourite"),$("#series-summary-favorite-icon").html('<svg xmlns="http://www.w3.org/2000/svg" style="width: 2rem; height: 2rem;" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>'))},hoverSeason:function(e){var t=this.keys,i=(t.focused_part="season_selection",t.season_selection=e,$(this.episode_doms).removeClass("active"),$(this.season_doms).removeClass("active"),$(this.season_doms[e]).addClass("active"),clearTimeout(this.hover_season_timer),moveScrollPosition($("#season-items-container"),this.season_doms[t.season_selection],"vertical",!1),this);this.hover_season_timer=setTimeout(function(){i.showEpisodes()},300)},hoverEpisode:function(e){var t=this.keys;t.episode_selection=e,t.focused_part="episode_selection",$(this.season_doms).removeClass("active"),$(this.episode_doms).removeClass("active"),$(this.episode_doms[t.episode_selection]).addClass("active"),moveScrollPosition($("#series-summary-episode-items-container"),this.episode_doms[t.episode_selection],"vertical",!1)},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":0<e&&0<this.episode_doms.length&&this.hoverEpisode(t.episode_selection);break;case"episode_selection":e<0&&this.hoverSeason(t.season_selection)}},handleMenuUpDown:function(e){var t=this.keys;switch(t.focused_part){case"season_selection":t.season_selection+=e,t.season_selection<0?t.season_selection=0:t.season_selection>=this.season_doms.length?t.season_selection=this.season_doms.length-1:this.hoverSeason(t.season_selection);break;case"episode_selection":t.episode_selection+=e,t.episode_selection<0&&(t.episode_selection=0),t.episode_selection>=this.episode_doms.length?t.episode_selection=this.episode_doms.length-1:this.hoverEpisode(t.episode_selection)}},handleMenuClick:function(){var e=this.keys,t;"episode_selection"===e.focused_part&&(current_season=current_series.seasons[e.season_selection],t=current_season.episodes,current_episode=t[e.episode_selection],vod_series_player_page.makeEpisodeDoms("episode-page"),vod_series_player_page.init(current_episode,"series","episode-page","",!0),vod_series_player_page.keys.episode_selection=e.episode_selection)},HandleKey:function(e){if(this.is_loading)e.keyCode==tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.YELLOW:this.toggleFavourite()}},fetchMovieImages:function(e,t){var i="/tv/"+e+"/images?api_key="+tmdb_api_key,s;e&&0!=e&&null!=e&&vod_series_page.isTMDBAllowed&&$.getJSON(tmdb_prefix_url+i,function(e){0<e.backdrops.length&&(t=tmdb_img_url+"w1280"+e.backdrops[0].file_path),0<e.logos.length&&(s=tmdb_img_url+"w500"+e.logos[0].file_path),s?($("#series-summary-log-title").attr("src",s).show(),$("#series-summary-name").hide()):($("#series-summary-log-title").hide(),$("#series-summary-name").show());try{$(".vod-series-background-img").attr("src",t).show()}catch(e){$(".vod-series-background-img").attr("src",HOST+"app_src_min/images/default_movie_bg.png").show(),showImg($(".vod-series-background-img"))}$(".vod-series-background-img-overlay").show()})}},vod_series_page={player:null,channel_number_timer:null,channel_num:0,movies:[],initiated:!1,all_categories:[],categories:[],category_hover_timer:null,category_hover_timeout:300,current_backdrop:"",keys:{focused_part:"category_selection",//"right_screen_part", search_selection
prev_focused_part:"category_selection",category_selection:0,menu_selection:0,search_selection:-1,video_control:0,top_menu_selection:0,sort_selection:0,category_search_selection:"",modal_focus_index:0},vod_theme:"",modal_visible:!1,category_doms:[],menu_doms:[],top_menu_doms:$(".vod-series-top-menu-item"),current_movie_type:"movie",sort_key:"vod_sort",search_key_timer:"",search_key_timout:400,category_search_timer:null,movie_hover_timer:null,category_search_timeout:400,current_render_count:0,render_count_increment:40,is_drawing:!1,prev_keyword:"",prev_categorY_keyword:"",prev_dom:null,prev_selected_category:null,sort_doms:$(".sort-modal-item"),category_search_dom:$("#vod-series-category-search"),current_category:"",currentlyActiveRequest:null,requestAborted:!1,page_theme:"n",isTMDBAllowed:!1,showTrailerTimeout:null,preventShowingTrailer:!1,init:function(e,t){this.getTMDBChoice(),$(".vod-series-summary-section-img-darken").show(),this.prev_dom=null,this.is_drawing=!1;var i=this.keys,s=(this.prev_categorY_keyword="",$(this.category_search_dom).val(""),this.current_movie_type=e,[]);if($("#movie-image").css("transition","0.3s ease-in-out"),$("#movie-image").css("opacity",0),$("#vod-series-top-menu-themes").show(),$("#vod-series-top-menu-favorite").show(),"vod"===e)this.insertSidebarTitle("Movies"),this.sort_key="vod_sort",s=VodModel.getCategories(!1,!0);else if("series"===e)this.insertSidebarTitle("Series"),this.sort_key="series_sort",s=SeriesModel.getCategories(!1,!0);else if("replay"===e){
// Check if the current playlist supports replay functionality (XC)
if(this.insertSidebarTitle("Replay"),
// Hide UI elements that aren't relevant for replay content
$("#vod-series-top-menu-themes").hide(),$("#vod-series-top-menu-favorite").hide(),$("#movie-image").hide(),"xc"!=settings.playlist.playlist_type)return void showToast("Sorry","Replay not available for current playlist");this.setIsLoading(!0),this.sort_key="live_sort";
// Get all categories from the LiveModel
var e=LiveModel.getCategories(!1,!1),
// Process the categories to filter only those with replay-enabled content:
s=e.map(function(e){
// For each category, filter only movies that have TV archive enabled
// tv_archive != 0 indicates replay is available
// tv_archive_duration != 0 indicates there is actual content to replay
var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));
// Create a deep copy of the category element
// Replace the movies array with only the filtered replay-enabled movies
return e.movies=t,e}).filter(function(e){return 0<e.movies.length});
// If no categories with replay content were found, show error message
if(0==s.length)return showToast("Sorry","Replay not available for current playlist"),void this.setIsLoading(!1);this.setIsLoading(!1)}$("#vod-series-categories-container").html(""),$("#home-page").addClass("hide"),$("#vod-series-page").removeClass("hide"),current_route="vod-series-page",this.categories=s.filter(function(e){return!0}),this.all_categories=s,this.renderCategories(),$("#vod-series-cover .movie-info").hide(),i.focused_part="category_selection",i.category_selection=0,this.current_render_count=0,$("#vod-series-menus-container").html(""),this.current_category_index=-1;for(var a=0,o;a<this.categories.length;a++)if(0<this.categories[a].movies.length){i.category_selection=a;break}this.showCategoryContent(),this.hoverCategory(this.category_doms[i.category_selection],t),t&&(
// Click on the category of search
this.handleMenuClick(),o=null,this.menu_doms.each(function(){
// Find the title element within this menu item
var e=$(this).find(".vod-series-menu-item-title"),e=e.text().trim();
// Get and trim the text
// Check for exact match with targetMovie.title
if(e===t.name)
// Found the matching element
return o=$(this),!1}),o)&&this.hoverMovieItem(o),this.fetchHoverMovie(0),$(this.category_doms[i.category_selection]).addClass("current"),this.prev_selected_category=this.category_doms[i.category_selection],this.setPageTheme()},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":e.focused_part="category_selection",this.hoverCategory(this.category_doms[e.category_selection]);break;case"category_selection":$(this.category_search_dom).removeClass("active");case"category_search_selection":current_route="home-page",this.cleanupTrailerPlayer(),$("#vod-series-page").addClass("hide"),$("#home-page").removeClass("hide");break;case"top_menu_selection":$("#vod-series-search-input").blur(),e.focused_part="category_selection",this.hoverCategory(this.category_doms[e.category_selection]);break;case"sort_selection":$("#sort-modal-container").removeClass("visible"),this.hoverTopMenu(1);break;case"theme_vod_modal":this.hideThemeModal();break;case"loading":this.setIsLoading(!1)}this.hiddenAndShowSidebar()},setIsLoading:function(e){var t=this.keys;e=e||!1,this.is_drawing=e,showLoader(e),1==e?(t.prev_focused_part=t.focused_part,t.focused_part="loading"):(t.focused_part=t.prev_focused_part,null!=this.currentlyActiveRequest&&(this.requestAborted=!0,this.currentlyActiveRequest.abort(),this.currentlyActiveRequest=null))},getTMDBChoice:function(){var e=localStorage.getItem(storage_id+"tmdb_choice");this.isTMDBAllowed="off"!=e},setPageTheme:function(){this.page_theme=localStorage.getItem(storage_id+"vod_theme"),"replay"!=this.current_movie_type&&this.isTMDBAllowed||(this.page_theme="n"),"n"==this.page_theme?(this.keys.modal_focus_index=0,$("#vod-series-cover").addClass("d-none"),$("#vod-series-cover").removeClass("d-block"),$("#vod-series-menus-container").css("height","62rem"),$("#vod-series-current-category").css("margin-top","-3rem")):(this.keys.modal_focus_index=1,$("#vod-series-cover").addClass("d-block"),$("#vod-series-cover").removeClass("d-none"),$("#vod-series-menus-container").css("height","30rem"),$("#vod-series-current-category").css("margin-top","0"))},getCategoryIcon:function(e){switch(e){case"recent":return'<svg fill="#eee" width="3rem" height="3rem" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke="#eee"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M19.2928932,7 L17.1464466,4.85355339 C16.9511845,4.65829124 16.9511845,4.34170876 17.1464466,4.14644661 C17.3417088,3.95118446 17.6582912,3.95118446 17.8535534,4.14644661 L20.8535534,7.14644661 C21.0488155,7.34170876 21.0488155,7.65829124 20.8535534,7.85355339 L17.8535534,10.8535534 C17.6582912,11.0488155 17.3417088,11.0488155 17.1464466,10.8535534 C16.9511845,10.6582912 16.9511845,10.3417088 17.1464466,10.1464466 L19.2928932,8 L5.5,8 C4.67157288,8 4,8.67157288 4,9.5 L4,15.5 C4,16.3284271 4.67157288,17 5.5,17 L10.5,17 C10.7761424,17 11,17.2238576 11,17.5 C11,17.7761424 10.7761424,18 10.5,18 L5.5,18 C4.11928813,18 3,16.8807119 3,15.5 L3,9.5 C3,8.11928813 4.11928813,7 5.5,7 L19.2928932,7 Z"></path> </g></svg>';case"favourite":return'<svg fill="#eee" width="3rem" height="3rem" viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg" stroke="#eee"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M476 801l-181 95q-18 10-36.5 4.5T229 879t-7-36l34-202q2-12-1.5-24T242 596L95 453q-15-14-15.5-33.5T91 385t32-18l203-30q12-2 22-9t16-18l90-184q10-18 28-25t36 0 28 25l90 184q6 11 16 18t22 9l203 30q20 3 32 18t11.5 34.5T905 453L758 596q-8 9-12 21t-2 24l34 202q4 20-7 36t-29.5 21.5T705 896l-181-95q-11-6-24-6t-24 6z"></path></g></svg>';case"newly_added":case"recently_modified":return'<svg width="3rem" height="3rem" viewBox="0 0 801 565" fill="none" xmlns="http://www.w3.org/2000/svg"><rect y="6" width="800" height="551" rx="77" fill="black"/><path d="M60.4735 564.375H739.541C772.949 564.375 800.014 537.295 800.014 503.902V60.4735C800.014 27.0803 772.949 0 739.541 0H60.4735C27.0803 0 0 27.0803 0 60.4735V503.902C0 537.295 27.0803 564.375 60.4735 564.375ZM446.563 521.927H353.422V464.385H446.563V521.927ZM668.517 43.8277H761.658V101.37H668.517V43.8277ZM665.76 464.385H758.915V521.927H665.76V464.385ZM512.334 43.8277H605.489V101.37H512.334V43.8277ZM509.591 464.385H602.746V521.927H509.591V464.385ZM356.18 43.8277H449.321V101.37H356.18V43.8277ZM420.5 381.547L512.334 359.672C544.798 375.912 502.407 295.358 469.943 311.583L330.057 381.547C297.593 397.772 401.527 417.872 401.527 381.547H469.943C469.928 345.237 388.021 365.322 420.5 381.547ZM200.011 43.8277H293.166V101.37H200.011V43.8277ZM197.268 464.385H290.409V521.927H197.268V464.385ZM43.8422 43.8277H136.998V101.37H43.8422V43.8277ZM41.0993 464.385H134.255V521.927H41.0993V464.385Z" fill="white"/><path d="M401.5 395C387.56 395 376 383.178 376 368.923V195.077C376 180.822 387.56 169 401.5 169C415.44 169 427 180.822 427 195.077V368.923C427 383.178 415.44 395 401.5 395Z" fill="black"/><path d="M486.923 308H313.077C298.822 308 287 296.213 287 282C287 267.787 298.822 256 313.077 256H486.923C501.178 256 513 267.787 513 282C513 296.213 501.178 308 486.923 308Z" fill="black"/></svg>';case"top_rated":return'<svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>icon/24/icon-top10</title> <desc>Created with Sketch.</desc> <defs> </defs> <g id="Output-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="out" transform="translate(-677.000000, -105.000000)" fill="#ffffff"> <path d="M692.707766,121.63582 C692.667766,121.97982 692.603766,122.27682 692.516766,122.52382 C692.427766,122.77182 692.308766,122.96382 692.155766,123.09982 C692.003766,123.23682 691.815766,123.30382 691.592766,123.30382 C691.367766,123.30382 691.182766,123.23682 691.033766,123.09982 C690.885766,122.96382 690.766766,122.77182 690.674766,122.52382 C690.581766,122.27682 690.516766,121.97982 690.476766,121.63582 C690.436766,121.29182 690.415766,120.91182 690.415766,120.49582 C690.415766,120.07982 690.436766,119.70182 690.476766,119.36182 C690.516766,119.02182 690.581766,118.72782 690.674766,118.47982 C690.766766,118.23182 690.885766,118.03982 691.033766,117.90382 C691.182766,117.76782 691.367766,117.69882 691.592766,117.69882 C691.815766,117.69882 692.003766,117.76782 692.155766,117.90382 C692.308766,118.03982 692.427766,118.23182 692.516766,118.47982 C692.603766,118.72782 692.667766,119.02182 692.707766,119.36182 C692.747766,119.70182 692.768766,120.07982 692.768766,120.49582 C692.768766,120.91182 692.747766,121.29182 692.707766,121.63582 L692.707766,121.63582 Z M693.793766,117.28482 C693.261766,116.53782 692.527766,116.16382 691.592766,116.16382 C691.136766,116.16382 690.724766,116.25982 690.355766,116.45082 C689.987766,116.64382 689.671766,116.92382 689.407766,117.29182 C689.144766,117.65982 688.941766,118.11182 688.801766,118.64782 C688.661766,119.18382 688.591766,119.79982 688.591766,120.49582 C688.591766,121.89582 688.857766,122.96982 689.390766,123.71782 C689.921766,124.46582 690.655766,124.83982 691.592766,124.83982 C692.527766,124.83982 693.261766,124.46582 693.793766,123.71782 C694.325766,122.96982 694.592766,121.89582 694.592766,120.49582 C694.592766,119.10382 694.325766,118.03382 693.793766,117.28482 L693.793766,117.28482 Z M683.947766,119.46382 C684.228766,119.36682 684.515766,119.25382 684.811766,119.12182 C685.107766,118.98982 685.375766,118.84382 685.615766,118.68382 L685.615766,124.67182 L687.403766,124.67182 L687.403766,116.35582 L686.155766,116.35582 C685.979766,116.53982 685.781766,116.71382 685.561766,116.87782 C685.341766,117.04182 685.111766,117.19782 684.872766,117.34582 C684.631766,117.49382 684.385766,117.62982 684.133766,117.75382 C683.881766,117.87782 683.639766,117.98782 683.407766,118.08382 L683.947766,119.46382 Z M693.703766,111.57882 C693.850766,111.60582 693.977766,111.64882 694.085766,111.70882 C694.192766,111.76982 694.276766,111.85382 694.337766,111.96082 C694.397766,112.06882 694.427766,112.20082 694.427766,112.36082 C694.427766,112.69182 694.313766,112.91582 694.085766,113.03482 C693.856766,113.15482 693.529766,113.21382 693.105766,113.21382 L692.677766,113.21382 L692.677766,111.56182 C692.822766,111.54782 693.007766,111.54082 693.231766,111.54082 C693.399766,111.54082 693.556766,111.55382 693.703766,111.57882 L693.703766,111.57882 Z M692.478766,110.80282 C692.228766,110.81982 692.001766,110.85082 691.796766,110.89782 L691.796766,115.67782 L692.677766,115.67782 L692.677766,113.96982 L693.119766,113.96982 C693.473766,113.96982 693.789766,113.93982 694.064766,113.87882 C694.340766,113.81882 694.573766,113.72382 694.764766,113.59582 C694.956766,113.46682 695.101766,113.30182 695.202766,113.09882 C695.301766,112.89582 695.352766,112.65182 695.352766,112.36682 C695.352766,111.82182 695.165766,111.41982 694.789766,111.16282 C694.413766,110.90682 693.873766,110.77882 693.168766,110.77882 C692.958766,110.77882 692.728766,110.78582 692.478766,110.80282 L692.478766,110.80282 Z M687.491766,112.52882 C687.556766,112.31382 687.651766,112.12882 687.775766,111.97482 C687.898766,111.82182 688.049766,111.70182 688.226766,111.61782 C688.404766,111.53382 688.604766,111.49182 688.828766,111.49182 C689.047766,111.49182 689.246766,111.53382 689.423766,111.61782 C689.600766,111.70182 689.751766,111.82082 689.875766,111.97182 C689.998766,112.12282 690.092766,112.30782 690.158766,112.52482 C690.223766,112.74082 690.256766,112.98382 690.256766,113.24882 C690.256766,113.51482 690.223766,113.75682 690.158766,113.97382 C690.092766,114.19082 689.998766,114.37482 689.875766,114.52682 C689.751766,114.67782 689.600766,114.79582 689.423766,114.87982 C689.246766,114.96382 689.047766,115.00582 688.828766,115.00582 C688.604766,115.00582 688.404766,114.96382 688.226766,114.87982 C688.049766,114.79582 687.898766,114.67782 687.775766,114.52682 C687.651766,114.37482 687.556766,114.19082 687.491766,113.97382 C687.426766,113.75682 687.393766,113.51482 687.393766,113.24882 C687.393766,112.98382 687.426766,112.74282 687.491766,112.52882 L687.491766,112.52882 Z M690.991766,112.15382 C690.865766,111.83882 690.696766,111.57282 690.483766,111.35982 C690.271766,111.14482 690.022766,110.98382 689.738766,110.87582 C689.453766,110.76882 689.153766,110.71482 688.835766,110.71482 C688.518766,110.71482 688.217766,110.76882 687.932766,110.87582 C687.647766,110.98382 687.397766,111.14482 687.179766,111.35982 C686.963766,111.57282 686.791766,111.83882 686.665766,112.15382 C686.539766,112.46882 686.476766,112.83382 686.476766,113.24882 C686.476766,113.66382 686.539766,114.03082 686.665766,114.34782 C686.791766,114.66482 686.960766,114.93082 687.173766,115.14282 C687.385766,115.35482 687.634766,115.51482 687.922766,115.62182 C688.209766,115.72982 688.513766,115.78282 688.835766,115.78282 C689.157766,115.78282 689.460766,115.72982 689.745766,115.62182 C690.029766,115.51482 690.278766,115.35482 690.490766,115.14282 C690.703766,114.93082 690.871766,114.66482 690.994766,114.34782 C691.118766,114.03082 691.179766,113.66382 691.179766,113.24882 C691.179766,112.83382 691.117766,112.46882 690.991766,112.15382 L690.991766,112.15382 Z M682.647766,110.82682 L682.647766,111.58982 L684.138766,111.58982 L684.138766,115.67782 L685.027766,115.67782 L685.027766,111.58982 L686.518766,111.58982 L686.518766,110.82682 L682.647766,110.82682 Z M689.613766,107.62982 L690.173766,107.20582 C690.659766,106.83882 691.355766,106.97782 691.663766,107.50182 L692.019766,108.10782 C692.249766,108.50082 692.712766,108.69182 693.152766,108.57782 L693.832766,108.40082 C694.421766,108.24782 695.011766,108.64182 695.095766,109.24482 L695.192766,109.94082 C695.255766,110.39082 695.609766,110.74482 696.059766,110.80782 L696.755766,110.90482 C697.358766,110.98782 697.752766,111.57882 697.599766,112.16782 L697.422766,112.84782 C697.308766,113.28782 697.499766,113.75082 697.891766,113.98082 L698.497766,114.33682 C699.022766,114.64482 699.161766,115.34082 698.794766,115.82682 L698.370766,116.38682 C698.096766,116.74982 698.096766,117.25082 698.370766,117.61282 L698.794766,118.17382 C699.161766,118.65882 699.022766,119.35582 698.497766,119.66382 L697.891766,120.01982 C697.499766,120.24982 697.308766,120.71282 697.422766,121.15282 L697.599766,121.83282 C697.752766,122.42082 697.358766,123.01182 696.755766,123.09582 L696.059766,123.19282 C695.609766,123.25482 695.255766,123.60882 695.192766,124.05982 L695.095766,124.75582 C695.011766,125.35782 694.421766,125.75282 693.832766,125.59982 L693.152766,125.42282 C692.712766,125.30782 692.249766,125.49982 692.019766,125.89182 L691.663766,126.49782 C691.355766,127.02282 690.659766,127.16082 690.173766,126.79382 L689.613766,126.37082 C689.250766,126.09682 688.749766,126.09682 688.386766,126.37082 L687.826766,126.79382 C687.340766,127.16082 686.644766,127.02282 686.336766,126.49782 L685.980766,125.89182 C685.750766,125.49982 685.287766,125.30782 684.847766,125.42282 L684.167766,125.59982 C683.578766,125.75282 682.988766,125.35782 682.904766,124.75582 L682.807766,124.05982 C682.744766,123.60882 682.390766,123.25482 681.940766,123.19282 L681.244766,123.09582 C680.641766,123.01182 680.247766,122.42082 680.400766,121.83282 L680.577766,121.15282 C680.691766,120.71282 680.500766,120.24982 680.108766,120.01982 L679.502766,119.66382 C678.977766,119.35582 678.838766,118.65882 679.205766,118.17382 L679.629766,117.61282 C679.903766,117.25082 679.903766,116.74982 679.629766,116.38682 L679.205766,115.82682 C678.838766,115.34082 678.977766,114.64482 679.502766,114.33682 L680.108766,113.98082 C680.500766,113.75082 680.691766,113.28782 680.577766,112.84782 L680.400766,112.16782 C680.247766,111.57882 680.641766,110.98782 681.244766,110.90482 L681.940766,110.80782 C682.390766,110.74482 682.744766,110.39082 682.807766,109.94082 L682.904766,109.24482 C682.988766,108.64182 683.578766,108.24782 684.167766,108.40082 L684.847766,108.57782 C685.287766,108.69182 685.750766,108.50082 685.980766,108.10782 L686.336766,107.50182 C686.644766,106.97782 687.340766,106.83882 687.826766,107.20582 L688.386766,107.62982 C688.749766,107.90382 689.250766,107.90382 689.613766,107.62982 L689.613766,107.62982 Z" id="path"> </path> </g> </g> </g></svg>';default:return""}},createCategoryItemHTML:function(e,t,i){var s="",a="vod-series-category-item"+(i?" has-icon":"");switch(e.category_id){case"recent":s="continue-watching";break;case"favourite":s="favourites";break;case"newly_added":s="newly-added";break;case"top_rated":s="top-rated"}return s?'<div class="'+a+'"data-index="'+t+'" onmouseenter="vod_series_page.hoverCategory(this)" onclick="vod_series_page.handleMenuClick('+t+')"><span class="vod-series-category-item-name">'+i+'<span style="margin-left:.7rem" data-word_code="'+s+'">'+e.category_name+'</span></span><span class="vod-series-category-item-count">'+e.movies.length+"</span></div>":'<div class="'+a+'"data-index="'+t+'" onmouseenter="vod_series_page.hoverCategory(this)" onclick="vod_series_page.handleMenuClick('+t+')"><span class="vod-series-category-item-name">'+i+'<span style="margin-left:.7rem">'+e.category_name+'</span></span><span class="vod-series-category-item-count">'+e.movies.length+"</span></div>"},renderCategories:function(){var e="",s=this,// Preserve 'this' context
e=this.categories.map(function(e,t){var i=s.getCategoryIcon(e.category_id);return s.createCategoryItemHTML(e,t,i)}).join("");// Join the array of strings into a single string
$("#vod-series-categories-container").html(e),this.category_doms=$(".vod-series-category-item")},showCategoryContent:function(e){e=e||!1;var t=this.keys,e,i,s;
// Check if the current category is already selected, if so, return and do nothing
this.current_category_index===t.category_selection&&!e||(e=this.categories[t.category_selection],this.current_category=e,
// Reset the current render count (used to control how many items are displayed)
this.current_render_count=0,
// Clear the HTML content inside the VOD (Video on Demand) container
$("#vod-series-menus-container").html(""),
// Reset the previous keyword used for searching
this.prev_keyword="",
// Clear the search input field in the UI
$("#vod-series-search-input").val(""),i=e.movies,s=settings[this.current_movie_type+"_sort"],
// If the current movie type is "replay", use the live_sort setting instead
"replay"===this.current_movie_type&&(s=settings.live_sort),
// If the sort key is "added" or if the current movie type is "series",
// change the sort key to "last_modified" (e.g., sorting series by when they were last modified)
"added"===s&&"series"===this.current_movie_type&&(s="last_modified"),
// Sort the movies based on the selected sort key
this.movies=getSortedMovies(i,s),
// Render the sorted category content in the UI
this.renderCategoryContent(),
// Reset the scroll position of the VOD container to the top
$("#vod-series-menus-container").scrollTop(0),
// Reset the menu selection to the first item
t.menu_selection=0,
// Update the current category index to reflect the newly selected category
this.current_category_index=t.category_selection,
// Update the UI to show the name of the currently selected category
$("#vod-series-current-category").text(e.category_name));
// Get the selected category using the current selection key
},renderCategoryContent:function(){var u=this,m="",p=HOST+"app_src_min/images/default_movie.png",g="stream_icon",v=(// Default key for movie icons
// Update the key if the current content type is series
"series"===this.current_movie_type&&(g="cover"),
// Update the default icon if the current content type is replay
"replay"===this.current_movie_type&&(p=default_movie_icon),this.current_movie_type),u,f,// Array to hold favorite movie IDs
y,// Default key for movie ID
e,// Saved video progress data
b,k;// Store the current movie type
// Check if there are more movies to render
this.current_render_count<this.movies.length&&(this.setIsLoading(!0),u=this,// Store reference to 'this' for later use in timeout
// Set a timeout to stop drawing and hide the loader after 1 second
setTimeout(function(){
// Reset drawing state and hide loading indicator
u.setIsLoading(!1)},1e3),f=[],y="stream_id",e=null,b={},k=this.current_movie_type,// Current movie type
// If the movie type is VOD or movie, load the relevant data from VodModel
"vod"===k||"movie"===k?(f=VodModel.favourite_ids,// Get favorite IDs for VOD
e=VodModel.saved_video_times,// Get saved video times
// Create a map of saved video times by stream ID
e.map(function(e){b[e.stream_id.toString()]=e})):"series"===k&&(y=SeriesModel.movie_key,// Get the key for series IDs
f=SeriesModel.favourite_ids,// Get favorite IDs for series
e=SeriesModel.saved_video_times,// Get saved video times
// Create a map of saved video times by stream ID
e.map(function(e){b[e.stream_id.toString()]=e})),
// Loop through the movies to be rendered in this batch
this.movies.slice(this.current_render_count,// Start from the current render count
this.current_render_count+this.render_count_increment).map(function(e,t){var i=f.includes(e[y]),s="",// Progress indicator class
a=0,o=e[y].toString(),s,o,n,r,l,c,d,h;// Check if the movie is a favorite
if(// Get the movie's stream ID
// Check if there's saved progress for this movie
b[o]&&(s="has-progress",o=b[o],o.duration)&&"vod"==k&&(a=100*parseFloat(o.time)/parseFloat(o.duration)+"%"),n=localStorage.getItem(storage_id+settings.playlist.id+"_saved_series_times"))
// Find the saved times of the movie
for(var
// Get saved times from local storage
n=JSON.parse(n),_=0;_<n.length;_++)n[_].stream_id==e.series_id&&(
// Store the recent episode and season from the found saved time
r=n[_].video_times.recent.ep,l=n[_].video_times.recent.s,c="");
// If ep or season not found, hide the label
l&&r||(c="hidden"),"movie"==e.stream_type?d=utilities.isNewlyAdded(e.added)?"vod-new-label ":"vod-new-label hidden":utilities.isRecentlyModifiedSeries(e.last_modified)?(d="vod-new-label ",h="shift-label-to-bottom"):d="vod-new-label hidden",
// Generate the HTML for the movie item
"top_rated"==u.current_category.category_id?($("#vod-series-menus-container").addClass("one-line"),m+='<div class="vod-series-menu-item-container '+v+'" data-stream_id="'+e.series_id+'"                        data-index="'+(u.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this, true)"                        onclick="vod_series_page.handleMenuClick()"                    >                    <img src="'+HOST+"app_src_min/images/numbers/"+(t+1)+'.png" class="vod_series_rate_number_image" />\n                        <div class="vod-series-menu-item"><div class="'+d+'">NEW</div><div class="series-latest-watched '+c+" "+h+'">S'+l+"EP"+r+"</div>"+(i?'<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>':"")+'<div class="vod-series-icon-wrapper">                                <img class="vod-series-icon" src="'+e[g]+'" onerror="this.src=\''+p+'\'">                            </div>                            <div class="vod-series-menu-item-title-wrapper">                                <div class="vod-series-menu-item-title max-line-2">'+e.name+'</div>             <div class="vod-series-video-duration-container">                            <div class="vod-series-video-duration '+k+" "+s+'">                                <span class="vod-series-video-progress" style="width: '+a+'"></span>                            </div>                             </div>                             </div>                                                   </div>                    </div>'):($("#vod-series-menus-container").removeClass("one-line"),m+='<div class="vod-series-menu-item-container '+v+'" data-stream_id="'+e.series_id+'"                        data-index="'+(u.current_render_count+t)+'"                        onmouseenter="vod_series_page.hoverMovieItem(this)"                        onclick="vod_series_page.handleMenuClick()"                    >                        <div class="vod-series-menu-item"><div class="'+d+'">NEW</div><div class="series-latest-watched '+c+" "+h+'">S'+l+"EP"+r+"</div>"+(i?'<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>':"")+'<div class="vod-series-icon-wrapper">                                <img class="vod-series-icon" src="'+e[g]+'" onerror="this.src=\''+p+'\'">                            </div>                            <div class="vod-series-menu-item-title-wrapper">                                <div class="vod-series-menu-item-title max-line-2">'+e.name+'       </div>             <div class="vod-series-video-duration-container">                            <div class="vod-series-video-duration '+k+" "+s+'">                                <span class="vod-series-video-progress" style="width: '+a+'"></span>                            </div>                             </div>                             </div>                                                   </div>                    </div>')}),
// Increment the render count by the batch size
this.current_render_count+=this.render_count_increment,
// Append the generated HTML content to the container
$("#vod-series-menus-container").append(m),
// Update the DOM elements for the newly rendered menu items
this.menu_doms=$("#vod-series-menus-container .vod-series-menu-item-container"))},addOrRemoveFav:function(){var e=this.keys;if("menu_selection"===e.focused_part){var t=this.menu_doms,i=this.movies,s,a,s=("vod"===this.current_movie_type||"movie"===this.current_movie_type?(a=VodModel.movie_key,VodModel):(a=SeriesModel.movie_key,SeriesModel)).favourite_ids;if(s.includes(i[e.menu_selection][a])){$($(t[e.menu_selection]).find(".favourite-badge")).remove(),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).removeRecentOrFavouriteMovie(i[e.menu_selection][a],"favourite");var o=this.categories[this.current_category_index],t;"favourite"===o.category_id&&($(t[e.menu_selection]).remove(),t=$("#vod-series-menus-container .vod-series-menu-item-container"),0<t.length?(t.map(function(e,t){$(t).data("index",e)}),this.menu_doms=t,e.menu_selection>=this.menu_doms.length&&(e.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[e.menu_selection])):this.hoverCategory(this.category_doms[e.category_selection]))}else{var o=this.categories[e.category_selection];if(VodModel.isProtected(o))return void showToast("Parental safety","Adding protected content to favourites is not allowed.");$($(t[e.menu_selection]).find(".vod-series-menu-item")).prepend('<div class="favourite-badge"><svg style="width: 2rem; height: 2rem;" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="10" fill="#939393" fill-opacity="0.34"/><g clip-path="url(#clip0_431_5940)"><path d="M12.1394 6.91878L11.9241 6.87214L11.8132 6.6818L9.83345 3.28328C9.83343 3.28326 9.83342 3.28324 9.83341 3.28321C9.79948 3.22502 9.75089 3.17673 9.69248 3.14317C9.63405 3.10959 9.56784 3.09192 9.50045 3.09192C9.43306 3.09192 9.36684 3.10959 9.30841 3.14317C9.25001 3.17673 9.20142 3.22502 9.16749 3.28321C9.16747 3.28324 9.16746 3.28326 9.16745 3.28328L7.1877 6.6818L7.07681 6.87214L6.86153 6.91878L3.0167 7.75178C2.95081 7.76606 2.88981 7.79737 2.83981 7.84259C2.7898 7.8878 2.75253 7.94535 2.73172 8.00947C2.7109 8.0736 2.70728 8.14206 2.72119 8.20803C2.73511 8.27399 2.76609 8.33516 2.81104 8.38541L2.81117 8.38556L5.43201 11.3181L5.57887 11.4824L5.55665 11.7017L5.15998 15.6152L5.15997 15.6153C5.15316 15.6824 5.16407 15.7501 5.1916 15.8116C5.21913 15.8732 5.26233 15.9264 5.31687 15.966C5.37142 16.0057 5.43541 16.0303 5.50245 16.0375C5.5695 16.0446 5.63725 16.0341 5.69894 16.0069L5.69903 16.0068L9.29878 14.4202L9.50045 14.3313L9.70211 14.4202L13.3019 16.0068L13.302 16.0069C13.3636 16.0341 13.4314 16.0446 13.4984 16.0375C13.5655 16.0303 13.6295 16.0057 13.684 15.966C13.7386 15.9264 13.7818 15.8732 13.8093 15.8116C13.8368 15.7501 13.8477 15.6824 13.8409 15.6153L13.8409 15.6152L13.4442 11.7017L13.422 11.4824L13.5688 11.3181L16.1896 8.38503L12.1394 6.91878ZM12.1394 6.91878L15.9839 7.75172M12.1394 6.91878L15.9839 7.75172M15.9839 7.75172C15.984 7.75174 15.9841 7.75176 15.9842 7.75178M15.9839 7.75172L15.9842 7.75178M15.9842 7.75178C16.0499 7.76611 16.1107 7.7974 16.1606 7.84253C16.2106 7.88773 16.2478 7.94523 16.2686 8.00931C16.2894 8.07338 16.2931 8.14179 16.2792 8.20772C16.2654 8.27358 16.2345 8.33466 16.1897 8.38489L15.9842 7.75178Z" fill="#FFE600" stroke="#FFE500"/></g><defs><clipPath id="clip0_431_5940"><rect  style="height:1rem;width:1rem" fill="white" transform="translate(1 1)"/></clipPath></defs></svg></div>'),("vod"===this.current_movie_type||"movie"===this.current_movie_type?VodModel:SeriesModel).addRecentOrFavouriteMovie(i[e.menu_selection],"favourite")}this.updateFavouriteOrRecentCount("favourite")}},goToSearchPage:function(){var e=this.current_movie_type;search_page.init("vod-series-page",e)},categoryKeywordChange:function(){clearTimeout(this.category_search_timer);var s=this;this.category_search_timer=setTimeout(function(){var t=$(s.category_search_dom).val(),e,i,i;s.prev_category_keyword!==t&&(e=s.all_categories.filter(function(e){return!0}),e.sort(function(e,t){return e.category_name.localeCompare(t.category_name)}),i=[],i=""===t?s.all_categories:(t=t.toLowerCase(),e.filter(function(e){return e.category_name.toLowerCase().includes(t)})),s.categories=i,s.prev_category_keyword=t,$("#vod-series-categories-container").html(""),s.renderCategories())},this.category_search_timeout)},showSortModal:function(){var i=settings[this.current_movie_type+"_sort"],s=0;this.sort_doms.map(function(e,t){var t=$(t).data("sort_key");t==i&&(s=e)}),$("#sort-modal-container").addClass("visible"),this.hoverSortItem(s)},updateFavouriteOrRecentCount:function(e){
// var categories = this.categories;
// for (var i = 0; i < categories.length; i++) {
//   if (categories[i].category_id == kind) {
//     $(this.category_doms[i])
//       .find(".vod-series-category-item-count")
//       .text(categories[i].movies.length);
//     break;
//   }
// }
},hoverSortItem:function(e){var t=this.keys;t.focused_part="sort_selection",t.sort_selection=e,$(this.prev_dom).removeClass("active"),$(this.sort_doms[e]).addClass("active"),this.prev_dom=this.sort_doms[e],this.hiddenAndShowSidebar()},hoverCategorySearch:function(){$(this.prev_dom).removeClass("active"),$(this.category_search_dom).addClass("active"),this.prev_dom=this.category_search_dom,this.keys.focused_part="category_search_selection",this.hiddenAndShowSidebar()},hoverCategory:function(e,t){var i=this.keys,s;if(t){
// Focus on categories
i.focused_part="category_selection";for(
// Find index of target category
var s=0,a=0;a<this.categories.length;a++)if(t.category_id==this.categories[a].category_id){s=a;break}}else var s=$(e).data("index");i.focused_part="category_selection",i.category_selection=s,$(this.prev_dom).removeClass("active"),$(this.category_doms[s]).addClass("active"),this.prev_dom=this.category_doms[s],moveScrollPosition($("#vod-series-categories-container"),this.category_doms[s],"vertical",!1),
// this.fetchHoverMovie();
this.hiddenAndShowSidebar()},hoverMovieItem:function(e,t){this.current_backdrop="";var t=t||!1,i=(clearTimeout(this.movie_hover_timer),this.cleanupTrailerPlayer(),this.keys),s=this,e=$(e).data("index");i.focused_part="menu_selection",i.menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.menu_doms[e]).addClass("active"),this.prev_dom=this.menu_doms[e],"top_rated"!=s.current_category.category_id?moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[i.menu_selection],"vertical",!1):moveScrollPosition($("#vod-series-menus-container"),this.menu_doms[i.menu_selection],"horizontal",!0,t),clearTimeout(this.movie_hover_timer),this.preventShowingTrailer=!1,this.movie_hover_timer=setTimeout(function(){s.fetchHoverMovie(),
// Show movie trailer after a timer (if available)
s.showTrailerTimeout=setTimeout(function(){s.runMovieTrailer(s.movies[s.keys.menu_selection])},5e3)},1e3),this.hiddenAndShowSidebar()},fetchHoverMovie:function(e){var t=this,i,s,e,e,a,e,o,e,n,r;
// Initial UI setup: hide elements and reset values
this.resetMovieUI(),
// Exit early if the current movie type is "replay"
"replay"!==this.current_movie_type&&(
// Get selected movie and initialize API request path
e=null!=e&&"number"==typeof e?this.movies[e]:this.movies[this.keys.menu_selection],a=this.getMovieUrlKey(e),
// Handle long titles with a scrolling animation
this.setTitleScrolling(e.name),
// Get Movie ID and type
s=e.series_id?(i="series",e.series_id):(i="vod",e.stream_id),this.isTMDBAllowed)&&(e=this.getCachedMovieInfo(i,s),e?(e=e.info,e&&0!==e.length||(t.fetchHoverMovie(),$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png")),this.updateMovieUI(e),n=e.tmdb_id||e.tmdb,e.backdrop_path&&0<e.backdrop_path.length&&(r=e.backdrop_path[0]),this.fetchMovieImages(n,r||HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-image").fadeIn()):
// Fetch movie details from server
$.getJSON(api_host_url+"/player_api.php?username="+user_name+"&password="+password+a,function(e){t.handleMovieResponse(e,i,s),$("#movie-image").fadeIn()},function(e){t.handleFetchError(e)}),
// Fade in the movie image and reset scroll position
this.resetScrollPosition(),$("#vod-series-cover").css("opacity",1))},resetMovieUI:function(){$("#movie-log-title").hide(),$("#vod-img-bg").css("opacity",0),$("#vod-series-cover .movie-info").hide(),$("#vod-series-cover").css("opacity",0);
// Reset movie details display
var e=["#movie-title","#movie-synopsis","#movie-cast","#release-data","#director","#duration","#genre","#rate"];e.forEach(function(e){$(e).text("")}),$("#movie-title").text(this.movies[this.keys.menu_selection].name),$("#rate").text(this.movies[this.keys.menu_selection].rating),$("#movie-image").hide().attr("src","")},getMovieUrlKey:function(e){
// Generate API endpoint for movie or series
return"series"===this.current_movie_type?"&action=get_series_info&series_id="+e.series_id:"&action=get_vod_info&vod_id="+e.stream_id},setTitleScrolling:function(e){
// Add scrolling animation if title is longer than 50 characters
50<e.length?$("#movie-title").css({"padding-left":"100%",animation:"scroll-left 20s linear infinite"}):$("#movie-title").css({"padding-left":"",animation:""})},handleMovieResponse:function(e,t,i){var s=e.info,a=e.movie_data,e,t,i,e,o;s&&0!==s.length&&(this.updateMovieUI(s),this.cacheMovieInfo(t,i,s),e="",a&&(t=this.categories.filter(function(e){return e.category_id===a.category_id}),i=t[0].category_name.toLowerCase(),i.includes("xxx")||i.includes("adult")||i.includes("porn")),e=s.tmdb_id||s.tmdb,s.backdrop_path&&0<s.backdrop_path.length&&(o=s.backdrop_path[0]||s.movie_image),this.fetchMovieImages(e,o||HOST+"app_src_min/images/default_movie_bg.png"),$("#vod-series-cover .movie-info").show())},updateMovieUI:function(e){$("#movie-title").text(e.name).show(),!e.backdrop_path&&e.movie_image&&(e.backdrop_path=e.movie_image),(Array.isArray(e.backdrop_path)?$("#movie-image").attr("src",e.backdrop_path[0]):$("#movie-image").attr("src",e.backdrop_path)).css("opacity",1),$("#movie-synopsis").text(e.description||e.plot),$("#movie-cast").text(e.cast),$("#release-data").text(e.releasedate||e.releaseDate),$("#director").text(e.director),$("#duration").text(e.duration),$("#genre").text(e.genre),$("#rate").text(Math.round(10*e.rating)/10),
// Update UI circles based on content availability
this.toggleCircle("#movie-cast",e.cast),this.toggleCircle("#release-data",e.releasedate||e.releaseDate),this.toggleCircle("#director",e.director),this.toggleCircle("#duration",e.duration),this.toggleCircle("#genre",e.genre),$("#vod-series-cover .movie-info").show()},toggleCircle:function(e,t){
// Show or hide the circle based on whether content is present
$(e).siblings(".circle").toggle(!!t)},handleFetchError:function(e){$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png").show()},resetScrollPosition:function(){
// Reset scroll position for the movie info section
moveScrollPosition($("#vod-series-cover .movie-section"),$("#movie-info"),"vertical",!1)},fetchMovieImages:function(e,t){var i=this,s=(
// Clear existing log title and determine path for fetching images
e||t||$("#movie-image").attr("src",HOST+"app_src_min/images/default_movie_bg.png"),$("#movie-log-title").attr("src",""),"series"===this.current_movie_type?"/tv/"+e+"/images?api_key="+tmdb_api_key:"/movie/"+e+"/images?api_key="+tmdb_api_key),a;return e?(a="series"==this.current_movie_type?"series":"movies",$.ajax({url:"https://tmdb.iboplayer.com/api/"+a+"/images/show/"+e,type:"GET",headers:{Authorization:"Bearer sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB"}}).then(function(e){return e.data}).fail(function(e){
// Fallback to the official TMDB API
return $.getJSON(tmdb_prefix_url+s).then(function(e){return e}).then(i.handleImageResponse.bind(i,t)).then(function(){$("#vod-series-cover .movie-info").show();// Show movie info after image retrieval
}).fail(function(e){return null})}).then(this.handleImageResponse.bind(this,t)).then(function(){$("#vod-series-cover .movie-info").show();// Show movie info after image retrieval
})):$.Deferred().resolve().promise()},handleImageResponse:function(e,t){t.backdrops&&0<t.backdrops.length&&(e=tmdb_img_url+"w1280"+t.backdrops[0].file_path,this.current_backdrop=e);var i=t.logos&&0<t.logos.length?tmdb_img_url+"w500"+t.logos[0].file_path:null,i;
// If the response is coming from our server, return
if(i?($(".title-container").css("margin-bottom","1rem"),$("#movie-log-title").attr("src",i).show(),$("#movie-title").hide()):($(".title-container").css("margin-bottom","0"),$("#movie-log-title").hide(),$("#movie-title").show()),$("#vod-series-cover .movie-info").show(),$("#movie-image").attr("src",e).css("opacity",1),$(".vod-series-summary-section-img-darken").show(),$("#vod-img-bg").css("opacity",1),i="series"==this.current_movie_type?"series":"movies",!t.tmdbId)return $.ajax({url:"https://tmdb.iboplayer.com/api/"+i+"/images/store",type:"POST",headers:{Authorization:"Bearer sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB"},data:{tmdbId:t.tmdbId||t.id,backdrops:t.backdrops,logos:t.logos,posters:t.posters}}).then(function(e){return e}).fail(function(e,t,i){})},cacheMovieInfo:function(e,t,i,s,a){var e=e+t,t=utilities.pickProperties(i,["name","duration","cover","cover_big","movie_image","releasedate","releaseDate","director","actors","cast","description","plot","genre","rating","backdrop_path","tmdb","tmdb_id"]),t=(i=t,Object.keys(storageMoviesInfo)),t;
// Pick data to store
t&&0!=t.length||(storageMoviesInfo.host_url=api_host_url),100<=t.length&&(t=t[1],delete storageMoviesInfo[t]),
// Store info
storageMoviesInfo[e]={info:i,logo:s,bg:a},localStorage.setItem(storage_id+"saved-movie-info",JSON.stringify(storageMoviesInfo))},getCachedMovieInfo:function(e,t){var e;return storageMoviesInfo&&storageMoviesInfo!={}?(e=e+t,storageMoviesInfo[e]):null},runMovieTrailer:function(e){var e;this.preventShowingTrailer||(e=e.youtube_trailer||e.trailer,this.showTrailerTimeout=null,""!==e&&null!=e&&(
// Clean up existing player if there is one
window.trailerPlayer&&this.cleanupTrailerPlayer(),
// Make trailer player visible
$("#vod-series-trailer-player").show(),window.trailerPlayer=new YT.Player("vod-series-trailer-player",{height:"100%",width:"100%",videoId:e,playerVars:{autoplay:1,// Auto-play the video
controls:0,// Hide player controls
showinfo:0,// Hide video title and uploader info
rel:0,// Don't show related videos
iv_load_policy:3,// Hide video annotations
modestbranding:1,// Hide YouTube logo
fs:0,// Disable fullscreen button
disablekb:1,// Disable keyboard controls
playsinline:1,// Play inline on iOS
origin:window.location.origin},events:{onReady:function(e){e.target.playVideo();
// Try to apply CSS to hide any remaining controls
try{var t=e.target.getIframe();t&&t.style&&(t.style.pointerEvents="none")}catch(e){}},onStateChange:function(e){
// YT.PlayerState.ENDED = 0
0===e.data&&vod_series_page.cleanupTrailerPlayer()}}}),
// Additional attempt to hide controls after the iframe loads
$("#vod-series-trailer-player").on("load",function(){try{var e=$(this),t=e.contents(),i=(
// Hide specific YouTube controls
t.find(".ytp-chrome-top").hide(),t.find(".ytp-chrome-bottom").hide(),t.find(".ytp-chrome-top-buttons").hide(),t.find(".ytp-right-controls").hide(),t.find(".ytp-gradient-top").hide(),t.find(".ytp-gradient-bottom").hide(),t[0].createElement("style"));i.type="text/css",i.innerHTML=".ytp-chrome-top, .ytp-chrome-bottom, .ytp-gradient-top, .ytp-gradient-bottom {display: none !important}",t.find("head").append(i)}catch(e){}})))},cleanupTrailerPlayer:function(){this.showTrailerTimeout=null,this.preventShowingTrailer=!0,
// If a player exists, destroy it
window.trailerPlayer&&(window.trailerPlayer.destroy(),window.trailerPlayer=null),
// Reset the trailer container div
$("#vod-series-trailer-player").hide(),
// Make sure the movie image is visible
$("#movie-image").show()},showThemeModal:function(){var e;this.isTMDBAllowed?(this.keys.focused_part="theme_vod_modal",$("#vod-theme-modal").modal("show"),e=this.keys.modal_focus_index,this.modal_visible=!0,$("#vod-theme-modal .vod-theme").removeClass("current"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("current")}),this.updateModalFocus()):showToast("Sorry","Theme cannot be changed unless TMDB is allowed in settings.")},hideThemeModal:function(){this.keys.focused_part="top_menu_selection",$("#vod-theme-modal").modal("hide"),this.modal_visible=!1},updateModalFocus:function(){var e=this.keys.modal_focus_index;$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")})},handleModalSelection:function(e){this.keys.modal_focus_index=e,0==e?(localStorage.setItem(storage_id+"vod_theme","n"),this.vod_theme="n",$("#vod-series-cover").addClass("d-none"),$("#vod-series-cover").removeClass("d-block"),$("#vod-series-menus-container").css("height","62rem"),$("#vod-series-current-category").css("margin-top","-3rem"),$("#vod-series-page .bottom-label-items-container").css("background","transparent")):(localStorage.setItem(storage_id+"vod_theme","m"),this.vod_theme="m",$("#vod-series-cover").addClass("d-block"),$("#vod-series-cover").removeClass("d-none"),$("#vod-series-current-category").css("margin-top","0"),$("#vod-series-menus-container").css("height","30rem")),this.hideThemeModal()},hoverThemeVod:function(e){$("#vod-theme-modal .vod-theme").removeClass("active"),$("#vod-theme-modal .vod-theme").each(function(){$(this).data("index")==e&&$(this).addClass("active")}),this.keys.modal_focus_index=e},hoverTopMenu:function(e){var t=this.keys;t.menu_selection=0,t.focused_part="top_menu_selection",$(this.prev_dom).removeClass("active"),2==e&&"replay"==this.current_movie_type&&(e=1),t.top_menu_selection=e,$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],this.hiddenAndShowSidebar()},hiddenAndShowSidebar:function(){"category_search_selection"==this.keys.focused_part||"category_selection"==this.keys.focused_part?($("#vod-series-left-part").css({"-webkit-transform":"translateX(0)",transform:"translateX(0)"}),$("#vod-series-cover .movie-info").css({"-webkit-transform":"translateX(35rem)",transform:"translateX(35rem)"}),$("#vod-series-menus-container").css({"-webkit-transform":"translateX(35rem)",transform:"translateX(35rem)"}),$("#vod-series-current-category").css({"-webkit-transform":"translateX(35rem)",transform:"translateX(35rem)"})):($("#vod-series-left-part").css({"-webkit-transform":"translateX(-100%)",transform:"translateX(-100%)"}),$("#vod-series-current-category").css({"-webkit-transform":"translateX(0)",transform:"translateX(0)"}),$("#vod-series-cover .movie-info").css("transform","translateX(0)"),$("#vod-series-menus-container").css("transform","translateX(0)"))},insertSidebarTitle:function(e){$("#vod-series-icon-container > div").html("<span>"+e+"</span>")},
// insertSidebarMoiveTitle: function () {
//   $("#vod-series-icon-container > div").html("<span>Movies</span>");
// },
// insertSidebarSeriesTitle: function () {
//   $("#vod-series-icon-container > div").html("<span>Series</span>");
// },
// insertSidebarReplayTitle: function () {
//   $("#vod-series-icon-container > div").html("<span>Replay</span>");
// },
handleMenuClick:function(e){var t=this.keys,i,s,a,o,n,s;switch(t.focused_part){case"menu_selection":this.cleanupTrailerPlayer(),"vod"===this.current_movie_type?(current_movie=this.movies[t.menu_selection],vod_summary_page.init("vod-series-page")):"series"===this.current_movie_type?(current_series=this.movies[t.menu_selection],series_summary_page.init("vod-series-page")):(this.setIsLoading(!0),i=[],s=this,a=settings.time_format,o=12==a?"Y-MM-DD hh:mm A":"Y-MM-DD HH:mm",n=this.movies[t.menu_selection],this.currentlyActiveRequest=$.ajax({method:"get",url:api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=get_simple_data_table&stream_id="+n.stream_id,success:function(e){e.epg_listings?e.epg_listings.map(function(e){0!=e.has_archive&&i.push({start:getLocalChannelTime(e.start).format(o),stop:getLocalChannelTime(e.end).format(o),title:e.title,description:e.description})}):e.error?showToast("Error",e.error):showToast("Sorry","Something went wrong"),s.setIsLoading(!1),0<i.length?catchup_page.init(n,i,"vod-series-page"):(s.setIsLoading(!1),showToast("Sorry","No Epg Available for current channel"))},error:function(){s.requestAborted?s.requestAborted=!1:(showToast("Sorry","Something went wrong or no EPG available for this channel"),s.setIsLoading(!1))}}));break;case"top_menu_selection":if(0==t.top_menu_selection)this.cleanupTrailerPlayer(),this.goToSearchPage();else if(1==t.top_menu_selection)this.showSortModal();else{if("replay"===this.current_movie_type)return;this.showThemeModal()}break;case"category_selection":$(this.prev_selected_category).removeClass("current"),$(this.category_doms[e]).addClass("current"),this.prev_selected_category=this.category_doms[e];var a=this.categories[t.category_selection],a;this.current_category_index!=t.category_selection&&(a=checkForAdult(a,"category",[],!0),a?parent_confirm_page.init(current_route):(this.showCategoryContent(),this.fetchHoverMovie(0),this.cleanupTrailerPlayer()));break;case"sort_selection":
// Reset the current category index to -1 (no category selected)
this.current_category_index=-1;
// Get the sort key from the DOM element with a specific key from the `sort_doms` array
var a=$(this.sort_doms[t.sort_selection]).data("sort_key");
// Check if the current movie type is not "replay"
"replay"!=this.current_movie_type?
// Save the sort setting for the current movie type (e.g., for different categories like "movies", "series", etc.)
settings.saveSettings(this.current_movie_type+"_sort",// Save the movie type with "_sort" as the key
a,// Use the retrieved sort key
""):settings.saveSettings("live_sort",a,""),
// Update the data attribute "word_code" of the second element in the `top_menu_doms` array with the sort key
$(this.top_menu_doms[1]).data("word_code",a),
// Update the text of the second element in the `top_menu_doms` array.
// If `current_words[sort_key]` exists, use it, otherwise, fallback to `settings.sort_keys[sort_key]`
// $(this.top_menu_doms[1]).text(
//   current_words[sort_key]
//     ? current_words[sort_key]
//     : settings.sort_keys[sort_key]
// );
// Display the category content after sorting
this.showCategoryContent(),
// Go back to hide the sorting modal
this.goBack();break;case"category_search_selection":return key_focused?void $(this.category_search_dom).blur():($(this.category_search_dom).focus(),s=this,void setTimeout(function(){var e=$(s.category_search_dom).val();$(s.category_search_dom)[0].setSelectionRange(e.length,e.length)},200));case"theme_vod_modal":this.handleModalSelection(this.keys.modal_focus_index)}},handleMenusUpDown:function(e){var t=this,i=this.keys,s=this.menu_doms;switch(i.focused_part){case"category_search_selection":if(key_focused)return;if(e<0)return;0<this.category_doms.length&&(i.category_selection>=this.category_doms.length&&(i.category_selection=this.category_doms.length-1),this.hoverCategory(this.category_doms[i.category_selection]));break;case"category_selection":if(i.category_selection+=e,i.category_selection<0)return i.category_selection=0,void this.hoverCategorySearch();if(i.category_selection>=this.category_doms.length)return void(i.category_selection=this.category_doms.length-1);this.hoverCategory(this.category_doms[i.category_selection]);break;case"menu_selection":var a=i.menu_selection;if("top_rated"!=t.current_category.category_id){if(i.menu_selection+=7*e,i.menu_selection>=s.length&&(i.menu_selection=s.length-1),i.menu_selection<0)return i.menu_selection=a,void this.hoverTopMenu(0);i.menu_selection>=this.current_render_count-7&&this.renderCategoryContent(),this.hoverMovieItem(this.menu_doms[i.menu_selection])}else if(e<0)return void this.hoverTopMenu(0);break;case"top_menu_selection":if(key_focused)return;if(0<e){if(0==this.menu_doms.length)return;i.menu_selection>=this.menu_doms.length&&(i.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[i.menu_selection])}break;case"sort_selection":i.sort_selection+=e,i.sort_selection<0&&(i.sort_selection=0),i.sort_selection>=this.sort_doms.length&&(i.sort_selection=this.sort_doms.length-1),this.hoverSortItem(i.sort_selection);case"theme_vod_modal":0<e?this.hoverThemeVod(1):this.hoverThemeVod(0)}this.hiddenAndShowSidebar()},handleMenuLeftRight:function(e){var t=this.keys,i;switch(t.focused_part){case"category_search_selection":case"category_selection":0<e?0<this.movies.length?this.hoverMovieItem(this.menu_doms[t.menu_selection]):(i=$("#vod-series-search-input").val(),i&&this.hoverTopMenu()):this.hoverCategory(this.category_doms[0]);break;case"menu_selection":if("top_rated"!=this.current_category.category_id){if(t.menu_selection%7==0&&e<0)return void(0<this.category_doms.length?(t.category_search_selection>this.category_doms.length&&(t.category_search_selection=this.category_doms.length-1),this.hoverCategory(this.category_doms[t.category_selection])):this.hoverCategorySearch())}else if(0==t.menu_selection&&e<0)return void(0<this.category_doms.length?(t.category_search_selection>this.category_doms.length&&(t.category_search_selection=this.category_doms.length-1),this.hoverCategory(this.category_doms[t.category_selection])):this.hoverCategorySearch());t.menu_selection+=e,t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMovieItem(this.menu_doms[t.menu_selection]),0<e&&t.menu_selection>=this.current_render_count-5&&this.renderCategoryContent();break;case"top_menu_selection":if(key_focused)return;if(t.top_menu_selection+=e,t.top_menu_selection<0)return t.top_menu_selection=0,void this.hoverCategory(this.category_doms[t.category_selection]);t.top_menu_selection>=this.top_menu_doms.length-1&&(// Excluding the last item (fav) which is not clickable
t.top_menu_selection=this.top_menu_doms.length-2),this.hoverTopMenu(t.top_menu_selection)}this.hiddenAndShowSidebar()},HandleKey:function(e){if(this.is_drawing&&e.keyCode==tvKey.RETURN)this.goBack();else if(!this.is_drawing)
// console.log("Key pressed in VOD Series Page: " + e.keyCode);
switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick($(this.prev_dom).data("index"));break;case tvKey.RETURN:this.goBack();break;case tvKey.CH_UP:this.showNextChannel(1);break;case tvKey.CH_DOWN:this.showNextChannel(-1);break;case tvKey.RETURN:case tvKey.YELLOW:"replay"!==this.current_movie_type&&this.addOrRemoveFav();break;case tvKey.BLUE:"theme_vod_modal"==this.keys.focused_part||"top_menu_selection"==this.keys.focused_part&&-1==this.keys.search_selection||(this.hoverTopMenu(1),this.showSortModal());
// this.Exit();
// goHomePageWithMovieType("movies");
break;case tvKey.GREEN:"replay"===this.current_movie_type||"sort_selection"==this.keys.focused_part||"top_menu_selection"==this.keys.focused_part&&-1==this.keys.search_selection||(this.hoverTopMenu(2),this.showThemeModal());break;case tvKey.RED:"sort_selection"!=this.keys.focused_part&&"theme_vod_modal"!=this.keys.focused_part&&(this.hoverTopMenu(0),this.goToSearchPage());break;case tvKey.N1:this.goChannelNum(1);break;case tvKey.N2:this.goChannelNum(2);break;case tvKey.N3:this.goChannelNum(3);break;case tvKey.N4:this.goChannelNum(4);break;case tvKey.N5:this.goChannelNum(5);break;case tvKey.N6:this.goChannelNum(6);break;case tvKey.N7:this.goChannelNum(7);break;case tvKey.N8:this.goChannelNum(8);break;case tvKey.N9:this.goChannelNum(9);break;case tvKey.N0:this.goChannelNum(0);break;case tvKey.PAUSE:this.playOrPause()}}},setting_page={player:null,keys:{focused_part:"menu_selection",menu_selection:0,stream_format_selection:0,font_size_selection:0,tmdb_selection:0,home_favorites_selection:0,live_initialization_selection:0},menu_doms:$(".setting-menu-item-wrapper"),initiated:!1,parent_control_doms:[],hide_category_doms:[],theme_modal_options:[],hide_category_movie_type:"",doms_translated:[],language_doms:[],stream_format_items:$(".stream-format-item"),font_size_items:$(".font-size-item"),tmdb_items:$(".tmdb-option"),home_favorites_items:$(".home-favorites-option"),live_initialization_items:$(".live-initialization-option"),tried_panel_indexes:[],subtitle_setting_doms:$(".subtitle-setting-item"),init:function(){this.hoverSettingMenu(0),current_route="setting-page",$("#setting-page").removeClass("hide");var i=$("#parent-control-modal .parent-modal-input-item-container");$("#parent-control-modal .parent-control-modal-button").map(function(e,t){i.push(t)}),this.parent_control_doms=i,this.tried_panel_indexes=[]},goBack:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$("#setting-page").addClass("hide"),$("#home-page").removeClass("hide"),current_route="home-page";break;case"parent_control_modal":this.cancelResetParentAccount();break;case"hide_category_modal":$("#hide-category-modal").modal("hide"),e.focused_part="menu_selection";break;case"theme_modal":$("#theme-modal").modal("hide"),e.focused_part="menu_selection";break;case"language_selection":$("#language-select-modal").modal("hide"),e.focused_part="menu_selection";break;case"stream_format_selection":$("#stream-format-modal").modal("hide"),e.focused_part="menu_selection";break;case"subtitle_setting_selection":$("#subtitle-setting-modal").modal("hide"),e.focused_part="menu_selection";break;case"font_size_modal":$("#font-size-modal").modal("hide"),e.focused_part="menu_selection";break;case"tmdb_modal":$("#toggle_tmdb_modal").modal("hide"),e.focused_part="menu_selection";break;case"home_favorites_modal":$("#toggle_home_favorites").modal("hide"),e.focused_part="menu_selection";break;case"live_initialization_modal":$("#live_initialization_modal").modal("hide"),e.focused_part="menu_selection"}},showParentControlModal:function(){$("#parent-account-valid-error").hide(),$("#settings-modal").modal("hide"),$(".parent-modal-input-wrapper input").val(""),$("#parent-control-modal").modal("show"),this.keys.focused_part="parent_control_modal",$(this.parent_control_doms).removeClass("active"),this.keys.parent_control_modal=0,$(this.parent_control_doms[0]).addClass("active"),$(this.parent_control_doms[0]).find("input").focus()},clickParentControl:function(t){var e=this.keys;switch(e.parent_control_modal=t,e.parent_control_modal){case 0:case 1:case 2:$(this.parent_control_doms[t]).find("input").focus();var i=this;setTimeout(function(){var e=$(i.parent_control_doms[t]).find("input").val();$(i.parent_control_doms[t]).find("input")[0].setSelectionRange(e.length,e.length)},200);break;case 3:this.resetParentAccount();break;case 4:this.cancelResetParentAccount()}},resetParentAccount:function(){$("#parent-account-valid-error").hide();var e=$("#current_parent_password").val(),t=$("#new_parent_password").val(),i=$("#new_parent_password_confirm").val();e!=parent_account_password?$("#parent-account-valid-error").text("Current password does not match").slideDown():t!=i?$("#parent-account-valid-error").text("Password does not match").slideDown():(parent_account_password=t,localStorage.setItem(storage_id+"parent_account_password",parent_account_password),$("#parent-control-modal").modal("hide"),this.keys.focused_part="menu_selection",this.saveParentPinToServer())},saveParentPinToServer:function(){var e=encryptRequest({mac_address:mac_address,pin_code:parent_account_password}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],a=this;$.ajax({method:"post",url:i+"/changeParentPin",data:{data:e},success:function(e){a.tried_panel_indexes=[];var t=decryptResponse(e)},error:function(){a.tried_panel_indexes.push(s),a.tried_panel_indexes.length<panel_urls.length&&a.saveParentPinToServer()}})},cancelResetParentAccount:function(){$("#parent-control-modal").modal("hide"),this.keys.focused_part="menu_selection"},getSelectedLanguageWords:function(e){for(var t={},i=0;i<languages.length;i++)if(languages[i].code===e){t=languages[i].words;break}current_words=t},showHideCategoryModal:function(e){var t,i=(this.hide_category_movie_type=e,$("#settings-modal").modal("hide"),"live"===e&&(t=LiveModel.getCategories(!0,!1)),"movie"!==e&&"vod"!==e||(t=VodModel.getCategories(!0,!1)),"series"===e&&(t=SeriesModel.getCategories(!0,!1)),""),e=(t.map(function(e,t){i+='<div class="hide-category-modal-option"   onclick="setting_page.clickHideCategory('+t+')"   onmouseenter="setting_page.hoverHideCategory('+t+')">   <input class="hide-category-checkbox" type="checkbox" name="checkbox"       id="hide-category-item-'+e.category_id+'" '+(e.is_hide?"":"checked")+' value="'+e.category_id+'">   <label for="hide-category-item-dfafdd'+e.category_id+'">'+e.category_name+"</label></div>"}),$("#hide-modal-categories-container").html(i),$("#hide-category-modal").modal("show"),$($(".hide-category-modal-option")).removeClass("active"),$($(".hide-category-modal-option")[0]).addClass("active"),$($(".hide-category-btn-wrapper")).removeClass("active"),$(".hide-category-modal-option"));this.hide_category_doms=e,this.keys.focused_part="hide_category_modal",this.keys.hide_category_modal=0,$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[0]).addClass("active"),$("#hide-modal-categories-container").scrollTop(0)},clickHideCategory:function(e){var t=this.hide_category_doms[e],i=$($(t).find("input")[0]).prop("checked"),i=!i;$($(t).find("input")[0]).prop("checked",i),("live"===this.hide_category_movie_type?LiveModel:"movie"===this.hide_category_movie_type||"vod"===this.hide_category_movie_type?VodModel:SeriesModel).saveHiddenCategories(e,!i)},showThemeModal:function(){var i="";themes.map(function(e,t){i+='<div class="modal-operation-menu-type-3 theme-modal-option"    onclick="setting_page.pickTheme('+t+')"   onmouseenter="setting_page.hoverThemeModal('+t+')">'+e.name+"</div>"}),$("#theme-modal-body").html(i),this.theme_modal_options=$(".theme-modal-option"),this.keys.focused_part="theme_modal",this.keys.theme_modal=0,$(this.theme_modal_options).removeClass("active"),$(this.theme_modal_options[0]).addClass("active"),$("#settings-modal").modal("hide"),$("#theme-modal").modal("show")},pickTheme:function(e){var t=themes[e].url;settings.saveSettings("bg_img_url",t,""),settings.saveSettings("bg_img_name",themes[e].name,""),changeBackgroundImage(),this.keys.focused_part="menu_selection",$("#theme-modal").modal("hide")},showLanguages:function(){$("#settings-modal").modal("hide");var i=this.keys,e=(i.focused_part="language_selection",i.language_selection=0,this.language_doms);e.map(function(e,t){var t=$(t).data("language");t==settings.language&&(i.language_selection=e)}),$(e).removeClass("active"),$(e[i.language_selection]).addClass("active"),$("#language-select-modal").modal("show"),moveScrollPosition($("#select-language-body"),e[i.language_selection],"vertical",!1)},selectLanguage:function(e,t){settings.saveSettings("language",e,"");var e=this.keys;e.language_selection=t,$(this.language_doms).removeClass("active"),$(this.language_doms[t]).addClass("active"),$("#language-select-modal").modal("hide"),e.focused_part="menu_selection",this.changeDomsLanguage()},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language);var e=this.doms_translated;e.map(function(e,t){var i=$(t).data("word_code");void 0!==current_words[i]&&$(t).text(current_words[i])})},confirmParentPassword:function(){$("#parent-confirm-password-error").hide(),
// var typed_parent_password = $("#parent-confirm-password").val();
parent_account_password===typed_parent_password?($("#parent-confirm-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus,this.showCategoryContent()):$("#parent-confirm-password-error").text("Password does not match").show()},cancelParentPassword:function(){$("#parent-confirm-modal").modal("hide"),this.keys.focused_part=this.keys.prev_focus},showStreamFormatModal:function(){this.hoverStreamFormatItem(0),this.initiate_stream_format||($('input[name="stream-format"][value="'+settings.stream_format+'"]').prop("checked",!0),this.initiate_stream_format=!0),$("#stream-format-modal").modal("show")},saveStreamFormat:function(){var e=$("input[name='stream-format']:checked").val();void 0!==e&&settings.saveSettings("stream_format",e,""),this.goBack()},saveFontSize:function(){var e=$(this.font_size_items[this.keys.font_size_selection]).children(".font-size-radio").val();void 0!==e&&settings.saveSettings("font_size",e,""),"large"==e?document.body.classList.add("large-font"):document.body.classList.remove("large-font"),this.goBack()},saveTMDBChoice:function(){var e=$(this.tmdb_items[this.keys.tmdb_selection]).children(".tmdb-choice-radio").val();void 0!==e&&settings.saveSettings("tmdb_choice",e,"")},saveHomeFavoritesChoice:function(){var e=$(this.home_favorites_items[this.keys.home_favorites_selection]).children(".home-favorites-choice-radio").val();void 0!==e&&settings.saveSettings("home_favorites_choice",e,""),home_page.setLiveFavoritesChoice()},saveLiveInitializationChoice:function(){var e=$(this.live_initialization_items[this.keys.live_initialization_selection]).children(".live-initialization-choice-radio").val();void 0!==e&&settings.saveSettings("live_initialization_choice",e,"")},showSubtitleSetting:function(){$("#current-subtitle-size").text(settings.subtitle_size+"px"),$("#subtitle-setting-modal").modal("show"),this.hoverSubtitleSetting(0)},increaseSubtitleSize:function(e){var t=settings.subtitle_size;t+=e,t<20&&(t=20),100<t&&(t=100),$("#current-subtitle-size").text(t+"px"),$(".subtitle-container").css({"font-size":t+"px"}),settings.saveSettings("subtitle_size",t,"")},showFontSetting:function(){this.hoverFontSizeItem(0),this.initiate_font_size||($('input[name="font-size"][value="'+settings.font_size+'"]').prop("checked",!0),this.initiate_font_size=!0),$("#font-size-modal").modal("show")},showTMDBApiSettings:function(){this.hoverTMDBChoice(this.keys.tmdb_selection),$('input[name="tmdb-choice"][value="'+settings.tmdb_choice+'"]').prop("checked",!0),$("#toggle_tmdb_modal").modal("show")},showHomeFavoritesOptions:function(){this.hoverHomeFavoritesChoice(this.keys.home_favorites_selection),$('input[name="home-favorites-choice"][value="'+settings.home_favorites_choice+'"]').prop("checked",!0),$("#toggle_home_favorites").modal("show")},showLiveInitializationOptions:function(){this.hoverLiveInitializationChoice(this.keys.live_initialization_selection),$('input[name="live-initialization-choice"][value="'+settings.live_initialization_choice+'"]').prop("checked",!0),$("#live_initialization_modal").modal("show")},hoverThemeModal:function(e){var t=this.keys;t.theme_modal=e,
// console.log(index);
// console.log(this.theme_modal_options[index]);
$(this.theme_modal_options).removeClass("active"),$(this.theme_modal_options[e]).addClass("active"),moveScrollPosition($("#theme-modal-body"),this.theme_modal_options[e],"vertical",!1)},hoverHideCategory:function(e){var t=this.keys;t.hide_category_modal=e<0?this.hide_category_doms.length+e:e,$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[t.hide_category_modal]).addClass("active"),moveScrollPosition($("#hide-modal-categories-container"),this.hide_category_doms[t.hide_category_modal],"vertical",!1)},hoverParentControl:function(e){var t=this.keys;t.parent_control_modal=e,$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[e]).addClass("active")},hoverSettingMenu:function(e){this.keys.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},hoverLanguage:function(e){var t=this.keys,i=this.language_doms;t.language_selection=e,$(i).removeClass("active"),$(i[t.language_selection]).addClass("active"),moveScrollPosition($("#select-language-body"),i[t.language_selection],"vertical",!1)},hoverStreamFormatItem:function(e){var t=this.keys;t.focused_part="stream_format_selection",$(this.stream_format_items).removeClass("active"),$(this.stream_format_items[e]).addClass("active"),t.stream_format_selection=e},hoverFontSizeItem:function(e){var t=this.keys;t.focused_part="font_size_modal",$(this.font_size_items).removeClass("active"),$(this.font_size_items[e]).addClass("active"),t.font_size_selection=e},hoverSubtitleSetting:function(e){var t=this.keys;t.focused_part="subtitle_setting_selection",t.subtitle_setting_selection=e,$(this.subtitle_setting_doms).removeClass("active"),$(this.subtitle_setting_doms[e]).addClass("active")},hoverTMDBChoice:function(e){var t=this.keys;t.focused_part="tmdb_modal",$(this.tmdb_items).removeClass("active"),$(this.tmdb_items[e]).addClass("active"),t.tmdb_selection=e},hoverHomeFavoritesChoice:function(e){var t=this.keys;t.focused_part="home_favorites_modal",$(this.home_favorites_items).removeClass("active"),$(this.home_favorites_items[e]).addClass("active"),t.home_favorites_selection=e},hoverLiveInitializationChoice:function(e){var t=this.keys;t.focused_part="live_initialization_modal",$(this.live_initialization_items).removeClass("active"),$(this.live_initialization_items[e]).addClass("active"),t.live_initialization_selection=e},handleMenuClick:function(){var t=this.keys,i;switch(t.focused_part){case"menu_selection":switch(t.menu_selection){case 0:this.showParentControlModal();break;case 1:checkActivePlaylist()&&this.showHideCategoryModal("live");break;case 2:checkActivePlaylist()&&this.showHideCategoryModal("movie");break;case 3:checkActivePlaylist()&&this.showHideCategoryModal("series");break;case 4:this.showThemeModal();break;case 5:this.showLanguages();break;case 6:this.showStreamFormatModal();break;case 7:clear_cache_page.init("setting-page");break;case 8:clear_recent_page.init("setting-page","vod");break;case 9:clear_recent_page.init("setting-page","series");break;case 10:this.showSubtitleSetting();break;case 11:this.showFontSetting();break;case 12:this.showTMDBApiSettings();break;case 13:this.showHomeFavoritesOptions();break;case 14:this.showLiveInitializationOptions()}break;case"parent_control_modal":t.parent_control_modal<3?($(this.parent_control_doms[t.parent_control_modal]).find("input").focus(),i=this,setTimeout(function(){var e=$(i.parent_control_doms[t.parent_control_modal]).find("input").val();$(i.parent_control_doms[t.parent_control_modal]).find("input")[0].setSelectionRange(e.length,e.length)},200)):$(this.parent_control_doms[t.parent_control_modal]).trigger("click");break;case"hide_category_modal":$(this.hide_category_doms[t.hide_category_modal]).trigger("click");break;case"theme_modal":$(this.theme_modal_options[t.theme_modal]).trigger("click");break;case"language_selection":$(this.language_doms[t.language_selection]).trigger("click");break;case"stream_format_selection":t.stream_format_selection<3?$(this.stream_format_items[t.stream_format_selection]).find("input").prop("checked",!0):3==t.stream_format_selection?this.saveStreamFormat():4==t.stream_format_selection&&this.goBack();break;case"subtitle_setting_selection":$(this.subtitle_setting_doms[t.subtitle_setting_selection]).trigger("click");break;case"font_size_modal":t.font_size_selection<2?(this.saveFontSize(),$(this.font_size_items[t.font_size_selection]).find("input").prop("checked",!0)):2==t.font_size_selection&&this.goBack();break;case"tmdb_modal":t.tmdb_selection<2&&(this.saveTMDBChoice(),$(this.tmdb_items[t.tmdb_selection]).find("input").prop("checked",!0)),this.goBack();break;case"home_favorites_modal":t.home_favorites_selection<2&&(this.saveHomeFavoritesChoice(),$(this.home_favorites_items[t.home_favorites_selection]).find("input").prop("checked",!0)),this.goBack();break;case"live_initialization_modal":t.live_initialization_selection<3&&(this.saveLiveInitializationChoice(),$(this.live_initialization_items[t.live_initialization_selection]).find("input").prop("checked",!0)),this.goBack()}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":var i=t.menu_selection;if(t.menu_selection+=4*e,t.menu_selection>=this.menu_doms.length){if(3<i)return void(t.menu_selection=i);t.menu_selection=this.menu_doms.length-1}t.menu_selection<0?t.menu_selection=i:this.hoverSettingMenu(t.menu_selection);break;case"hide_category_modal":t.hide_category_modal+=e,t.hide_category_modal<0&&(t.hide_category_modal=0),t.hide_category_modal>=this.hide_category_doms.length&&(t.hide_category_modal=this.hide_category_doms.length-1),$(this.hide_category_doms).removeClass("active"),$(this.hide_category_doms[t.hide_category_modal]).addClass("active"),t.hide_category_modal<this.hide_category_doms.length&&moveScrollPosition($("#hide-modal-categories-container"),this.hide_category_doms[t.hide_category_modal],"vertical");break;case"parent_control_modal":0<e?t.parent_control_modal<3&&(t.parent_control_modal+=e):3<=t.parent_control_modal?t.parent_control_modal=2:(t.parent_control_modal+=e,t.parent_control_modal<0&&(t.parent_control_modal=0)),$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[t.parent_control_modal]).addClass("active");break;case"theme_modal":var i=this.theme_modal_options;t.theme_modal+=e,t.theme_modal<0&&(t.theme_modal=i.length-1),t.theme_modal>=i.length&&(t.theme_modal=0),$(i).removeClass("active"),$(i[t.theme_modal]).addClass("active"),moveScrollPosition($("#theme-modal-body"),this.theme_modal_options[t.theme_modal],"vertical",!1);break;case"language_selection":var i=this.language_doms;t.language_selection+=e,t.language_selection<0&&(t.language_selection=i.length-1),t.language_selection>=i.length&&(t.language_selection=0),this.hoverLanguage(t.language_selection);break;case"stream_format_selection":t.stream_format_selection<3?t.stream_format_selection+=e:3<=t.stream_format_selection&&e<0&&(t.stream_format_selection=2),t.stream_format_selection<0&&(t.stream_format_selection=0),this.hoverStreamFormatItem(t.stream_format_selection);break;case"font_size_modal":t.font_size_selection+=e,2<t.font_size_selection?t.font_size_selection=0:t.font_size_selection<0&&(t.font_size_selection=2),this.hoverFontSizeItem(t.font_size_selection);break;case"tmdb_modal":t.tmdb_selection+=e,2<t.tmdb_selection?t.tmdb_selection=0:t.tmdb_selection<0&&(t.tmdb_selection=2),this.hoverTMDBChoice(t.tmdb_selection);break;case"home_favorites_modal":t.home_favorites_selection+=e,2<t.home_favorites_selection?t.home_favorites_selection=0:t.home_favorites_selection<0&&(t.home_favorites_selection=2),this.hoverHomeFavoritesChoice(t.home_favorites_selection);break;case"live_initialization_modal":t.live_initialization_selection+=e,3<t.live_initialization_selection?t.live_initialization_selection=0:t.live_initialization_selection<0&&(t.live_initialization_selection=3),this.hoverLiveInitializationChoice(t.live_initialization_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverSettingMenu(t.menu_selection);break;case"parent_control_modal":3<=t.parent_control_modal&&(t.parent_control_modal+=e,t.parent_control_modal<3&&(t.parent_control_modal=3),4<t.parent_control_modal&&(t.parent_control_modal=4),$(this.parent_control_doms).removeClass("active"),$(this.parent_control_doms[t.parent_control_modal]).addClass("active"));break;case"stream_format_selection":0<e?this.hoverStreamFormatItem(this.stream_format_items.length-1):this.hoverStreamFormatItem(this.stream_format_items.length-2);break;case"font_size_modal":t.font_size_selection=0<e?2:0,this.hoverFontSizeItem(t.font_size_selection);break;case"subtitle_setting_selection":0<e?this.hoverSubtitleSetting(1):this.hoverSubtitleSetting(0)}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},settings_page={keys:{focused_part:"settings_selection",settings_selection:0,// Main settings menu selection
parental_control_tabs_selection:0,current_parental_control_tab_selection:0,parental_control_selection:0,hide_categories_tabs_selection:0,current_hide_categories_tabs_selection:0,hide_categories_selection:0,themes_selection:0,change_language_selection:0,clear_cache_selection:0,clear_watch_lists_selection:0,subtitle_selection:0,font_size_selection:0,toggle_tmdb_selection:0,toggle_home_favorites_selection:0,live_initialization_selection:0,load_on_demand_selection:0},transparency_mode:!1,subtitle_bg_options:{black:{color:"#fff",background:"#000"},white:{color:"#000",background:"#fff"},red:{color:"#fff",background:"#950606"},transparent:{color:"#fff",background:"transparent"}},doms_translated:[],tried_panel_indexes:[],settings_doms:$(".settings-page-option"),settings_options_doms:$(".setting-option-container"),parental_control_tab_items:$("#parental-control-settings .setting-tab"),hide_categories_tabs_items:$("#hide-categories-settings .setting-tab"),hide_categories_live_items:$("#hide_categories_live_container .setting-select-multi-option"),hide_categories_movies_items:$("#hide_categories_movies_container .setting-select-multi-option"),hide_categories_series_items:$("#hide_categories_series_container .setting-select-multi-option"),themes_items:$("#theme-settings .setting-select-option"),change_language_items:$("#change-language-settings .setting-select-option"),clear_cache_items:$("#clear-cache-settings .setting-select-option"),clear_watch_lists_items:$("#clear-watch-lists-settings .setting-select-option"),subtitle_items:$("#subtitle-settings .settings-multi-value-option"),font_size_items:$("#font-size-settings .setting-select-option"),toggle_tmdb_items:$("#toggle-tmdb-settings .setting-select-option"),toggle_home_favorites_items:$("#toggle-home-favorites-settings .setting-select-option"),live_initialization_items:$("#live-initialization-settings .setting-select-option"),load_on_demand_items:$("#load-on-demand-settings .setting-select-option"),init:function(){$("#home-page").addClass("hide"),$("#settings-page").css("display","flex"),current_route="settings-page",
// Reset UI
$(this.settings_doms).removeClass("current"),$(this.settings_options_doms).hide(),this.createThemesDoms(),this.createCategoriesDoms(),this.hoverSettingsItem(0)},goBack:function(){var e=this.keys;switch(e.focused_part){case"hide_categories":e.hide_categories_selection=0,this.hoverHideCategoriesTab(e.hide_categories_tabs_selection);break;case"subtitle_option":this.hoverSubtitleOption(e.subtitle_selection);break;default:
// Reset the focused part
this.keys.focused_part="settings_selection",
// Go back to home page
$("#settings-page").css("display","none"),$("#home-page").removeClass("hide"),current_route="home-page"}},
// ########## Start General Functions ##########
updateActiveClass:function(e,t){e.removeClass("active").eq(t).addClass("active")},handleScrolling:function(e,t,i,s){var s=!s;moveScrollPosition($(e),$(t[i]),"vertical",s)},hoverOption:function(e,t,i,s){this.updateActiveClass(t,i),this.handleScrolling(e,t,i,s)},
// ########## End General Functions ##########
// ########## Start Main Menu Functions ##########
hoverSettingsItem:function(e,t){var t;key_focused||(t&&t.removeClass("active"),t=this.keys,t.focused_part="settings_selection",t.settings_selection=e,this.updateActiveClass(this.settings_doms,e),1==this.transparency_mode&&(this.transparency_mode=!1,$("#settings-page").css("opacity",1)))},clickSettingsItem:function(e){var t=this.keys;
// Show the corresponding setting options 
switch(e="number"==typeof e?e:t.settings_selection,$(this.settings_doms).removeClass("current").removeClass("active").eq(e).addClass("current"),$(this.settings_options_doms).hide().eq(e).show(),t.settings_selection){case 0:// Change Language
this.setupChangeLanguageOptions(),this.hoverChangeLanguageOption(t.change_language_selection);break;case 1:// Hide Categories
this.setupHideCategoriesOptions(),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);break;case 2:// Theme Settings
this.setupThemesOptions(),this.hoverThemesOption(t.themes_selection);break;case 3:// Parental Control
this.setupParentalControlOptions();break;case 4:// Clear Cache
this.hoverClearCacheOption(t.clear_cache_selection);break;case 5:// Clear Watch Lists
this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case 6:// Subtitle Settings
this.setupSubtitleOptions(),this.hoverSubtitleOption(t.subtitle_selection);break;case 7:// Font Size
this.setupFontSizeOptions(),this.hoverFontSizeOption(t.font_size_selection);break;case 8:// Toggle TMDB API
this.setupToggleTMDBOptions(),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case 9:// Toggle Home Favorites
this.setupToggleHomeFavoritesOptions(),this.hoverToggleHomeFavoritesOption(t.toggle_home_favorites_selection);break;case 10:// Live Initialization
this.setupLiveInitializationOptions(),this.hoverLiveInitializationOption(t.live_initialization_selection);break;case 11:// Load On Demand
this.setupLoadOnDemandOptions(),this.hoverLoadOnDemandOption(t.load_on_demand_selection)}},
// ########## End Main Menu Functions ##########
// ########## Start Parental Control Functions ##########
setupParentalControlOptions:function(){var e=this.keys;e.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("current"),$("#settings-parental-control-off").hide(),"off"==parent_account_password?($("#parental-control-settings .setting-tabs-container").hide(),$("#settings-parental-control-change").hide(),$("#settings-parental-control-on").show(),e.current_parental_control_tab_selection=-1,// Off
this.hoverParentalControlOption(0)):($("#parental-control-settings .setting-tabs-container").show(),$("#settings-parental-control-change").show(),$("#settings-parental-control-on").hide(),e.current_parental_control_tab_selection=0,e.parental_control_tabs_selection=0,this.hoverParentalControlTab(e.parental_control_tabs_selection),this.clickParentalControlTab(e.current_parental_control_tab_selection))},resetParentalControlStyles:function(){$("#parental-control-settings .settings-input").removeClass("active"),$("#settings-parental-control-off-button").removeClass("active"),$("#settings-parental-control-on-button").removeClass("active")},hoverParentalControlTab:function(e){var t;key_focused||(t=this.keys,t.focused_part="parental_control_tabs",this.resetParentalControlStyles(),this.updateActiveClass(this.parental_control_tab_items,e),t.parental_control_tabs_selection=e)},clickParentalControlTab:function(e){var t=this.keys;switch(t.parental_control_tabs_selection=e,t.current_parental_control_tab_selection=e,$(this.parental_control_tab_items).removeClass("current").eq(e).addClass("current"),$("#settings-parental-control-change").hide(),$("#settings-parental-control-off").hide(),$("#settings-parental-control-on").hide(),$("#change-parental-validation-error").text(""),$("#turn-off-parental-validation-error").text(""),$("#turn-on-parental-validation-error").text(""),e){case 0:// Change Password
$("#settings-parental-control-change").show();break;case 1:// Turn off
$("#settings-parental-control-off").show()}},hoverParentalControlOption:function(e){if(!key_focused){var t=this.keys;switch(t.focused_part="parental_control",t.parental_control_selection=e,$(this.parental_control_tab_items).removeClass("active"),this.resetParentalControlStyles(),t.current_parental_control_tab_selection){case 0:// Change Password
t.parental_control_selection<3?$($("#settings-parental-control-change .settings-input")[e]).addClass("active"):3==t.parental_control_selection&&$("#settings-parental-control-change-button").addClass("active");break;case 1:// Turn Off
switch(t.parental_control_selection){case 0:// Current Password Input
$("#settings-current-parental-password-off").addClass("active");break;case 1:// Submit Button
$("#settings-parental-control-off-button").addClass("active")}break;case-1:// Turn on
switch(t.parental_control_selection){case 0:// New Password Input
$("#settings-create-parental-password").addClass("active");break;case 1:// Submit Button
$("#settings-parental-control-on-button").addClass("active")}}}},clickParentalControlOption:function(e){var t=this.keys;switch(t.parental_control_selection=e,$("#settings-current-parental-password").removeClass("active"),$("#settings-new-parental-password").removeClass("active"),$("#settings-confirm-parental-password").removeClass("active"),t.current_parental_control_tab_selection){case 0:// Change Password
switch(t.parental_control_selection){case 0:// Old Password
$("#settings-current-parental-password").focus().addClass("active");break;case 1:// New Password
$("#settings-new-parental-password").focus().addClass("active");break;case 2:// Confirm New Password
$("#settings-confirm-parental-password").focus().addClass("active");break;case 3:// Submit Button
this.submitParentalControlChangePassword()}break;case 1:// Turn off
switch(t.parental_control_selection){case 0:// Current Password
$("#settings-current-parental-password-off").focus().addClass("active");break;case 1:// Submit Button
this.submitParentalControlTurnOff()}break;case-1:// Turn on
switch(t.parental_control_selection){case 0:// New Password input
$("#settings-create-parental-password").focus().addClass("active");break;case 1:// Submit Button
this.submitParentalControlTurnOn()}}},submitParentalControlChangePassword:function(){var e=$("#change-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password").val()),i=$("#settings-new-parental-password").val(),s=$("#settings-confirm-parental-password").val();""==t||""==i||""==s?e.text("Please fill all fields"):t!=parent_account_password?e.text("Current password is incorrect"):i!=s?e.text("New passwords do not match"):i.length<4?$("#change-parental-validation-error").text("Password must be 4 digits"):(parent_account_password=i,localStorage.setItem(storage_id+"parent_account_password",i),this.saveParentPinToServer())},submitParentalControlTurnOff:function(){var e=$("#turn-off-parental-validation-error"),t=(e.text(""),$("#settings-current-parental-password-off").val());""==t?e.text("Please enter the current password"):t!=parent_account_password?e.text("Current password is incorrect"):(parent_account_password="off",localStorage.setItem(storage_id+"parent_account_password","off"),this.saveParentPinToServer(),this.setupParentalControlOptions())},submitParentalControlTurnOn:function(){var e=$("#turn-on-parental-validation-error"),t=(e.text(""),$("#settings-create-parental-password").val());""==t?e.text("Please enter the new password"):t.length<4?e.text("Password must be 4 digits"):(parent_account_password=t,localStorage.setItem(storage_id+"parent_account_password",t),this.saveParentPinToServer(),this.setupParentalControlOptions())},saveParentPinToServer:function(){var e=encryptRequest({mac_address:mac_address,pin_code:parent_account_password}),t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],a=this;$.ajax({method:"post",url:i+"/changeParentPin",data:{data:e},success:function(e){a.tried_panel_indexes=[];var t=decryptResponse(e);showToast("Successful","Parental control password changed successfully!"),
// Clear Change password inputs
$("#change-parental-validation-error").val(""),$("#settings-current-parental-password").val(""),$("#settings-new-parental-password").val(""),$("#settings-confirm-parental-password").val(""),
// Clear Current Password (Turn off page)
$("#settings-current-parental-password-off").val(""),
// Clear Create Password (Turn on page)
$("#settings-create-parental-password").val("")},error:function(){a.tried_panel_indexes.push(s),a.tried_panel_indexes.length<panel_urls.length&&a.saveParentPinToServer()}})},
// ########## End Parental Control Functions ##########
// ########## Start Hide Categories Functions ##########
createCategoriesDoms:function(){var e={live:LiveModel.getCategories(!0,!0),movies:VodModel.getCategories(!0,!0),series:SeriesModel.getCategories(!0,!0)},t={live:"",movies:"",series:""},i;
// Create the HTML DOM for all categories
for(i in e){var s=e[i];
// Loop on the array of categories
if(0!=s.length)for(var a=0;a<s.length;a++)t[i]+='        <div           class="setting-select-multi-option '+(s[a].is_hide?"":"checked")+'"          onmouseenter="settings_page.hoverHideCategoriesOption('+a+', true)"          onclick="settings_page.handleMenuClick()"        >          '+s[a].category_name+"        </div>"}var o=$("#hide-categories-settings .setting-select-multi-options");$(o[0]).html(t.live),$(o[1]).html(t.movies),$(o[2]).html(t.series),
// Update the variables with the newly created dom elements
this.hide_categories_live_items=$("#hide_categories_live_container .setting-select-multi-option"),this.hide_categories_movies_items=$("#hide_categories_movies_container .setting-select-multi-option"),this.hide_categories_series_items=$("#hide_categories_series_container .setting-select-multi-option")},setupHideCategoriesOptions:function(){var e=this.keys;
// Reset all selections
e.hide_categories_tabs_selection=0,
// Reset all styles
$(this.hide_categories_tabs_items).removeClass("current"),
// Hide movies and series categories until they are requested
$("#hide_categories_movies_container").hide(),// Hide Movies
$("#hide_categories_series_container").hide(),// Hide Series
// Click the first (which is already selected by default) or the currently selected tab
this.clickHideCategoriesTab(e.current_hide_categories_tabs_selection)},hoverHideCategoriesTab:function(e){var t=this.keys;t.focused_part="hide_categories_tabs",this.updateActiveClass(this.hide_categories_tabs_items,e),$(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),t.hide_categories_tabs_selection=e},clickHideCategoriesTab:function(e){var t=this.keys;// Hide Series
switch(t.hide_categories_tabs_selection=e,t.current_hide_categories_tabs_selection=e,t.hide_categories_selection=0,$(this.hide_categories_tabs_items).removeClass("current").eq(e).addClass("current"),$("#hide_categories_live_container").hide(),// Hide Live
$("#hide_categories_movies_container").hide(),// Hide Movies
$("#hide_categories_series_container").hide(),e){case 0:// Show Live Options
$("#hide_categories_live_container").show();break;case 1:// Show Movies Options
$("#hide_categories_movies_container").show();break;case 2:// Show Series Options
$("#hide_categories_series_container").show()}},hoverHideCategoriesOption:function(e,t){var i=this.keys;switch(i.focused_part="hide_categories",$(this.hide_categories_tabs_items).removeClass("active"),i.hide_categories_selection=e,i.current_hide_categories_tabs_selection){case 0:// Live
this.hoverOption("#hide_categories_live_container",this.hide_categories_live_items,i.hide_categories_selection,t);break;case 1:// Movies
this.hoverOption("#hide_categories_movies_container",this.hide_categories_movies_items,i.hide_categories_selection,t);break;case 2:// Series
this.hoverOption("#hide_categories_series_container",this.hide_categories_series_items,i.hide_categories_selection,t)}},clickHideCategoriesOption:function(e){var t=this.keys,i=[];switch(t.current_hide_categories_tabs_selection){case 0:// Live
i=LiveModel.getCategories(!0,!0),LiveModel.saveHiddenCategories(e,!i[e].is_hide),this.toggleCategoryItem($(this.hide_categories_live_items[e]),i[e].is_hide);break;case 1:// Movies
i=VodModel.getCategories(!0,!0),VodModel.saveHiddenCategories(e,!i[e].is_hide),this.toggleCategoryItem($(this.hide_categories_movies_items[e]),i[e].is_hide);break;case 2:// Series
i=SeriesModel.getCategories(!0,!0),SeriesModel.saveHiddenCategories(e,!i[e].is_hide),this.toggleCategoryItem($(this.hide_categories_series_items[e]),i[e].is_hide)}},toggleCategoryItem:function(e,t){t?e.removeClass("checked"):e.addClass("checked")},
// ########## End Hide Categories Functions ##########
// ########## Start Theme Functions ##########
createThemesDoms:function(){var i="";themes.map(function(e,t){i+='      <div         class="setting-select-option"        onmouseenter="settings_page.hoverThemesOption('+t+', true)"        onclick="settings_page.handleMenuClick()"      >        '+e.name+"      </div>"}),$("#settings-themes-options").html(i),this.themes_items=$("#theme-settings .setting-select-option")},setupThemesOptions:function(){for(var e=0,t,i=themes.length,t=0;t<i;t++)if(themes[t].name==settings.bg_img_name){e=t;break}$(this.themes_items).removeClass("current").eq(e).addClass("current")},hoverThemesOption:function(e,t){var i=this.keys;i.focused_part="themes",i.themes_selection=e,this.hoverOption("#settings-themes-options",this.themes_items,i.themes_selection,t),1==this.transparency_mode&&(this.transparency_mode=!1,$("#settings-page").css("opacity",1))},clickThemesOption:function(e){void 0!==themes[e]&&(settings.saveSettings("bg_img_url",themes[e].url,""),settings.saveSettings("bg_img_name",themes[e].name,""),changeBackgroundImage(),$(this.themes_items).removeClass("current").eq(e).addClass("current"),0==this.transparency_mode)&&(this.transparency_mode=!0,$("#settings-page").css("opacity",.25))},
// ########## End Theme Functions ##########
// ########## Start Change Language Functions ##########
getSelectedLanguageWords:function(e){for(var t={},i=0;i<languages.length;i++)if(languages[i].code===e){t=languages[i].words;break}current_words=t},changeDomsLanguage:function(){this.getSelectedLanguageWords(settings.language);var e=this.doms_translated;e.map(function(e,t){var i=$(t).data("word_code");void 0!==current_words[i]&&$(t).text(current_words[i])})},setupChangeLanguageOptions:function(){for(var e=0,t,i=languages.length,t=0;t<i;t++)if(languages[t].code===settings.language){e=t;break}$(this.change_language_items).removeClass("current").eq(e).addClass("current")},hoverChangeLanguageOption:function(e,t){var i=this.keys;i.focused_part="change_language",i.change_language_selection=e,this.hoverOption("#settings-languages-options",this.change_language_items,i.change_language_selection,t)},clickChangeLanguageOption:function(e){void 0!==languages[e]&&(settings.saveSettings("language",languages[e].code,""),this.changeDomsLanguage(),$(this.change_language_items).removeClass("current").eq(e).addClass("current"))},
// ########## End Change Language Functions ##########
// ########## Start Clear Cache Functions ##########
hoverClearCacheOption:function(e){var t=this.keys;t.focused_part="clear_cache",this.updateActiveClass(this.clear_cache_items,e),t.clear_cache_selection=e},clickClearCacheOption:function(){clear_cache_page.handleMenuClick(!0)},
// ########## End Clear Cache Functions ##########
// ########## Start Clear Watch Lists Functions ##########
hoverClearWatchListOption:function(e){var t=this.keys;t.focused_part="clear_watch_lists",this.updateActiveClass(this.clear_watch_lists_items,e),t.clear_watch_lists_selection=e},clickClearWatchListsOption:function(e){switch(this.keys.clear_watch_lists_selection){case 0:// Movies
clear_recent_page.handleMenuClick("vod");break;case 1:// Series
clear_recent_page.handleMenuClick("series")}},
// ########## End Clear Watch Lists Functions ##########
// ########## Start Subtitle Settings Functions ##########
setupSubtitleOptions:function(){$(this.subtitle_items).removeClass("current"),
// Set preview size and styles
this.updateSubtitleSize(settings.subtitle_size),this.updateSubtitleBackground(settings.subtitle_bg)},updateSubtitleSize:function(e){$(".subtitle-container").css({"font-size":e/16+"rem"}),$("#subtitle-settings-preview-text").css("font-size",e/16+"rem"),$(this.subtitle_items[0]).find(".settings-multi-value-option-value").text(e+"px"),settings.subtitle_size=e,settings.saveSettings("subtitle_size",e,"")},updateSubtitleBackground:function(e){$(".subtitle-container").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$("#subtitle-settings-preview-text").css({color:this.subtitle_bg_options[e].color,"background-color":this.subtitle_bg_options[e].background}),$(this.subtitle_items[1]).find(".settings-multi-value-option-value").text(e),settings.subtitle_bg=e,settings.saveSettings("subtitle_bg",e,"")},hoverSubtitleOption:function(e){$(this.subtitle_items).removeClass("current");var t=this.keys;t.focused_part="subtitle",t.subtitle_selection=e,this.updateActiveClass(this.subtitle_items,e)},clickSubtitleOption:function(e){this.keys.focused_part="subtitle_option",$(this.subtitle_items).removeClass("current").eq(e).addClass("current")},handleSubtitleSettingChange:function(e){var t=this.keys,i=Number(settings.subtitle_size),s=settings.subtitle_bg,a=Object.keys(this.subtitle_bg_options);switch(t.subtitle_selection){case 0:// Size
i+=5*e,i<20&&(i=20),80<i&&(i=80),this.updateSubtitleSize(i);break;case 1:// Background
var o=a.indexOf(s),o=o+e,o=(o<0&&(o=a.length-1),o>=a.length&&(o=0),a[o]);this.updateSubtitleBackground(o)}},
// ########## End Subtitle Settings Functions ##########
// ########## Start Font Size Functions ##########
setupFontSizeOptions:function(){var e={normal:0,large:1},e=e[settings.font_size]||0;$(this.font_size_items).removeClass("current").eq(e).addClass("current")},hoverFontSizeOption:function(e){var t=this.keys;t.focused_part="font_size",this.updateActiveClass(this.font_size_items,e),t.font_size_selection=e},clickFontSizeOption:function(e){var t=["normal","large"];
// Apply the choice without needing to restart
switch(settings.saveSettings("font_size",t[e],""),$(this.font_size_items).removeClass("current").eq(e).addClass("current"),e){case 0:document.body.classList.remove("large-font");break;case 1:document.body.classList.add("large-font")}},
// ########## End Font Size Functions ##########
// ########## Start Toggle TMDB Functions ##########
setupToggleTMDBOptions:function(){var e={off:0,on:1},e=e[settings.tmdb_choice]||0;$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},hoverToggleTMDBOption:function(e){var t=this.keys;t.focused_part="toggle_tmdb",this.updateActiveClass(this.toggle_tmdb_items,e),t.toggle_tmdb_selection=e},clickToggleTMDBOption:function(e){var t=["off","on"];settings.saveSettings("tmdb_choice",t[e],""),$(this.toggle_tmdb_items).removeClass("current").eq(e).addClass("current")},
// ########## End Toggle TMDB Functions ##########
// ########## Start Toggle Home Favorites Functions ##########
setupToggleHomeFavoritesOptions:function(){var e={off:0,on:1},e=e[settings.home_favorites_choice]||0;$(this.toggle_home_favorites_items).removeClass("current").eq(e).addClass("current")},hoverToggleHomeFavoritesOption:function(e){var t=this.keys;t.focused_part="toggle_home_favorites",this.updateActiveClass(this.toggle_home_favorites_items,e),t.toggle_home_favorites_selection=e},clickToggleHomeFavoritesOption:function(e){var t=["off","on"];settings.saveSettings("home_favorites_choice",t[e],""),$(this.toggle_home_favorites_items).removeClass("current").eq(e).addClass("current"),home_page.setLiveFavoritesChoice()},
// ########## End Toggle Home Favorites Functions ##########
// ########## Start Live Initialization Functions ##########
setupLiveInitializationOptions:function(){var e={default:0,last:1,favorite:2},e=e[settings.live_initialization_choice]||0;$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},hoverLiveInitializationOption:function(e){var t=this.keys;t.focused_part="live_initialization",this.updateActiveClass(this.live_initialization_items,e),t.live_initialization_selection=e},clickLiveInitializationOption:function(e){var t=["default","last","favorite"];settings.saveSettings("live_initialization_choice",t[e],""),$(this.live_initialization_items).removeClass("current").eq(e).addClass("current")},
// ########## End Live Initialization Functions ##########
// ########## Start Load on Demand Functions ##########
setupLoadOnDemandOptions:function(){var e=parseInt(localStorage.getItem(storage_id+"load_on_demand"));null==typeof e&&(e=1),e||0==e||(e=1),void 0===e&&(e=1),(isNaN(e)?$(this.load_on_demand_items).removeClass("current").eq(1):$(this.load_on_demand_items).removeClass("current").eq(e)).addClass("current")},hoverLoadOnDemandOption:function(e){var t=this.keys;t.focused_part="load_on_demand",this.updateActiveClass(this.load_on_demand_items,e),t.load_on_demand_selection=e},clickLoadOnDemandOption:function(e){localStorage.setItem(storage_id+"load_on_demand",e),$(this.load_on_demand_items).removeClass("current").eq(e).addClass("current"),0==e&&// Disabling needs refresh to fill pages data
window.location.reload()},
// ########## End Load on Demand Functions ##########  
handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"settings_selection":this.clickSettingsItem(e.settings_selection);break;case"parental_control_tabs":this.clickParentalControlTab(e.parental_control_tabs_selection);break;case"parental_control":this.clickParentalControlOption(e.parental_control_selection);break;case"hide_categories_tabs":this.clickHideCategoriesTab(e.hide_categories_tabs_selection);break;case"hide_categories":this.clickHideCategoriesOption(e.hide_categories_selection);break;case"themes":this.clickThemesOption(e.themes_selection);break;case"change_language":this.clickChangeLanguageOption(e.change_language_selection);break;case"clear_cache":this.clickClearCacheOption();break;case"clear_watch_lists":this.clickClearWatchListsOption();break;case"subtitle":this.clickSubtitleOption(e.subtitle_selection);break;case"font_size":this.clickFontSizeOption(e.font_size_selection);break;case"toggle_tmdb":this.clickToggleTMDBOption(e.toggle_tmdb_selection);break;case"toggle_home_favorites":this.clickToggleHomeFavoritesOption(e.toggle_home_favorites_selection);break;case"live_initialization":this.clickLiveInitializationOption(e.live_initialization_selection);break;case"load_on_demand":this.clickLoadOnDemandOption(e.load_on_demand_selection)}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":t.settings_selection=utilities.clampNumber(t.settings_selection+e,0,this.settings_doms.length-1),this.hoverSettingsItem(t.settings_selection);break;case"parental_control_tabs":0<e&&this.hoverParentalControlOption(0);break;case"parental_control":if(t.parental_control_selection+=e,-1==t.current_parental_control_tab_selection&&t.parental_control_selection<0)// Turned off
t.parental_control_selection=0;else if(t.parental_control_selection<0)t.parental_control_selection=0,this.hoverParentalControlTab(t.parental_control_tabs_selection);else{switch(t.current_parental_control_tab_selection){case 0:// Change Password
3<t.parental_control_selection&&(t.parental_control_selection=3);break;case 1:// Turn Off
case-1:// Turn on
1<t.parental_control_selection&&(t.parental_control_selection=1)}this.hoverParentalControlOption(t.parental_control_selection)}break;case"hide_categories_tabs":0<e&&this.hoverHideCategoriesOption(0);break;case"hide_categories":if(t.hide_categories_selection+=e,t.hide_categories_selection<0)t.hide_categories_selection=0,this.hoverHideCategoriesTab(t.hide_categories_tabs_selection);else{switch(t.current_hide_categories_tabs_selection){case 0:// Live
t.hide_categories_selection>=this.hide_categories_live_items.length&&(t.hide_categories_selection=this.hide_categories_live_items.length-1);break;case 1:// Movies
t.hide_categories_selection>=this.hide_categories_movies_items.length&&(t.hide_categories_selection=this.hide_categories_movies_items.length-1);break;case 2:// Series
t.hide_categories_selection>=this.hide_categories_series_items.length&&(t.hide_categories_selection=this.hide_categories_series_items.length-1)}this.hoverHideCategoriesOption(t.hide_categories_selection)}break;case"themes":t.themes_selection=utilities.clampNumber(t.themes_selection+e,0,this.themes_items.length-1),this.hoverThemesOption(t.themes_selection);break;case"change_language":t.change_language_selection=utilities.clampNumber(t.change_language_selection+e,0,this.change_language_items.length-1),this.hoverChangeLanguageOption(t.change_language_selection);break;
// Clear cache doesn't have multiple options, yet...
case"clear_watch_lists":t.clear_watch_lists_selection=utilities.clampNumber(t.clear_watch_lists_selection+e,0,this.clear_watch_lists_items.length-1),this.hoverClearWatchListOption(t.clear_watch_lists_selection);break;case"subtitle":t.subtitle_selection=utilities.clampNumber(t.subtitle_selection+e,0,this.subtitle_items.length-1),this.hoverSubtitleOption(t.subtitle_selection);break;case"font_size":t.font_size_selection=utilities.clampNumber(t.font_size_selection+e,0,this.font_size_items.length-1),this.hoverFontSizeOption(t.font_size_selection);break;case"toggle_tmdb":t.toggle_tmdb_selection=utilities.clampNumber(t.toggle_tmdb_selection+e,0,this.toggle_tmdb_items.length-1),this.hoverToggleTMDBOption(t.toggle_tmdb_selection);break;case"toggle_home_favorites":t.toggle_home_favorites_selection=utilities.clampNumber(t.toggle_home_favorites_selection+e,0,this.toggle_home_favorites_items.length-1),this.hoverToggleHomeFavoritesOption(t.toggle_home_favorites_selection);break;case"live_initialization":t.live_initialization_selection=utilities.clampNumber(t.live_initialization_selection+e,0,this.live_initialization_items.length-1),this.hoverLiveInitializationOption(t.live_initialization_selection);break;case"load_on_demand":t.load_on_demand_selection=utilities.clampNumber(t.load_on_demand_selection+e,0,this.load_on_demand_items.length-1),this.hoverLoadOnDemandOption(t.load_on_demand_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"settings_selection":0<e&&this.clickSettingsItem(t.settings_selection);break;case"parental_control_tabs":t.parental_control_tabs_selection+=e,t.parental_control_tabs_selection<0?(t.parental_control_tabs_selection=0,$(this.parental_control_tab_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.parental_control_tabs_selection>=this.parental_control_tab_items.length&&(t.parental_control_tabs_selection=this.parental_control_tab_items.length-1),this.hoverParentalControlTab(t.parental_control_tabs_selection));break;case"parental_control":e<0&&(this.resetParentalControlStyles(),this.hoverSettingsItem(t.settings_selection));break;case"hide_categories_tabs":t.hide_categories_tabs_selection+=e,t.hide_categories_tabs_selection<0?(t.hide_categories_tabs_selection=0,$(this.hide_categories_tabs_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection)):(t.hide_categories_tabs_selection>=this.hide_categories_tabs_items.length&&(t.hide_categories_tabs_selection=this.hide_categories_tabs_items.length-1),this.hoverHideCategoriesTab(t.hide_categories_tabs_selection));break;case"hide_categories":e<0&&($(this.hide_categories_live_items).removeClass("active"),$(this.hide_categories_movies_items).removeClass("active"),$(this.hide_categories_series_items).removeClass("active"),this.hoverSettingsItem(t.settings_selection));break;case"themes":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.themes_items));break;case"change_language":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.change_language_items));break;case"clear_cache":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_cache_items));break;case"clear_watch_lists":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.clear_watch_lists_items));break;case"subtitle":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.subtitle_items));break;case"subtitle_option":this.handleSubtitleSettingChange(e);break;case"font_size":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.font_size_items));break;case"toggle_tmdb":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_tmdb_items));break;case"toggle_home_favorites":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.toggle_home_favorites_items));break;case"live_initialization":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.live_initialization_items));break;case"load_on_demand":e<0&&this.hoverSettingsItem(t.settings_selection,$(this.load_on_demand_items))}},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},turn_off_page={keys:{focused_part:"menu_selection",// or, "search part", "slider part", "sub menu part", "search_value"
menu_selection:0},menu_doms:$("#turn-off-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="turn-off-page",this.hoverMenuItem(0),$("#turn-off-modal").modal("show")},goBack:function(){$("#turn-off-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part){// if sub menu is not opened yet
var e=this.keys;switch(e.menu_selection){case 0:"samsung"===platform?tizen.application.getCurrentApplication().exit():window.close();break;case 1:this.goBack()}}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(// if submenu not opened yet
t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},parent_confirm_page={keys:{focused_part:"menu_selection",// or, "search part", "slider part", "sub menu part", "search_value"
menu_selection:0},menu_doms:$(".parent-confirm-item"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="parent-confirm-page",this.resetPasswordInput(),this.hoverMenuItem(0),$("#parent-confirm-password-error").hide(),$("#parent-confirm-modal").modal("show"),
// Set up custom keyboard for the parent confirm password input
this.setupCustomKeyboardForInput()},goBack:function(){$("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"vod-summary-page"!==this.prev_route&&"series-summary-page"!==this.prev_route||(current_route="vod-series-page"),"channel-category-page"===this.prev_route&&(current_route="channel-category-page")},setupCustomKeyboardForInput:function(){var e;USE_CUSTOM_KEYBOARD&&"function"==typeof inputFocusHandler&&"function"==typeof inputBlurHandler&&(e=document.getElementById("parent-confirm-password"),e)&&(e.removeEventListener("focus",inputFocusHandler),e.removeEventListener("blur",inputBlurHandler),e.addEventListener("focus",inputFocusHandler),e.addEventListener("blur",inputBlurHandler),e.addEventListener("click",function(e){USE_CUSTOM_KEYBOARD&&(e.preventDefault(),e.stopPropagation(),custom_keyboard.isShown||this.focus())}))},resetPasswordInput:function(){var e=$("#parent-confirm-password"),t=e.clone().val(""),i=(e.replaceWith(t),this);setTimeout(function(){i.setupCustomKeyboardForInput()},100)},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;if("menu_selection"===e.focused_part){// if sub menu is not opened yet
var e=this.keys;switch(e.menu_selection){case 0:
// $(this.menu_doms[0]).find('input').val('');
$(this.menu_doms[0]).find("input").focus();break;case 1:var t=$(this.menu_doms[0]).find("input").val();$("#parent-confirm-password-error").hide(),t!=parent_account_password?$("#parent-confirm-password-error").slideDown():($("#parent-confirm-modal").modal("hide"),current_route=this.prev_route,"channel-page"===this.prev_route?channel_page.showCategoryChannels():"vod-series-page"===this.prev_route?vod_series_page.showCategoryContent():"stream-category-page"===this.prev_route&&stream_category_page.showStreamPage());break;case 2:this.goBack()}}},handleMenusUpDown:function(e){var t=this.keys;1<=t.menu_selection&&0<e||(1<=t.menu_selection&&e<0?t.menu_selection=0:0==t.menu_selection&&0<e&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&1<=t.menu_selection&&(t.menu_selection+=e,t.menu_selection<1&&(t.menu_selection=0),2<t.menu_selection&&(t.menu_selection=2),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},playlist_edit_page={initiated:!1,keys:{focused_part:"kind_selection",kind_selection:0,playlist_edit_selection:0},playlist_edit_doms:$(".playlist-edit-item"),kind_doms:$(".playlist-kind-item"),playlist_type:"general",back_btn_dom:null,playlist:null,is_loading:!1,tried_panel_indexes:[],init:function(e){this.tried_panel_indexes=[],this.playlist=e,$("#playlist-page").addClass("hide"),$("#playlist-edit-page").removeClass("hide"),$("#playlist-edit-error-message").hide();var t="",i="",s="",a="";this.playlist_type="general",e&&(a=e.playlist_name,s=e.origin_url,"xc"===e.origin_type)&&(t=e.username,i=e.password,this.playlist_type="xc"),$(this.playlist_edit_doms[0]).val(a),$(this.playlist_edit_doms[1]).val(s),$(this.playlist_edit_doms[2]).val(t),$(this.playlist_edit_doms[3]).val(i),"general"===this.playlist_type?this.keys.playlist_edit_selection=0:this.keys.playlist_edit_selection=1,this.playListTypeChanged(),this.hoverKindItem(this.keys.playlist_edit_selection),current_route="playlist-edit-page"},playListTypeChanged:function(){var e=this.playlist_type;$(this.kind_doms).removeClass("current"),("general"===e?($(".xc-case").removeClass("visible"),$(this.kind_doms[0])):($(".xc-case").addClass("visible"),$(this.kind_doms[1]))).addClass("current")},savePlaylist:function(){var t=this.playlist_type,i=$(this.playlist_edit_doms[0]).val(),s=$(this.playlist_edit_doms[1]).val(),a=$(this.playlist_edit_doms[2]).val(),o=$(this.playlist_edit_doms[3]).val();if(i)if(s){if("xc"===t){if(!a)return void $("#playlist-edit-error-message").text("Sorry, username is required").slideDown();if(!o)return void $("#playlist-edit-error-message").text("Sorry, password is required").slideDown()}$("#playlist-edit-error-message").slideUp(),showLoader(!0),this.is_loading=!0;var e=moment().unix(),n=this.playlist,r="non_saved_"+e,l=!0,e=(n&&(r=n.id,l=!1),s),c=("xc"===t&&(e+="/player_api.php?username="+a+"&password="+o),this);$.ajax({method:"get",url:e,success:function(e){if("xc"===t){if(!e||!e.user_info)return void c.showPlaylistErrorMessage();var e=e.user_info;if(0==e.auth||e.status&&("Expired"===e.status||"Banned"===e.status))return void c.showPlaylistErrorMessage()}var e={id:r,is_created:l,playlist_type:c.playlist_type,url:s,origin_type:t,origin_url:s,password:o,username:a,playlist_name:i};c.updatePlaylistWithServer(e)},error:function(){c.showPlaylistErrorMessage()}})}else $("#playlist-edit-error-message").text("Sorry, playlist url is required").slideDown();else $("#playlist-edit-error-message").text("Sorry, playlist name is required").slideDown()},showPlaylistErrorMessage:function(){showLoader(!1),this.is_loading=!1,$("#playlist-edit-error-message").html("Sorry, Your playlist is not working<br>Please check your playlist and try again").slideDown()},updatePlaylistWithServer:function(e){var t=e.is_created,i=encryptRequest({mac_address:mac_address,app_type:platform,playlists:[e]}),s=pickPanelUrl(this.tried_panel_indexes),a=s[1],o=s[0],n=this;$.ajax({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+a+"/update_playlist",data:{data:i},success:function(e){n.tried_panel_indexes=[];var e=decryptResponse(e);e[0].is_created=t,n.playListSaved(e[0],!0)},error:function(){n.tried_panel_indexes.push(o),n.tried_panel_indexes.length<panel_urls.length?n.updatePlaylistWithServer(e):n.playListSaved(e,!1)}})},playListSaved:function(e,t){var i,i=(e.origin_type=e.playlist_type,e.origin_url=e.url,"general"===e.playlist_type&&(i=parseM3uUrl(e.url),"xc"===i.playlist_type)&&(e.playlist_type="xc",e.url=i.url,e.username=i.username,e.password=i.password),localStorage.getItem(storage_id+"local_data")),i=i?JSON.parse(i):{},s=(i.playlist_urls||(i.playlist_urls=[]),i.playlist_urls),a=-1;
// *****Local Data Operations****** //
if(t)// if succeed, remove current editing playlist from local.
-1!=a&&s.splice(a,1);else{// save playlist into local
for(var o=0;o<s.length;o++)if(s[o].id==e.id){a=o;break}-1==a?s.push(e):s[a]=e}i.playlist_urls=s,localStorage.setItem(storage_id+"local_data",JSON.stringify(i));
// ******* End Local Data Operation ******** //
var i=e.is_created,i,t=(i?// if create new playlist
// if(playlist_urls.length==1 && playlist_urls[0].id=='demo'){
//     playlist_urls=[];
//     settings.saveSettings('playlist',{},'array');
// }
playlist_urls.push(e):(// if edit previous item.
playlist_urls[playlist_page.keys.playlist_selection]=e,i=e.id,t&&(i=e.origin_id,changeLocalStorageKeysForPlaylist([i],[e.id])),settings.playlist.id==i&&(settings.saveSettings("playlist",e,"array"),settings.saveSettings("playlist_id",e.id,""))),saveData("playlist_urls",playlist_urls),localStorage.getItem(storage_id+"api_data"));t&&(t=JSON.parse(t),t.urls=playlist_urls,localStorage.setItem(storage_id+"api_data",JSON.stringify(t))),showLoader(!1),this.is_loading=!1,playlist_page.initiated=!1,this.goBack()},hoverKindItem:function(e){var t=this.keys;t.focused_part="kind_selection",t.kind_selection=e,$(this.playlist_edit_doms).removeClass("active"),$(this.kind_doms).removeClass("active"),$(this.kind_doms[e]).addClass("active")},hoverPlaylistEditItem:function(e){var t=this.keys;t.focused_part="playlist_edit_selection",$(this.playlist_edit_doms).removeClass("active"),$(this.kind_doms).removeClass("active"),t.playlist_edit_selection=e,$(this.playlist_edit_doms[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"kind_selection":0==e.kind_selection?this.playlist_type="general":this.playlist_type="xc",this.playListTypeChanged();break;case"playlist_edit_selection":e.playlist_edit_selection<4?($(this.playlist_edit_doms[e.playlist_edit_selection]).focus(),setSelectionRange(this.playlist_edit_doms[e.playlist_edit_selection])):4==e.playlist_edit_selection?this.savePlaylist():this.goBack()}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"kind_selection":t.kind_selection=0<e?1:0,this.hoverKindItem(t.kind_selection);break;case"playlist_edit_selection":4<=t.playlist_edit_selection&&(t.playlist_edit_selection=0<e?5:4,this.hoverPlaylistEditItem(t.playlist_edit_selection))}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"kind_selection":0<e&&this.hoverPlaylistEditItem(0);break;case"playlist_edit_selection":if(4<=t.playlist_edit_selection){if(!(e<0))return;"xc"===this.playlist_type?t.playlist_edit_selection=3:t.playlist_edit_selection=1}else t.playlist_edit_selection+=e,"general"===this.playlist_type&&2==t.playlist_edit_selection&&0<e&&(t.playlist_edit_selection=4);t.playlist_edit_selection<0?this.hoverKindItem(t.kind_selection):this.hoverPlaylistEditItem(t.playlist_edit_selection)}},goBack:function(){$("#playlist-edit-page").addClass("hide"),playlist_page.init()},HandleKey:function(e){if(this.is_loading)e.keyCode===tvKey.RETURN&&(showLoader(!1),this.is_loading=!1,this.goBack());else switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},SrtParser={seperator:",",init:function(){this.seperator=","},timestampToSeconds:function(e){var e=e.split(","),t=e[0],e=e[1],e=parseInt(e),t=t.split(":").map(function(e){return parseInt(e)}),i=t[0],s=t[1],t=t[2];return.001*e+t+60*s+3600*i},correctFormat:function(e){
// Fix the format if the format is wrong
// 00:00:28.9670 Become 00:00:28,967
// 00:00:28.967  Become 00:00:28,967
// 00:00:28.96   Become 00:00:28,960
// 00:00:28.9    Become 00:00:28,900
// 00:00:28,96   Become 00:00:28,960
// 00:00:28,9    Become 00:00:28,900
// 00:00:28,0    Become 00:00:28,000
// 00:00:28,01   Become 00:00:28,010
// 0:00:10,500   Become 00:00:10,500
var e=e.replace(".",","),t=null,i=null,s=null,a=null,e=e.split(","),o=e[0],e=e[1],a=this.fixed_str_digit(3,e,!0),e=o.split(":"),o=e[0],n=e[1],e=e[2],t=this.fixed_str_digit(2,o,!1),i=this.fixed_str_digit(2,n,!1),s=this.fixed_str_digit(2,e,!1);return t+":"+i+":"+s+","+a},
/*
    // make sure string is 'how_many_digit' long
    // if str is shorter than how_many_digit, pad with 0
    // if str is longer than how_many_digit, slice from the beginning
    // Example:

    Input: fixed_str_digit(3, '100')
    Output: 100
    Explain: unchanged, because "100" is 3 digit

    Input: fixed_str_digit(3, '50')
    Output: 500
    Explain: pad end with 0

    Input: fixed_str_digit(3, '50', false)
    Output: 050
    Explain: pad start with 0

    Input: fixed_str_digit(3, '7771')
    Output: 777
    Explain: slice from beginning
    */
fixed_str_digit:function(e,t,i){return t.length==e?t:e<t.length?t.slice(0,e):t.length<e?i?t.padEnd(e,"0"):t.padStart(e,"0"):void 0},tryComma:function(e){e=e.replace(/\r/g,"");var t=/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g,e=e.split(t);// remove first '' in array
return e.shift(),e},tryDot:function(e){e=e.replace(/\r/g,"");var t=/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g,e=e.split(t);return e.shift(),// remove first '' in array
this.seperator=".",e},fromSrt:function(e){if(""==e.trim())return[];for(var t=(new Date).getTime(),e=e,i=this.tryComma(e),s=(0==i.length&&(i=this.tryDot(e)),[]),a=0;a<i.length;a+=4){var o=this.correctFormat(i[a+1].trim()),n=this.correctFormat(i[a+2].trim()),o={id:i[a].trim(),startTime:o,startSeconds:this.timestampToSeconds(o),endTime:n,endSeconds:this.timestampToSeconds(n),text:i[a+3].trim()};s.push(o)}var r=(new Date).getTime();return s}},SrtOperation={current_srt_index:0,next_srt_time:0,srt:[],stopped:!1,subtitle_shown:!1,time_difference:0,init:function(e,t){// will set initial time and initial index from parsed subtitle text array
// we will save always the index and time for current time subtitle text
this.time_difference=0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1;var i=[];if(e)try{SrtParser.init(),i=SrtParser.fromSrt(e)}catch(e){}this.srt=i,0<i.length?(this.stopped=!1,this.current_srt_index=this.findIndex(t,0,i.length-1),this.current_srt_index<0&&(this.current_srt_index=0),this.next_srt_time=0):this.stopped=!0},findIndex:function(e,t,i){var s,a;
// Base Condition
// we will use binary search algorithm here
return e+=this.time_difference,0==e?0:(s=this.srt,i<t?i:(
// Compare mid with given key x
a=Math.floor((t+i)/2),s[a].startSeconds<=e&&e<s[a].endTime?a:
// If element at mid is greater than x,
// search in the left half of mid
s[a].startSeconds>e?this.findIndex(e,t,a-1):this.findIndex(e,a+1,i)))},timeChange:function(e){if(!this.stopped){e+=this.time_difference,Math.random();var t=this.current_srt_index,i=this.srt[t];if(e>=i.startSeconds&&e<i.endSeconds)this.subtitle_shown||$("#"+media_player.parent_id).find(".subtitle-container").html(i.text);else if(e>i.endSeconds){var t=this.srt[t+1];try{e<t.startSeconds?this.subtitle_shown&&($("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1):t.endSeconds>e?($("#"+media_player.parent_id).find(".subtitle-container").html(t.text),this.subtitle_shown=!0,this.current_srt_index+=1):(this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0))}catch(e){}}else if(e<i.startSeconds)try{this.current_srt_index=this.findIndex(e,0,this.srt.length-1),this.current_srt_index<0&&(this.current_srt_index=0)}catch(e){}}},stopOperation:function(){this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},setTimeDifference:function(e){this.time_difference=parseInt(e),$("#"+media_player.parent_id).find(".subtitle-container").html(""),this.subtitle_shown=!1},deStruct:function(){this.srt=[],this.stopped=!0,$("#"+media_player.parent_id).find(".subtitle-container").html("")}},catchup_page={player:null,sorted_programmes:[],date_doms:[],programme_doms:[],current_programmes:[],stream_id:"",keys:{focused_part:"date_selection",//and also, there is "date_programme_selection"
date_selection:0,programme_selection:0},channel:null,is_loading:!1,prev_focus_dom:null,init:function(e,t){this.channel=e,this.stream_id=e.stream_id,current_route="catch-up",showLoader(!0),this.is_loading=!0,$("#vod-series-page").addClass("hide"),$("#epg-page").removeClass("hide"),$("#epg-title-logo").attr("src",e.stream_icon),$("#epg-channel-title").text(e.name),
// var result_programmes=[];
// var format_text='Y-MM-DD HH:mm'
this.sorted_programmes=this.sortProgrammesByDate(t);var i="";this.sorted_programmes.map(function(e,t){i+='<div class="epg-date-item-container bg-focus1"   onmouseenter="catchup_page.selectDate('+t+')"   onclick="catchup_page.handleMenuClick()">\n   <div class="epg-date-item-day">'+e.day_string+'</div>\n   <div class="epg-date-item-date">'+e.date_string+"</div>\n</div>"}),$("#epg-date-parts").html(i),this.date_doms=$(".epg-date-item-container"),this.keys.focused_part="date_selection",this.keys.date_selection=0,0<this.date_doms.length&&$(this.date_doms[0]).addClass("active"),this.selectDate(0),this.is_loading=!1,showLoader(!1)},goBack:function(){var e=this.keys;switch(e.focused_part){case"programme_selection":this.selectDate(e.date_selection);break;case"date_selection":$("#epg-page").addClass("hide"),current_route="vod-series-page",$("#vod-series-page").removeClass("hide"),vod_series_page.hoverMovieItem(vod_series_page.menu_doms[vod_series_page.keys.menu_selection])}},sortProgrammesByDate:function(e){for(var t={},i=moment().format("Y-MM-DD HH:mm:ss"),s=0;s<e.length;s++){var a=e[s];if(e[s].start>=i||e[s].stop>=i)break;var o=e[s].start,o=o.substr(0,10),n,r,n;t[o]?t[o].programmes.push(e[s]):(n=moment(e[s].start),r=n.format("dddd"),n=n.format("MMM D"),t[o]={day_string:r,date_string:n,programmes:[e[s]]})}var l=[];return Object.keys(t).map(function(e){l.push(t[e])}),l},selectDate:function(e){var t=this.keys,n,i;0<this.sorted_programmes.length&&(this.keys.focused_part="date_selection",this.keys.date_selection=e,n="",this.current_programmes=this.sorted_programmes[e].programmes,this.sorted_programmes[e].programmes.map(function(e,t){var i="",s=0,a=e.start,o=e.stop,a=a.substr(11),i='<img class="epg-clock-icon" src="'+HOST+'app_src_min/images/clock.png">',s=1;n+='<div class="epg-programme-item-container bg-focus1" data-can_play="1"                        onmouseenter="catchup_page.selectProgramme('+t+',false)"                        onclick="catchup_page.selectProgramme('+t+',true)"                    >                       <span class="epg-programme-time">'+a+"</span>"+i+'                       <span class="epg-programme-title">'+getAtob(e.title)+"</span>                    </div>"}),$("#epg-programmes-container").html(n),this.keys.programme_selection=0,this.programme_doms=$(".epg-programme-item-container"),$("#epg-channel-date").text(this.sorted_programmes[e].date_string),i="No Description","string"==typeof this.current_programmes[0].desc&&(i=getAtob(this.current_programmes[0].desc)),$("#epg-programme-desc").text(i),current_route="catch-up",$(this.prev_focus_dom).removeClass("active"),$(this.date_doms[e]).addClass("active"),this.prev_focus_dom=this.date_doms[e],moveScrollPosition($("#epg-date-parts"),this.date_doms[e],"vertical",!1))},selectProgramme:function(e,t){this.keys.focused_part="programme_selection",this.keys.programme_selection=e,$(this.prev_focus_dom).removeClass("active"),$(this.programme_doms[e]).addClass("active"),this.prev_focus_dom=this.programme_doms[e],current_route="catch-up";var i="";"string"==typeof this.current_programmes[e].desc&&(i=getAtob(this.current_programmes[e].desc)),$("#epg-programme-desc").text(i),moveScrollPosition($("#epg-programmes-container"),this.programme_doms[e],"vertical",!1),t&&this.playVideo()},playVideo:function(){var e=this.keys,e=this.programme_doms[e.programme_selection],e=$(e).data("can_play");0==e?showToast("Sorry","No archive video available for this programme"):($("#epg-page").addClass("hide"),vod_series_player_page.init(this.channel,"epg","catch-up","",!0))},handleMenuClick:function(){var e=this.keys;"programme_selection"===e.focused_part&&this.playVideo()},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"date_selection":t.date_selection+=e,t.date_selection<0?t.date_selection=0:(t.date_selection>=this.date_doms.length&&(t.date_selection=this.date_doms.length-1),this.selectDate(t.date_selection),t.programme_selection=0);break;case"programme_selection":t.programme_selection+=e,t.programme_selection<0?t.programme_selection=0:(t.programme_selection>=this.programme_doms.length&&(t.programme_selection=this.programme_doms.length-1),this.selectProgramme(t.programme_selection,!1))}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"date_selection":0<this.programme_doms.length&&this.selectProgramme(t.programme_selection,!1);break;case"programme_selection":this.selectDate(t.date_selection)}},HandleKey:function(e){if(this.is_loading){if(e.keyCode!=tvKey.RETURN)return;this.goBack(),showLoader(!1)}switch(e.keyCode){case tvKey.RIGHT:catchup_page.handleMenuLeftRight(1);break;case tvKey.LEFT:catchup_page.handleMenuLeftRight(-1);break;case tvKey.DOWN:catchup_page.handleMenusUpDown(1);break;case tvKey.UP:catchup_page.handleMenusUpDown(-1);break;case tvKey.ENTER:catchup_page.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},search_page={keys:{top_menu_selection:0,hor_keys:[0,0,0],v_selection:0,movie_selection:[],focused_part:""},prev_dom:null,is_loading:!1,filtered_movies:[],render_counts:[0,0,0],prev_keyword:"",search_timeout:null,prev_route:"",top_menu_doms:$(".search-page-top-menu"),movie_doms:[],render_count_increment:50,searching_for:[],parent_elements:[$("#filtered_channels_container")[0],$("#filtered_movies_container")[0],$("#filtered_series_container")[0]],init:function(e,t){switch(this.prev_route=e,$("#filtered_replay_container").html(""),$("#filtered_channels_container").html(""),$("#filtered_movies_container").html(""),$("#filtered_series_container").html(""),$(".search-page-stream-type-container.replay").hide(),$(".search-page-stream-type-container.live").hide(),$(".search-page-stream-type-container.vod").hide(),$(".search-page-stream-type-container.series").hide(),
// Determine what the search is for
this.searching_for=t||"all",this.searching_for){case"vod":$(".search-page-stream-type-container.vod").show();break;case"series":$(".search-page-stream-type-container.series").show();break;case"live":$(".search-page-stream-type-container.live").show();break;case"replay":$(".search-page-stream-type-container.replay").show();break;default:$(".search-page-stream-type-container.live").show(),$(".search-page-stream-type-container.vod").show(),$(".search-page-stream-type-container.series").show()}this.filtered_movies=[],this.keys.hor_keys=[0,0,0],this.prev_keyword="",$("#search-page-input").val(""),$("#home-page").addClass("hide"),$("#channel-page").addClass("hide"),$("#search-page").show(),current_route="search-page",this.hoverTopMenu(0),this.handleMenuClick()},goBack:function(){clearTimeout(this.search_timeout),$("#search-page-input").blur(),$("#search-page").hide();var e="#"+this.prev_route;current_route="channel-page"==this.prev_route?($("#channel-page").removeClass("hide"),"channel-page"):($(e).removeClass("hide"),this.prev_route)},keywordChange:function(){clearTimeout(this.search_timeout);var r=this;this.search_timeout=setTimeout(function(){var e=r.prev_keyword,t=$("#search-page-input").val().toLowerCase();if(e!=t&&t){showLoader(!0),r.is_loading=!0;var i=VodModel.getCategories(!1,!1),s=SeriesModel.getCategories(!1,!1),a=LiveModel.getCategories(!1,!1),o=r.getReplayCategories();switch(r.filtered_movies=[],r.searching_for){case"vod":
// Add empty array for live
r.filtered_movies.push([]),r.filtered_movies.push(r.getFilteredMovies(i,t)),
// Add empty array for series
r.filtered_movies.push([]);break;case"series":
// Add empty array for live
r.filtered_movies.push([]),
// Add empty array for movies
r.filtered_movies.push([]),r.filtered_movies.push(r.getFilteredMovies(s,t));break;case"live":r.filtered_movies.push(r.getFilteredMovies(a,t)),
// Add empty array for movies
r.filtered_movies.push([]),
// Add empty array for series
r.filtered_movies.push([]);break;case"replay":r.filtered_movies.push(r.getFilteredMovies(o,t)),
// Add empty array for movies
r.filtered_movies.push([]),
// Add empty array for series
r.filtered_movies.push([]);break;default:r.filtered_movies.push(r.getFilteredMovies(a,t)),r.filtered_movies.push(r.getFilteredMovies(i,t)),r.filtered_movies.push(r.getFilteredMovies(s,t))}switch(r.render_counts=[0,0,0],r.keys.hor_keys=[0,0,0],r.movie_doms=[[],[],[]],$(r.parent_elements[0]).html(""),$(r.parent_elements[1]).html(""),$(r.parent_elements[2]).html(""),r.searching_for){case"vod":r.renderFilteredMovies(1,!1,!1);break;case"series":r.renderFilteredMovies(2,!1,!1);break;case"live":r.renderFilteredMovies(0,!1,!1);break;case"replay":r.renderFilteredMovies(0,!1,!1,!0);break;default:r.renderFilteredMovies(0,!1,!0),r.renderFilteredMovies(1,!1,!0),r.renderFilteredMovies(2,!1,!0)}r.prev_keyword=t;var e=2e3,n=r.filtered_movies[0].length+r.filtered_movies[1].length+r.filtered_movies[2].length;n<50&&(e=500),setTimeout(function(){showLoader(!1),r.is_loading=!1},e)}},400)},getReplayCategories:function(){
// Get all categories from the LiveModel
var e=LiveModel.getCategories(!1,!1),e=e.map(function(e){
// For each category, filter only movies that have TV archive enabled
// tv_archive != 0 indicates replay is available
// tv_archive_duration != 0 indicates there is actual content to replay
var t=e.movies.filter(function(e){return 0!=e.tv_archive&&0!=e.tv_archive_duration}),e=JSON.parse(JSON.stringify(e));
// Create a deep copy of the category element
// Replace the movies array with only the filtered replay-enabled movies
return e.movies=t,e}).filter(function(e){return 0<e.movies.length});
// Process the categories to filter only those with replay-enabled content:
return e},getFilteredMovies:function(e,t){var i=[];return e.map(function(e){var e;checkForAdult(e,"category",[])||"resume"===e.category_id||(e=e.movies.filter(function(e){return e.name.toLowerCase().includes(t)}),i=i.concat(e))}),i},renderFilteredMovies:function(s,e,t,i){i=i||!1;var a=this.parent_elements[s],o=(i&&(a=$("#filtered_replay_container")[0]),this.render_counts[s]),i,n,r,l,c,d,h,_,u,m,p,t;0==this.filtered_movies[s].length?$(a).append("<p class='search-no-results'>No results found!</p>"):o>=this.filtered_movies[s].length||(i=this.render_count_increment,e&&(showLoader(!0),this.is_loading=!0),n=this,r="",l=0==s?"channel":"vod",c="stream_icon",d=[],u="stream_id",m=HOST+"app_src_min/images/default_movie.png",0==s&&(m=HOST+"app_src_min/images/logo.png",_=LiveModel.favourite_ids),1==s&&(
// if it is vod
d=VodModel.saved_video_times,_=VodModel.favourite_ids),2==s&&(c="cover",_=SeriesModel.favourite_ids,u="series_id"),p=this.filtered_movies[s].slice(o,o+i),t?$(".search-page-stream-items-container").addClass("one-line"):$(".search-page-stream-items-container").removeClass("one-line"),t=1500,p.length<10&&(t=0),p.map(function(e,t){var i=_.includes(e[u]);r+='<div class="filtered-movie-container '+l+'">                      <div class="filtered-movie-wrapper"                          onmouseenter="search_page.hoverMovie('+(o+t)+","+s+')"                          onclick="search_page.handleMenuClick()"                       >'+(i?'<div class="favourite-badge"><i class="fa fa-star"></i></div>':"")+'<div class="filtered-movie-img-wrapper">                              <img src="'+e[c]+'" onerror="this.src=\''+m+'\'">                          </div>                          <div class="filtered-movie-title-wrapper">                              <div class="filtered-movie-title">'+e.name+"</div>                           </div>                       </div>                  </div>"}),this.render_counts[s]+=i,$(a).append(r),this.movie_doms[s]=$(a).find(".filtered-movie-wrapper"),e&&setTimeout(function(){showLoader(!1),n.is_loading=!1},t))},hoverTopMenu:function(e){var t,t;key_focused||(t=this.keys,t.focused_part="top_menu_selection",t.top_menu_selection=e,$(this.prev_dom).removeClass("active"),$(this.top_menu_doms[e]).addClass("active"),this.prev_dom=this.top_menu_doms[e],t=this.parent_elements[0],moveScrollPosition($("#search-page-contents-wrapper"),$(t).closest(".search-page-stream-type-container"),"vertical",!1))},hoverMovie:function(e,t){if(!key_focused){var i=this.keys,i=(
// Update the horizontal and vertical selection indices
i.hor_keys[t]=e,// Update the horizontal position for the given row
i.v_selection=t,// Update the vertical selection to the current row
i.focused_part="movie_selection",this.parent_elements[t]);
// Adjust the vertical scroll position to ensure the current row is in view
if(// Get the parent container for the current row
// Remove the "active" class from the previously focused DOM element
$(this.prev_dom).removeClass("active"),
// Add the "active" class to the new DOM element for the selected movie
$(this.movie_doms[t][e]).addClass("active"),
// Update the reference to the currently active DOM element
this.prev_dom=this.movie_doms[t][e],
// Adjust the horizontal scroll position to ensure the selected movie is in view
moveScrollPosition(i,$(this.prev_dom).closest(".filtered-movie-container"),"horizontal",!1),"all"==this.searching_for)moveScrollPosition($("#search-page-contents-wrapper"),$(i).closest(".search-page-stream-type-container"),"vertical",!1);else{var s="";switch(this.searching_for){case"replay":s="replay";break;case"live":s="channels";break;case"vod":s="movies";break;case"series":s="series"}moveScrollPosition($("#filtered_"+s+"_container"),this.movie_doms[t][e],"vertical",!1)}}},handleMenuLeftRight:function(e){var t=this.keys;if(!key_focused)switch(t.focused_part){case"top_menu_selection":break;case"movie_selection":var i=t.hor_keys[t.v_selection]+e;i<0&&(i=0),i>=this.movie_doms[t.v_selection].length&&(i=this.movie_doms[t.v_selection].length-1),this.hoverMovie(i,t.v_selection),0<e&&i>=this.movie_doms[t.v_selection].length-9&&this.renderFilteredMovies(t.v_selection,!0)}},handleMenuUpDown:function(e){var t=this.keys,i=this,s;switch(t.focused_part){case"top_menu_selection":if(!key_focused&&0<e){if("vod"==this.searching_for)s=1;else if("series"==this.searching_for)s=2;else if("live"==this.searching_for)s=0;else
// Find first non-empty section
for(var a=0;a<this.filtered_movies.length;a++)if(0<this.filtered_movies[a].length){s=a;break}null!=s&&0<this.filtered_movies[s].length&&(t.v_selection=s,this.hoverMovie(t.hor_keys[s],s));for(var a=0;a<this.filtered_movies.length;a++)if(0<this.filtered_movies[a].length){t.v_selection=a,this.hoverMovie(t.hor_keys[a],a);break}}break;case"movie_selection":if("all"==this.searching_for){var o=-1;// Initialize a variable to store the vertical selection index
if(0<e){
// If increment is positive, we're navigating downward
if(2<=t.v_selection)return;// If already at the last row (index 2 for all), exit
// Loop through rows below the current selection to find the next row with movies
for(var a=t.v_selection+1;a<3;a++)if(0<this.filtered_movies[a].length){o=a;// Set the next valid row index
break}}else
// If increment is negative, we're navigating upward
// Loop through rows above the current selection to find the previous row with movies
for(var a=t.v_selection-1;0<=a;a--)if(0<this.filtered_movies[a].length){o=a;// Set the previous valid row index
break}
// If navigating upward (increment < 0) and:
// - Already at the top item or no valid row is found (ver_selection === -1)
e<0&&(t.v_selection<=0||-1===o)||-1===o?this.hoverTopMenu(0):
// If a valid row is found
-1!==o&&
// Update the hover to the new row and horizontal position
this.hoverMovie(t.hor_keys[o],o)}else{var o=-1;// Initialize a variable to store the vertical selection index
switch(this.searching_for){case"replay":case"live":o=0;break;case"vod":o=1;break;case"series":o=2}"live"==this.searching_for||"replay"==this.searching_for?t.hor_keys[o]+=6*e:t.hor_keys[o]+=8*e;var n=this.filtered_movies[o];
// If navigating upward (increment < 0) and:
// - Already at the top row or no valid row is found (ver_selection === -1)
(t.hor_keys[o]>=n.length&&(t.hor_keys[o]=n.length-1),t.hor_keys[o]<0)?(t.hor_keys[o]=0,this.hoverTopMenu(0)):(
// If a valid row is found
-1!==o&&
// Update the hover to the new row and horizontal position
this.hoverMovie(t.hor_keys[o],o),0<e&&t.hor_keys[o]>=this.movie_doms[t.v_selection].length-9&&this.renderFilteredMovies(t.v_selection,!0))}}},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"top_menu_selection":0==e.top_menu_selection&&(key_focused?$("#search-page-input").blur():($("#search-page-input").focus(),setSelectionRange($("#search-page-input"))));break;case"movie_selection":var t=this.filtered_movies[e.v_selection][e.hor_keys[e.v_selection]];switch($("#search-page").hide(),e.v_selection){case 0:"replay"==this.searching_for?vod_series_page.init("replay",t):channel_page.init("search-page",t);break;case 1:current_movie=this.filtered_movies[1][e.hor_keys[1]],vod_summary_page.init("search-page");break;case 2:current_series=this.filtered_movies[2][e.hor_keys[2]],series_summary_page.init("search-page")}}},HandleKey:function(e){if(!this.is_loading)switch(e.keyCode){case tvKey.RETURN:this.goBack();break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.ENTER:this.handleMenuClick()}}},clear_recent_page={keys:{focused_part:"menu_selection",// or, "search part", "slider part", "sub menu part", "search_value"
menu_selection:0},menu_doms:$("#clear-recent-modal button"),prev_route:"",movie:null,movie_kind:"",init:function(e,t){this.movie_kind=t,this.prev_route=e,current_route="clear_recent_page",this.hoverMenuItem(0),$("#clear-recent-modal").modal("show")},goBack:function(){$("#clear-recent-modal").modal("hide"),current_route=this.prev_route},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){var t=this.keys;if("vod"==e)VodModel.removeAllWatchList(),showToast("Successful","Movies Watch lists cleared successfully!");else if("series"==e)SeriesModel.removeAllWatchList(),showToast("Successful","Series Watch lists cleared successfully!");else if("menu_selection"===t.focused_part){// if sub menu is not opened yet
var t=this.keys;switch(t.menu_selection){case 1:("vod"===this.movie_kind?VodModel:SeriesModel).removeAllWatchList(),this.goBack();break;case 0:this.goBack()}}},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(// if submenu not opened yet
t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},clear_cache_page={keys:{focused_part:"menu_selection",// or, "search part", "slider part", "sub menu part", "search_value"
menu_selection:0},menu_doms:$("#clear-cache-modal button"),prev_route:"",movie:null,init:function(e){this.prev_route=e,current_route="clear_cache_page",this.hoverMenuItem(0),$("#clear-cache-modal").modal("show")},goBack:function(){$("#clear-cache-modal").modal("hide"),current_route=this.prev_route},reloadPage:function(){
// $('#app').hide();
// $('#setting-page').addClass('hide');
// $(home_page.prev_focus_dom).removeClass('active');
// home_page.prev_focus_dom=null;
// current_route="login";
// login_page.login();
window.location.reload()},hoverMenuItem:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.menu_doms).removeClass("active"),$(this.menu_doms[e]).addClass("active")},handleMenuClick:function(e){e=e||!1;var t=this.keys,t,i;"menu_selection"===t.focused_part&&(t=this.keys,1==t.menu_selection||e?(current_route="login-page",$("#clear-cache-modal").modal("hide"),i=[],Object.keys(localStorage).map(function(e){e.includes(storage_id)&&i.push(e)}),i.map(function(e){localStorage.removeItem(e)}),settings.resetDefaultValues(),this.reloadPage()):this.goBack())},handleMenusUpDown:function(e){},handleMenuLeftRight:function(e){var t=this.keys;"menu_selection"===t.focused_part&&(// if submenu not opened yet
t.menu_selection+=e,t.menu_selection<0&&(t.menu_selection=0),1<t.menu_selection&&(t.menu_selection=1),this.hoverMenuItem(t.menu_selection))},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},device_key_login_page={keys:{focused_part:"input"},input_dom:$($(".login-page-key-input")[0]),submit_button_dom:$($(".login-page-key-submit")[0]),init:function(){current_route="device_key_login_page",$("#loading-page").hide(),$("#login_page").css("display","flex"),this.hoverInput()},goBack:function(){},hoverInput:function(){this.keys.focused_part="input",$(this.submit_button_dom).removeClass("active"),$(this.input_dom).addClass("active")},clickInput:function(){$(this.input_dom).focus().addClass("active")},hoverSubmitButton:function(){this.keys.focused_part="submit",$(this.submit_button_dom).addClass("active"),$(this.input_dom).removeClass("active")},clickSubmitButton:function(){var s=$(this.input_dom).val(),e=getHostVersion(),e={mac_address:mac_address,//mac_address,
app_type:platform,version:e,device_key:s},a="3R%6R2FJ*b5)Vmt84$^eWf0r@r?szdw*fwf*ewd&VXmne$%",t="sUdvdQKtYR54mx1bJEI7huTJxGI4H3bWIZ9ejVYApj6xCbMJrGXRptM8KEyreCOB",e=newEncryptRequest(e,a),t=CryptoJS.HmacSHA256(e,t).toString(CryptoJS.enc.Base64).trim(),t=t.trim();$.ajax({method:"post",url:"https://iboapi.mimocodes.com/api/MBBPj5UwlCmTstXGb/tv/v3/playlist_information",data:{data:e,signature:t},timeout:15e3,success:function(e){var e,t,i;e.status?(e.status,403==e.error_code&&showToast("Invalid device key","Please try again, or contact us with a screenshot if you forgot your device key.")):(e=newDecryptResponse(e.data,a),t=JSON.parse(localStorage.getItem(storage_id+"api_data")),i="",t&&t.device_key&&(i=t.device_key),e.device_key=s||i||"",localStorage.setItem(storage_id+"api_data",JSON.stringify(e)),window.location.reload())},error:function(e){showToast("Something went wrong","Please try again later or contact us.")}})},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"input":this.clickInput();break;case"submit":this.clickSubmitButton()}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"input":0<e&&this.hoverSubmitButton();break;case"submit":e<0&&this.hoverInput()}},handleMenuLeftRight:function(e){},HandleKey:function(e){switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}},login_page={is_loading:!1,activeRequests:[],keys:{focused_part:"main_area",main_area:0,loading_stuck_btn:0},login_succeed:!1,tried_panel_indexes:[],tried_agent_url_indices:[],playlist_not_working_timer:null,loading_stuck_check_timer:12e4,showLoadImage:function(){$("#login-container").addClass("hide"),$("#loading-page").removeClass("hide")},fetchPlaylistInformation:function(i){var e,s,e,t,a,e,o,n,o,r,e,o,e,e;api_succeed=!0,this.is_loading||(e=i.domains,main_domain=i.main_domain,panel_urls=[],e&&e.map(function(e){panel_urls.push("https://"+e+"/api")}),s=this,this.is_loading=!0,$("#mac-address").text(mac_address),$(".mac-address").text(mac_address),e=pickPanelUrl(this.tried_panel_indexes),t=e[1],a=e[0],e=getHostVersion(),o=JSON.parse(localStorage.getItem(storage_id+"api_data")),n="",o&&o.device_key&&(n=o.device_key),o={mac_address:mac_address,//mac_address,
app_type:platform,version:e,device_key:n,u_id:this.getUniqueId()},r=this.getValues(0),e=this.getValues(1),o=newEncryptRequest(o,r),e=CryptoJS.HmacSHA256(o,e).toString(CryptoJS.enc.Base64).trim(),e=e.trim(),$.ajax({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+t+"/MBBPj5UwlCmTstXGb/tv/v3/playlist_information",data:{data:o,signature:e},timeout:15e3,success:function(e){var e;s.tried_panel_indexes=[],e.status&&(e.status,403==e.error_code)?device_key_login_page.init():(e=newDecryptResponse(e.data,r),ip_address=e.ip_address,e.device_key=e.device_key||n||"",localStorage.setItem(storage_id+"api_data",JSON.stringify(e)),e.themes&&(themes=e.themes),s.syncWithServer(e),handleWeatherFetchAndStore())},error:function(e){var t;s.is_loading=!1,s.tried_panel_indexes.push(a),s.tried_panel_indexes.length<panel_urls.length?s.fetchPlaylistInformation(i):(t=localStorage.getItem(storage_id+"api_data"),saveData("api_succeed",!1),t?(t=JSON.parse(t),s.syncWithServer(t)):showToast("Sorry","Api not working"))}}))},fetchDomains:function(){var i,e,t,s,a,o,e,e;this.is_loading||(i=this,this.is_loading=!0,e=pickAgentUrl(this.tried_agent_url_indices),t=e[1],s=e[0],a=getHostVersion(),o=JSON.stringify({domains:["app.ibo-dev.com","iboapp.mimocodes.com","iboapi.mimocodes.com"],main_domain:"api.ibo-dev.com"}),e={mac_address:mac_address,app_type:void 0,version:void 0},e=encryptRequest(e),$.ajax({method:"post",url:("undefined"!=typeof hostProxiedPrefix?hostProxiedPrefix:"")+t+"/playlist_info",data:{data:e},timeout:15e3,success:function(e){i.tried_agent_url_indices=[];var t=decryptResponse(e);localStorage.setItem(storage_id+"domain_lists",o),i.is_loading=!1,i.fetchPlaylistInformation(JSON.parse(o))},error:function(e){var t,t;i.is_loading=!1,i.tried_agent_url_indices.push(s),i.tried_agent_url_indices.length<agent_urls.length?i.fetchDomains():(t=localStorage.getItem(storage_id+"domain_lists"),t=JSON.parse(o),i.fetchPlaylistInformation(t))}}))},fetchPlaylistList:function(){var r;return this.is_loading?Promise.reject("Already loading"):(r=this,this.is_loading=!0,new Promise(function(a,o){function n(t){var t=t,e=(null==typeof t&&(t=0),pickPanelUrl(r.tried_panel_indexes)),i=e[1],s=e[0],e=getHostVersion(),e={mac_address:mac_address,app_type:platform,version:e},e=encryptRequest(e);$.ajax({method:"post",url:i+"/playlist_list",data:{data:e},timeout:15e3,success:function(e){r.tried_panel_indexes=[],r.is_loading=!1;var e=decryptResponse(e);playlist_urls=e.urls,a(e.urls||[])},error:function(e){r.tried_panel_indexes.push(s),r.tried_panel_indexes.length<panel_urls.length?n(t+1):(r.is_loading=!1,o("Failed to fetch playlist list after "+(t+1)+" attempts"))}})}n()}))},loadApp:function(e){var t=moment().format("Y-MM-DD"),i=($("#loading-page").addClass("hide"),1<e.urls.length&&"demo"===e.urls[0].id&&e.urls.splice(0,1),[]),s=e.urls;s.map(function(e,t){var i,i,s,a,o,n,i;e.url.includes("playlist")&&(i=/(.*?)\/playlist\/(.*?)\/(.*?)\/(.*?)(?:\/(.*?))?\/?$/,i=e.url.match(i),i)&&(s=i[1],a=i[2],o=i[3],n=i[4],i=i[5],e.username=a,e.password=o,e.playlist_type="xc",e.url=s,e.origin_type="xc",e.origin_url=s+"/get.php?username="+a+"&password="+o+"&type="+n+"&output="+i)}),
// saveData("playlist_urls", data.urls);
saveData("playlist_urls",s),saveData("notification",e.notification),$(".device-key").text(e.device_key),e.parent_pin&&(parent_account_password=e.parent_pin,localStorage.setItem(storage_id+"parent_account_password",parent_account_password)),saveData("languages",e.languages),saveData("device_key",e.device_key),saveData("expire_date",e.expire_date),e.tmdb_api_key&&(tmdb_api_key=e.tmdb_api_key),!api_succeed&&e.expire_date<t&&saveData("expire_date","2438-01-02"),
// saveData('themes',data.themes);
saveData("is_trial",e.is_trial),this.is_loading=!1,""!==settings.bg_img_url?changeBackgroundImage():void 0!==themes[0]&&(settings.saveSettings("bg_img_url",themes[0].url),changeBackgroundImage()),$(".expire-date").text(expire_date),e.mac_registered?e.expire_date<t?(saveData("mac_valid",!1),
// Change login notes
$("#login-note-1-1").text("Notice: Trial Period Expired!"),$("#login-note-1-1").css("color","#bf222f"),$("#login-note-1-2").text(""),$("#login-note-2-1").html("Thank you for choosing our app. If you have any questions or need assistance. please contact our support team."),$("#login-note-2-2").text(""),$("#login-note-3").text("Your trial period has ended. To continue enjoying uninterrupted access to our app, please follow the instructions below to purchase and activate yor license."),$("#last-login-instruction img").attr("src",HOST+"app_src_min/images/icons/instruction5.png"),$("#last-login-instruction span").text("Activate your device and subscribe with a variety of payment methods."),$("#login-button").removeClass("hide"),$("#login-container").removeClass("hide")):this.login():(
// Adding trial notes
$("#login-note-1-1").text("Experience Entertainment, Redefinedss"),$("#login-note-1-2").text("Stream an extensive collection of movies, series, and live TV on any device, designed for your ultimate viewing pleasure. Elevate your experience with customizable playlists and secure parental controls."),$("#login-note-2-1").html('Trial period notice your complimentary trial ends in <span class="highlight">'+e.trial_days+" days.</span>"),$("#login-note-2-2").text("Thank you for choosing us to bring your entertainment to life."),$("#login-container").removeClass("hide"))},syncWithServer:function(r){var l=localStorage.getItem(storage_id+"local_data"),e,e,c,t,i,s,t,e,d,c,l;l&&(l=JSON.parse(l),l.playlist_urls&&0<l.playlist_urls.length||l.remove_ids&&0<l.remove_ids.length)?(e=l.playlist_urls,e=e||[],c=l.remove_ids,c=c||[],api_succeed?(t=pickPanelUrl(this.tried_panel_indexes),i=t[1],s=t[0],t={mac_address:mac_address,app_type:platform,playlists:e,remove_ids:c},e=encryptRequest(t),d=this,$.ajax({method:"post",url:i+"/update_playlist",data:{data:e},success:function(e){d.tried_panel_indexes=[];for(var t=decryptResponse(e),i=[],s=[],a=0;a<t.length;a++)t[a].id!=t[a].origin_id&&(i.push(t[a].id),s.push(t[a].origin_id),settings.playlist_id===t[a].origin_id)&&settings.saveSettings("playlist_id",t[a].id,"");0<i.length&&changeLocalStorageKeysForPlaylist(s,i);for(var o=r.urls,a=o.length-1;0<=a;a--)for(var n=0;n<t.length;n++)if(o[a].id==t[n].id){o.splice(a,1);break}for(var o=o.concat(t),a=o.length-1;0<=a;a--)c.includes(o[a].id)&&o.splice(a,1);r.urls=o,localStorage.setItem(storage_id+"api_data",JSON.stringify(r)),l.playlist_urls=[],l.remove_ids=[],localStorage.setItem(storage_id+"local_data",JSON.stringify(l)),d.loadApp(r)},error:function(){d.is_loading=!1,d.tried_panel_indexes.push(s),d.tried_panel_indexes.length<panel_urls.length?d.syncWithServer(r):d.syncFailedWithServer(r,l)}})):this.syncFailedWithServer(r,l)):this.loadApp(r)},syncFailedWithServer:function(e,t){for(var i=t.playlist_urls,i=i||[],s=t.remove_ids,s=s||[],a=e.urls,o=a.length-1;0<=o;o--)for(var n=0;n<i.length;n++)if(a[o].id==i[n].id){a.splice(o,1);break}for(var a=a.concat(i),o=a.length-1;0<=o;o--)s.includes(a[o].id)&&a.splice(o,1);s=[],t.remove_ids=s,localStorage.setItem("local_data",JSON.stringify(t)),e.urls=a,this.loadApp(e)},getPlayListDetail:function(){var r=this;if(this.playlist_not_working_timer=setTimeout(function(){r.showLoadingForTooLong()},this.loading_stuck_check_timer),mac_address="52:54:00:12:34:57","samsung"===platform)try{tizen.systeminfo.getPropertyValue("ETHERNET_NETWORK",function(e){void 0!==e&&void 0!==e.macAddress&&(mac_address=e.macAddress),r.fetchDomains()})}catch(e){this.fetchDomains()}else if("lg"===platform)webOS.service.request("luna://com.webos.service.sm",{method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onSuccess:function(e){mac_address="";for(var t=e.idList[0].idValue.replace(/['-]+/g,""),i=0;i<=5;i++)mac_address+=t.substr(2*i,2),i<5&&(mac_address+=":");r.fetchDomains()},onFailure:function(e){r.fetchDomains()}});else if("vidaa"===platform)try{if("function"==typeof Hisense_GetDeviceID){var e=Hisense_GetDeviceID(),t=/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/i;if(t.test(e))mac_address=e;else{mac_address="";var i=e.slice(-12);try{for(var s=0;s<6;s++)mac_address+=i.substr(2*s,2),s<5&&(mac_address+=":")}catch(e){}}}r.fetchDomains()}catch(e){r.fetchDomains()}else"zeasn"===platform?window.onDeviceInfoReady(function(e){try{var t=e.Product.deviceID,i=e.Product.WhaleAdID,s="",a=(deviceMAC="","");if(mac_address="",deviceMAC&&"undefined"!==deviceMAC&&""!==deviceMAC&&null!==deviceMAC&&"null"!==deviceMAC)s=deviceMAC,mac_address=deviceMAC;else{for(var s=i,o=0;o<s.length&&(// get first 12 characters from whale id
"-"!=s[o]&&(a+=s[o]),!(12<=a.length));o++);for(var o=0;o<=5;o++)mac_address+=a.substr(2*o,2),o<5&&(mac_address+=":")}r.fetchDomains()}catch(e){r.fetchDomains()}}):"titanos"===platform?window.onDeviceInfoReady(function(e){try{var t=e.Product.deviceID,i=e.Product.WhaleAdID,s=e.Product.mac,a="",o="";if(mac_address="",s&&"undefined"!==s&&""!==s&&null!==s&&"null"!==s)a=s,mac_address=s;else{for(var a=i,n=0;n<a.length&&(// get first 12 characters from whale id
"-"!=a[n]&&(o+=a[n]),!(12<=o.length));n++);for(var n=0;n<=5;n++)mac_address+=o.substr(2*n,2),n<5&&(mac_address+=":")}r.fetchDomains()}catch(e){r.fetchDomains()}}):(platform,r.fetchDomains())},login:function(){if(home_page.dataLoaded={live:!1,vod:!1,series:!1},checkDevicePerformance(),mac_valid){for(var e=settings.playlist_id,t=0;t<playlist_urls.length;t++)if(playlist_urls[t].id==e)return settings.saveSettings("playlist",playlist_urls[t],"array"),void this.proceed_login();settings.saveSettings("playlist_id",playlist_urls[0].id,""),settings.saveSettings("playlist",playlist_urls[0],"array"),this.proceed_login()}else
// showToast(
//   "Sorry",
//   "You can not use our service now, please extend your expire date by activating your device."
// );
window.location.reload()},goToPlaylistPageWithError:function(e,t){t&&this.abortAllRequests(),this.is_loading=!1,LiveModel.insertMoviesToCategories([]),VodModel.insertMoviesToCategories([]),SeriesModel.insertMoviesToCategories([]),$("#loading-page").addClass("hide"),$("#playlist-items-container").addClass("has-error"),e&&"string"==typeof e?$("#playlist-error").text(e):$("#playlist-error").text("We regret to inform you that there is a problem with the current      playlist. This issue is associated with your IPTV service      provider, not our application. For inquiries about the playlist’s      status and expiration, please reach out to your provider."),$("#playlist-error").show(),home_page.init(),home_page.hoverControlsMenu(1),home_page.handleMenuClick(),$("#home-expire-date").text("Unknown"),$(".playlist-will-expire-in").text("Unknown")},abortAllRequests:function(){
// Abort local active requests first
if(this.activeRequests&&0<this.activeRequests.length){for(var e=0;e<this.activeRequests.length;e++)if(this.activeRequests[e]&&this.activeRequests[e].abort)try{this.activeRequests[e].abort()}catch(e){}this.activeRequests=[]}
// Abort all ongoing AJAX requests
if(window.ongoingRequests){for(var e=0;e<window.ongoingRequests.length;e++)if(window.ongoingRequests[e]&&window.ongoingRequests[e].abort)try{window.ongoingRequests[e].abort()}catch(e){}window.ongoingRequests=[]}
// Also abort any jQuery active requests
jQuery&&0<jQuery.active&&
// Try to abort all active jQuery requests
$(document).ajaxStop(),
// Clear any pending timeouts
this.playlist_not_working_timer&&(clearTimeout(this.playlist_not_working_timer),this.playlist_not_working_timer=null),
// Reset loading state
this.is_loading=!1},convertToGeneralM3u:function(){this.is_loading=!1,settings.playlist.playlist_type="general",settings.playlist.url=settings.playlist.origin_url,this.proceed_login()},proceed_login:function(){var r,e,t,l,e;this.is_loading||($("#playlist-error").hide(),LiveModel.init(),VodModel.init(),SeriesModel.init(),r=this,this.showLoadImage(),e=settings.playlist,t=e.playlist_type,api_host_url=settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url,storageMoviesInfo.host_url!=api_host_url&&clearCachedMoviesInfo(),t=t||"general",this.is_loading=!0,"xc"===t?(user_name=e.username,password=e.password,l=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=",e=l.replace("&action=",""),api({method:"get",url:e,headers:{Accept:"application/json"},success:function(e){
// Validate that data is JSON
if("object"!=typeof e||null===e)r.is_loading=!1,r.goToPlaylistPageWithError("Invalid response from server");else{if(void 0!==e.server_info&&calculateTimeDifference(e.server_info.time_now,e.server_info.timestamp_now),void 0!==e.user_info)if(0==e.user_info.auth||void 0!==e.user_info.status&&("Expired"===e.user_info.status||"Banned"===e.user_info.status||"Disabled"===e.user_info.status)){var t;r.is_loading=!1,r.goToPlaylistPageWithError(),e.user_info.exp_date&&(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD"))))}else{var t,t=(null==e.user_info.exp_date?$(".expire-date").text("Unlimited"):(t=moment(1e3*e.user_info.exp_date),playlist_expire_date=t.format("Y-MM-DD"),$(".expire-date").text(t.format("Y-MM-DD"))),parseInt(localStorage.getItem(storage_id+"load_on_demand")));if(t||0==t||(t=1,localStorage.setItem(storage_id+"load_on_demand",1)),t)return r.is_loading=!1,home_page.init(!0),void r.hideLoadingForTooLong();var t=api({method:"get",url:l+"get_live_streams",success:function(e){LiveModel.setMovies(e)}}),i=api({method:"get",url:l+"get_live_categories",success:function(e){LiveModel.setCategories(e)}}),s=api({method:"get",url:l+"get_vod_categories",success:function(e){VodModel.setCategories(e)}}),a=api({method:"get",url:l+"get_series_categories",success:function(e){SeriesModel.setCategories(e)}}),o=api({method:"get",url:l+"get_vod_streams",success:function(e){VodModel.setMovies(e)}}),n=api({method:"get",url:l+"get_series",success:function(e){SeriesModel.setMovies(e)}});r.activeRequests=[t,i,s,a,o,n],$.when(t,i,s,a,o,n).then(function(){try{LiveModel.insertMoviesToCategories(),VodModel.insertMoviesToCategories(),SeriesModel.insertMoviesToCategories(),r.is_loading=!1,home_page.init()}catch(e){
// that.goToPlaylistPageWithError();
r.convertToGeneralM3u()}}).fail(function(){r.convertToGeneralM3u();
// that.goToPlaylistPageWithError();
})}playlist_status=e.user_info&&e.user_info.status||"Unknown"}},error:function(e){
// that.goToPlaylistPageWithError();
r.convertToGeneralM3u()},timeout:15e3})):"general"===t&&(api_host_url=settings.playlist.url.endsWith("/")?settings.playlist.url.slice(0,-1):settings.playlist.url,$.ajax({method:"get",url:api_host_url,headers:{Accept:"application/json"},success:function(e){
// Validate that data is JSON
"object"==typeof e&&null!==e||e.startsWith("#EXTM3U")?(parseM3uResponse("general",e),$("#loading-page").addClass("hide"),home_page.init(),r.is_loading=!1):(r.is_loading=!1,r.goToPlaylistPageWithError("Invalid response from server"))},error:function(e){r.goToPlaylistPageWithError()}})))},showLoadingForTooLong:function(){$("#app-loading-too-long").css("display","flex"),this.keys.focused_part="loading_stuck"},hideLoadingForTooLong:function(){clearTimeout(this.playlist_not_working_timer),$("#app-loading-too-long").hide()},clickLoadingForTooLongOption:function(e){switch(e){case 0:this.goToPlaylistPageWithError("Playlist loading aborted by the user",!0);break;case 1:window.location.reload();break;case 2:this.hideLoadingForTooLong()}},hoverLoadingForTooLongOption:function(e){this.keys.loading_stuck_btn=e,$(".app-loading-too-long-cta-button").removeClass("active"),$($(".app-loading-too-long-cta-button")[e]).addClass("active")},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"main_area":var t=[$("#login-button")],t=t[e.main_area];$(t).trigger("click");break;case"loading_stuck":this.clickLoadingForTooLongOption(e.loading_stuck_btn)}},handleMenuUpDown:function(e){var t=this.keys,e;"main_area"===t.focused_part&&(t.main_area+=e,e=[$("#login-button")],e.map(function(e){$(e).removeClass("active")}),t.main_area<0&&(t.main_area=e.length-1),t.main_area>=e.length&&(t.main_area=0),$(e[t.main_area]).addClass("active"))},handleMenuLeftRight:function(e){var t=this.keys;"loading_stuck"===t.focused_part&&(t.loading_stuck_btn+=e,t.loading_stuck_btn<0&&(t.loading_stuck_btn=0),2<t.loading_stuck_btn&&(t.loading_stuck_btn=2),this.hoverLoadingForTooLongOption(t.loading_stuck_btn))},getValues:function(e){var t=["3R%6R2FJ*b5)Vmt84$^eWf0r@r?szdw*fwf*ewd&VXmne$%","$2b$10$KX0D?09++^*90988e+uhz5%avsf4EO80aTgba=zubwW4CpmoERkcLgW6"];return t[e]},getUniqueId:function(){return CryptoJS.HmacSHA1(mac_address.toLowerCase()+this.getValues(0),this.getValues(1)).toString(CryptoJS.enc.Base64).trim()},HandleKey:function(e){switch(e.keyCode){case tvKey.DOWN:this.handleMenuUpDown(1);break;case tvKey.UP:this.handleMenuUpDown(-1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:"main_area"===this.keys.focused_part&&turn_off_page.init(current_route)}}},temps=[{name:"Afar",iso6392B:"aar",iso6391:"aa"},{name:"Abkhazian",iso6392B:"abk",iso6391:"ab"},{name:"Achinese",iso6392B:"ace"},{name:"Acoli",iso6392B:"ach"},{name:"Adangme",iso6392B:"ada"},{name:"Adyghe; Adygei",iso6392B:"ady"},{name:"Afro-Asiatic languages",iso6392B:"afa"},{name:"Afrihili",iso6392B:"afh"},{name:"Afrikaans",iso6392B:"afr",iso6391:"af"},{name:"Ainu",iso6392B:"ain"},{name:"Akan",iso6392B:"aka",iso6391:"ak"},{name:"Akkadian",iso6392B:"akk"},{name:"Albanian",iso6392B:"alb",iso6392T:"sqi",iso6391:"sq"},{name:"Aleut",iso6392B:"ale"},{name:"Algonquian languages",iso6392B:"alg"},{name:"Southern Altai",iso6392B:"alt"},{name:"Amharic",iso6392B:"amh",iso6391:"am"},{name:"English, Old (ca.450-1100)",iso6392B:"ang"},{name:"Angika",iso6392B:"anp"},{name:"Apache languages",iso6392B:"apa"},{name:"Arabic",iso6392B:"ara",iso6391:"ar"},{name:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",iso6392B:"arc"},{name:"Aragonese",iso6392B:"arg",iso6391:"an"},{name:"Armenian",iso6392B:"arm",iso6392T:"hye",iso6391:"hy"},{name:"Mapudungun; Mapuche",iso6392B:"arn"},{name:"Arapaho",iso6392B:"arp"},{name:"Artificial languages",iso6392B:"art"},{name:"Arawak",iso6392B:"arw"},{name:"Assamese",iso6392B:"asm",iso6391:"as"},{name:"Asturian; Bable; Leonese; Asturleonese",iso6392B:"ast"},{name:"Athapascan languages",iso6392B:"ath"},{name:"Australian languages",iso6392B:"aus"},{name:"Avaric",iso6392B:"ava",iso6391:"av"},{name:"Avestan",iso6392B:"ave",iso6391:"ae"},{name:"Awadhi",iso6392B:"awa"},{name:"Aymara",iso6392B:"aym",iso6391:"ay"},{name:"Azerbaijani",iso6392B:"aze",iso6391:"az"},{name:"Banda languages",iso6392B:"bad"},{name:"Bamileke languages",iso6392B:"bai"},{name:"Bashkir",iso6392B:"bak",iso6391:"ba"},{name:"Baluchi",iso6392B:"bal"},{name:"Bambara",iso6392B:"bam",iso6391:"bm"},{name:"Balinese",iso6392B:"ban"},{name:"Basque",iso6392B:"baq",iso6392T:"eus",iso6391:"eu"},{name:"Basa",iso6392B:"bas"},{name:"Baltic languages",iso6392B:"bat"},{name:"Beja; Bedawiyet",iso6392B:"bej"},{name:"Belarusian",iso6392B:"bel",iso6391:"be"},{name:"Bemba",iso6392B:"bem"},{name:"Bengali",iso6392B:"ben",iso6391:"bn"},{name:"Berber languages",iso6392B:"ber"},{name:"Bhojpuri",iso6392B:"bho"},{name:"Bihari languages",iso6392B:"bih",iso6391:"bh"},{name:"Bikol",iso6392B:"bik"},{name:"Bini; Edo",iso6392B:"bin"},{name:"Bislama",iso6392B:"bis",iso6391:"bi"},{name:"Siksika",iso6392B:"bla"},{name:"Bantu languages",iso6392B:"bnt"},{name:"Bosnian",iso6392B:"bos",iso6391:"bs"},{name:"Braj",iso6392B:"bra"},{name:"Breton",iso6392B:"bre",iso6391:"br"},{name:"Batak languages",iso6392B:"btk"},{name:"Buriat",iso6392B:"bua"},{name:"Buginese",iso6392B:"bug"},{name:"Bulgarian",iso6392B:"bul",iso6391:"bg"},{name:"Burmese",iso6392B:"bur",iso6392T:"mya",iso6391:"my"},{name:"Blin; Bilin",iso6392B:"byn"},{name:"Caddo",iso6392B:"cad"},{name:"Central American Indian languages",iso6392B:"cai"},{name:"Galibi Carib",iso6392B:"car"},{name:"Catalan; Valencian",iso6392B:"cat",iso6391:"ca"},{name:"Caucasian languages",iso6392B:"cau"},{name:"Cebuano",iso6392B:"ceb"},{name:"Celtic languages",iso6392B:"cel"},{name:"Chamorro",iso6392B:"cha",iso6391:"ch"},{name:"Chibcha",iso6392B:"chb"},{name:"Chechen",iso6392B:"che",iso6391:"ce"},{name:"Chagatai",iso6392B:"chg"},{name:"Chinese",iso6392B:"chi",iso6392T:"zho",iso6391:"zh"},{name:"Chuukese",iso6392B:"chk"},{name:"Mari",iso6392B:"chm"},{name:"Chinook jargon",iso6392B:"chn"},{name:"Choctaw",iso6392B:"cho"},{name:"Chipewyan; Dene Suline",iso6392B:"chp"},{name:"Cherokee",iso6392B:"chr"},{name:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",iso6392B:"chu",iso6391:"cu"},{name:"Chuvash",iso6392B:"chv",iso6391:"cv"},{name:"Cheyenne",iso6392B:"chy"},{name:"Chamic languages",iso6392B:"cmc"},{name:"Montenegrin",iso6392B:"cnr"},{name:"Coptic",iso6392B:"cop"},{name:"Cornish",iso6392B:"cor",iso6391:"kw"},{name:"Corsican",iso6392B:"cos",iso6391:"co"},{name:"Creoles and pidgins, English based",iso6392B:"cpe"},{name:"Creoles and pidgins, French-based",iso6392B:"cpf"},{name:"Creoles and pidgins, Portuguese-based",iso6392B:"cpp"},{name:"Cree",iso6392B:"cre",iso6391:"cr"},{name:"Crimean Tatar; Crimean Turkish",iso6392B:"crh"},{name:"Creoles and pidgins",iso6392B:"crp"},{name:"Kashubian",iso6392B:"csb"},{name:"Cushitic languages",iso6392B:"cus"},{name:"Czech",iso6392B:"cze",iso6392T:"ces",iso6391:"cs"},{name:"Dakota",iso6392B:"dak"},{name:"Danish",iso6392B:"dan",iso6391:"da"},{name:"Dargwa",iso6392B:"dar"},{name:"Land Dayak languages",iso6392B:"day"},{name:"Delaware",iso6392B:"del"},{name:"Slave (Athapascan)",iso6392B:"den"},{name:"Dogrib",iso6392B:"dgr"},{name:"Dinka",iso6392B:"din"},{name:"Divehi; Dhivehi; Maldivian",iso6392B:"div",iso6391:"dv"},{name:"Dogri",iso6392B:"doi"},{name:"Dravidian languages",iso6392B:"dra"},{name:"Lower Sorbian",iso6392B:"dsb"},{name:"Duala",iso6392B:"dua"},{name:"Dutch, Middle (ca.1050-1350)",iso6392B:"dum"},{name:"Dutch; Flemish",iso6392B:"dut",iso6392T:"nld",iso6391:"nl"},{name:"Dyula",iso6392B:"dyu"},{name:"Dzongkha",iso6392B:"dzo",iso6391:"dz"},{name:"Efik",iso6392B:"efi"},{name:"Egyptian (Ancient)",iso6392B:"egy"},{name:"Ekajuk",iso6392B:"eka"},{name:"Elamite",iso6392B:"elx"},{name:"English",iso6392B:"eng",iso6391:"en"},{name:"English, Middle (1100-1500)",iso6392B:"enm"},{name:"Esperanto",iso6392B:"epo",iso6391:"eo"},{name:"Estonian",iso6392B:"est",iso6391:"et"},{name:"Ewe",iso6392B:"ewe",iso6391:"ee"},{name:"Ewondo",iso6392B:"ewo"},{name:"Fang",iso6392B:"fan"},{name:"Faroese",iso6392B:"fao",iso6391:"fo"},{name:"Fanti",iso6392B:"fat"},{name:"Fijian",iso6392B:"fij",iso6391:"fj"},{name:"Filipino; Pilipino",iso6392B:"fil"},{name:"Finnish",iso6392B:"fin",iso6391:"fi"},{name:"Finno-Ugrian languages",iso6392B:"fiu"},{name:"Fon",iso6392B:"fon"},{name:"French",iso6392B:"fre",iso6392T:"fra",iso6391:"fr"},{name:"French, Middle (ca.1400-1600)",iso6392B:"frm"},{name:"French, Old (842-ca.1400)",iso6392B:"fro"},{name:"Northern Frisian",iso6392B:"frr"},{name:"Eastern Frisian",iso6392B:"frs"},{name:"Western Frisian",iso6392B:"fry",iso6391:"fy"},{name:"Fulah",iso6392B:"ful",iso6391:"ff"},{name:"Friulian",iso6392B:"fur"},{name:"Ga",iso6392B:"gaa"},{name:"Gayo",iso6392B:"gay"},{name:"Gbaya",iso6392B:"gba"},{name:"Germanic languages",iso6392B:"gem"},{name:"Georgian",iso6392B:"geo",iso6392T:"kat",iso6391:"ka"},{name:"German",iso6392B:"ger",iso6392T:"deu",iso6391:"de"},{name:"Geez",iso6392B:"gez"},{name:"Gilbertese",iso6392B:"gil"},{name:"Gaelic; Scottish Gaelic",iso6392B:"gla",iso6391:"gd"},{name:"Irish",iso6392B:"gle",iso6391:"ga"},{name:"Galician",iso6392B:"glg",iso6391:"gl"},{name:"Manx",iso6392B:"glv",iso6391:"gv"},{name:"German, Middle High (ca.1050-1500)",iso6392B:"gmh"},{name:"German, Old High (ca.750-1050)",iso6392B:"goh"},{name:"Gondi",iso6392B:"gon"},{name:"Gorontalo",iso6392B:"gor"},{name:"Gothic",iso6392B:"got"},{name:"Grebo",iso6392B:"grb"},{name:"Greek, Ancient (to 1453)",iso6392B:"grc"},{name:"Greek, Modern (1453-)",iso6392B:"gre",iso6392T:"ell",iso6391:"el"},{name:"Guarani",iso6392B:"grn",iso6391:"gn"},{name:"Swiss German; Alemannic; Alsatian",iso6392B:"gsw"},{name:"Gujarati",iso6392B:"guj",iso6391:"gu"},{name:"Gwich'in",iso6392B:"gwi"},{name:"Haida",iso6392B:"hai"},{name:"Haitian; Haitian Creole",iso6392B:"hat",iso6391:"ht"},{name:"Hausa",iso6392B:"hau",iso6391:"ha"},{name:"Hawaiian",iso6392B:"haw"},{name:"Hebrew",iso6392B:"heb",iso6391:"he"},{name:"Herero",iso6392B:"her",iso6391:"hz"},{name:"Hiligaynon",iso6392B:"hil"},{name:"Himachali languages; Western Pahari languages",iso6392B:"him"},{name:"Hindi",iso6392B:"hin",iso6391:"hi"},{name:"Hittite",iso6392B:"hit"},{name:"Hmong; Mong",iso6392B:"hmn"},{name:"Hiri Motu",iso6392B:"hmo",iso6391:"ho"},{name:"Croatian",iso6392B:"hrv",iso6391:"hr"},{name:"Upper Sorbian",iso6392B:"hsb"},{name:"Hungarian",iso6392B:"hun",iso6391:"hu"},{name:"Hupa",iso6392B:"hup"},{name:"Iban",iso6392B:"iba"},{name:"Igbo",iso6392B:"ibo",iso6391:"ig"},{name:"Icelandic",iso6392B:"ice",iso6392T:"isl",iso6391:"is"},{name:"Ido",iso6392B:"ido",iso6391:"io"},{name:"Sichuan Yi; Nuosu",iso6392B:"iii",iso6391:"ii"},{name:"Ijo languages",iso6392B:"ijo"},{name:"Inuktitut",iso6392B:"iku",iso6391:"iu"},{name:"Interlingue; Occidental",iso6392B:"ile",iso6391:"ie"},{name:"Iloko",iso6392B:"ilo"},{name:"Interlingua (International Auxiliary Language Association)",iso6392B:"ina",iso6391:"ia"},{name:"Indic languages",iso6392B:"inc"},{name:"Indonesian",iso6392B:"ind",iso6391:"id"},{name:"Indo-European languages",iso6392B:"ine"},{name:"Ingush",iso6392B:"inh"},{name:"Inupiaq",iso6392B:"ipk",iso6391:"ik"},{name:"Iranian languages",iso6392B:"ira"},{name:"Iroquoian languages",iso6392B:"iro"},{name:"Italian",iso6392B:"ita",iso6391:"it"},{name:"Javanese",iso6392B:"jav",iso6391:"jv"},{name:"Lojban",iso6392B:"jbo"},{name:"Japanese",iso6392B:"jpn",iso6391:"ja"},{name:"Judeo-Persian",iso6392B:"jpr"},{name:"Judeo-Arabic",iso6392B:"jrb"},{name:"Kara-Kalpak",iso6392B:"kaa"},{name:"Kabyle",iso6392B:"kab"},{name:"Kachin; Jingpho",iso6392B:"kac"},{name:"Kalaallisut; Greenlandic",iso6392B:"kal",iso6391:"kl"},{name:"Kamba",iso6392B:"kam"},{name:"Kannada",iso6392B:"kan",iso6391:"kn"},{name:"Karen languages",iso6392B:"kar"},{name:"Kashmiri",iso6392B:"kas",iso6391:"ks"},{name:"Kanuri",iso6392B:"kau",iso6391:"kr"},{name:"Kawi",iso6392B:"kaw"},{name:"Kazakh",iso6392B:"kaz",iso6391:"kk"},{name:"Kabardian",iso6392B:"kbd"},{name:"Khasi",iso6392B:"kha"},{name:"Khoisan languages",iso6392B:"khi"},{name:"Central Khmer",iso6392B:"khm",iso6391:"km"},{name:"Khotanese; Sakan",iso6392B:"kho"},{name:"Kikuyu; Gikuyu",iso6392B:"kik",iso6391:"ki"},{name:"Kinyarwanda",iso6392B:"kin",iso6391:"rw"},{name:"Kirghiz; Kyrgyz",iso6392B:"kir",iso6391:"ky"},{name:"Kimbundu",iso6392B:"kmb"},{name:"Konkani",iso6392B:"kok"},{name:"Komi",iso6392B:"kom",iso6391:"kv"},{name:"Kongo",iso6392B:"kon",iso6391:"kg"},{name:"Korean",iso6392B:"kor",iso6391:"ko"},{name:"Kosraean",iso6392B:"kos"},{name:"Kpelle",iso6392B:"kpe"},{name:"Karachay-Balkar",iso6392B:"krc"},{name:"Karelian",iso6392B:"krl"},{name:"Kru languages",iso6392B:"kro"},{name:"Kurukh",iso6392B:"kru"},{name:"Kuanyama; Kwanyama",iso6392B:"kua",iso6391:"kj"},{name:"Kumyk",iso6392B:"kum"},{name:"Kurdish",iso6392B:"kur",iso6391:"ku"},{name:"Kutenai",iso6392B:"kut"},{name:"Ladino",iso6392B:"lad"},{name:"Lahnda",iso6392B:"lah"},{name:"Lamba",iso6392B:"lam"},{name:"Lao",iso6392B:"lao",iso6391:"lo"},{name:"Latin",iso6392B:"lat",iso6391:"la"},{name:"Latvian",iso6392B:"lav",iso6391:"lv"},{name:"Lezghian",iso6392B:"lez"},{name:"Limburgan; Limburger; Limburgish",iso6392B:"lim",iso6391:"li"},{name:"Lingala",iso6392B:"lin",iso6391:"ln"},{name:"Lithuanian",iso6392B:"lit",iso6391:"lt"},{name:"Mongo",iso6392B:"lol"},{name:"Lozi",iso6392B:"loz"},{name:"Luxembourgish; Letzeburgesch",iso6392B:"ltz",iso6391:"lb"},{name:"Luba-Lulua",iso6392B:"lua"},{name:"Luba-Katanga",iso6392B:"lub",iso6391:"lu"},{name:"Ganda",iso6392B:"lug",iso6391:"lg"},{name:"Luiseno",iso6392B:"lui"},{name:"Lunda",iso6392B:"lun"},{name:"Luo (Kenya and Tanzania)",iso6392B:"luo"},{name:"Lushai",iso6392B:"lus"},{name:"Macedonian",iso6392B:"mac",iso6392T:"mkd",iso6391:"mk"},{name:"Madurese",iso6392B:"mad"},{name:"Magahi",iso6392B:"mag"},{name:"Marshallese",iso6392B:"mah",iso6391:"mh"},{name:"Maithili",iso6392B:"mai"},{name:"Makasar",iso6392B:"mak"},{name:"Malayalam",iso6392B:"mal",iso6391:"ml"},{name:"Mandingo",iso6392B:"man"},{name:"Maori",iso6392B:"mao",iso6392T:"mri",iso6391:"mi"},{name:"Austronesian languages",iso6392B:"map"},{name:"Marathi",iso6392B:"mar",iso6391:"mr"},{name:"Masai",iso6392B:"mas"},{name:"Malay",iso6392B:"may",iso6392T:"msa",iso6391:"ms"},{name:"Moksha",iso6392B:"mdf"},{name:"Mandar",iso6392B:"mdr"},{name:"Mende",iso6392B:"men"},{name:"Irish, Middle (900-1200)",iso6392B:"mga"},{name:"Mi'kmaq; Micmac",iso6392B:"mic"},{name:"Minangkabau",iso6392B:"min"},{name:"Uncoded languages",iso6392B:"mis"},{name:"Mon-Khmer languages",iso6392B:"mkh"},{name:"Malagasy",iso6392B:"mlg",iso6391:"mg"},{name:"Maltese",iso6392B:"mlt",iso6391:"mt"},{name:"Manchu",iso6392B:"mnc"},{name:"Manipuri",iso6392B:"mni"},{name:"Manobo languages",iso6392B:"mno"},{name:"Mohawk",iso6392B:"moh"},{name:"Mongolian",iso6392B:"mon",iso6391:"mn"},{name:"Mossi",iso6392B:"mos"},{name:"Multiple languages",iso6392B:"mul"},{name:"Munda languages",iso6392B:"mun"},{name:"Creek",iso6392B:"mus"},{name:"Mirandese",iso6392B:"mwl"},{name:"Marwari",iso6392B:"mwr"},{name:"Mayan languages",iso6392B:"myn"},{name:"Erzya",iso6392B:"myv"},{name:"Nahuatl languages",iso6392B:"nah"},{name:"North American Indian languages",iso6392B:"nai"},{name:"Neapolitan",iso6392B:"nap"},{name:"Nauru",iso6392B:"nau",iso6391:"na"},{name:"Navajo; Navaho",iso6392B:"nav",iso6391:"nv"},{name:"Ndebele, South; South Ndebele",iso6392B:"nbl",iso6391:"nr"},{name:"Ndebele, North; North Ndebele",iso6392B:"nde",iso6391:"nd"},{name:"Ndonga",iso6392B:"ndo",iso6391:"ng"},{name:"Low German; Low Saxon; German, Low; Saxon, Low",iso6392B:"nds"},{name:"Nepali",iso6392B:"nep",iso6391:"ne"},{name:"Nepal Bhasa; Newari",iso6392B:"new"},{name:"Nias",iso6392B:"nia"},{name:"Niger-Kordofanian languages",iso6392B:"nic"},{name:"Niuean",iso6392B:"niu"},{name:"Norwegian Nynorsk; Nynorsk, Norwegian",iso6392B:"nno",iso6391:"nn"},{name:"Bokmål, Norwegian; Norwegian Bokmål",iso6392B:"nob",iso6391:"nb"},{name:"Nogai",iso6392B:"nog"},{name:"Norse, Old",iso6392B:"non"},{name:"Norwegian",iso6392B:"nor",iso6391:"no"},{name:"N'Ko",iso6392B:"nqo"},{name:"Pedi; Sepedi; Northern Sotho",iso6392B:"nso"},{name:"Nubian languages",iso6392B:"nub"},{name:"Classical Newari; Old Newari; Classical Nepal Bhasa",iso6392B:"nwc"},{name:"Chichewa; Chewa; Nyanja",iso6392B:"nya",iso6391:"ny"},{name:"Nyamwezi",iso6392B:"nym"},{name:"Nyankole",iso6392B:"nyn"},{name:"Nyoro",iso6392B:"nyo"},{name:"Nzima",iso6392B:"nzi"},{name:"Occitan (post 1500)",iso6392B:"oci",iso6391:"oc"},{name:"Ojibwa",iso6392B:"oji",iso6391:"oj"},{name:"Oriya",iso6392B:"ori",iso6391:"or"},{name:"Oromo",iso6392B:"orm",iso6391:"om"},{name:"Osage",iso6392B:"osa"},{name:"Ossetian; Ossetic",iso6392B:"oss",iso6391:"os"},{name:"Turkish, Ottoman (1500-1928)",iso6392B:"ota"},{name:"Otomian languages",iso6392B:"oto"},{name:"Papuan languages",iso6392B:"paa"},{name:"Pangasinan",iso6392B:"pag"},{name:"Pahlavi",iso6392B:"pal"},{name:"Pampanga; Kapampangan",iso6392B:"pam"},{name:"Panjabi; Punjabi",iso6392B:"pan",iso6391:"pa"},{name:"Papiamento",iso6392B:"pap"},{name:"Palauan",iso6392B:"pau"},{name:"Persian, Old (ca.600-400 B.C.)",iso6392B:"peo"},{name:"Persian",iso6392B:"per",iso6392T:"fas",iso6391:"fa"},{name:"Philippine languages",iso6392B:"phi"},{name:"Phoenician",iso6392B:"phn"},{name:"Pali",iso6392B:"pli",iso6391:"pi"},{name:"Polish",iso6392B:"pol",iso6391:"pl"},{name:"Pohnpeian",iso6392B:"pon"},{name:"Portuguese",iso6392B:"por",iso6391:"pt"},{name:"Prakrit languages",iso6392B:"pra"},{name:"Provençal, Old (to 1500); Occitan, Old (to 1500)",iso6392B:"pro"},{name:"Pushto; Pashto",iso6392B:"pus",iso6391:"ps"},{name:"Reserved for local use",iso6392B:"qaa-qtz"},{name:"Quechua",iso6392B:"que",iso6391:"qu"},{name:"Rajasthani",iso6392B:"raj"},{name:"Rapanui",iso6392B:"rap"},{name:"Rarotongan; Cook Islands Maori",iso6392B:"rar"},{name:"Romance languages",iso6392B:"roa"},{name:"Romansh",iso6392B:"roh",iso6391:"rm"},{name:"Romany",iso6392B:"rom"},{name:"Romanian; Moldavian; Moldovan",iso6392B:"rum",iso6392T:"ron",iso6391:"ro"},{name:"Rundi",iso6392B:"run",iso6391:"rn"},{name:"Aromanian; Arumanian; Macedo-Romanian",iso6392B:"rup"},{name:"Russian",iso6392B:"rus",iso6391:"ru"},{name:"Sandawe",iso6392B:"sad"},{name:"Sango",iso6392B:"sag",iso6391:"sg"},{name:"Yakut",iso6392B:"sah"},{name:"South American Indian languages",iso6392B:"sai"},{name:"Salishan languages",iso6392B:"sal"},{name:"Samaritan Aramaic",iso6392B:"sam"},{name:"Sanskrit",iso6392B:"san",iso6391:"sa"},{name:"Sasak",iso6392B:"sas"},{name:"Santali",iso6392B:"sat"},{name:"Sicilian",iso6392B:"scn"},{name:"Scots",iso6392B:"sco"},{name:"Selkup",iso6392B:"sel"},{name:"Semitic languages",iso6392B:"sem"},{name:"Irish, Old (to 900)",iso6392B:"sga"},{name:"Sign Languages",iso6392B:"sgn"},{name:"Shan",iso6392B:"shn"},{name:"Sidamo",iso6392B:"sid"},{name:"Sinhala; Sinhalese",iso6392B:"sin",iso6391:"si"},{name:"Siouan languages",iso6392B:"sio"},{name:"Sino-Tibetan languages",iso6392B:"sit"},{name:"Slavic languages",iso6392B:"sla"},{name:"Slovak",iso6392B:"slo",iso6392T:"slk",iso6391:"sk"},{name:"Slovenian",iso6392B:"slv",iso6391:"sl"},{name:"Southern Sami",iso6392B:"sma"},{name:"Northern Sami",iso6392B:"sme",iso6391:"se"},{name:"Sami languages",iso6392B:"smi"},{name:"Lule Sami",iso6392B:"smj"},{name:"Inari Sami",iso6392B:"smn"},{name:"Samoan",iso6392B:"smo",iso6391:"sm"},{name:"Skolt Sami",iso6392B:"sms"},{name:"Shona",iso6392B:"sna",iso6391:"sn"},{name:"Sindhi",iso6392B:"snd",iso6391:"sd"},{name:"Soninke",iso6392B:"snk"},{name:"Sogdian",iso6392B:"sog"},{name:"Somali",iso6392B:"som",iso6391:"so"},{name:"Songhai languages",iso6392B:"son"},{name:"Sotho, Southern",iso6392B:"sot",iso6391:"st"},{name:"Spanish; Castilian",iso6392B:"spa",iso6391:"es"},{name:"Sardinian",iso6392B:"srd",iso6391:"sc"},{name:"Sranan Tongo",iso6392B:"srn"},{name:"Serbian",iso6392B:"srp",iso6391:"sr"},{name:"Serer",iso6392B:"srr"},{name:"Nilo-Saharan languages",iso6392B:"ssa"},{name:"Swati",iso6392B:"ssw",iso6391:"ss"},{name:"Sukuma",iso6392B:"suk"},{name:"Sundanese",iso6392B:"sun",iso6391:"su"},{name:"Susu",iso6392B:"sus"},{name:"Sumerian",iso6392B:"sux"},{name:"Swahili",iso6392B:"swa",iso6391:"sw"},{name:"Swedish",iso6392B:"swe",iso6391:"sv"},{name:"Classical Syriac",iso6392B:"syc"},{name:"Syriac",iso6392B:"syr"},{name:"Tahitian",iso6392B:"tah",iso6391:"ty"},{name:"Tai languages",iso6392B:"tai"},{name:"Tamil",iso6392B:"tam",iso6391:"ta"},{name:"Tatar",iso6392B:"tat",iso6391:"tt"},{name:"Telugu",iso6392B:"tel",iso6391:"te"},{name:"Timne",iso6392B:"tem"},{name:"Tereno",iso6392B:"ter"},{name:"Tetum",iso6392B:"tet"},{name:"Tajik",iso6392B:"tgk",iso6391:"tg"},{name:"Tagalog",iso6392B:"tgl",iso6391:"tl"},{name:"normal",iso6392B:"tha",iso6391:"th"},{name:"Tibetan",iso6392B:"tib",iso6392T:"bod",iso6391:"bo"},{name:"Tigre",iso6392B:"tig"},{name:"Tigrinya",iso6392B:"tir",iso6391:"ti"},{name:"Tiv",iso6392B:"tiv"},{name:"Tokelau",iso6392B:"tkl"},{name:"Klingon; tlhIngan-Hol",iso6392B:"tlh"},{name:"Tlingit",iso6392B:"tli"},{name:"Tamashek",iso6392B:"tmh"},{name:"Tonga (Nyasa)",iso6392B:"tog"},{name:"Tonga (Tonga Islands)",iso6392B:"ton",iso6391:"to"},{name:"Tok Pisin",iso6392B:"tpi"},{name:"Tsimshian",iso6392B:"tsi"},{name:"Tswana",iso6392B:"tsn",iso6391:"tn"},{name:"Tsonga",iso6392B:"tso",iso6391:"ts"},{name:"Turkmen",iso6392B:"tuk",iso6391:"tk"},{name:"Tumbuka",iso6392B:"tum"},{name:"Tupi languages",iso6392B:"tup"},{name:"Turkish",iso6392B:"tur",iso6391:"tr"},{name:"Altaic languages",iso6392B:"tut"},{name:"Tuvalu",iso6392B:"tvl"},{name:"Twi",iso6392B:"twi",iso6391:"tw"},{name:"Tuvinian",iso6392B:"tyv"},{name:"Udmurt",iso6392B:"udm"},{name:"Ugaritic",iso6392B:"uga"},{name:"Uighur; Uyghur",iso6392B:"uig",iso6391:"ug"},{name:"Ukrainian",iso6392B:"ukr",iso6391:"uk"},{name:"Umbundu",iso6392B:"umb"},{name:"Undetermined",iso6392B:"und"},{name:"Urdu",iso6392B:"urd",iso6391:"ur"},{name:"Uzbek",iso6392B:"uzb",iso6391:"uz"},{name:"Vai",iso6392B:"vai"},{name:"Venda",iso6392B:"ven",iso6391:"ve"},{name:"Vietnamese",iso6392B:"vie",iso6391:"vi"},{name:"Volapük",iso6392B:"vol",iso6391:"vo"},{name:"Votic",iso6392B:"vot"},{name:"Wakashan languages",iso6392B:"wak"},{name:"Wolaitta; Wolaytta",iso6392B:"wal"},{name:"Waray",iso6392B:"war"},{name:"Washo",iso6392B:"was"},{name:"Welsh",iso6392B:"wel",iso6392T:"cym",iso6391:"cy"},{name:"Sorbian languages",iso6392B:"wen"},{name:"Walloon",iso6392B:"wln",iso6391:"wa"},{name:"Wolof",iso6392B:"wol",iso6391:"wo"},{name:"Kalmyk; Oirat",iso6392B:"xal"},{name:"Xhosa",iso6392B:"xho",iso6391:"xh"},{name:"Yao",iso6392B:"yao"},{name:"Yapese",iso6392B:"yap"},{name:"Yiddish",iso6392B:"yid",iso6391:"yi"},{name:"Yoruba",iso6392B:"yor",iso6391:"yo"},{name:"Yupik languages",iso6392B:"ypk"},{name:"Zapotec",iso6392B:"zap"},{name:"Blissymbols; Blissymbolics; Bliss",iso6392B:"zbl"},{name:"Zenaga",iso6392B:"zen"},{name:"Standard Moroccan Tamazight",iso6392B:"zgh"},{name:"Zhuang; Chuang",iso6392B:"zha",iso6391:"za"},{name:"Zande languages",iso6392B:"znd"},{name:"Zulu",iso6392B:"zul",iso6391:"zu"},{name:"Zuni",iso6392B:"zun"},{name:"No linguistic content; Not applicable",iso6392B:"zxx"},{name:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",iso6392B:"zza"}],language_codes={},home_page=(temps.map(function(e){var t;void 0!==e.iso6391&&(t=e.iso6391,language_codes[t]=e.name),void 0!==e.iso6392B&&(t=e.iso6392B,language_codes[t]=e.name),void 0!==e.iso6392T&&(t=e.iso6392T,language_codes[t]=e.name)}),language_codes.tu="Turkish",{initiated:!1,activeRequests:[],isLoading:!1,keys:{focused_part:"menu_selection",// or, "search part", "slider part", "sub menu part", "search_value"
menu_selection:0,// the index of selected menu,
controls_menu_selection:0,modal_focus_index:0},prev_focus_dom:null,menu_doms:$("#home-page .menu-item-container"),top_menu_doms:$("#home-page .home-top-control-wrapper"),isLiveFavoriteAllowed:!0,isSearchAllowed:!0,dataLoaded:{live:!1,vod:!1,series:!1},init:function(){this.setLiveFavoritesChoice(),this.setSearchAvailability(),account_page.fillAccountDetails(),this.showCurrentWeather(),"lg"==platform&&$(".app-version").text(lg_version),"vidaa"==platform&&$(".app-version").text(vidaa_version),"zeasn"==platform||"titanos"==platform?$(".app-version").text(zeasn_version):$(".app-version").text(samsung_version),
// this.prev_focus_dom = null;
turn_off_page.prev_route="home-page","turn-off-page"!==current_route&&(current_route="home-page"),$("#loading-page").addClass("hide"),$("#login-container").hide(),$("#app").show(),$("#home-page").removeClass("hide");var i="";languages&&languages.map(function(e,t){i+='        <div           class="setting-select-option"          data-word_code="'+e.code+'"          data-language="'+e.code+'"          onmouseenter="settings_page.hoverChangeLanguageOption('+t+', true)"          onclick="settings_page.handleMenuClick()"        >          '+e.name+"        </div>"}),$("#settings-languages-options").html(i),settings_page.change_language_items=$("#change-language-settings .setting-select-option"),settings_page.doms_translated=$("*").filter(function(){return void 0!==$(this).data("word_code")}),settings_page.changeDomsLanguage(),this.applyChannelTheme(),this.checkForPlaylistExpirationDate(),this.setUserInfoTimer()},reEnter:function(){$("#home-page").removeClass("hide"),current_route="home-page"},requestMovies:function(t,e){showLoader(!0),this.isLoading=!0,this.manuallyAborted=!1;var i=this,s=api_host_url+"/player_api.php?username="+user_name+"&password="+password+"&action=",a,o;switch(t){case"live":o="get_live_categories",a="get_live_streams";break;case"vod":o="get_vod_categories",a="get_vod_streams";break;case"series":o="get_series_categories",a="get_series"}var n=function(e){switch(t){case"live":LiveModel.setMovies(e);break;case"vod":VodModel.setMovies(e);break;case"series":SeriesModel.setMovies(e)}},r=function(e){switch(t){case"live":LiveModel.setCategories(e);break;case"vod":VodModel.setCategories(e);break;case"series":SeriesModel.setCategories(e)}},l=api({method:"get",url:s+o,success:function(e){r(e)}}),s=api({method:"get",url:s+a,success:function(e){n(e)}});i.activeRequests=[l,s],$.when(l,s).then(function(){try{switch(t){case"live":LiveModel.insertMoviesToCategories();break;case"vod":VodModel.insertMoviesToCategories();break;case"series":SeriesModel.insertMoviesToCategories()}}catch(e){showToast("Error","Data loading failed")}}).then(function(){showLoader(!1),i.initPage(t,e)}).fail(function(){showLoader(!1),i.isLoading=!1,i.manuallyAborted?showToast("Cancelled","Data loading aborted"):(i.isLoading=!1,showToast("Failed","Data loading failed"))})},initPage:function(e,t){switch(e){case"live":this.dataLoaded.live=!0,checkActivePlaylist()&&channel_page.init("home-page",null,t);break;case"vod":this.dataLoaded.vod=!0,checkActivePlaylist()&&vod_series_page.init("vod");break;case"series":this.dataLoaded.series=!0,checkActivePlaylist()&&vod_series_page.init("series")}},clickMainMenu:function(){var e=parseInt(localStorage.getItem(storage_id+"load_on_demand")),t=this.keys;switch(t.menu_selection){case 0:// live favorites
e&&!this.dataLoaded.live?this.requestMovies("live",!0):this.initPage("live",!0);break;case 1:// live tv
e&&!this.dataLoaded.live?this.requestMovies("live"):this.initPage("live");break;case 2:e&&!this.dataLoaded.vod?this.requestMovies("vod"):this.initPage("vod");break;case 3:e&&!this.dataLoaded.series?this.requestMovies("series"):this.initPage("series");break;case 4:checkActivePlaylist()&&vod_series_page.init("replay")}},setLiveFavoritesChoice:function(){var e=localStorage.getItem(storage_id+"home_favorites_choice");"off"==e?(this.isLiveFavoriteAllowed=!1,$(this.menu_doms[0]).hide(),$(".menu-item").css("width","26rem"),this.hoverMainMenu(1)):(this.isLiveFavoriteAllowed=!0,$(this.menu_doms[0]).show(),$(".menu-item").css("width","21rem"),this.hoverMainMenu(0))},setSearchAvailability:function(){var e=parseInt(localStorage.getItem(storage_id+"load_on_demand"));e?(this.isSearchAllowed=!1,$("#home-search-container").hide()):(this.isSearchAllowed=!0,$("#home-search-container").show())},applyChannelTheme:function(){switch(channel_page.channel_theme=localStorage.getItem(storage_id+"channel_theme"),channel_page.channel_theme){case"classic":this.keys.modal_focus_index=0;break;case"normal":this.keys.modal_focus_index=1,$("#channel-page-right-part,#channel-page-left-part").addClass("normal");break;case"modern":this.keys.modal_focus_index=2,$("#channel-page").addClass("modern"),$("#channel-page-right-part,#channel-page-left-part").addClass("normal");break;default:this.keys.modal_focus_index=0}},showCurrentWeather:function(){var e,t,i=(weatherNow&&(e=Math.floor(parseInt(weatherNow.temp_c))+"°",t="https:"+weatherNow.condition.icon),utilities.getCurrentDateTimeFormatted());weatherCountry&&weatherCity&&$("#weather-country").text(weatherCity+", "+weatherCountry+"."),$("#current-date").text(i),$("#current-weather-icon").attr("src",t),$("#current-weather-degree").text(e)},clickControlsMenu:function(){var e=this.keys;switch(e.controls_menu_selection){case 0:// Channel theme
this.showThemeModal();break;case 1:// Playlists
playlist_page.init();break;case 2:// Settings
settings_page.init(),settings_page.clickSettingsItem(0)}},goBack:function(){if(this.isLoading)this.manuallyAborted=!0,this.abortAllRequests(),this.isLoading=!1,showLoader(!1);else{var e=this.keys;switch(e.focused_part){case"menu_selection":case"controls_menu_selection":case"search_input":case"refresh_button":case"account_button":turn_off_page.init(current_route);break;case"user_account_modal":$("#user-account-modal").modal("hide"),e.focused_part="controls_menu_selection";break;case"theme_channel_modal":this.hideThemeModal();break;case"playlist_notification_modal":this.closePlaylistExpiryNotification()}}},abortAllRequests:function(){if(this.activeRequests&&0<this.activeRequests.length){for(var e=0;e<this.activeRequests.length;e++)if(this.activeRequests[e]&&this.activeRequests[e].abort)try{this.activeRequests[e].abort()}catch(e){}this.activeRequests=[]}},showThemeModal:function(){clearTimeout(this.idleOnChannelTimer),this.keys.focused_part="theme_channel_modal",$("#channel-theme-control-modal").modal("show");var e=this.keys.modal_focus_index;
// this.modal_visible = true;
$(".image-radio").removeClass("current"),$(".image-radio").each(function(){$(this).data("index")==e&&$(this).addClass("current")}),this.updateModalFocus()},hideThemeModal:function(){this.keys.focused_part="controls_menu_selection",$("#channel-theme-control-modal").modal("hide"),this.modal_visible=!1},updateModalFocus:function(){var e=this.keys.modal_focus_index;$(".image-radio").removeClass("active"),$(".image-radio").each(function(){$(this).data("index")==e&&$(this).addClass("active").find("input").prop("checked",!0)})},handleModalSelection:function(e){switch(this.keys.modal_focus_index=e,
// Reset classes
$("#channel-page").removeClass("modern"),$("#channel-page-right-part,#channel-page-left-part").removeClass("normal"),e){case 0:localStorage.setItem(storage_id+"channel_theme",""),channel_page.channel_theme="";// Classic theme
break;case 1:localStorage.setItem(storage_id+"channel_theme","normal"),channel_page.channel_theme="normal",$("#channel-page-right-part,#channel-page-left-part").addClass("normal");break;case 2:localStorage.setItem(storage_id+"channel_theme","modern"),channel_page.channel_theme="modern",$("#channel-page").addClass("modern"),$("#channel-page-right-part,#channel-page-left-part").addClass("normal")}channel_page.resetSidebarStyle(),this.hideThemeModal()},hoverThemeChannel:function(e){$(".image-radio").removeClass("active"),$(".image-radio").each(function(){$(this).data("index")==e&&$(this).addClass("active").find("input").prop("checked",!0)}),this.keys.modal_focus_index=e},hoverMainMenu:function(e){var t=this.keys;t.focused_part="menu_selection",t.menu_selection=e,$(this.prev_focus_dom).removeClass("active"),this.prev_focus_dom=this.menu_doms[e],$(this.menu_doms[e]).addClass("active")},hoverControlsMenu:function(e){var t=this.keys;t.focused_part="controls_menu_selection",t.controls_menu_selection=e,$(this.prev_focus_dom).removeClass("active"),this.prev_focus_dom=this.top_menu_doms[e],$(this.top_menu_doms[e]).addClass("active")},hoverSearchButton:function(){var e=this.keys;e.focused_part="search_input",$(this.prev_focus_dom).removeClass("active"),$("#home-search-container").addClass("active"),this.prev_focus_dom=$("#home-search-container")[0]},hoverRefreshButton:function(){var e=this.keys;e.focused_part="refresh_button",$(this.prev_focus_dom).removeClass("active"),$("#home-refresh-container").addClass("active"),this.prev_focus_dom=$("#home-refresh-container")[0]},hoverAccountButton:function(){var e=this.keys;e.focused_part="account_button",$(this.prev_focus_dom).removeClass("active"),$("#home-account-container").addClass("active"),this.prev_focus_dom=$("#home-account-container")[0]},updatePlaylistExpiryDays:function(e){switch(e){case 0:$(".playlist-will-expire-in").text("a few hours");break;case 1:$(".playlist-will-expire-in").text(e+" day");break;case null:$(".playlist-will-expire-in").text("Unknown");break;default:$(".playlist-will-expire-in").text(e+" days")}},showPlaylistExpiryNotification:function(){$("#home-page .notification-container").show(),this.keys.focused_part="playlist_notification_modal"},closePlaylistExpiryNotification:function(){$("#home-page .notification-container").hide(),this.keys.focused_part="menu_selection"},checkForPlaylistExpirationDate:function(){if(playlist_expire_date)try{var e=utilities.convertToTimestamp(playlist_expire_date),t=utilities.timestampDiffInDays(e);this.updatePlaylistExpiryDays(t),t<=5&&0<=t&&this.showPlaylistExpiryNotification()}catch(e){this.updatePlaylistExpiryDays(null)}},setUserInfoTimer:function(){setTimeout(function(){$("#home-device-info").css({"-webkit-transform":"scale(0.75)",transform:"scale(0.75)"})},5e3)},handleMenuClick:function(){var e=this.keys;switch(e.focused_part){case"menu_selection":$(this.menu_doms[e.menu_selection]).trigger("click");break;case"controls_menu_selection":$(this.top_menu_doms[e.controls_menu_selection]).trigger("click");break;case"search_input":search_page.init("home-page","all");break;case"refresh_button":window.location.reload();break;case"account_button":account_page.init();break;case"theme_channel_modal":this.handleModalSelection(this.keys.modal_focus_index);break;case"playlist_notification_modal":this.closePlaylistExpiryNotification()}},handleMenusUpDown:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":0<e&&this.hoverControlsMenu(t.controls_menu_selection),e<0&&this.hoverAccountButton();break;case"controls_menu_selection":e<0&&this.hoverMainMenu(t.menu_selection);break;case"search_input":case"refresh_button":case"account_button":0<e&&this.hoverMainMenu(t.menu_selection)}},handleMenuLeftRight:function(e){var t=this.keys;switch(t.focused_part){case"menu_selection":var i=this.isLiveFavoriteAllowed?0:1;t.menu_selection+=e,t.menu_selection<i&&(t.menu_selection=i),t.menu_selection>=this.menu_doms.length&&(t.menu_selection=this.menu_doms.length-1),this.hoverMainMenu(t.menu_selection);break;case"controls_menu_selection":t.controls_menu_selection+=e,t.controls_menu_selection<0&&(t.controls_menu_selection=0),t.controls_menu_selection>=this.top_menu_doms.length&&(t.controls_menu_selection=this.top_menu_doms.length-1),this.hoverControlsMenu(t.controls_menu_selection);break;case"theme_channel_modal":t.modal_focus_index+=e,2<t.modal_focus_index&&(t.modal_focus_index=2),t.modal_focus_index<0&&(t.modal_focus_index=0),this.hoverThemeChannel(t.modal_focus_index);break;case"search_input":0<e?this.hoverRefreshButton():e<0&&this.hoverAccountButton();break;case"refresh_button":e<0&&(this.isSearchAllowed?this.hoverSearchButton():this.hoverAccountButton());break;case"account_button":0<e&&(this.isSearchAllowed?this.hoverSearchButton():this.hoverRefreshButton())}},HandleKey:function(e){if(!this.is_drawing)switch(e.keyCode){case tvKey.RIGHT:this.handleMenuLeftRight(1);break;case tvKey.LEFT:this.handleMenuLeftRight(-1);break;case tvKey.DOWN:this.handleMenusUpDown(1);break;case tvKey.UP:this.handleMenusUpDown(-1);break;case tvKey.ENTER:this.handleMenuClick();break;case tvKey.RETURN:this.goBack()}}}),USE_CUSTOM_KEYBOARD=!1,processingInputFocus=!1;
// Function to check if the pressed key is a back button on any platform
function isBackButtonPressed(e){
// Common ESC key
if(27===e.keyCode)return!0;
// Check for platform-specific back/return keys
if(window.tvKey){if(e.keyCode===tvKey.RETURN)return!0;
// Samsung specific
if("samsung"===platform&&10009===e.keyCode)return!0;
// LG specific
if("lg"===platform&&461===e.keyCode)return!0;
// Vidaa specific
if(("vidaa"===platform||"zeasn"===platform||"titanos"===platform)&&8===e.keyCode)return!0}return!1}
// Handle platform-specific keyboard settings
function initPlatformKeyboard(){if("samsung"===platform){document.addEventListener("visibilitychange",function(){document.hidden?webapis.avplay.suspend():webapis.avplay.restore()});for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var i=e[t];i.addEventListener("focus",function(){key_focused=!0}),i.addEventListener("blur",function(){key_focused=!1})}}else if("lg"===platform)document.addEventListener("keyboardStateChange",keyboardVisibilityChange,!1);else if("vidaa"===platform||"zeasn"===platform||"titanos"===platform){
// Track last focused input separately from active element
window.lastFocusedInput=null;for(
// Add click handlers to all inputs
var s=document.getElementsByTagName("input"),t=0;t<s.length;t++)a=s[t],a.addEventListener("click",function(e){
// Prevent de`
// fault click behavior
e.preventDefault(),e.stopPropagation()})}var a;document.addEventListener("keydown",function(e){var t=document.activeElement;
// Only apply on inputs when Enter (13) is pressed
if(13===e.keyCode&&t&&"INPUT"===t.tagName&&(!USE_CUSTOM_KEYBOARD||!custom_keyboard.isShown))
// Prevent clearing input value
return e.preventDefault(),e.stopPropagation(),
// Simply blur the input to dismiss the keyboard
t.blur(),!1})}
// Initialize custom keyboard for all platforms
function initCustomKeyboard(){
// Initialize the custom keyboard
custom_keyboard.init();for(
// Override input focus behavior to show custom keyboard
var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var i=e[t];
// Remove any existing event listeners to prevent duplicates
i.removeEventListener("focus",inputFocusHandler),i.removeEventListener("blur",inputBlurHandler),
// Focus event to show custom keyboard
i.addEventListener("focus",inputFocusHandler),
// Blur event to hide keyboard when input loses focus
i.addEventListener("blur",inputBlurHandler),
// Prevent default platform keyboard
i.addEventListener("click",function(e){USE_CUSTOM_KEYBOARD&&(e.preventDefault(),e.stopPropagation(),
// Only focus if keyboard isn't already shown
custom_keyboard.isShown||this.focus())})}
// Prevent default keyboards from appearing
"lg"===platform&&
// Watch for native keyboard events and prevent them
document.addEventListener("keyboardStateChange",function(e){var e,t;USE_CUSTOM_KEYBOARD&&(e=e.detail.visibility,e)&&(t=document.activeElement,t)&&"INPUT"===t.tagName&&(
// Force blur to hide native keyboard
t.blur(),
// Wait a moment and show our keyboard instead
setTimeout(function(){custom_keyboard.show(t)},50))},!1),
// Add additional capture phase handler specifically for platform back buttons
document.addEventListener("keydown",function(e){if(isBackButtonPressed(e)&&custom_keyboard.isShown)return custom_keyboard.hide(),e.preventDefault(),e.stopPropagation(),!1},!0)}
// Input focus handler - extracted into a named function to allow removal if needed
function inputFocusHandler(){
// Prevent focus/blur loop
processingInputFocus||(processingInputFocus=!0,key_focused=!0,
// Only show keyboard if it's not already shown
custom_keyboard.isShown||custom_keyboard.show(this),
// Reset the processing flag after a delay
setTimeout(function(){processingInputFocus=!1},50))}
// Input blur handler - extracted into a named function to allow removal if needed
function inputBlurHandler(){
// Don't process blur events if we're currently processing a focus
processingInputFocus||(key_focused=!1,
// Add a short delay to allow click events on keyboard to process
// This prevents the keyboard from disappearing when clicking its keys
setTimeout(function(){
// Only hide if no keyboard key is currently focused and we're not processing focus
processingInputFocus||document.activeElement&&$(document.activeElement).hasClass("keyboard-key")||custom_keyboard.hide()},100))}function keyboardVisibilityChange(e){var e=e.detail.visibility;e?key_focused=!0:(key_focused=!1,$("input").blur())}
// Direct global event listener for Enter button with remote control
// Flag to prevent focus event loops
$(document).ready(function(){setTimeout(function(){if("vidaa"==platform||"zeasn"==platform||"titanos"==platform){
// Use custom keyboard
USE_CUSTOM_KEYBOARD=!0;for(
// Make elements unfocusable as a tab element for older browsers
var e=document.querySelectorAll("div, span, p, img, section"),t=0;t<e.length;t++)e[t].setAttribute("tabindex","-1");// Makes them unfocusable
}$("#app").addClass(platform),initKeys(),initPlayer(),settings.initFromLocal();var i=localStorage.getItem(storage_id+"parent_account_password");parent_account_password=null!=i?i:parent_account_password,"samsung"===platform?($("#vod-series-player-video-lg").hide(),$("#channel-page-video-lg").hide()):"lg"!==platform&&"vidaa"!==platform&&"zeasn"!==platform&&"titanos"!==platform||($("#vod-series-player-video").hide(),$("#channel-page-video").hide()),login_page.getPlayListDetail(),(
// Initialize platform-specific settings or custom keyboard
USE_CUSTOM_KEYBOARD?initCustomKeyboard:initPlatformKeyboard)(),document.addEventListener("keydown",function(e){
// Check for back/return button presses from any platform
var t=isBackButtonPressed(e);
// If back button is pressed and keyboard is shown, close the keyboard
if(t&&USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown)custom_keyboard.hide(),e.preventDefault(),e.stopPropagation();else
// If custom keyboard is active and handling other key events, don't proceed
if(!(USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown&&custom_keyboard.handleRemoteKeys(e))){if("samsung"===platform)switch(e.keyCode==tvKey.EXIT&&tizen.application.getCurrentApplication().exit(),e.keyCode){case 65376:// Done
case 65385:// Cancel
return void $("input").blur()}else if("vidaa"==platform||"zeasn"==platform||"titanos"==platform){var i=document.activeElement,s=i&&"INPUT"===i.tagName;switch(e.keyCode){case 13:// OK/Enter key
if(s){if(key_focused)
// If already typing, confirm and close
key_focused=!1,
// For search page input, trigger the search
"search-page-input"===i.id&&search_page.keywordChange(),i.blur(),
// Force remove focus
document.activeElement&&document.activeElement.blur(),window.lastFocusedInput=null;else
// If using custom keyboard, show it instead of native
if(
// If not already focused for typing, start typing
window.lastFocusedInput=i,key_focused=!0,USE_CUSTOM_KEYBOARD)return custom_keyboard.show(i),e.preventDefault(),void e.stopPropagation();return e.preventDefault(),void e.stopPropagation()}break;case tvKey.RETURN:// Use TV-specific return key
case 27:// Also check for ESC key
if(USE_CUSTOM_KEYBOARD&&custom_keyboard.isShown)
// If keyboard is shown, hide it
return custom_keyboard.hide(),key_focused=!1,e.preventDefault(),void e.stopPropagation();if(key_focused)return key_focused=!1,i&&i.blur(),
// Force remove focus
document.activeElement&&document.activeElement.blur(),window.lastFocusedInput=null,e.preventDefault(),void e.stopPropagation();break;case 37:// Left arrow
case 38:// Up arrow
case 39:// Right arrow
case 40:// Down arrow
if(key_focused)
// Prevent navigation when typing
return e.preventDefault(),void e.stopPropagation();s&&(
// If we're on an input but not typing, blur it
i.blur(),document.activeElement)&&document.activeElement.blur()}e.keyCode!=tvKey.EXIT&&e.preventDefault()}if(!app_loading)switch(current_route){case"login":login_page.HandleKey(e);break;case"device_key_login_page":device_key_login_page.HandleKey(e);break;case"home-page":home_page.HandleKey(e);break;case"channel-page":channel_page.HandleKey(e);break;case"vod-series-page":vod_series_page.HandleKey(e);break;case"vod-summary-page":vod_summary_page.HandleKey(e);break;case"vod-series-player-video":vod_series_player_page.HandleKey(e);break;case"trailer-page":trailer_page.HandleKey(e);break;case"seasons-page":seasons_variable.HandleKey(e);break;case"episode-page":episode_variable.HandleKey(e);break;case"series-summary-page":series_summary_page.HandleKey(e);break;case"playlist-page":playlist_page.HandleKey(e);break;case"account-page":account_page.HandleKey(e);break;case"settings-page":settings_page.HandleKey(e);break;case"parent-confirm-page":parent_confirm_page.HandleKey(e);break;case"turn-off-page":turn_off_page.HandleKey(e);break;case"playlist-edit-page":playlist_edit_page.HandleKey(e);break;case"catch-up":catchup_page.HandleKey(e);break;case"search-page":search_page.HandleKey(e);break;case"clear_recent_page":clear_recent_page.HandleKey(e);break;case"clear_cache_page":clear_cache_page.HandleKey(e)}}}),$(".subtitle-container").css({"font-size":settings.subtitle_size/16+"rem",color:settings_page.subtitle_bg_options[settings.subtitle_bg].color,"background-color":settings_page.subtitle_bg_options[settings.subtitle_bg].background}),updateCurrentTime(),current_timer=setInterval(function(){updateCurrentTime()},3e4)},2e3)}),document.addEventListener("keydown",function(e){if(custom_keyboard&&custom_keyboard.isShown&&13===e.keyCode){var t=document.activeElement;
// If the Enter button is focused, force hide keyboard
if(t&&"keyboard-enter"===t.id)return custom_keyboard.currentInput&&"search-page-input"===custom_keyboard.currentInput.id&&search_page.keywordChange(),
// Directly hide keyboard
custom_keyboard.hide(),key_focused=!1,e.preventDefault(),e.stopPropagation(),!1}},!0);// Use capturing phase